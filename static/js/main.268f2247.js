/*! For license information please see main.268f2247.js.LICENSE.txt */
!function(){var e={4499:function(e,t,n){"use strict";var i=n(1725),r="function"===typeof Symbol&&Symbol.for,a=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,s=r?Symbol.for("react.fragment"):60107,l=r?Symbol.for("react.strict_mode"):60108,c=r?Symbol.for("react.profiler"):60114,u=r?Symbol.for("react.provider"):60109,g=r?Symbol.for("react.context"):60110,d=r?Symbol.for("react.forward_ref"):60112,h=r?Symbol.for("react.suspense"):60113,f=r?Symbol.for("react.memo"):60115,p=r?Symbol.for("react.lazy"):60116,I="function"===typeof Symbol&&Symbol.iterator;function C(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function A(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||m}function b(){}function y(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||m}A.prototype.isReactComponent={},A.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(C(85));this.updater.enqueueSetState(this,e,t,"setState")},A.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=A.prototype;var G=y.prototype=new b;G.constructor=y,i(G,A.prototype),G.isPureReactComponent=!0;var w={current:null},B=Object.prototype.hasOwnProperty,x={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,n){var i,r={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)B.call(t,i)&&!x.hasOwnProperty(i)&&(r[i]=t[i]);var l=arguments.length-2;if(1===l)r.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];r.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===r[i]&&(r[i]=l[i]);return{$$typeof:a,type:e,key:o,ref:s,props:r,_owner:w.current}}function Z(e){return"object"===typeof e&&null!==e&&e.$$typeof===a}var k=/\/+/g,R=[];function W(e,t,n,i){if(R.length){var r=R.pop();return r.result=e,r.keyPrefix=t,r.func=n,r.context=i,r.count=0,r}return{result:e,keyPrefix:t,func:n,context:i,count:0}}function M(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>R.length&&R.push(e)}function V(e,t,n,i){var r=typeof e;"undefined"!==r&&"boolean"!==r||(e=null);var s=!1;if(null===e)s=!0;else switch(r){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case a:case o:s=!0}}if(s)return n(i,e,""===t?"."+N(e,0):t),1;if(s=0,t=""===t?".":t+":",Array.isArray(e))for(var l=0;l<e.length;l++){var c=t+N(r=e[l],l);s+=V(r,c,n,i)}else if(null===e||"object"!==typeof e?c=null:c="function"===typeof(c=I&&e[I]||e["@@iterator"])?c:null,"function"===typeof c)for(e=c.call(e),l=0;!(r=e.next()).done;)s+=V(r=r.value,c=t+N(r,l++),n,i);else if("object"===r)throw n=""+e,Error(C(31,"[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n,""));return s}function F(e,t,n){return null==e?0:V(e,"",t,n)}function N(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function H(e,t){e.func.call(e.context,t,e.count++)}function T(e,t,n){var i=e.result,r=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?X(e,i,n,(function(e){return e})):null!=e&&(Z(e)&&(e=function(e,t){return{$$typeof:a,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,r+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(k,"$&/")+"/")+n)),i.push(e))}function X(e,t,n,i,r){var a="";null!=n&&(a=(""+n).replace(k,"$&/")+"/"),F(e,T,t=W(t,a,i,r)),M(t)}var Y={current:null};function E(){var e=Y.current;if(null===e)throw Error(C(321));return e}var z={ReactCurrentDispatcher:Y,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:w,IsSomeRendererActing:{current:!1},assign:i};t.Children={map:function(e,t,n){if(null==e)return e;var i=[];return X(e,i,null,t,n),i},forEach:function(e,t,n){if(null==e)return e;F(e,H,t=W(null,null,t,n)),M(t)},count:function(e){return F(e,(function(){return null}),null)},toArray:function(e){var t=[];return X(e,t,null,(function(e){return e})),t},only:function(e){if(!Z(e))throw Error(C(143));return e}},t.Component=A,t.Fragment=s,t.Profiler=c,t.PureComponent=y,t.StrictMode=l,t.Suspense=h,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(C(267,e));var r=i({},e.props),o=e.key,s=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,l=w.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(u in t)B.call(t,u)&&!x.hasOwnProperty(u)&&(r[u]=void 0===t[u]&&void 0!==c?c[u]:t[u])}var u=arguments.length-2;if(1===u)r.children=n;else if(1<u){c=Array(u);for(var g=0;g<u;g++)c[g]=arguments[g+2];r.children=c}return{$$typeof:a,type:e.type,key:o,ref:s,props:r,_owner:l}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:g,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:d,render:e}},t.isValidElement=Z,t.lazy=function(e){return{$$typeof:p,_ctor:e,_status:-1,_result:null}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return E().useCallback(e,t)},t.useContext=function(e,t){return E().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return E().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return E().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return E().useLayoutEffect(e,t)},t.useMemo=function(e,t){return E().useMemo(e,t)},t.useReducer=function(e,t,n){return E().useReducer(e,t,n)},t.useRef=function(e){return E().useRef(e)},t.useState=function(e){return E().useState(e)},t.version="16.14.0"},1060:function(e,t,n){"use strict";e.exports=n(4499)},8202:function(e,t){"use strict";var n=60103,i=60106,r=60107,a=60108,o=60114,s=60109,l=60110,c=60112,u=60113,g=60120,d=60115,h=60116,f=60121,p=60122,I=60117,C=60129,m=60131;if("function"===typeof Symbol&&Symbol.for){var v=Symbol.for;n=v("react.element"),i=v("react.portal"),r=v("react.fragment"),a=v("react.strict_mode"),o=v("react.profiler"),s=v("react.provider"),l=v("react.context"),c=v("react.forward_ref"),u=v("react.suspense"),g=v("react.suspense_list"),d=v("react.memo"),h=v("react.lazy"),f=v("react.block"),p=v("react.server.block"),I=v("react.fundamental"),C=v("react.debug_trace_mode"),m=v("react.legacy_hidden")}function A(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case r:case o:case a:case u:case g:return e;default:switch(e=e&&e.$$typeof){case l:case c:case h:case d:case s:return e;default:return t}}case i:return t}}}},3413:function(e,t,n){"use strict";n(8202)},7823:function(e){"use strict";e.exports=function(e,t){if(null===e||"undefined"===typeof e)throw new TypeError("expected first argument to be an object.");if("undefined"===typeof t||"undefined"===typeof Symbol)return e;if("function"!==typeof Object.getOwnPropertySymbols)return e;for(var n=Object.prototype.propertyIsEnumerable,i=Object(e),r=arguments.length,a=0;++a<r;)for(var o=Object(arguments[a]),s=Object.getOwnPropertySymbols(o),l=0;l<s.length;l++){var c=s[l];n.call(o,c)&&(i[c]=o[c])}return i}},9998:function(e,t){"use strict";t.Z=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(","),i=e.name||"",r=(e.type||"").toLowerCase(),a=r.replace(/\/.*$/,"");return n.some((function(e){var t=e.trim().toLowerCase();return"."===t.charAt(0)?i.toLowerCase().endsWith(t):t.endsWith("/*")?a===t.replace(/\/.*$/,""):r===t}))}return!0}},4569:function(e,t,n){e.exports=n(8036)},3381:function(e,t,n){"use strict";var i=n(3589),r=n(7297),a=n(9301),o=n(3875),s=n(1804),l=n(9145),c=n(5411),u=n(6467);e.exports=function(e){return new Promise((function(t,n){var g=e.data,d=e.headers,h=e.responseType;i.isFormData(g)&&delete d["Content-Type"];var f=new XMLHttpRequest;if(e.auth){var p=e.auth.username||"",I=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";d.Authorization="Basic "+btoa(p+":"+I)}var C=s(e.baseURL,e.url);function m(){if(f){var i="getAllResponseHeaders"in f?l(f.getAllResponseHeaders()):null,a={data:h&&"text"!==h&&"json"!==h?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:i,config:e,request:f};r(t,n,a),f=null}}if(f.open(e.method.toUpperCase(),o(C,e.params,e.paramsSerializer),!0),f.timeout=e.timeout,"onloadend"in f?f.onloadend=m:f.onreadystatechange=function(){f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))&&setTimeout(m)},f.onabort=function(){f&&(n(u("Request aborted",e,"ECONNABORTED",f)),f=null)},f.onerror=function(){n(u("Network Error",e,null,f)),f=null},f.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(u(t,e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",f)),f=null},i.isStandardBrowserEnv()){var v=(e.withCredentials||c(C))&&e.xsrfCookieName?a.read(e.xsrfCookieName):void 0;v&&(d[e.xsrfHeaderName]=v)}"setRequestHeader"in f&&i.forEach(d,(function(e,t){"undefined"===typeof g&&"content-type"===t.toLowerCase()?delete d[t]:f.setRequestHeader(t,e)})),i.isUndefined(e.withCredentials)||(f.withCredentials=!!e.withCredentials),h&&"json"!==h&&(f.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&f.addEventListener("progress",e.onDownloadProgress),"function"===typeof e.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){f&&(f.abort(),n(e),f=null)})),g||(g=null),f.send(g)}))}},8036:function(e,t,n){"use strict";var i=n(3589),r=n(4049),a=n(3773),o=n(777);function s(e){var t=new a(e),n=r(a.prototype.request,t);return i.extend(n,a.prototype,t),i.extend(n,t),n}var l=s(n(221));l.Axios=a,l.create=function(e){return s(o(l.defaults,e))},l.Cancel=n(9346),l.CancelToken=n(6857),l.isCancel=n(5517),l.all=function(e){return Promise.all(e)},l.spread=n(2312),l.isAxiosError=n(9580),e.exports=l,e.exports.default=l},9346:function(e){"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},6857:function(e,t,n){"use strict";var i=n(9346);function r(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new i(e),t(n.reason))}))}r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var e;return{token:new r((function(t){e=t})),cancel:e}},e.exports=r},5517:function(e){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},3773:function(e,t,n){"use strict";var i=n(3589),r=n(3875),a=n(7470),o=n(2733),s=n(777),l=n(7835),c=l.validators;function u(e){this.defaults=e,this.interceptors={request:new a,response:new a}}u.prototype.request=function(e){"string"===typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=s(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;void 0!==t&&l.assertOptions(t,{silentJSONParsing:c.transitional(c.boolean,"1.0.0"),forcedJSONParsing:c.transitional(c.boolean,"1.0.0"),clarifyTimeoutError:c.transitional(c.boolean,"1.0.0")},!1);var n=[],i=!0;this.interceptors.request.forEach((function(t){"function"===typeof t.runWhen&&!1===t.runWhen(e)||(i=i&&t.synchronous,n.unshift(t.fulfilled,t.rejected))}));var r,a=[];if(this.interceptors.response.forEach((function(e){a.push(e.fulfilled,e.rejected)})),!i){var u=[o,void 0];for(Array.prototype.unshift.apply(u,n),u=u.concat(a),r=Promise.resolve(e);u.length;)r=r.then(u.shift(),u.shift());return r}for(var g=e;n.length;){var d=n.shift(),h=n.shift();try{g=d(g)}catch(f){h(f);break}}try{r=o(g)}catch(f){return Promise.reject(f)}for(;a.length;)r=r.then(a.shift(),a.shift());return r},u.prototype.getUri=function(e){return e=s(this.defaults,e),r(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},i.forEach(["delete","get","head","options"],(function(e){u.prototype[e]=function(t,n){return this.request(s(n||{},{method:e,url:t,data:(n||{}).data}))}})),i.forEach(["post","put","patch"],(function(e){u.prototype[e]=function(t,n,i){return this.request(s(i||{},{method:e,url:t,data:n}))}})),e.exports=u},7470:function(e,t,n){"use strict";var i=n(3589);function r(){this.handlers=[]}r.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){i.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=r},1804:function(e,t,n){"use strict";var i=n(4044),r=n(9549);e.exports=function(e,t){return e&&!i(t)?r(e,t):t}},6467:function(e,t,n){"use strict";var i=n(6460);e.exports=function(e,t,n,r,a){var o=new Error(e);return i(o,t,n,r,a)}},2733:function(e,t,n){"use strict";var i=n(3589),r=n(2693),a=n(5517),o=n(221);function s(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return s(e),e.headers=e.headers||{},e.data=r.call(e,e.data,e.headers,e.transformRequest),e.headers=i.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),i.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||o.adapter)(e).then((function(t){return s(e),t.data=r.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return a(t)||(s(e),t&&t.response&&(t.response.data=r.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},6460:function(e){"use strict";e.exports=function(e,t,n,i,r){return e.config=t,n&&(e.code=n),e.request=i,e.response=r,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},777:function(e,t,n){"use strict";var i=n(3589);e.exports=function(e,t){t=t||{};var n={},r=["url","method","data"],a=["headers","auth","proxy","params"],o=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],s=["validateStatus"];function l(e,t){return i.isPlainObject(e)&&i.isPlainObject(t)?i.merge(e,t):i.isPlainObject(t)?i.merge({},t):i.isArray(t)?t.slice():t}function c(r){i.isUndefined(t[r])?i.isUndefined(e[r])||(n[r]=l(void 0,e[r])):n[r]=l(e[r],t[r])}i.forEach(r,(function(e){i.isUndefined(t[e])||(n[e]=l(void 0,t[e]))})),i.forEach(a,c),i.forEach(o,(function(r){i.isUndefined(t[r])?i.isUndefined(e[r])||(n[r]=l(void 0,e[r])):n[r]=l(void 0,t[r])})),i.forEach(s,(function(i){i in t?n[i]=l(e[i],t[i]):i in e&&(n[i]=l(void 0,e[i]))}));var u=r.concat(a).concat(o).concat(s),g=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===u.indexOf(e)}));return i.forEach(g,c),n}},7297:function(e,t,n){"use strict";var i=n(6467);e.exports=function(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(i("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},2693:function(e,t,n){"use strict";var i=n(3589),r=n(221);e.exports=function(e,t,n){var a=this||r;return i.forEach(n,(function(n){e=n.call(a,e,t)})),e}},221:function(e,t,n){"use strict";var i=n(3589),r=n(4341),a=n(6460),o={"Content-Type":"application/x-www-form-urlencoded"};function s(e,t){!i.isUndefined(e)&&i.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var l={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:function(){var e;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(e=n(3381)),e}(),transformRequest:[function(e,t){return r(t,"Accept"),r(t,"Content-Type"),i.isFormData(e)||i.isArrayBuffer(e)||i.isBuffer(e)||i.isStream(e)||i.isFile(e)||i.isBlob(e)?e:i.isArrayBufferView(e)?e.buffer:i.isURLSearchParams(e)?(s(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):i.isObject(e)||t&&"application/json"===t["Content-Type"]?(s(t,"application/json"),function(e,t,n){if(i.isString(e))try{return(t||JSON.parse)(e),i.trim(e)}catch(r){if("SyntaxError"!==r.name)throw r}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional,n=t&&t.silentJSONParsing,r=t&&t.forcedJSONParsing,o=!n&&"json"===this.responseType;if(o||r&&i.isString(e)&&e.length)try{return JSON.parse(e)}catch(s){if(o){if("SyntaxError"===s.name)throw a(s,this,"E_JSON_PARSE");throw s}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};i.forEach(["delete","get","head"],(function(e){l.headers[e]={}})),i.forEach(["post","put","patch"],(function(e){l.headers[e]=i.merge(o)})),e.exports=l},4049:function(e){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];return e.apply(t,n)}}},3875:function(e,t,n){"use strict";var i=n(3589);function r(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var a;if(n)a=n(t);else if(i.isURLSearchParams(t))a=t.toString();else{var o=[];i.forEach(t,(function(e,t){null!==e&&"undefined"!==typeof e&&(i.isArray(e)?t+="[]":e=[e],i.forEach(e,(function(e){i.isDate(e)?e=e.toISOString():i.isObject(e)&&(e=JSON.stringify(e)),o.push(r(t)+"="+r(e))})))})),a=o.join("&")}if(a){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}},9549:function(e){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},9301:function(e,t,n){"use strict";var i=n(3589);e.exports=i.isStandardBrowserEnv()?{write:function(e,t,n,r,a,o){var s=[];s.push(e+"="+encodeURIComponent(t)),i.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),i.isString(r)&&s.push("path="+r),i.isString(a)&&s.push("domain="+a),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},4044:function(e){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},9580:function(e){"use strict";e.exports=function(e){return"object"===typeof e&&!0===e.isAxiosError}},5411:function(e,t,n){"use strict";var i=n(3589);e.exports=i.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var i=e;return t&&(n.setAttribute("href",i),i=n.href),n.setAttribute("href",i),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=i.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},4341:function(e,t,n){"use strict";var i=n(3589);e.exports=function(e,t){i.forEach(e,(function(n,i){i!==t&&i.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[i])}))}},9145:function(e,t,n){"use strict";var i=n(3589),r=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,a,o={};return e?(i.forEach(e.split("\n"),(function(e){if(a=e.indexOf(":"),t=i.trim(e.substr(0,a)).toLowerCase(),n=i.trim(e.substr(a+1)),t){if(o[t]&&r.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([n]):o[t]?o[t]+", "+n:n}})),o):o}},2312:function(e){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},7835:function(e,t,n){"use strict";var i=n(8593),r={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){r[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var a={},o=i.version.split(".");function s(e,t){for(var n=t?t.split("."):o,i=e.split("."),r=0;r<3;r++){if(n[r]>i[r])return!0;if(n[r]<i[r])return!1}return!1}r.transitional=function(e,t,n){var r=t&&s(t);function o(e,t){return"[Axios v"+i.version+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,i,s){if(!1===e)throw new Error(o(i," has been removed in "+t));return r&&!a[i]&&(a[i]=!0,console.warn(o(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,s)}},e.exports={isOlderVersion:s,assertOptions:function(e,t,n){if("object"!==typeof e)throw new TypeError("options must be an object");for(var i=Object.keys(e),r=i.length;r-- >0;){var a=i[r],o=t[a];if(o){var s=e[a],l=void 0===s||o(s,a,e);if(!0!==l)throw new TypeError("option "+a+" must be "+l)}else if(!0!==n)throw Error("Unknown option "+a)}},validators:r}},3589:function(e,t,n){"use strict";var i=n(4049),r=Object.prototype.toString;function a(e){return"[object Array]"===r.call(e)}function o(e){return"undefined"===typeof e}function s(e){return null!==e&&"object"===typeof e}function l(e){if("[object Object]"!==r.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function c(e){return"[object Function]"===r.call(e)}function u(e,t){if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),a(e))for(var n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.call(null,e[r],r,e)}e.exports={isArray:a,isArrayBuffer:function(e){return"[object ArrayBuffer]"===r.call(e)},isBuffer:function(e){return null!==e&&!o(e)&&null!==e.constructor&&!o(e.constructor)&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!==typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"===typeof e},isNumber:function(e){return"number"===typeof e},isObject:s,isPlainObject:l,isUndefined:o,isDate:function(e){return"[object Date]"===r.call(e)},isFile:function(e){return"[object File]"===r.call(e)},isBlob:function(e){return"[object Blob]"===r.call(e)},isFunction:c,isStream:function(e){return s(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!==typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)},forEach:u,merge:function e(){var t={};function n(n,i){l(t[i])&&l(n)?t[i]=e(t[i],n):l(n)?t[i]=e({},n):a(n)?t[i]=n.slice():t[i]=n}for(var i=0,r=arguments.length;i<r;i++)u(arguments[i],n);return t},extend:function(e,t,n){return u(t,(function(t,r){e[r]=n&&"function"===typeof t?i(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},7494:function(e){function t(e,t,n){var i,r,a,o,s;function l(){var c=Date.now()-o;c<t&&c>=0?i=setTimeout(l,t-c):(i=null,n||(s=e.apply(a,r),a=r=null))}null==t&&(t=100);var c=function(){a=this,r=arguments,o=Date.now();var c=n&&!i;return i||(i=setTimeout(l,t)),c&&(s=e.apply(a,r),a=r=null),s};return c.clear=function(){i&&(clearTimeout(i),i=null)},c.flush=function(){i&&(s=e.apply(a,r),a=r=null,clearTimeout(i),i=null)},c}t.debounce=t,e.exports=t},5456:function(e,t,n){"use strict";var i=n(9583);function r(e,t){for(var n in t)a(t,n)&&(e[n]=t[n])}function a(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e){i(e)||(e={});for(var t=arguments.length,n=1;n<t;n++){var a=arguments[n];i(a)&&r(e,a)}return e}},9583:function(e){"use strict";e.exports=function(e){return"undefined"!==typeof e&&null!==e&&("object"===typeof e||"function"===typeof e)}},3050:function(e,t,n){var i,r=r||{version:"5.3.0"};if(t.fabric=r,"undefined"!==typeof document&&"undefined"!==typeof window)document instanceof("undefined"!==typeof HTMLDocument?HTMLDocument:Document)?r.document=document:r.document=document.implementation.createHTMLDocument(""),r.window=window;else{var a=new(n(4960).JSDOM)(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;r.document=a.document,r.jsdomImplForWrapper=n(6759).implForWrapper,r.nodeCanvas=n(6272).Canvas,r.window=a,DOMParser=r.window.DOMParser}function o(e,t){var n=e.canvas,i=t.targetCanvas,r=i.getContext("2d");r.translate(0,i.height),r.scale(1,-1);var a=n.height-i.height;r.drawImage(n,0,a,i.width,i.height,0,0,i.width,i.height)}function s(e,t){var n=t.targetCanvas.getContext("2d"),i=t.destinationWidth,r=t.destinationHeight,a=i*r*4,o=new Uint8Array(this.imageBuffer,0,a),s=new Uint8ClampedArray(this.imageBuffer,0,a);e.readPixels(0,0,i,r,e.RGBA,e.UNSIGNED_BYTE,o);var l=new ImageData(s,i,r);n.putImageData(l,0,0)}r.isTouchSupported="ontouchstart"in r.window||"ontouchstart"in r.document||r.window&&r.window.navigator&&r.window.navigator.maxTouchPoints>0,r.isLikelyNode="undefined"!==typeof Buffer&&"undefined"===typeof window,r.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],r.DPI=96,r.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",r.commaWsp="(?:\\s+,?\\s*|,\\s*)",r.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/gi,r.reNonWord=/[ \n\.,;!\?\-]/,r.fontPaths={},r.iMatrix=[1,0,0,1,0,0],r.svgNS="http://www.w3.org/2000/svg",r.perfLimitSizeTotal=2097152,r.maxCacheSideLimit=4096,r.minCacheSideLimit=256,r.charWidthsCache={},r.textureSize=2048,r.disableStyleCopyPaste=!1,r.enableGLFiltering=!0,r.devicePixelRatio=r.window.devicePixelRatio||r.window.webkitDevicePixelRatio||r.window.mozDevicePixelRatio||1,r.browserShadowBlurConstant=1,r.arcToSegmentsCache={},r.boundsOfCurveCache={},r.cachesBoundsOfCurve=!0,r.forceGLPutImageData=!1,r.initFilterBackend=function(){return r.enableGLFiltering&&r.isWebglSupported&&r.isWebglSupported(r.textureSize)?(console.log("max texture size: "+r.maxTextureSize),new r.WebglFilterBackend({tileSize:r.textureSize})):r.Canvas2dFilterBackend?new r.Canvas2dFilterBackend:void 0},"undefined"!==typeof document&&"undefined"!==typeof window&&(window.fabric=r),function(){function e(e,t){if(this.__eventListeners[e]){var n=this.__eventListeners[e];t?n[n.indexOf(t)]=!1:r.util.array.fill(n,!1)}}function t(e,t){var n=function(){t.apply(this,arguments),this.off(e,n)}.bind(this);this.on(e,n)}r.Observable={fire:function(e,t){if(!this.__eventListeners)return this;var n=this.__eventListeners[e];if(!n)return this;for(var i=0,r=n.length;i<r;i++)n[i]&&n[i].call(this,t||{});return this.__eventListeners[e]=n.filter((function(e){return!1!==e})),this},on:function(e,t){if(this.__eventListeners||(this.__eventListeners={}),1===arguments.length)for(var n in e)this.on(n,e[n]);else this.__eventListeners[e]||(this.__eventListeners[e]=[]),this.__eventListeners[e].push(t);return this},once:function(e,n){if(1===arguments.length)for(var i in e)t.call(this,i,e[i]);else t.call(this,e,n);return this},off:function(t,n){if(!this.__eventListeners)return this;if(0===arguments.length)for(t in this.__eventListeners)e.call(this,t);else if(1===arguments.length&&"object"===typeof arguments[0])for(var i in t)e.call(this,i,t[i]);else e.call(this,t,n);return this}}}(),r.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var e=0,t=arguments.length;e<t;e++)this._onObjectAdded(arguments[e]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(e,t,n){var i=this._objects;return n?i[t]=e:i.splice(t,0,e),this._onObjectAdded&&this._onObjectAdded(e),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var e,t=this._objects,n=!1,i=0,r=arguments.length;i<r;i++)-1!==(e=t.indexOf(arguments[i]))&&(n=!0,t.splice(e,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[i]));return this.renderOnAddRemove&&n&&this.requestRenderAll(),this},forEachObject:function(e,t){for(var n=this.getObjects(),i=0,r=n.length;i<r;i++)e.call(t,n[i],i,n);return this},getObjects:function(e){return"undefined"===typeof e?this._objects.concat():this._objects.filter((function(t){return t.type===e}))},item:function(e){return this._objects[e]},isEmpty:function(){return 0===this._objects.length},size:function(){return this._objects.length},contains:function(e,t){return this._objects.indexOf(e)>-1||!!t&&this._objects.some((function(t){return"function"===typeof t.contains&&t.contains(e,!0)}))},complexity:function(){return this._objects.reduce((function(e,t){return e+=t.complexity?t.complexity():0}),0)}},r.CommonMethods={_setOptions:function(e){for(var t in e)this.set(t,e[t])},_initGradient:function(e,t){!e||!e.colorStops||e instanceof r.Gradient||this.set(t,new r.Gradient(e))},_initPattern:function(e,t,n){!e||!e.source||e instanceof r.Pattern?n&&n():this.set(t,new r.Pattern(e,n))},_setObject:function(e){for(var t in e)this._set(t,e[t])},set:function(e,t){return"object"===typeof e?this._setObject(e):this._set(e,t),this},_set:function(e,t){this[e]=t},toggle:function(e){var t=this.get(e);return"boolean"===typeof t&&this.set(e,!t),this},get:function(e){return this[e]}},function(e){var t=Math.sqrt,n=Math.atan2,i=Math.pow,a=Math.PI/180,o=Math.PI/2;r.util={cos:function(e){if(0===e)return 1;switch(e<0&&(e=-e),e/o){case 1:case 3:return 0;case 2:return-1}return Math.cos(e)},sin:function(e){if(0===e)return 0;var t=1;switch(e<0&&(t=-1),e/o){case 1:return t;case 2:return 0;case 3:return-t}return Math.sin(e)},removeFromArray:function(e,t){var n=e.indexOf(t);return-1!==n&&e.splice(n,1),e},getRandomInt:function(e,t){return Math.floor(Math.random()*(t-e+1))+e},degreesToRadians:function(e){return e*a},radiansToDegrees:function(e){return e/a},rotatePoint:function(e,t,n){var i=new r.Point(e.x-t.x,e.y-t.y),a=r.util.rotateVector(i,n);return new r.Point(a.x,a.y).addEquals(t)},rotateVector:function(e,t){var n=r.util.sin(t),i=r.util.cos(t);return{x:e.x*i-e.y*n,y:e.x*n+e.y*i}},createVector:function(e,t){return new r.Point(t.x-e.x,t.y-e.y)},calcAngleBetweenVectors:function(e,t){return Math.acos((e.x*t.x+e.y*t.y)/(Math.hypot(e.x,e.y)*Math.hypot(t.x,t.y)))},getHatVector:function(e){return new r.Point(e.x,e.y).multiply(1/Math.hypot(e.x,e.y))},getBisector:function(e,t,n){var i=r.util.createVector(e,t),a=r.util.createVector(e,n),o=r.util.calcAngleBetweenVectors(i,a),s=o*(0===r.util.calcAngleBetweenVectors(r.util.rotateVector(i,o),a)?1:-1)/2;return{vector:r.util.getHatVector(r.util.rotateVector(i,s)),angle:o}},projectStrokeOnPoints:function(e,t,n){var i=[],a=t.strokeWidth/2,o=t.strokeUniform?new r.Point(1/t.scaleX,1/t.scaleY):new r.Point(1,1),s=function(e){var t=a/Math.hypot(e.x,e.y);return new r.Point(e.x*t*o.x,e.y*t*o.y)};return e.length<=1||e.forEach((function(l,c){var u,g,d=new r.Point(l.x,l.y);0===c?(g=e[c+1],u=n?s(r.util.createVector(g,d)).addEquals(d):e[e.length-1]):c===e.length-1?(u=e[c-1],g=n?s(r.util.createVector(u,d)).addEquals(d):e[0]):(u=e[c-1],g=e[c+1]);var h,f,p=r.util.getBisector(d,u,g),I=p.vector,C=p.angle;if("miter"===t.strokeLineJoin&&(h=-a/Math.sin(C/2),f=new r.Point(I.x*h*o.x,I.y*h*o.y),Math.hypot(f.x,f.y)/a<=t.strokeMiterLimit))return i.push(d.add(f)),void i.push(d.subtract(f));h=-a*Math.SQRT2,f=new r.Point(I.x*h*o.x,I.y*h*o.y),i.push(d.add(f)),i.push(d.subtract(f))})),i},transformPoint:function(e,t,n){return n?new r.Point(t[0]*e.x+t[2]*e.y,t[1]*e.x+t[3]*e.y):new r.Point(t[0]*e.x+t[2]*e.y+t[4],t[1]*e.x+t[3]*e.y+t[5])},makeBoundingBoxFromPoints:function(e,t){if(t)for(var n=0;n<e.length;n++)e[n]=r.util.transformPoint(e[n],t);var i=[e[0].x,e[1].x,e[2].x,e[3].x],a=r.util.array.min(i),o=r.util.array.max(i)-a,s=[e[0].y,e[1].y,e[2].y,e[3].y],l=r.util.array.min(s);return{left:a,top:l,width:o,height:r.util.array.max(s)-l}},invertTransform:function(e){var t=1/(e[0]*e[3]-e[1]*e[2]),n=[t*e[3],-t*e[1],-t*e[2],t*e[0]],i=r.util.transformPoint({x:e[4],y:e[5]},n,!0);return n[4]=-i.x,n[5]=-i.y,n},toFixed:function(e,t){return parseFloat(Number(e).toFixed(t))},parseUnit:function(e,t){var n=/\D{0,2}$/.exec(e),i=parseFloat(e);switch(t||(t=r.Text.DEFAULT_SVG_FONT_SIZE),n[0]){case"mm":return i*r.DPI/25.4;case"cm":return i*r.DPI/2.54;case"in":return i*r.DPI;case"pt":return i*r.DPI/72;case"pc":return i*r.DPI/72*12;case"em":return i*t;default:return i}},falseFunction:function(){return!1},getKlass:function(e,t){return e=r.util.string.camelize(e.charAt(0).toUpperCase()+e.slice(1)),r.util.resolveNamespace(t)[e]},getSvgAttributes:function(e){var t=["instantiated_by_use","style","id","class"];switch(e){case"linearGradient":t=t.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":t=t.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":t=t.concat(["offset","stop-color","stop-opacity"])}return t},resolveNamespace:function(t){if(!t)return r;var n,i=t.split("."),a=i.length,o=e||r.window;for(n=0;n<a;++n)o=o[i[n]];return o},loadImage:function(e,t,n,i){if(e){var a=r.util.createImage(),o=function(){t&&t.call(n,a,!1),a=a.onload=a.onerror=null};a.onload=o,a.onerror=function(){r.log("Error loading "+a.src),t&&t.call(n,null,!0),a=a.onload=a.onerror=null},0!==e.indexOf("data")&&void 0!==i&&null!==i&&(a.crossOrigin=i),"data:image/svg"===e.substring(0,14)&&(a.onload=null,r.util.loadImageInDom(a,o)),a.src=e}else t&&t.call(n,e)},loadImageInDom:function(e,t){var n=r.document.createElement("div");n.style.width=n.style.height="1px",n.style.left=n.style.top="-100%",n.style.position="absolute",n.appendChild(e),r.document.querySelector("body").appendChild(n),e.onload=function(){t(),n.parentNode.removeChild(n),n=null}},enlivenObjects:function(e,t,n,i){var a=[],o=0,s=(e=e||[]).length;function l(){++o===s&&t&&t(a.filter((function(e){return e})))}s?e.forEach((function(e,t){e&&e.type?r.util.getKlass(e.type,n).fromObject(e,(function(n,r){r||(a[t]=n),i&&i(e,n,r),l()})):l()})):t&&t(a)},enlivenObjectEnlivables:function(e,t,n){var i=r.Object.ENLIVEN_PROPS.filter((function(t){return!!e[t]}));r.util.enlivenObjects(i.map((function(t){return e[t]})),(function(e){var r={};i.forEach((function(n,i){r[n]=e[i],t&&(t[n]=e[i])})),n&&n(r)}))},enlivenPatterns:function(e,t){function n(){++a===o&&t&&t(i)}var i=[],a=0,o=(e=e||[]).length;o?e.forEach((function(e,t){e&&e.source?new r.Pattern(e,(function(e){i[t]=e,n()})):(i[t]=e,n())})):t&&t(i)},groupSVGElements:function(e,t,n){var i;return e&&1===e.length?("undefined"!==typeof n&&(e[0].sourcePath=n),e[0]):(t&&(t.width&&t.height?t.centerPoint={x:t.width/2,y:t.height/2}:(delete t.width,delete t.height)),i=new r.Group(e,t),"undefined"!==typeof n&&(i.sourcePath=n),i)},populateWithProperties:function(e,t,n){if(n&&Array.isArray(n))for(var i=0,r=n.length;i<r;i++)n[i]in e&&(t[n[i]]=e[n[i]])},createCanvasElement:function(){return r.document.createElement("canvas")},copyCanvasElement:function(e){var t=r.util.createCanvasElement();return t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0),t},toDataURL:function(e,t,n){return e.toDataURL("image/"+t,n)},createImage:function(){return r.document.createElement("img")},multiplyTransformMatrices:function(e,t,n){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],n?0:e[0]*t[4]+e[2]*t[5]+e[4],n?0:e[1]*t[4]+e[3]*t[5]+e[5]]},qrDecompose:function(e){var r=n(e[1],e[0]),o=i(e[0],2)+i(e[1],2),s=t(o),l=(e[0]*e[3]-e[2]*e[1])/s,c=n(e[0]*e[2]+e[1]*e[3],o);return{angle:r/a,scaleX:s,scaleY:l,skewX:c/a,skewY:0,translateX:e[4],translateY:e[5]}},calcRotateMatrix:function(e){if(!e.angle)return r.iMatrix.concat();var t=r.util.degreesToRadians(e.angle),n=r.util.cos(t),i=r.util.sin(t);return[n,i,-i,n,0,0]},calcDimensionsMatrix:function(e){var t="undefined"===typeof e.scaleX?1:e.scaleX,n="undefined"===typeof e.scaleY?1:e.scaleY,i=[e.flipX?-t:t,0,0,e.flipY?-n:n,0,0],a=r.util.multiplyTransformMatrices,o=r.util.degreesToRadians;return e.skewX&&(i=a(i,[1,0,Math.tan(o(e.skewX)),1],!0)),e.skewY&&(i=a(i,[1,Math.tan(o(e.skewY)),0,1],!0)),i},composeMatrix:function(e){var t=[1,0,0,1,e.translateX||0,e.translateY||0],n=r.util.multiplyTransformMatrices;return e.angle&&(t=n(t,r.util.calcRotateMatrix(e))),(1!==e.scaleX||1!==e.scaleY||e.skewX||e.skewY||e.flipX||e.flipY)&&(t=n(t,r.util.calcDimensionsMatrix(e))),t},resetObjectTransform:function(e){e.scaleX=1,e.scaleY=1,e.skewX=0,e.skewY=0,e.flipX=!1,e.flipY=!1,e.rotate(0)},saveObjectTransform:function(e){return{scaleX:e.scaleX,scaleY:e.scaleY,skewX:e.skewX,skewY:e.skewY,angle:e.angle,left:e.left,flipX:e.flipX,flipY:e.flipY,top:e.top}},isTransparent:function(e,t,n,i){i>0&&(t>i?t-=i:t=0,n>i?n-=i:n=0);var r,a=!0,o=e.getImageData(t,n,2*i||1,2*i||1),s=o.data.length;for(r=3;r<s&&!1!==(a=o.data[r]<=0);r+=4);return o=null,a},parsePreserveAspectRatioAttribute:function(e){var t,n="meet",i=e.split(" ");return i&&i.length&&("meet"!==(n=i.pop())&&"slice"!==n?(t=n,n="meet"):i.length&&(t=i.pop())),{meetOrSlice:n,alignX:"none"!==t?t.slice(1,4):"none",alignY:"none"!==t?t.slice(5,8):"none"}},clearFabricFontCache:function(e){(e=(e||"").toLowerCase())?r.charWidthsCache[e]&&delete r.charWidthsCache[e]:r.charWidthsCache={}},limitDimsByArea:function(e,t){var n=Math.sqrt(t*e),i=Math.floor(t/n);return{x:Math.floor(n),y:i}},capValue:function(e,t,n){return Math.max(e,Math.min(t,n))},findScaleToFit:function(e,t){return Math.min(t.width/e.width,t.height/e.height)},findScaleToCover:function(e,t){return Math.max(t.width/e.width,t.height/e.height)},matrixToSVG:function(e){return"matrix("+e.map((function(e){return r.util.toFixed(e,r.Object.NUM_FRACTION_DIGITS)})).join(" ")+")"},removeTransformFromObject:function(e,t){var n=r.util.invertTransform(t),i=r.util.multiplyTransformMatrices(n,e.calcOwnMatrix());r.util.applyTransformToObject(e,i)},addTransformToObject:function(e,t){r.util.applyTransformToObject(e,r.util.multiplyTransformMatrices(t,e.calcOwnMatrix()))},applyTransformToObject:function(e,t){var n=r.util.qrDecompose(t),i=new r.Point(n.translateX,n.translateY);e.flipX=!1,e.flipY=!1,e.set("scaleX",n.scaleX),e.set("scaleY",n.scaleY),e.skewX=n.skewX,e.skewY=n.skewY,e.angle=n.angle,e.setPositionByOrigin(i,"center","center")},sizeAfterTransform:function(e,t,n){var i=e/2,a=t/2,o=[{x:-i,y:-a},{x:i,y:-a},{x:-i,y:a},{x:i,y:a}],s=r.util.calcDimensionsMatrix(n),l=r.util.makeBoundingBoxFromPoints(o,s);return{x:l.width,y:l.height}},mergeClipPaths:function(e,t){var n=e,i=t;n.inverted&&!i.inverted&&(n=t,i=e),r.util.applyTransformToObject(i,r.util.multiplyTransformMatrices(r.util.invertTransform(n.calcTransformMatrix()),i.calcTransformMatrix()));var a=n.inverted&&i.inverted;return a&&(n.inverted=i.inverted=!1),new r.Group([n],{clipPath:i,inverted:a})},hasStyleChanged:function(e,t,n){return n=n||!1,e.fill!==t.fill||e.stroke!==t.stroke||e.strokeWidth!==t.strokeWidth||e.fontSize!==t.fontSize||e.fontFamily!==t.fontFamily||e.fontWeight!==t.fontWeight||e.fontStyle!==t.fontStyle||e.textBackgroundColor!==t.textBackgroundColor||e.deltaY!==t.deltaY||n&&(e.overline!==t.overline||e.underline!==t.underline||e.linethrough!==t.linethrough)},stylesToArray:function(e,t){e=r.util.object.clone(e,!0);for(var n=t.split("\n"),i=-1,a={},o=[],s=0;s<n.length;s++)if(e[s])for(var l=0;l<n[s].length;l++){i++;var c=e[s][l];if(c&&Object.keys(c).length>0)r.util.hasStyleChanged(a,c,!0)?o.push({start:i,end:i+1,style:c}):o[o.length-1].end++;a=c||{}}else i+=n[s].length;return o},stylesFromArray:function(e,t){if(!Array.isArray(e))return e;for(var n=t.split("\n"),i=-1,r=0,a={},o=0;o<n.length;o++)for(var s=0;s<n[o].length;s++)i++,e[r]&&e[r].start<=i&&i<e[r].end&&(a[o]=a[o]||{},a[o][s]=Object.assign({},e[r].style),i===e[r].end-1&&r++);return a}}}(t),function(){var e=Array.prototype.join,t={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},n={m:"l",M:"L"};function i(e,t,n,i,a,o,s,l,c,u,g){var d=r.util.cos(e),h=r.util.sin(e),f=r.util.cos(t),p=r.util.sin(t),I=n*a*f-i*o*p+s,C=i*a*f+n*o*p+l;return["C",u+c*(-n*a*h-i*o*d),g+c*(-i*a*h+n*o*d),I+c*(n*a*p+i*o*f),C+c*(i*a*p-n*o*f),I,C]}function a(e,t,n,i){var r=Math.atan2(t,e),a=Math.atan2(i,n);return a>=r?a-r:2*Math.PI-(r-a)}function o(e,t,n){for(var o=n[1],s=n[2],l=n[3],c=n[4],u=n[5],g=function(e,t,n,o,s,l,c){var u=Math.PI,g=c*u/180,d=r.util.sin(g),h=r.util.cos(g),f=0,p=0,I=-h*e*.5-d*t*.5,C=-h*t*.5+d*e*.5,m=(n=Math.abs(n))*n,v=(o=Math.abs(o))*o,A=C*C,b=I*I,y=m*v-m*A-v*b,G=0;if(y<0){var w=Math.sqrt(1-y/(m*v));n*=w,o*=w}else G=(s===l?-1:1)*Math.sqrt(y/(m*A+v*b));var B=G*n*C/o,x=-G*o*I/n,S=h*B-d*x+.5*e,Z=d*B+h*x+.5*t,k=a(1,0,(I-B)/n,(C-x)/o),R=a((I-B)/n,(C-x)/o,(-I-B)/n,(-C-x)/o);0===l&&R>0?R-=2*u:1===l&&R<0&&(R+=2*u);for(var W=Math.ceil(Math.abs(R/u*2)),M=[],V=R/W,F=8/3*Math.sin(V/4)*Math.sin(V/4)/Math.sin(V/2),N=k+V,H=0;H<W;H++)M[H]=i(k,N,h,d,n,o,S,Z,F,f,p),f=M[H][5],p=M[H][6],k=N,N+=V;return M}(n[6]-e,n[7]-t,o,s,c,u,l),d=0,h=g.length;d<h;d++)g[d][1]+=e,g[d][2]+=t,g[d][3]+=e,g[d][4]+=t,g[d][5]+=e,g[d][6]+=t;return g}function s(e,t,n,i){return Math.sqrt((n-e)*(n-e)+(i-t)*(i-t))}function l(e,t,n,i,r,a,o,s){return function(l){var c,u=(c=l)*c*c,g=function(e){return 3*e*e*(1-e)}(l),d=function(e){return 3*e*(1-e)*(1-e)}(l),h=function(e){return(1-e)*(1-e)*(1-e)}(l);return{x:o*u+r*g+n*d+e*h,y:s*u+a*g+i*d+t*h}}}function c(e,t,n,i,r,a,o,s){return function(l){var c=1-l,u=3*c*c*(n-e)+6*c*l*(r-n)+3*l*l*(o-r),g=3*c*c*(i-t)+6*c*l*(a-i)+3*l*l*(s-a);return Math.atan2(g,u)}}function u(e,t,n,i,r,a){return function(o){var s,l=(s=o)*s,c=function(e){return 2*e*(1-e)}(o),u=function(e){return(1-e)*(1-e)}(o);return{x:r*l+n*c+e*u,y:a*l+i*c+t*u}}}function g(e,t,n,i,r,a){return function(o){var s=1-o,l=2*s*(n-e)+2*o*(r-n),c=2*s*(i-t)+2*o*(a-i);return Math.atan2(c,l)}}function d(e,t,n){var i,r,a={x:t,y:n},o=0;for(r=1;r<=100;r+=1)i=e(r/100),o+=s(a.x,a.y,i.x,i.y),a=i;return o}function h(e,t){for(var n,i,r,a=0,o=0,l=e.iterator,c={x:e.x,y:e.y},u=.01,g=e.angleFinder;o<t&&u>1e-4;)n=l(a),r=a,(i=s(c.x,c.y,n.x,n.y))+o>t?(a-=u,u/=2):(c=n,a+=u,o+=i);return n.angle=g(r),n}function f(e){for(var t,n,i,r,a=0,o=e.length,h=0,f=0,p=0,I=0,C=[],m=0;m<o;m++){switch(i={x:h,y:f,command:(t=e[m])[0]},t[0]){case"M":i.length=0,p=h=t[1],I=f=t[2];break;case"L":i.length=s(h,f,t[1],t[2]),h=t[1],f=t[2];break;case"C":n=l(h,f,t[1],t[2],t[3],t[4],t[5],t[6]),r=c(h,f,t[1],t[2],t[3],t[4],t[5],t[6]),i.iterator=n,i.angleFinder=r,i.length=d(n,h,f),h=t[5],f=t[6];break;case"Q":n=u(h,f,t[1],t[2],t[3],t[4]),r=g(h,f,t[1],t[2],t[3],t[4]),i.iterator=n,i.angleFinder=r,i.length=d(n,h,f),h=t[3],f=t[4];break;case"Z":case"z":i.destX=p,i.destY=I,i.length=s(h,f,p,I),h=p,f=I}a+=i.length,C.push(i)}return C.push({length:a,x:h,y:f}),C}r.util.joinPath=function(e){return e.map((function(e){return e.join(" ")})).join(" ")},r.util.parsePath=function(e){var i,a,o,s,l,c=[],u=[],g=r.rePathCommand,d="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",h="("+d+")"+r.commaWsp,f="([01])"+r.commaWsp+"?",p=new RegExp(h+"?"+h+"?"+h+f+f+h+"?("+d+")","g");if(!e||!e.match)return c;for(var I,C=0,m=(l=e.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi)).length;C<m;C++){s=(i=l[C]).slice(1).trim(),u.length=0;var v=i.charAt(0);if(I=[v],"a"===v.toLowerCase())for(var A;A=p.exec(s);)for(var b=1;b<A.length;b++)u.push(A[b]);else for(;o=g.exec(s);)u.push(o[0]);b=0;for(var y=u.length;b<y;b++)a=parseFloat(u[b]),isNaN(a)||I.push(a);var G=t[v.toLowerCase()],w=n[v]||v;if(I.length-1>G)for(var B=1,x=I.length;B<x;B+=G)c.push([v].concat(I.slice(B,B+G))),v=w;else c.push(I)}return c},r.util.makePathSimpler=function(e){var t,n,i,r,a,s,l=0,c=0,u=e.length,g=0,d=0,h=[];for(n=0;n<u;++n){switch(i=!1,(t=e[n].slice(0))[0]){case"l":t[0]="L",t[1]+=l,t[2]+=c;case"L":l=t[1],c=t[2];break;case"h":t[1]+=l;case"H":t[0]="L",t[2]=c,l=t[1];break;case"v":t[1]+=c;case"V":t[0]="L",c=t[1],t[1]=l,t[2]=c;break;case"m":t[0]="M",t[1]+=l,t[2]+=c;case"M":l=t[1],c=t[2],g=t[1],d=t[2];break;case"c":t[0]="C",t[1]+=l,t[2]+=c,t[3]+=l,t[4]+=c,t[5]+=l,t[6]+=c;case"C":a=t[3],s=t[4],l=t[5],c=t[6];break;case"s":t[0]="S",t[1]+=l,t[2]+=c,t[3]+=l,t[4]+=c;case"S":"C"===r?(a=2*l-a,s=2*c-s):(a=l,s=c),l=t[3],c=t[4],t[0]="C",t[5]=t[3],t[6]=t[4],t[3]=t[1],t[4]=t[2],t[1]=a,t[2]=s,a=t[3],s=t[4];break;case"q":t[0]="Q",t[1]+=l,t[2]+=c,t[3]+=l,t[4]+=c;case"Q":a=t[1],s=t[2],l=t[3],c=t[4];break;case"t":t[0]="T",t[1]+=l,t[2]+=c;case"T":"Q"===r?(a=2*l-a,s=2*c-s):(a=l,s=c),t[0]="Q",l=t[1],c=t[2],t[1]=a,t[2]=s,t[3]=l,t[4]=c;break;case"a":t[0]="A",t[6]+=l,t[7]+=c;case"A":i=!0,h=h.concat(o(l,c,t)),l=t[6],c=t[7];break;case"z":case"Z":l=g,c=d}i||h.push(t),r=t[0]}return h},r.util.getSmoothPathFromPoints=function(e,t){var n,i=[],a=new r.Point(e[0].x,e[0].y),o=new r.Point(e[1].x,e[1].y),s=e.length,l=1,c=0,u=s>2;for(t=t||0,u&&(l=e[2].x<o.x?-1:e[2].x===o.x?0:1,c=e[2].y<o.y?-1:e[2].y===o.y?0:1),i.push(["M",a.x-l*t,a.y-c*t]),n=1;n<s;n++){if(!a.eq(o)){var g=a.midPointFrom(o);i.push(["Q",a.x,a.y,g.x,g.y])}a=e[n],n+1<e.length&&(o=e[n+1])}return u&&(l=a.x>e[n-2].x?1:a.x===e[n-2].x?0:-1,c=a.y>e[n-2].y?1:a.y===e[n-2].y?0:-1),i.push(["L",a.x+l*t,a.y+c*t]),i},r.util.getPathSegmentsInfo=f,r.util.getBoundsOfCurve=function(t,n,i,a,o,s,l,c){var u;if(r.cachesBoundsOfCurve&&(u=e.call(arguments),r.boundsOfCurveCache[u]))return r.boundsOfCurveCache[u];var g,d,h,f,p,I,C,m,v=Math.sqrt,A=Math.min,b=Math.max,y=Math.abs,G=[],w=[[],[]];d=6*t-12*i+6*o,g=-3*t+9*i-9*o+3*l,h=3*i-3*t;for(var B=0;B<2;++B)if(B>0&&(d=6*n-12*a+6*s,g=-3*n+9*a-9*s+3*c,h=3*a-3*n),y(g)<1e-12){if(y(d)<1e-12)continue;0<(f=-h/d)&&f<1&&G.push(f)}else(C=d*d-4*h*g)<0||(0<(p=(-d+(m=v(C)))/(2*g))&&p<1&&G.push(p),0<(I=(-d-m)/(2*g))&&I<1&&G.push(I));for(var x,S,Z,k=G.length,R=k;k--;)x=(Z=1-(f=G[k]))*Z*Z*t+3*Z*Z*f*i+3*Z*f*f*o+f*f*f*l,w[0][k]=x,S=Z*Z*Z*n+3*Z*Z*f*a+3*Z*f*f*s+f*f*f*c,w[1][k]=S;w[0][R]=t,w[1][R]=n,w[0][R+1]=l,w[1][R+1]=c;var W=[{x:A.apply(null,w[0]),y:A.apply(null,w[1])},{x:b.apply(null,w[0]),y:b.apply(null,w[1])}];return r.cachesBoundsOfCurve&&(r.boundsOfCurveCache[u]=W),W},r.util.getPointOnPath=function(e,t,n){n||(n=f(e));for(var i=0;t-n[i].length>0&&i<n.length-2;)t-=n[i].length,i++;var a,o=n[i],s=t/o.length,l=o.command,c=e[i];switch(l){case"M":return{x:o.x,y:o.y,angle:0};case"Z":case"z":return(a=new r.Point(o.x,o.y).lerp(new r.Point(o.destX,o.destY),s)).angle=Math.atan2(o.destY-o.y,o.destX-o.x),a;case"L":return(a=new r.Point(o.x,o.y).lerp(new r.Point(c[1],c[2]),s)).angle=Math.atan2(c[2]-o.y,c[1]-o.x),a;case"C":case"Q":return h(o,t)}},r.util.transformPath=function(e,t,n){return n&&(t=r.util.multiplyTransformMatrices(t,[1,0,0,1,-n.x,-n.y])),e.map((function(e){for(var n=e.slice(0),i={},a=1;a<e.length-1;a+=2)i.x=e[a],i.y=e[a+1],i=r.util.transformPoint(i,t),n[a]=i.x,n[a+1]=i.y;return n}))}}(),function(){var e=Array.prototype.slice;function t(e,t,n){if(e&&0!==e.length){var i=e.length-1,r=t?e[i][t]:e[i];if(t)for(;i--;)n(e[i][t],r)&&(r=e[i][t]);else for(;i--;)n(e[i],r)&&(r=e[i]);return r}}r.util.array={fill:function(e,t){for(var n=e.length;n--;)e[n]=t;return e},invoke:function(t,n){for(var i=e.call(arguments,2),r=[],a=0,o=t.length;a<o;a++)r[a]=i.length?t[a][n].apply(t[a],i):t[a][n].call(t[a]);return r},min:function(e,n){return t(e,n,(function(e,t){return e<t}))},max:function(e,n){return t(e,n,(function(e,t){return e>=t}))}}}(),function(){function e(t,n,i){if(i)if(!r.isLikelyNode&&n instanceof Element)t=n;else if(n instanceof Array){t=[];for(var a=0,o=n.length;a<o;a++)t[a]=e({},n[a],i)}else if(n&&"object"===typeof n)for(var s in n)"canvas"===s||"group"===s?t[s]=null:n.hasOwnProperty(s)&&(t[s]=e({},n[s],i));else t=n;else for(var s in n)t[s]=n[s];return t}r.util.object={extend:e,clone:function(t,n){return e({},t,n)}},r.util.object.extend(r.util,r.Observable)}(),function(){function e(e,t){var n=e.charCodeAt(t);if(isNaN(n))return"";if(n<55296||n>57343)return e.charAt(t);if(55296<=n&&n<=56319){if(e.length<=t+1)throw"High surrogate without following low surrogate";var i=e.charCodeAt(t+1);if(56320>i||i>57343)throw"High surrogate without following low surrogate";return e.charAt(t)+e.charAt(t+1)}if(0===t)throw"Low surrogate without preceding high surrogate";var r=e.charCodeAt(t-1);if(55296>r||r>56319)throw"Low surrogate without preceding high surrogate";return!1}r.util.string={camelize:function(e){return e.replace(/-+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))},capitalize:function(e,t){return e.charAt(0).toUpperCase()+(t?e.slice(1):e.slice(1).toLowerCase())},escapeXml:function(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},graphemeSplit:function(t){var n,i=0,r=[];for(i=0;i<t.length;i++)!1!==(n=e(t,i))&&r.push(n);return r}}}(),function(){var e=Array.prototype.slice,t=function(){},n=function(){for(var e in{toString:1})if("toString"===e)return!1;return!0}(),i=function(e,t,i){for(var r in t)r in e.prototype&&"function"===typeof e.prototype[r]&&(t[r]+"").indexOf("callSuper")>-1?e.prototype[r]=function(e){return function(){var n=this.constructor.superclass;this.constructor.superclass=i;var r=t[e].apply(this,arguments);if(this.constructor.superclass=n,"initialize"!==e)return r}}(r):e.prototype[r]=t[r],n&&(t.toString!==Object.prototype.toString&&(e.prototype.toString=t.toString),t.valueOf!==Object.prototype.valueOf&&(e.prototype.valueOf=t.valueOf))};function a(){}function o(t){for(var n=null,i=this;i.constructor.superclass;){var r=i.constructor.superclass.prototype[t];if(i[t]!==r){n=r;break}i=i.constructor.superclass.prototype}return n?arguments.length>1?n.apply(this,e.call(arguments,1)):n.call(this):console.log("tried to callSuper "+t+", method not found in prototype chain",this)}r.util.createClass=function(){var n=null,r=e.call(arguments,0);function s(){this.initialize.apply(this,arguments)}"function"===typeof r[0]&&(n=r.shift()),s.superclass=n,s.subclasses=[],n&&(a.prototype=n.prototype,s.prototype=new a,n.subclasses.push(s));for(var l=0,c=r.length;l<c;l++)i(s,r[l],n);return s.prototype.initialize||(s.prototype.initialize=t),s.prototype.constructor=s,s.prototype.callSuper=o,s}}(),function(){var e=!!r.document.createElement("div").attachEvent,t=["touchstart","touchmove","touchend"];r.util.addListener=function(t,n,i,r){t&&t.addEventListener(n,i,!e&&r)},r.util.removeListener=function(t,n,i,r){t&&t.removeEventListener(n,i,!e&&r)},r.util.getPointer=function(e){var t=e.target,n=r.util.getScrollLeftTop(t),i=function(e){var t=e.changedTouches;return t&&t[0]?t[0]:e}(e);return{x:i.clientX+n.left,y:i.clientY+n.top}},r.util.isTouchEvent=function(e){return t.indexOf(e.type)>-1||"touch"===e.pointerType}}(),function(){var e=r.document.createElement("div"),t="string"===typeof e.style.opacity,n="string"===typeof e.style.filter,i=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,a=function(e){return e};t?a=function(e,t){return e.style.opacity=t,e}:n&&(a=function(e,t){var n=e.style;return e.currentStyle&&!e.currentStyle.hasLayout&&(n.zoom=1),i.test(n.filter)?(t=t>=.9999?"":"alpha(opacity="+100*t+")",n.filter=n.filter.replace(i,t)):n.filter+=" alpha(opacity="+100*t+")",e}),r.util.setStyle=function(e,t){var n=e.style;if(!n)return e;if("string"===typeof t)return e.style.cssText+=";"+t,t.indexOf("opacity")>-1?a(e,t.match(/opacity:\s*(\d?\.?\d*)/)[1]):e;for(var i in t)if("opacity"===i)a(e,t[i]);else{var r="float"===i||"cssFloat"===i?"undefined"===typeof n.styleFloat?"cssFloat":"styleFloat":i;n.setProperty(r,t[i])}return e}}(),function(){var e=Array.prototype.slice;var t,n,i=function(t){return e.call(t,0)};try{t=i(r.document.childNodes)instanceof Array}catch(s){}function a(e,t){var n=r.document.createElement(e);for(var i in t)"class"===i?n.className=t[i]:"for"===i?n.htmlFor=t[i]:n.setAttribute(i,t[i]);return n}function o(e){for(var t=0,n=0,i=r.document.documentElement,a=r.document.body||{scrollLeft:0,scrollTop:0};e&&(e.parentNode||e.host)&&((e=e.parentNode||e.host)===r.document?(t=a.scrollLeft||i.scrollLeft||0,n=a.scrollTop||i.scrollTop||0):(t+=e.scrollLeft||0,n+=e.scrollTop||0),1!==e.nodeType||"fixed"!==e.style.position););return{left:t,top:n}}t||(i=function(e){for(var t=new Array(e.length),n=e.length;n--;)t[n]=e[n];return t}),n=r.document.defaultView&&r.document.defaultView.getComputedStyle?function(e,t){var n=r.document.defaultView.getComputedStyle(e,null);return n?n[t]:void 0}:function(e,t){var n=e.style[t];return!n&&e.currentStyle&&(n=e.currentStyle[t]),n},function(){var e=r.document.documentElement.style,t="userSelect"in e?"userSelect":"MozUserSelect"in e?"MozUserSelect":"WebkitUserSelect"in e?"WebkitUserSelect":"KhtmlUserSelect"in e?"KhtmlUserSelect":"";r.util.makeElementUnselectable=function(e){return"undefined"!==typeof e.onselectstart&&(e.onselectstart=r.util.falseFunction),t?e.style[t]="none":"string"===typeof e.unselectable&&(e.unselectable="on"),e},r.util.makeElementSelectable=function(e){return"undefined"!==typeof e.onselectstart&&(e.onselectstart=null),t?e.style[t]="":"string"===typeof e.unselectable&&(e.unselectable=""),e}}(),r.util.setImageSmoothing=function(e,t){e.imageSmoothingEnabled=e.imageSmoothingEnabled||e.webkitImageSmoothingEnabled||e.mozImageSmoothingEnabled||e.msImageSmoothingEnabled||e.oImageSmoothingEnabled,e.imageSmoothingEnabled=t},r.util.getById=function(e){return"string"===typeof e?r.document.getElementById(e):e},r.util.toArray=i,r.util.addClass=function(e,t){e&&-1===(" "+e.className+" ").indexOf(" "+t+" ")&&(e.className+=(e.className?" ":"")+t)},r.util.makeElement=a,r.util.wrapElement=function(e,t,n){return"string"===typeof t&&(t=a(t,n)),e.parentNode&&e.parentNode.replaceChild(t,e),t.appendChild(e),t},r.util.getScrollLeftTop=o,r.util.getElementOffset=function(e){var t,i,r=e&&e.ownerDocument,a={left:0,top:0},s={left:0,top:0},l={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!r)return s;for(var c in l)s[l[c]]+=parseInt(n(e,c),10)||0;return t=r.documentElement,"undefined"!==typeof e.getBoundingClientRect&&(a=e.getBoundingClientRect()),i=o(e),{left:a.left+i.left-(t.clientLeft||0)+s.left,top:a.top+i.top-(t.clientTop||0)+s.top}},r.util.getNodeCanvas=function(e){var t=r.jsdomImplForWrapper(e);return t._canvas||t._image},r.util.cleanUpJsdomNode=function(e){if(r.isLikelyNode){var t=r.jsdomImplForWrapper(e);t&&(t._image=null,t._canvas=null,t._currentSrc=null,t._attributes=null,t._classList=null)}}}(),function(){function e(){}r.util.request=function(t,n){n||(n={});var i=n.method?n.method.toUpperCase():"GET",a=n.onComplete||function(){},o=new r.window.XMLHttpRequest,s=n.body||n.parameters;return o.onreadystatechange=function(){4===o.readyState&&(a(o),o.onreadystatechange=e)},"GET"===i&&(s=null,"string"===typeof n.parameters&&(t=function(e,t){return e+(/\?/.test(e)?"&":"?")+t}(t,n.parameters))),o.open(i,t,!0),"POST"!==i&&"PUT"!==i||o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.send(s),o}}(),r.log=console.log,r.warn=console.warn,function(){var e=r.util.object.extend,t=r.util.object.clone,n=[];function i(){return!1}function a(e,t,n,i){return-n*Math.cos(e/i*(Math.PI/2))+n+t}r.util.object.extend(n,{cancelAll:function(){var e=this.splice(0);return e.forEach((function(e){e.cancel()})),e},cancelByCanvas:function(e){if(!e)return[];var t=this.filter((function(t){return"object"===typeof t.target&&t.target.canvas===e}));return t.forEach((function(e){e.cancel()})),t},cancelByTarget:function(e){var t=this.findAnimationsByTarget(e);return t.forEach((function(e){e.cancel()})),t},findAnimationIndex:function(e){return this.indexOf(this.findAnimation(e))},findAnimation:function(e){return this.find((function(t){return t.cancel===e}))},findAnimationsByTarget:function(e){return e?this.filter((function(t){return t.target===e})):[]}});var o=r.window.requestAnimationFrame||r.window.webkitRequestAnimationFrame||r.window.mozRequestAnimationFrame||r.window.oRequestAnimationFrame||r.window.msRequestAnimationFrame||function(e){return r.window.setTimeout(e,1e3/60)},s=r.window.cancelAnimationFrame||r.window.clearTimeout;function l(){return o.apply(r.window,arguments)}r.util.animate=function(n){n||(n={});var o,s=!1,c=function(){var e=r.runningAnimations.indexOf(o);return e>-1&&r.runningAnimations.splice(e,1)[0]};return o=e(t(n),{cancel:function(){return s=!0,c()},currentValue:"startValue"in n?n.startValue:0,completionRate:0,durationRate:0}),r.runningAnimations.push(o),l((function(e){var t,r=e||+new Date,u=n.duration||500,g=r+u,d=n.onChange||i,h=n.abort||i,f=n.onComplete||i,p=n.easing||a,I="startValue"in n&&n.startValue.length>0,C="startValue"in n?n.startValue:0,m="endValue"in n?n.endValue:100,v=n.byValue||(I?C.map((function(e,t){return m[t]-C[t]})):m-C);n.onStart&&n.onStart(),function e(n){var i=(t=n||+new Date)>g?u:t-r,a=i/u,A=I?C.map((function(e,t){return p(i,C[t],v[t],u)})):p(i,C,v,u),b=I?Math.abs((A[0]-C[0])/v[0]):Math.abs((A-C)/v);if(o.currentValue=I?A.slice():A,o.completionRate=b,o.durationRate=a,!s){if(!h(A,b,a))return t>g?(o.currentValue=I?m.slice():m,o.completionRate=1,o.durationRate=1,d(I?m.slice():m,1,1),f(m,1,1),void c()):(d(A,b,a),void l(e));c()}}(r)})),o.cancel},r.util.requestAnimFrame=l,r.util.cancelAnimFrame=function(){return s.apply(r.window,arguments)},r.runningAnimations=n}(),function(){function e(e,t,n){var i="rgba("+parseInt(e[0]+n*(t[0]-e[0]),10)+","+parseInt(e[1]+n*(t[1]-e[1]),10)+","+parseInt(e[2]+n*(t[2]-e[2]),10);return i+=","+(e&&t?parseFloat(e[3]+n*(t[3]-e[3])):1),i+=")"}r.util.animateColor=function(t,n,i,a){var o=new r.Color(t).getSource(),s=new r.Color(n).getSource(),l=a.onComplete,c=a.onChange;return a=a||{},r.util.animate(r.util.object.extend(a,{duration:i||500,startValue:o,endValue:s,byValue:s,easing:function(t,n,i,r){return e(n,i,a.colorEasing?a.colorEasing(t,r):1-Math.cos(t/r*(Math.PI/2)))},onComplete:function(t,n,i){if(l)return l(e(s,s,0),n,i)},onChange:function(t,n,i){if(c){if(Array.isArray(t))return c(e(t,t,0),n,i);c(t,n,i)}}}))}}(),function(){function e(e,t,n,i){return e<Math.abs(t)?(e=t,i=n/4):i=0===t&&0===e?n/(2*Math.PI)*Math.asin(1):n/(2*Math.PI)*Math.asin(t/e),{a:e,c:t,p:n,s:i}}function t(e,t,n){return e.a*Math.pow(2,10*(t-=1))*Math.sin((t*n-e.s)*(2*Math.PI)/e.p)}function n(e,t,n,r){return n-i(r-e,0,n,r)+t}function i(e,t,n,i){return(e/=i)<1/2.75?n*(7.5625*e*e)+t:e<2/2.75?n*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?n*(7.5625*(e-=2.25/2.75)*e+.9375)+t:n*(7.5625*(e-=2.625/2.75)*e+.984375)+t}r.util.ease={easeInQuad:function(e,t,n,i){return n*(e/=i)*e+t},easeOutQuad:function(e,t,n,i){return-n*(e/=i)*(e-2)+t},easeInOutQuad:function(e,t,n,i){return(e/=i/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t},easeInCubic:function(e,t,n,i){return n*(e/=i)*e*e+t},easeOutCubic:function(e,t,n,i){return n*((e=e/i-1)*e*e+1)+t},easeInOutCubic:function(e,t,n,i){return(e/=i/2)<1?n/2*e*e*e+t:n/2*((e-=2)*e*e+2)+t},easeInQuart:function(e,t,n,i){return n*(e/=i)*e*e*e+t},easeOutQuart:function(e,t,n,i){return-n*((e=e/i-1)*e*e*e-1)+t},easeInOutQuart:function(e,t,n,i){return(e/=i/2)<1?n/2*e*e*e*e+t:-n/2*((e-=2)*e*e*e-2)+t},easeInQuint:function(e,t,n,i){return n*(e/=i)*e*e*e*e+t},easeOutQuint:function(e,t,n,i){return n*((e=e/i-1)*e*e*e*e+1)+t},easeInOutQuint:function(e,t,n,i){return(e/=i/2)<1?n/2*e*e*e*e*e+t:n/2*((e-=2)*e*e*e*e+2)+t},easeInSine:function(e,t,n,i){return-n*Math.cos(e/i*(Math.PI/2))+n+t},easeOutSine:function(e,t,n,i){return n*Math.sin(e/i*(Math.PI/2))+t},easeInOutSine:function(e,t,n,i){return-n/2*(Math.cos(Math.PI*e/i)-1)+t},easeInExpo:function(e,t,n,i){return 0===e?t:n*Math.pow(2,10*(e/i-1))+t},easeOutExpo:function(e,t,n,i){return e===i?t+n:n*(1-Math.pow(2,-10*e/i))+t},easeInOutExpo:function(e,t,n,i){return 0===e?t:e===i?t+n:(e/=i/2)<1?n/2*Math.pow(2,10*(e-1))+t:n/2*(2-Math.pow(2,-10*--e))+t},easeInCirc:function(e,t,n,i){return-n*(Math.sqrt(1-(e/=i)*e)-1)+t},easeOutCirc:function(e,t,n,i){return n*Math.sqrt(1-(e=e/i-1)*e)+t},easeInOutCirc:function(e,t,n,i){return(e/=i/2)<1?-n/2*(Math.sqrt(1-e*e)-1)+t:n/2*(Math.sqrt(1-(e-=2)*e)+1)+t},easeInElastic:function(n,i,r,a){var o=0;return 0===n?i:1===(n/=a)?i+r:(o||(o=.3*a),-t(e(r,r,o,1.70158),n,a)+i)},easeOutElastic:function(t,n,i,r){var a=0;if(0===t)return n;if(1===(t/=r))return n+i;a||(a=.3*r);var o=e(i,i,a,1.70158);return o.a*Math.pow(2,-10*t)*Math.sin((t*r-o.s)*(2*Math.PI)/o.p)+o.c+n},easeInOutElastic:function(n,i,r,a){var o=0;if(0===n)return i;if(2===(n/=a/2))return i+r;o||(o=a*(.3*1.5));var s=e(r,r,o,1.70158);return n<1?-.5*t(s,n,a)+i:s.a*Math.pow(2,-10*(n-=1))*Math.sin((n*a-s.s)*(2*Math.PI)/s.p)*.5+s.c+i},easeInBack:function(e,t,n,i,r){return void 0===r&&(r=1.70158),n*(e/=i)*e*((r+1)*e-r)+t},easeOutBack:function(e,t,n,i,r){return void 0===r&&(r=1.70158),n*((e=e/i-1)*e*((r+1)*e+r)+1)+t},easeInOutBack:function(e,t,n,i,r){return void 0===r&&(r=1.70158),(e/=i/2)<1?n/2*(e*e*((1+(r*=1.525))*e-r))+t:n/2*((e-=2)*e*((1+(r*=1.525))*e+r)+2)+t},easeInBounce:n,easeOutBounce:i,easeInOutBounce:function(e,t,r,a){return e<a/2?.5*n(2*e,0,r,a)+t:.5*i(2*e-a,0,r,a)+.5*r+t}}}(),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.util.object.extend,i=t.util.object.clone,r=t.util.toFixed,a=t.util.parseUnit,o=t.util.multiplyTransformMatrices,s={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},l={stroke:"strokeOpacity",fill:"fillOpacity"},c="font-size",u="clip-path";function g(e){return e in s?s[e]:e}function d(e,n,i,r){var s,l=Array.isArray(n);if("fill"!==e&&"stroke"!==e||"none"!==n){if("strokeUniform"===e)return"non-scaling-stroke"===n;if("strokeDashArray"===e)n="none"===n?null:n.replace(/,/g," ").split(/\s+/).map(parseFloat);else if("transformMatrix"===e)n=i&&i.transformMatrix?o(i.transformMatrix,t.parseTransformAttribute(n)):t.parseTransformAttribute(n);else if("visible"===e)n="none"!==n&&"hidden"!==n,i&&!1===i.visible&&(n=!1);else if("opacity"===e)n=parseFloat(n),i&&"undefined"!==typeof i.opacity&&(n*=i.opacity);else if("textAnchor"===e)n="start"===n?"left":"end"===n?"right":"center";else if("charSpacing"===e)s=a(n,r)/r*1e3;else if("paintFirst"===e){var c=n.indexOf("fill"),u=n.indexOf("stroke");n="fill";(c>-1&&u>-1&&u<c||-1===c&&u>-1)&&(n="stroke")}else{if("href"===e||"xlink:href"===e||"font"===e)return n;if("imageSmoothing"===e)return"optimizeQuality"===n;s=l?n.map(a):a(n,r)}}else n="";return!l&&isNaN(s)?n:s}function h(e){return new RegExp("^("+e.join("|")+")\\b","i")}function f(e,t){var n,i,r,a,o=[];for(r=0,a=t.length;r<a;r++)n=t[r],i=e.getElementsByTagName(n),o=o.concat(Array.prototype.slice.call(i));return o}function p(e,t){var n,i=!0;return(n=I(e,t.pop()))&&t.length&&(i=function(e,t){var n,i=!0;for(;e.parentNode&&1===e.parentNode.nodeType&&t.length;)i&&(n=t.pop()),i=I(e=e.parentNode,n);return 0===t.length}(e,t)),n&&i&&0===t.length}function I(e,t){var n,i,r=e.nodeName,a=e.getAttribute("class"),o=e.getAttribute("id");if(n=new RegExp("^"+r,"i"),t=t.replace(n,""),o&&t.length&&(n=new RegExp("#"+o+"(?![a-zA-Z\\-]+)","i"),t=t.replace(n,"")),a&&t.length)for(i=(a=a.split(" ")).length;i--;)n=new RegExp("\\."+a[i]+"(?![a-zA-Z\\-]+)","i"),t=t.replace(n,"");return 0===t.length}function C(e,t){var n;if(e.getElementById&&(n=e.getElementById(t)),n)return n;var i,r,a,o=e.getElementsByTagName("*");for(r=0,a=o.length;r<a;r++)if(t===(i=o[r]).getAttribute("id"))return i}t.svgValidTagNamesRegEx=h(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]),t.svgViewBoxElementsRegEx=h(["symbol","image","marker","pattern","view","svg"]),t.svgInvalidAncestorsRegEx=h(["pattern","defs","symbol","metadata","clipPath","mask","desc"]),t.svgValidParentsRegEx=h(["symbol","g","a","svg","clipPath","defs"]),t.cssRules={},t.gradientDefs={},t.clipPaths={},t.parseTransformAttribute=function(){function e(e,n,i){e[i]=Math.tan(t.util.degreesToRadians(n[0]))}var n=t.iMatrix,i=t.reNum,r=t.commaWsp,a="(?:"+("(?:(matrix)\\s*\\(\\s*("+i+")"+r+"("+i+")"+r+"("+i+")"+r+"("+i+")"+r+"("+i+")"+r+"("+i+")\\s*\\))")+"|"+("(?:(translate)\\s*\\(\\s*("+i+")(?:"+r+"("+i+"))?\\s*\\))")+"|"+("(?:(scale)\\s*\\(\\s*("+i+")(?:"+r+"("+i+"))?\\s*\\))")+"|"+("(?:(rotate)\\s*\\(\\s*("+i+")(?:"+r+"("+i+")"+r+"("+i+"))?\\s*\\))")+"|"+("(?:(skewX)\\s*\\(\\s*("+i+")\\s*\\))")+"|"+("(?:(skewY)\\s*\\(\\s*("+i+")\\s*\\))")+")",o=new RegExp("^\\s*(?:"+("(?:"+a+"(?:"+r+"*"+a+")*)")+"?)\\s*$"),s=new RegExp(a,"g");return function(i){var r=n.concat(),l=[];if(!i||i&&!o.test(i))return r;i.replace(s,(function(i){var o=new RegExp(a).exec(i).filter((function(e){return!!e})),s=o[1],c=o.slice(2).map(parseFloat);switch(s){case"translate":!function(e,t){e[4]=t[0],2===t.length&&(e[5]=t[1])}(r,c);break;case"rotate":c[0]=t.util.degreesToRadians(c[0]),function(e,n){var i=t.util.cos(n[0]),r=t.util.sin(n[0]),a=0,o=0;3===n.length&&(a=n[1],o=n[2]),e[0]=i,e[1]=r,e[2]=-r,e[3]=i,e[4]=a-(i*a-r*o),e[5]=o-(r*a+i*o)}(r,c);break;case"scale":!function(e,t){var n=t[0],i=2===t.length?t[1]:t[0];e[0]=n,e[3]=i}(r,c);break;case"skewX":e(r,c,2);break;case"skewY":e(r,c,1);break;case"matrix":r=c}l.push(r.concat()),r=n.concat()}));for(var c=l[0];l.length>1;)l.shift(),c=t.util.multiplyTransformMatrices(c,l[0]);return c}}();var m=new RegExp("^\\s*("+t.reNum+"+)\\s*,?\\s*("+t.reNum+"+)\\s*,?\\s*("+t.reNum+"+)\\s*,?\\s*("+t.reNum+"+)\\s*$");function v(e){if(!t.svgViewBoxElementsRegEx.test(e.nodeName))return{};var n,i,r,o,s,l,c=e.getAttribute("viewBox"),u=1,g=1,d=e.getAttribute("width"),h=e.getAttribute("height"),f=e.getAttribute("x")||0,p=e.getAttribute("y")||0,I=e.getAttribute("preserveAspectRatio")||"",C=!c||!(c=c.match(m)),v=!d||!h||"100%"===d||"100%"===h,A=C&&v,b={},y="",G=0,w=0;if(b.width=0,b.height=0,b.toBeParsed=A,C&&(f||p)&&e.parentNode&&"#document"!==e.parentNode.nodeName&&(y=" translate("+a(f)+" "+a(p)+") ",s=(e.getAttribute("transform")||"")+y,e.setAttribute("transform",s),e.removeAttribute("x"),e.removeAttribute("y")),A)return b;if(C)return b.width=a(d),b.height=a(h),b;if(n=-parseFloat(c[1]),i=-parseFloat(c[2]),r=parseFloat(c[3]),o=parseFloat(c[4]),b.minX=n,b.minY=i,b.viewBoxWidth=r,b.viewBoxHeight=o,v?(b.width=r,b.height=o):(b.width=a(d),b.height=a(h),u=b.width/r,g=b.height/o),"none"!==(I=t.util.parsePreserveAspectRatioAttribute(I)).alignX&&("meet"===I.meetOrSlice&&(g=u=u>g?g:u),"slice"===I.meetOrSlice&&(g=u=u>g?u:g),G=b.width-r*u,w=b.height-o*u,"Mid"===I.alignX&&(G/=2),"Mid"===I.alignY&&(w/=2),"Min"===I.alignX&&(G=0),"Min"===I.alignY&&(w=0)),1===u&&1===g&&0===n&&0===i&&0===f&&0===p)return b;if((f||p)&&"#document"!==e.parentNode.nodeName&&(y=" translate("+a(f)+" "+a(p)+") "),s=y+" matrix("+u+" 0 0 "+g+" "+(n*u+G)+" "+(i*g+w)+") ","svg"===e.nodeName){for(l=e.ownerDocument.createElementNS(t.svgNS,"g");e.firstChild;)l.appendChild(e.firstChild);e.appendChild(l)}else(l=e).removeAttribute("x"),l.removeAttribute("y"),s=l.getAttribute("transform")+s;return l.setAttribute("transform",s),b}function A(e,t){var n="xlink:href",i=C(e,t.getAttribute(n).slice(1));if(i&&i.getAttribute(n)&&A(e,i),["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"].forEach((function(e){i&&!t.hasAttribute(e)&&i.hasAttribute(e)&&t.setAttribute(e,i.getAttribute(e))})),!t.children.length)for(var r=i.cloneNode(!0);r.firstChild;)t.appendChild(r.firstChild);t.removeAttribute(n)}t.parseSVGDocument=function(e,n,r,a){if(e){!function(e){for(var n=f(e,["use","svg:use"]),i=0;n.length&&i<n.length;){var r=n[i],a=r.getAttribute("xlink:href")||r.getAttribute("href");if(null===a)return;var o,s,l,c,u=a.slice(1),g=r.getAttribute("x")||0,d=r.getAttribute("y")||0,h=C(e,u).cloneNode(!0),p=(h.getAttribute("transform")||"")+" translate("+g+", "+d+")",I=n.length,m=t.svgNS;if(v(h),/^svg$/i.test(h.nodeName)){var A=h.ownerDocument.createElementNS(m,"g");for(s=0,c=(l=h.attributes).length;s<c;s++)o=l.item(s),A.setAttributeNS(m,o.nodeName,o.nodeValue);for(;h.firstChild;)A.appendChild(h.firstChild);h=A}for(s=0,c=(l=r.attributes).length;s<c;s++)"x"!==(o=l.item(s)).nodeName&&"y"!==o.nodeName&&"xlink:href"!==o.nodeName&&"href"!==o.nodeName&&("transform"===o.nodeName?p=o.nodeValue+" "+p:h.setAttribute(o.nodeName,o.nodeValue));h.setAttribute("transform",p),h.setAttribute("instantiated_by_use","1"),h.removeAttribute("id"),r.parentNode.replaceChild(h,r),n.length===I&&i++}}(e);var o,s,l=t.Object.__uid++,c=v(e),u=t.util.toArray(e.getElementsByTagName("*"));if(c.crossOrigin=a&&a.crossOrigin,c.svgUid=l,0===u.length&&t.isLikelyNode){var g=[];for(o=0,s=(u=e.selectNodes('//*[name(.)!="svg"]')).length;o<s;o++)g[o]=u[o];u=g}var d=u.filter((function(e){return v(e),t.svgValidTagNamesRegEx.test(e.nodeName.replace("svg:",""))&&!function(e,t){for(;e&&(e=e.parentNode);)if(e.nodeName&&t.test(e.nodeName.replace("svg:",""))&&!e.getAttribute("instantiated_by_use"))return!0;return!1}(e,t.svgInvalidAncestorsRegEx)}));if(!d||d&&!d.length)n&&n([],{});else{var h={};u.filter((function(e){return"clipPath"===e.nodeName.replace("svg:","")})).forEach((function(e){var n=e.getAttribute("id");h[n]=t.util.toArray(e.getElementsByTagName("*")).filter((function(e){return t.svgValidTagNamesRegEx.test(e.nodeName.replace("svg:",""))}))})),t.gradientDefs[l]=t.getGradientDefs(e),t.cssRules[l]=t.getCSSRules(e),t.clipPaths[l]=h,t.parseElements(d,(function(e,i){n&&(n(e,c,i,u),delete t.gradientDefs[l],delete t.cssRules[l],delete t.clipPaths[l])}),i(c),r,a)}}};var b=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+t.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+t.reNum+"))?\\s+(.*)");n(t,{parseFontDeclaration:function(e,t){var n=e.match(b);if(n){var i=n[1],r=n[3],o=n[4],s=n[5],l=n[6];i&&(t.fontStyle=i),r&&(t.fontWeight=isNaN(parseFloat(r))?r:parseFloat(r)),o&&(t.fontSize=a(o)),l&&(t.fontFamily=l),s&&(t.lineHeight="normal"===s?1:s)}},getGradientDefs:function(e){var t,n=f(e,["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"]),i=0,r={};for(i=n.length;i--;)(t=n[i]).getAttribute("xlink:href")&&A(e,t),r[t.getAttribute("id")]=t;return r},parseAttributes:function(e,i,o){if(e){var s,h,f,I={};"undefined"===typeof o&&(o=e.getAttribute("svgUid")),e.parentNode&&t.svgValidParentsRegEx.test(e.parentNode.nodeName)&&(I=t.parseAttributes(e.parentNode,i,o));var C=i.reduce((function(t,n){return(s=e.getAttribute(n))&&(t[n]=s),t}),{}),m=n(function(e,n){var i={};for(var r in t.cssRules[n])if(p(e,r.split(" ")))for(var a in t.cssRules[n][r])i[a]=t.cssRules[n][r][a];return i}(e,o),t.parseStyleAttribute(e));C=n(C,m),m[u]&&e.setAttribute(u,m[u]),h=f=I.fontSize||t.Text.DEFAULT_SVG_FONT_SIZE,C[c]&&(C[c]=h=a(C[c],f));var v,A,b={};for(var y in C)A=d(v=g(y),C[y],I,h),b[v]=A;b&&b.font&&t.parseFontDeclaration(b.font,b);var G=n(I,b);return t.svgValidParentsRegEx.test(e.nodeName)?G:function(e){for(var n in l)if("undefined"!==typeof e[l[n]]&&""!==e[n]){if("undefined"===typeof e[n]){if(!t.Object.prototype[n])continue;e[n]=t.Object.prototype[n]}if(0!==e[n].indexOf("url(")){var i=new t.Color(e[n]);e[n]=i.setAlpha(r(i.getAlpha()*e[l[n]],2)).toRgba()}}return e}(G)}},parseElements:function(e,n,i,r,a){new t.ElementsParser(e,n,i,r,a).parse()},parseStyleAttribute:function(e){var t={},n=e.getAttribute("style");return n?("string"===typeof n?function(e,t){var n,i;e.replace(/;\s*$/,"").split(";").forEach((function(e){var r=e.split(":");n=r[0].trim().toLowerCase(),i=r[1].trim(),t[n]=i}))}(n,t):function(e,t){var n,i;for(var r in e)"undefined"!==typeof e[r]&&(n=r.toLowerCase(),i=e[r],t[n]=i)}(n,t),t):t},parsePointsAttribute:function(e){if(!e)return null;var t,n,i=[];for(t=0,n=(e=(e=e.replace(/,/g," ").trim()).split(/\s+/)).length;t<n;t+=2)i.push({x:parseFloat(e[t]),y:parseFloat(e[t+1])});return i},getCSSRules:function(e){var n,i,r=e.getElementsByTagName("style"),a={};for(n=0,i=r.length;n<i;n++){var o=r[n].textContent;""!==(o=o.replace(/\/\*[\s\S]*?\*\//g,"")).trim()&&o.split("}").filter((function(e){return e.trim()})).forEach((function(e){var r=e.split("{"),o={},s=r[1].trim().split(";").filter((function(e){return e.trim()}));for(n=0,i=s.length;n<i;n++){var l=s[n].split(":"),c=l[0].trim(),u=l[1].trim();o[c]=u}(e=r[0].trim()).split(",").forEach((function(e){""!==(e=e.replace(/^svg/i,"").trim())&&(a[e]?t.util.object.extend(a[e],o):a[e]=t.util.object.clone(o))}))}))}return a},loadSVGFromURL:function(e,n,i,r){e=e.replace(/^\n\s*/,"").trim(),new t.util.request(e,{method:"get",onComplete:function(e){var a=e.responseXML;if(!a||!a.documentElement)return n&&n(null),!1;t.parseSVGDocument(a.documentElement,(function(e,t,i,r){n&&n(e,t,i,r)}),i,r)}})},loadSVGFromString:function(e,n,i,r){var a=(new t.window.DOMParser).parseFromString(e.trim(),"text/xml");t.parseSVGDocument(a.documentElement,(function(e,t,i,r){n(e,t,i,r)}),i,r)}})}(t),r.ElementsParser=function(e,t,n,i,r,a){this.elements=e,this.callback=t,this.options=n,this.reviver=i,this.svgUid=n&&n.svgUid||0,this.parsingOptions=r,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=a},(i=r.ElementsParser.prototype).parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},i.createObjects=function(){var e=this;this.elements.forEach((function(t,n){t.setAttribute("svgUid",e.svgUid),e.createObject(t,n)}))},i.findTag=function(e){return r[r.util.string.capitalize(e.tagName.replace("svg:",""))]},i.createObject=function(e,t){var n=this.findTag(e);if(n&&n.fromElement)try{n.fromElement(e,this.createCallback(t,e),this.options)}catch(i){r.log(i)}else this.checkIfDone()},i.createCallback=function(e,t){var n=this;return function(i){var a;n.resolveGradient(i,t,"fill"),n.resolveGradient(i,t,"stroke"),i instanceof r.Image&&i._originalElement&&(a=i.parsePreserveAspectRatioAttribute(t)),i._removeTransformMatrix(a),n.resolveClipPath(i,t),n.reviver&&n.reviver(t,i),n.instances[e]=i,n.checkIfDone()}},i.extractPropertyDefinition=function(e,t,n){var i=e[t],a=this.regexUrl;if(a.test(i)){a.lastIndex=0;var o=a.exec(i)[1];return a.lastIndex=0,r[n][this.svgUid][o]}},i.resolveGradient=function(e,t,n){var i=this.extractPropertyDefinition(e,n,"gradientDefs");if(i){var a=t.getAttribute(n+"-opacity"),o=r.Gradient.fromElement(i,e,a,this.options);e.set(n,o)}},i.createClipPathCallback=function(e,t){return function(e){e._removeTransformMatrix(),e.fillRule=e.clipRule,t.push(e)}},i.resolveClipPath=function(e,t){var n,i,a,o,s=this.extractPropertyDefinition(e,"clipPath","clipPaths");if(s){a=[],i=r.util.invertTransform(e.calcTransformMatrix());for(var l=s[0].parentNode,c=t;c.parentNode&&c.getAttribute("clip-path")!==e.clipPath;)c=c.parentNode;c.parentNode.appendChild(l);for(var u=0;u<s.length;u++)n=s[u],this.findTag(n).fromElement(n,this.createClipPathCallback(e,a),this.options);s=1===a.length?a[0]:new r.Group(a),o=r.util.multiplyTransformMatrices(i,s.calcTransformMatrix()),s.clipPath&&this.resolveClipPath(s,c);var g=r.util.qrDecompose(o);s.flipX=!1,s.flipY=!1,s.set("scaleX",g.scaleX),s.set("scaleY",g.scaleY),s.angle=g.angle,s.skewX=g.skewX,s.skewY=0,s.setPositionByOrigin({x:g.translateX,y:g.translateY},"center","center"),e.clipPath=s}else delete e.clipPath},i.checkIfDone=function(){0===--this.numElements&&(this.instances=this.instances.filter((function(e){return null!=e})),this.callback(this.instances,this.elements))},function(e){"use strict";var t=e.fabric||(e.fabric={});function n(e,t){this.x=e,this.y=t}t.Point?t.warn("fabric.Point is already defined"):(t.Point=n,n.prototype={type:"point",constructor:n,add:function(e){return new n(this.x+e.x,this.y+e.y)},addEquals:function(e){return this.x+=e.x,this.y+=e.y,this},scalarAdd:function(e){return new n(this.x+e,this.y+e)},scalarAddEquals:function(e){return this.x+=e,this.y+=e,this},subtract:function(e){return new n(this.x-e.x,this.y-e.y)},subtractEquals:function(e){return this.x-=e.x,this.y-=e.y,this},scalarSubtract:function(e){return new n(this.x-e,this.y-e)},scalarSubtractEquals:function(e){return this.x-=e,this.y-=e,this},multiply:function(e){return new n(this.x*e,this.y*e)},multiplyEquals:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return new n(this.x/e,this.y/e)},divideEquals:function(e){return this.x/=e,this.y/=e,this},eq:function(e){return this.x===e.x&&this.y===e.y},lt:function(e){return this.x<e.x&&this.y<e.y},lte:function(e){return this.x<=e.x&&this.y<=e.y},gt:function(e){return this.x>e.x&&this.y>e.y},gte:function(e){return this.x>=e.x&&this.y>=e.y},lerp:function(e,t){return"undefined"===typeof t&&(t=.5),t=Math.max(Math.min(1,t),0),new n(this.x+(e.x-this.x)*t,this.y+(e.y-this.y)*t)},distanceFrom:function(e){var t=this.x-e.x,n=this.y-e.y;return Math.sqrt(t*t+n*n)},midPointFrom:function(e){return this.lerp(e)},min:function(e){return new n(Math.min(this.x,e.x),Math.min(this.y,e.y))},max:function(e){return new n(Math.max(this.x,e.x),Math.max(this.y,e.y))},toString:function(){return this.x+","+this.y},setXY:function(e,t){return this.x=e,this.y=t,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setFromPoint:function(e){return this.x=e.x,this.y=e.y,this},swap:function(e){var t=this.x,n=this.y;this.x=e.x,this.y=e.y,e.x=t,e.y=n},clone:function(){return new n(this.x,this.y)}})}(t),function(e){"use strict";var t=e.fabric||(e.fabric={});function n(e){this.status=e,this.points=[]}t.Intersection?t.warn("fabric.Intersection is already defined"):(t.Intersection=n,t.Intersection.prototype={constructor:n,appendPoint:function(e){return this.points.push(e),this},appendPoints:function(e){return this.points=this.points.concat(e),this}},t.Intersection.intersectLineLine=function(e,i,r,a){var o,s=(a.x-r.x)*(e.y-r.y)-(a.y-r.y)*(e.x-r.x),l=(i.x-e.x)*(e.y-r.y)-(i.y-e.y)*(e.x-r.x),c=(a.y-r.y)*(i.x-e.x)-(a.x-r.x)*(i.y-e.y);if(0!==c){var u=s/c,g=l/c;0<=u&&u<=1&&0<=g&&g<=1?(o=new n("Intersection")).appendPoint(new t.Point(e.x+u*(i.x-e.x),e.y+u*(i.y-e.y))):o=new n}else o=new n(0===s||0===l?"Coincident":"Parallel");return o},t.Intersection.intersectLinePolygon=function(e,t,i){var r,a,o,s,l=new n,c=i.length;for(s=0;s<c;s++)r=i[s],a=i[(s+1)%c],o=n.intersectLineLine(e,t,r,a),l.appendPoints(o.points);return l.points.length>0&&(l.status="Intersection"),l},t.Intersection.intersectPolygonPolygon=function(e,t){var i,r=new n,a=e.length;for(i=0;i<a;i++){var o=e[i],s=e[(i+1)%a],l=n.intersectLinePolygon(o,s,t);r.appendPoints(l.points)}return r.points.length>0&&(r.status="Intersection"),r},t.Intersection.intersectPolygonRectangle=function(e,i,r){var a=i.min(r),o=i.max(r),s=new t.Point(o.x,a.y),l=new t.Point(a.x,o.y),c=n.intersectLinePolygon(a,s,e),u=n.intersectLinePolygon(s,o,e),g=n.intersectLinePolygon(o,l,e),d=n.intersectLinePolygon(l,a,e),h=new n;return h.appendPoints(c.points),h.appendPoints(u.points),h.appendPoints(g.points),h.appendPoints(d.points),h.points.length>0&&(h.status="Intersection"),h})}(t),function(e){"use strict";var t=e.fabric||(e.fabric={});function n(e){e?this._tryParsingColor(e):this.setSource([0,0,0,1])}function i(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}t.Color?t.warn("fabric.Color is already defined."):(t.Color=n,t.Color.prototype={_tryParsingColor:function(e){var t;e in n.colorNameMap&&(e=n.colorNameMap[e]),"transparent"===e&&(t=[255,255,255,0]),t||(t=n.sourceFromHex(e)),t||(t=n.sourceFromRgb(e)),t||(t=n.sourceFromHsl(e)),t||(t=[0,0,0,1]),t&&this.setSource(t)},_rgbToHsl:function(e,n,i){e/=255,n/=255,i/=255;var r,a,o,s=t.util.array.max([e,n,i]),l=t.util.array.min([e,n,i]);if(o=(s+l)/2,s===l)r=a=0;else{var c=s-l;switch(a=o>.5?c/(2-s-l):c/(s+l),s){case e:r=(n-i)/c+(n<i?6:0);break;case n:r=(i-e)/c+2;break;case i:r=(e-n)/c+4}r/=6}return[Math.round(360*r),Math.round(100*a),Math.round(100*o)]},getSource:function(){return this._source},setSource:function(e){this._source=e},toRgb:function(){var e=this.getSource();return"rgb("+e[0]+","+e[1]+","+e[2]+")"},toRgba:function(){var e=this.getSource();return"rgba("+e[0]+","+e[1]+","+e[2]+","+e[3]+")"},toHsl:function(){var e=this.getSource(),t=this._rgbToHsl(e[0],e[1],e[2]);return"hsl("+t[0]+","+t[1]+"%,"+t[2]+"%)"},toHsla:function(){var e=this.getSource(),t=this._rgbToHsl(e[0],e[1],e[2]);return"hsla("+t[0]+","+t[1]+"%,"+t[2]+"%,"+e[3]+")"},toHex:function(){var e,t,n,i=this.getSource();return e=1===(e=i[0].toString(16)).length?"0"+e:e,t=1===(t=i[1].toString(16)).length?"0"+t:t,n=1===(n=i[2].toString(16)).length?"0"+n:n,e.toUpperCase()+t.toUpperCase()+n.toUpperCase()},toHexa:function(){var e,t=this.getSource();return e=1===(e=(e=Math.round(255*t[3])).toString(16)).length?"0"+e:e,this.toHex()+e.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(e){var t=this.getSource();return t[3]=e,this.setSource(t),this},toGrayscale:function(){var e=this.getSource(),t=parseInt((.3*e[0]+.59*e[1]+.11*e[2]).toFixed(0),10),n=e[3];return this.setSource([t,t,t,n]),this},toBlackWhite:function(e){var t=this.getSource(),n=(.3*t[0]+.59*t[1]+.11*t[2]).toFixed(0),i=t[3];return e=e||127,n=Number(n)<Number(e)?0:255,this.setSource([n,n,n,i]),this},overlayWith:function(e){e instanceof n||(e=new n(e));var t,i=[],r=this.getAlpha(),a=this.getSource(),o=e.getSource();for(t=0;t<3;t++)i.push(Math.round(.5*a[t]+.5*o[t]));return i[3]=r,this.setSource(i),this}},t.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,t.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,t.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,t.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},t.Color.fromRgb=function(e){return n.fromSource(n.sourceFromRgb(e))},t.Color.sourceFromRgb=function(e){var t=e.match(n.reRGBa);if(t){var i=parseInt(t[1],10)/(/%$/.test(t[1])?100:1)*(/%$/.test(t[1])?255:1),r=parseInt(t[2],10)/(/%$/.test(t[2])?100:1)*(/%$/.test(t[2])?255:1),a=parseInt(t[3],10)/(/%$/.test(t[3])?100:1)*(/%$/.test(t[3])?255:1);return[parseInt(i,10),parseInt(r,10),parseInt(a,10),t[4]?parseFloat(t[4]):1]}},t.Color.fromRgba=n.fromRgb,t.Color.fromHsl=function(e){return n.fromSource(n.sourceFromHsl(e))},t.Color.sourceFromHsl=function(e){var t=e.match(n.reHSLa);if(t){var r,a,o,s=(parseFloat(t[1])%360+360)%360/360,l=parseFloat(t[2])/(/%$/.test(t[2])?100:1),c=parseFloat(t[3])/(/%$/.test(t[3])?100:1);if(0===l)r=a=o=c;else{var u=c<=.5?c*(l+1):c+l-c*l,g=2*c-u;r=i(g,u,s+1/3),a=i(g,u,s),o=i(g,u,s-1/3)}return[Math.round(255*r),Math.round(255*a),Math.round(255*o),t[4]?parseFloat(t[4]):1]}},t.Color.fromHsla=n.fromHsl,t.Color.fromHex=function(e){return n.fromSource(n.sourceFromHex(e))},t.Color.sourceFromHex=function(e){if(e.match(n.reHex)){var t=e.slice(e.indexOf("#")+1),i=3===t.length||4===t.length,r=8===t.length||4===t.length,a=i?t.charAt(0)+t.charAt(0):t.substring(0,2),o=i?t.charAt(1)+t.charAt(1):t.substring(2,4),s=i?t.charAt(2)+t.charAt(2):t.substring(4,6),l=r?i?t.charAt(3)+t.charAt(3):t.substring(6,8):"FF";return[parseInt(a,16),parseInt(o,16),parseInt(s,16),parseFloat((parseInt(l,16)/255).toFixed(2))]}},t.Color.fromSource=function(e){var t=new n;return t.setSource(e),t})}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=["e","se","s","sw","w","nw","n","ne","e"],i=["ns","nesw","ew","nwse"],r={},a="left",o="top",s="right",l="bottom",c="center",u={top:l,bottom:o,left:s,right:a,center:c},g=t.util.radiansToDegrees,d=Math.sign||function(e){return(e>0)-(e<0)||+e};function h(e,t){var n=e.angle+g(Math.atan2(t.y,t.x))+360;return Math.round(n%360/45)}function f(e,n){var i=n.transform.target,r=i.canvas,a=t.util.object.clone(n);a.target=i,r&&r.fire("object:"+e,a),i.fire(e,n)}function p(e,t){var n=t.canvas,i=e[n.uniScaleKey];return n.uniformScaling&&!i||!n.uniformScaling&&i}function I(e){return e.originX===c&&e.originY===c}function C(e,t,n){var i=e.lockScalingX,r=e.lockScalingY;return!(!i||!r)||(!(t||!i&&!r||!n)||(!(!i||"x"!==t)||!(!r||"y"!==t)))}function m(e,t,n,i){return{e:e,transform:t,pointer:{x:n,y:i}}}function v(e){return function(t,n,i,r){var a=n.target,o=a.getCenterPoint(),s=a.translateToOriginPoint(o,n.originX,n.originY),l=e(t,n,i,r);return a.setPositionByOrigin(s,n.originX,n.originY),l}}function A(e,t){return function(n,i,r,a){var o=t(n,i,r,a);return o&&f(e,m(n,i,r,a)),o}}function b(e,n,i,r,a){var o=e.target,s=o.controls[e.corner],l=o.canvas.getZoom(),c=o.padding/l,u=o.toLocalPoint(new t.Point(r,a),n,i);return u.x>=c&&(u.x-=c),u.x<=-c&&(u.x+=c),u.y>=c&&(u.y-=c),u.y<=c&&(u.y+=c),u.x-=s.offsetX,u.y-=s.offsetY,u}function y(e){return e.flipX!==e.flipY}function G(e,t,n,i,r){if(0!==e[t]){var a=r/e._getTransformedDimensions()[i]*e[n];e.set(n,a)}}function w(e,t,n,i){var r,c=t.target,u=c._getTransformedDimensions(0,c.skewY),d=b(t,t.originX,t.originY,n,i),h=Math.abs(2*d.x)-u.x,f=c.skewX;h<2?r=0:(r=g(Math.atan2(h/c.scaleX,u.y/c.scaleY)),t.originX===a&&t.originY===l&&(r=-r),t.originX===s&&t.originY===o&&(r=-r),y(c)&&(r=-r));var p=f!==r;if(p){var I=c._getTransformedDimensions().y;c.set("skewX",r),G(c,"skewY","scaleY","y",I)}return p}function B(e,t,n,i){var r,c=t.target,u=c._getTransformedDimensions(c.skewX,0),d=b(t,t.originX,t.originY,n,i),h=Math.abs(2*d.y)-u.y,f=c.skewY;h<2?r=0:(r=g(Math.atan2(h/c.scaleY,u.x/c.scaleX)),t.originX===a&&t.originY===l&&(r=-r),t.originX===s&&t.originY===o&&(r=-r),y(c)&&(r=-r));var p=f!==r;if(p){var I=c._getTransformedDimensions().x;c.set("skewY",r),G(c,"skewX","scaleX","x",I)}return p}function x(e,t,n,i,r){r=r||{};var a,o,s,l,c,g,h=t.target,f=h.lockScalingX,m=h.lockScalingY,v=r.by,A=p(e,h),y=C(h,v,A),G=t.gestureScale;if(y)return!1;if(G)o=t.scaleX*G,s=t.scaleY*G;else{if(a=b(t,t.originX,t.originY,n,i),c="y"!==v?d(a.x):1,g="x"!==v?d(a.y):1,t.signX||(t.signX=c),t.signY||(t.signY=g),h.lockScalingFlip&&(t.signX!==c||t.signY!==g))return!1;if(l=h._getTransformedDimensions(),A&&!v){var w=Math.abs(a.x)+Math.abs(a.y),B=t.original,x=w/(Math.abs(l.x*B.scaleX/h.scaleX)+Math.abs(l.y*B.scaleY/h.scaleY));o=B.scaleX*x,s=B.scaleY*x}else o=Math.abs(a.x*h.scaleX/l.x),s=Math.abs(a.y*h.scaleY/l.y);I(t)&&(o*=2,s*=2),t.signX!==c&&"y"!==v&&(t.originX=u[t.originX],o*=-1,t.signX=c),t.signY!==g&&"x"!==v&&(t.originY=u[t.originY],s*=-1,t.signY=g)}var S=h.scaleX,Z=h.scaleY;return v?("x"===v&&h.set("scaleX",o),"y"===v&&h.set("scaleY",s)):(!f&&h.set("scaleX",o),!m&&h.set("scaleY",s)),S!==h.scaleX||Z!==h.scaleY}r.scaleCursorStyleHandler=function(e,t,i){var r=p(e,i),a="";if(0!==t.x&&0===t.y?a="x":0===t.x&&0!==t.y&&(a="y"),C(i,a,r))return"not-allowed";var o=h(i,t);return n[o]+"-resize"},r.skewCursorStyleHandler=function(e,t,n){var r="not-allowed";if(0!==t.x&&n.lockSkewingY)return r;if(0!==t.y&&n.lockSkewingX)return r;var a=h(n,t)%4;return i[a]+"-resize"},r.scaleSkewCursorStyleHandler=function(e,t,n){return e[n.canvas.altActionKey]?r.skewCursorStyleHandler(e,t,n):r.scaleCursorStyleHandler(e,t,n)},r.rotationWithSnapping=A("rotating",v((function(e,t,n,i){var r=t,a=r.target,o=a.translateToOriginPoint(a.getCenterPoint(),r.originX,r.originY);if(a.lockRotation)return!1;var s,l=Math.atan2(r.ey-o.y,r.ex-o.x),c=Math.atan2(i-o.y,n-o.x),u=g(c-l+r.theta);if(a.snapAngle>0){var d=a.snapAngle,h=a.snapThreshold||d,f=Math.ceil(u/d)*d,p=Math.floor(u/d)*d;Math.abs(u-p)<h?u=p:Math.abs(u-f)<h&&(u=f)}return u<0&&(u=360+u),u%=360,s=a.angle!==u,a.angle=u,s}))),r.scalingEqually=A("scaling",v((function(e,t,n,i){return x(e,t,n,i)}))),r.scalingX=A("scaling",v((function(e,t,n,i){return x(e,t,n,i,{by:"x"})}))),r.scalingY=A("scaling",v((function(e,t,n,i){return x(e,t,n,i,{by:"y"})}))),r.scalingYOrSkewingX=function(e,t,n,i){return e[t.target.canvas.altActionKey]?r.skewHandlerX(e,t,n,i):r.scalingY(e,t,n,i)},r.scalingXOrSkewingY=function(e,t,n,i){return e[t.target.canvas.altActionKey]?r.skewHandlerY(e,t,n,i):r.scalingX(e,t,n,i)},r.changeWidth=A("resizing",v((function(e,t,n,i){var r=t.target,a=b(t,t.originX,t.originY,n,i),o=r.strokeWidth/(r.strokeUniform?r.scaleX:1),s=I(t)?2:1,l=r.width,c=Math.abs(a.x*s/r.scaleX)-o;return r.set("width",Math.max(c,0)),l!==c}))),r.skewHandlerX=function(e,t,n,i){var r,l=t.target,u=l.skewX,g=t.originY;return!l.lockSkewingX&&(0===u?r=b(t,c,c,n,i).x>0?a:s:(u>0&&(r=g===o?a:s),u<0&&(r=g===o?s:a),y(l)&&(r=r===a?s:a)),t.originX=r,A("skewing",v(w))(e,t,n,i))},r.skewHandlerY=function(e,t,n,i){var r,s=t.target,u=s.skewY,g=t.originX;return!s.lockSkewingY&&(0===u?r=b(t,c,c,n,i).y>0?o:l:(u>0&&(r=g===a?o:l),u<0&&(r=g===a?l:o),y(s)&&(r=r===o?l:o)),t.originY=r,A("skewing",v(B))(e,t,n,i))},r.dragHandler=function(e,t,n,i){var r=t.target,a=n-t.offsetX,o=i-t.offsetY,s=!r.get("lockMovementX")&&r.left!==a,l=!r.get("lockMovementY")&&r.top!==o;return s&&r.set("left",a),l&&r.set("top",o),(s||l)&&f("moving",m(e,t,n,i)),s||l},r.scaleOrSkewActionName=function(e,t,n){var i=e[n.canvas.altActionKey];return 0===t.x?i?"skewX":"scaleY":0===t.y?i?"skewY":"scaleX":void 0},r.rotationStyleHandler=function(e,t,n){return n.lockRotation?"not-allowed":t.cursorStyle},r.fireEvent=f,r.wrapWithFixedAnchor=v,r.wrapWithFireEvent=A,r.getLocalPoint=b,t.controlsUtils=r}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.util.degreesToRadians,i=t.controlsUtils;i.renderCircleControl=function(e,t,n,i,r){i=i||{};var a,o=this.sizeX||i.cornerSize||r.cornerSize,s=this.sizeY||i.cornerSize||r.cornerSize,l="undefined"!==typeof i.transparentCorners?i.transparentCorners:r.transparentCorners,c=l?"stroke":"fill",u=!l&&(i.cornerStrokeColor||r.cornerStrokeColor),g=t,d=n;e.save(),e.fillStyle=i.cornerColor||r.cornerColor,e.strokeStyle=i.cornerStrokeColor||r.cornerStrokeColor,o>s?(a=o,e.scale(1,s/o),d=n*o/s):s>o?(a=s,e.scale(o/s,1),g=t*s/o):a=o,e.lineWidth=1,e.beginPath(),e.arc(g,d,a/2,0,2*Math.PI,!1),e[c](),u&&e.stroke(),e.restore()},i.renderSquareControl=function(e,t,i,r,a){r=r||{};var o=this.sizeX||r.cornerSize||a.cornerSize,s=this.sizeY||r.cornerSize||a.cornerSize,l="undefined"!==typeof r.transparentCorners?r.transparentCorners:a.transparentCorners,c=l?"stroke":"fill",u=!l&&(r.cornerStrokeColor||a.cornerStrokeColor),g=o/2,d=s/2;e.save(),e.fillStyle=r.cornerColor||a.cornerColor,e.strokeStyle=r.cornerStrokeColor||a.cornerStrokeColor,e.lineWidth=1,e.translate(t,i),e.rotate(n(a.angle)),e[c+"Rect"](-g,-d,o,s),u&&e.strokeRect(-g,-d,o,s),e.restore()}}(t),function(e){"use strict";var t=e.fabric||(e.fabric={});t.Control=function(e){for(var t in e)this[t]=e[t]},t.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(e,t){return t.cursorStyle},getActionName:function(e,t){return t.actionName},getVisibility:function(e,t){var n=e._controlsVisibility;return n&&"undefined"!==typeof n[t]?n[t]:this.visible},setVisibility:function(e){this.visible=e},positionHandler:function(e,n){return t.util.transformPoint({x:this.x*e.x+this.offsetX,y:this.y*e.y+this.offsetY},n)},calcCornerCoords:function(e,n,i,r,a){var o,s,l,c,u=a?this.touchSizeX:this.sizeX,g=a?this.touchSizeY:this.sizeY;if(u&&g&&u!==g){var d=Math.atan2(g,u),h=Math.sqrt(u*u+g*g)/2,f=d-t.util.degreesToRadians(e),p=Math.PI/2-d-t.util.degreesToRadians(e);o=h*t.util.cos(f),s=h*t.util.sin(f),l=h*t.util.cos(p),c=h*t.util.sin(p)}else{h=.7071067812*(u&&g?u:n);f=t.util.degreesToRadians(45-e);o=l=h*t.util.cos(f),s=c=h*t.util.sin(f)}return{tl:{x:i-c,y:r-l},tr:{x:i+o,y:r-s},bl:{x:i-o,y:r+s},br:{x:i+c,y:r+l}}},render:function(e,n,i,r,a){if("circle"===((r=r||{}).cornerStyle||a.cornerStyle))t.controlsUtils.renderCircleControl.call(this,e,n,i,r,a);else t.controlsUtils.renderSquareControl.call(this,e,n,i,r,a)}}}(t),function(){function e(e,t){var n,i,a,o,s=e.getAttribute("style"),l=e.getAttribute("offset")||0;if(l=(l=parseFloat(l)/(/%$/.test(l)?100:1))<0?0:l>1?1:l,s){var c=s.split(/\s*;\s*/);for(""===c[c.length-1]&&c.pop(),o=c.length;o--;){var u=c[o].split(/\s*:\s*/),g=u[0].trim(),d=u[1].trim();"stop-color"===g?n=d:"stop-opacity"===g&&(a=d)}}return n||(n=e.getAttribute("stop-color")||"rgb(0,0,0)"),a||(a=e.getAttribute("stop-opacity")),i=(n=new r.Color(n)).getAlpha(),a=isNaN(parseFloat(a))?1:parseFloat(a),a*=i*t,{offset:l,color:n.toRgb(),opacity:a}}var t=r.util.object.clone;r.Gradient=r.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(e){e||(e={}),e.coords||(e.coords={});var t,n=this;Object.keys(e).forEach((function(t){n[t]=e[t]})),this.id?this.id+="_"+r.Object.__uid++:this.id=r.Object.__uid++,t={x1:e.coords.x1||0,y1:e.coords.y1||0,x2:e.coords.x2||0,y2:e.coords.y2||0},"radial"===this.type&&(t.r1=e.coords.r1||0,t.r2=e.coords.r2||0),this.coords=t,this.colorStops=e.colorStops.slice()},addColorStop:function(e){for(var t in e){var n=new r.Color(e[t]);this.colorStops.push({offset:parseFloat(t),color:n.toRgb(),opacity:n.getAlpha()})}return this},toObject:function(e){var t={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return r.util.populateWithProperties(this,t,e),t},toSVG:function(e,n){var i,a,o,s,l=t(this.coords,!0),c=(n=n||{},t(this.colorStops,!0)),u=l.r1>l.r2,g=this.gradientTransform?this.gradientTransform.concat():r.iMatrix.concat(),d=-this.offsetX,h=-this.offsetY,f=!!n.additionalTransform,p="pixels"===this.gradientUnits?"userSpaceOnUse":"objectBoundingBox";if(c.sort((function(e,t){return e.offset-t.offset})),"objectBoundingBox"===p?(d/=e.width,h/=e.height):(d+=e.width/2,h+=e.height/2),"path"===e.type&&"percentage"!==this.gradientUnits&&(d-=e.pathOffset.x,h-=e.pathOffset.y),g[4]-=d,g[5]-=h,s='id="SVGID_'+this.id+'" gradientUnits="'+p+'"',s+=' gradientTransform="'+(f?n.additionalTransform+" ":"")+r.util.matrixToSVG(g)+'" ',"linear"===this.type?o=["<linearGradient ",s,' x1="',l.x1,'" y1="',l.y1,'" x2="',l.x2,'" y2="',l.y2,'">\n']:"radial"===this.type&&(o=["<radialGradient ",s,' cx="',u?l.x1:l.x2,'" cy="',u?l.y1:l.y2,'" r="',u?l.r1:l.r2,'" fx="',u?l.x2:l.x1,'" fy="',u?l.y2:l.y1,'">\n']),"radial"===this.type){if(u)for((c=c.concat()).reverse(),i=0,a=c.length;i<a;i++)c[i].offset=1-c[i].offset;var I=Math.min(l.r1,l.r2);if(I>0){var C=I/Math.max(l.r1,l.r2);for(i=0,a=c.length;i<a;i++)c[i].offset+=C*(1-c[i].offset)}}for(i=0,a=c.length;i<a;i++){var m=c[i];o.push("<stop ",'offset="',100*m.offset+"%",'" style="stop-color:',m.color,"undefined"!==typeof m.opacity?";stop-opacity: "+m.opacity:";",'"/>\n')}return o.push("linear"===this.type?"</linearGradient>\n":"</radialGradient>\n"),o.join("")},toLive:function(e){var t,n,i,a=r.util.object.clone(this.coords);if(this.type){for("linear"===this.type?t=e.createLinearGradient(a.x1,a.y1,a.x2,a.y2):"radial"===this.type&&(t=e.createRadialGradient(a.x1,a.y1,a.r1,a.x2,a.y2,a.r2)),n=0,i=this.colorStops.length;n<i;n++){var o=this.colorStops[n].color,s=this.colorStops[n].opacity,l=this.colorStops[n].offset;"undefined"!==typeof s&&(o=new r.Color(o).setAlpha(s).toRgba()),t.addColorStop(l,o)}return t}}}),r.util.object.extend(r.Gradient,{fromElement:function(t,n,i,a){var o=parseFloat(i)/(/%$/.test(i)?100:1);o=o<0?0:o>1?1:o,isNaN(o)&&(o=1);var s,l,c,u,g=t.getElementsByTagName("stop"),d="userSpaceOnUse"===t.getAttribute("gradientUnits")?"pixels":"percentage",h=t.getAttribute("gradientTransform")||"",f=[],p=0,I=0;for("linearGradient"===t.nodeName||"LINEARGRADIENT"===t.nodeName?(s="linear",l=function(e){return{x1:e.getAttribute("x1")||0,y1:e.getAttribute("y1")||0,x2:e.getAttribute("x2")||"100%",y2:e.getAttribute("y2")||0}}(t)):(s="radial",l=function(e){return{x1:e.getAttribute("fx")||e.getAttribute("cx")||"50%",y1:e.getAttribute("fy")||e.getAttribute("cy")||"50%",r1:0,x2:e.getAttribute("cx")||"50%",y2:e.getAttribute("cy")||"50%",r2:e.getAttribute("r")||"50%"}}(t)),c=g.length;c--;)f.push(e(g[c],o));return u=r.parseTransformAttribute(h),function(e,t,n,i){var r,a;Object.keys(t).forEach((function(e){"Infinity"===(r=t[e])?a=1:"-Infinity"===r?a=0:(a=parseFloat(t[e],10),"string"===typeof r&&/^(\d+\.\d+)%|(\d+)%$/.test(r)&&(a*=.01,"pixels"===i&&("x1"!==e&&"x2"!==e&&"r2"!==e||(a*=n.viewBoxWidth||n.width),"y1"!==e&&"y2"!==e||(a*=n.viewBoxHeight||n.height)))),t[e]=a}))}(0,l,a,d),"pixels"===d&&(p=-n.left,I=-n.top),new r.Gradient({id:t.getAttribute("id"),type:s,coords:l,colorStops:f,gradientUnits:d,gradientTransform:u,offsetX:p,offsetY:I})}})}(),function(){"use strict";var e=r.util.toFixed;r.Pattern=r.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(e,t){if(e||(e={}),this.id=r.Object.__uid++,this.setOptions(e),!e.source||e.source&&"string"!==typeof e.source)t&&t(this);else{var n=this;this.source=r.util.createImage(),r.util.loadImage(e.source,(function(e,i){n.source=e,t&&t(n,i)}),null,this.crossOrigin)}},toObject:function(t){var n,i,a=r.Object.NUM_FRACTION_DIGITS;return"string"===typeof this.source.src?n=this.source.src:"object"===typeof this.source&&this.source.toDataURL&&(n=this.source.toDataURL()),i={type:"pattern",source:n,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:e(this.offsetX,a),offsetY:e(this.offsetY,a),patternTransform:this.patternTransform?this.patternTransform.concat():null},r.util.populateWithProperties(this,i,t),i},toSVG:function(e){var t="function"===typeof this.source?this.source():this.source,n=t.width/e.width,i=t.height/e.height,r=this.offsetX/e.width,a=this.offsetY/e.height,o="";return"repeat-x"!==this.repeat&&"no-repeat"!==this.repeat||(i=1,a&&(i+=Math.abs(a))),"repeat-y"!==this.repeat&&"no-repeat"!==this.repeat||(n=1,r&&(n+=Math.abs(r))),t.src?o=t.src:t.toDataURL&&(o=t.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+r+'" y="'+a+'" width="'+n+'" height="'+i+'">\n<image x="0" y="0" width="'+t.width+'" height="'+t.height+'" xlink:href="'+o+'"></image>\n</pattern>\n'},setOptions:function(e){for(var t in e)this[t]=e[t]},toLive:function(e){var t=this.source;if(!t)return"";if("undefined"!==typeof t.src){if(!t.complete)return"";if(0===t.naturalWidth||0===t.naturalHeight)return""}return e.createPattern(t,this.repeat)}})}(),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.util.toFixed;t.Shadow?t.warn("fabric.Shadow is already defined."):(t.Shadow=t.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(e){for(var n in"string"===typeof e&&(e=this._parseShadow(e)),e)this[n]=e[n];this.id=t.Object.__uid++},_parseShadow:function(e){var n=e.trim(),i=t.Shadow.reOffsetsAndBlur.exec(n)||[];return{color:(n.replace(t.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)").trim(),offsetX:parseFloat(i[1],10)||0,offsetY:parseFloat(i[2],10)||0,blur:parseFloat(i[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(e){var i=40,r=40,a=t.Object.NUM_FRACTION_DIGITS,o=t.util.rotateVector({x:this.offsetX,y:this.offsetY},t.util.degreesToRadians(-e.angle)),s=new t.Color(this.color);return e.width&&e.height&&(i=100*n((Math.abs(o.x)+this.blur)/e.width,a)+20,r=100*n((Math.abs(o.y)+this.blur)/e.height,a)+20),e.flipX&&(o.x*=-1),e.flipY&&(o.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+r+'%" height="'+(100+2*r)+'%" x="-'+i+'%" width="'+(100+2*i)+'%" >\n\t<feGaussianBlur in="SourceAlpha" stdDeviation="'+n(this.blur?this.blur/2:0,a)+'"></feGaussianBlur>\n\t<feOffset dx="'+n(o.x,a)+'" dy="'+n(o.y,a)+'" result="oBlur" ></feOffset>\n\t<feFlood flood-color="'+s.toRgb()+'" flood-opacity="'+s.getAlpha()+'"/>\n\t<feComposite in2="oBlur" operator="in" />\n\t<feMerge>\n\t\t<feMergeNode></feMergeNode>\n\t\t<feMergeNode in="SourceGraphic"></feMergeNode>\n\t</feMerge>\n</filter>\n'},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var e={},n=t.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach((function(t){this[t]!==n[t]&&(e[t]=this[t])}),this),e}}),t.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/)}(t),function(){"use strict";if(r.StaticCanvas)r.warn("fabric.StaticCanvas is already defined.");else{var e=r.util.object.extend,t=r.util.getElementOffset,n=r.util.removeFromArray,i=r.util.toFixed,a=r.util.transformPoint,o=r.util.invertTransform,s=r.util.getNodeCanvas,l=r.util.createCanvasElement,c=new Error("Could not initialize `canvas` element");r.StaticCanvas=r.util.createClass(r.CommonMethods,{initialize:function(e,t){t||(t={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(e,t)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:r.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(e,t){var n=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(e),this._initOptions(t),this.interactive||this._initRetinaScaling(),t.overlayImage&&this.setOverlayImage(t.overlayImage,n),t.backgroundImage&&this.setBackgroundImage(t.backgroundImage,n),t.backgroundColor&&this.setBackgroundColor(t.backgroundColor,n),t.overlayColor&&this.setOverlayColor(t.overlayColor,n),this.calcOffset()},_isRetinaScaling:function(){return r.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,r.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var e=r.devicePixelRatio;this.__initRetinaScaling(e,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(e,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(e,t,n){t.setAttribute("width",this.width*e),t.setAttribute("height",this.height*e),n.scale(e,e)},calcOffset:function(){return this._offset=t(this.lowerCanvasEl),this},setOverlayImage:function(e,t,n){return this.__setBgOverlayImage("overlayImage",e,t,n)},setBackgroundImage:function(e,t,n){return this.__setBgOverlayImage("backgroundImage",e,t,n)},setOverlayColor:function(e,t){return this.__setBgOverlayColor("overlayColor",e,t)},setBackgroundColor:function(e,t){return this.__setBgOverlayColor("backgroundColor",e,t)},__setBgOverlayImage:function(e,t,n,i){return"string"===typeof t?r.util.loadImage(t,(function(t,a){if(t){var o=new r.Image(t,i);this[e]=o,o.canvas=this}n&&n(t,a)}),this,i&&i.crossOrigin):(i&&t.setOptions(i),this[e]=t,t&&(t.canvas=this),n&&n(t,!1)),this},__setBgOverlayColor:function(e,t,n){return this[e]=t,this._initGradient(t,e),this._initPattern(t,e,n),this},_createCanvasElement:function(){var e=l();if(!e)throw c;if(e.style||(e.style={}),"undefined"===typeof e.getContext)throw c;return e},_initOptions:function(e){var t=this.lowerCanvasEl;this._setOptions(e),this.width=this.width||parseInt(t.width,10)||0,this.height=this.height||parseInt(t.height,10)||0,this.lowerCanvasEl.style&&(t.width=this.width,t.height=this.height,t.style.width=this.width+"px",t.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(e){e&&e.getContext?this.lowerCanvasEl=e:this.lowerCanvasEl=r.util.getById(e)||this._createCanvasElement(),r.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(e,t){return this.setDimensions({width:e},t)},setHeight:function(e,t){return this.setDimensions({height:e},t)},setDimensions:function(e,t){var n;for(var i in t=t||{},e)n=e[i],t.cssOnly||(this._setBackstoreDimension(i,e[i]),n+="px",this.hasLostContext=!0),t.backstoreOnly||this._setCssDimension(i,n);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),t.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(e,t){return this.lowerCanvasEl[e]=t,this.upperCanvasEl&&(this.upperCanvasEl[e]=t),this.cacheCanvasEl&&(this.cacheCanvasEl[e]=t),this[e]=t,this},_setCssDimension:function(e,t){return this.lowerCanvasEl.style[e]=t,this.upperCanvasEl&&(this.upperCanvasEl.style[e]=t),this.wrapperEl&&(this.wrapperEl.style[e]=t),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(e){var t,n,i,r=this._activeObject,a=this.backgroundImage,o=this.overlayImage;for(this.viewportTransform=e,n=0,i=this._objects.length;n<i;n++)(t=this._objects[n]).group||t.setCoords(!0);return r&&r.setCoords(),a&&a.setCoords(!0),o&&o.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(e,t){var n=e,i=this.viewportTransform.slice(0);e=a(e,o(this.viewportTransform)),i[0]=t,i[3]=t;var r=a(e,i);return i[4]+=n.x-r.x,i[5]+=n.y-r.y,this.setViewportTransform(i)},setZoom:function(e){return this.zoomToPoint(new r.Point(0,0),e),this},absolutePan:function(e){var t=this.viewportTransform.slice(0);return t[4]=-e.x,t[5]=-e.y,this.setViewportTransform(t)},relativePan:function(e){return this.absolutePan(new r.Point(-e.x-this.viewportTransform[4],-e.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(e){this.stateful&&e.setupState(),e._set("canvas",this),e.setCoords(),this.fire("object:added",{target:e}),e.fire("added")},_onObjectRemoved:function(e){this.fire("object:removed",{target:e}),e.fire("removed"),delete e.canvas},clearContext:function(e){return e.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var e=this.contextContainer;return this.renderCanvas(e,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=r.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var e={},t=this.width,n=this.height,i=o(this.viewportTransform);return e.tl=a({x:0,y:0},i),e.br=a({x:t,y:n},i),e.tr=new r.Point(e.br.x,e.tl.y),e.bl=new r.Point(e.tl.x,e.br.y),this.vptCoords=e,e},cancelRequestedRender:function(){this.isRendering&&(r.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(e,t){var n=this.viewportTransform,i=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(e),r.util.setImageSmoothing(e,this.imageSmoothingEnabled),this.fire("before:render",{ctx:e}),this._renderBackground(e),e.save(),e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this._renderObjects(e,t),e.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(e),i&&(i.canvas=this,i.shouldCache(),i._transformDone=!0,i.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(e)),this._renderOverlay(e),this.controlsAboveOverlay&&this.interactive&&this.drawControls(e),this.fire("after:render",{ctx:e})},drawClipPathOnCanvas:function(e){var t=this.viewportTransform,n=this.clipPath;e.save(),e.transform(t[0],t[1],t[2],t[3],t[4],t[5]),e.globalCompositeOperation="destination-in",n.transform(e),e.scale(1/n.zoomX,1/n.zoomY),e.drawImage(n._cacheCanvas,-n.cacheTranslationX,-n.cacheTranslationY),e.restore()},_renderObjects:function(e,t){var n,i;for(n=0,i=t.length;n<i;++n)t[n]&&t[n].render(e)},_renderBackgroundOrOverlay:function(e,t){var n=this[t+"Color"],i=this[t+"Image"],r=this.viewportTransform,a=this[t+"Vpt"];if(n||i){if(n){e.save(),e.beginPath(),e.moveTo(0,0),e.lineTo(this.width,0),e.lineTo(this.width,this.height),e.lineTo(0,this.height),e.closePath(),e.fillStyle=n.toLive?n.toLive(e,this):n,a&&e.transform(r[0],r[1],r[2],r[3],r[4],r[5]),e.transform(1,0,0,1,n.offsetX||0,n.offsetY||0);var o=n.gradientTransform||n.patternTransform;o&&e.transform(o[0],o[1],o[2],o[3],o[4],o[5]),e.fill(),e.restore()}i&&(e.save(),a&&e.transform(r[0],r[1],r[2],r[3],r[4],r[5]),i.render(e),e.restore())}},_renderBackground:function(e){this._renderBackgroundOrOverlay(e,"background")},_renderOverlay:function(e){this._renderBackgroundOrOverlay(e,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new r.Point(this.width/2,this.height/2)},centerObjectH:function(e){return this._centerObject(e,new r.Point(this.getCenterPoint().x,e.getCenterPoint().y))},centerObjectV:function(e){return this._centerObject(e,new r.Point(e.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(e){var t=this.getCenterPoint();return this._centerObject(e,t)},viewportCenterObject:function(e){var t=this.getVpCenter();return this._centerObject(e,t)},viewportCenterObjectH:function(e){var t=this.getVpCenter();return this._centerObject(e,new r.Point(t.x,e.getCenterPoint().y)),this},viewportCenterObjectV:function(e){var t=this.getVpCenter();return this._centerObject(e,new r.Point(e.getCenterPoint().x,t.y))},getVpCenter:function(){var e=this.getCenterPoint(),t=o(this.viewportTransform);return a(e,t)},_centerObject:function(e,t){return e.setPositionByOrigin(t,"center","center"),e.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(e){return this.toDatalessObject(e)},toObject:function(e){return this._toObjectMethod("toObject",e)},toDatalessObject:function(e){return this._toObjectMethod("toDatalessObject",e)},_toObjectMethod:function(t,n){var i=this.clipPath,a={version:r.version,objects:this._toObjects(t,n)};return i&&!i.excludeFromExport&&(a.clipPath=this._toObject(this.clipPath,t,n)),e(a,this.__serializeBgOverlay(t,n)),r.util.populateWithProperties(this,a,n),a},_toObjects:function(e,t){return this._objects.filter((function(e){return!e.excludeFromExport})).map((function(n){return this._toObject(n,e,t)}),this)},_toObject:function(e,t,n){var i;this.includeDefaultValues||(i=e.includeDefaultValues,e.includeDefaultValues=!1);var r=e[t](n);return this.includeDefaultValues||(e.includeDefaultValues=i),r},__serializeBgOverlay:function(e,t){var n={},i=this.backgroundImage,r=this.overlayImage,a=this.backgroundColor,o=this.overlayColor;return a&&a.toObject?a.excludeFromExport||(n.background=a.toObject(t)):a&&(n.background=a),o&&o.toObject?o.excludeFromExport||(n.overlay=o.toObject(t)):o&&(n.overlay=o),i&&!i.excludeFromExport&&(n.backgroundImage=this._toObject(i,e,t)),r&&!r.excludeFromExport&&(n.overlayImage=this._toObject(r,e,t)),n},svgViewportTransformation:!0,toSVG:function(e,t){e||(e={}),e.reviver=t;var n=[];return this._setSVGPreamble(n,e),this._setSVGHeader(n,e),this.clipPath&&n.push('<g clip-path="url(#'+this.clipPath.clipPathId+')" >\n'),this._setSVGBgOverlayColor(n,"background"),this._setSVGBgOverlayImage(n,"backgroundImage",t),this._setSVGObjects(n,t),this.clipPath&&n.push("</g>\n"),this._setSVGBgOverlayColor(n,"overlay"),this._setSVGBgOverlayImage(n,"overlayImage",t),n.push("</svg>"),n.join("")},_setSVGPreamble:function(e,t){t.suppressPreamble||e.push('<?xml version="1.0" encoding="',t.encoding||"UTF-8",'" standalone="no" ?>\n','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')},_setSVGHeader:function(e,t){var n,a=t.width||this.width,o=t.height||this.height,s='viewBox="0 0 '+this.width+" "+this.height+'" ',l=r.Object.NUM_FRACTION_DIGITS;t.viewBox?s='viewBox="'+t.viewBox.x+" "+t.viewBox.y+" "+t.viewBox.width+" "+t.viewBox.height+'" ':this.svgViewportTransformation&&(n=this.viewportTransform,s='viewBox="'+i(-n[4]/n[0],l)+" "+i(-n[5]/n[3],l)+" "+i(this.width/n[0],l)+" "+i(this.height/n[3],l)+'" '),e.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',a,'" ','height="',o,'" ',s,'xml:space="preserve">\n',"<desc>Created with Fabric.js ",r.version,"</desc>\n","<defs>\n",this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(t),"</defs>\n")},createSVGClipPathMarkup:function(e){var t=this.clipPath;return t?(t.clipPathId="CLIPPATH_"+r.Object.__uid++,'<clipPath id="'+t.clipPathId+'" >\n'+this.clipPath.toClipPathSVG(e.reviver)+"</clipPath>\n"):""},createSVGRefElementsMarkup:function(){var e=this;return["background","overlay"].map((function(t){var n=e[t+"Color"];if(n&&n.toLive){var i=e[t+"Vpt"],a=e.viewportTransform,o={width:e.width/(i?a[0]:1),height:e.height/(i?a[3]:1)};return n.toSVG(o,{additionalTransform:i?r.util.matrixToSVG(a):""})}})).join("")},createSVGFontFacesMarkup:function(){var e,t,n,i,a,o,s,l,c="",u={},g=r.fontPaths,d=[];for(this._objects.forEach((function e(t){d.push(t),t._objects&&t._objects.forEach(e)})),s=0,l=d.length;s<l;s++)if(t=(e=d[s]).fontFamily,-1!==e.type.indexOf("text")&&!u[t]&&g[t]&&(u[t]=!0,e.styles))for(a in n=e.styles)for(o in i=n[a])!u[t=i[o].fontFamily]&&g[t]&&(u[t]=!0);for(var h in u)c+=["\t\t@font-face {\n","\t\t\tfont-family: '",h,"';\n","\t\t\tsrc: url('",g[h],"');\n","\t\t}\n"].join("");return c&&(c=['\t<style type="text/css">',"<![CDATA[\n",c,"]]>","</style>\n"].join("")),c},_setSVGObjects:function(e,t){var n,i,r,a=this._objects;for(i=0,r=a.length;i<r;i++)(n=a[i]).excludeFromExport||this._setSVGObject(e,n,t)},_setSVGObject:function(e,t,n){e.push(t.toSVG(n))},_setSVGBgOverlayImage:function(e,t,n){this[t]&&!this[t].excludeFromExport&&this[t].toSVG&&e.push(this[t].toSVG(n))},_setSVGBgOverlayColor:function(e,t){var n=this[t+"Color"],i=this.viewportTransform,a=this.width,o=this.height;if(n)if(n.toLive){var s=n.repeat,l=r.util.invertTransform(i),c=this[t+"Vpt"]?r.util.matrixToSVG(l):"";e.push('<rect transform="'+c+" translate(",a/2,",",o/2,')"',' x="',n.offsetX-a/2,'" y="',n.offsetY-o/2,'" ','width="',"repeat-y"===s||"no-repeat"===s?n.source.width:a,'" height="',"repeat-x"===s||"no-repeat"===s?n.source.height:o,'" fill="url(#SVGID_'+n.id+')"',"></rect>\n")}else e.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',n,'"',"></rect>\n")},sendToBack:function(e){if(!e)return this;var t,i,r,a=this._activeObject;if(e===a&&"activeSelection"===e.type)for(t=(r=a._objects).length;t--;)i=r[t],n(this._objects,i),this._objects.unshift(i);else n(this._objects,e),this._objects.unshift(e);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(e){if(!e)return this;var t,i,r,a=this._activeObject;if(e===a&&"activeSelection"===e.type)for(r=a._objects,t=0;t<r.length;t++)i=r[t],n(this._objects,i),this._objects.push(i);else n(this._objects,e),this._objects.push(e);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(e,t){if(!e)return this;var i,r,a,o,s,l=this._activeObject,c=0;if(e===l&&"activeSelection"===e.type)for(s=l._objects,i=0;i<s.length;i++)r=s[i],(a=this._objects.indexOf(r))>0+c&&(o=a-1,n(this._objects,r),this._objects.splice(o,0,r)),c++;else 0!==(a=this._objects.indexOf(e))&&(o=this._findNewLowerIndex(e,a,t),n(this._objects,e),this._objects.splice(o,0,e));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(e,t,n){var i,r;if(n)for(i=t,r=t-1;r>=0;--r){if(e.intersectsWithObject(this._objects[r])||e.isContainedWithinObject(this._objects[r])||this._objects[r].isContainedWithinObject(e)){i=r;break}}else i=t-1;return i},bringForward:function(e,t){if(!e)return this;var i,r,a,o,s,l=this._activeObject,c=0;if(e===l&&"activeSelection"===e.type)for(i=(s=l._objects).length;i--;)r=s[i],(a=this._objects.indexOf(r))<this._objects.length-1-c&&(o=a+1,n(this._objects,r),this._objects.splice(o,0,r)),c++;else(a=this._objects.indexOf(e))!==this._objects.length-1&&(o=this._findNewUpperIndex(e,a,t),n(this._objects,e),this._objects.splice(o,0,e));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(e,t,n){var i,r,a;if(n)for(i=t,r=t+1,a=this._objects.length;r<a;++r){if(e.intersectsWithObject(this._objects[r])||e.isContainedWithinObject(this._objects[r])||this._objects[r].isContainedWithinObject(e)){i=r;break}}else i=t+1;return i},moveTo:function(e,t){return n(this._objects,e),this._objects.splice(t,0,e),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(r.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject((function(e){e.dispose&&e.dispose()})),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),r.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),r.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),e(r.StaticCanvas.prototype,r.Observable),e(r.StaticCanvas.prototype,r.Collection),e(r.StaticCanvas.prototype,r.DataURLExporter),e(r.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(e){var t=l();if(!t||!t.getContext)return null;var n=t.getContext("2d");return n&&"setLineDash"===e?"undefined"!==typeof n.setLineDash:null}}),r.StaticCanvas.prototype.toJSON=r.StaticCanvas.prototype.toObject,r.isLikelyNode&&(r.StaticCanvas.prototype.createPNGStream=function(){var e=s(this.lowerCanvasEl);return e&&e.createPNGStream()},r.StaticCanvas.prototype.createJPEGStream=function(e){var t=s(this.lowerCanvasEl);return t&&t.createJPEGStream(e)})}}(),r.BaseBrush=r.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(e){e.strokeStyle=this.color,e.lineWidth=this.width,e.lineCap=this.strokeLineCap,e.miterLimit=this.strokeMiterLimit,e.lineJoin=this.strokeLineJoin,e.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(e){var t=this.canvas.viewportTransform;e.save(),e.transform(t[0],t[1],t[2],t[3],t[4],t[5])},_setShadow:function(){if(this.shadow){var e=this.canvas,t=this.shadow,n=e.contextTop,i=e.getZoom();e&&e._isRetinaScaling()&&(i*=r.devicePixelRatio),n.shadowColor=t.color,n.shadowBlur=t.blur*i,n.shadowOffsetX=t.offsetX*i,n.shadowOffsetY=t.offsetY*i}},needsFullRender:function(){return new r.Color(this.color).getAlpha()<1||!!this.shadow},_resetShadow:function(){var e=this.canvas.contextTop;e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0},_isOutSideCanvas:function(e){return e.x<0||e.x>this.canvas.getWidth()||e.y<0||e.y>this.canvas.getHeight()}}),r.PencilBrush=r.util.createClass(r.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(e){this.canvas=e,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(e,t,n){var i=t.midPointFrom(n);return e.quadraticCurveTo(t.x,t.y,i.x,i.y),i},onMouseDown:function(e,t){this.canvas._isMainEvent(t.e)&&(this.drawStraightLine=t.e[this.straightLineKey],this._prepareForDrawing(e),this._captureDrawingPath(e),this._render())},onMouseMove:function(e,t){if(this.canvas._isMainEvent(t.e)&&(this.drawStraightLine=t.e[this.straightLineKey],(!0!==this.limitedToCanvasSize||!this._isOutSideCanvas(e))&&this._captureDrawingPath(e)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var n=this._points,i=n.length,r=this.canvas.contextTop;this._saveAndTransform(r),this.oldEnd&&(r.beginPath(),r.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(r,n[i-2],n[i-1],!0),r.stroke(),r.restore()}},onMouseUp:function(e){return!this.canvas._isMainEvent(e.e)||(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1)},_prepareForDrawing:function(e){var t=new r.Point(e.x,e.y);this._reset(),this._addPoint(t),this.canvas.contextTop.moveTo(t.x,t.y)},_addPoint:function(e){return!(this._points.length>1&&e.eq(this._points[this._points.length-1]))&&(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(e),!0)},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(e){var t=new r.Point(e.x,e.y);return this._addPoint(t)},_render:function(e){var t,n,i=this._points[0],a=this._points[1];if(e=e||this.canvas.contextTop,this._saveAndTransform(e),e.beginPath(),2===this._points.length&&i.x===a.x&&i.y===a.y){var o=this.width/1e3;i=new r.Point(i.x,i.y),a=new r.Point(a.x,a.y),i.x-=o,a.x+=o}for(e.moveTo(i.x,i.y),t=1,n=this._points.length;t<n;t++)this._drawSegment(e,i,a),i=this._points[t],a=this._points[t+1];e.lineTo(i.x,i.y),e.stroke(),e.restore()},convertPointsToSVGPath:function(e){var t=this.width/1e3;return r.util.getSmoothPathFromPoints(e,t)},_isEmptySVGPath:function(e){return"M 0 0 Q 0 0 0 0 L 0 0"===r.util.joinPath(e)},createPath:function(e){var t=new r.Path(e,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,t.shadow=new r.Shadow(this.shadow)),t},decimatePoints:function(e,t){if(e.length<=2)return e;var n,i=this.canvas.getZoom(),r=Math.pow(t/i,2),a=e.length-1,o=e[0],s=[o];for(n=1;n<a-1;n++)Math.pow(o.x-e[n].x,2)+Math.pow(o.y-e[n].y,2)>=r&&(o=e[n],s.push(o));return s.push(e[a]),s},_finalizeAndAddPath:function(){this.canvas.contextTop.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var e=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(e))this.canvas.requestRenderAll();else{var t=this.createPath(e);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:t}),this.canvas.add(t),this.canvas.requestRenderAll(),t.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:t})}}}),r.CircleBrush=r.util.createClass(r.BaseBrush,{width:10,initialize:function(e){this.canvas=e,this.points=[]},drawDot:function(e){var t=this.addPoint(e),n=this.canvas.contextTop;this._saveAndTransform(n),this.dot(n,t),n.restore()},dot:function(e,t){e.fillStyle=t.fill,e.beginPath(),e.arc(t.x,t.y,t.radius,0,2*Math.PI,!1),e.closePath(),e.fill()},onMouseDown:function(e){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(e)},_render:function(){var e,t,n=this.canvas.contextTop,i=this.points;for(this._saveAndTransform(n),e=0,t=i.length;e<t;e++)this.dot(n,i[e]);n.restore()},onMouseMove:function(e){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(e)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(e),this._render()):this.drawDot(e))},onMouseUp:function(){var e,t,n=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;var i=[];for(e=0,t=this.points.length;e<t;e++){var a=this.points[e],o=new r.Circle({radius:a.radius,left:a.x,top:a.y,originX:"center",originY:"center",fill:a.fill});this.shadow&&(o.shadow=new r.Shadow(this.shadow)),i.push(o)}var s=new r.Group(i);s.canvas=this.canvas,this.canvas.fire("before:path:created",{path:s}),this.canvas.add(s),this.canvas.fire("path:created",{path:s}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=n,this.canvas.requestRenderAll()},addPoint:function(e){var t=new r.Point(e.x,e.y),n=r.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,i=new r.Color(this.color).setAlpha(r.util.getRandomInt(0,100)/100).toRgba();return t.radius=n,t.fill=i,this.points.push(t),t}}),r.SprayBrush=r.util.createClass(r.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(e){this.canvas=e,this.sprayChunks=[]},onMouseDown:function(e){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(e),this.render(this.sprayChunkPoints)},onMouseMove:function(e){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(e)||(this.addSprayChunk(e),this.render(this.sprayChunkPoints))},onMouseUp:function(){var e=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var t=[],n=0,i=this.sprayChunks.length;n<i;n++)for(var a=this.sprayChunks[n],o=0,s=a.length;o<s;o++){var l=new r.Rect({width:a[o].width,height:a[o].width,left:a[o].x+1,top:a[o].y+1,originX:"center",originY:"center",fill:this.color});t.push(l)}this.optimizeOverlapping&&(t=this._getOptimizedRects(t));var c=new r.Group(t);this.shadow&&c.set("shadow",new r.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:c}),this.canvas.add(c),this.canvas.fire("path:created",{path:c}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=e,this.canvas.requestRenderAll()},_getOptimizedRects:function(e){var t,n,i,r={};for(n=0,i=e.length;n<i;n++)r[t=e[n].left+""+e[n].top]||(r[t]=e[n]);var a=[];for(t in r)a.push(r[t]);return a},render:function(e){var t,n,i=this.canvas.contextTop;for(i.fillStyle=this.color,this._saveAndTransform(i),t=0,n=e.length;t<n;t++){var r=e[t];"undefined"!==typeof r.opacity&&(i.globalAlpha=r.opacity),i.fillRect(r.x,r.y,r.width,r.width)}i.restore()},_render:function(){var e,t,n=this.canvas.contextTop;for(n.fillStyle=this.color,this._saveAndTransform(n),e=0,t=this.sprayChunks.length;e<t;e++)this.render(this.sprayChunks[e]);n.restore()},addSprayChunk:function(e){this.sprayChunkPoints=[];var t,n,i,a,o=this.width/2;for(a=0;a<this.density;a++){t=r.util.getRandomInt(e.x-o,e.x+o),n=r.util.getRandomInt(e.y-o,e.y+o),i=this.dotWidthVariance?r.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth;var s=new r.Point(t,n);s.width=i,this.randomOpacity&&(s.opacity=r.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(s)}this.sprayChunks.push(this.sprayChunkPoints)}}),r.PatternBrush=r.util.createClass(r.PencilBrush,{getPatternSrc:function(){var e=r.util.createCanvasElement(),t=e.getContext("2d");return e.width=e.height=25,t.fillStyle=this.color,t.beginPath(),t.arc(10,10,10,0,2*Math.PI,!1),t.closePath(),t.fill(),e},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(e){return e.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(e){this.callSuper("_setBrushStyles",e),e.strokeStyle=this.getPattern(e)},createPath:function(e){var t=this.callSuper("createPath",e),n=t._getLeftTopCoords().scalarAdd(t.strokeWidth/2);return t.stroke=new r.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-n.x,offsetY:-n.y}),t}}),function(){var e=r.util.getPointer,t=r.util.degreesToRadians,n=r.util.isTouchEvent;for(var i in r.Canvas=r.util.createClass(r.StaticCanvas,{initialize:function(e,t){t||(t={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(e,t),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=r.PencilBrush&&new r.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var e,t,n,i=this.getActiveObjects();if(i.length>0&&!this.preserveObjectStacking){t=[],n=[];for(var r=0,a=this._objects.length;r<a;r++)e=this._objects[r],-1===i.indexOf(e)?t.push(e):n.push(e);i.length>1&&(this._activeObject._objects=n),t.push.apply(t,n)}else t=this._objects;return t},renderAll:function(){!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var e=this.contextContainer;return this.renderCanvas(e,this._chooseObjectsToRender()),this},renderTopLayer:function(e){e.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(e),this.contextTopDirty=!0),e.restore()},renderTop:function(){var e=this.contextTop;return this.clearContext(e),this.renderTopLayer(e),this.fire("after:render"),this},_normalizePointer:function(e,t){var n=e.calcTransformMatrix(),i=r.util.invertTransform(n),a=this.restorePointerVpt(t);return r.util.transformPoint(a,i)},isTargetTransparent:function(e,t,n){if(e.shouldCache()&&e._cacheCanvas&&e!==this._activeObject){var i=this._normalizePointer(e,{x:t,y:n}),a=Math.max(e.cacheTranslationX+i.x*e.zoomX,0),o=Math.max(e.cacheTranslationY+i.y*e.zoomY,0);return r.util.isTransparent(e._cacheContext,Math.round(a),Math.round(o),this.targetFindTolerance)}var s=this.contextCache,l=e.selectionBackgroundColor,c=this.viewportTransform;return e.selectionBackgroundColor="",this.clearContext(s),s.save(),s.transform(c[0],c[1],c[2],c[3],c[4],c[5]),e.render(s),s.restore(),e.selectionBackgroundColor=l,r.util.isTransparent(s,t,n,this.targetFindTolerance)},_isSelectionKeyPressed:function(e){return Array.isArray(this.selectionKey)?!!this.selectionKey.find((function(t){return!0===e[t]})):e[this.selectionKey]},_shouldClearSelection:function(e,t){var n=this.getActiveObjects(),i=this._activeObject;return!t||t&&i&&n.length>1&&-1===n.indexOf(t)&&i!==t&&!this._isSelectionKeyPressed(e)||t&&!t.evented||t&&!t.selectable&&i&&i!==t},_shouldCenterTransform:function(e,t,n){var i;if(e)return"scale"===t||"scaleX"===t||"scaleY"===t||"resizing"===t?i=this.centeredScaling||e.centeredScaling:"rotate"===t&&(i=this.centeredRotation||e.centeredRotation),i?!n:n},_getOriginFromCorner:function(e,t){var n={x:e.originX,y:e.originY};return"ml"===t||"tl"===t||"bl"===t?n.x="right":"mr"!==t&&"tr"!==t&&"br"!==t||(n.x="left"),"tl"===t||"mt"===t||"tr"===t?n.y="bottom":"bl"!==t&&"mb"!==t&&"br"!==t||(n.y="top"),n},_getActionFromCorner:function(e,t,n,i){if(!t||!e)return"drag";var r=i.controls[t];return r.getActionName(n,r,i)},_setupCurrentTransform:function(e,n,i){if(n){var a=this.getPointer(e),o=n.__corner,s=n.controls[o],l=i&&o?s.getActionHandler(e,n,s):r.controlsUtils.dragHandler,c=this._getActionFromCorner(i,o,e,n),u=this._getOriginFromCorner(n,o),g=e[this.centeredKey],d={target:n,action:c,actionHandler:l,corner:o,scaleX:n.scaleX,scaleY:n.scaleY,skewX:n.skewX,skewY:n.skewY,offsetX:a.x-n.left,offsetY:a.y-n.top,originX:u.x,originY:u.y,ex:a.x,ey:a.y,lastX:a.x,lastY:a.y,theta:t(n.angle),width:n.width*n.scaleX,shiftKey:e.shiftKey,altKey:g,original:r.util.saveObjectTransform(n)};this._shouldCenterTransform(n,c,g)&&(d.originX="center",d.originY="center"),d.original.originX=u.x,d.original.originY=u.y,this._currentTransform=d,this._beforeTransform(e)}},setCursor:function(e){this.upperCanvasEl.style.cursor=e},_drawSelection:function(e){var t=this._groupSelector,n=new r.Point(t.ex,t.ey),i=r.util.transformPoint(n,this.viewportTransform),a=new r.Point(t.ex+t.left,t.ey+t.top),o=r.util.transformPoint(a,this.viewportTransform),s=Math.min(i.x,o.x),l=Math.min(i.y,o.y),c=Math.max(i.x,o.x),u=Math.max(i.y,o.y),g=this.selectionLineWidth/2;this.selectionColor&&(e.fillStyle=this.selectionColor,e.fillRect(s,l,c-s,u-l)),this.selectionLineWidth&&this.selectionBorderColor&&(e.lineWidth=this.selectionLineWidth,e.strokeStyle=this.selectionBorderColor,s+=g,l+=g,c-=g,u-=g,r.Object.prototype._setLineDash.call(this,e,this.selectionDashArray),e.strokeRect(s,l,c-s,u-l))},findTarget:function(e,t){if(!this.skipTargetFind){var i,r,a=this.getPointer(e,!0),o=this._activeObject,s=this.getActiveObjects(),l=n(e),c=s.length>1&&!t||1===s.length;if(this.targets=[],c&&o._findTargetCorner(a,l))return o;if(s.length>1&&!t&&o===this._searchPossibleTargets([o],a))return o;if(1===s.length&&o===this._searchPossibleTargets([o],a)){if(!this.preserveObjectStacking)return o;i=o,r=this.targets,this.targets=[]}var u=this._searchPossibleTargets(this._objects,a);return e[this.altSelectionKey]&&u&&i&&u!==i&&(u=i,this.targets=r),u}},_checkTarget:function(e,t,n){if(t&&t.visible&&t.evented&&t.containsPoint(e)){if(!this.perPixelTargetFind&&!t.perPixelTargetFind||t.isEditing)return!0;if(!this.isTargetTransparent(t,n.x,n.y))return!0}},_searchPossibleTargets:function(e,t){for(var n,i,a=e.length;a--;){var o=e[a],s=o.group?this._normalizePointer(o.group,t):t;if(this._checkTarget(s,o,t)){(n=e[a]).subTargetCheck&&n instanceof r.Group&&(i=this._searchPossibleTargets(n._objects,t))&&this.targets.push(i);break}}return n},restorePointerVpt:function(e){return r.util.transformPoint(e,r.util.invertTransform(this.viewportTransform))},getPointer:function(t,n){if(this._absolutePointer&&!n)return this._absolutePointer;if(this._pointer&&n)return this._pointer;var i,r=e(t),a=this.upperCanvasEl,o=a.getBoundingClientRect(),s=o.width||0,l=o.height||0;s&&l||("top"in o&&"bottom"in o&&(l=Math.abs(o.top-o.bottom)),"right"in o&&"left"in o&&(s=Math.abs(o.right-o.left))),this.calcOffset(),r.x=r.x-this._offset.left,r.y=r.y-this._offset.top,n||(r=this.restorePointerVpt(r));var c=this.getRetinaScaling();return 1!==c&&(r.x/=c,r.y/=c),i=0===s||0===l?{width:1,height:1}:{width:a.width/s,height:a.height/l},{x:r.x*i.width,y:r.y*i.height}},_createUpperCanvas:function(){var e=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),t=this.lowerCanvasEl,n=this.upperCanvasEl;n?n.className="":(n=this._createCanvasElement(),this.upperCanvasEl=n),r.util.addClass(n,"upper-canvas "+e),this.wrapperEl.appendChild(n),this._copyCanvasStyle(t,n),this._applyCanvasStyle(n),this.contextTop=n.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=r.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),r.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),r.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(e){var t=this.width||e.width,n=this.height||e.height;r.util.setStyle(e,{position:"absolute",width:t+"px",height:n+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),e.width=t,e.height=n,r.util.makeElementUnselectable(e)},_copyCanvasStyle:function(e,t){t.style.cssText=e.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var e=this._activeObject;return e?"activeSelection"===e.type&&e._objects?e._objects.slice(0):[e]:[]},_onObjectRemoved:function(e){e===this._activeObject&&(this.fire("before:selection:cleared",{target:e}),this._discardActiveObject(),this.fire("selection:cleared",{target:e}),e.fire("deselected")),e===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",e)},_fireSelectionEvents:function(e,t){var n=!1,i=this.getActiveObjects(),r=[],a=[];e.forEach((function(e){-1===i.indexOf(e)&&(n=!0,e.fire("deselected",{e:t,target:e}),a.push(e))})),i.forEach((function(i){-1===e.indexOf(i)&&(n=!0,i.fire("selected",{e:t,target:i}),r.push(i))})),e.length>0&&i.length>0?n&&this.fire("selection:updated",{e:t,selected:r,deselected:a}):i.length>0?this.fire("selection:created",{e:t,selected:r}):e.length>0&&this.fire("selection:cleared",{e:t,deselected:a})},setActiveObject:function(e,t){var n=this.getActiveObjects();return this._setActiveObject(e,t),this._fireSelectionEvents(n,t),this},_setActiveObject:function(e,t){return this._activeObject!==e&&(!!this._discardActiveObject(t,e)&&(!e.onSelect({e:t})&&(this._activeObject=e,!0)))},_discardActiveObject:function(e,t){var n=this._activeObject;if(n){if(n.onDeselect({e:e,object:t}))return!1;this._activeObject=null}return!0},discardActiveObject:function(e){var t=this.getActiveObjects(),n=this.getActiveObject();return t.length&&this.fire("before:selection:cleared",{target:n,e:e}),this._discardActiveObject(e),this._fireSelectionEvents(t,e),this},dispose:function(){var e=this.wrapperEl;return this.removeListeners(),e.removeChild(this.upperCanvasEl),e.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach(function(e){r.util.cleanUpJsdomNode(this[e]),this[e]=void 0}.bind(this)),e.parentNode&&e.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,r.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(e){var t=this._activeObject;t&&t._renderControls(e)},_toObject:function(e,t,n){var i=this._realizeGroupTransformOnObject(e),r=this.callSuper("_toObject",e,t,n);return this._unwindGroupTransformOnObject(e,i),r},_realizeGroupTransformOnObject:function(e){if(e.group&&"activeSelection"===e.group.type&&this._activeObject===e.group){var t={};return["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"].forEach((function(n){t[n]=e[n]})),r.util.addTransformToObject(e,this._activeObject.calcOwnMatrix()),t}return null},_unwindGroupTransformOnObject:function(e,t){t&&e.set(t)},_setSVGObject:function(e,t,n){var i=this._realizeGroupTransformOnObject(t);this.callSuper("_setSVGObject",e,t,n),this._unwindGroupTransformOnObject(t,i)},setViewportTransform:function(e){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),r.StaticCanvas.prototype.setViewportTransform.call(this,e)}}),r.StaticCanvas)"prototype"!==i&&(r.Canvas[i]=r.StaticCanvas[i])}(),function(){var e=r.util.addListener,t=r.util.removeListener,n={passive:!1};function i(e,t){return e.button&&e.button===t-1}r.util.object.extend(r.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(e,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(e,t){var i=this.upperCanvasEl,a=this._getEventPrefix();e(r.window,"resize",this._onResize),e(i,a+"down",this._onMouseDown),e(i,a+"move",this._onMouseMove,n),e(i,a+"out",this._onMouseOut),e(i,a+"enter",this._onMouseEnter),e(i,"wheel",this._onMouseWheel),e(i,"contextmenu",this._onContextMenu),e(i,"dblclick",this._onDoubleClick),e(i,"dragover",this._onDragOver),e(i,"dragenter",this._onDragEnter),e(i,"dragleave",this._onDragLeave),e(i,"drop",this._onDrop),this.enablePointerEvents||e(i,"touchstart",this._onTouchStart,n),"undefined"!==typeof eventjs&&t in eventjs&&(eventjs[t](i,"gesture",this._onGesture),eventjs[t](i,"drag",this._onDrag),eventjs[t](i,"orientation",this._onOrientationChange),eventjs[t](i,"shake",this._onShake),eventjs[t](i,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(t,"remove");var e=this._getEventPrefix();t(r.document,e+"up",this._onMouseUp),t(r.document,"touchend",this._onTouchEnd,n),t(r.document,e+"move",this._onMouseMove,n),t(r.document,"touchmove",this._onMouseMove,n)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(e,t){this.__onTransformGesture&&this.__onTransformGesture(e,t)},_onDrag:function(e,t){this.__onDrag&&this.__onDrag(e,t)},_onMouseWheel:function(e){this.__onMouseWheel(e)},_onMouseOut:function(e){var t=this._hoveredTarget;this.fire("mouse:out",{target:t,e:e}),this._hoveredTarget=null,t&&t.fire("mouseout",{e:e});var n=this;this._hoveredTargets.forEach((function(i){n.fire("mouse:out",{target:t,e:e}),i&&t.fire("mouseout",{e:e})})),this._hoveredTargets=[]},_onMouseEnter:function(e){this._currentTransform||this.findTarget(e)||(this.fire("mouse:over",{target:null,e:e}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(e,t){this.__onOrientationChange&&this.__onOrientationChange(e,t)},_onShake:function(e,t){this.__onShake&&this.__onShake(e,t)},_onLongPress:function(e,t){this.__onLongPress&&this.__onLongPress(e,t)},_onDragOver:function(e){e.preventDefault();var t=this._simpleEventHandler("dragover",e);this._fireEnterLeaveEvents(t,e)},_onDrop:function(e){return this._simpleEventHandler("drop:before",e),this._simpleEventHandler("drop",e)},_onContextMenu:function(e){return this.stopContextMenu&&(e.stopPropagation(),e.preventDefault()),!1},_onDoubleClick:function(e){this._cacheTransformEventData(e),this._handleEvent(e,"dblclick"),this._resetTransformEventData(e)},getPointerId:function(e){var t=e.changedTouches;return t?t[0]&&t[0].identifier:this.enablePointerEvents?e.pointerId:-1},_isMainEvent:function(e){return!0===e.isPrimary||!1!==e.isPrimary&&("touchend"===e.type&&0===e.touches.length||(!e.changedTouches||e.changedTouches[0].identifier===this.mainTouchId))},_onTouchStart:function(i){i.preventDefault(),null===this.mainTouchId&&(this.mainTouchId=this.getPointerId(i)),this.__onMouseDown(i),this._resetTransformEventData();var a=this.upperCanvasEl,o=this._getEventPrefix();e(r.document,"touchend",this._onTouchEnd,n),e(r.document,"touchmove",this._onMouseMove,n),t(a,o+"down",this._onMouseDown)},_onMouseDown:function(i){this.__onMouseDown(i),this._resetTransformEventData();var a=this.upperCanvasEl,o=this._getEventPrefix();t(a,o+"move",this._onMouseMove,n),e(r.document,o+"up",this._onMouseUp),e(r.document,o+"move",this._onMouseMove,n)},_onTouchEnd:function(i){if(!(i.touches.length>0)){this.__onMouseUp(i),this._resetTransformEventData(),this.mainTouchId=null;var a=this._getEventPrefix();t(r.document,"touchend",this._onTouchEnd,n),t(r.document,"touchmove",this._onMouseMove,n);var o=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout((function(){e(o.upperCanvasEl,a+"down",o._onMouseDown),o._willAddMouseDown=0}),400)}},_onMouseUp:function(i){this.__onMouseUp(i),this._resetTransformEventData();var a=this.upperCanvasEl,o=this._getEventPrefix();this._isMainEvent(i)&&(t(r.document,o+"up",this._onMouseUp),t(r.document,o+"move",this._onMouseMove,n),e(a,o+"move",this._onMouseMove,n))},_onMouseMove:function(e){!this.allowTouchScrolling&&e.preventDefault&&e.preventDefault(),this.__onMouseMove(e)},_onResize:function(){this.calcOffset()},_shouldRender:function(e){var t=this._activeObject;return!!(!!t!==!!e||t&&e&&t!==e)||(t&&t.isEditing,!1)},__onMouseUp:function(e){var t,n=this._currentTransform,a=this._groupSelector,o=!1,s=!a||0===a.left&&0===a.top;if(this._cacheTransformEventData(e),t=this._target,this._handleEvent(e,"up:before"),i(e,3))this.fireRightClick&&this._handleEvent(e,"up",3,s);else{if(i(e,2))return this.fireMiddleClick&&this._handleEvent(e,"up",2,s),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)this._onMouseUpInDrawingMode(e);else if(this._isMainEvent(e)){if(n&&(this._finalizeCurrentTransform(e),o=n.actionPerformed),!s){var l=t===this._activeObject;this._maybeGroupObjects(e),o||(o=this._shouldRender(t)||!l&&t===this._activeObject)}var c,u;if(t){if(c=t._findTargetCorner(this.getPointer(e,!0),r.util.isTouchEvent(e)),t.selectable&&t!==this._activeObject&&"up"===t.activeOn)this.setActiveObject(t,e),o=!0;else{var g=t.controls[c],d=g&&g.getMouseUpHandler(e,t,g);d&&d(e,n,(u=this.getPointer(e)).x,u.y)}t.isMoving=!1}if(n&&(n.target!==t||n.corner!==c)){var h=n.target&&n.target.controls[n.corner],f=h&&h.getMouseUpHandler(e,t,g);u=u||this.getPointer(e),f&&f(e,n,u.x,u.y)}this._setCursorFromEvent(e,t),this._handleEvent(e,"up",1,s),this._groupSelector=null,this._currentTransform=null,t&&(t.__corner=0),o?this.requestRenderAll():s||this.renderTop()}}},_simpleEventHandler:function(e,t){var n=this.findTarget(t),i=this.targets,r={e:t,target:n,subTargets:i};if(this.fire(e,r),n&&n.fire(e,r),!i)return n;for(var a=0;a<i.length;a++)i[a].fire(e,r);return n},_handleEvent:function(e,t,n,i){var r=this._target,a=this.targets||[],o={e:e,target:r,subTargets:a,button:n||1,isClick:i||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};"up"===t&&(o.currentTarget=this.findTarget(e),o.currentSubTargets=this.targets),this.fire("mouse:"+t,o),r&&r.fire("mouse"+t,o);for(var s=0;s<a.length;s++)a[s].fire("mouse"+t,o)},_finalizeCurrentTransform:function(e){var t=this._currentTransform,n=t.target,i={e:e,target:n,transform:t,action:t.action};n._scaling&&(n._scaling=!1),n.setCoords(),(t.actionPerformed||this.stateful&&n.hasStateChanged())&&this._fire("modified",i)},_onMouseDownInDrawingMode:function(e){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(e).requestRenderAll();var t=this.getPointer(e);this.freeDrawingBrush.onMouseDown(t,{e:e,pointer:t}),this._handleEvent(e,"down")},_onMouseMoveInDrawingMode:function(e){if(this._isCurrentlyDrawing){var t=this.getPointer(e);this.freeDrawingBrush.onMouseMove(t,{e:e,pointer:t})}this.setCursor(this.freeDrawingCursor),this._handleEvent(e,"move")},_onMouseUpInDrawingMode:function(e){var t=this.getPointer(e);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:e,pointer:t}),this._handleEvent(e,"up")},__onMouseDown:function(e){this._cacheTransformEventData(e),this._handleEvent(e,"down:before");var t=this._target;if(i(e,3))this.fireRightClick&&this._handleEvent(e,"down",3);else if(i(e,2))this.fireMiddleClick&&this._handleEvent(e,"down",2);else if(this.isDrawingMode)this._onMouseDownInDrawingMode(e);else if(this._isMainEvent(e)&&!this._currentTransform){var n=this._pointer;this._previousPointer=n;var a=this._shouldRender(t),o=this._shouldGroup(e,t);if(this._shouldClearSelection(e,t)?this.discardActiveObject(e):o&&(this._handleGrouping(e,t),t=this._activeObject),!this.selection||t&&(t.selectable||t.isEditing||t===this._activeObject)||(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),t){var s=t===this._activeObject;t.selectable&&"down"===t.activeOn&&this.setActiveObject(t,e);var l=t._findTargetCorner(this.getPointer(e,!0),r.util.isTouchEvent(e));if(t.__corner=l,t===this._activeObject&&(l||!o)){this._setupCurrentTransform(e,t,s);var c=t.controls[l],u=(n=this.getPointer(e),c&&c.getMouseDownHandler(e,t,c));u&&u(e,this._currentTransform,n.x,n.y)}}this._handleEvent(e,"down"),(a||o)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(e){this._resetTransformEventData(),this._pointer=this.getPointer(e,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(e)||null},_beforeTransform:function(e){var t=this._currentTransform;this.stateful&&t.target.saveState(),this.fire("before:transform",{e:e,transform:t})},__onMouseMove:function(e){var t,n;if(this._handleEvent(e,"move:before"),this._cacheTransformEventData(e),this.isDrawingMode)this._onMouseMoveInDrawingMode(e);else if(this._isMainEvent(e)){var i=this._groupSelector;i?(n=this._absolutePointer,i.left=n.x-i.ex,i.top=n.y-i.ey,this.renderTop()):this._currentTransform?this._transformObject(e):(t=this.findTarget(e)||null,this._setCursorFromEvent(e,t),this._fireOverOutEvents(t,e)),this._handleEvent(e,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(e,t){var n=this._hoveredTarget,i=this._hoveredTargets,r=this.targets,a=Math.max(i.length,r.length);this.fireSyntheticInOutEvents(e,t,{oldTarget:n,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var o=0;o<a;o++)this.fireSyntheticInOutEvents(r[o],t,{oldTarget:i[o],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=e,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(e,t){var n=this._draggedoverTarget,i=this._hoveredTargets,r=this.targets,a=Math.max(i.length,r.length);this.fireSyntheticInOutEvents(e,t,{oldTarget:n,evtOut:"dragleave",evtIn:"dragenter"});for(var o=0;o<a;o++)this.fireSyntheticInOutEvents(r[o],t,{oldTarget:i[o],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=e},fireSyntheticInOutEvents:function(e,t,n){var i,r,a,o=n.oldTarget,s=o!==e,l=n.canvasEvtIn,c=n.canvasEvtOut;s&&(i={e:t,target:e,previousTarget:o},r={e:t,target:o,nextTarget:e}),a=e&&s,o&&s&&(c&&this.fire(c,r),o.fire(n.evtOut,r)),a&&(l&&this.fire(l,i),e.fire(n.evtIn,i))},__onMouseWheel:function(e){this._cacheTransformEventData(e),this._handleEvent(e,"wheel"),this._resetTransformEventData()},_transformObject:function(e){var t=this.getPointer(e),n=this._currentTransform;n.reset=!1,n.shiftKey=e.shiftKey,n.altKey=e[this.centeredKey],this._performTransformAction(e,n,t),n.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(e,t,n){var i=n.x,r=n.y,a=t.action,o=!1,s=t.actionHandler;s&&(o=s(e,t,i,r)),"drag"===a&&o&&(t.target.isMoving=!0,this.setCursor(t.target.moveCursor||this.moveCursor)),t.actionPerformed=t.actionPerformed||o},_fire:r.controlsUtils.fireEvent,_setCursorFromEvent:function(e,t){if(!t)return this.setCursor(this.defaultCursor),!1;var n=t.hoverCursor||this.hoverCursor,i=this._activeObject&&"activeSelection"===this._activeObject.type?this._activeObject:null,r=(!i||!i.contains(t))&&t._findTargetCorner(this.getPointer(e,!0));r?this.setCursor(this.getCornerCursor(r,t,e)):(t.subTargetCheck&&this.targets.concat().reverse().map((function(e){n=e.hoverCursor||n})),this.setCursor(n))},getCornerCursor:function(e,t,n){var i=t.controls[e];return i.cursorStyleHandler(n,i,t)}})}(),function(){var e=Math.min,t=Math.max;r.util.object.extend(r.Canvas.prototype,{_shouldGroup:function(e,t){var n=this._activeObject;return n&&this._isSelectionKeyPressed(e)&&t&&t.selectable&&this.selection&&(n!==t||"activeSelection"===n.type)&&!t.onSelect({e:e})},_handleGrouping:function(e,t){var n=this._activeObject;n.__corner||(t!==n||(t=this.findTarget(e,!0))&&t.selectable)&&(n&&"activeSelection"===n.type?this._updateActiveSelection(t,e):this._createActiveSelection(t,e))},_updateActiveSelection:function(e,t){var n=this._activeObject,i=n._objects.slice(0);n.contains(e)?(n.removeWithUpdate(e),this._hoveredTarget=e,this._hoveredTargets=this.targets.concat(),1===n.size()&&this._setActiveObject(n.item(0),t)):(n.addWithUpdate(e),this._hoveredTarget=n,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(i,t)},_createActiveSelection:function(e,t){var n=this.getActiveObjects(),i=this._createGroup(e);this._hoveredTarget=i,this._setActiveObject(i,t),this._fireSelectionEvents(n,t)},_createGroup:function(e){var t=this._objects,n=t.indexOf(this._activeObject)<t.indexOf(e)?[this._activeObject,e]:[e,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new r.ActiveSelection(n,{canvas:this})},_groupSelectedObjects:function(e){var t,n=this._collectObjects(e);1===n.length?this.setActiveObject(n[0],e):n.length>1&&(t=new r.ActiveSelection(n.reverse(),{canvas:this}),this.setActiveObject(t,e))},_collectObjects:function(n){for(var i,a=[],o=this._groupSelector.ex,s=this._groupSelector.ey,l=o+this._groupSelector.left,c=s+this._groupSelector.top,u=new r.Point(e(o,l),e(s,c)),g=new r.Point(t(o,l),t(s,c)),d=!this.selectionFullyContained,h=o===l&&s===c,f=this._objects.length;f--&&!((i=this._objects[f])&&i.selectable&&i.visible&&(d&&i.intersectsWithRect(u,g,!0)||i.isContainedWithinRect(u,g,!0)||d&&i.containsPoint(u,null,!0)||d&&i.containsPoint(g,null,!0))&&(a.push(i),h)););return a.length>1&&(a=a.filter((function(e){return!e.onSelect({e:n})}))),a},_maybeGroupObjects:function(e){this.selection&&this._groupSelector&&this._groupSelectedObjects(e),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),r.util.object.extend(r.StaticCanvas.prototype,{toDataURL:function(e){e||(e={});var t=e.format||"png",n=e.quality||1,i=(e.multiplier||1)*(e.enableRetinaScaling?this.getRetinaScaling():1),a=this.toCanvasElement(i,e);return r.util.toDataURL(a,t,n)},toCanvasElement:function(e,t){e=e||1;var n=((t=t||{}).width||this.width)*e,i=(t.height||this.height)*e,a=this.getZoom(),o=this.width,s=this.height,l=a*e,c=this.viewportTransform,u=(c[4]-(t.left||0))*e,g=(c[5]-(t.top||0))*e,d=this.interactive,h=[l,0,0,l,u,g],f=this.enableRetinaScaling,p=r.util.createCanvasElement(),I=this.contextTop;return p.width=n,p.height=i,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=h,this.width=n,this.height=i,this.calcViewportBoundaries(),this.renderCanvas(p.getContext("2d"),this._objects),this.viewportTransform=c,this.width=o,this.height=s,this.calcViewportBoundaries(),this.interactive=d,this.enableRetinaScaling=f,this.contextTop=I,p}}),r.util.object.extend(r.StaticCanvas.prototype,{loadFromJSON:function(e,t,n){if(e){var i="string"===typeof e?JSON.parse(e):r.util.object.clone(e),a=this,o=i.clipPath,s=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete i.clipPath,this._enlivenObjects(i.objects,(function(e){a.clear(),a._setBgOverlay(i,(function(){o?a._enlivenObjects([o],(function(n){a.clipPath=n[0],a.__setupCanvas.call(a,i,e,s,t)})):a.__setupCanvas.call(a,i,e,s,t)}))}),n),this}},__setupCanvas:function(e,t,n,i){var r=this;t.forEach((function(e,t){r.insertAt(e,t)})),this.renderOnAddRemove=n,delete e.objects,delete e.backgroundImage,delete e.overlayImage,delete e.background,delete e.overlay,this._setOptions(e),this.renderAll(),i&&i()},_setBgOverlay:function(e,t){var n={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(e.backgroundImage||e.overlayImage||e.background||e.overlay){var i=function(){n.backgroundImage&&n.overlayImage&&n.backgroundColor&&n.overlayColor&&t&&t()};this.__setBgOverlay("backgroundImage",e.backgroundImage,n,i),this.__setBgOverlay("overlayImage",e.overlayImage,n,i),this.__setBgOverlay("backgroundColor",e.background,n,i),this.__setBgOverlay("overlayColor",e.overlay,n,i)}else t&&t()},__setBgOverlay:function(e,t,n,i){var a=this;if(!t)return n[e]=!0,void(i&&i());"backgroundImage"===e||"overlayImage"===e?r.util.enlivenObjects([t],(function(t){a[e]=t[0],n[e]=!0,i&&i()})):this["set"+r.util.string.capitalize(e,!0)](t,(function(){n[e]=!0,i&&i()}))},_enlivenObjects:function(e,t,n){e&&0!==e.length?r.util.enlivenObjects(e,(function(e){t&&t(e)}),null,n):t&&t([])},_toDataURL:function(e,t){this.clone((function(n){t(n.toDataURL(e))}))},_toDataURLWithMultiplier:function(e,t,n){this.clone((function(i){n(i.toDataURLWithMultiplier(e,t))}))},clone:function(e,t){var n=JSON.stringify(this.toJSON(t));this.cloneWithoutData((function(t){t.loadFromJSON(n,(function(){e&&e(t)}))}))},cloneWithoutData:function(e){var t=r.util.createCanvasElement();t.width=this.width,t.height=this.height;var n=new r.Canvas(t);this.backgroundImage?(n.setBackgroundImage(this.backgroundImage.src,(function(){n.renderAll(),e&&e(n)})),n.backgroundImageOpacity=this.backgroundImageOpacity,n.backgroundImageStretch=this.backgroundImageStretch):e&&e(n)}}),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.util.object.extend,i=t.util.object.clone,r=t.util.toFixed,a=t.util.string.capitalize,o=t.util.degreesToRadians,s=!t.isLikelyNode;t.Object||(t.Object=t.util.createClass(t.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:s,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(e){e&&this.setOptions(e)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=t.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(e){var n=t.perfLimitSizeTotal,i=e.width,r=e.height,a=t.maxCacheSideLimit,o=t.minCacheSideLimit;if(i<=a&&r<=a&&i*r<=n)return i<o&&(e.width=o),r<o&&(e.height=o),e;var s=i/r,l=t.util.limitDimsByArea(s,n),c=t.util.capValue,u=c(o,l.x,a),g=c(o,l.y,a);return i>u&&(e.zoomX/=i/u,e.width=u,e.capped=!0),r>g&&(e.zoomY/=r/g,e.height=g,e.capped=!0),e},_getCacheCanvasDimensions:function(){var e=this.getTotalObjectScaling(),t=this._getTransformedDimensions(0,0),n=t.x*e.scaleX/this.scaleX,i=t.y*e.scaleY/this.scaleY;return{width:n+2,height:i+2,zoomX:e.scaleX,zoomY:e.scaleY,x:n,y:i}},_updateCacheCanvas:function(){var e=this.canvas;if(this.noScaleCache&&e&&e._currentTransform){var n=e._currentTransform.target,i=e._currentTransform.action;if(this===n&&i.slice&&"scale"===i.slice(0,5))return!1}var r,a,o=this._cacheCanvas,s=this._limitCacheSize(this._getCacheCanvasDimensions()),l=t.minCacheSideLimit,c=s.width,u=s.height,g=s.zoomX,d=s.zoomY,h=c!==this.cacheWidth||u!==this.cacheHeight,f=this.zoomX!==g||this.zoomY!==d,p=h||f,I=0,C=0,m=!1;if(h){var v=this._cacheCanvas.width,A=this._cacheCanvas.height,b=c>v||u>A;m=b||(c<.9*v||u<.9*A)&&v>l&&A>l,b&&!s.capped&&(c>l||u>l)&&(I=.1*c,C=.1*u)}return this instanceof t.Text&&this.path&&(p=!0,m=!0,I+=this.getHeightOfLine(0)*this.zoomX,C+=this.getHeightOfLine(0)*this.zoomY),!!p&&(m?(o.width=Math.ceil(c+I),o.height=Math.ceil(u+C)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,o.width,o.height)),r=s.x/2,a=s.y/2,this.cacheTranslationX=Math.round(o.width/2-r)+r,this.cacheTranslationY=Math.round(o.height/2-a)+a,this.cacheWidth=c,this.cacheHeight=u,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(g,d),this.zoomX=g,this.zoomY=d,!0)},setOptions:function(e){this._setOptions(e),this._initGradient(e.fill,"fill"),this._initGradient(e.stroke,"stroke"),this._initPattern(e.fill,"fill"),this._initPattern(e.stroke,"stroke")},transform:function(e){var t=this.group&&!this.group._transformDone||this.group&&this.canvas&&e===this.canvas.contextTop,n=this.calcTransformMatrix(!t);e.transform(n[0],n[1],n[2],n[3],n[4],n[5])},toObject:function(e){var n=t.Object.NUM_FRACTION_DIGITS,i={type:this.type,version:t.version,originX:this.originX,originY:this.originY,left:r(this.left,n),top:r(this.top,n),width:r(this.width,n),height:r(this.height,n),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:r(this.strokeWidth,n),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:r(this.strokeMiterLimit,n),scaleX:r(this.scaleX,n),scaleY:r(this.scaleY,n),angle:r(this.angle,n),flipX:this.flipX,flipY:this.flipY,opacity:r(this.opacity,n),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:r(this.skewX,n),skewY:r(this.skewY,n)};return this.clipPath&&!this.clipPath.excludeFromExport&&(i.clipPath=this.clipPath.toObject(e),i.clipPath.inverted=this.clipPath.inverted,i.clipPath.absolutePositioned=this.clipPath.absolutePositioned),t.util.populateWithProperties(this,i,e),this.includeDefaultValues||(i=this._removeDefaultValues(i)),i},toDatalessObject:function(e){return this.toObject(e)},_removeDefaultValues:function(e){var n=t.util.getKlass(e.type).prototype;return n.stateProperties.forEach((function(t){"left"!==t&&"top"!==t&&(e[t]===n[t]&&delete e[t],Array.isArray(e[t])&&Array.isArray(n[t])&&0===e[t].length&&0===n[t].length&&delete e[t])})),e},toString:function(){return"#<fabric."+a(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var e=t.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(e.scaleX),scaleY:Math.abs(e.scaleY)}},getTotalObjectScaling:function(){var e=this.getObjectScaling(),t=e.scaleX,n=e.scaleY;if(this.canvas){var i=this.canvas.getZoom(),r=this.canvas.getRetinaScaling();t*=i*r,n*=i*r}return{scaleX:t,scaleY:n}},getObjectOpacity:function(){var e=this.opacity;return this.group&&(e*=this.group.getObjectOpacity()),e},_set:function(e,n){var i="scaleX"===e||"scaleY"===e,r=this[e]!==n,a=!1;return i&&(n=this._constrainScale(n)),"scaleX"===e&&n<0?(this.flipX=!this.flipX,n*=-1):"scaleY"===e&&n<0?(this.flipY=!this.flipY,n*=-1):"shadow"!==e||!n||n instanceof t.Shadow?"dirty"===e&&this.group&&this.group.set("dirty",n):n=new t.Shadow(n),this[e]=n,r&&(a=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(e)>-1?(this.dirty=!0,a&&this.group.set("dirty",!0)):a&&this.stateProperties.indexOf(e)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:t.iMatrix.concat()},isNotVisible:function(){return 0===this.opacity||!this.width&&!this.height&&0===this.strokeWidth||!this.visible},render:function(e){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(e.save(),this._setupCompositeOperation(e),this.drawSelectionBackground(e),this.transform(e),this._setOpacity(e),this._setShadow(e,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(e)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(e),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),e.restore())},renderCache:function(e){e=e||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,e.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&"transparent"!==this.stroke&&0!==this.strokeWidth},hasFill:function(){return this.fill&&"transparent"!==this.fill},needsItsOwnCache:function(){return!("stroke"!==this.paintFirst||!this.hasFill()||!this.hasStroke()||"object"!==typeof this.shadow)||!!this.clipPath},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(0!==this.shadow.offsetX||0!==this.shadow.offsetY)},drawClipPathOnCache:function(e,n){if(e.save(),n.inverted?e.globalCompositeOperation="destination-out":e.globalCompositeOperation="destination-in",n.absolutePositioned){var i=t.util.invertTransform(this.calcTransformMatrix());e.transform(i[0],i[1],i[2],i[3],i[4],i[5])}n.transform(e),e.scale(1/n.zoomX,1/n.zoomY),e.drawImage(n._cacheCanvas,-n.cacheTranslationX,-n.cacheTranslationY),e.restore()},drawObject:function(e,t){var n=this.fill,i=this.stroke;t?(this.fill="black",this.stroke="",this._setClippingProperties(e)):this._renderBackground(e),this._render(e),this._drawClipPath(e,this.clipPath),this.fill=n,this.stroke=i},_drawClipPath:function(e,t){t&&(t.canvas=this.canvas,t.shouldCache(),t._transformDone=!0,t.renderCache({forClipping:!0}),this.drawClipPathOnCache(e,t))},drawCacheOnCanvas:function(e){e.scale(1/this.zoomX,1/this.zoomY),e.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(e){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!e&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!e){var t=this.cacheWidth/this.zoomX,n=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-t/2,-n/2,t,n)}return!0}return!1},_renderBackground:function(e){if(this.backgroundColor){var t=this._getNonTransformedDimensions();e.fillStyle=this.backgroundColor,e.fillRect(-t.x/2,-t.y/2,t.x,t.y),this._removeShadow(e)}},_setOpacity:function(e){this.group&&!this.group._transformDone?e.globalAlpha=this.getObjectOpacity():e.globalAlpha*=this.opacity},_setStrokeStyles:function(e,t){var n=t.stroke;n&&(e.lineWidth=t.strokeWidth,e.lineCap=t.strokeLineCap,e.lineDashOffset=t.strokeDashOffset,e.lineJoin=t.strokeLineJoin,e.miterLimit=t.strokeMiterLimit,n.toLive?"percentage"===n.gradientUnits||n.gradientTransform||n.patternTransform?this._applyPatternForTransformedGradient(e,n):(e.strokeStyle=n.toLive(e,this),this._applyPatternGradientTransform(e,n)):e.strokeStyle=t.stroke)},_setFillStyles:function(e,t){var n=t.fill;n&&(n.toLive?(e.fillStyle=n.toLive(e,this),this._applyPatternGradientTransform(e,t.fill)):e.fillStyle=n)},_setClippingProperties:function(e){e.globalAlpha=1,e.strokeStyle="transparent",e.fillStyle="#000000"},_setLineDash:function(e,t){t&&0!==t.length&&(1&t.length&&t.push.apply(t,t),e.setLineDash(t))},_renderControls:function(e,n){var i,r,a,s=this.getViewportTransform(),l=this.calcTransformMatrix();r="undefined"!==typeof(n=n||{}).hasBorders?n.hasBorders:this.hasBorders,a="undefined"!==typeof n.hasControls?n.hasControls:this.hasControls,l=t.util.multiplyTransformMatrices(s,l),i=t.util.qrDecompose(l),e.save(),e.translate(i.translateX,i.translateY),e.lineWidth=1*this.borderScaleFactor,this.group||(e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(i.angle-=180),e.rotate(o(this.group?i.angle:this.angle)),n.forActiveSelection||this.group?r&&this.drawBordersInGroup(e,i,n):r&&this.drawBorders(e,n),a&&this.drawControls(e,n),e.restore()},_setShadow:function(e){if(this.shadow){var n,i=this.shadow,r=this.canvas,a=r&&r.viewportTransform[0]||1,o=r&&r.viewportTransform[3]||1;n=i.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),r&&r._isRetinaScaling()&&(a*=t.devicePixelRatio,o*=t.devicePixelRatio),e.shadowColor=i.color,e.shadowBlur=i.blur*t.browserShadowBlurConstant*(a+o)*(n.scaleX+n.scaleY)/4,e.shadowOffsetX=i.offsetX*a*n.scaleX,e.shadowOffsetY=i.offsetY*o*n.scaleY}},_removeShadow:function(e){this.shadow&&(e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0)},_applyPatternGradientTransform:function(e,t){if(!t||!t.toLive)return{offsetX:0,offsetY:0};var n=t.gradientTransform||t.patternTransform,i=-this.width/2+t.offsetX||0,r=-this.height/2+t.offsetY||0;return"percentage"===t.gradientUnits?e.transform(this.width,0,0,this.height,i,r):e.transform(1,0,0,1,i,r),n&&e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),{offsetX:i,offsetY:r}},_renderPaintInOrder:function(e){"stroke"===this.paintFirst?(this._renderStroke(e),this._renderFill(e)):(this._renderFill(e),this._renderStroke(e))},_render:function(){},_renderFill:function(e){this.fill&&(e.save(),this._setFillStyles(e,this),"evenodd"===this.fillRule?e.fill("evenodd"):e.fill(),e.restore())},_renderStroke:function(e){if(this.stroke&&0!==this.strokeWidth){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this.strokeUniform&&this.group){var t=this.getObjectScaling();e.scale(1/t.scaleX,1/t.scaleY)}else this.strokeUniform&&e.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(e,this.strokeDashArray),this._setStrokeStyles(e,this),e.stroke(),e.restore()}},_applyPatternForTransformedGradient:function(e,n){var i,r=this._limitCacheSize(this._getCacheCanvasDimensions()),a=t.util.createCanvasElement(),o=this.canvas.getRetinaScaling(),s=r.x/this.scaleX/o,l=r.y/this.scaleY/o;a.width=s,a.height=l,(i=a.getContext("2d")).beginPath(),i.moveTo(0,0),i.lineTo(s,0),i.lineTo(s,l),i.lineTo(0,l),i.closePath(),i.translate(s/2,l/2),i.scale(r.zoomX/this.scaleX/o,r.zoomY/this.scaleY/o),this._applyPatternGradientTransform(i,n),i.fillStyle=n.toLive(e),i.fill(),e.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),e.scale(o*this.scaleX/r.zoomX,o*this.scaleY/r.zoomY),e.strokeStyle=i.createPattern(a,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var e=t.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",e.scaleX),this.set("scaleY",e.scaleY),this.angle=e.angle,this.skewX=e.skewX,this.skewY=0}},_removeTransformMatrix:function(e){var n=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),n=t.util.transformPoint(n,this.transformMatrix)),this.transformMatrix=null,e&&(this.scaleX*=e.scaleX,this.scaleY*=e.scaleY,this.cropX=e.cropX,this.cropY=e.cropY,n.x+=e.offsetLeft,n.y+=e.offsetTop,this.width=e.width,this.height=e.height),this.setPositionByOrigin(n,"center","center")},clone:function(e,n){var i=this.toObject(n);this.constructor.fromObject?this.constructor.fromObject(i,e):t.Object._fromObject("Object",i,e)},cloneAsImage:function(e,n){var i=this.toCanvasElement(n);return e&&e(new t.Image(i)),this},toCanvasElement:function(e){e||(e={});var n=t.util,i=n.saveObjectTransform(this),r=this.group,a=this.shadow,o=Math.abs,s=(e.multiplier||1)*(e.enableRetinaScaling?t.devicePixelRatio:1);delete this.group,e.withoutTransform&&n.resetObjectTransform(this),e.withoutShadow&&(this.shadow=null);var l,c,u,g,d=t.util.createCanvasElement(),h=this.getBoundingRect(!0,!0),f=this.shadow,p={x:0,y:0};f&&(c=f.blur,l=f.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),p.x=2*Math.round(o(f.offsetX)+c)*o(l.scaleX),p.y=2*Math.round(o(f.offsetY)+c)*o(l.scaleY)),u=h.width+p.x,g=h.height+p.y,d.width=Math.ceil(u),d.height=Math.ceil(g);var I=new t.StaticCanvas(d,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});"jpeg"===e.format&&(I.backgroundColor="#fff"),this.setPositionByOrigin(new t.Point(I.width/2,I.height/2),"center","center");var C=this.canvas;I.add(this);var m=I.toCanvasElement(s||1,e);return this.shadow=a,this.set("canvas",C),r&&(this.group=r),this.set(i).setCoords(),I._objects=[],I.dispose(),I=null,m},toDataURL:function(e){return e||(e={}),t.util.toDataURL(this.toCanvasElement(e),e.format||"png",e.quality||1)},isType:function(e){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===e},complexity:function(){return 1},toJSON:function(e){return this.toObject(e)},rotate:function(e){var t=("center"!==this.originX||"center"!==this.originY)&&this.centeredRotation;return t&&this._setOriginToCenter(),this.set("angle",e),t&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(e,n){n=n||this.canvas.getPointer(e);var i=new t.Point(n.x,n.y),r=this._getLeftTopCoords();return this.angle&&(i=t.util.rotatePoint(i,r,o(-this.angle))),{x:i.x-r.x,y:i.y-r.y}},_setupCompositeOperation:function(e){this.globalCompositeOperation&&(e.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){t.runningAnimations&&t.runningAnimations.cancelByTarget(this)}}),t.util.createAccessors&&t.util.createAccessors(t.Object),n(t.Object.prototype,t.Observable),t.Object.NUM_FRACTION_DIGITS=2,t.Object.ENLIVEN_PROPS=["clipPath"],t.Object._fromObject=function(e,n,r,a){var o=t[e];n=i(n,!0),t.util.enlivenPatterns([n.fill,n.stroke],(function(e){"undefined"!==typeof e[0]&&(n.fill=e[0]),"undefined"!==typeof e[1]&&(n.stroke=e[1]),t.util.enlivenObjectEnlivables(n,n,(function(){var e=a?new o(n[a],n):new o(n);r&&r(e)}))}))},t.Object.__uid=0)}(t),function(){var e=r.util.degreesToRadians,t={left:-.5,center:0,right:.5},n={top:-.5,center:0,bottom:.5};r.util.object.extend(r.Object.prototype,{translateToGivenOrigin:function(e,i,a,o,s){var l,c,u,g=e.x,d=e.y;return"string"===typeof i?i=t[i]:i-=.5,"string"===typeof o?o=t[o]:o-=.5,"string"===typeof a?a=n[a]:a-=.5,"string"===typeof s?s=n[s]:s-=.5,c=s-a,((l=o-i)||c)&&(u=this._getTransformedDimensions(),g=e.x+l*u.x,d=e.y+c*u.y),new r.Point(g,d)},translateToCenterPoint:function(t,n,i){var a=this.translateToGivenOrigin(t,n,i,"center","center");return this.angle?r.util.rotatePoint(a,t,e(this.angle)):a},translateToOriginPoint:function(t,n,i){var a=this.translateToGivenOrigin(t,"center","center",n,i);return this.angle?r.util.rotatePoint(a,t,e(this.angle)):a},getCenterPoint:function(){var e=new r.Point(this.left,this.top);return this.translateToCenterPoint(e,this.originX,this.originY)},getPointByOrigin:function(e,t){var n=this.getCenterPoint();return this.translateToOriginPoint(n,e,t)},toLocalPoint:function(t,n,i){var a,o,s=this.getCenterPoint();return a="undefined"!==typeof n&&"undefined"!==typeof i?this.translateToGivenOrigin(s,"center","center",n,i):new r.Point(this.left,this.top),o=new r.Point(t.x,t.y),this.angle&&(o=r.util.rotatePoint(o,s,-e(this.angle))),o.subtractEquals(a)},setPositionByOrigin:function(e,t,n){var i=this.translateToCenterPoint(e,t,n),r=this.translateToOriginPoint(i,this.originX,this.originY);this.set("left",r.x),this.set("top",r.y)},adjustPosition:function(n){var i,a,o=e(this.angle),s=this.getScaledWidth(),l=r.util.cos(o)*s,c=r.util.sin(o)*s;i="string"===typeof this.originX?t[this.originX]:this.originX-.5,a="string"===typeof n?t[n]:n-.5,this.left+=l*(a-i),this.top+=c*(a-i),this.setCoords(),this.originX=n},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var e=this.getCenterPoint();this.originX="center",this.originY="center",this.left=e.x,this.top=e.y},_resetOrigin:function(){var e=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=e.x,this.top=e.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){var e=r.util,t=e.degreesToRadians,n=e.multiplyTransformMatrices,i=e.transformPoint;e.object.extend(r.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(e,t){return t?e?this.calcACoords():this.calcLineCoords():(this.aCoords&&this.lineCoords||this.setCoords(!0),e?this.aCoords:this.lineCoords)},getCoords:function(e,t){return n=this._getCoords(e,t),[new r.Point(n.tl.x,n.tl.y),new r.Point(n.tr.x,n.tr.y),new r.Point(n.br.x,n.br.y),new r.Point(n.bl.x,n.bl.y)];var n},intersectsWithRect:function(e,t,n,i){var a=this.getCoords(n,i);return"Intersection"===r.Intersection.intersectPolygonRectangle(a,e,t).status},intersectsWithObject:function(e,t,n){return"Intersection"===r.Intersection.intersectPolygonPolygon(this.getCoords(t,n),e.getCoords(t,n)).status||e.isContainedWithinObject(this,t,n)||this.isContainedWithinObject(e,t,n)},isContainedWithinObject:function(e,t,n){for(var i=this.getCoords(t,n),r=t?e.aCoords:e.lineCoords,a=0,o=e._getImageLines(r);a<4;a++)if(!e.containsPoint(i[a],o))return!1;return!0},isContainedWithinRect:function(e,t,n,i){var r=this.getBoundingRect(n,i);return r.left>=e.x&&r.left+r.width<=t.x&&r.top>=e.y&&r.top+r.height<=t.y},containsPoint:function(e,t,n,i){var r=this._getCoords(n,i),a=(t=t||this._getImageLines(r),this._findCrossPoints(e,t));return 0!==a&&a%2===1},isOnScreen:function(e){if(!this.canvas)return!1;var t=this.canvas.vptCoords.tl,n=this.canvas.vptCoords.br;return!!this.getCoords(!0,e).some((function(e){return e.x<=n.x&&e.x>=t.x&&e.y<=n.y&&e.y>=t.y}))||(!!this.intersectsWithRect(t,n,!0,e)||this._containsCenterOfCanvas(t,n,e))},_containsCenterOfCanvas:function(e,t,n){var i={x:(e.x+t.x)/2,y:(e.y+t.y)/2};return!!this.containsPoint(i,null,!0,n)},isPartiallyOnScreen:function(e){if(!this.canvas)return!1;var t=this.canvas.vptCoords.tl,n=this.canvas.vptCoords.br;return!!this.intersectsWithRect(t,n,!0,e)||this.getCoords(!0,e).every((function(e){return(e.x>=n.x||e.x<=t.x)&&(e.y>=n.y||e.y<=t.y)}))&&this._containsCenterOfCanvas(t,n,e)},_getImageLines:function(e){return{topline:{o:e.tl,d:e.tr},rightline:{o:e.tr,d:e.br},bottomline:{o:e.br,d:e.bl},leftline:{o:e.bl,d:e.tl}}},_findCrossPoints:function(e,t){var n,i,r,a=0;for(var o in t)if(!((r=t[o]).o.y<e.y&&r.d.y<e.y)&&!(r.o.y>=e.y&&r.d.y>=e.y)&&(r.o.x===r.d.x&&r.o.x>=e.x?i=r.o.x:(0,n=(r.d.y-r.o.y)/(r.d.x-r.o.x),i=-(e.y-0*e.x-(r.o.y-n*r.o.x))/(0-n)),i>=e.x&&(a+=1),2===a))break;return a},getBoundingRect:function(t,n){var i=this.getCoords(t,n);return e.makeBoundingBoxFromPoints(i)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(e){return Math.abs(e)<this.minScaleLimit?e<0?-this.minScaleLimit:this.minScaleLimit:0===e?1e-4:e},scale:function(e){return this._set("scaleX",e),this._set("scaleY",e),this.setCoords()},scaleToWidth:function(e,t){var n=this.getBoundingRect(t).width/this.getScaledWidth();return this.scale(e/this.width/n)},scaleToHeight:function(e,t){var n=this.getBoundingRect(t).height/this.getScaledHeight();return this.scale(e/this.height/n)},calcLineCoords:function(){var n=this.getViewportTransform(),r=this.padding,a=t(this.angle),o=e.cos(a)*r,s=e.sin(a)*r,l=o+s,c=o-s,u=this.calcACoords(),g={tl:i(u.tl,n),tr:i(u.tr,n),bl:i(u.bl,n),br:i(u.br,n)};return r&&(g.tl.x-=c,g.tl.y-=l,g.tr.x+=l,g.tr.y-=c,g.bl.x-=l,g.bl.y+=c,g.br.x+=c,g.br.y+=l),g},calcOCoords:function(){var e=this._calcRotateMatrix(),t=this._calcTranslateMatrix(),i=this.getViewportTransform(),r=n(i,t),a=n(r,e),o=(a=n(a,[1/i[0],0,0,1/i[3],0,0]),this._calculateCurrentDimensions()),s={};return this.forEachControl((function(e,t,n){s[t]=e.positionHandler(o,a,n)})),s},calcACoords:function(){var e=this._calcRotateMatrix(),t=this._calcTranslateMatrix(),r=n(t,e),a=this._getTransformedDimensions(),o=a.x/2,s=a.y/2;return{tl:i({x:-o,y:-s},r),tr:i({x:o,y:-s},r),bl:i({x:-o,y:s},r),br:i({x:o,y:s},r)}},setCoords:function(e){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),e||(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords()),this},_calcRotateMatrix:function(){return e.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var e=this.getCenterPoint();return[1,0,0,1,e.x,e.y]},transformMatrixKey:function(e){var t="_",n="";return!e&&this.group&&(n=this.group.transformMatrixKey(e)+t),n+this.top+t+this.left+t+this.scaleX+t+this.scaleY+t+this.skewX+t+this.skewY+t+this.angle+t+this.originX+t+this.originY+t+this.width+t+this.height+t+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(e){var t=this.calcOwnMatrix();if(e||!this.group)return t;var i=this.transformMatrixKey(e),r=this.matrixCache||(this.matrixCache={});return r.key===i?r.value:(this.group&&(t=n(this.group.calcTransformMatrix(!1),t)),r.key=i,r.value=t,t)},calcOwnMatrix:function(){var t=this.transformMatrixKey(!0),n=this.ownMatrixCache||(this.ownMatrixCache={});if(n.key===t)return n.value;var i=this._calcTranslateMatrix(),r={angle:this.angle,translateX:i[4],translateY:i[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return n.key=t,n.value=e.composeMatrix(r),n.value},_getNonTransformedDimensions:function(){var e=this.strokeWidth;return{x:this.width+e,y:this.height+e}},_getTransformedDimensions:function(t,n){"undefined"===typeof t&&(t=this.skewX),"undefined"===typeof n&&(n=this.skewY);var i,r,a,o=0===t&&0===n;if(this.strokeUniform?(r=this.width,a=this.height):(r=(i=this._getNonTransformedDimensions()).x,a=i.y),o)return this._finalizeDimensions(r*this.scaleX,a*this.scaleY);var s=e.sizeAfterTransform(r,a,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:t,skewY:n});return this._finalizeDimensions(s.x,s.y)},_finalizeDimensions:function(e,t){return this.strokeUniform?{x:e+this.strokeWidth,y:t+this.strokeWidth}:{x:e,y:t}},_calculateCurrentDimensions:function(){var e=this.getViewportTransform(),t=this._getTransformedDimensions();return i(t,e,!0).scalarAdd(2*this.padding)}})}(),r.util.object.extend(r.Object.prototype,{sendToBack:function(){return this.group?r.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?r.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(e){return this.group?r.StaticCanvas.prototype.sendBackwards.call(this.group,this,e):this.canvas&&this.canvas.sendBackwards(this,e),this},bringForward:function(e){return this.group?r.StaticCanvas.prototype.bringForward.call(this.group,this,e):this.canvas&&this.canvas.bringForward(this,e),this},moveTo:function(e){return this.group&&"activeSelection"!==this.group.type?r.StaticCanvas.prototype.moveTo.call(this.group,this,e):this.canvas&&this.canvas.moveTo(this,e),this}}),function(){function e(e,t){if(t){if(t.toLive)return e+": url(#SVGID_"+t.id+"); ";var n=new r.Color(t),i=e+": "+n.toRgb()+"; ",a=n.getAlpha();return 1!==a&&(i+=e+"-opacity: "+a.toString()+"; "),i}return e+": none; "}var t=r.util.toFixed;r.util.object.extend(r.Object.prototype,{getSvgStyles:function(t){var n=this.fillRule?this.fillRule:"nonzero",i=this.strokeWidth?this.strokeWidth:"0",r=this.strokeDashArray?this.strokeDashArray.join(" "):"none",a=this.strokeDashOffset?this.strokeDashOffset:"0",o=this.strokeLineCap?this.strokeLineCap:"butt",s=this.strokeLineJoin?this.strokeLineJoin:"miter",l=this.strokeMiterLimit?this.strokeMiterLimit:"4",c="undefined"!==typeof this.opacity?this.opacity:"1",u=this.visible?"":" visibility: hidden;",g=t?"":this.getSvgFilter(),d=e("fill",this.fill);return[e("stroke",this.stroke),"stroke-width: ",i,"; ","stroke-dasharray: ",r,"; ","stroke-linecap: ",o,"; ","stroke-dashoffset: ",a,"; ","stroke-linejoin: ",s,"; ","stroke-miterlimit: ",l,"; ",d,"fill-rule: ",n,"; ","opacity: ",c,";",g,u].join("")},getSvgSpanStyles:function(t,n){var i="; ",r=t.fontFamily?"font-family: "+(-1===t.fontFamily.indexOf("'")&&-1===t.fontFamily.indexOf('"')?"'"+t.fontFamily+"'":t.fontFamily)+i:"",a=t.strokeWidth?"stroke-width: "+t.strokeWidth+i:"",o=(r=r,t.fontSize?"font-size: "+t.fontSize+"px"+i:""),s=t.fontStyle?"font-style: "+t.fontStyle+i:"",l=t.fontWeight?"font-weight: "+t.fontWeight+i:"",c=t.fill?e("fill",t.fill):"",u=t.stroke?e("stroke",t.stroke):"",g=this.getSvgTextDecoration(t);return g&&(g="text-decoration: "+g+i),[u,a,r,o,s,l,g,c,t.deltaY?"baseline-shift: "+-t.deltaY+"; ":"",n?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(e){return["overline","underline","line-through"].filter((function(t){return e[t.replace("-","")]})).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(e,t){var n=e?this.calcTransformMatrix():this.calcOwnMatrix();return'transform="'+r.util.matrixToSVG(n)+(t||"")+'" '},_setSVGBg:function(e){if(this.backgroundColor){var n=r.Object.NUM_FRACTION_DIGITS;e.push("\t\t<rect ",this._getFillAttributes(this.backgroundColor),' x="',t(-this.width/2,n),'" y="',t(-this.height/2,n),'" width="',t(this.width,n),'" height="',t(this.height,n),'"></rect>\n')}},toSVG:function(e){return this._createBaseSVGMarkup(this._toSVG(e),{reviver:e})},toClipPathSVG:function(e){return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(e),{reviver:e})},_createBaseClipPathSVGMarkup:function(e,t){var n=(t=t||{}).reviver,i=t.additionalTransform||"",r=[this.getSvgTransform(!0,i),this.getSvgCommons()].join(""),a=e.indexOf("COMMON_PARTS");return e[a]=r,n?n(e.join("")):e.join("")},_createBaseSVGMarkup:function(e,t){var n,i,a=(t=t||{}).noStyle,o=t.reviver,s=a?"":'style="'+this.getSvgStyles()+'" ',l=t.withShadow?'style="'+this.getSvgFilter()+'" ':"",c=this.clipPath,u=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",g=c&&c.absolutePositioned,d=this.stroke,h=this.fill,f=this.shadow,p=[],I=e.indexOf("COMMON_PARTS"),C=t.additionalTransform;return c&&(c.clipPathId="CLIPPATH_"+r.Object.__uid++,i='<clipPath id="'+c.clipPathId+'" >\n'+c.toClipPathSVG(o)+"</clipPath>\n"),g&&p.push("<g ",l,this.getSvgCommons()," >\n"),p.push("<g ",this.getSvgTransform(!1),g?"":l+this.getSvgCommons()," >\n"),n=[s,u,a?"":this.addPaintOrder()," ",C?'transform="'+C+'" ':""].join(""),e[I]=n,h&&h.toLive&&p.push(h.toSVG(this)),d&&d.toLive&&p.push(d.toSVG(this)),f&&p.push(f.toSVG(this)),c&&p.push(i),p.push(e.join("")),p.push("</g>\n"),g&&p.push("</g>\n"),o?o(p.join("")):p.join("")},addPaintOrder:function(){return"fill"!==this.paintFirst?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var e=r.util.object.extend,t="stateProperties";function n(t,n,i){var r={};i.forEach((function(e){r[e]=t[e]})),e(t[n],r,!0)}function i(e,t,n){if(e===t)return!0;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(var r=0,a=e.length;r<a;r++)if(!i(e[r],t[r]))return!1;return!0}if(e&&"object"===typeof e){var o,s=Object.keys(e);if(!t||"object"!==typeof t||!n&&s.length!==Object.keys(t).length)return!1;for(r=0,a=s.length;r<a;r++)if("canvas"!==(o=s[r])&&"group"!==o&&!i(e[o],t[o]))return!1;return!0}}r.util.object.extend(r.Object.prototype,{hasStateChanged:function(e){var n="_"+(e=e||t);return Object.keys(this[n]).length<this[e].length||!i(this[n],this,!0)},saveState:function(e){var i=e&&e.propertySet||t,r="_"+i;return this[r]?(n(this,r,this[i]),e&&e.stateProperties&&n(this,r,e.stateProperties),this):this.setupState(e)},setupState:function(e){var n=(e=e||{}).propertySet||t;return e.propertySet=n,this["_"+n]={},this.saveState(e),this}})}(),function(){var e=r.util.degreesToRadians;r.util.object.extend(r.Object.prototype,{_findTargetCorner:function(e,t){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var n,i,r,a=e.x,o=e.y,s=Object.keys(this.oCoords),l=s.length-1;for(this.__corner=0;l>=0;l--)if(r=s[l],this.isControlVisible(r)&&(i=this._getImageLines(t?this.oCoords[r].touchCorner:this.oCoords[r].corner),0!==(n=this._findCrossPoints({x:a,y:o},i))&&n%2===1))return this.__corner=r,r;return!1},forEachControl:function(e){for(var t in this.controls)e(this.controls[t],t,this)},_setCornerCoords:function(){var e=this.oCoords;for(var t in e){var n=this.controls[t];e[t].corner=n.calcCornerCoords(this.angle,this.cornerSize,e[t].x,e[t].y,!1),e[t].touchCorner=n.calcCornerCoords(this.angle,this.touchCornerSize,e[t].x,e[t].y,!0)}},drawSelectionBackground:function(t){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;t.save();var n=this.getCenterPoint(),i=this._calculateCurrentDimensions(),r=this.canvas.viewportTransform;return t.translate(n.x,n.y),t.scale(1/r[0],1/r[3]),t.rotate(e(this.angle)),t.fillStyle=this.selectionBackgroundColor,t.fillRect(-i.x/2,-i.y/2,i.x,i.y),t.restore(),this},drawBorders:function(e,t){t=t||{};var n=this._calculateCurrentDimensions(),i=this.borderScaleFactor,r=n.x+i,a=n.y+i,o="undefined"!==typeof t.hasControls?t.hasControls:this.hasControls,s=!1;return e.save(),e.strokeStyle=t.borderColor||this.borderColor,this._setLineDash(e,t.borderDashArray||this.borderDashArray),e.strokeRect(-r/2,-a/2,r,a),o&&(e.beginPath(),this.forEachControl((function(t,n,i){t.withConnection&&t.getVisibility(i,n)&&(s=!0,e.moveTo(t.x*r,t.y*a),e.lineTo(t.x*r+t.offsetX,t.y*a+t.offsetY))})),s&&e.stroke()),e.restore(),this},drawBordersInGroup:function(e,t,n){n=n||{};var i=r.util.sizeAfterTransform(this.width,this.height,t),a=this.strokeWidth,o=this.strokeUniform,s=this.borderScaleFactor,l=i.x+a*(o?this.canvas.getZoom():t.scaleX)+s,c=i.y+a*(o?this.canvas.getZoom():t.scaleY)+s;return e.save(),this._setLineDash(e,n.borderDashArray||this.borderDashArray),e.strokeStyle=n.borderColor||this.borderColor,e.strokeRect(-l/2,-c/2,l,c),e.restore(),this},drawControls:function(e,t){t=t||{},e.save();var n,i,a=this.canvas.getRetinaScaling();return e.setTransform(a,0,0,a,0,0),e.strokeStyle=e.fillStyle=t.cornerColor||this.cornerColor,this.transparentCorners||(e.strokeStyle=t.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(e,t.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(n=this.group.calcTransformMatrix()),this.forEachControl((function(a,o,s){i=s.oCoords[o],a.getVisibility(s,o)&&(n&&(i=r.util.transformPoint(i,n)),a.render(e,i.x,i.y,t,s))})),e.restore(),this},isControlVisible:function(e){return this.controls[e]&&this.controls[e].getVisibility(this,e)},setControlVisible:function(e,t){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[e]=t,this},setControlsVisibility:function(e){for(var t in e||(e={}),e)this.setControlVisible(t,e[t]);return this},onDeselect:function(){},onSelect:function(){}})}(),r.util.object.extend(r.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(e,t){var n=function(){},i=(t=t||{}).onComplete||n,a=t.onChange||n,o=this;return r.util.animate({target:this,startValue:e.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(t){e.set("left",t),o.requestRenderAll(),a()},onComplete:function(){e.setCoords(),i()}})},fxCenterObjectV:function(e,t){var n=function(){},i=(t=t||{}).onComplete||n,a=t.onChange||n,o=this;return r.util.animate({target:this,startValue:e.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(t){e.set("top",t),o.requestRenderAll(),a()},onComplete:function(){e.setCoords(),i()}})},fxRemove:function(e,t){var n=function(){},i=(t=t||{}).onComplete||n,a=t.onChange||n,o=this;return r.util.animate({target:this,startValue:e.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(t){e.set("opacity",t),o.requestRenderAll(),a()},onComplete:function(){o.remove(e),i()}})}}),r.util.object.extend(r.Object.prototype,{animate:function(){if(arguments[0]&&"object"===typeof arguments[0]){var e,t,n=[],i=[];for(e in arguments[0])n.push(e);for(var r=0,a=n.length;r<a;r++)e=n[r],t=r!==a-1,i.push(this._animate(e,arguments[0][e],arguments[1],t));return i}return this._animate.apply(this,arguments)},_animate:function(e,t,n,i){var a,o=this;t=t.toString(),n=n?r.util.object.clone(n):{},~e.indexOf(".")&&(a=e.split("."));var s=o.colorProperties.indexOf(e)>-1||a&&o.colorProperties.indexOf(a[1])>-1,l=a?this.get(a[0])[a[1]]:this.get(e);"from"in n||(n.from=l),s||(t=~t.indexOf("=")?l+parseFloat(t.replace("=","")):parseFloat(t));var c={target:this,startValue:n.from,endValue:t,byValue:n.by,easing:n.easing,duration:n.duration,abort:n.abort&&function(e,t,i){return n.abort.call(o,e,t,i)},onChange:function(t,r,s){a?o[a[0]][a[1]]=t:o.set(e,t),i||n.onChange&&n.onChange(t,r,s)},onComplete:function(e,t,r){i||(o.setCoords(),n.onComplete&&n.onComplete(e,t,r))}};return s?r.util.animateColor(c.startValue,c.endValue,c.duration,c):r.util.animate(c)}}),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.util.object.extend,i=t.util.object.clone,r={x1:1,x2:1,y1:1,y2:1};function a(e,t){var n=e.origin,i=e.axis1,r=e.axis2,a=e.dimension,o=t.nearest,s=t.center,l=t.farthest;return function(){switch(this.get(n)){case o:return Math.min(this.get(i),this.get(r));case s:return Math.min(this.get(i),this.get(r))+.5*this.get(a);case l:return Math.max(this.get(i),this.get(r))}}}t.Line?t.warn("fabric.Line is already defined"):(t.Line=t.util.createClass(t.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:t.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(e,t){e||(e=[0,0,0,0]),this.callSuper("initialize",t),this.set("x1",e[0]),this.set("y1",e[1]),this.set("x2",e[2]),this.set("y2",e[3]),this._setWidthHeight(t)},_setWidthHeight:function(e){e||(e={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in e?e.left:this._getLeftToOriginX(),this.top="top"in e?e.top:this._getTopToOriginY()},_set:function(e,t){return this.callSuper("_set",e,t),"undefined"!==typeof r[e]&&this._setWidthHeight(),this},_getLeftToOriginX:a({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:a({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(e){e.beginPath();var t=this.calcLinePoints();e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2),e.lineWidth=this.strokeWidth;var n=e.strokeStyle;e.strokeStyle=this.stroke||e.fillStyle,this.stroke&&this._renderStroke(e),e.strokeStyle=n},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(e){return n(this.callSuper("toObject",e),this.calcLinePoints())},_getNonTransformedDimensions:function(){var e=this.callSuper("_getNonTransformedDimensions");return"butt"===this.strokeLineCap&&(0===this.width&&(e.y-=this.strokeWidth),0===this.height&&(e.x-=this.strokeWidth)),e},calcLinePoints:function(){var e=this.x1<=this.x2?-1:1,t=this.y1<=this.y2?-1:1,n=e*this.width*.5,i=t*this.height*.5;return{x1:n,x2:e*this.width*-.5,y1:i,y2:t*this.height*-.5}},_toSVG:function(){var e=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',e.x1,'" y1="',e.y1,'" x2="',e.x2,'" y2="',e.y2,'" />\n']}}),t.Line.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),t.Line.fromElement=function(e,i,r){r=r||{};var a=t.parseAttributes(e,t.Line.ATTRIBUTE_NAMES),o=[a.x1||0,a.y1||0,a.x2||0,a.y2||0];i(new t.Line(o,n(a,r)))},t.Line.fromObject=function(e,n){var r=i(e,!0);r.points=[e.x1,e.y1,e.x2,e.y2],t.Object._fromObject("Line",r,(function(e){delete e.points,n&&n(e)}),"points")})}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.util.degreesToRadians;t.Circle?t.warn("fabric.Circle is already defined."):(t.Circle=t.util.createClass(t.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:t.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(e,t){return this.callSuper("_set",e,t),"radius"===e&&this.setRadius(t),this},toObject:function(e){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(e))},_toSVG:function(){var e,i=(this.endAngle-this.startAngle)%360;if(0===i)e=["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',this.radius,'" />\n'];else{var r=n(this.startAngle),a=n(this.endAngle),o=this.radius;e=['<path d="M '+t.util.cos(r)*o+" "+t.util.sin(r)*o," A "+o+" "+o," 0 ",+(i>180?"1":"0")+" 1"," "+t.util.cos(a)*o+" "+t.util.sin(a)*o,'" ',"COMMON_PARTS"," />\n"]}return e},_render:function(e){e.beginPath(),e.arc(0,0,this.radius,n(this.startAngle),n(this.endAngle),!1),this._renderPaintInOrder(e)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(e){return this.radius=e,this.set("width",2*e).set("height",2*e)}}),t.Circle.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),t.Circle.fromElement=function(e,n){var i,r=t.parseAttributes(e,t.Circle.ATTRIBUTE_NAMES);if(!("radius"in(i=r)&&i.radius>=0))throw new Error("value of `r` attribute is required and can not be negative");r.left=(r.left||0)-r.radius,r.top=(r.top||0)-r.radius,n(new t.Circle(r))},t.Circle.fromObject=function(e,n){t.Object._fromObject("Circle",e,n)})}(t),function(e){"use strict";var t=e.fabric||(e.fabric={});t.Triangle?t.warn("fabric.Triangle is already defined"):(t.Triangle=t.util.createClass(t.Object,{type:"triangle",width:100,height:100,_render:function(e){var t=this.width/2,n=this.height/2;e.beginPath(),e.moveTo(-t,n),e.lineTo(0,-n),e.lineTo(t,n),e.closePath(),this._renderPaintInOrder(e)},_toSVG:function(){var e=this.width/2,t=this.height/2;return["<polygon ","COMMON_PARTS",'points="',[-e+" "+t,"0 "+-t,e+" "+t].join(","),'" />']}}),t.Triangle.fromObject=function(e,n){return t.Object._fromObject("Triangle",e,n)})}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=2*Math.PI;t.Ellipse?t.warn("fabric.Ellipse is already defined."):(t.Ellipse=t.util.createClass(t.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:t.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(e){this.callSuper("initialize",e),this.set("rx",e&&e.rx||0),this.set("ry",e&&e.ry||0)},_set:function(e,t){switch(this.callSuper("_set",e,t),e){case"rx":this.rx=t,this.set("width",2*t);break;case"ry":this.ry=t,this.set("height",2*t)}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(e){return this.callSuper("toObject",["rx","ry"].concat(e))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,'" />\n']},_render:function(e){e.beginPath(),e.save(),e.transform(1,0,0,this.ry/this.rx,0,0),e.arc(0,0,this.rx,0,n,!1),e.restore(),this._renderPaintInOrder(e)}}),t.Ellipse.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),t.Ellipse.fromElement=function(e,n){var i=t.parseAttributes(e,t.Ellipse.ATTRIBUTE_NAMES);i.left=(i.left||0)-i.rx,i.top=(i.top||0)-i.ry,n(new t.Ellipse(i))},t.Ellipse.fromObject=function(e,n){t.Object._fromObject("Ellipse",e,n)})}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.util.object.extend;t.Rect?t.warn("fabric.Rect is already defined"):(t.Rect=t.util.createClass(t.Object,{stateProperties:t.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:t.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(e){this.callSuper("initialize",e),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(e){var t=this.rx?Math.min(this.rx,this.width/2):0,n=this.ry?Math.min(this.ry,this.height/2):0,i=this.width,r=this.height,a=-this.width/2,o=-this.height/2,s=0!==t||0!==n,l=.4477152502;e.beginPath(),e.moveTo(a+t,o),e.lineTo(a+i-t,o),s&&e.bezierCurveTo(a+i-l*t,o,a+i,o+l*n,a+i,o+n),e.lineTo(a+i,o+r-n),s&&e.bezierCurveTo(a+i,o+r-l*n,a+i-l*t,o+r,a+i-t,o+r),e.lineTo(a+t,o+r),s&&e.bezierCurveTo(a+l*t,o+r,a,o+r-l*n,a,o+r-n),e.lineTo(a,o+n),s&&e.bezierCurveTo(a,o+l*n,a+l*t,o,a+t,o),e.closePath(),this._renderPaintInOrder(e)},toObject:function(e){return this.callSuper("toObject",["rx","ry"].concat(e))},_toSVG:function(){return["<rect ","COMMON_PARTS",'x="',-this.width/2,'" y="',-this.height/2,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,'" />\n']}}),t.Rect.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),t.Rect.fromElement=function(e,i,r){if(!e)return i(null);r=r||{};var a=t.parseAttributes(e,t.Rect.ATTRIBUTE_NAMES);a.left=a.left||0,a.top=a.top||0,a.height=a.height||0,a.width=a.width||0;var o=new t.Rect(n(r?t.util.object.clone(r):{},a));o.visible=o.visible&&o.width>0&&o.height>0,i(o)},t.Rect.fromObject=function(e,n){return t.Object._fromObject("Rect",e,n)})}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.util.object.extend,i=t.util.array.min,r=t.util.array.max,a=t.util.toFixed,o=t.util.projectStrokeOnPoints;t.Polyline?t.warn("fabric.Polyline is already defined"):(t.Polyline=t.util.createClass(t.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:t.Object.prototype.cacheProperties.concat("points"),initialize:function(e,t){t=t||{},this.points=e||[],this.callSuper("initialize",t),this._setPositionDimensions(t)},_projectStrokeOnPoints:function(){return o(this.points,this,!0)},_setPositionDimensions:function(e){var t,n=this._calcDimensions(e),i=this.exactBoundingBox?this.strokeWidth:0;this.width=n.width-i,this.height=n.height-i,e.fromSVG||(t=this.translateToGivenOrigin({x:n.left-this.strokeWidth/2+i/2,y:n.top-this.strokeWidth/2+i/2},"left","top",this.originX,this.originY)),"undefined"===typeof e.left&&(this.left=e.fromSVG?n.left:t.x),"undefined"===typeof e.top&&(this.top=e.fromSVG?n.top:t.y),this.pathOffset={x:n.left+this.width/2+i/2,y:n.top+this.height/2+i/2}},_calcDimensions:function(){var e=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,t=i(e,"x")||0,n=i(e,"y")||0;return{left:t,top:n,width:(r(e,"x")||0)-t,height:(r(e,"y")||0)-n}},toObject:function(e){return n(this.callSuper("toObject",e),{points:this.points.concat()})},_toSVG:function(){for(var e=[],n=this.pathOffset.x,i=this.pathOffset.y,r=t.Object.NUM_FRACTION_DIGITS,o=0,s=this.points.length;o<s;o++)e.push(a(this.points[o].x-n,r),",",a(this.points[o].y-i,r)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',e.join(""),'" />\n']},commonRender:function(e){var t,n=this.points.length,i=this.pathOffset.x,r=this.pathOffset.y;if(!n||isNaN(this.points[n-1].y))return!1;e.beginPath(),e.moveTo(this.points[0].x-i,this.points[0].y-r);for(var a=0;a<n;a++)t=this.points[a],e.lineTo(t.x-i,t.y-r);return!0},_render:function(e){this.commonRender(e)&&this._renderPaintInOrder(e)},complexity:function(){return this.get("points").length}}),t.Polyline.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat(),t.Polyline.fromElementGenerator=function(e){return function(i,r,a){if(!i)return r(null);a||(a={});var o=t.parsePointsAttribute(i.getAttribute("points")),s=t.parseAttributes(i,t[e].ATTRIBUTE_NAMES);s.fromSVG=!0,r(new t[e](o,n(s,a)))}},t.Polyline.fromElement=t.Polyline.fromElementGenerator("Polyline"),t.Polyline.fromObject=function(e,n){return t.Object._fromObject("Polyline",e,n,"points")})}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.util.projectStrokeOnPoints;t.Polygon?t.warn("fabric.Polygon is already defined"):(t.Polygon=t.util.createClass(t.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return n(this.points,this)},_render:function(e){this.commonRender(e)&&(e.closePath(),this._renderPaintInOrder(e))}}),t.Polygon.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat(),t.Polygon.fromElement=t.Polyline.fromElementGenerator("Polygon"),t.Polygon.fromObject=function(e,n){t.Object._fromObject("Polygon",e,n,"points")})}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.util.array.min,i=t.util.array.max,r=t.util.object.extend,a=t.util.object.clone,o=t.util.toFixed;t.Path?t.warn("fabric.Path is already defined"):(t.Path=t.util.createClass(t.Object,{type:"path",path:null,cacheProperties:t.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:t.Object.prototype.stateProperties.concat("path"),initialize:function(e,t){delete(t=a(t||{})).path,this.callSuper("initialize",t),this._setPath(e||[],t)},_setPath:function(e,n){this.path=t.util.makePathSimpler(Array.isArray(e)?e:t.util.parsePath(e)),t.Polyline.prototype._setPositionDimensions.call(this,n||{})},_renderPathCommands:function(e){var t,n=0,i=0,r=0,a=0,o=0,s=0,l=-this.pathOffset.x,c=-this.pathOffset.y;e.beginPath();for(var u=0,g=this.path.length;u<g;++u)switch((t=this.path[u])[0]){case"L":r=t[1],a=t[2],e.lineTo(r+l,a+c);break;case"M":n=r=t[1],i=a=t[2],e.moveTo(r+l,a+c);break;case"C":r=t[5],a=t[6],o=t[3],s=t[4],e.bezierCurveTo(t[1]+l,t[2]+c,o+l,s+c,r+l,a+c);break;case"Q":e.quadraticCurveTo(t[1]+l,t[2]+c,t[3]+l,t[4]+c),r=t[3],a=t[4],o=t[1],s=t[2];break;case"z":case"Z":r=n,a=i,e.closePath()}},_render:function(e){this._renderPathCommands(e),this._renderPaintInOrder(e)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(e){return r(this.callSuper("toObject",e),{path:this.path.map((function(e){return e.slice()}))})},toDatalessObject:function(e){var t=this.toObject(["sourcePath"].concat(e));return t.sourcePath&&delete t.path,t},_toSVG:function(){return["<path ","COMMON_PARTS",'d="',t.util.joinPath(this.path),'" stroke-linecap="round" ',"/>\n"]},_getOffsetTransform:function(){var e=t.Object.NUM_FRACTION_DIGITS;return" translate("+o(-this.pathOffset.x,e)+", "+o(-this.pathOffset.y,e)+")"},toClipPathSVG:function(e){var t=this._getOffsetTransform();return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})},toSVG:function(e){var t=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var e,r,a=[],o=[],s=0,l=0,c=0,u=0,g=0,d=this.path.length;g<d;++g){switch((e=this.path[g])[0]){case"L":c=e[1],u=e[2],r=[];break;case"M":s=c=e[1],l=u=e[2],r=[];break;case"C":r=t.util.getBoundsOfCurve(c,u,e[1],e[2],e[3],e[4],e[5],e[6]),c=e[5],u=e[6];break;case"Q":r=t.util.getBoundsOfCurve(c,u,e[1],e[2],e[1],e[2],e[3],e[4]),c=e[3],u=e[4];break;case"z":case"Z":c=s,u=l}r.forEach((function(e){a.push(e.x),o.push(e.y)})),a.push(c),o.push(u)}var h=n(a)||0,f=n(o)||0;return{left:h,top:f,width:(i(a)||0)-h,height:(i(o)||0)-f}}}),t.Path.fromObject=function(e,n){if("string"===typeof e.sourcePath){var i=e.sourcePath;t.loadSVGFromURL(i,(function(i){var r=i[0];r.setOptions(e),e.clipPath?t.util.enlivenObjects([e.clipPath],(function(e){r.clipPath=e[0],n&&n(r)})):n&&n(r)}))}else t.Object._fromObject("Path",e,n,"path")},t.Path.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat(["d"]),t.Path.fromElement=function(e,n,i){var a=t.parseAttributes(e,t.Path.ATTRIBUTE_NAMES);a.fromSVG=!0,n(new t.Path(a.d,r(a,i)))})}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.util.array.min,i=t.util.array.max;t.Group||(t.Group=t.util.createClass(t.Object,t.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(e,t,n){t=t||{},this._objects=[],n&&this.callSuper("initialize",t),this._objects=e||[];for(var i=this._objects.length;i--;)this._objects[i].group=this;if(n)this._updateObjectsACoords();else{var r=t&&t.centerPoint;void 0!==t.originX&&(this.originX=t.originX),void 0!==t.originY&&(this.originY=t.originY),r||this._calcBounds(),this._updateObjectsCoords(r),delete t.centerPoint,this.callSuper("initialize",t)}this.setCoords()},_updateObjectsACoords:function(){for(var e=this._objects.length;e--;)this._objects[e].setCoords(true)},_updateObjectsCoords:function(e){e=e||this.getCenterPoint();for(var t=this._objects.length;t--;)this._updateObjectCoords(this._objects[t],e)},_updateObjectCoords:function(e,t){var n=e.left,i=e.top;e.set({left:n-t.x,top:i-t.y}),e.group=this,e.setCoords(!0)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(e){var n=!!this.group;return this._restoreObjectsState(),t.util.resetObjectTransform(this),e&&(n&&t.util.removeTransformFromObject(e,this.group.calcTransformMatrix()),this._objects.push(e),e.group=this,e._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,n?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(e){return this._restoreObjectsState(),t.util.resetObjectTransform(this),this.remove(e),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(e){this.dirty=!0,e.group=this,e._set("canvas",this.canvas)},_onObjectRemoved:function(e){this.dirty=!0,delete e.group},_set:function(e,n){var i=this._objects.length;if(this.useSetOnGroup)for(;i--;)this._objects[i].setOnGroup(e,n);if("canvas"===e)for(;i--;)this._objects[i]._set(e,n);t.Object.prototype._set.call(this,e,n)},toObject:function(e){var n=this.includeDefaultValues,i=this._objects.filter((function(e){return!e.excludeFromExport})).map((function(t){var i=t.includeDefaultValues;t.includeDefaultValues=n;var r=t.toObject(e);return t.includeDefaultValues=i,r})),r=t.Object.prototype.toObject.call(this,e);return r.objects=i,r},toDatalessObject:function(e){var n,i=this.sourcePath;if(i)n=i;else{var r=this.includeDefaultValues;n=this._objects.map((function(t){var n=t.includeDefaultValues;t.includeDefaultValues=r;var i=t.toDatalessObject(e);return t.includeDefaultValues=n,i}))}var a=t.Object.prototype.toDatalessObject.call(this,e);return a.objects=n,a},render:function(e){this._transformDone=!0,this.callSuper("render",e),this._transformDone=!1},shouldCache:function(){var e=t.Object.prototype.shouldCache.call(this);if(e)for(var n=0,i=this._objects.length;n<i;n++)if(this._objects[n].willDrawShadow())return this.ownCaching=!1,!1;return e},willDrawShadow:function(){if(t.Object.prototype.willDrawShadow.call(this))return!0;for(var e=0,n=this._objects.length;e<n;e++)if(this._objects[e].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(e){for(var t=0,n=this._objects.length;t<n;t++)this._objects[t].render(e);this._drawClipPath(e,this.clipPath)},isCacheDirty:function(e){if(this.callSuper("isCacheDirty",e))return!0;if(!this.statefullCache)return!1;for(var t=0,n=this._objects.length;t<n;t++)if(this._objects[t].isCacheDirty(!0)){if(this._cacheCanvas){var i=this.cacheWidth/this.zoomX,r=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-i/2,-r/2,i,r)}return!0}return!1},_restoreObjectsState:function(){var e=this.calcOwnMatrix();return this._objects.forEach((function(n){t.util.addTransformToObject(n,e),delete n.group,n.setCoords()})),this},destroy:function(){return this._objects.forEach((function(e){e.set("dirty",!0)})),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject((function(e){e.dispose&&e.dispose()})),this._objects=[]},toActiveSelection:function(){if(this.canvas){var e=this._objects,n=this.canvas;this._objects=[];var i=this.toObject();delete i.objects;var r=new t.ActiveSelection([]);return r.set(i),r.type="activeSelection",n.remove(this),e.forEach((function(e){e.group=r,e.dirty=!0,n.add(e)})),r.canvas=n,r._objects=e,n._activeObject=r,r.setCoords(),r}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){return this.forEachObject((function(e){e.setCoords(true)})),this},_calcBounds:function(e){for(var t,n,i,r,a=[],o=[],s=["tr","br","bl","tl"],l=0,c=this._objects.length,u=s.length;l<c;++l){for(i=(t=this._objects[l]).calcACoords(),r=0;r<u;r++)n=s[r],a.push(i[n].x),o.push(i[n].y);t.aCoords=i}this._getBounds(a,o,e)},_getBounds:function(e,r,a){var o=new t.Point(n(e),n(r)),s=new t.Point(i(e),i(r)),l=o.y||0,c=o.x||0,u=s.x-o.x||0,g=s.y-o.y||0;this.width=u,this.height=g,a||this.setPositionByOrigin({x:c,y:l},"left","top")},_toSVG:function(e){for(var t=["<g ","COMMON_PARTS"," >\n"],n=0,i=this._objects.length;n<i;n++)t.push("\t\t",this._objects[n].toSVG(e));return t.push("</g>\n"),t},getSvgStyles:function(){var e="undefined"!==typeof this.opacity&&1!==this.opacity?"opacity: "+this.opacity+";":"",t=this.visible?"":" visibility: hidden;";return[e,this.getSvgFilter(),t].join("")},toClipPathSVG:function(e){for(var t=[],n=0,i=this._objects.length;n<i;n++)t.push("\t",this._objects[n].toClipPathSVG(e));return this._createBaseClipPathSVGMarkup(t,{reviver:e})}}),t.Group.fromObject=function(e,n){var i=e.objects,r=t.util.object.clone(e,!0);delete r.objects,"string"!==typeof i?t.util.enlivenObjects(i,(function(i){t.util.enlivenObjectEnlivables(e,r,(function(){n&&n(new t.Group(i,r,!0))}))})):t.loadSVGFromURL(i,(function(a){var o=t.util.groupSVGElements(a,e,i),s=r.clipPath;delete r.clipPath,o.set(r),s?t.util.enlivenObjects([s],(function(e){o.clipPath=e[0],n&&n(o)})):n&&n(o)}))})}(t),function(e){"use strict";var t=e.fabric||(e.fabric={});t.ActiveSelection||(t.ActiveSelection=t.util.createClass(t.Group,{type:"activeSelection",initialize:function(e,n){n=n||{},this._objects=e||[];for(var i=this._objects.length;i--;)this._objects[i].group=this;n.originX&&(this.originX=n.originX),n.originY&&(this.originY=n.originY),this._calcBounds(),this._updateObjectsCoords(),t.Object.prototype.initialize.call(this,n),this.setCoords()},toGroup:function(){var e=this._objects.concat();this._objects=[];var n=t.Object.prototype.toObject.call(this),i=new t.Group([]);if(delete n.type,i.set(n),e.forEach((function(e){e.canvas.remove(e),e.group=i})),i._objects=e,!this.canvas)return i;var r=this.canvas;return r.add(i),r._activeObject=i,i.setCoords(),i},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(e,t,n){e.save(),e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",e,t),"undefined"===typeof(n=n||{}).hasControls&&(n.hasControls=!1),n.forActiveSelection=!0;for(var i=0,r=this._objects.length;i<r;i++)this._objects[i]._renderControls(e,n);e.restore()}}),t.ActiveSelection.fromObject=function(e,n){t.util.enlivenObjects(e.objects,(function(i){delete e.objects,n&&n(new t.ActiveSelection(i,e,!0))}))})}(t),function(e){"use strict";var t=r.util.object.extend;e.fabric||(e.fabric={}),e.fabric.Image?r.warn("fabric.Image is already defined."):(r.Image=r.util.createClass(r.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:r.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:r.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(e,t){t||(t={}),this.filters=[],this.cacheKey="texture"+r.Object.__uid++,this.callSuper("initialize",t),this._initElement(e,t)},getElement:function(){return this._element||{}},setElement:function(e,t){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=e,this._originalElement=e,this._initConfig(t),0!==this.filters.length&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(e){var t=r.filterBackend;t&&t.evictCachesForKey&&t.evictCachesForKey(e)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(function(e){r.util.cleanUpJsdomNode(this[e]),this[e]=void 0}.bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var e=this.getElement();return{width:e.naturalWidth||e.width,height:e.naturalHeight||e.height}},_stroke:function(e){if(this.stroke&&0!==this.strokeWidth){var t=this.width/2,n=this.height/2;e.beginPath(),e.moveTo(-t,-n),e.lineTo(t,-n),e.lineTo(t,n),e.lineTo(-t,n),e.lineTo(-t,-n),e.closePath()}},toObject:function(e){var n=[];this.filters.forEach((function(e){e&&n.push(e.toObject())}));var i=t(this.callSuper("toObject",["cropX","cropY"].concat(e)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:n});return this.resizeFilter&&(i.resizeFilter=this.resizeFilter.toObject()),i},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var e,t=[],n=[],i=this._element,a=-this.width/2,o=-this.height/2,s="",l="";if(!i)return[];if(this.hasCrop()){var c=r.Object.__uid++;t.push('<clipPath id="imageCrop_'+c+'">\n','\t<rect x="'+a+'" y="'+o+'" width="'+this.width+'" height="'+this.height+'" />\n',"</clipPath>\n"),s=' clip-path="url(#imageCrop_'+c+')" '}if(this.imageSmoothing||(l='" image-rendering="optimizeSpeed'),n.push("\t<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',a-this.cropX,'" y="',o-this.cropY,'" width="',i.width||i.naturalWidth,'" height="',i.height||i.height,l,'"',s,"></image>\n"),this.stroke||this.strokeDashArray){var u=this.fill;this.fill=null,e=["\t<rect ",'x="',a,'" y="',o,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'"/>\n'],this.fill=u}return t="fill"!==this.paintFirst?t.concat(e,n):t.concat(n,e)},getSrc:function(e){var t=e?this._element:this._originalElement;return t?t.toDataURL?t.toDataURL():this.srcFromAttribute?t.getAttribute("src"):t.src:this.src||""},setSrc:function(e,t,n){return r.util.loadImage(e,(function(e,i){this.setElement(e,n),this._setWidthHeight(),t&&t(this,i)}),this,n&&n.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var e=this.resizeFilter,t=this.minimumScaleTrigger,n=this.getTotalObjectScaling(),i=n.scaleX,a=n.scaleY,o=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!e||i>t&&a>t)return this._element=o,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=i,void(this._lastScaleY=a);r.filterBackend||(r.filterBackend=r.initFilterBackend());var s=r.util.createCanvasElement(),l=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,c=o.width,u=o.height;s.width=c,s.height=u,this._element=s,this._lastScaleX=e.scaleX=i,this._lastScaleY=e.scaleY=a,r.filterBackend.applyFilters([e],o,c,u,this._element,l),this._filterScalingX=s.width/this._originalElement.width,this._filterScalingY=s.height/this._originalElement.height},applyFilters:function(e){if(e=(e=e||this.filters||[]).filter((function(e){return e&&!e.isNeutralState()})),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),0===e.length)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var t=this._originalElement,n=t.naturalWidth||t.width,i=t.naturalHeight||t.height;if(this._element===this._originalElement){var a=r.util.createCanvasElement();a.width=n,a.height=i,this._element=a,this._filteredEl=a}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,n,i),this._lastScaleX=1,this._lastScaleY=1;return r.filterBackend||(r.filterBackend=r.initFilterBackend()),r.filterBackend.applyFilters(e,this._originalElement,n,i,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(e){r.util.setImageSmoothing(e,this.imageSmoothing),!0!==this.isMoving&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(e),this._renderPaintInOrder(e)},drawCacheOnCanvas:function(e){r.util.setImageSmoothing(e,this.imageSmoothing),r.Object.prototype.drawCacheOnCanvas.call(this,e)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(e){var t=this._element;if(t){var n=this._filterScalingX,i=this._filterScalingY,r=this.width,a=this.height,o=Math.min,s=Math.max,l=s(this.cropX,0),c=s(this.cropY,0),u=t.naturalWidth||t.width,g=t.naturalHeight||t.height,d=l*n,h=c*i,f=o(r*n,u-d),p=o(a*i,g-h),I=-r/2,C=-a/2,m=o(r,u/n-l),v=o(a,g/i-c);t&&e.drawImage(t,d,h,f,p,I,C,m,v)}},_needsResize:function(){var e=this.getTotalObjectScaling();return e.scaleX!==this._lastScaleX||e.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(e,t){this.setElement(r.util.getById(e),t),r.util.addClass(this.getElement(),r.Image.CSS_CANVAS)},_initConfig:function(e){e||(e={}),this.setOptions(e),this._setWidthHeight(e)},_initFilters:function(e,t){e&&e.length?r.util.enlivenObjects(e,(function(e){t&&t(e)}),"fabric.Image.filters"):t&&t()},_setWidthHeight:function(e){e||(e={});var t=this.getElement();this.width=e.width||t.naturalWidth||t.width||0,this.height=e.height||t.naturalHeight||t.height||0},parsePreserveAspectRatioAttribute:function(){var e,t=r.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),n=this._element.width,i=this._element.height,a=1,o=1,s=0,l=0,c=0,u=0,g=this.width,d=this.height,h={width:g,height:d};return!t||"none"===t.alignX&&"none"===t.alignY?(a=g/n,o=d/i):("meet"===t.meetOrSlice&&(e=(g-n*(a=o=r.util.findScaleToFit(this._element,h)))/2,"Min"===t.alignX&&(s=-e),"Max"===t.alignX&&(s=e),e=(d-i*o)/2,"Min"===t.alignY&&(l=-e),"Max"===t.alignY&&(l=e)),"slice"===t.meetOrSlice&&(e=n-g/(a=o=r.util.findScaleToCover(this._element,h)),"Mid"===t.alignX&&(c=e/2),"Max"===t.alignX&&(c=e),e=i-d/o,"Mid"===t.alignY&&(u=e/2),"Max"===t.alignY&&(u=e),n=g/a,i=d/o)),{width:n,height:i,scaleX:a,scaleY:o,offsetLeft:s,offsetTop:l,cropX:c,cropY:u}}}),r.Image.CSS_CANVAS="canvas-img",r.Image.prototype.getSvgSrc=r.Image.prototype.getSrc,r.Image.fromObject=function(e,t){var n=r.util.object.clone(e);r.util.loadImage(n.src,(function(e,i){i?t&&t(null,!0):r.Image.prototype._initFilters.call(n,n.filters,(function(i){n.filters=i||[],r.Image.prototype._initFilters.call(n,[n.resizeFilter],(function(i){n.resizeFilter=i[0],r.util.enlivenObjectEnlivables(n,n,(function(){var i=new r.Image(e,n);t(i,!1)}))}))}))}),null,n.crossOrigin)},r.Image.fromURL=function(e,t,n){r.util.loadImage(e,(function(e,i){t&&t(new r.Image(e,n),i)}),null,n&&n.crossOrigin)},r.Image.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),r.Image.fromElement=function(e,n,i){var a=r.parseAttributes(e,r.Image.ATTRIBUTE_NAMES);r.Image.fromURL(a["xlink:href"],n,t(i?r.util.object.clone(i):{},a))})}(t),r.util.object.extend(r.Object.prototype,{_getAngleValueForStraighten:function(){var e=this.angle%360;return e>0?90*Math.round((e-1)/90):90*Math.round(e/90)},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(e){var t=function(){},n=(e=e||{}).onComplete||t,i=e.onChange||t,a=this;return r.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(e){a.rotate(e),i()},onComplete:function(){a.setCoords(),n()}})}}),r.util.object.extend(r.StaticCanvas.prototype,{straightenObject:function(e){return e.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(e){return e.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){"use strict";function e(e,t){var n="precision "+t+" float;\nvoid main(){}",i=e.createShader(e.FRAGMENT_SHADER);return e.shaderSource(i,n),e.compileShader(i),!!e.getShaderParameter(i,e.COMPILE_STATUS)}function t(e){e&&e.tileSize&&(this.tileSize=e.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}r.isWebglSupported=function(t){if(r.isLikelyNode)return!1;t=t||r.WebglFilterBackend.prototype.tileSize;var n=document.createElement("canvas"),i=n.getContext("webgl")||n.getContext("experimental-webgl"),a=!1;if(i){r.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),a=r.maxTextureSize>=t;for(var o=["highp","mediump","lowp"],s=0;s<3;s++)if(e(i,o[s])){r.webGlPrecision=o[s];break}}return this.isSupported=a,a},r.WebglFilterBackend=t,t.prototype={tileSize:2048,resources:{},setupGLContext:function(e,t){this.dispose(),this.createWebGLCanvas(e,t),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(e,t)},chooseFastestCopyGLTo2DMethod:function(e,t){var n,i="undefined"!==typeof window.performance;try{new ImageData(1,1),n=!0}catch(f){n=!1}var a="undefined"!==typeof ArrayBuffer,l="undefined"!==typeof Uint8ClampedArray;if(i&&n&&a&&l){var c=r.util.createCanvasElement(),u=new ArrayBuffer(e*t*4);if(r.forceGLPutImageData)return this.imageBuffer=u,void(this.copyGLTo2D=s);var g,d,h={imageBuffer:u,destinationWidth:e,destinationHeight:t,targetCanvas:c};c.width=e,c.height=t,g=window.performance.now(),o.call(h,this.gl,h),d=window.performance.now()-g,g=window.performance.now(),s.call(h,this.gl,h),d>window.performance.now()-g?(this.imageBuffer=u,this.copyGLTo2D=s):this.copyGLTo2D=o}},createWebGLCanvas:function(e,t){var n=r.util.createCanvasElement();n.width=e,n.height=t;var i={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},a=n.getContext("webgl",i);a||(a=n.getContext("experimental-webgl",i)),a&&(a.clearColor(0,0,0,0),this.canvas=n,this.gl=a)},applyFilters:function(e,t,n,i,r,a){var o,s=this.gl;a&&(o=this.getCachedTexture(a,t));var l={originalWidth:t.width||t.originalWidth,originalHeight:t.height||t.originalHeight,sourceWidth:n,sourceHeight:i,destinationWidth:n,destinationHeight:i,context:s,sourceTexture:this.createTexture(s,n,i,!o&&t),targetTexture:this.createTexture(s,n,i),originalTexture:o||this.createTexture(s,n,i,!o&&t),passes:e.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:r},c=s.createFramebuffer();return s.bindFramebuffer(s.FRAMEBUFFER,c),e.forEach((function(e){e&&e.applyTo(l)})),function(e){var t=e.targetCanvas,n=t.width,i=t.height,r=e.destinationWidth,a=e.destinationHeight;n===r&&i===a||(t.width=r,t.height=a)}(l),this.copyGLTo2D(s,l),s.bindTexture(s.TEXTURE_2D,null),s.deleteTexture(l.sourceTexture),s.deleteTexture(l.targetTexture),s.deleteFramebuffer(c),r.getContext("2d").setTransform(1,0,0,1,0,0),l},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(e,t,n,i,r){var a=e.createTexture();return e.bindTexture(e.TEXTURE_2D,a),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,r||e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,r||e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),i?e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,i):e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,n,0,e.RGBA,e.UNSIGNED_BYTE,null),a},getCachedTexture:function(e,t){if(this.textureCache[e])return this.textureCache[e];var n=this.createTexture(this.gl,t.width,t.height,t);return this.textureCache[e]=n,n},evictCachesForKey:function(e){this.textureCache[e]&&(this.gl.deleteTexture(this.textureCache[e]),delete this.textureCache[e])},copyGLTo2D:o,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var e=this.gl,t={renderer:"",vendor:""};if(!e)return t;var n=e.getExtension("WEBGL_debug_renderer_info");if(n){var i=e.getParameter(n.UNMASKED_RENDERER_WEBGL),r=e.getParameter(n.UNMASKED_VENDOR_WEBGL);i&&(t.renderer=i.toLowerCase()),r&&(t.vendor=r.toLowerCase())}return this.gpuInfo=t,t}}}(),function(){"use strict";var e=function(){};function t(){}r.Canvas2dFilterBackend=t,t.prototype={evictCachesForKey:e,dispose:e,clearWebGLCaches:e,resources:{},applyFilters:function(e,t,n,i,r){var a=r.getContext("2d");a.drawImage(t,0,0,n,i);var o={sourceWidth:n,sourceHeight:i,imageData:a.getImageData(0,0,n,i),originalEl:t,originalImageData:a.getImageData(0,0,n,i),canvasEl:r,ctx:a,filterBackend:this};return e.forEach((function(e){e.applyTo(o)})),o.imageData.width===n&&o.imageData.height===i||(r.width=o.imageData.width,r.height=o.imageData.height),a.putImageData(o.imageData,0,0),o}}}(),r.Image=r.Image||{},r.Image.filters=r.Image.filters||{},r.Image.filters.BaseFilter=r.util.createClass({type:"BaseFilter",vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvoid main() {\nvTexCoord = aPosition;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:"precision highp float;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\n}",initialize:function(e){e&&this.setOptions(e)},setOptions:function(e){for(var t in e)this[t]=e[t]},createProgram:function(e,t,n){t=t||this.fragmentSource,n=n||this.vertexSource,"highp"!==r.webGlPrecision&&(t=t.replace(/precision highp float/g,"precision "+r.webGlPrecision+" float"));var i=e.createShader(e.VERTEX_SHADER);if(e.shaderSource(i,n),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+e.getShaderInfoLog(i));var a=e.createShader(e.FRAGMENT_SHADER);if(e.shaderSource(a,t),e.compileShader(a),!e.getShaderParameter(a,e.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+e.getShaderInfoLog(a));var o=e.createProgram();if(e.attachShader(o,i),e.attachShader(o,a),e.linkProgram(o),!e.getProgramParameter(o,e.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+e.getProgramInfoLog(o));var s=this.getAttributeLocations(e,o),l=this.getUniformLocations(e,o)||{};return l.uStepW=e.getUniformLocation(o,"uStepW"),l.uStepH=e.getUniformLocation(o,"uStepH"),{program:o,attributeLocations:s,uniformLocations:l}},getAttributeLocations:function(e,t){return{aPosition:e.getAttribLocation(t,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(e,t,n){var i=t.aPosition,r=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,r),e.enableVertexAttribArray(i),e.vertexAttribPointer(i,2,e.FLOAT,!1,0,0),e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW)},_setupFrameBuffer:function(e){var t,n,i=e.context;e.passes>1?(t=e.destinationWidth,n=e.destinationHeight,e.sourceWidth===t&&e.sourceHeight===n||(i.deleteTexture(e.targetTexture),e.targetTexture=e.filterBackend.createTexture(i,t,n)),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,e.targetTexture,0)):(i.bindFramebuffer(i.FRAMEBUFFER,null),i.finish())},_swapTextures:function(e){e.passes--,e.pass++;var t=e.targetTexture;e.targetTexture=e.sourceTexture,e.sourceTexture=t},isNeutralState:function(){var e=this.mainParameter,t=r.Image.filters[this.type].prototype;if(e){if(Array.isArray(t[e])){for(var n=t[e].length;n--;)if(this[e][n]!==t[e][n])return!1;return!0}return t[e]===this[e]}return!1},applyTo:function(e){e.webgl?(this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)},retrieveShader:function(e){return e.programCache.hasOwnProperty(this.type)||(e.programCache[this.type]=this.createProgram(e.context)),e.programCache[this.type]},applyToWebGL:function(e){var t=e.context,n=this.retrieveShader(e);0===e.pass&&e.originalTexture?t.bindTexture(t.TEXTURE_2D,e.originalTexture):t.bindTexture(t.TEXTURE_2D,e.sourceTexture),t.useProgram(n.program),this.sendAttributeData(t,n.attributeLocations,e.aPosition),t.uniform1f(n.uniformLocations.uStepW,1/e.sourceWidth),t.uniform1f(n.uniformLocations.uStepH,1/e.sourceHeight),this.sendUniformData(t,n.uniformLocations),t.viewport(0,0,e.destinationWidth,e.destinationHeight),t.drawArrays(t.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(e,t,n){e.activeTexture(n),e.bindTexture(e.TEXTURE_2D,t),e.activeTexture(e.TEXTURE0)},unbindAdditionalTexture:function(e,t){e.activeTexture(t),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(e){this[this.mainParameter]=e},sendUniformData:function(){},createHelpLayer:function(e){if(!e.helpLayer){var t=document.createElement("canvas");t.width=e.sourceWidth,t.height=e.sourceHeight,e.helpLayer=t}},toObject:function(){var e={type:this.type},t=this.mainParameter;return t&&(e[t]=this[t]),e},toJSON:function(){return this.toObject()}}),r.Image.filters.BaseFilter.fromObject=function(e,t){var n=new r.Image.filters[e.type](e);return t&&t(n),n},function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.Image.filters,i=t.util.createClass;n.ColorMatrix=i(n.BaseFilter,{type:"ColorMatrix",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nuniform mat4 uColorMatrix;\nuniform vec4 uConstants;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor *= uColorMatrix;\ncolor += uConstants;\ngl_FragColor = color;\n}",matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(e){this.callSuper("initialize",e),this.matrix=this.matrix.slice(0)},applyTo2d:function(e){var t,n,i,r,a,o=e.imageData.data,s=o.length,l=this.matrix,c=this.colorsOnly;for(a=0;a<s;a+=4)t=o[a],n=o[a+1],i=o[a+2],c?(o[a]=t*l[0]+n*l[1]+i*l[2]+255*l[4],o[a+1]=t*l[5]+n*l[6]+i*l[7]+255*l[9],o[a+2]=t*l[10]+n*l[11]+i*l[12]+255*l[14]):(r=o[a+3],o[a]=t*l[0]+n*l[1]+i*l[2]+r*l[3]+255*l[4],o[a+1]=t*l[5]+n*l[6]+i*l[7]+r*l[8]+255*l[9],o[a+2]=t*l[10]+n*l[11]+i*l[12]+r*l[13]+255*l[14],o[a+3]=t*l[15]+n*l[16]+i*l[17]+r*l[18]+255*l[19])},getUniformLocations:function(e,t){return{uColorMatrix:e.getUniformLocation(t,"uColorMatrix"),uConstants:e.getUniformLocation(t,"uConstants")}},sendUniformData:function(e,t){var n=this.matrix,i=[n[0],n[1],n[2],n[3],n[5],n[6],n[7],n[8],n[10],n[11],n[12],n[13],n[15],n[16],n[17],n[18]],r=[n[4],n[9],n[14],n[19]];e.uniformMatrix4fv(t.uColorMatrix,!1,i),e.uniform4fv(t.uConstants,r)}}),t.Image.filters.ColorMatrix.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.Image.filters,i=t.util.createClass;n.Brightness=i(n.BaseFilter,{type:"Brightness",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBrightness;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += uBrightness;\ngl_FragColor = color;\n}",brightness:0,mainParameter:"brightness",applyTo2d:function(e){if(0!==this.brightness){var t,n=e.imageData.data,i=n.length,r=Math.round(255*this.brightness);for(t=0;t<i;t+=4)n[t]=n[t]+r,n[t+1]=n[t+1]+r,n[t+2]=n[t+2]+r}},getUniformLocations:function(e,t){return{uBrightness:e.getUniformLocation(t,"uBrightness")}},sendUniformData:function(e,t){e.uniform1f(t.uBrightness,this.brightness)}}),t.Image.filters.Brightness.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.util.object.extend,i=t.Image.filters,r=t.util.createClass;i.Convolute=r(i.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_3_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_5_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_5_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_7_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_7_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_9_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_9_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}"},retrieveShader:function(e){var t=Math.sqrt(this.matrix.length),n=this.type+"_"+t+"_"+(this.opaque?1:0),i=this.fragmentSource[n];return e.programCache.hasOwnProperty(n)||(e.programCache[n]=this.createProgram(e.context,i)),e.programCache[n]},applyTo2d:function(e){var t,n,i,r,a,o,s,l,c,u,g,d,h,f=e.imageData,p=f.data,I=this.matrix,C=Math.round(Math.sqrt(I.length)),m=Math.floor(C/2),v=f.width,A=f.height,b=e.ctx.createImageData(v,A),y=b.data,G=this.opaque?1:0;for(g=0;g<A;g++)for(u=0;u<v;u++){for(a=4*(g*v+u),t=0,n=0,i=0,r=0,h=0;h<C;h++)for(d=0;d<C;d++)o=u+d-m,(s=g+h-m)<0||s>=A||o<0||o>=v||(l=4*(s*v+o),c=I[h*C+d],t+=p[l]*c,n+=p[l+1]*c,i+=p[l+2]*c,G||(r+=p[l+3]*c));y[a]=t,y[a+1]=n,y[a+2]=i,y[a+3]=G?p[a+3]:r}e.imageData=b},getUniformLocations:function(e,t){return{uMatrix:e.getUniformLocation(t,"uMatrix"),uOpaque:e.getUniformLocation(t,"uOpaque"),uHalfSize:e.getUniformLocation(t,"uHalfSize"),uSize:e.getUniformLocation(t,"uSize")}},sendUniformData:function(e,t){e.uniform1fv(t.uMatrix,this.matrix)},toObject:function(){return n(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),t.Image.filters.Convolute.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.Image.filters,i=t.util.createClass;n.Grayscale=i(n.BaseFilter,{type:"Grayscale",fragmentSource:{average:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat average = (color.r + color.b + color.g) / 3.0;\ngl_FragColor = vec4(average, average, average, color.a);\n}",lightness:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;\ngl_FragColor = vec4(average, average, average, col.a);\n}",luminosity:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;\ngl_FragColor = vec4(average, average, average, col.a);\n}"},mode:"average",mainParameter:"mode",applyTo2d:function(e){var t,n,i=e.imageData.data,r=i.length,a=this.mode;for(t=0;t<r;t+=4)"average"===a?n=(i[t]+i[t+1]+i[t+2])/3:"lightness"===a?n=(Math.min(i[t],i[t+1],i[t+2])+Math.max(i[t],i[t+1],i[t+2]))/2:"luminosity"===a&&(n=.21*i[t]+.72*i[t+1]+.07*i[t+2]),i[t]=n,i[t+1]=n,i[t+2]=n},retrieveShader:function(e){var t=this.type+"_"+this.mode;if(!e.programCache.hasOwnProperty(t)){var n=this.fragmentSource[this.mode];e.programCache[t]=this.createProgram(e.context,n)}return e.programCache[t]},getUniformLocations:function(e,t){return{uMode:e.getUniformLocation(t,"uMode")}},sendUniformData:function(e,t){e.uniform1i(t.uMode,1)},isNeutralState:function(){return!1}}),t.Image.filters.Grayscale.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.Image.filters,i=t.util.createClass;n.Invert=i(n.BaseFilter,{type:"Invert",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uInvert;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nif (uInvert == 1) {\ngl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);\n} else {\ngl_FragColor = color;\n}\n}",invert:!0,mainParameter:"invert",applyTo2d:function(e){var t,n=e.imageData.data,i=n.length;for(t=0;t<i;t+=4)n[t]=255-n[t],n[t+1]=255-n[t+1],n[t+2]=255-n[t+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(e,t){return{uInvert:e.getUniformLocation(t,"uInvert")}},sendUniformData:function(e,t){e.uniform1i(t.uInvert,this.invert)}}),t.Image.filters.Invert.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.util.object.extend,i=t.Image.filters,r=t.util.createClass;i.Noise=r(i.BaseFilter,{type:"Noise",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uStepH;\nuniform float uNoise;\nuniform float uSeed;\nvarying vec2 vTexCoord;\nfloat rand(vec2 co, float seed, float vScale) {\nreturn fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);\n}\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;\ngl_FragColor = color;\n}",mainParameter:"noise",noise:0,applyTo2d:function(e){if(0!==this.noise){var t,n,i=e.imageData.data,r=i.length,a=this.noise;for(t=0,r=i.length;t<r;t+=4)n=(.5-Math.random())*a,i[t]+=n,i[t+1]+=n,i[t+2]+=n}},getUniformLocations:function(e,t){return{uNoise:e.getUniformLocation(t,"uNoise"),uSeed:e.getUniformLocation(t,"uSeed")}},sendUniformData:function(e,t){e.uniform1f(t.uNoise,this.noise/255),e.uniform1f(t.uSeed,Math.random())},toObject:function(){return n(this.callSuper("toObject"),{noise:this.noise})}}),t.Image.filters.Noise.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.Image.filters,i=t.util.createClass;n.Pixelate=i(n.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBlocksize;\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nfloat blockW = uBlocksize * uStepW;\nfloat blockH = uBlocksize * uStepW;\nint posX = int(vTexCoord.x / blockW);\nint posY = int(vTexCoord.y / blockH);\nfloat fposX = float(posX);\nfloat fposY = float(posY);\nvec2 squareCoords = vec2(fposX * blockW, fposY * blockH);\nvec4 color = texture2D(uTexture, squareCoords);\ngl_FragColor = color;\n}",applyTo2d:function(e){var t,n,i,r,a,o,s,l,c,u,g,d=e.imageData,h=d.data,f=d.height,p=d.width;for(n=0;n<f;n+=this.blocksize)for(i=0;i<p;i+=this.blocksize)for(r=h[t=4*n*p+4*i],a=h[t+1],o=h[t+2],s=h[t+3],u=Math.min(n+this.blocksize,f),g=Math.min(i+this.blocksize,p),l=n;l<u;l++)for(c=i;c<g;c++)h[t=4*l*p+4*c]=r,h[t+1]=a,h[t+2]=o,h[t+3]=s},isNeutralState:function(){return 1===this.blocksize},getUniformLocations:function(e,t){return{uBlocksize:e.getUniformLocation(t,"uBlocksize"),uStepW:e.getUniformLocation(t,"uStepW"),uStepH:e.getUniformLocation(t,"uStepH")}},sendUniformData:function(e,t){e.uniform1f(t.uBlocksize,this.blocksize)}}),t.Image.filters.Pixelate.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.util.object.extend,i=t.Image.filters,r=t.util.createClass;i.RemoveColor=r(i.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uLow;\nuniform vec4 uHigh;\nvarying vec2 vTexCoord;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\nif(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {\ngl_FragColor.a = 0.0;\n}\n}",distance:.02,useAlpha:!1,applyTo2d:function(e){var n,i,r,a,o=e.imageData.data,s=255*this.distance,l=new t.Color(this.color).getSource(),c=[l[0]-s,l[1]-s,l[2]-s],u=[l[0]+s,l[1]+s,l[2]+s];for(n=0;n<o.length;n+=4)i=o[n],r=o[n+1],a=o[n+2],i>c[0]&&r>c[1]&&a>c[2]&&i<u[0]&&r<u[1]&&a<u[2]&&(o[n+3]=0)},getUniformLocations:function(e,t){return{uLow:e.getUniformLocation(t,"uLow"),uHigh:e.getUniformLocation(t,"uHigh")}},sendUniformData:function(e,n){var i=new t.Color(this.color).getSource(),r=parseFloat(this.distance),a=[0+i[0]/255-r,0+i[1]/255-r,0+i[2]/255-r,1],o=[i[0]/255+r,i[1]/255+r,i[2]/255+r,1];e.uniform4fv(n.uLow,a),e.uniform4fv(n.uHigh,o)},toObject:function(){return n(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),t.Image.filters.RemoveColor.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.Image.filters,i=t.util.createClass,r={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var a in r)n[a]=i(n.ColorMatrix,{type:a,matrix:r[a],mainParameter:!1,colorsOnly:!0}),t.Image.filters[a].fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric,n=t.Image.filters,i=t.util.createClass;n.BlendColor=i(n.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:"gl_FragColor.rgb *= uColor.rgb;\n",screen:"gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);\n",add:"gl_FragColor.rgb += uColor.rgb;\n",diff:"gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);\n",subtract:"gl_FragColor.rgb -= uColor.rgb;\n",lighten:"gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);\n",darken:"gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);\n",exclusion:"gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);\n",overlay:"if (uColor.r < 0.5) {\ngl_FragColor.r *= 2.0 * uColor.r;\n} else {\ngl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);\n}\nif (uColor.g < 0.5) {\ngl_FragColor.g *= 2.0 * uColor.g;\n} else {\ngl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);\n}\nif (uColor.b < 0.5) {\ngl_FragColor.b *= 2.0 * uColor.b;\n} else {\ngl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);\n}\n",tint:"gl_FragColor.rgb *= (1.0 - uColor.a);\ngl_FragColor.rgb += uColor.rgb;\n"},buildSource:function(e){return"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ngl_FragColor = color;\nif (color.a > 0.0) {\n"+this.fragmentSource[e]+"}\n}"},retrieveShader:function(e){var t,n=this.type+"_"+this.mode;return e.programCache.hasOwnProperty(n)||(t=this.buildSource(this.mode),e.programCache[n]=this.createProgram(e.context,t)),e.programCache[n]},applyTo2d:function(e){var n,i,r,a,o,s,l,c=e.imageData.data,u=c.length,g=1-this.alpha;n=(l=new t.Color(this.color).getSource())[0]*this.alpha,i=l[1]*this.alpha,r=l[2]*this.alpha;for(var d=0;d<u;d+=4)switch(a=c[d],o=c[d+1],s=c[d+2],this.mode){case"multiply":c[d]=a*n/255,c[d+1]=o*i/255,c[d+2]=s*r/255;break;case"screen":c[d]=255-(255-a)*(255-n)/255,c[d+1]=255-(255-o)*(255-i)/255,c[d+2]=255-(255-s)*(255-r)/255;break;case"add":c[d]=a+n,c[d+1]=o+i,c[d+2]=s+r;break;case"diff":case"difference":c[d]=Math.abs(a-n),c[d+1]=Math.abs(o-i),c[d+2]=Math.abs(s-r);break;case"subtract":c[d]=a-n,c[d+1]=o-i,c[d+2]=s-r;break;case"darken":c[d]=Math.min(a,n),c[d+1]=Math.min(o,i),c[d+2]=Math.min(s,r);break;case"lighten":c[d]=Math.max(a,n),c[d+1]=Math.max(o,i),c[d+2]=Math.max(s,r);break;case"overlay":c[d]=n<128?2*a*n/255:255-2*(255-a)*(255-n)/255,c[d+1]=i<128?2*o*i/255:255-2*(255-o)*(255-i)/255,c[d+2]=r<128?2*s*r/255:255-2*(255-s)*(255-r)/255;break;case"exclusion":c[d]=n+a-2*n*a/255,c[d+1]=i+o-2*i*o/255,c[d+2]=r+s-2*r*s/255;break;case"tint":c[d]=n+a*g,c[d+1]=i+o*g,c[d+2]=r+s*g}},getUniformLocations:function(e,t){return{uColor:e.getUniformLocation(t,"uColor")}},sendUniformData:function(e,n){var i=new t.Color(this.color).getSource();i[0]=this.alpha*i[0]/255,i[1]=this.alpha*i[1]/255,i[2]=this.alpha*i[2]/255,i[3]=this.alpha,e.uniform4fv(n.uColor,i)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),t.Image.filters.BlendColor.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric,n=t.Image.filters,i=t.util.createClass;n.BlendImage=i(n.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nuniform mat3 uTransformMatrix;\nvoid main() {\nvTexCoord = aPosition;\nvTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:{multiply:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.rgba *= color2.rgba;\ngl_FragColor = color;\n}",mask:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.a = color2.a;\ngl_FragColor = color;\n}"},retrieveShader:function(e){var t=this.type+"_"+this.mode,n=this.fragmentSource[this.mode];return e.programCache.hasOwnProperty(t)||(e.programCache[t]=this.createProgram(e.context,n)),e.programCache[t]},applyToWebGL:function(e){var t=e.context,n=this.createTexture(e.filterBackend,this.image);this.bindAdditionalTexture(t,n,t.TEXTURE1),this.callSuper("applyToWebGL",e),this.unbindAdditionalTexture(t,t.TEXTURE1)},createTexture:function(e,t){return e.getCachedTexture(t.cacheKey,t._element)},calculateMatrix:function(){var e=this.image,t=e._element.width,n=e._element.height;return[1/e.scaleX,0,0,0,1/e.scaleY,0,-e.left/t,-e.top/n,1]},applyTo2d:function(e){var n,i,r,a,o,s,l,c,u,g,d,h=e.imageData,f=e.filterBackend.resources,p=h.data,I=p.length,C=h.width,m=h.height,v=this.image;f.blendImage||(f.blendImage=t.util.createCanvasElement()),g=(u=f.blendImage).getContext("2d"),u.width!==C||u.height!==m?(u.width=C,u.height=m):g.clearRect(0,0,C,m),g.setTransform(v.scaleX,0,0,v.scaleY,v.left,v.top),g.drawImage(v._element,0,0,C,m),d=g.getImageData(0,0,C,m).data;for(var A=0;A<I;A+=4)switch(o=p[A],s=p[A+1],l=p[A+2],c=p[A+3],n=d[A],i=d[A+1],r=d[A+2],a=d[A+3],this.mode){case"multiply":p[A]=o*n/255,p[A+1]=s*i/255,p[A+2]=l*r/255,p[A+3]=c*a/255;break;case"mask":p[A+3]=a}},getUniformLocations:function(e,t){return{uTransformMatrix:e.getUniformLocation(t,"uTransformMatrix"),uImage:e.getUniformLocation(t,"uImage")}},sendUniformData:function(e,t){var n=this.calculateMatrix();e.uniform1i(t.uImage,1),e.uniformMatrix3fv(t.uTransformMatrix,!1,n)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),t.Image.filters.BlendImage.fromObject=function(e,n){t.Image.fromObject(e.image,(function(i){var r=t.util.object.clone(e);r.image=i,n(new t.Image.filters.BlendImage(r))}))}}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=Math.pow,i=Math.floor,r=Math.sqrt,a=Math.abs,o=Math.round,s=Math.sin,l=Math.ceil,c=t.Image.filters,u=t.util.createClass;c.Resize=u(c.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(e,t){return{uDelta:e.getUniformLocation(t,"uDelta"),uTaps:e.getUniformLocation(t,"uTaps")}},sendUniformData:function(e,t){e.uniform2fv(t.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),e.uniform1fv(t.uTaps,this.taps)},retrieveShader:function(e){var t=this.getFilterWindow(),n=this.type+"_"+t;if(!e.programCache.hasOwnProperty(n)){var i=this.generateShader(t);e.programCache[n]=this.createProgram(e.context,i)}return e.programCache[n]},getFilterWindow:function(){var e=this.tempScale;return Math.ceil(this.lanczosLobes/e)},getTaps:function(){for(var e=this.lanczosCreate(this.lanczosLobes),t=this.tempScale,n=this.getFilterWindow(),i=new Array(n),r=1;r<=n;r++)i[r-1]=e(r*t);return i},generateShader:function(e){for(var t=new Array(e),n=this.fragmentSourceTOP,i=1;i<=e;i++)t[i-1]=i+".0 * uDelta";return n+="uniform float uTaps["+e+"];\n",n+="void main() {\n",n+="  vec4 color = texture2D(uTexture, vTexCoord);\n",n+="  float sum = 1.0;\n",t.forEach((function(e,t){n+="  color += texture2D(uTexture, vTexCoord + "+e+") * uTaps["+t+"];\n",n+="  color += texture2D(uTexture, vTexCoord - "+e+") * uTaps["+t+"];\n",n+="  sum += 2.0 * uTaps["+t+"];\n"})),n+="  gl_FragColor = color / sum;\n",n+="}"},fragmentSourceTOP:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\n",applyTo:function(e){e.webgl?(e.passes++,this.width=e.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=e.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),e.destinationWidth=this.dW,this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e),e.sourceWidth=e.destinationWidth,this.height=e.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),e.destinationHeight=this.dH,this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e),e.sourceHeight=e.destinationHeight):this.applyTo2d(e)},isNeutralState:function(){return 1===this.scaleX&&1===this.scaleY},lanczosCreate:function(e){return function(t){if(t>=e||t<=-e)return 0;if(t<1.1920929e-7&&t>-1.1920929e-7)return 1;var n=(t*=Math.PI)/e;return s(t)/t*s(n)/n}},applyTo2d:function(e){var t=e.imageData,n=this.scaleX,i=this.scaleY;this.rcpScaleX=1/n,this.rcpScaleY=1/i;var r,a=t.width,s=t.height,l=o(a*n),c=o(s*i);"sliceHack"===this.resizeType?r=this.sliceByTwo(e,a,s,l,c):"hermite"===this.resizeType?r=this.hermiteFastResize(e,a,s,l,c):"bilinear"===this.resizeType?r=this.bilinearFiltering(e,a,s,l,c):"lanczos"===this.resizeType&&(r=this.lanczosResize(e,a,s,l,c)),e.imageData=r},sliceByTwo:function(e,n,r,a,o){var s,l,c=e.imageData,u=.5,g=!1,d=!1,h=n*u,f=r*u,p=t.filterBackend.resources,I=0,C=0,m=n,v=0;for(p.sliceByTwo||(p.sliceByTwo=document.createElement("canvas")),((s=p.sliceByTwo).width<1.5*n||s.height<r)&&(s.width=1.5*n,s.height=r),(l=s.getContext("2d")).clearRect(0,0,1.5*n,r),l.putImageData(c,0,0),a=i(a),o=i(o);!g||!d;)n=h,r=f,a<i(h*u)?h=i(h*u):(h=a,g=!0),o<i(f*u)?f=i(f*u):(f=o,d=!0),l.drawImage(s,I,C,n,r,m,v,h,f),I=m,C=v,v+=f;return l.getImageData(I,C,a,o)},lanczosResize:function(e,t,o,s,c){var u=e.imageData.data,g=e.ctx.createImageData(s,c),d=g.data,h=this.lanczosCreate(this.lanczosLobes),f=this.rcpScaleX,p=this.rcpScaleY,I=2/this.rcpScaleX,C=2/this.rcpScaleY,m=l(f*this.lanczosLobes/2),v=l(p*this.lanczosLobes/2),A={},b={},y={};return function e(l){var G,w,B,x,S,Z,k,R,W,M,V;for(b.x=(l+.5)*f,y.x=i(b.x),G=0;G<c;G++){for(b.y=(G+.5)*p,y.y=i(b.y),S=0,Z=0,k=0,R=0,W=0,w=y.x-m;w<=y.x+m;w++)if(!(w<0||w>=t)){M=i(1e3*a(w-b.x)),A[M]||(A[M]={});for(var F=y.y-v;F<=y.y+v;F++)F<0||F>=o||(V=i(1e3*a(F-b.y)),A[M][V]||(A[M][V]=h(r(n(M*I,2)+n(V*C,2))/1e3)),(B=A[M][V])>0&&(S+=B,Z+=B*u[x=4*(F*t+w)],k+=B*u[x+1],R+=B*u[x+2],W+=B*u[x+3]))}d[x=4*(G*s+l)]=Z/S,d[x+1]=k/S,d[x+2]=R/S,d[x+3]=W/S}return++l<s?e(l):g}(0)},bilinearFiltering:function(e,t,n,r,a){var o,s,l,c,u,g,d,h,f,p=0,I=this.rcpScaleX,C=this.rcpScaleY,m=4*(t-1),v=e.imageData.data,A=e.ctx.createImageData(r,a),b=A.data;for(l=0;l<a;l++)for(c=0;c<r;c++)for(u=I*c-(o=i(I*c)),g=C*l-(s=i(C*l)),f=4*(s*t+o),d=0;d<4;d++)h=v[f+d]*(1-u)*(1-g)+v[f+4+d]*u*(1-g)+v[f+m+d]*g*(1-u)+v[f+m+4+d]*u*g,b[p++]=h;return A},hermiteFastResize:function(e,t,n,o,s){for(var c=this.rcpScaleX,u=this.rcpScaleY,g=l(c/2),d=l(u/2),h=e.imageData.data,f=e.ctx.createImageData(o,s),p=f.data,I=0;I<s;I++)for(var C=0;C<o;C++){for(var m=4*(C+I*o),v=0,A=0,b=0,y=0,G=0,w=0,B=0,x=(I+.5)*u,S=i(I*u);S<(I+1)*u;S++)for(var Z=a(x-(S+.5))/d,k=(C+.5)*c,R=Z*Z,W=i(C*c);W<(C+1)*c;W++){var M=a(k-(W+.5))/g,V=r(R+M*M);V>1&&V<-1||(v=2*V*V*V-3*V*V+1)>0&&(B+=v*h[(M=4*(W+S*t))+3],b+=v,h[M+3]<255&&(v=v*h[M+3]/250),y+=v*h[M],G+=v*h[M+1],w+=v*h[M+2],A+=v)}p[m]=y/A,p[m+1]=G/A,p[m+2]=w/A,p[m+3]=B/b}return f},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),t.Image.filters.Resize.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.Image.filters,i=t.util.createClass;n.Contrast=i(n.BaseFilter,{type:"Contrast",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uContrast;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));\ncolor.rgb = contrastF * (color.rgb - 0.5) + 0.5;\ngl_FragColor = color;\n}",contrast:0,mainParameter:"contrast",applyTo2d:function(e){if(0!==this.contrast){var t,n=e.imageData.data,i=n.length,r=Math.floor(255*this.contrast),a=259*(r+255)/(255*(259-r));for(t=0;t<i;t+=4)n[t]=a*(n[t]-128)+128,n[t+1]=a*(n[t+1]-128)+128,n[t+2]=a*(n[t+2]-128)+128}},getUniformLocations:function(e,t){return{uContrast:e.getUniformLocation(t,"uContrast")}},sendUniformData:function(e,t){e.uniform1f(t.uContrast,this.contrast)}}),t.Image.filters.Contrast.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.Image.filters,i=t.util.createClass;n.Saturation=i(n.BaseFilter,{type:"Saturation",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uSaturation;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat rgMax = max(color.r, color.g);\nfloat rgbMax = max(rgMax, color.b);\ncolor.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;\ncolor.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;\ncolor.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;\ngl_FragColor = color;\n}",saturation:0,mainParameter:"saturation",applyTo2d:function(e){if(0!==this.saturation){var t,n,i=e.imageData.data,r=i.length,a=-this.saturation;for(t=0;t<r;t+=4)n=Math.max(i[t],i[t+1],i[t+2]),i[t]+=n!==i[t]?(n-i[t])*a:0,i[t+1]+=n!==i[t+1]?(n-i[t+1])*a:0,i[t+2]+=n!==i[t+2]?(n-i[t+2])*a:0}},getUniformLocations:function(e,t){return{uSaturation:e.getUniformLocation(t,"uSaturation")}},sendUniformData:function(e,t){e.uniform1f(t.uSaturation,-this.saturation)}}),t.Image.filters.Saturation.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.Image.filters,i=t.util.createClass;n.Vibrance=i(n.BaseFilter,{type:"Vibrance",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uVibrance;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat max = max(color.r, max(color.g, color.b));\nfloat avg = (color.r + color.g + color.b) / 3.0;\nfloat amt = (abs(max - avg) * 2.0) * uVibrance;\ncolor.r += max != color.r ? (max - color.r) * amt : 0.00;\ncolor.g += max != color.g ? (max - color.g) * amt : 0.00;\ncolor.b += max != color.b ? (max - color.b) * amt : 0.00;\ngl_FragColor = color;\n}",vibrance:0,mainParameter:"vibrance",applyTo2d:function(e){if(0!==this.vibrance){var t,n,i,r,a=e.imageData.data,o=a.length,s=-this.vibrance;for(t=0;t<o;t+=4)n=Math.max(a[t],a[t+1],a[t+2]),i=(a[t]+a[t+1]+a[t+2])/3,r=2*Math.abs(n-i)/255*s,a[t]+=n!==a[t]?(n-a[t])*r:0,a[t+1]+=n!==a[t+1]?(n-a[t+1])*r:0,a[t+2]+=n!==a[t+2]?(n-a[t+2])*r:0}},getUniformLocations:function(e,t){return{uVibrance:e.getUniformLocation(t,"uVibrance")}},sendUniformData:function(e,t){e.uniform1f(t.uVibrance,-this.vibrance)}}),t.Image.filters.Vibrance.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.Image.filters,i=t.util.createClass;n.Blur=i(n.BaseFilter,{type:"Blur",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\nconst float nSamples = 15.0;\nvec3 v3offset = vec3(12.9898, 78.233, 151.7182);\nfloat random(vec3 scale) {\nreturn fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);\n}\nvoid main() {\nvec4 color = vec4(0.0);\nfloat total = 0.0;\nfloat offset = random(v3offset);\nfor (float t = -nSamples; t <= nSamples; t++) {\nfloat percent = (t + offset - 0.5) / nSamples;\nfloat weight = 1.0 - abs(percent);\ncolor += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;\ntotal += weight;\n}\ngl_FragColor = color / total;\n}",blur:0,mainParameter:"blur",applyTo:function(e){e.webgl?(this.aspectRatio=e.sourceWidth/e.sourceHeight,e.passes++,this._setupFrameBuffer(e),this.horizontal=!0,this.applyToWebGL(e),this._swapTextures(e),this._setupFrameBuffer(e),this.horizontal=!1,this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)},applyTo2d:function(e){e.imageData=this.simpleBlur(e)},simpleBlur:function(e){var n,i,r=e.filterBackend.resources,a=e.imageData.width,o=e.imageData.height;r.blurLayer1||(r.blurLayer1=t.util.createCanvasElement(),r.blurLayer2=t.util.createCanvasElement()),n=r.blurLayer1,i=r.blurLayer2,n.width===a&&n.height===o||(i.width=n.width=a,i.height=n.height=o);var s,l,c,u,g=n.getContext("2d"),d=i.getContext("2d"),h=15,f=.06*this.blur*.5;for(g.putImageData(e.imageData,0,0),d.clearRect(0,0,a,o),u=-15;u<=h;u++)c=f*(l=u/h)*a+(s=(Math.random()-.5)/4),d.globalAlpha=1-Math.abs(l),d.drawImage(n,c,s),g.drawImage(i,0,0),d.globalAlpha=1,d.clearRect(0,0,i.width,i.height);for(u=-15;u<=h;u++)c=f*(l=u/h)*o+(s=(Math.random()-.5)/4),d.globalAlpha=1-Math.abs(l),d.drawImage(n,s,c),g.drawImage(i,0,0),d.globalAlpha=1,d.clearRect(0,0,i.width,i.height);e.ctx.drawImage(n,0,0);var p=e.ctx.getImageData(0,0,n.width,n.height);return g.globalAlpha=1,g.clearRect(0,0,n.width,n.height),p},getUniformLocations:function(e,t){return{delta:e.getUniformLocation(t,"uDelta")}},sendUniformData:function(e,t){var n=this.chooseRightDelta();e.uniform2fv(t.delta,n)},chooseRightDelta:function(){var e,t=1,n=[0,0];return this.horizontal?this.aspectRatio>1&&(t=1/this.aspectRatio):this.aspectRatio<1&&(t=this.aspectRatio),e=t*this.blur*.12,this.horizontal?n[0]=e:n[1]=e,n}}),n.Blur.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.Image.filters,i=t.util.createClass;n.Gamma=i(n.BaseFilter,{type:"Gamma",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec3 uGamma;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec3 correction = (1.0 / uGamma);\ncolor.r = pow(color.r, correction.r);\ncolor.g = pow(color.g, correction.g);\ncolor.b = pow(color.b, correction.b);\ngl_FragColor = color;\ngl_FragColor.rgb *= color.a;\n}",gamma:[1,1,1],mainParameter:"gamma",initialize:function(e){this.gamma=[1,1,1],n.BaseFilter.prototype.initialize.call(this,e)},applyTo2d:function(e){var t,n=e.imageData.data,i=this.gamma,r=n.length,a=1/i[0],o=1/i[1],s=1/i[2];for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),t=0,r=256;t<r;t++)this.rVals[t]=255*Math.pow(t/255,a),this.gVals[t]=255*Math.pow(t/255,o),this.bVals[t]=255*Math.pow(t/255,s);for(t=0,r=n.length;t<r;t+=4)n[t]=this.rVals[n[t]],n[t+1]=this.gVals[n[t+1]],n[t+2]=this.bVals[n[t+2]]},getUniformLocations:function(e,t){return{uGamma:e.getUniformLocation(t,"uGamma")}},sendUniformData:function(e,t){e.uniform3fv(t.uGamma,this.gamma)}}),t.Image.filters.Gamma.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.Image.filters,i=t.util.createClass;n.Composed=i(n.BaseFilter,{type:"Composed",subFilters:[],initialize:function(e){this.callSuper("initialize",e),this.subFilters=this.subFilters.slice(0)},applyTo:function(e){e.passes+=this.subFilters.length-1,this.subFilters.forEach((function(t){t.applyTo(e)}))},toObject:function(){return t.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map((function(e){return e.toObject()}))})},isNeutralState:function(){return!this.subFilters.some((function(e){return!e.isNeutralState()}))}}),t.Image.filters.Composed.fromObject=function(e,n){var i=(e.subFilters||[]).map((function(e){return new t.Image.filters[e.type](e)})),r=new t.Image.filters.Composed({subFilters:i});return n&&n(r),r}}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.Image.filters,i=t.util.createClass;n.HueRotation=i(n.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var e=this.rotation*Math.PI,n=t.util.cos(e),i=t.util.sin(e),r=1/3,a=Math.sqrt(r)*i,o=1-n;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=n+o/3,this.matrix[1]=r*o-a,this.matrix[2]=r*o+a,this.matrix[5]=r*o+a,this.matrix[6]=n+r*o,this.matrix[7]=r*o-a,this.matrix[10]=r*o-a,this.matrix[11]=r*o+a,this.matrix[12]=n+r*o},isNeutralState:function(e){return this.calculateMatrix(),n.BaseFilter.prototype.isNeutralState.call(this,e)},applyTo:function(e){this.calculateMatrix(),n.BaseFilter.prototype.applyTo.call(this,e)}}),t.Image.filters.HueRotation.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),n=t.util.object.clone;if(t.Text)t.warn("fabric.Text is already defined");else{var i="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");t.Text=t.util.createClass(t.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:t.Object.prototype.stateProperties.concat(i),cacheProperties:t.Object.prototype.cacheProperties.concat(i),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(e,t){this.styles=t&&t.styles||{},this.text=e,this.__skipDimension=!0,this.callSuper("initialize",t),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var e=this.path;e&&(e.segmentsInfo=t.util.getPathSegmentsInfo(e.path))},getMeasuringContext:function(){return t._measuringContext||(t._measuringContext=this.canvas&&this.canvas.contextCache||t.util.createCanvasElement().getContext("2d")),t._measuringContext},_splitText:function(){var e=this._splitTextIntoLines(this.text);return this.textLines=e.lines,this._textLines=e.graphemeLines,this._unwrappedTextLines=e._unwrappedLines,this._text=e.graphemeText,e},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var e,t,n,i,r,a,o,s=0,l=this._textLines.length;s<l;s++)if(("justify"===this.textAlign||s!==l-1&&!this.isEndOfWrapping(s))&&(i=0,r=this._textLines[s],(t=this.getLineWidth(s))<this.width&&(o=this.textLines[s].match(this._reSpacesAndTabs)))){n=o.length,e=(this.width-t)/n;for(var c=0,u=r.length;c<=u;c++)a=this.__charBounds[s][c],this._reSpaceAndTab.test(r[c])?(a.width+=e,a.kernedWidth+=e,a.left+=i,i+=e):a.left+=i}},isEndOfWrapping:function(e){return e===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var e=this.callSuper("_getCacheCanvasDimensions"),t=this.fontSize;return e.width+=t*e.zoomX,e.height+=t*e.zoomY,e},_render:function(e){var t=this.path;t&&!t.isNotVisible()&&t._render(e),this._setTextStyles(e),this._renderTextLinesBackground(e),this._renderTextDecoration(e,"underline"),this._renderText(e),this._renderTextDecoration(e,"overline"),this._renderTextDecoration(e,"linethrough")},_renderText:function(e){"stroke"===this.paintFirst?(this._renderTextStroke(e),this._renderTextFill(e)):(this._renderTextFill(e),this._renderTextStroke(e))},_setTextStyles:function(e,t,n){if(e.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":e.textBaseline="middle";break;case"ascender":e.textBaseline="top";break;case"descender":e.textBaseline="bottom"}e.font=this._getFontDeclaration(t,n)},calcTextWidth:function(){for(var e=this.getLineWidth(0),t=1,n=this._textLines.length;t<n;t++){var i=this.getLineWidth(t);i>e&&(e=i)}return e},_renderTextLine:function(e,t,n,i,r,a){this._renderChars(e,t,n,i,r,a)},_renderTextLinesBackground:function(e){if(this.textBackgroundColor||this.styleHas("textBackgroundColor")){for(var t,n,i,r,a,o,s,l=e.fillStyle,c=this._getLeftOffset(),u=this._getTopOffset(),g=0,d=0,h=this.path,f=0,p=this._textLines.length;f<p;f++)if(t=this.getHeightOfLine(f),this.textBackgroundColor||this.styleHas("textBackgroundColor",f)){i=this._textLines[f],n=this._getLineLeftOffset(f),d=0,g=0,r=this.getValueOfPropertyAt(f,0,"textBackgroundColor");for(var I=0,C=i.length;I<C;I++)a=this.__charBounds[f][I],o=this.getValueOfPropertyAt(f,I,"textBackgroundColor"),h?(e.save(),e.translate(a.renderLeft,a.renderTop),e.rotate(a.angle),e.fillStyle=o,o&&e.fillRect(-a.width/2,-t/this.lineHeight*(1-this._fontSizeFraction),a.width,t/this.lineHeight),e.restore()):o!==r?(s=c+n+g,"rtl"===this.direction&&(s=this.width-s-d),e.fillStyle=r,r&&e.fillRect(s,u,d,t/this.lineHeight),g=a.left,d=a.width,r=o):d+=a.kernedWidth;o&&!h&&(s=c+n+g,"rtl"===this.direction&&(s=this.width-s-d),e.fillStyle=o,e.fillRect(s,u,d,t/this.lineHeight)),u+=t}else u+=t;e.fillStyle=l,this._removeShadow(e)}},getFontCache:function(e){var n=e.fontFamily.toLowerCase();t.charWidthsCache[n]||(t.charWidthsCache[n]={});var i=t.charWidthsCache[n],r=e.fontStyle.toLowerCase()+"_"+(e.fontWeight+"").toLowerCase();return i[r]||(i[r]={}),i[r]},_measureChar:function(e,t,n,i){var r,a,o,s,l=this.getFontCache(t),c=n+e,u=this._getFontDeclaration(t)===this._getFontDeclaration(i),g=t.fontSize/this.CACHE_FONT_SIZE;if(n&&void 0!==l[n]&&(o=l[n]),void 0!==l[e]&&(s=r=l[e]),u&&void 0!==l[c]&&(s=(a=l[c])-o),void 0===r||void 0===o||void 0===a){var d=this.getMeasuringContext();this._setTextStyles(d,t,!0)}return void 0===r&&(s=r=d.measureText(e).width,l[e]=r),void 0===o&&u&&n&&(o=d.measureText(n).width,l[n]=o),u&&void 0===a&&(a=d.measureText(c).width,l[c]=a,s=a-o),{width:r*g,kernedWidth:s*g}},getHeightOfChar:function(e,t){return this.getValueOfPropertyAt(e,t,"fontSize")},measureLine:function(e){var t=this._measureLine(e);return 0!==this.charSpacing&&(t.width-=this._getWidthOfCharSpacing()),t.width<0&&(t.width=0),t},_measureLine:function(e){var n,i,r,a,o,s,l=0,c=this._textLines[e],u=new Array(c.length),g=0,d=this.path,h="right"===this.pathSide;for(this.__charBounds[e]=u,n=0;n<c.length;n++)i=c[n],a=this._getGraphemeBox(i,e,n,r),u[n]=a,l+=a.kernedWidth,r=i;if(u[n]={left:a?a.left+a.width:0,width:0,kernedWidth:0,height:this.fontSize},d){switch(s=d.segmentsInfo[d.segmentsInfo.length-1].length,(o=t.util.getPointOnPath(d.path,0,d.segmentsInfo)).x+=d.pathOffset.x,o.y+=d.pathOffset.y,this.textAlign){case"left":g=h?s-l:0;break;case"center":g=(s-l)/2;break;case"right":g=h?0:s-l}for(g+=this.pathStartOffset*(h?-1:1),n=h?c.length-1:0;h?n>=0:n<c.length;h?n--:n++)a=u[n],g>s?g%=s:g<0&&(g+=s),this._setGraphemeOnPath(g,a,o),g+=a.kernedWidth}return{width:l,numOfSpaces:0}},_setGraphemeOnPath:function(e,n,i){var r=e+n.kernedWidth/2,a=this.path,o=t.util.getPointOnPath(a.path,r,a.segmentsInfo);n.renderLeft=o.x-i.x,n.renderTop=o.y-i.y,n.angle=o.angle+("right"===this.pathSide?Math.PI:0)},_getGraphemeBox:function(e,t,n,i,r){var a,o=this.getCompleteStyleDeclaration(t,n),s=i?this.getCompleteStyleDeclaration(t,n-1):{},l=this._measureChar(e,o,i,s),c=l.kernedWidth,u=l.width;0!==this.charSpacing&&(u+=a=this._getWidthOfCharSpacing(),c+=a);var g={width:u,left:0,height:o.fontSize,kernedWidth:c,deltaY:o.deltaY};if(n>0&&!r){var d=this.__charBounds[t][n-1];g.left=d.left+d.width+l.kernedWidth-l.width}return g},getHeightOfLine:function(e){if(this.__lineHeights[e])return this.__lineHeights[e];for(var t=this._textLines[e],n=this.getHeightOfChar(e,0),i=1,r=t.length;i<r;i++)n=Math.max(this.getHeightOfChar(e,i),n);return this.__lineHeights[e]=n*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var e,t=0,n=0,i=this._textLines.length;n<i;n++)e=this.getHeightOfLine(n),t+=n===i-1?e/this.lineHeight:e;return t},_getLeftOffset:function(){return"ltr"===this.direction?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(e,t){e.save();for(var n=0,i=this._getLeftOffset(),r=this._getTopOffset(),a=0,o=this._textLines.length;a<o;a++){var s=this.getHeightOfLine(a),l=s/this.lineHeight,c=this._getLineLeftOffset(a);this._renderTextLine(t,e,this._textLines[a],i+c,r+n+l,a),n+=s}e.restore()},_renderTextFill:function(e){(this.fill||this.styleHas("fill"))&&this._renderTextCommon(e,"fillText")},_renderTextStroke:function(e){(this.stroke&&0!==this.strokeWidth||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this._setLineDash(e,this.strokeDashArray),e.beginPath(),this._renderTextCommon(e,"strokeText"),e.closePath(),e.restore())},_renderChars:function(e,n,i,r,a,o){var s,l,c,u,g,d=this.getHeightOfLine(o),h=-1!==this.textAlign.indexOf("justify"),f="",p=0,I=this.path,C=!h&&0===this.charSpacing&&this.isEmptyStyles(o)&&!I,m="ltr"===this.direction,v="ltr"===this.direction?1:-1,A=n.canvas.getAttribute("dir");if(n.save(),A!==this.direction&&(n.canvas.setAttribute("dir",m?"ltr":"rtl"),n.direction=m?"ltr":"rtl",n.textAlign=m?"left":"right"),a-=d*this._fontSizeFraction/this.lineHeight,C)return this._renderChar(e,n,o,0,i.join(""),r,a,d),void n.restore();for(var b=0,y=i.length-1;b<=y;b++)u=b===y||this.charSpacing||I,f+=i[b],c=this.__charBounds[o][b],0===p?(r+=v*(c.kernedWidth-c.width),p+=c.width):p+=c.kernedWidth,h&&!u&&this._reSpaceAndTab.test(i[b])&&(u=!0),u||(s=s||this.getCompleteStyleDeclaration(o,b),l=this.getCompleteStyleDeclaration(o,b+1),u=t.util.hasStyleChanged(s,l,!1)),u&&(I?(n.save(),n.translate(c.renderLeft,c.renderTop),n.rotate(c.angle),this._renderChar(e,n,o,b,f,-p/2,0,d),n.restore()):(g=r,this._renderChar(e,n,o,b,f,g,a,d)),f="",s=l,r+=v*p,p=0);n.restore()},_applyPatternGradientTransformText:function(e){var n,i=t.util.createCanvasElement(),r=this.width+this.strokeWidth,a=this.height+this.strokeWidth;return i.width=r,i.height=a,(n=i.getContext("2d")).beginPath(),n.moveTo(0,0),n.lineTo(r,0),n.lineTo(r,a),n.lineTo(0,a),n.closePath(),n.translate(r/2,a/2),n.fillStyle=e.toLive(n),this._applyPatternGradientTransform(n,e),n.fill(),n.createPattern(i,"no-repeat")},handleFiller:function(e,t,n){var i,r;return n.toLive?"percentage"===n.gradientUnits||n.gradientTransform||n.patternTransform?(i=-this.width/2,r=-this.height/2,e.translate(i,r),e[t]=this._applyPatternGradientTransformText(n),{offsetX:i,offsetY:r}):(e[t]=n.toLive(e,this),this._applyPatternGradientTransform(e,n)):(e[t]=n,{offsetX:0,offsetY:0})},_setStrokeStyles:function(e,t){return e.lineWidth=t.strokeWidth,e.lineCap=this.strokeLineCap,e.lineDashOffset=this.strokeDashOffset,e.lineJoin=this.strokeLineJoin,e.miterLimit=this.strokeMiterLimit,this.handleFiller(e,"strokeStyle",t.stroke)},_setFillStyles:function(e,t){return this.handleFiller(e,"fillStyle",t.fill)},_renderChar:function(e,t,n,i,r,a,o){var s,l,c=this._getStyleDeclaration(n,i),u=this.getCompleteStyleDeclaration(n,i),g="fillText"===e&&u.fill,d="strokeText"===e&&u.stroke&&u.strokeWidth;(d||g)&&(t.save(),g&&(s=this._setFillStyles(t,u)),d&&(l=this._setStrokeStyles(t,u)),t.font=this._getFontDeclaration(u),c&&c.textBackgroundColor&&this._removeShadow(t),c&&c.deltaY&&(o+=c.deltaY),g&&t.fillText(r,a-s.offsetX,o-s.offsetY),d&&t.strokeText(r,a-l.offsetX,o-l.offsetY),t.restore())},setSuperscript:function(e,t){return this._setScript(e,t,this.superscript)},setSubscript:function(e,t){return this._setScript(e,t,this.subscript)},_setScript:function(e,t,n){var i=this.get2DCursorLocation(e,!0),r=this.getValueOfPropertyAt(i.lineIndex,i.charIndex,"fontSize"),a=this.getValueOfPropertyAt(i.lineIndex,i.charIndex,"deltaY"),o={fontSize:r*n.size,deltaY:a+r*n.baseline};return this.setSelectionStyles(o,e,t),this},_getLineLeftOffset:function(e){var t=this.getLineWidth(e),n=this.width-t,i=this.textAlign,r=this.direction,a=0,o=this.isEndOfWrapping(e);return"justify"===i||"justify-center"===i&&!o||"justify-right"===i&&!o||"justify-left"===i&&!o?0:("center"===i&&(a=n/2),"right"===i&&(a=n),"justify-center"===i&&(a=n/2),"justify-right"===i&&(a=n),"rtl"===r&&(a-=n),a)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var e=this._forceClearCache;return e||(e=this.hasStateChanged("_dimensionAffectingProps")),e&&(this.dirty=!0,this._forceClearCache=!1),e},getLineWidth:function(e){if(void 0!==this.__lineWidths[e])return this.__lineWidths[e];var t=this.measureLine(e).width;return this.__lineWidths[e]=t,t},_getWidthOfCharSpacing:function(){return 0!==this.charSpacing?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(e,t,n){var i=this._getStyleDeclaration(e,t);return i&&"undefined"!==typeof i[n]?i[n]:this[n]},_renderTextDecoration:function(e,t){if(this[t]||this.styleHas(t)){for(var n,i,r,a,o,s,l,c,u,g,d,h,f,p,I,C,m=this._getLeftOffset(),v=this._getTopOffset(),A=this.path,b=this._getWidthOfCharSpacing(),y=this.offsets[t],G=0,w=this._textLines.length;G<w;G++)if(n=this.getHeightOfLine(G),this[t]||this.styleHas(t,G)){l=this._textLines[G],p=n/this.lineHeight,a=this._getLineLeftOffset(G),g=0,d=0,c=this.getValueOfPropertyAt(G,0,t),C=this.getValueOfPropertyAt(G,0,"fill"),u=v+p*(1-this._fontSizeFraction),i=this.getHeightOfChar(G,0),o=this.getValueOfPropertyAt(G,0,"deltaY");for(var B=0,x=l.length;B<x;B++)if(h=this.__charBounds[G][B],f=this.getValueOfPropertyAt(G,B,t),I=this.getValueOfPropertyAt(G,B,"fill"),r=this.getHeightOfChar(G,B),s=this.getValueOfPropertyAt(G,B,"deltaY"),A&&f&&I)e.save(),e.fillStyle=C,e.translate(h.renderLeft,h.renderTop),e.rotate(h.angle),e.fillRect(-h.kernedWidth/2,y*r+s,h.kernedWidth,this.fontSize/15),e.restore();else if((f!==c||I!==C||r!==i||s!==o)&&d>0){var S=m+a+g;"rtl"===this.direction&&(S=this.width-S-d),c&&C&&(e.fillStyle=C,e.fillRect(S,u+y*i+o,d,this.fontSize/15)),g=h.left,d=h.width,c=f,C=I,i=r,o=s}else d+=h.kernedWidth;S=m+a+g;"rtl"===this.direction&&(S=this.width-S-d),e.fillStyle=I,f&&I&&e.fillRect(S,u+y*i+o,d-b,this.fontSize/15),v+=n}else v+=n;this._removeShadow(e)}},_getFontDeclaration:function(e,n){var i=e||this,r=this.fontFamily,a=t.Text.genericFonts.indexOf(r.toLowerCase())>-1,o=void 0===r||r.indexOf("'")>-1||r.indexOf(",")>-1||r.indexOf('"')>-1||a?i.fontFamily:'"'+i.fontFamily+'"';return[t.isLikelyNode?i.fontWeight:i.fontStyle,t.isLikelyNode?i.fontStyle:i.fontWeight,n?this.CACHE_FONT_SIZE+"px":i.fontSize+"px",o].join(" ")},render:function(e){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",e)))},_splitTextIntoLines:function(e){for(var n=e.split(this._reNewline),i=new Array(n.length),r=["\n"],a=[],o=0;o<n.length;o++)i[o]=t.util.string.graphemeSplit(n[o]),a=a.concat(i[o],r);return a.pop(),{_unwrappedLines:i,lines:n,graphemeText:a,graphemeLines:i}},toObject:function(e){var n=i.concat(e),r=this.callSuper("toObject",n);return r.styles=t.util.stylesToArray(this.styles,this.text),r.path&&(r.path=this.path.toObject()),r},set:function(e,t){this.callSuper("set",e,t);var n=!1,i=!1;if("object"===typeof e)for(var r in e)"path"===r&&this.setPathInfo(),n=n||-1!==this._dimensionAffectingProps.indexOf(r),i=i||"path"===r;else n=-1!==this._dimensionAffectingProps.indexOf(e),i="path"===e;return i&&this.setPathInfo(),n&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),t.Text.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),t.Text.DEFAULT_SVG_FONT_SIZE=16,t.Text.fromElement=function(e,i,r){if(!e)return i(null);var a=t.parseAttributes(e,t.Text.ATTRIBUTE_NAMES),o=a.textAnchor||"left";if((r=t.util.object.extend(r?n(r):{},a)).top=r.top||0,r.left=r.left||0,a.textDecoration){var s=a.textDecoration;-1!==s.indexOf("underline")&&(r.underline=!0),-1!==s.indexOf("overline")&&(r.overline=!0),-1!==s.indexOf("line-through")&&(r.linethrough=!0),delete r.textDecoration}"dx"in a&&(r.left+=a.dx),"dy"in a&&(r.top+=a.dy),"fontSize"in r||(r.fontSize=t.Text.DEFAULT_SVG_FONT_SIZE);var l="";"textContent"in e?l=e.textContent:"firstChild"in e&&null!==e.firstChild&&"data"in e.firstChild&&null!==e.firstChild.data&&(l=e.firstChild.data),l=l.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var c=r.strokeWidth;r.strokeWidth=0;var u=new t.Text(l,r),g=u.getScaledHeight()/u.height,d=((u.height+u.strokeWidth)*u.lineHeight-u.height)*g,h=u.getScaledHeight()+d,f=0;"center"===o&&(f=u.getScaledWidth()/2),"right"===o&&(f=u.getScaledWidth()),u.set({left:u.left-f,top:u.top-(h-u.fontSize*(.07+u._fontSizeFraction))/u.lineHeight,strokeWidth:"undefined"!==typeof c?c:1}),i(u)},t.Text.fromObject=function(e,i){var r=n(e),a=e.path;return delete r.path,t.Object._fromObject("Text",r,(function(n){n.styles=t.util.stylesFromArray(e.styles,e.text),a?t.Object._fromObject("Path",a,(function(e){n.set("path",e),i(n)}),"path"):i(n)}),"text")},t.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],t.util.createAccessors&&t.util.createAccessors(t.Text)}}(t),r.util.object.extend(r.Text.prototype,{isEmptyStyles:function(e){if(!this.styles)return!0;if("undefined"!==typeof e&&!this.styles[e])return!0;var t="undefined"===typeof e?this.styles:{line:this.styles[e]};for(var n in t)for(var i in t[n])for(var r in t[n][i])return!1;return!0},styleHas:function(e,t){if(!this.styles||!e||""===e)return!1;if("undefined"!==typeof t&&!this.styles[t])return!1;var n="undefined"===typeof t?this.styles:{0:this.styles[t]};for(var i in n)for(var r in n[i])if("undefined"!==typeof n[i][r][e])return!0;return!1},cleanStyle:function(e){if(!this.styles||!e||""===e)return!1;var t,n,i=this.styles,r=0,a=!0,o=0;for(var s in i){for(var l in t=0,i[s]){var c;r++,(c=i[s][l]).hasOwnProperty(e)?(n?c[e]!==n&&(a=!1):n=c[e],c[e]===this[e]&&delete c[e]):a=!1,0!==Object.keys(c).length?t++:delete i[s][l]}0===t&&delete i[s]}for(var u=0;u<this._textLines.length;u++)o+=this._textLines[u].length;a&&r===o&&(this[e]=n,this.removeStyle(e))},removeStyle:function(e){if(this.styles&&e&&""!==e){var t,n,i,r=this.styles;for(n in r){for(i in t=r[n])delete t[i][e],0===Object.keys(t[i]).length&&delete t[i];0===Object.keys(t).length&&delete r[n]}}},_extendStyles:function(e,t){var n=this.get2DCursorLocation(e);this._getLineStyle(n.lineIndex)||this._setLineStyle(n.lineIndex),this._getStyleDeclaration(n.lineIndex,n.charIndex)||this._setStyleDeclaration(n.lineIndex,n.charIndex,{}),r.util.object.extend(this._getStyleDeclaration(n.lineIndex,n.charIndex),t)},get2DCursorLocation:function(e,t){"undefined"===typeof e&&(e=this.selectionStart);for(var n=t?this._unwrappedTextLines:this._textLines,i=n.length,r=0;r<i;r++){if(e<=n[r].length)return{lineIndex:r,charIndex:e};e-=n[r].length+this.missingNewlineOffset(r)}return{lineIndex:r-1,charIndex:n[r-1].length<e?n[r-1].length:e}},getSelectionStyles:function(e,t,n){"undefined"===typeof e&&(e=this.selectionStart||0),"undefined"===typeof t&&(t=this.selectionEnd||e);for(var i=[],r=e;r<t;r++)i.push(this.getStyleAtPosition(r,n));return i},getStyleAtPosition:function(e,t){var n=this.get2DCursorLocation(e);return(t?this.getCompleteStyleDeclaration(n.lineIndex,n.charIndex):this._getStyleDeclaration(n.lineIndex,n.charIndex))||{}},setSelectionStyles:function(e,t,n){"undefined"===typeof t&&(t=this.selectionStart||0),"undefined"===typeof n&&(n=this.selectionEnd||t);for(var i=t;i<n;i++)this._extendStyles(i,e);return this._forceClearCache=!0,this},_getStyleDeclaration:function(e,t){var n=this.styles&&this.styles[e];return n?n[t]:null},getCompleteStyleDeclaration:function(e,t){for(var n,i=this._getStyleDeclaration(e,t)||{},r={},a=0;a<this._styleProperties.length;a++)r[n=this._styleProperties[a]]="undefined"===typeof i[n]?this[n]:i[n];return r},_setStyleDeclaration:function(e,t,n){this.styles[e][t]=n},_deleteStyleDeclaration:function(e,t){delete this.styles[e][t]},_getLineStyle:function(e){return!!this.styles[e]},_setLineStyle:function(e){this.styles[e]={}},_deleteLineStyle:function(e){delete this.styles[e]}}),function(){function e(e){e.textDecoration&&(e.textDecoration.indexOf("underline")>-1&&(e.underline=!0),e.textDecoration.indexOf("line-through")>-1&&(e.linethrough=!0),e.textDecoration.indexOf("overline")>-1&&(e.overline=!0),delete e.textDecoration)}r.IText=r.util.createClass(r.Text,r.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(e,t){this.callSuper("initialize",e,t),this.initBehavior()},setSelectionStart:function(e){e=Math.max(e,0),this._updateAndFire("selectionStart",e)},setSelectionEnd:function(e){e=Math.min(e,this.text.length),this._updateAndFire("selectionEnd",e)},_updateAndFire:function(e,t){this[e]!==t&&(this._fireSelectionChanged(),this[e]=t),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(e){this.clearContextTop(),this.callSuper("render",e),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(e){this.callSuper("_render",e)},clearContextTop:function(e){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var t=this.canvas.contextTop,n=this.canvas.viewportTransform;t.save(),t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this.transform(t),this._clearTextArea(t),e||t.restore()}},renderCursorOrSelection:function(){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var e=this._getCursorBoundaries(),t=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(e,t):this.renderSelection(e,t),t.restore()}},_clearTextArea:function(e){var t=this.width+4,n=this.height+4;e.clearRect(-t/2,-n/2,t,n)},_getCursorBoundaries:function(e){"undefined"===typeof e&&(e=this.selectionStart);var t=this._getLeftOffset(),n=this._getTopOffset(),i=this._getCursorBoundariesOffsets(e);return{left:t,top:n,leftOffset:i.left,topOffset:i.top}},_getCursorBoundariesOffsets:function(e){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var t,n,i,r,a=0,o=0,s=this.get2DCursorLocation(e);i=s.charIndex,n=s.lineIndex;for(var l=0;l<n;l++)a+=this.getHeightOfLine(l);t=this._getLineLeftOffset(n);var c=this.__charBounds[n][i];return c&&(o=c.left),0!==this.charSpacing&&i===this._textLines[n].length&&(o-=this._getWidthOfCharSpacing()),r={top:a,left:t+(o>0?o:0)},"rtl"===this.direction&&(r.left*=-1),this.cursorOffsetCache=r,this.cursorOffsetCache},renderCursor:function(e,t){var n=this.get2DCursorLocation(),i=n.lineIndex,r=n.charIndex>0?n.charIndex-1:0,a=this.getValueOfPropertyAt(i,r,"fontSize"),o=this.scaleX*this.canvas.getZoom(),s=this.cursorWidth/o,l=e.topOffset,c=this.getValueOfPropertyAt(i,r,"deltaY");l+=(1-this._fontSizeFraction)*this.getHeightOfLine(i)/this.lineHeight-a*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(e,t),t.fillStyle=this.cursorColor||this.getValueOfPropertyAt(i,r,"fill"),t.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,t.fillRect(e.left+e.leftOffset-s/2,l+e.top+c,s,a)},renderSelection:function(e,t){for(var n=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,i=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,r=-1!==this.textAlign.indexOf("justify"),a=this.get2DCursorLocation(n),o=this.get2DCursorLocation(i),s=a.lineIndex,l=o.lineIndex,c=a.charIndex<0?0:a.charIndex,u=o.charIndex<0?0:o.charIndex,g=s;g<=l;g++){var d,h=this._getLineLeftOffset(g)||0,f=this.getHeightOfLine(g),p=0,I=0;if(g===s&&(p=this.__charBounds[s][c].left),g>=s&&g<l)I=r&&!this.isEndOfWrapping(g)?this.width:this.getLineWidth(g)||5;else if(g===l)if(0===u)I=this.__charBounds[l][u].left;else{var C=this._getWidthOfCharSpacing();I=this.__charBounds[l][u-1].left+this.__charBounds[l][u-1].width-C}d=f,(this.lineHeight<1||g===l&&this.lineHeight>1)&&(f/=this.lineHeight);var m=e.left+h+p,v=I-p,A=f,b=0;this.inCompositionMode?(t.fillStyle=this.compositionColor||"black",A=1,b=f):t.fillStyle=this.selectionColor,"rtl"===this.direction&&(m=this.width-m-v),t.fillRect(m,e.top+e.topOffset+b,v,A),e.topOffset+=d}},getCurrentCharFontSize:function(){var e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fontSize")},getCurrentCharColor:function(){var e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fill")},_getCurrentCharIndex:function(){var e=this.get2DCursorLocation(this.selectionStart,!0),t=e.charIndex>0?e.charIndex-1:0;return{l:e.lineIndex,c:t}}}),r.IText.fromObject=function(t,n){var i=r.util.stylesFromArray(t.styles,t.text),a=Object.assign({},t,{styles:i});if(e(a),a.styles)for(var o in a.styles)for(var s in a.styles[o])e(a.styles[o][s]);r.Object._fromObject("IText",a,n,"text")}}(),function(){var e=r.util.object.clone;r.util.object.extend(r.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var e=this;this.on("added",(function(){var t=e.canvas;t&&(t._hasITextHandlers||(t._hasITextHandlers=!0,e._initCanvasHandlers(t)),t._iTextInstances=t._iTextInstances||[],t._iTextInstances.push(e))}))},initRemovedHandler:function(){var e=this;this.on("removed",(function(){var t=e.canvas;t&&(t._iTextInstances=t._iTextInstances||[],r.util.removeFromArray(t._iTextInstances,e),0===t._iTextInstances.length&&(t._hasITextHandlers=!1,e._removeCanvasHandlers(t)))}))},_initCanvasHandlers:function(e){e._mouseUpITextHandler=function(){e._iTextInstances&&e._iTextInstances.forEach((function(e){e.__isMousedown=!1}))},e.on("mouse:up",e._mouseUpITextHandler)},_removeCanvasHandlers:function(e){e.off("mouse:up",e._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(e,t,n,i){var r;return r={isAborted:!1,abort:function(){this.isAborted=!0}},e.animate("_currentCursorOpacity",t,{duration:n,onComplete:function(){r.isAborted||e[i]()},onChange:function(){e.canvas&&e.selectionStart===e.selectionEnd&&e.renderCursorOrSelection()},abort:function(){return r.isAborted}}),r},_onTickComplete:function(){var e=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout((function(){e._currentTickCompleteState=e._animateCursor(e,0,this.cursorDuration/2,"_tick")}),100)},initDelayedCursor:function(e){var t=this,n=e?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout((function(){t._tick()}),n)},abortCursorAnimation:function(){var e=this._currentTickState||this._currentTickCompleteState,t=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,e&&t&&t.clearContext(t.contextTop||t.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(e){var t=0,n=e-1;if(this._reSpace.test(this._text[n]))for(;this._reSpace.test(this._text[n]);)t++,n--;for(;/\S/.test(this._text[n])&&n>-1;)t++,n--;return e-t},findWordBoundaryRight:function(e){var t=0,n=e;if(this._reSpace.test(this._text[n]))for(;this._reSpace.test(this._text[n]);)t++,n++;for(;/\S/.test(this._text[n])&&n<this._text.length;)t++,n++;return e+t},findLineBoundaryLeft:function(e){for(var t=0,n=e-1;!/\n/.test(this._text[n])&&n>-1;)t++,n--;return e-t},findLineBoundaryRight:function(e){for(var t=0,n=e;!/\n/.test(this._text[n])&&n<this._text.length;)t++,n++;return e+t},searchWordBoundary:function(e,t){for(var n=this._text,i=this._reSpace.test(n[e])?e-1:e,a=n[i],o=r.reNonWord;!o.test(a)&&i>0&&i<n.length;)a=n[i+=t];return o.test(a)&&(i+=1===t?0:1),i},selectWord:function(e){e=e||this.selectionStart;var t=this.searchWordBoundary(e,-1),n=this.searchWordBoundary(e,1);this.selectionStart=t,this.selectionEnd=n,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(e){e=e||this.selectionStart;var t=this.findLineBoundaryLeft(e),n=this.findLineBoundaryRight(e);return this.selectionStart=t,this.selectionEnd=n,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(e){if(!this.isEditing&&this.editable)return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(e),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(e){e._iTextInstances&&e._iTextInstances.forEach((function(e){e.selected=!1,e.isEditing&&e.exitEditing()}))},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(e){if(this.__isMousedown&&this.isEditing){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var t=this.getSelectionStartFromPointer(e.e),n=this.selectionStart,i=this.selectionEnd;(t===this.__selectionStartOnMouseDown&&n!==i||n!==t&&i!==t)&&(t>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=t):(this.selectionStart=t,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===n&&this.selectionEnd===i||(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(e,t,n){var i=n.slice(0,e),a=r.util.string.graphemeSplit(i).length;if(e===t)return{selectionStart:a,selectionEnd:a};var o=n.slice(e,t);return{selectionStart:a,selectionEnd:a+r.util.string.graphemeSplit(o).length}},fromGraphemeToStringSelection:function(e,t,n){var i=n.slice(0,e).join("").length;return e===t?{selectionStart:i,selectionEnd:i}:{selectionStart:i,selectionEnd:i+n.slice(e,t).join("").length}},_updateTextarea:function(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){var e=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=e.selectionStart,this.hiddenTextarea.selectionEnd=e.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var e=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=e.selectionEnd,this.inCompositionMode||(this.selectionStart=e.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var e=this._calcTextareaPosition();this.hiddenTextarea.style.left=e.left,this.hiddenTextarea.style.top=e.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var e=this.inCompositionMode?this.compositionStart:this.selectionStart,t=this._getCursorBoundaries(e),n=this.get2DCursorLocation(e),i=n.lineIndex,a=n.charIndex,o=this.getValueOfPropertyAt(i,a,"fontSize")*this.lineHeight,s=t.leftOffset,l=this.calcTransformMatrix(),c={x:t.left+s,y:t.top+t.topOffset+o},u=this.canvas.getRetinaScaling(),g=this.canvas.upperCanvasEl,d=g.width/u,h=g.height/u,f=d-o,p=h-o,I=g.clientWidth/d,C=g.clientHeight/h;return c=r.util.transformPoint(c,l),(c=r.util.transformPoint(c,this.canvas.viewportTransform)).x*=I,c.y*=C,c.x<0&&(c.x=0),c.x>f&&(c.x=f),c.y<0&&(c.y=0),c.y>p&&(c.y=p),c.x+=this.canvas._offset.left,c.y+=this.canvas._offset.top,{left:c.x+"px",top:c.y+"px",fontSize:o+"px",charHeight:o}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var e=this._textBeforeEdit!==this.text,t=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,t&&(t.blur&&t.blur(),t.parentNode&&t.parentNode.removeChild(t)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),e&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),e&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var e in this.styles)this._textLines[e]||delete this.styles[e]},removeStyleFromTo:function(e,t){var n,i,r=this.get2DCursorLocation(e,!0),a=this.get2DCursorLocation(t,!0),o=r.lineIndex,s=r.charIndex,l=a.lineIndex,c=a.charIndex;if(o!==l){if(this.styles[o])for(n=s;n<this._unwrappedTextLines[o].length;n++)delete this.styles[o][n];if(this.styles[l])for(n=c;n<this._unwrappedTextLines[l].length;n++)(i=this.styles[l][n])&&(this.styles[o]||(this.styles[o]={}),this.styles[o][s+n-c]=i);for(n=o+1;n<=l;n++)delete this.styles[n];this.shiftLineStyles(l,o-l)}else if(this.styles[o]){i=this.styles[o];var u,g,d=c-s;for(n=s;n<c;n++)delete i[n];for(g in this.styles[o])(u=parseInt(g,10))>=c&&(i[u-d]=i[g],delete i[g])}},shiftLineStyles:function(t,n){var i=e(this.styles);for(var r in this.styles){var a=parseInt(r,10);a>t&&(this.styles[a+n]=i[a],i[a-n]||delete this.styles[a])}},restartCursorIfNeeded:function(){this._currentTickState&&!this._currentTickState.isAborted&&this._currentTickCompleteState&&!this._currentTickCompleteState.isAborted||this.initDelayedCursor()},insertNewlineStyleObject:function(t,n,i,r){var a,o={},s=!1,l=this._unwrappedTextLines[t].length===n;for(var c in i||(i=1),this.shiftLineStyles(t,i),this.styles[t]&&(a=this.styles[t][0===n?n:n-1]),this.styles[t]){var u=parseInt(c,10);u>=n&&(s=!0,o[u-n]=this.styles[t][c],l&&0===n||delete this.styles[t][c])}var g=!1;for(s&&!l&&(this.styles[t+i]=o,g=!0),g&&i--;i>0;)r&&r[i-1]?this.styles[t+i]={0:e(r[i-1])}:a?this.styles[t+i]={0:e(a)}:delete this.styles[t+i],i--;this._forceClearCache=!0},insertCharStyleObject:function(t,n,i,r){this.styles||(this.styles={});var a=this.styles[t],o=a?e(a):{};for(var s in i||(i=1),o){var l=parseInt(s,10);l>=n&&(a[l+i]=o[l],o[l-i]||delete a[l])}if(this._forceClearCache=!0,r)for(;i--;)Object.keys(r[i]).length&&(this.styles[t]||(this.styles[t]={}),this.styles[t][n+i]=e(r[i]));else if(a)for(var c=a[n?n-1:1];c&&i--;)this.styles[t][n+i]=e(c)},insertNewStyleBlock:function(e,t,n){for(var i=this.get2DCursorLocation(t,!0),r=[0],a=0,o=0;o<e.length;o++)"\n"===e[o]?r[++a]=0:r[a]++;r[0]>0&&(this.insertCharStyleObject(i.lineIndex,i.charIndex,r[0],n),n=n&&n.slice(r[0]+1)),a&&this.insertNewlineStyleObject(i.lineIndex,i.charIndex+r[0],a);for(o=1;o<a;o++)r[o]>0?this.insertCharStyleObject(i.lineIndex+o,0,r[o],n):n&&this.styles[i.lineIndex+o]&&n[0]&&(this.styles[i.lineIndex+o][0]=n[0]),n=n&&n.slice(r[o]+1);r[o]>0&&this.insertCharStyleObject(i.lineIndex+o,0,r[o],n)},setSelectionStartEndWithShift:function(e,t,n){n<=e?(t===e?this._selectionDirection="left":"right"===this._selectionDirection&&(this._selectionDirection="left",this.selectionEnd=e),this.selectionStart=n):n>e&&n<t?"right"===this._selectionDirection?this.selectionEnd=n:this.selectionStart=n:(t===e?this._selectionDirection="right":"left"===this._selectionDirection&&(this._selectionDirection="right",this.selectionStart=t),this.selectionEnd=n)},setSelectionInBoundaries:function(){var e=this.text.length;this.selectionStart>e?this.selectionStart=e:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>e?this.selectionEnd=e:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),r.util.object.extend(r.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(e){if(this.canvas){this.__newClickTime=+new Date;var t=e.pointer;this.isTripleClick(t)&&(this.fire("tripleclick",e),this._stopEvent(e.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=t,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(e){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===e.x&&this.__lastPointer.y===e.y},_stopEvent:function(e){e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(e){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(e.e))},tripleClickHandler:function(e){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(e.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(e){!this.canvas||!this.editable||e.e.button&&1!==e.e.button||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(e.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(e){!this.canvas||!this.editable||e.e.button&&1!==e.e.button||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(e){if(this.__isMousedown=!1,!(!this.editable||this.group||e.transform&&e.transform.actionPerformed||e.e.button&&1!==e.e.button)){if(this.canvas){var t=this.canvas._activeObject;if(t&&t!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(e.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(e){var t=this.getSelectionStartFromPointer(e),n=this.selectionStart,i=this.selectionEnd;e.shiftKey?this.setSelectionStartEndWithShift(n,i,t):(this.selectionStart=t,this.selectionEnd=t),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(e){for(var t,n=this.getLocalPointer(e),i=0,r=0,a=0,o=0,s=0,l=0,c=this._textLines.length;l<c&&a<=n.y;l++)a+=this.getHeightOfLine(l)*this.scaleY,s=l,l>0&&(o+=this._textLines[l-1].length+this.missingNewlineOffset(l-1));r=this._getLineLeftOffset(s)*this.scaleX,t=this._textLines[s],"rtl"===this.direction&&(n.x=this.width*this.scaleX-n.x+r);for(var u=0,g=t.length;u<g&&(i=r,(r+=this.__charBounds[s][u].kernedWidth*this.scaleX)<=n.x);u++)o++;return this._getNewSelectionStartFromOffset(n,i,r,o,g)},_getNewSelectionStartFromOffset:function(e,t,n,i,r){var a=e.x-t,o=n-e.x,s=i+(o>a||o<0?0:1);return this.flipX&&(s=r-s),s>this._text.length&&(s=this._text.length),s}}),r.util.object.extend(r.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=r.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var e=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+e.top+"; left: "+e.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: "+e.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):r.document.body.appendChild(this.hiddenTextarea),r.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),r.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),r.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),r.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),r.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),r.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),r.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),r.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),r.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(r.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(e){if(this.isEditing){var t="rtl"===this.direction?this.keysMapRtl:this.keysMap;if(e.keyCode in t)this[t[e.keyCode]](e);else{if(!(e.keyCode in this.ctrlKeysMapDown)||!e.ctrlKey&&!e.metaKey)return;this[this.ctrlKeysMapDown[e.keyCode]](e)}e.stopImmediatePropagation(),e.preventDefault(),e.keyCode>=33&&e.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(e){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:e.keyCode in this.ctrlKeysMapUp&&(e.ctrlKey||e.metaKey)&&(this[this.ctrlKeysMapUp[e.keyCode]](e),e.stopImmediatePropagation(),e.preventDefault(),this.canvas&&this.canvas.requestRenderAll())},onInput:function(e){var t=this.fromPaste;if(this.fromPaste=!1,e&&e.stopPropagation(),this.isEditing){var n,i,a,o,s,l=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,c=this._text.length,u=l.length,g=u-c,d=this.selectionStart,h=this.selectionEnd,f=d!==h;if(""===this.hiddenTextarea.value)return this.styles={},this.updateFromTextArea(),this.fire("changed"),void(this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll()));var p=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),I=d>p.selectionStart;f?(n=this._text.slice(d,h),g+=h-d):u<c&&(n=I?this._text.slice(h+g,h):this._text.slice(d,d-g)),i=l.slice(p.selectionEnd-g,p.selectionEnd),n&&n.length&&(i.length&&(a=this.getSelectionStyles(d,d+1,!1),a=i.map((function(){return a[0]}))),f?(o=d,s=h):I?(o=h-n.length,s=h):(o=h,s=h+n.length),this.removeStyleFromTo(o,s)),i.length&&(t&&i.join("")===r.copiedText&&!r.disableStyleCopyPaste&&(a=r.copiedTextStyle),this.insertNewStyleBlock(i,d,a)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(e){this.compositionStart=e.target.selectionStart,this.compositionEnd=e.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(r.copiedText=this.getSelectedText(),r.disableStyleCopyPaste?r.copiedTextStyle=null:r.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(e){return e&&e.clipboardData||r.window.clipboardData},_getWidthBeforeCursor:function(e,t){var n,i=this._getLineLeftOffset(e);return t>0&&(i+=(n=this.__charBounds[e][t-1]).left+n.width),i},getDownCursorOffset:function(e,t){var n=this._getSelectionForOffset(e,t),i=this.get2DCursorLocation(n),r=i.lineIndex;if(r===this._textLines.length-1||e.metaKey||34===e.keyCode)return this._text.length-n;var a=i.charIndex,o=this._getWidthBeforeCursor(r,a),s=this._getIndexOnLine(r+1,o);return this._textLines[r].slice(a).length+s+1+this.missingNewlineOffset(r)},_getSelectionForOffset:function(e,t){return e.shiftKey&&this.selectionStart!==this.selectionEnd&&t?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(e,t){var n=this._getSelectionForOffset(e,t),i=this.get2DCursorLocation(n),r=i.lineIndex;if(0===r||e.metaKey||33===e.keyCode)return-n;var a=i.charIndex,o=this._getWidthBeforeCursor(r,a),s=this._getIndexOnLine(r-1,o),l=this._textLines[r].slice(0,a),c=this.missingNewlineOffset(r-1);return-this._textLines[r-1].length+s-l.length+(1-c)},_getIndexOnLine:function(e,t){for(var n,i,r=this._textLines[e],a=this._getLineLeftOffset(e),o=0,s=0,l=r.length;s<l;s++)if((a+=n=this.__charBounds[e][s].width)>t){i=!0;var c=a-n,u=a,g=Math.abs(c-t);o=Math.abs(u-t)<g?s:s-1;break}return i||(o=r.length-1),o},moveCursorDown:function(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",e)},moveCursorUp:function(e){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorUpOrDown("Up",e)},_moveCursorUpOrDown:function(e,t){var n=this["get"+e+"CursorOffset"](t,"right"===this._selectionDirection);t.shiftKey?this.moveCursorWithShift(n):this.moveCursorWithoutShift(n),0!==n&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(e){var t="left"===this._selectionDirection?this.selectionStart+e:this.selectionEnd+e;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,t),0!==e},moveCursorWithoutShift:function(e){return e<0?(this.selectionStart+=e,this.selectionEnd=this.selectionStart):(this.selectionEnd+=e,this.selectionStart=this.selectionEnd),0!==e},moveCursorLeft:function(e){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorLeftOrRight("Left",e)},_move:function(e,t,n){var i;if(e.altKey)i=this["findWordBoundary"+n](this[t]);else{if(!e.metaKey&&35!==e.keyCode&&36!==e.keyCode)return this[t]+="Left"===n?-1:1,!0;i=this["findLineBoundary"+n](this[t])}if("undefined"!==typeof i&&this[t]!==i)return this[t]=i,!0},_moveLeft:function(e,t){return this._move(e,t,"Left")},_moveRight:function(e,t){return this._move(e,t,"Right")},moveCursorLeftWithoutShift:function(e){var t=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&0!==this.selectionStart&&(t=this._moveLeft(e,"selectionStart")),this.selectionEnd=this.selectionStart,t},moveCursorLeftWithShift:function(e){return"right"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveLeft(e,"selectionEnd"):0!==this.selectionStart?(this._selectionDirection="left",this._moveLeft(e,"selectionStart")):void 0},moveCursorRight:function(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",e)},_moveCursorLeftOrRight:function(e,t){var n="moveCursor"+e+"With";this._currentCursorOpacity=1,t.shiftKey?n+="Shift":n+="outShift",this[n](t)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(e){return"left"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveRight(e,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection="right",this._moveRight(e,"selectionEnd")):void 0},moveCursorRightWithoutShift:function(e){var t=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(t=this._moveRight(e,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,t},removeChars:function(e,t){"undefined"===typeof t&&(t=e+1),this.removeStyleFromTo(e,t),this._text.splice(e,t-e),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(e,t,n,i){"undefined"===typeof i&&(i=n),i>n&&this.removeStyleFromTo(n,i);var a=r.util.string.graphemeSplit(e);this.insertNewStyleBlock(a,n,t),this._text=[].concat(this._text.slice(0,n),a,this._text.slice(i)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var e=r.util.toFixed,t=/  +/g;r.util.object.extend(r.Text.prototype,{_toSVG:function(){var e=this._getSVGLeftTopOffsets(),t=this._getSVGTextAndBg(e.textTop,e.textLeft);return this._wrapSVGTextAndBg(t)},toSVG:function(e){return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(e){var t=this.getSvgTextDecoration(this);return[e.textBgRects.join(""),'\t\t<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",t?'text-decoration="'+t+'" ':"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",e.textSpans.join(""),"</text>\n"]},_getSVGTextAndBg:function(e,t){var n,i=[],r=[],a=e;this._setSVGBg(r);for(var o=0,s=this._textLines.length;o<s;o++)n=this._getLineLeftOffset(o),(this.textBackgroundColor||this.styleHas("textBackgroundColor",o))&&this._setSVGTextLineBg(r,o,t+n,a),this._setSVGTextLineText(i,o,t+n,a),a+=this.getHeightOfLine(o);return{textSpans:i,textBgRects:r}},_createTextCharSpan:function(n,i,a,o){var s=n!==n.trim()||n.match(t),l=this.getSvgSpanStyles(i,s),c=l?'style="'+l+'"':"",u=i.deltaY,g="",d=r.Object.NUM_FRACTION_DIGITS;return u&&(g=' dy="'+e(u,d)+'" '),['<tspan x="',e(a,d),'" y="',e(o,d),'" ',g,c,">",r.util.string.escapeXml(n),"</tspan>"].join("")},_setSVGTextLineText:function(e,t,n,i){var a,o,s,l,c,u=this.getHeightOfLine(t),g=-1!==this.textAlign.indexOf("justify"),d="",h=0,f=this._textLines[t];i+=u*(1-this._fontSizeFraction)/this.lineHeight;for(var p=0,I=f.length-1;p<=I;p++)c=p===I||this.charSpacing,d+=f[p],s=this.__charBounds[t][p],0===h?(n+=s.kernedWidth-s.width,h+=s.width):h+=s.kernedWidth,g&&!c&&this._reSpaceAndTab.test(f[p])&&(c=!0),c||(a=a||this.getCompleteStyleDeclaration(t,p),o=this.getCompleteStyleDeclaration(t,p+1),c=r.util.hasStyleChanged(a,o,!0)),c&&(l=this._getStyleDeclaration(t,p)||{},e.push(this._createTextCharSpan(d,l,n,i)),d="",a=o,n+=h,h=0)},_pushTextBgRect:function(t,n,i,a,o,s){var l=r.Object.NUM_FRACTION_DIGITS;t.push("\t\t<rect ",this._getFillAttributes(n),' x="',e(i,l),'" y="',e(a,l),'" width="',e(o,l),'" height="',e(s,l),'"></rect>\n')},_setSVGTextLineBg:function(e,t,n,i){for(var r,a,o=this._textLines[t],s=this.getHeightOfLine(t)/this.lineHeight,l=0,c=0,u=this.getValueOfPropertyAt(t,0,"textBackgroundColor"),g=0,d=o.length;g<d;g++)r=this.__charBounds[t][g],(a=this.getValueOfPropertyAt(t,g,"textBackgroundColor"))!==u?(u&&this._pushTextBgRect(e,u,n+c,i,l,s),c=r.left,l=r.width,u=a):l+=r.kernedWidth;a&&this._pushTextBgRect(e,a,n+c,i,l,s)},_getFillAttributes:function(e){var t=e&&"string"===typeof e?new r.Color(e):"";return t&&t.getSource()&&1!==t.getAlpha()?'opacity="'+t.getAlpha()+'" fill="'+t.setAlpha(1).toRgb()+'"':'fill="'+e+'"'},_getSVGLineTopOffset:function(e){for(var t,n=0,i=0;i<e;i++)n+=this.getHeightOfLine(i);return t=this.getHeightOfLine(i),{lineTop:n,offset:(this._fontSizeMult-this._fontSizeFraction)*t/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(e){return r.Object.prototype.getSvgStyles.call(this,e)+" white-space: pre;"}})}(),function(e){"use strict";var t=e.fabric||(e.fabric={});t.Textbox=t.util.createClass(t.IText,t.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:t.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(e){for(var t=0,n=0,i=0,r={},a=0;a<e.graphemeLines.length;a++)"\n"===e.graphemeText[i]&&a>0?(n=0,i++,t++):!this.splitByGrapheme&&this._reSpaceAndTab.test(e.graphemeText[i])&&a>0&&(n++,i++),r[a]={line:t,offset:n},i+=e.graphemeLines[a].length,n+=e.graphemeLines[a].length;return r},styleHas:function(e,n){if(this._styleMap&&!this.isWrapping){var i=this._styleMap[n];i&&(n=i.line)}return t.Text.prototype.styleHas.call(this,e,n)},isEmptyStyles:function(e){if(!this.styles)return!0;var t,n,i=0,r=!1,a=this._styleMap[e],o=this._styleMap[e+1];for(var s in a&&(e=a.line,i=a.offset),o&&(r=o.line===e,t=o.offset),n="undefined"===typeof e?this.styles:{line:this.styles[e]})for(var l in n[s])if(l>=i&&(!r||l<t))for(var c in n[s][l])return!1;return!0},_getStyleDeclaration:function(e,t){if(this._styleMap&&!this.isWrapping){var n=this._styleMap[e];if(!n)return null;e=n.line,t=n.offset+t}return this.callSuper("_getStyleDeclaration",e,t)},_setStyleDeclaration:function(e,t,n){var i=this._styleMap[e];e=i.line,t=i.offset+t,this.styles[e][t]=n},_deleteStyleDeclaration:function(e,t){var n=this._styleMap[e];e=n.line,t=n.offset+t,delete this.styles[e][t]},_getLineStyle:function(e){var t=this._styleMap[e];return!!this.styles[t.line]},_setLineStyle:function(e){var t=this._styleMap[e];this.styles[t.line]={}},_wrapText:function(e,t){var n,i=[];for(this.isWrapping=!0,n=0;n<e.length;n++)i=i.concat(this._wrapLine(e[n],n,t));return this.isWrapping=!1,i},_measureWord:function(e,t,n){var i,r=0;n=n||0;for(var a=0,o=e.length;a<o;a++){r+=this._getGraphemeBox(e[a],t,a+n,i,true).kernedWidth,i=e[a]}return r},_wrapLine:function(e,n,i,r){var a=0,o=this.splitByGrapheme,s=[],l=[],c=o?t.util.string.graphemeSplit(e):e.split(this._wordJoiners),u="",g=0,d=o?"":" ",h=0,f=0,p=0,I=!0,C=this._getWidthOfCharSpacing();r=r||0;0===c.length&&c.push([]),i-=r;for(var m=0;m<c.length;m++)u=o?c[m]:t.util.string.graphemeSplit(c[m]),h=this._measureWord(u,n,g),g+=u.length,(a+=f+h-C)>i&&!I?(s.push(l),l=[],a=h,I=!0):a+=C,I||o||l.push(d),l=l.concat(u),f=o?0:this._measureWord([d],n,g),g++,I=!1,h>p&&(p=h);return m&&s.push(l),p+r>this.dynamicMinWidth&&(this.dynamicMinWidth=p-C+r),s},isEndOfWrapping:function(e){return!this._styleMap[e+1]||this._styleMap[e+1].line!==this._styleMap[e].line},missingNewlineOffset:function(e){return this.splitByGrapheme?this.isEndOfWrapping(e)?1:0:1},_splitTextIntoLines:function(e){for(var n=t.Text.prototype._splitTextIntoLines.call(this,e),i=this._wrapText(n.lines,this.width),r=new Array(i.length),a=0;a<i.length;a++)r[a]=i[a].join("");return n.lines=r,n.graphemeLines=i,n},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var e={};for(var t in this._styleMap)this._textLines[t]&&(e[this._styleMap[t].line]=1);for(var t in this.styles)e[t]||delete this.styles[t]},toObject:function(e){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(e))}}),t.Textbox.fromObject=function(e,n){var i=t.util.stylesFromArray(e.styles,e.text),r=Object.assign({},e,{styles:i});return t.Object._fromObject("Textbox",r,n,"text")}}(t),function(){var e=r.controlsUtils,t=e.scaleSkewCursorStyleHandler,n=e.scaleCursorStyleHandler,i=e.scalingEqually,a=e.scalingYOrSkewingX,o=e.scalingXOrSkewingY,s=e.scaleOrSkewActionName,l=r.Object.prototype.controls;if(l.ml=new r.Control({x:-.5,y:0,cursorStyleHandler:t,actionHandler:o,getActionName:s}),l.mr=new r.Control({x:.5,y:0,cursorStyleHandler:t,actionHandler:o,getActionName:s}),l.mb=new r.Control({x:0,y:.5,cursorStyleHandler:t,actionHandler:a,getActionName:s}),l.mt=new r.Control({x:0,y:-.5,cursorStyleHandler:t,actionHandler:a,getActionName:s}),l.tl=new r.Control({x:-.5,y:-.5,cursorStyleHandler:n,actionHandler:i}),l.tr=new r.Control({x:.5,y:-.5,cursorStyleHandler:n,actionHandler:i}),l.bl=new r.Control({x:-.5,y:.5,cursorStyleHandler:n,actionHandler:i}),l.br=new r.Control({x:.5,y:.5,cursorStyleHandler:n,actionHandler:i}),l.mtr=new r.Control({x:0,y:-.5,actionHandler:e.rotationWithSnapping,cursorStyleHandler:e.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),r.Textbox){var c=r.Textbox.prototype.controls={};c.mtr=l.mtr,c.tr=l.tr,c.br=l.br,c.tl=l.tl,c.bl=l.bl,c.mt=l.mt,c.mb=l.mb,c.mr=new r.Control({x:.5,y:0,actionHandler:e.changeWidth,cursorStyleHandler:t,actionName:"resizing"}),c.ml=new r.Control({x:-.5,y:0,actionHandler:e.changeWidth,cursorStyleHandler:t,actionName:"resizing"})}}()},8845:function(e){"use strict";e.exports=function(e,t,n){for(var i in e)if(!1===t.call(n,e[i],i,e))break}},9944:function(e){function t(e){return e?Array.isArray(e)?e.join("."):e:""}e.exports=function(e,n,i,r,a){if(null===(o=e)||"object"!==typeof o&&"function"!==typeof o||!n)return e;var o;if(n=t(n),i&&(n+="."+t(i)),r&&(n+="."+t(r)),a&&(n+="."+t(a)),n in e)return e[n];for(var s=n.split("."),l=s.length,c=-1;e&&++c<l;){for(var u=s[c];"\\"===u[u.length-1];)u=u.slice(0,-1)+"."+s[++c];e=e[u]}return e}},2110:function(e,t,n){"use strict";var i=n(8309),r={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(e){return i.isMemo(e)?o:s[e.$$typeof]||r}s[i.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[i.Memo]=o;var c=Object.defineProperty,u=Object.getOwnPropertyNames,g=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,f=Object.prototype;e.exports=function e(t,n,i){if("string"!==typeof n){if(f){var r=h(n);r&&r!==f&&e(t,r,i)}var o=u(n);g&&(o=o.concat(g(n)));for(var s=l(t),p=l(n),I=0;I<o.length;++I){var C=o[I];if(!a[C]&&(!i||!i[C])&&(!p||!p[C])&&(!s||!s[C])){var m=d(n,C);try{c(t,C,m)}catch(v){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,i=n?Symbol.for("react.element"):60103,r=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,g=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,h=n?Symbol.for("react.suspense"):60113,f=n?Symbol.for("react.suspense_list"):60120,p=n?Symbol.for("react.memo"):60115,I=n?Symbol.for("react.lazy"):60116,C=n?Symbol.for("react.block"):60121,m=n?Symbol.for("react.fundamental"):60117,v=n?Symbol.for("react.responder"):60118,A=n?Symbol.for("react.scope"):60119;function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case u:case g:case a:case s:case o:case h:return e;default:switch(e=e&&e.$$typeof){case c:case d:case I:case p:case l:return e;default:return t}}case r:return t}}}function y(e){return b(e)===g}t.AsyncMode=u,t.ConcurrentMode=g,t.ContextConsumer=c,t.ContextProvider=l,t.Element=i,t.ForwardRef=d,t.Fragment=a,t.Lazy=I,t.Memo=p,t.Portal=r,t.Profiler=s,t.StrictMode=o,t.Suspense=h,t.isAsyncMode=function(e){return y(e)||b(e)===u},t.isConcurrentMode=y,t.isContextConsumer=function(e){return b(e)===c},t.isContextProvider=function(e){return b(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===i},t.isForwardRef=function(e){return b(e)===d},t.isFragment=function(e){return b(e)===a},t.isLazy=function(e){return b(e)===I},t.isMemo=function(e){return b(e)===p},t.isPortal=function(e){return b(e)===r},t.isProfiler=function(e){return b(e)===s},t.isStrictMode=function(e){return b(e)===o},t.isSuspense=function(e){return b(e)===h},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===g||e===s||e===o||e===h||e===f||"object"===typeof e&&null!==e&&(e.$$typeof===I||e.$$typeof===p||e.$$typeof===l||e.$$typeof===c||e.$$typeof===d||e.$$typeof===m||e.$$typeof===v||e.$$typeof===A||e.$$typeof===C)},t.typeOf=b},8309:function(e,t,n){"use strict";e.exports=n(746)},9105:function(e,t,n){"use strict";var i=n(4807);e.exports=function(e){return i(e)||"function"===typeof e||Array.isArray(e)}},4807:function(e,t,n){"use strict";var i=n(8863);function r(e){return!0===i(e)&&"[object Object]"===Object.prototype.toString.call(e)}e.exports=function(e){var t,n;return!1!==r(e)&&("function"===typeof(t=e.constructor)&&(!1!==r(n=t.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf")))}},1571:function(e){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},8863:function(e){"use strict";e.exports=function(e){return null!=e&&"object"===typeof e&&!1===Array.isArray(e)}},3881:function(e,t,n){var i="Expected a function",r=NaN,a="[object Symbol]",o=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt,g="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,d="object"==typeof self&&self&&self.Object===Object&&self,h=g||d||Function("return this")(),f=Object.prototype.toString,p=Math.max,I=Math.min,C=function(){return h.Date.now()};function m(e,t,n){var r,a,o,s,l,c,u=0,g=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError(i);function f(t){var n=r,i=a;return r=a=void 0,u=t,s=e.apply(i,n)}function m(e){var n=e-c;return void 0===c||n>=t||n<0||d&&e-u>=o}function b(){var e=C();if(m(e))return y(e);l=setTimeout(b,function(e){var n=t-(e-c);return d?I(n,o-(e-u)):n}(e))}function y(e){return l=void 0,h&&r?f(e):(r=a=void 0,s)}function G(){var e=C(),n=m(e);if(r=arguments,a=this,c=e,n){if(void 0===l)return function(e){return u=e,l=setTimeout(b,t),g?f(e):s}(c);if(d)return l=setTimeout(b,t),f(c)}return void 0===l&&(l=setTimeout(b,t)),s}return t=A(t)||0,v(n)&&(g=!!n.leading,o=(d="maxWait"in n)?p(A(n.maxWait)||0,t):o,h="trailing"in n?!!n.trailing:h),G.cancel=function(){void 0!==l&&clearTimeout(l),u=0,r=c=a=l=void 0},G.flush=function(){return void 0===l?s:y(C())},G}function v(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function A(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&f.call(e)==a}(e))return r;if(v(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=v(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(o,"");var n=l.test(e);return n||c.test(e)?u(e.slice(2),n?2:8):s.test(e)?r:+e}e.exports=function(e,t,n){var r=!0,a=!0;if("function"!=typeof e)throw new TypeError(i);return v(n)&&(r="leading"in n?!!n.leading:r,a="trailing"in n?!!n.trailing:a),m(e,t,{leading:r,maxWait:t,trailing:a})}},8089:function(e,t,n){"use strict";var i=n(9105),r=n(7046),a=n(9944),o=n(7809);e.exports=function(e,t,n){if(!i(e))throw new TypeError("expected an object");if("string"!==typeof t||null==n)return r.apply(null,arguments);if("string"===typeof n)return o(e,t,n),e;var s=a(e,t);return i(n)&&i(s)&&(n=r({},s,n)),o(e,t,n),e}},7046:function(e,t,n){"use strict";var i=n(9105),r=n(8845);function a(e,t){for(var n=arguments.length,i=0;++i<n;){var a=arguments[i];s(a)&&r(a,o,e)}return e}function o(e,t){if(function(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e}(t)){var n=this[t];s(e)&&s(n)?a(n,e):this[t]=e}}function s(e){return i(e)&&!Array.isArray(e)}e.exports=a},1725:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(e){i[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(r){return!1}}()?Object.assign:function(e,r){for(var a,o,s=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var c in a=Object(arguments[l]))n.call(a,c)&&(s[c]=a[c]);if(t){o=t(a);for(var u=0;u<o.length;u++)i.call(a,o[u])&&(s[o[u]]=a[o[u]])}}return s}},6151:function(e,t,n){var i=n(1571);e.exports=h,e.exports.parse=a,e.exports.compile=function(e,t){return s(a(e,t),t)},e.exports.tokensToFunction=s,e.exports.tokensToRegExp=d;var r=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function a(e,t){for(var n,i=[],a=0,o=0,s="",u=t&&t.delimiter||"/";null!=(n=r.exec(e));){var g=n[0],d=n[1],h=n.index;if(s+=e.slice(o,h),o=h+g.length,d)s+=d[1];else{var f=e[o],p=n[2],I=n[3],C=n[4],m=n[5],v=n[6],A=n[7];s&&(i.push(s),s="");var b=null!=p&&null!=f&&f!==p,y="+"===v||"*"===v,G="?"===v||"*"===v,w=n[2]||u,B=C||m;i.push({name:I||a++,prefix:p||"",delimiter:w,optional:G,repeat:y,partial:b,asterisk:!!A,pattern:B?c(B):A?".*":"[^"+l(w)+"]+?"})}}return o<e.length&&(s+=e.substr(o)),s&&i.push(s),i}function o(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function s(e,t){for(var n=new Array(e.length),r=0;r<e.length;r++)"object"===typeof e[r]&&(n[r]=new RegExp("^(?:"+e[r].pattern+")$",g(t)));return function(t,r){for(var a="",s=t||{},l=(r||{}).pretty?o:encodeURIComponent,c=0;c<e.length;c++){var u=e[c];if("string"!==typeof u){var g,d=s[u.name];if(null==d){if(u.optional){u.partial&&(a+=u.prefix);continue}throw new TypeError('Expected "'+u.name+'" to be defined')}if(i(d)){if(!u.repeat)throw new TypeError('Expected "'+u.name+'" to not repeat, but received `'+JSON.stringify(d)+"`");if(0===d.length){if(u.optional)continue;throw new TypeError('Expected "'+u.name+'" to not be empty')}for(var h=0;h<d.length;h++){if(g=l(d[h]),!n[c].test(g))throw new TypeError('Expected all "'+u.name+'" to match "'+u.pattern+'", but received `'+JSON.stringify(g)+"`");a+=(0===h?u.prefix:u.delimiter)+g}}else{if(g=u.asterisk?encodeURI(d).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):l(d),!n[c].test(g))throw new TypeError('Expected "'+u.name+'" to match "'+u.pattern+'", but received "'+g+'"');a+=u.prefix+g}}else a+=u}return a}}function l(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function u(e,t){return e.keys=t,e}function g(e){return e&&e.sensitive?"":"i"}function d(e,t,n){i(t)||(n=t||n,t=[]);for(var r=(n=n||{}).strict,a=!1!==n.end,o="",s=0;s<e.length;s++){var c=e[s];if("string"===typeof c)o+=l(c);else{var d=l(c.prefix),h="(?:"+c.pattern+")";t.push(c),c.repeat&&(h+="(?:"+d+h+")*"),o+=h=c.optional?c.partial?d+"("+h+")?":"(?:"+d+"("+h+"))?":d+"("+h+")"}}var f=l(n.delimiter||"/"),p=o.slice(-f.length)===f;return r||(o=(p?o.slice(0,-f.length):o)+"(?:"+f+"(?=$))?"),o+=a?"$":r&&p?"":"(?="+f+"|$)",u(new RegExp("^"+o,g(n)),t)}function h(e,t,n){return i(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var i=0;i<n.length;i++)t.push({name:i,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return u(e,t)}(e,t):i(e)?function(e,t,n){for(var i=[],r=0;r<e.length;r++)i.push(h(e[r],t,n).source);return u(new RegExp("(?:"+i.join("|")+")",g(n)),t)}(e,t,n):function(e,t,n){return d(a(e,n),t,n)}(e,t,n)}},888:function(e,t,n){"use strict";var i=n(9047);function r(){}function a(){}a.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,a,o){if(o!==i){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:r};return n.PropTypes=n,n}},2007:function(e,t,n){e.exports=n(888)()},9047:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},4463:function(e,t,n){"use strict";var i=n(2791),r=n(5585);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),g=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},f={};function p(e,t,n,i,r,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var I={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){I[e]=new p(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];I[t]=new p(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){I[e]=new p(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){I[e]=new p(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){I[e]=new p(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){I[e]=new p(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){I[e]=new p(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){I[e]=new p(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){I[e]=new p(e,5,!1,e.toLowerCase(),null,!1,!1)}));var C=/[\-:]([a-z])/g;function m(e){return e[1].toUpperCase()}function v(e,t,n,i){var r=I.hasOwnProperty(t)?I[t]:null;(null!==r?0!==r.type:i||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,i){if(null===t||"undefined"===typeof t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,i)&&(n=null),i||null===r?function(e){return!!g.call(f,e)||!g.call(h,e)&&(d.test(e)?f[e]=!0:(h[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,i=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(C,m);I[t]=new p(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(C,m);I[t]=new p(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(C,m);I[t]=new p(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){I[e]=new p(e,1,!1,e.toLowerCase(),null,!1,!1)})),I.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){I[e]=new p(e,1,!1,e.toLowerCase(),null,!0,!0)}));var A=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),y=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),S=Symbol.for("react.context"),Z=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),W=Symbol.for("react.memo"),M=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var V=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var F=Symbol.iterator;function N(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=F&&e[F]||e["@@iterator"])?e:null}var H,T=Object.assign;function X(e){if(void 0===H)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);H=t&&t[1]||""}return"\n"+H+e}var Y=!1;function E(e,t){if(!e||Y)return"";Y=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var i=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){i=c}e.call(t.prototype)}else{try{throw Error()}catch(c){i=c}e()}}catch(c){if(c&&i&&"string"===typeof c.stack){for(var r=c.stack.split("\n"),a=i.stack.split("\n"),o=r.length-1,s=a.length-1;1<=o&&0<=s&&r[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(r[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||r[o]!==a[s]){var l="\n"+r[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=s);break}}}finally{Y=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?X(e):""}function z(e){switch(e.tag){case 5:return X(e.type);case 16:return X("Lazy");case 13:return X("Suspense");case 19:return X("SuspenseList");case 0:case 2:case 15:return e=E(e.type,!1);case 11:return e=E(e.type.render,!1);case 1:return e=E(e.type,!0);default:return""}}function L(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case G:return"Fragment";case y:return"Portal";case B:return"Profiler";case w:return"StrictMode";case k:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case S:return(e.displayName||"Context")+".Consumer";case x:return(e._context.displayName||"Context")+".Provider";case Z:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case W:return null!==(t=e.displayName||null)?t:L(e.type)||"Memo";case M:t=e._payload,e=e._init;try{return L(e(t))}catch(n){}}return null}function K(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return L(t);case 8:return t===w?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function _(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function P(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function D(e){e._valueTracker||(e._valueTracker=function(e){var t=P(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){i=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function O(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=P(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function U(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function j(e,t){var n=t.checked;return T({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=_(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&v(e,"checked",t,!1)}function q(e,t){Q(e,t);var n=_(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,_(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&U(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+_(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return T({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:_(n)}}function ae(e,t){var n=_(t.value),i=_(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,i,r){MSApp.execUnsafeLocalFunction((function(){return e(t,n)}))}:e}((function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}));function ge(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},he=["Webkit","ms","Moz","O"];function fe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function pe(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=fe(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}Object.keys(de).forEach((function(e){he.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var Ie=T({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ce(e,t){if(t){if(Ie[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function me(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ve=null;function Ae(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var be=null,ye=null,Ge=null;function we(e){if(e=pr(e)){if("function"!==typeof be)throw Error(a(280));var t=e.stateNode;t&&(t=Cr(t),be(e.stateNode,e.type,t))}}function Be(e){ye?Ge?Ge.push(e):Ge=[e]:ye=e}function xe(){if(ye){var e=ye,t=Ge;if(Ge=ye=null,we(e),t)for(e=0;e<t.length;e++)we(t[e])}}function Se(e,t){return e(t)}function Ze(){}var ke=!1;function Re(e,t,n){if(ke)return e(t,n);ke=!0;try{return Se(e,t,n)}finally{ke=!1,(null!==ye||null!==Ge)&&(Ze(),xe())}}function We(e,t){var n=e.stateNode;if(null===n)return null;var i=Cr(n);if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Me=!1;if(u)try{var Ve={};Object.defineProperty(Ve,"passive",{get:function(){Me=!0}}),window.addEventListener("test",Ve,Ve),window.removeEventListener("test",Ve,Ve)}catch(tu){Me=!1}function Fe(e,t,n,i,r,a,o,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Ne=!1,He=null,Te=!1,Xe=null,Ye={onError:function(e){Ne=!0,He=e}};function Ee(e,t,n,i,r,a,o,s,l){Ne=!1,He=null,Fe.apply(Ye,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Le(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(ze(e)!==e)throw Error(a(188))}function _e(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var o=r.alternate;if(null===o){if(null!==(i=r.return)){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return Ke(r),e;if(o===i)return Ke(r),t;o=o.sibling}throw Error(a(188))}if(n.return!==i.return)n=r,i=o;else{for(var s=!1,l=r.child;l;){if(l===n){s=!0,n=r,i=o;break}if(l===i){s=!0,i=r,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,i=r;break}if(l===i){s=!0,i=o,n=r;break}l=l.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==i)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Pe(e):null}function Pe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Pe(e);if(null!==t)return t;e=e.sibling}return null}var De=r.unstable_scheduleCallback,Oe=r.unstable_cancelCallback,Ue=r.unstable_shouldYield,je=r.unstable_requestPaint,Je=r.unstable_now,Qe=r.unstable_getCurrentPriorityLevel,qe=r.unstable_ImmediatePriority,$e=r.unstable_UserBlockingPriority,et=r.unstable_NormalPriority,tt=r.unstable_LowPriority,nt=r.unstable_IdlePriority,it=null,rt=null;var at=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ot(e)/st|0)|0},ot=Math.log,st=Math.LN2;var lt=64,ct=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function gt(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,r=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~r;0!==s?i=ut(s):0!==(a&=o)&&(i=ut(a))}else 0!==(o=n&~r)?i=ut(o):0!==a&&(i=ut(a));if(0===i)return 0;if(0!==t&&t!==i&&0===(t&r)&&((r=i&-i)>=(a=t&-t)||16===r&&0!==(4194240&a)))return t;if(0!==(4&i)&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)r=1<<(n=31-at(t)),i|=e[n],t&=~r;return i}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ht(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ft(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function pt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function It(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function Ct(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-at(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}var mt=0;function vt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var At,bt,yt,Gt,wt,Bt=!1,xt=[],St=null,Zt=null,kt=null,Rt=new Map,Wt=new Map,Mt=[],Vt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ft(e,t){switch(e){case"focusin":case"focusout":St=null;break;case"dragenter":case"dragleave":Zt=null;break;case"mouseover":case"mouseout":kt=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wt.delete(t.pointerId)}}function Nt(e,t,n,i,r,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:a,targetContainers:[r]},null!==t&&(null!==(t=pr(t))&&bt(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function Ht(e){var t=fr(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Le(n)))return e.blockedOn=t,void wt(e.priority,(function(){yt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Tt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ut(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=pr(n))&&bt(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);ve=i,n.target.dispatchEvent(i),ve=null,t.shift()}return!0}function Xt(e,t,n){Tt(e)&&n.delete(t)}function Yt(){Bt=!1,null!==St&&Tt(St)&&(St=null),null!==Zt&&Tt(Zt)&&(Zt=null),null!==kt&&Tt(kt)&&(kt=null),Rt.forEach(Xt),Wt.forEach(Xt)}function Et(e,t){e.blockedOn===t&&(e.blockedOn=null,Bt||(Bt=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Yt)))}function zt(e){function t(t){return Et(t,e)}if(0<xt.length){Et(xt[0],e);for(var n=1;n<xt.length;n++){var i=xt[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==St&&Et(St,e),null!==Zt&&Et(Zt,e),null!==kt&&Et(kt,e),Rt.forEach(t),Wt.forEach(t),n=0;n<Mt.length;n++)(i=Mt[n]).blockedOn===e&&(i.blockedOn=null);for(;0<Mt.length&&null===(n=Mt[0]).blockedOn;)Ht(n),null===n.blockedOn&&Mt.shift()}var Lt=A.ReactCurrentBatchConfig,Kt=!0;function _t(e,t,n,i){var r=mt,a=Lt.transition;Lt.transition=null;try{mt=1,Dt(e,t,n,i)}finally{mt=r,Lt.transition=a}}function Pt(e,t,n,i){var r=mt,a=Lt.transition;Lt.transition=null;try{mt=4,Dt(e,t,n,i)}finally{mt=r,Lt.transition=a}}function Dt(e,t,n,i){if(Kt){var r=Ut(e,t,n,i);if(null===r)Ei(e,t,i,Ot,n),Ft(e,i);else if(function(e,t,n,i,r){switch(t){case"focusin":return St=Nt(St,e,t,n,i,r),!0;case"dragenter":return Zt=Nt(Zt,e,t,n,i,r),!0;case"mouseover":return kt=Nt(kt,e,t,n,i,r),!0;case"pointerover":var a=r.pointerId;return Rt.set(a,Nt(Rt.get(a)||null,e,t,n,i,r)),!0;case"gotpointercapture":return a=r.pointerId,Wt.set(a,Nt(Wt.get(a)||null,e,t,n,i,r)),!0}return!1}(r,e,t,n,i))i.stopPropagation();else if(Ft(e,i),4&t&&-1<Vt.indexOf(e)){for(;null!==r;){var a=pr(r);if(null!==a&&At(a),null===(a=Ut(e,t,n,i))&&Ei(e,t,i,Ot,n),a===r)break;r=a}null!==r&&i.stopPropagation()}else Ei(e,t,i,null,n)}}var Ot=null;function Ut(e,t,n,i){if(Ot=null,null!==(e=fr(e=Ae(i))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Le(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ot=e,null}function jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case qe:return 1;case $e:return 4;case et:case tt:return 16;case nt:return 536870912;default:return 16}default:return 16}}var Jt=null,Qt=null,qt=null;function $t(){if(qt)return qt;var e,t,n=Qt,i=n.length,r="value"in Jt?Jt.value:Jt.textContent,a=r.length;for(e=0;e<i&&n[e]===r[e];e++);var o=i-e;for(t=1;t<=o&&n[i-t]===r[a-t];t++);return qt=r.slice(e,1<t?1-t:void 0)}function en(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function tn(){return!0}function nn(){return!1}function rn(e){function t(t,n,i,r,a){for(var o in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(r):r[o]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?tn:nn,this.isPropagationStopped=nn,this}return T(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=tn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=tn)},persist:function(){},isPersistent:tn}),t}var an,on,sn,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=rn(ln),un=T({},ln,{view:0,detail:0}),gn=rn(un),dn=T({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(an=e.screenX-sn.screenX,on=e.screenY-sn.screenY):on=an=0,sn=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),hn=rn(dn),fn=rn(T({},dn,{dataTransfer:0})),pn=rn(T({},un,{relatedTarget:0})),In=rn(T({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),Cn=rn(T({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),mn=rn(T({},ln,{data:0})),vn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},An={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=bn[e])&&!!t[e]}function Gn(){return yn}var wn=rn(T({},un,{key:function(e){if(e.key){var t=vn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=en(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?An[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gn,charCode:function(e){return"keypress"===e.type?en(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?en(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),Bn=rn(T({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),xn=rn(T({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gn})),Sn=rn(T({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),Zn=rn(T({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),kn=[9,13,27,32],Rn=u&&"CompositionEvent"in window,Wn=null;u&&"documentMode"in document&&(Wn=document.documentMode);var Mn=u&&"TextEvent"in window&&!Wn,Vn=u&&(!Rn||Wn&&8<Wn&&11>=Wn),Fn=String.fromCharCode(32),Nn=!1;function Hn(e,t){switch(e){case"keyup":return-1!==kn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Xn=!1;var Yn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function En(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Yn[e.type]:"textarea"===t}function zn(e,t,n,i){Be(i),0<(t=Li(t,"onChange")).length&&(n=new cn("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Ln=null,Kn=null;function _n(e){Fi(e,0)}function Pn(e){if(O(Ir(e)))return e}function Dn(e,t){if("change"===e)return t}var On=!1;if(u){var Un;if(u){var jn="oninput"in document;if(!jn){var Jn=document.createElement("div");Jn.setAttribute("oninput","return;"),jn="function"===typeof Jn.oninput}Un=jn}else Un=!1;On=Un&&(!document.documentMode||9<document.documentMode)}function Qn(){Ln&&(Ln.detachEvent("onpropertychange",qn),Kn=Ln=null)}function qn(e){if("value"===e.propertyName&&Pn(Kn)){var t=[];zn(t,Kn,e,Ae(e)),Re(_n,t)}}function $n(e,t,n){"focusin"===e?(Qn(),Kn=n,(Ln=t).attachEvent("onpropertychange",qn)):"focusout"===e&&Qn()}function ei(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Pn(Kn)}function ti(e,t){if("click"===e)return Pn(t)}function ni(e,t){if("input"===e||"change"===e)return Pn(t)}var ii="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ri(e,t){if(ii(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!g.call(t,r)||!ii(e[r],t[r]))return!1}return!0}function ai(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function oi(e,t){var n,i=ai(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=ai(i)}}function si(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?si(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function li(){for(var e=window,t=U();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=U((e=t.contentWindow).document)}return t}function ci(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function ui(e){var t=li(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&si(n.ownerDocument.documentElement,n)){if(null!==i&&ci(n))if(t=i.start,void 0===(e=i.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=n.textContent.length,a=Math.min(i.start,r);i=void 0===i.end?a:Math.min(i.end,r),!e.extend&&a>i&&(r=i,i=a,a=r),r=oi(n,a);var o=oi(n,i);r&&o&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),a>i?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gi=u&&"documentMode"in document&&11>=document.documentMode,di=null,hi=null,fi=null,pi=!1;function Ii(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;pi||null==di||di!==U(i)||("selectionStart"in(i=di)&&ci(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},fi&&ri(fi,i)||(fi=i,0<(i=Li(hi,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=di)))}function Ci(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var mi={animationend:Ci("Animation","AnimationEnd"),animationiteration:Ci("Animation","AnimationIteration"),animationstart:Ci("Animation","AnimationStart"),transitionend:Ci("Transition","TransitionEnd")},vi={},Ai={};function bi(e){if(vi[e])return vi[e];if(!mi[e])return e;var t,n=mi[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ai)return vi[e]=n[t];return e}u&&(Ai=document.createElement("div").style,"AnimationEvent"in window||(delete mi.animationend.animation,delete mi.animationiteration.animation,delete mi.animationstart.animation),"TransitionEvent"in window||delete mi.transitionend.transition);var yi=bi("animationend"),Gi=bi("animationiteration"),wi=bi("animationstart"),Bi=bi("transitionend"),xi=new Map,Si="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zi(e,t){xi.set(e,t),l(t,[e])}for(var ki=0;ki<Si.length;ki++){var Ri=Si[ki];Zi(Ri.toLowerCase(),"on"+(Ri[0].toUpperCase()+Ri.slice(1)))}Zi(yi,"onAnimationEnd"),Zi(Gi,"onAnimationIteration"),Zi(wi,"onAnimationStart"),Zi("dblclick","onDoubleClick"),Zi("focusin","onFocus"),Zi("focusout","onBlur"),Zi(Bi,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mi=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wi));function Vi(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,i,r,o,s,l,c){if(Ee.apply(this,arguments),Ne){if(!Ne)throw Error(a(198));var u=He;Ne=!1,He=null,Te||(Te=!0,Xe=u)}}(i,t,void 0,e),e.currentTarget=null}function Fi(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var a=void 0;if(t)for(var o=i.length-1;0<=o;o--){var s=i[o],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==a&&r.isPropagationStopped())break e;Vi(r,s,c),a=l}else for(o=0;o<i.length;o++){if(l=(s=i[o]).instance,c=s.currentTarget,s=s.listener,l!==a&&r.isPropagationStopped())break e;Vi(r,s,c),a=l}}}if(Te)throw e=Xe,Te=!1,Xe=null,e}function Ni(e,t){var n=t[gr];void 0===n&&(n=t[gr]=new Set);var i=e+"__bubble";n.has(i)||(Yi(t,e,2,!1),n.add(i))}function Hi(e,t,n){var i=0;t&&(i|=4),Yi(n,e,i,t)}var Ti="_reactListening"+Math.random().toString(36).slice(2);function Xi(e){if(!e[Ti]){e[Ti]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mi.has(t)||Hi(t,!1,e),Hi(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ti]||(t[Ti]=!0,Hi("selectionchange",!1,t))}}function Yi(e,t,n,i){switch(jt(t)){case 1:var r=_t;break;case 4:r=Pt;break;default:r=Dt}n=r.bind(null,t,n,e),r=void 0,!Me||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),i?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Ei(e,t,n,i,r){var a=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var o=i.tag;if(3===o||4===o){var s=i.stateNode.containerInfo;if(s===r||8===s.nodeType&&s.parentNode===r)break;if(4===o)for(o=i.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;o=o.return}for(;null!==s;){if(null===(o=fr(s)))return;if(5===(l=o.tag)||6===l){i=a=o;continue e}s=s.parentNode}}i=i.return}Re((function(){var i=a,r=Ae(n),o=[];e:{var s=xi.get(e);if(void 0!==s){var l=cn,c=e;switch(e){case"keypress":if(0===en(n))break e;case"keydown":case"keyup":l=wn;break;case"focusin":c="focus",l=pn;break;case"focusout":c="blur",l=pn;break;case"beforeblur":case"afterblur":l=pn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=hn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=fn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=xn;break;case yi:case Gi:case wi:l=In;break;case Bi:l=Sn;break;case"scroll":l=gn;break;case"wheel":l=Zn;break;case"copy":case"cut":case"paste":l=Cn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Bn}var u=0!==(4&t),g=!u&&"scroll"===e,d=u?null!==s?s+"Capture":null:s;u=[];for(var h,f=i;null!==f;){var p=(h=f).stateNode;if(5===h.tag&&null!==p&&(h=p,null!==d&&(null!=(p=We(f,d))&&u.push(zi(f,p,h)))),g)break;f=f.return}0<u.length&&(s=new l(s,c,null,n,r),o.push({event:s,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===ve||!(c=n.relatedTarget||n.fromElement)||!fr(c)&&!c[ur])&&(l||s)&&(s=r.window===r?r:(s=r.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=i,null!==(c=(c=n.relatedTarget||n.toElement)?fr(c):null)&&(c!==(g=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=i),l!==c)){if(u=hn,p="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=Bn,p="onPointerLeave",d="onPointerEnter",f="pointer"),g=null==l?s:Ir(l),h=null==c?s:Ir(c),(s=new u(p,f+"leave",l,n,r)).target=g,s.relatedTarget=h,p=null,fr(r)===i&&((u=new u(d,f+"enter",c,n,r)).target=h,u.relatedTarget=g,p=u),g=p,l&&c)e:{for(d=c,f=0,h=u=l;h;h=Ki(h))f++;for(h=0,p=d;p;p=Ki(p))h++;for(;0<f-h;)u=Ki(u),f--;for(;0<h-f;)d=Ki(d),h--;for(;f--;){if(u===d||null!==d&&u===d.alternate)break e;u=Ki(u),d=Ki(d)}u=null}else u=null;null!==l&&_i(o,s,l,u,!1),null!==c&&null!==g&&_i(o,g,c,u,!0)}if("select"===(l=(s=i?Ir(i):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var I=Dn;else if(En(s))if(On)I=ni;else{I=ei;var C=$n}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(I=ti);switch(I&&(I=I(e,i))?zn(o,I,n,r):(C&&C(e,s,i),"focusout"===e&&(C=s._wrapperState)&&C.controlled&&"number"===s.type&&ee(s,"number",s.value)),C=i?Ir(i):window,e){case"focusin":(En(C)||"true"===C.contentEditable)&&(di=C,hi=i,fi=null);break;case"focusout":fi=hi=di=null;break;case"mousedown":pi=!0;break;case"contextmenu":case"mouseup":case"dragend":pi=!1,Ii(o,n,r);break;case"selectionchange":if(gi)break;case"keydown":case"keyup":Ii(o,n,r)}var m;if(Rn)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Xn?Hn(e,n)&&(v="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(v="onCompositionStart");v&&(Vn&&"ko"!==n.locale&&(Xn||"onCompositionStart"!==v?"onCompositionEnd"===v&&Xn&&(m=$t()):(Qt="value"in(Jt=r)?Jt.value:Jt.textContent,Xn=!0)),0<(C=Li(i,v)).length&&(v=new mn(v,e,null,n,r),o.push({event:v,listeners:C}),m?v.data=m:null!==(m=Tn(n))&&(v.data=m))),(m=Mn?function(e,t){switch(e){case"compositionend":return Tn(t);case"keypress":return 32!==t.which?null:(Nn=!0,Fn);case"textInput":return(e=t.data)===Fn&&Nn?null:e;default:return null}}(e,n):function(e,t){if(Xn)return"compositionend"===e||!Rn&&Hn(e,t)?(e=$t(),qt=Qt=Jt=null,Xn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Vn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(i=Li(i,"onBeforeInput")).length&&(r=new mn("onBeforeInput","beforeinput",null,n,r),o.push({event:r,listeners:i}),r.data=m))}Fi(o,t)}))}function zi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Li(e,t){for(var n=t+"Capture",i=[];null!==e;){var r=e,a=r.stateNode;5===r.tag&&null!==a&&(r=a,null!=(a=We(e,n))&&i.unshift(zi(e,a,r)),null!=(a=We(e,t))&&i.push(zi(e,a,r))),e=e.return}return i}function Ki(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function _i(e,t,n,i,r){for(var a=t._reactName,o=[];null!==n&&n!==i;){var s=n,l=s.alternate,c=s.stateNode;if(null!==l&&l===i)break;5===s.tag&&null!==c&&(s=c,r?null!=(l=We(n,a))&&o.unshift(zi(n,l,s)):r||null!=(l=We(n,a))&&o.push(zi(n,l,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Pi=/\r\n?/g,Di=/\u0000|\uFFFD/g;function Oi(e){return("string"===typeof e?e:""+e).replace(Pi,"\n").replace(Di,"")}function Ui(e,t,n){if(t=Oi(t),Oi(e)!==t&&n)throw Error(a(425))}function ji(){}var Ji=null,Qi=null;function qi(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var $i="function"===typeof setTimeout?setTimeout:void 0,er="function"===typeof clearTimeout?clearTimeout:void 0,tr="function"===typeof Promise?Promise:void 0,nr="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof tr?function(e){return tr.resolve(null).then(e).catch(ir)}:$i;function ir(e){setTimeout((function(){throw e}))}function rr(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===i)return e.removeChild(r),void zt(t);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=r}while(n);zt(t)}function ar(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function or(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var sr=Math.random().toString(36).slice(2),lr="__reactFiber$"+sr,cr="__reactProps$"+sr,ur="__reactContainer$"+sr,gr="__reactEvents$"+sr,dr="__reactListeners$"+sr,hr="__reactHandles$"+sr;function fr(e){var t=e[lr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ur]||n[lr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=or(e);null!==e;){if(n=e[lr])return n;e=or(e)}return t}n=(e=n).parentNode}return null}function pr(e){return!(e=e[lr]||e[ur])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Ir(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function Cr(e){return e[cr]||null}var mr=[],vr=-1;function Ar(e){return{current:e}}function br(e){0>vr||(e.current=mr[vr],mr[vr]=null,vr--)}function yr(e,t){vr++,mr[vr]=e.current,e.current=t}var Gr={},wr=Ar(Gr),Br=Ar(!1),xr=Gr;function Sr(e,t){var n=e.type.contextTypes;if(!n)return Gr;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,a={};for(r in n)a[r]=t[r];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Zr(e){return null!==(e=e.childContextTypes)&&void 0!==e}function kr(){br(Br),br(wr)}function Rr(e,t,n){if(wr.current!==Gr)throw Error(a(168));yr(wr,t),yr(Br,n)}function Wr(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in t))throw Error(a(108,K(e)||"Unknown",r));return T({},n,i)}function Mr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Gr,xr=wr.current,yr(wr,e),yr(Br,Br.current),!0}function Vr(e,t,n){var i=e.stateNode;if(!i)throw Error(a(169));n?(e=Wr(e,t,xr),i.__reactInternalMemoizedMergedChildContext=e,br(Br),br(wr),yr(wr,e)):br(Br),yr(Br,n)}var Fr=null,Nr=!1,Hr=!1;function Tr(e){null===Fr?Fr=[e]:Fr.push(e)}function Xr(){if(!Hr&&null!==Fr){Hr=!0;var e=0,t=mt;try{var n=Fr;for(mt=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}Fr=null,Nr=!1}catch(r){throw null!==Fr&&(Fr=Fr.slice(e+1)),De(qe,Xr),r}finally{mt=t,Hr=!1}}return null}var Yr=[],Er=0,zr=null,Lr=0,Kr=[],_r=0,Pr=null,Dr=1,Or="";function Ur(e,t){Yr[Er++]=Lr,Yr[Er++]=zr,zr=e,Lr=t}function jr(e,t,n){Kr[_r++]=Dr,Kr[_r++]=Or,Kr[_r++]=Pr,Pr=e;var i=Dr;e=Or;var r=32-at(i)-1;i&=~(1<<r),n+=1;var a=32-at(t)+r;if(30<a){var o=r-r%5;a=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Dr=1<<32-at(t)+r|n<<r|i,Or=a+e}else Dr=1<<a|n<<r|i,Or=e}function Jr(e){null!==e.return&&(Ur(e,1),jr(e,1,0))}function Qr(e){for(;e===zr;)zr=Yr[--Er],Yr[Er]=null,Lr=Yr[--Er],Yr[Er]=null;for(;e===Pr;)Pr=Kr[--_r],Kr[_r]=null,Or=Kr[--_r],Kr[_r]=null,Dr=Kr[--_r],Kr[_r]=null}var qr=null,$r=null,ea=!1,ta=null;function na(e,t){var n=Zc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ia(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,qr=e,$r=ar(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,qr=e,$r=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Pr?{id:Dr,overflow:Or}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Zc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,qr=e,$r=null,!0);default:return!1}}function ra(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function aa(e){if(ea){var t=$r;if(t){var n=t;if(!ia(e,t)){if(ra(e))throw Error(a(418));t=ar(n.nextSibling);var i=qr;t&&ia(e,t)?na(i,n):(e.flags=-4097&e.flags|2,ea=!1,qr=e)}}else{if(ra(e))throw Error(a(418));e.flags=-4097&e.flags|2,ea=!1,qr=e}}}function oa(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;qr=e}function sa(e){if(e!==qr)return!1;if(!ea)return oa(e),ea=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!qi(e.type,e.memoizedProps)),t&&(t=$r)){if(ra(e))throw la(),Error(a(418));for(;t;)na(e,t),t=ar(t.nextSibling)}if(oa(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){$r=ar(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}$r=null}}else $r=qr?ar(e.stateNode.nextSibling):null;return!0}function la(){for(var e=$r;e;)e=ar(e.nextSibling)}function ca(){$r=qr=null,ea=!1}function ua(e){null===ta?ta=[e]:ta.push(e)}var ga=A.ReactCurrentBatchConfig;function da(e,t){if(e&&e.defaultProps){for(var n in t=T({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ha=Ar(null),fa=null,pa=null,Ia=null;function Ca(){Ia=pa=fa=null}function ma(e){var t=ha.current;br(ha),e._currentValue=t}function va(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Aa(e,t){fa=e,Ia=pa=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Is=!0),e.firstContext=null)}function ba(e){var t=e._currentValue;if(Ia!==e)if(e={context:e,memoizedValue:t,next:null},null===pa){if(null===fa)throw Error(a(308));pa=e,fa.dependencies={lanes:0,firstContext:e}}else pa=pa.next=e;return t}var ya=null;function Ga(e){null===ya?ya=[e]:ya.push(e)}function wa(e,t,n,i){var r=t.interleaved;return null===r?(n.next=n,Ga(t)):(n.next=r.next,r.next=n),t.interleaved=n,Ba(e,i)}function Ba(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var xa=!1;function Sa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Za(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ka(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ra(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&Bl)){var r=i.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),i.pending=t,Ba(e,n)}return null===(r=i.interleaved)?(t.next=t,Ga(i)):(t.next=r.next,r.next=t),i.interleaved=t,Ba(e,n)}function Wa(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,Ct(e,n)}}function Ma(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?r=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?r=a=t:a=a.next=t}else r=a=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:a,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Va(e,t,n,i){var r=e.updateQueue;xa=!1;var a=r.firstBaseUpdate,o=r.lastBaseUpdate,s=r.shared.pending;if(null!==s){r.shared.pending=null;var l=s,c=l.next;l.next=null,null===o?a=c:o.next=c,o=l;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==a){var g=r.baseState;for(o=0,u=c=l=null,s=a;;){var d=s.lane,h=s.eventTime;if((i&d)===d){null!==u&&(u=u.next={eventTime:h,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var f=e,p=s;switch(d=t,h=n,p.tag){case 1:if("function"===typeof(f=p.payload)){g=f.call(h,g,d);break e}g=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(d="function"===typeof(f=p.payload)?f.call(h,g,d):f)||void 0===d)break e;g=T({},g,d);break e;case 2:xa=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(d=r.effects)?r.effects=[s]:d.push(s))}else h={eventTime:h,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=h,l=g):u=u.next=h,o|=d;if(null===(s=s.next)){if(null===(s=r.shared.pending))break;s=(d=s).next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}if(null===u&&(l=g),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,null!==(t=r.shared.interleaved)){r=t;do{o|=r.lane,r=r.next}while(r!==t)}else null===a&&(r.shared.lanes=0);Vl|=o,e.lanes=o,e.memoizedState=g}}function Fa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(a(191,r));r.call(i)}}}var Na=(new i.Component).refs;function Ha(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:T({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ta={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=Ql(),r=ql(e),a=ka(i,r);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Ra(e,a,r))&&($l(t,e,r,i),Wa(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=Ql(),r=ql(e),a=ka(i,r);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Ra(e,a,r))&&($l(t,e,r,i),Wa(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ql(),i=ql(e),r=ka(n,i);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=Ra(e,r,i))&&($l(t,e,i,n),Wa(t,e,i))}};function Xa(e,t,n,i,r,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!ri(n,i)||!ri(r,a))}function Ya(e,t,n){var i=!1,r=Gr,a=t.contextType;return"object"===typeof a&&null!==a?a=ba(a):(r=Zr(t)?xr:wr.current,a=(i=null!==(i=t.contextTypes)&&void 0!==i)?Sr(e,r):Gr),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ta,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ea(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Ta.enqueueReplaceState(t,t.state,null)}function za(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs=Na,Sa(e);var a=t.contextType;"object"===typeof a&&null!==a?r.context=ba(a):(a=Zr(t)?xr:wr.current,r.context=Sr(e,a)),r.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Ha(e,t,a,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&Ta.enqueueReplaceState(r,r.state,null),Va(e,n,r,i),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}function La(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var i=n.stateNode}if(!i)throw Error(a(147,e));var r=i,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=r.refs;t===Na&&(t=r.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ka(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function _a(e){return(0,e._init)(e._payload)}function Pa(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Rc(e,t)).index=0,e.sibling=null,e}function o(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,i){return null===t||6!==t.tag?((t=Fc(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function c(e,t,n,i){var a=n.type;return a===G?g(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===M&&_a(a)===t.type)?((i=r(t,n.props)).ref=La(e,t,n),i.return=e,i):((i=Wc(n.type,n.key,n.props,null,e.mode,i)).ref=La(e,t,n),i.return=e,i)}function u(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Nc(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function g(e,t,n,i,a){return null===t||7!==t.tag?((t=Mc(n,e.mode,i,a)).return=e,t):((t=r(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=Wc(t.type,t.key,t.props,null,e.mode,n)).ref=La(e,null,t),n.return=e,n;case y:return(t=Nc(t,e.mode,n)).return=e,t;case M:return d(e,(0,t._init)(t._payload),n)}if(te(t)||N(t))return(t=Mc(t,e.mode,n,null)).return=e,t;Ka(e,t)}return null}function h(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:l(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===r?c(e,t,n,i):null;case y:return n.key===r?u(e,t,n,i):null;case M:return h(e,t,(r=n._init)(n._payload),i)}if(te(n)||N(n))return null!==r?null:g(e,t,n,i,null);Ka(e,n)}return null}function f(e,t,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i)return l(t,e=e.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case b:return c(t,e=e.get(null===i.key?n:i.key)||null,i,r);case y:return u(t,e=e.get(null===i.key?n:i.key)||null,i,r);case M:return f(e,t,n,(0,i._init)(i._payload),r)}if(te(i)||N(i))return g(t,e=e.get(n)||null,i,r,null);Ka(t,i)}return null}function p(r,a,s,l){for(var c=null,u=null,g=a,p=a=0,I=null;null!==g&&p<s.length;p++){g.index>p?(I=g,g=null):I=g.sibling;var C=h(r,g,s[p],l);if(null===C){null===g&&(g=I);break}e&&g&&null===C.alternate&&t(r,g),a=o(C,a,p),null===u?c=C:u.sibling=C,u=C,g=I}if(p===s.length)return n(r,g),ea&&Ur(r,p),c;if(null===g){for(;p<s.length;p++)null!==(g=d(r,s[p],l))&&(a=o(g,a,p),null===u?c=g:u.sibling=g,u=g);return ea&&Ur(r,p),c}for(g=i(r,g);p<s.length;p++)null!==(I=f(g,r,p,s[p],l))&&(e&&null!==I.alternate&&g.delete(null===I.key?p:I.key),a=o(I,a,p),null===u?c=I:u.sibling=I,u=I);return e&&g.forEach((function(e){return t(r,e)})),ea&&Ur(r,p),c}function I(r,s,l,c){var u=N(l);if("function"!==typeof u)throw Error(a(150));if(null==(l=u.call(l)))throw Error(a(151));for(var g=u=null,p=s,I=s=0,C=null,m=l.next();null!==p&&!m.done;I++,m=l.next()){p.index>I?(C=p,p=null):C=p.sibling;var v=h(r,p,m.value,c);if(null===v){null===p&&(p=C);break}e&&p&&null===v.alternate&&t(r,p),s=o(v,s,I),null===g?u=v:g.sibling=v,g=v,p=C}if(m.done)return n(r,p),ea&&Ur(r,I),u;if(null===p){for(;!m.done;I++,m=l.next())null!==(m=d(r,m.value,c))&&(s=o(m,s,I),null===g?u=m:g.sibling=m,g=m);return ea&&Ur(r,I),u}for(p=i(r,p);!m.done;I++,m=l.next())null!==(m=f(p,r,I,m.value,c))&&(e&&null!==m.alternate&&p.delete(null===m.key?I:m.key),s=o(m,s,I),null===g?u=m:g.sibling=m,g=m);return e&&p.forEach((function(e){return t(r,e)})),ea&&Ur(r,I),u}return function e(i,a,o,l){if("object"===typeof o&&null!==o&&o.type===G&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case b:e:{for(var c=o.key,u=a;null!==u;){if(u.key===c){if((c=o.type)===G){if(7===u.tag){n(i,u.sibling),(a=r(u,o.props.children)).return=i,i=a;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===M&&_a(c)===u.type){n(i,u.sibling),(a=r(u,o.props)).ref=La(i,u,o),a.return=i,i=a;break e}n(i,u);break}t(i,u),u=u.sibling}o.type===G?((a=Mc(o.props.children,i.mode,l,o.key)).return=i,i=a):((l=Wc(o.type,o.key,o.props,null,i.mode,l)).ref=La(i,a,o),l.return=i,i=l)}return s(i);case y:e:{for(u=o.key;null!==a;){if(a.key===u){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(i,a.sibling),(a=r(a,o.children||[])).return=i,i=a;break e}n(i,a);break}t(i,a),a=a.sibling}(a=Nc(o,i.mode,l)).return=i,i=a}return s(i);case M:return e(i,a,(u=o._init)(o._payload),l)}if(te(o))return p(i,a,o,l);if(N(o))return I(i,a,o,l);Ka(i,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(i,a.sibling),(a=r(a,o)).return=i,i=a):(n(i,a),(a=Fc(o,i.mode,l)).return=i,i=a),s(i)):n(i,a)}}var Da=Pa(!0),Oa=Pa(!1),Ua={},ja=Ar(Ua),Ja=Ar(Ua),Qa=Ar(Ua);function qa(e){if(e===Ua)throw Error(a(174));return e}function $a(e,t){switch(yr(Qa,t),yr(Ja,e),yr(ja,Ua),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}br(ja),yr(ja,t)}function eo(){br(ja),br(Ja),br(Qa)}function to(e){qa(Qa.current);var t=qa(ja.current),n=le(t,e.type);t!==n&&(yr(Ja,e),yr(ja,n))}function no(e){Ja.current===e&&(br(ja),br(Ja))}var io=Ar(0);function ro(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ao=[];function oo(){for(var e=0;e<ao.length;e++)ao[e]._workInProgressVersionPrimary=null;ao.length=0}var so=A.ReactCurrentDispatcher,lo=A.ReactCurrentBatchConfig,co=0,uo=null,go=null,ho=null,fo=!1,po=!1,Io=0,Co=0;function mo(){throw Error(a(321))}function vo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ii(e[n],t[n]))return!1;return!0}function Ao(e,t,n,i,r,o){if(co=o,uo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,so.current=null===e||null===e.memoizedState?is:rs,e=n(i,r),po){o=0;do{if(po=!1,Io=0,25<=o)throw Error(a(301));o+=1,ho=go=null,t.updateQueue=null,so.current=as,e=n(i,r)}while(po)}if(so.current=ns,t=null!==go&&null!==go.next,co=0,ho=go=uo=null,fo=!1,t)throw Error(a(300));return e}function bo(){var e=0!==Io;return Io=0,e}function yo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ho?uo.memoizedState=ho=e:ho=ho.next=e,ho}function Go(){if(null===go){var e=uo.alternate;e=null!==e?e.memoizedState:null}else e=go.next;var t=null===ho?uo.memoizedState:ho.next;if(null!==t)ho=t,go=e;else{if(null===e)throw Error(a(310));e={memoizedState:(go=e).memoizedState,baseState:go.baseState,baseQueue:go.baseQueue,queue:go.queue,next:null},null===ho?uo.memoizedState=ho=e:ho=ho.next=e}return ho}function wo(e,t){return"function"===typeof t?t(e):t}function Bo(e){var t=Go(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var i=go,r=i.baseQueue,o=n.pending;if(null!==o){if(null!==r){var s=r.next;r.next=o.next,o.next=s}i.baseQueue=r=o,n.pending=null}if(null!==r){o=r.next,i=i.baseState;var l=s=null,c=null,u=o;do{var g=u.lane;if((co&g)===g)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:e(i,u.action);else{var d={lane:g,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,s=i):c=c.next=d,uo.lanes|=g,Vl|=g}u=u.next}while(null!==u&&u!==o);null===c?s=i:c.next=l,ii(i,t.memoizedState)||(Is=!0),t.memoizedState=i,t.baseState=s,t.baseQueue=c,n.lastRenderedState=i}if(null!==(e=n.interleaved)){r=e;do{o=r.lane,uo.lanes|=o,Vl|=o,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function xo(e){var t=Go(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,o=t.memoizedState;if(null!==r){n.pending=null;var s=r=r.next;do{o=e(o,s.action),s=s.next}while(s!==r);ii(o,t.memoizedState)||(Is=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,i]}function So(){}function Zo(e,t){var n=uo,i=Go(),r=t(),o=!ii(i.memoizedState,r);if(o&&(i.memoizedState=r,Is=!0),i=i.queue,Eo(Wo.bind(null,n,i,e),[e]),i.getSnapshot!==t||o||null!==ho&&1&ho.memoizedState.tag){if(n.flags|=2048,No(9,Ro.bind(null,n,i,r,t),void 0,null),null===xl)throw Error(a(349));0!==(30&co)||ko(n,t,r)}return r}function ko(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=uo.updateQueue)?(t={lastEffect:null,stores:null},uo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ro(e,t,n,i){t.value=n,t.getSnapshot=i,Mo(t)&&Vo(e)}function Wo(e,t,n){return n((function(){Mo(t)&&Vo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ii(e,n)}catch(i){return!0}}function Vo(e){var t=Ba(e,1);null!==t&&$l(t,e,1,-1)}function Fo(e){var t=yo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wo,lastRenderedState:e},t.queue=e,e=e.dispatch=qo.bind(null,uo,e),[t.memoizedState,e]}function No(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=uo.updateQueue)?(t={lastEffect:null,stores:null},uo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Ho(){return Go().memoizedState}function To(e,t,n,i){var r=yo();uo.flags|=e,r.memoizedState=No(1|t,n,void 0,void 0===i?null:i)}function Xo(e,t,n,i){var r=Go();i=void 0===i?null:i;var a=void 0;if(null!==go){var o=go.memoizedState;if(a=o.destroy,null!==i&&vo(i,o.deps))return void(r.memoizedState=No(t,n,a,i))}uo.flags|=e,r.memoizedState=No(1|t,n,a,i)}function Yo(e,t){return To(8390656,8,e,t)}function Eo(e,t){return Xo(2048,8,e,t)}function zo(e,t){return Xo(4,2,e,t)}function Lo(e,t){return Xo(4,4,e,t)}function Ko(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function _o(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Xo(4,4,Ko.bind(null,t,e),n)}function Po(){}function Do(e,t){var n=Go();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&vo(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Oo(e,t){var n=Go();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&vo(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Uo(e,t,n){return 0===(21&co)?(e.baseState&&(e.baseState=!1,Is=!0),e.memoizedState=n):(ii(n,t)||(n=ft(),uo.lanes|=n,Vl|=n,e.baseState=!0),t)}function jo(e,t){var n=mt;mt=0!==n&&4>n?n:4,e(!0);var i=lo.transition;lo.transition={};try{e(!1),t()}finally{mt=n,lo.transition=i}}function Jo(){return Go().memoizedState}function Qo(e,t,n){var i=ql(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},$o(e))es(t,n);else if(null!==(n=wa(e,t,n,i))){$l(n,e,i,Ql()),ts(n,t,i)}}function qo(e,t,n){var i=ql(e),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if($o(e))es(t,r);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(r.hasEagerState=!0,r.eagerState=s,ii(s,o)){var l=t.interleaved;return null===l?(r.next=r,Ga(t)):(r.next=l.next,l.next=r),void(t.interleaved=r)}}catch(c){}null!==(n=wa(e,t,r,i))&&($l(n,e,i,r=Ql()),ts(n,t,i))}}function $o(e){var t=e.alternate;return e===uo||null!==t&&t===uo}function es(e,t){po=fo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ts(e,t,n){if(0!==(4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,Ct(e,n)}}var ns={readContext:ba,useCallback:mo,useContext:mo,useEffect:mo,useImperativeHandle:mo,useInsertionEffect:mo,useLayoutEffect:mo,useMemo:mo,useReducer:mo,useRef:mo,useState:mo,useDebugValue:mo,useDeferredValue:mo,useTransition:mo,useMutableSource:mo,useSyncExternalStore:mo,useId:mo,unstable_isNewReconciler:!1},is={readContext:ba,useCallback:function(e,t){return yo().memoizedState=[e,void 0===t?null:t],e},useContext:ba,useEffect:Yo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,To(4194308,4,Ko.bind(null,t,e),n)},useLayoutEffect:function(e,t){return To(4194308,4,e,t)},useInsertionEffect:function(e,t){return To(4,2,e,t)},useMemo:function(e,t){var n=yo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=yo();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=Qo.bind(null,uo,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},yo().memoizedState=e},useState:Fo,useDebugValue:Po,useDeferredValue:function(e){return yo().memoizedState=e},useTransition:function(){var e=Fo(!1),t=e[0];return e=jo.bind(null,e[1]),yo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=uo,r=yo();if(ea){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===xl)throw Error(a(349));0!==(30&co)||ko(i,t,n)}r.memoizedState=n;var o={value:n,getSnapshot:t};return r.queue=o,Yo(Wo.bind(null,i,o,e),[e]),i.flags|=2048,No(9,Ro.bind(null,i,o,n,t),void 0,null),n},useId:function(){var e=yo(),t=xl.identifierPrefix;if(ea){var n=Or;t=":"+t+"R"+(n=(Dr&~(1<<32-at(Dr)-1)).toString(32)+n),0<(n=Io++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=Co++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},rs={readContext:ba,useCallback:Do,useContext:ba,useEffect:Eo,useImperativeHandle:_o,useInsertionEffect:zo,useLayoutEffect:Lo,useMemo:Oo,useReducer:Bo,useRef:Ho,useState:function(){return Bo(wo)},useDebugValue:Po,useDeferredValue:function(e){return Uo(Go(),go.memoizedState,e)},useTransition:function(){return[Bo(wo)[0],Go().memoizedState]},useMutableSource:So,useSyncExternalStore:Zo,useId:Jo,unstable_isNewReconciler:!1},as={readContext:ba,useCallback:Do,useContext:ba,useEffect:Eo,useImperativeHandle:_o,useInsertionEffect:zo,useLayoutEffect:Lo,useMemo:Oo,useReducer:xo,useRef:Ho,useState:function(){return xo(wo)},useDebugValue:Po,useDeferredValue:function(e){var t=Go();return null===go?t.memoizedState=e:Uo(t,go.memoizedState,e)},useTransition:function(){return[xo(wo)[0],Go().memoizedState]},useMutableSource:So,useSyncExternalStore:Zo,useId:Jo,unstable_isNewReconciler:!1};function os(e,t){try{var n="",i=t;do{n+=z(i),i=i.return}while(i);var r=n}catch(a){r="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:r,digest:null}}function ss(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ls(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var cs="function"===typeof WeakMap?WeakMap:Map;function us(e,t,n){(n=ka(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){zl||(zl=!0,Ll=i),ls(0,t)},n}function gs(e,t,n){(n=ka(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var r=t.value;n.payload=function(){return i(r)},n.callback=function(){ls(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){ls(0,t),"function"!==typeof i&&(null===Kl?Kl=new Set([this]):Kl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ds(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new cs;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(r.add(n),e=yc.bind(null,e,t,n),t.then(e,e))}function hs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function fs(e,t,n,i,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=ka(-1,1)).tag=2,Ra(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var ps=A.ReactCurrentOwner,Is=!1;function Cs(e,t,n,i){t.child=null===e?Oa(t,null,n,i):Da(t,e.child,n,i)}function ms(e,t,n,i,r){n=n.render;var a=t.ref;return Aa(t,r),i=Ao(e,t,n,i,a,r),n=bo(),null===e||Is?(ea&&n&&Jr(t),t.flags|=1,Cs(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,zs(e,t,r))}function vs(e,t,n,i,r){if(null===e){var a=n.type;return"function"!==typeof a||kc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Wc(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,As(e,t,a,i,r))}if(a=e.child,0===(e.lanes&r)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:ri)(o,i)&&e.ref===t.ref)return zs(e,t,r)}return t.flags|=1,(e=Rc(a,i)).ref=t.ref,e.return=t,t.child=e}function As(e,t,n,i,r){if(null!==e){var a=e.memoizedProps;if(ri(a,i)&&e.ref===t.ref){if(Is=!1,t.pendingProps=i=a,0===(e.lanes&r))return t.lanes=e.lanes,zs(e,t,r);0!==(131072&e.flags)&&(Is=!0)}}return Gs(e,t,n,i,r)}function bs(e,t,n){var i=t.pendingProps,r=i.children,a=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},yr(Rl,kl),kl|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,yr(Rl,kl),kl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==a?a.baseLanes:n,yr(Rl,kl),kl|=i}else null!==a?(i=a.baseLanes|n,t.memoizedState=null):i=n,yr(Rl,kl),kl|=i;return Cs(e,t,r,n),t.child}function ys(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Gs(e,t,n,i,r){var a=Zr(n)?xr:wr.current;return a=Sr(t,a),Aa(t,r),n=Ao(e,t,n,i,a,r),i=bo(),null===e||Is?(ea&&i&&Jr(t),t.flags|=1,Cs(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,zs(e,t,r))}function ws(e,t,n,i,r){if(Zr(n)){var a=!0;Mr(t)}else a=!1;if(Aa(t,r),null===t.stateNode)Es(e,t),Ya(t,n,i),za(t,n,i,r),i=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=ba(c):c=Sr(t,c=Zr(n)?xr:wr.current);var u=n.getDerivedStateFromProps,g="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;g||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==i||l!==c)&&Ea(t,o,i,c),xa=!1;var d=t.memoizedState;o.state=d,Va(t,i,o,r),l=t.memoizedState,s!==i||d!==l||Br.current||xa?("function"===typeof u&&(Ha(t,n,u,i),l=t.memoizedState),(s=xa||Xa(t,n,s,i,d,l,c))?(g||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),o.props=i,o.state=l,o.context=c,i=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),i=!1)}else{o=t.stateNode,Za(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:da(t.type,s),o.props=c,g=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=ba(l):l=Sr(t,l=Zr(n)?xr:wr.current);var h=n.getDerivedStateFromProps;(u="function"===typeof h||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==g||d!==l)&&Ea(t,o,i,l),xa=!1,d=t.memoizedState,o.state=d,Va(t,i,o,r);var f=t.memoizedState;s!==g||d!==f||Br.current||xa?("function"===typeof h&&(Ha(t,n,h,i),f=t.memoizedState),(c=xa||Xa(t,n,c,i,d,f,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(i,f,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(i,f,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=f),o.props=i,o.state=f,o.context=l,i=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),i=!1)}return Bs(e,t,n,i,a,r)}function Bs(e,t,n,i,r,a){ys(e,t);var o=0!==(128&t.flags);if(!i&&!o)return r&&Vr(t,n,!1),zs(e,t,a);i=t.stateNode,ps.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&o?(t.child=Da(t,e.child,null,a),t.child=Da(t,null,s,a)):Cs(e,t,s,a),t.memoizedState=i.state,r&&Vr(t,n,!0),t.child}function xs(e){var t=e.stateNode;t.pendingContext?Rr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Rr(0,t.context,!1),$a(e,t.containerInfo)}function Ss(e,t,n,i,r){return ca(),ua(r),t.flags|=256,Cs(e,t,n,i),t.child}var Zs,ks,Rs,Ws,Ms={dehydrated:null,treeContext:null,retryLane:0};function Vs(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fs(e,t,n){var i,r=t.pendingProps,o=io.current,s=!1,l=0!==(128&t.flags);if((i=l)||(i=(null===e||null!==e.memoizedState)&&0!==(2&o)),i?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),yr(io,1&o),null===e)return aa(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=r.children,e=r.fallback,s?(r=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&r)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Vc(l,r,0,null),e=Mc(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Vs(n),t.memoizedState=Ms,e):Ns(t,l));if(null!==(o=e.memoizedState)&&null!==(i=o.dehydrated))return function(e,t,n,i,r,o,s){if(n)return 256&t.flags?(t.flags&=-257,Hs(e,t,s,i=ss(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=i.fallback,r=t.mode,i=Vc({mode:"visible",children:i.children},r,0,null),(o=Mc(o,r,s,null)).flags|=2,i.return=t,o.return=t,i.sibling=o,t.child=i,0!==(1&t.mode)&&Da(t,e.child,null,s),t.child.memoizedState=Vs(s),t.memoizedState=Ms,o);if(0===(1&t.mode))return Hs(e,t,s,null);if("$!"===r.data){if(i=r.nextSibling&&r.nextSibling.dataset)var l=i.dgst;return i=l,Hs(e,t,s,i=ss(o=Error(a(419)),i,void 0))}if(l=0!==(s&e.childLanes),Is||l){if(null!==(i=xl)){switch(s&-s){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(i.suspendedLanes|s))?0:r)&&r!==o.retryLane&&(o.retryLane=r,Ba(e,r),$l(i,e,r,-1))}return dc(),Hs(e,t,s,i=ss(Error(a(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=wc.bind(null,e),r._reactRetry=t,null):(e=o.treeContext,$r=ar(r.nextSibling),qr=t,ea=!0,ta=null,null!==e&&(Kr[_r++]=Dr,Kr[_r++]=Or,Kr[_r++]=Pr,Dr=e.id,Or=e.overflow,Pr=t),t=Ns(t,i.children),t.flags|=4096,t)}(e,t,l,r,i,o,n);if(s){s=r.fallback,l=t.mode,i=(o=e.child).sibling;var c={mode:"hidden",children:r.children};return 0===(1&l)&&t.child!==o?((r=t.child).childLanes=0,r.pendingProps=c,t.deletions=null):(r=Rc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==i?s=Rc(i,s):(s=Mc(s,l,n,null)).flags|=2,s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,l=null===(l=e.child.memoizedState)?Vs(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Ms,r}return e=(s=e.child).sibling,r=Rc(s,{mode:"visible",children:r.children}),0===(1&t.mode)&&(r.lanes=n),r.return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Ns(e,t){return(t=Vc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Hs(e,t,n,i){return null!==i&&ua(i),Da(t,e.child,null,n),(e=Ns(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ts(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),va(e.return,t,n)}function Xs(e,t,n,i,r){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=n,a.tailMode=r)}function Ys(e,t,n){var i=t.pendingProps,r=i.revealOrder,a=i.tail;if(Cs(e,t,i.children,n),0!==(2&(i=io.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ts(e,n,t);else if(19===e.tag)Ts(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(yr(io,i),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===ro(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Xs(t,!1,r,n,a);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===ro(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Xs(t,!0,n,null,a);break;case"together":Xs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Es(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function zs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Vl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Rc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Rc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ls(e,t){if(!ea)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Ks(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function _s(e,t,n){var i=t.pendingProps;switch(Qr(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ks(t),null;case 1:case 17:return Zr(t.type)&&kr(),Ks(t),null;case 3:return i=t.stateNode,eo(),br(Br),br(wr),oo(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(sa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ta&&(ic(ta),ta=null))),ks(e,t),Ks(t),null;case 5:no(t);var r=qa(Qa.current);if(n=t.type,null!==e&&null!=t.stateNode)Rs(e,t,n,i,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(a(166));return Ks(t),null}if(e=qa(ja.current),sa(t)){i=t.stateNode,n=t.type;var o=t.memoizedProps;switch(i[lr]=t,i[cr]=o,e=0!==(1&t.mode),n){case"dialog":Ni("cancel",i),Ni("close",i);break;case"iframe":case"object":case"embed":Ni("load",i);break;case"video":case"audio":for(r=0;r<Wi.length;r++)Ni(Wi[r],i);break;case"source":Ni("error",i);break;case"img":case"image":case"link":Ni("error",i),Ni("load",i);break;case"details":Ni("toggle",i);break;case"input":J(i,o),Ni("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Ni("invalid",i);break;case"textarea":re(i,o),Ni("invalid",i)}for(var l in Ce(n,o),r=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?i.textContent!==c&&(!0!==o.suppressHydrationWarning&&Ui(i.textContent,c,e),r=["children",c]):"number"===typeof c&&i.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Ui(i.textContent,c,e),r=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ni("scroll",i)}switch(n){case"input":D(i),$(i,o,!0);break;case"textarea":D(i),oe(i);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(i.onclick=ji)}i=r,t.updateQueue=i,null!==i&&(t.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof i.is?e=l.createElement(n,{is:i.is}):(e=l.createElement(n),"select"===n&&(l=e,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):e=l.createElementNS(e,n),e[lr]=t,e[cr]=i,Zs(e,t,!1,!1),t.stateNode=e;e:{switch(l=me(n,i),n){case"dialog":Ni("cancel",e),Ni("close",e),r=i;break;case"iframe":case"object":case"embed":Ni("load",e),r=i;break;case"video":case"audio":for(r=0;r<Wi.length;r++)Ni(Wi[r],e);r=i;break;case"source":Ni("error",e),r=i;break;case"img":case"image":case"link":Ni("error",e),Ni("load",e),r=i;break;case"details":Ni("toggle",e),r=i;break;case"input":J(e,i),r=j(e,i),Ni("invalid",e);break;case"option":default:r=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},r=T({},i,{value:void 0}),Ni("invalid",e);break;case"textarea":re(e,i),r=ie(e,i),Ni("invalid",e)}for(o in Ce(n,r),c=r)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?pe(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&ue(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&ge(e,u):"number"===typeof u&&ge(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Ni("scroll",e):null!=u&&v(e,o,u,l))}switch(n){case"input":D(e),$(e,i,!1);break;case"textarea":D(e),oe(e);break;case"option":null!=i.value&&e.setAttribute("value",""+_(i.value));break;case"select":e.multiple=!!i.multiple,null!=(o=i.value)?ne(e,!!i.multiple,o,!1):null!=i.defaultValue&&ne(e,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=ji)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ks(t),null;case 6:if(e&&null!=t.stateNode)Ws(e,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(a(166));if(n=qa(Qa.current),qa(ja.current),sa(t)){if(i=t.stateNode,n=t.memoizedProps,i[lr]=t,(o=i.nodeValue!==n)&&null!==(e=qr))switch(e.tag){case 3:Ui(i.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Ui(i.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[lr]=t,t.stateNode=i}return Ks(t),null;case 13:if(br(io),i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ea&&null!==$r&&0!==(1&t.mode)&&0===(128&t.flags))la(),ca(),t.flags|=98560,o=!1;else if(o=sa(t),null!==i&&null!==i.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[lr]=t}else ca(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ks(t),o=!1}else null!==ta&&(ic(ta),ta=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((i=null!==i)!==(null!==e&&null!==e.memoizedState)&&i&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&io.current)?0===Wl&&(Wl=3):dc())),null!==t.updateQueue&&(t.flags|=4),Ks(t),null);case 4:return eo(),ks(e,t),null===e&&Xi(t.stateNode.containerInfo),Ks(t),null;case 10:return ma(t.type._context),Ks(t),null;case 19:if(br(io),null===(o=t.memoizedState))return Ks(t),null;if(i=0!==(128&t.flags),null===(l=o.rendering))if(i)Ls(o,!1);else{if(0!==Wl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ro(e))){for(t.flags|=128,Ls(o,!1),null!==(i=l.updateQueue)&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;null!==n;)e=i,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return yr(io,1&io.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>Yl&&(t.flags|=128,i=!0,Ls(o,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=ro(l))){if(t.flags|=128,i=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ls(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!ea)return Ks(t),null}else 2*Je()-o.renderingStartTime>Yl&&1073741824!==n&&(t.flags|=128,i=!0,Ls(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=io.current,yr(io,i?1&n|2:1&n),t):(Ks(t),null);case 22:case 23:return lc(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!==(1&t.mode)?0!==(1073741824&kl)&&(Ks(t),6&t.subtreeFlags&&(t.flags|=8192)):Ks(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Ps(e,t){switch(Qr(t),t.tag){case 1:return Zr(t.type)&&kr(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return eo(),br(Br),br(wr),oo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return no(t),null;case 13:if(br(io),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));ca()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return br(io),null;case 4:return eo(),null;case 10:return ma(t.type._context),null;case 22:case 23:return lc(),null;default:return null}}Zs=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},ks=function(){},Rs=function(e,t,n,i){var r=e.memoizedProps;if(r!==i){e=t.stateNode,qa(ja.current);var a,o=null;switch(n){case"input":r=j(e,r),i=j(e,i),o=[];break;case"select":r=T({},r,{value:void 0}),i=T({},i,{value:void 0}),o=[];break;case"textarea":r=ie(e,r),i=ie(e,i),o=[];break;default:"function"!==typeof r.onClick&&"function"===typeof i.onClick&&(e.onclick=ji)}for(u in Ce(n,i),n=null,r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&null!=r[u])if("style"===u){var l=r[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in i){var c=i[u];if(l=null!=r?r[u]:void 0,i.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ni("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Ws=function(e,t,n,i){n!==i&&(t.flags|=4)};var Ds=!1,Os=!1,Us="function"===typeof WeakSet?WeakSet:Set,js=null;function Js(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){bc(e,t,i)}else n.current=null}function Qs(e,t,n){try{n()}catch(i){bc(e,t,i)}}var qs=!1;function $s(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&e)===e){var a=r.destroy;r.destroy=void 0,void 0!==a&&Qs(t,n,a)}r=r.next}while(r!==i)}}function el(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function tl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function nl(e){var t=e.alternate;null!==t&&(e.alternate=null,nl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[lr],delete t[cr],delete t[gr],delete t[dr],delete t[hr])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function il(e){return 5===e.tag||3===e.tag||4===e.tag}function rl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||il(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function al(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=ji));else if(4!==i&&null!==(e=e.child))for(al(e,t,n),e=e.sibling;null!==e;)al(e,t,n),e=e.sibling}function ol(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&null!==(e=e.child))for(ol(e,t,n),e=e.sibling;null!==e;)ol(e,t,n),e=e.sibling}var sl=null,ll=!1;function cl(e,t,n){for(n=n.child;null!==n;)ul(e,t,n),n=n.sibling}function ul(e,t,n){if(rt&&"function"===typeof rt.onCommitFiberUnmount)try{rt.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Os||Js(n,t);case 6:var i=sl,r=ll;sl=null,cl(e,t,n),ll=r,null!==(sl=i)&&(ll?(e=sl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):sl.removeChild(n.stateNode));break;case 18:null!==sl&&(ll?(e=sl,n=n.stateNode,8===e.nodeType?rr(e.parentNode,n):1===e.nodeType&&rr(e,n),zt(e)):rr(sl,n.stateNode));break;case 4:i=sl,r=ll,sl=n.stateNode.containerInfo,ll=!0,cl(e,t,n),sl=i,ll=r;break;case 0:case 11:case 14:case 15:if(!Os&&(null!==(i=n.updateQueue)&&null!==(i=i.lastEffect))){r=i=i.next;do{var a=r,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&Qs(n,t,o),r=r.next}while(r!==i)}cl(e,t,n);break;case 1:if(!Os&&(Js(n,t),"function"===typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(s){bc(n,t,s)}cl(e,t,n);break;case 21:cl(e,t,n);break;case 22:1&n.mode?(Os=(i=Os)||null!==n.memoizedState,cl(e,t,n),Os=i):cl(e,t,n);break;default:cl(e,t,n)}}function gl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Us),t.forEach((function(t){var i=Bc.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))}))}}function dl(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var o=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:sl=l.stateNode,ll=!1;break e;case 3:case 4:sl=l.stateNode.containerInfo,ll=!0;break e}l=l.return}if(null===sl)throw Error(a(160));ul(o,s,r),sl=null,ll=!1;var c=r.alternate;null!==c&&(c.return=null),r.return=null}catch(u){bc(r,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)hl(t,e),t=t.sibling}function hl(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(dl(t,e),fl(e),4&i){try{$s(3,e,e.return),el(3,e)}catch(I){bc(e,e.return,I)}try{$s(5,e,e.return)}catch(I){bc(e,e.return,I)}}break;case 1:dl(t,e),fl(e),512&i&&null!==n&&Js(n,n.return);break;case 5:if(dl(t,e),fl(e),512&i&&null!==n&&Js(n,n.return),32&e.flags){var r=e.stateNode;try{ge(r,"")}catch(I){bc(e,e.return,I)}}if(4&i&&null!=(r=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&Q(r,o),me(l,s);var u=me(l,o);for(s=0;s<c.length;s+=2){var g=c[s],d=c[s+1];"style"===g?pe(r,d):"dangerouslySetInnerHTML"===g?ue(r,d):"children"===g?ge(r,d):v(r,g,d,u)}switch(l){case"input":q(r,o);break;case"textarea":ae(r,o);break;case"select":var h=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var f=o.value;null!=f?ne(r,!!o.multiple,f,!1):h!==!!o.multiple&&(null!=o.defaultValue?ne(r,!!o.multiple,o.defaultValue,!0):ne(r,!!o.multiple,o.multiple?[]:"",!1))}r[cr]=o}catch(I){bc(e,e.return,I)}}break;case 6:if(dl(t,e),fl(e),4&i){if(null===e.stateNode)throw Error(a(162));r=e.stateNode,o=e.memoizedProps;try{r.nodeValue=o}catch(I){bc(e,e.return,I)}}break;case 3:if(dl(t,e),fl(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(I){bc(e,e.return,I)}break;case 4:default:dl(t,e),fl(e);break;case 13:dl(t,e),fl(e),8192&(r=e.child).flags&&(o=null!==r.memoizedState,r.stateNode.isHidden=o,!o||null!==r.alternate&&null!==r.alternate.memoizedState||(Xl=Je())),4&i&&gl(e);break;case 22:if(g=null!==n&&null!==n.memoizedState,1&e.mode?(Os=(u=Os)||g,dl(t,e),Os=u):dl(t,e),fl(e),8192&i){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!g&&0!==(1&e.mode))for(js=e,g=e.child;null!==g;){for(d=js=g;null!==js;){switch(f=(h=js).child,h.tag){case 0:case 11:case 14:case 15:$s(4,h,h.return);break;case 1:Js(h,h.return);var p=h.stateNode;if("function"===typeof p.componentWillUnmount){i=h,n=h.return;try{t=i,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(I){bc(i,n,I)}}break;case 5:Js(h,h.return);break;case 22:if(null!==h.memoizedState){ml(d);continue}}null!==f?(f.return=h,js=f):ml(d)}g=g.sibling}e:for(g=null,d=e;;){if(5===d.tag){if(null===g){g=d;try{r=d.stateNode,u?"function"===typeof(o=r.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,s=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=fe("display",s))}catch(I){bc(e,e.return,I)}}}else if(6===d.tag){if(null===g)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(I){bc(e,e.return,I)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;g===d&&(g=null),d=d.return}g===d&&(g=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:dl(t,e),fl(e),4&i&&gl(e);case 21:}}function fl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(il(n)){var i=n;break e}n=n.return}throw Error(a(160))}switch(i.tag){case 5:var r=i.stateNode;32&i.flags&&(ge(r,""),i.flags&=-33),ol(e,rl(e),r);break;case 3:case 4:var o=i.stateNode.containerInfo;al(e,rl(e),o);break;default:throw Error(a(161))}}catch(s){bc(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function pl(e,t,n){js=e,Il(e,t,n)}function Il(e,t,n){for(var i=0!==(1&e.mode);null!==js;){var r=js,a=r.child;if(22===r.tag&&i){var o=null!==r.memoizedState||Ds;if(!o){var s=r.alternate,l=null!==s&&null!==s.memoizedState||Os;s=Ds;var c=Os;if(Ds=o,(Os=l)&&!c)for(js=r;null!==js;)l=(o=js).child,22===o.tag&&null!==o.memoizedState?vl(r):null!==l?(l.return=o,js=l):vl(r);for(;null!==a;)js=a,Il(a,t,n),a=a.sibling;js=r,Ds=s,Os=c}Cl(e)}else 0!==(8772&r.subtreeFlags)&&null!==a?(a.return=r,js=a):Cl(e)}}function Cl(e){for(;null!==js;){var t=js;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Os||el(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!Os)if(null===n)i.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:da(t.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Fa(t,o,i);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Fa(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var g=u.memoizedState;if(null!==g){var d=g.dehydrated;null!==d&&zt(d)}}}break;default:throw Error(a(163))}Os||512&t.flags&&tl(t)}catch(h){bc(t,t.return,h)}}if(t===e){js=null;break}if(null!==(n=t.sibling)){n.return=t.return,js=n;break}js=t.return}}function ml(e){for(;null!==js;){var t=js;if(t===e){js=null;break}var n=t.sibling;if(null!==n){n.return=t.return,js=n;break}js=t.return}}function vl(e){for(;null!==js;){var t=js;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{el(4,t)}catch(l){bc(t,n,l)}break;case 1:var i=t.stateNode;if("function"===typeof i.componentDidMount){var r=t.return;try{i.componentDidMount()}catch(l){bc(t,r,l)}}var a=t.return;try{tl(t)}catch(l){bc(t,a,l)}break;case 5:var o=t.return;try{tl(t)}catch(l){bc(t,o,l)}}}catch(l){bc(t,t.return,l)}if(t===e){js=null;break}var s=t.sibling;if(null!==s){s.return=t.return,js=s;break}js=t.return}}var Al,bl=Math.ceil,yl=A.ReactCurrentDispatcher,Gl=A.ReactCurrentOwner,wl=A.ReactCurrentBatchConfig,Bl=0,xl=null,Sl=null,Zl=0,kl=0,Rl=Ar(0),Wl=0,Ml=null,Vl=0,Fl=0,Nl=0,Hl=null,Tl=null,Xl=0,Yl=1/0,El=null,zl=!1,Ll=null,Kl=null,_l=!1,Pl=null,Dl=0,Ol=0,Ul=null,jl=-1,Jl=0;function Ql(){return 0!==(6&Bl)?Je():-1!==jl?jl:jl=Je()}function ql(e){return 0===(1&e.mode)?1:0!==(2&Bl)&&0!==Zl?Zl&-Zl:null!==ga.transition?(0===Jl&&(Jl=ft()),Jl):0!==(e=mt)?e:e=void 0===(e=window.event)?16:jt(e.type)}function $l(e,t,n,i){if(50<Ol)throw Ol=0,Ul=null,Error(a(185));It(e,n,i),0!==(2&Bl)&&e===xl||(e===xl&&(0===(2&Bl)&&(Fl|=n),4===Wl&&rc(e,Zl)),ec(e,i),1===n&&0===Bl&&0===(1&t.mode)&&(Yl=Je()+500,Nr&&Xr()))}function ec(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-at(a),s=1<<o,l=r[o];-1===l?0!==(s&n)&&0===(s&i)||(r[o]=dt(s,t)):l<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var i=gt(e,e===xl?Zl:0);if(0===i)null!==n&&Oe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&Oe(n),1===t)0===e.tag?function(e){Nr=!0,Tr(e)}(ac.bind(null,e)):Tr(ac.bind(null,e)),nr((function(){0===(6&Bl)&&Xr()})),n=null;else{switch(vt(i)){case 1:n=qe;break;case 4:n=$e;break;case 16:default:n=et;break;case 536870912:n=nt}n=xc(n,tc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function tc(e,t){if(jl=-1,Jl=0,0!==(6&Bl))throw Error(a(327));var n=e.callbackNode;if(vc()&&e.callbackNode!==n)return null;var i=gt(e,e===xl?Zl:0);if(0===i)return null;if(0!==(30&i)||0!==(i&e.expiredLanes)||t)t=hc(e,i);else{t=i;var r=Bl;Bl|=2;var o=gc();for(xl===e&&Zl===t||(El=null,Yl=Je()+500,cc(e,t));;)try{pc();break}catch(l){uc(e,l)}Ca(),yl.current=o,Bl=r,null!==Sl?t=0:(xl=null,Zl=0,t=Wl)}if(0!==t){if(2===t&&(0!==(r=ht(e))&&(i=r,t=nc(e,r))),1===t)throw n=Ml,cc(e,0),rc(e,i),ec(e,Je()),n;if(6===t)rc(e,i);else{if(r=e.current.alternate,0===(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],a=r.getSnapshot;r=r.value;try{if(!ii(a(),r))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=hc(e,i))&&(0!==(o=ht(e))&&(i=o,t=nc(e,o))),1===t))throw n=Ml,cc(e,0),rc(e,i),ec(e,Je()),n;switch(e.finishedWork=r,e.finishedLanes=i,t){case 0:case 1:throw Error(a(345));case 2:case 5:mc(e,Tl,El);break;case 3:if(rc(e,i),(130023424&i)===i&&10<(t=Xl+500-Je())){if(0!==gt(e,0))break;if(((r=e.suspendedLanes)&i)!==i){Ql(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=$i(mc.bind(null,e,Tl,El),t);break}mc(e,Tl,El);break;case 4:if(rc(e,i),(4194240&i)===i)break;for(t=e.eventTimes,r=-1;0<i;){var s=31-at(i);o=1<<s,(s=t[s])>r&&(r=s),i&=~o}if(i=r,10<(i=(120>(i=Je()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*bl(i/1960))-i)){e.timeoutHandle=$i(mc.bind(null,e,Tl,El),i);break}mc(e,Tl,El);break;default:throw Error(a(329))}}}return ec(e,Je()),e.callbackNode===n?tc.bind(null,e):null}function nc(e,t){var n=Hl;return e.current.memoizedState.isDehydrated&&(cc(e,t).flags|=256),2!==(e=hc(e,t))&&(t=Tl,Tl=n,null!==t&&ic(t)),e}function ic(e){null===Tl?Tl=e:Tl.push.apply(Tl,e)}function rc(e,t){for(t&=~Nl,t&=~Fl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),i=1<<n;e[n]=-1,t&=~i}}function ac(e){if(0!==(6&Bl))throw Error(a(327));vc();var t=gt(e,0);if(0===(1&t))return ec(e,Je()),null;var n=hc(e,t);if(0!==e.tag&&2===n){var i=ht(e);0!==i&&(t=i,n=nc(e,i))}if(1===n)throw n=Ml,cc(e,0),rc(e,t),ec(e,Je()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,mc(e,Tl,El),ec(e,Je()),null}function oc(e,t){var n=Bl;Bl|=1;try{return e(t)}finally{0===(Bl=n)&&(Yl=Je()+500,Nr&&Xr())}}function sc(e){null!==Pl&&0===Pl.tag&&0===(6&Bl)&&vc();var t=Bl;Bl|=1;var n=wl.transition,i=mt;try{if(wl.transition=null,mt=1,e)return e()}finally{mt=i,wl.transition=n,0===(6&(Bl=t))&&Xr()}}function lc(){kl=Rl.current,br(Rl)}function cc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,er(n)),null!==Sl)for(n=Sl.return;null!==n;){var i=n;switch(Qr(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&kr();break;case 3:eo(),br(Br),br(wr),oo();break;case 5:no(i);break;case 4:eo();break;case 13:case 19:br(io);break;case 10:ma(i.type._context);break;case 22:case 23:lc()}n=n.return}if(xl=e,Sl=e=Rc(e.current,null),Zl=kl=t,Wl=0,Ml=null,Nl=Fl=Vl=0,Tl=Hl=null,null!==ya){for(t=0;t<ya.length;t++)if(null!==(i=(n=ya[t]).interleaved)){n.interleaved=null;var r=i.next,a=n.pending;if(null!==a){var o=a.next;a.next=r,i.next=o}n.pending=i}ya=null}return e}function uc(e,t){for(;;){var n=Sl;try{if(Ca(),so.current=ns,fo){for(var i=uo.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}fo=!1}if(co=0,ho=go=uo=null,po=!1,Io=0,Gl.current=null,null===n||null===n.return){Wl=1,Ml=t,Sl=null;break}e:{var o=e,s=n.return,l=n,c=t;if(t=Zl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,g=l,d=g.tag;if(0===(1&g.mode)&&(0===d||11===d||15===d)){var h=g.alternate;h?(g.updateQueue=h.updateQueue,g.memoizedState=h.memoizedState,g.lanes=h.lanes):(g.updateQueue=null,g.memoizedState=null)}var f=hs(s);if(null!==f){f.flags&=-257,fs(f,s,l,0,t),1&f.mode&&ds(o,u,t),c=u;var p=(t=f).updateQueue;if(null===p){var I=new Set;I.add(c),t.updateQueue=I}else p.add(c);break e}if(0===(1&t)){ds(o,u,t),dc();break e}c=Error(a(426))}else if(ea&&1&l.mode){var C=hs(s);if(null!==C){0===(65536&C.flags)&&(C.flags|=256),fs(C,s,l,0,t),ua(os(c,l));break e}}o=c=os(c,l),4!==Wl&&(Wl=2),null===Hl?Hl=[o]:Hl.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,us(0,c,t));break e;case 1:l=c;var m=o.type,v=o.stateNode;if(0===(128&o.flags)&&("function"===typeof m.getDerivedStateFromError||null!==v&&"function"===typeof v.componentDidCatch&&(null===Kl||!Kl.has(v)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,gs(o,l,t));break e}}o=o.return}while(null!==o)}Cc(n)}catch(A){t=A,Sl===n&&null!==n&&(Sl=n=n.return);continue}break}}function gc(){var e=yl.current;return yl.current=ns,null===e?ns:e}function dc(){0!==Wl&&3!==Wl&&2!==Wl||(Wl=4),null===xl||0===(268435455&Vl)&&0===(268435455&Fl)||rc(xl,Zl)}function hc(e,t){var n=Bl;Bl|=2;var i=gc();for(xl===e&&Zl===t||(El=null,cc(e,t));;)try{fc();break}catch(r){uc(e,r)}if(Ca(),Bl=n,yl.current=i,null!==Sl)throw Error(a(261));return xl=null,Zl=0,Wl}function fc(){for(;null!==Sl;)Ic(Sl)}function pc(){for(;null!==Sl&&!Ue();)Ic(Sl)}function Ic(e){var t=Al(e.alternate,e,kl);e.memoizedProps=e.pendingProps,null===t?Cc(e):Sl=t,Gl.current=null}function Cc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=_s(n,t,kl)))return void(Sl=n)}else{if(null!==(n=Ps(n,t)))return n.flags&=32767,void(Sl=n);if(null===e)return Wl=6,void(Sl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Sl=t);Sl=t=e}while(null!==t);0===Wl&&(Wl=5)}function mc(e,t,n){var i=mt,r=wl.transition;try{wl.transition=null,mt=1,function(e,t,n,i){do{vc()}while(null!==Pl);if(0!==(6&Bl))throw Error(a(327));n=e.finishedWork;var r=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-at(n),a=1<<r;t[r]=0,i[r]=-1,e[r]=-1,n&=~a}}(e,o),e===xl&&(Sl=xl=null,Zl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||_l||(_l=!0,xc(et,(function(){return vc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=wl.transition,wl.transition=null;var s=mt;mt=1;var l=Bl;Bl|=4,Gl.current=null,function(e,t){if(Ji=Kt,ci(e=li())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch(b){n=null;break e}var s=0,l=-1,c=-1,u=0,g=0,d=e,h=null;t:for(;;){for(var f;d!==n||0!==r&&3!==d.nodeType||(l=s+r),d!==o||0!==i&&3!==d.nodeType||(c=s+i),3===d.nodeType&&(s+=d.nodeValue.length),null!==(f=d.firstChild);)h=d,d=f;for(;;){if(d===e)break t;if(h===n&&++u===r&&(l=s),h===o&&++g===i&&(c=s),null!==(f=d.nextSibling))break;h=(d=h).parentNode}d=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Qi={focusedElem:e,selectionRange:n},Kt=!1,js=t;null!==js;)if(e=(t=js).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,js=e;else for(;null!==js;){t=js;try{var p=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var I=p.memoizedProps,C=p.memoizedState,m=t.stateNode,v=m.getSnapshotBeforeUpdate(t.elementType===t.type?I:da(t.type,I),C);m.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var A=t.stateNode.containerInfo;1===A.nodeType?A.textContent="":9===A.nodeType&&A.documentElement&&A.removeChild(A.documentElement);break;default:throw Error(a(163))}}catch(b){bc(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,js=e;break}js=t.return}p=qs,qs=!1}(e,n),hl(n,e),ui(Qi),Kt=!!Ji,Qi=Ji=null,e.current=n,pl(n,e,r),je(),Bl=l,mt=s,wl.transition=o}else e.current=n;if(_l&&(_l=!1,Pl=e,Dl=r),o=e.pendingLanes,0===o&&(Kl=null),function(e){if(rt&&"function"===typeof rt.onCommitFiberRoot)try{rt.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ec(e,Je()),null!==t)for(i=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(zl)throw zl=!1,e=Ll,Ll=null,e;0!==(1&Dl)&&0!==e.tag&&vc(),o=e.pendingLanes,0!==(1&o)?e===Ul?Ol++:(Ol=0,Ul=e):Ol=0,Xr()}(e,t,n,i)}finally{wl.transition=r,mt=i}return null}function vc(){if(null!==Pl){var e=vt(Dl),t=wl.transition,n=mt;try{if(wl.transition=null,mt=16>e?16:e,null===Pl)var i=!1;else{if(e=Pl,Pl=null,Dl=0,0!==(6&Bl))throw Error(a(331));var r=Bl;for(Bl|=4,js=e.current;null!==js;){var o=js,s=o.child;if(0!==(16&js.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(js=u;null!==js;){var g=js;switch(g.tag){case 0:case 11:case 15:$s(8,g,o)}var d=g.child;if(null!==d)d.return=g,js=d;else for(;null!==js;){var h=(g=js).sibling,f=g.return;if(nl(g),g===u){js=null;break}if(null!==h){h.return=f,js=h;break}js=f}}}var p=o.alternate;if(null!==p){var I=p.child;if(null!==I){p.child=null;do{var C=I.sibling;I.sibling=null,I=C}while(null!==I)}}js=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,js=s;else e:for(;null!==js;){if(0!==(2048&(o=js).flags))switch(o.tag){case 0:case 11:case 15:$s(9,o,o.return)}var m=o.sibling;if(null!==m){m.return=o.return,js=m;break e}js=o.return}}var v=e.current;for(js=v;null!==js;){var A=(s=js).child;if(0!==(2064&s.subtreeFlags)&&null!==A)A.return=s,js=A;else e:for(s=v;null!==js;){if(0!==(2048&(l=js).flags))try{switch(l.tag){case 0:case 11:case 15:el(9,l)}}catch(y){bc(l,l.return,y)}if(l===s){js=null;break e}var b=l.sibling;if(null!==b){b.return=l.return,js=b;break e}js=l.return}}if(Bl=r,Xr(),rt&&"function"===typeof rt.onPostCommitFiberRoot)try{rt.onPostCommitFiberRoot(it,e)}catch(y){}i=!0}return i}finally{mt=n,wl.transition=t}}return!1}function Ac(e,t,n){e=Ra(e,t=us(0,t=os(n,t),1),1),t=Ql(),null!==e&&(It(e,1,t),ec(e,t))}function bc(e,t,n){if(3===e.tag)Ac(e,e,n);else for(;null!==t;){if(3===t.tag){Ac(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Kl||!Kl.has(i))){t=Ra(t,e=gs(t,e=os(n,e),1),1),e=Ql(),null!==t&&(It(t,1,e),ec(t,e));break}}t=t.return}}function yc(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=Ql(),e.pingedLanes|=e.suspendedLanes&n,xl===e&&(Zl&n)===n&&(4===Wl||3===Wl&&(130023424&Zl)===Zl&&500>Je()-Xl?cc(e,0):Nl|=n),ec(e,t)}function Gc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=Ql();null!==(e=Ba(e,t))&&(It(e,t,n),ec(e,n))}function wc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Gc(e,n)}function Bc(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(a(314))}null!==i&&i.delete(t),Gc(e,n)}function xc(e,t){return De(e,t)}function Sc(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zc(e,t,n,i){return new Sc(e,t,n,i)}function kc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rc(e,t){var n=e.alternate;return null===n?((n=Zc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Wc(e,t,n,i,r,o){var s=2;if(i=e,"function"===typeof e)kc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case G:return Mc(n.children,r,o,t);case w:s=8,r|=8;break;case B:return(e=Zc(12,n,t,2|r)).elementType=B,e.lanes=o,e;case k:return(e=Zc(13,n,t,r)).elementType=k,e.lanes=o,e;case R:return(e=Zc(19,n,t,r)).elementType=R,e.lanes=o,e;case V:return Vc(n,r,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case x:s=10;break e;case S:s=9;break e;case Z:s=11;break e;case W:s=14;break e;case M:s=16,i=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Zc(s,n,t,r)).elementType=e,t.type=i,t.lanes=o,t}function Mc(e,t,n,i){return(e=Zc(7,e,i,t)).lanes=n,e}function Vc(e,t,n,i){return(e=Zc(22,e,i,t)).elementType=V,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Zc(6,e,null,t)).lanes=n,e}function Nc(e,t,n){return(t=Zc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Hc(e,t,n,i,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pt(0),this.expirationTimes=pt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pt(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Tc(e,t,n,i,r,a,o,s,l){return e=new Hc(e,t,n,s,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Zc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sa(a),e}function Xc(e){if(!e)return Gr;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Zr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Zr(n))return Wr(e,n,t)}return t}function Yc(e,t,n,i,r,a,o,s,l){return(e=Tc(n,i,!0,e,0,a,0,s,l)).context=Xc(null),n=e.current,(a=ka(i=Ql(),r=ql(n))).callback=void 0!==t&&null!==t?t:null,Ra(n,a,r),e.current.lanes=r,It(e,r,i),ec(e,i),e}function Ec(e,t,n,i){var r=t.current,a=Ql(),o=ql(r);return n=Xc(n),null===t.context?t.context=n:t.pendingContext=n,(t=ka(a,o)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),null!==(e=Ra(r,t,o))&&($l(e,r,o,a),Wa(e,r,o)),o}function zc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Lc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kc(e,t){Lc(e,t),(e=e.alternate)&&Lc(e,t)}Al=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Br.current)Is=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return Is=!1,function(e,t,n){switch(t.tag){case 3:xs(t),ca();break;case 5:to(t);break;case 1:Zr(t.type)&&Mr(t);break;case 4:$a(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,r=t.memoizedProps.value;yr(ha,i._currentValue),i._currentValue=r;break;case 13:if(null!==(i=t.memoizedState))return null!==i.dehydrated?(yr(io,1&io.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fs(e,t,n):(yr(io,1&io.current),null!==(e=zs(e,t,n))?e.sibling:null);yr(io,1&io.current);break;case 19:if(i=0!==(n&t.childLanes),0!==(128&e.flags)){if(i)return Ys(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),yr(io,io.current),i)break;return null;case 22:case 23:return t.lanes=0,bs(e,t,n)}return zs(e,t,n)}(e,t,n);Is=0!==(131072&e.flags)}else Is=!1,ea&&0!==(1048576&t.flags)&&jr(t,Lr,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Es(e,t),e=t.pendingProps;var r=Sr(t,wr.current);Aa(t,n),r=Ao(null,t,i,e,r,n);var o=bo();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Zr(i)?(o=!0,Mr(t)):o=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Sa(t),r.updater=Ta,t.stateNode=r,r._reactInternals=t,za(t,i,e,n),t=Bs(null,t,i,!0,o,n)):(t.tag=0,ea&&o&&Jr(t),Cs(null,t,r,n),t=t.child),t;case 16:i=t.elementType;e:{switch(Es(e,t),e=t.pendingProps,i=(r=i._init)(i._payload),t.type=i,r=t.tag=function(e){if("function"===typeof e)return kc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===Z)return 11;if(e===W)return 14}return 2}(i),e=da(i,e),r){case 0:t=Gs(null,t,i,e,n);break e;case 1:t=ws(null,t,i,e,n);break e;case 11:t=ms(null,t,i,e,n);break e;case 14:t=vs(null,t,i,da(i.type,e),n);break e}throw Error(a(306,i,""))}return t;case 0:return i=t.type,r=t.pendingProps,Gs(e,t,i,r=t.elementType===i?r:da(i,r),n);case 1:return i=t.type,r=t.pendingProps,ws(e,t,i,r=t.elementType===i?r:da(i,r),n);case 3:e:{if(xs(t),null===e)throw Error(a(387));i=t.pendingProps,r=(o=t.memoizedState).element,Za(e,t),Va(t,i,null,n);var s=t.memoizedState;if(i=s.element,o.isDehydrated){if(o={element:i,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ss(e,t,i,n,r=os(Error(a(423)),t));break e}if(i!==r){t=Ss(e,t,i,n,r=os(Error(a(424)),t));break e}for($r=ar(t.stateNode.containerInfo.firstChild),qr=t,ea=!0,ta=null,n=Oa(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ca(),i===r){t=zs(e,t,n);break e}Cs(e,t,i,n)}t=t.child}return t;case 5:return to(t),null===e&&aa(t),i=t.type,r=t.pendingProps,o=null!==e?e.memoizedProps:null,s=r.children,qi(i,r)?s=null:null!==o&&qi(i,o)&&(t.flags|=32),ys(e,t),Cs(e,t,s,n),t.child;case 6:return null===e&&aa(t),null;case 13:return Fs(e,t,n);case 4:return $a(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=Da(t,null,i,n):Cs(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,ms(e,t,i,r=t.elementType===i?r:da(i,r),n);case 7:return Cs(e,t,t.pendingProps,n),t.child;case 8:case 12:return Cs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,r=t.pendingProps,o=t.memoizedProps,s=r.value,yr(ha,i._currentValue),i._currentValue=s,null!==o)if(ii(o.value,s)){if(o.children===r.children&&!Br.current){t=zs(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){s=o.child;for(var c=l.firstContext;null!==c;){if(c.context===i){if(1===o.tag){(c=ka(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var g=(u=u.shared).pending;null===g?c.next=c:(c.next=g.next,g.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),va(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),va(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}Cs(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=t.pendingProps.children,Aa(t,n),i=i(r=ba(r)),t.flags|=1,Cs(e,t,i,n),t.child;case 14:return r=da(i=t.type,t.pendingProps),vs(e,t,i,r=da(i.type,r),n);case 15:return As(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:da(i,r),Es(e,t),t.tag=1,Zr(i)?(e=!0,Mr(t)):e=!1,Aa(t,n),Ya(t,i,r),za(t,i,r,n),Bs(null,t,i,!0,e,n);case 19:return Ys(e,t,n);case 22:return bs(e,t,n)}throw Error(a(156,t.tag))};var _c="function"===typeof reportError?reportError:function(e){console.error(e)};function Pc(e){this._internalRoot=e}function Dc(e){this._internalRoot=e}function Oc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Uc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function jc(){}function Jc(e,t,n,i,r){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof r){var s=r;r=function(){var e=zc(o);s.call(e)}}Ec(t,o,e,r)}else o=function(e,t,n,i,r){if(r){if("function"===typeof i){var a=i;i=function(){var e=zc(o);a.call(e)}}var o=Yc(t,i,e,0,null,!1,0,"",jc);return e._reactRootContainer=o,e[ur]=o.current,Xi(8===e.nodeType?e.parentNode:e),sc(),o}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof i){var s=i;i=function(){var e=zc(l);s.call(e)}}var l=Tc(e,0,!1,null,0,!1,0,"",jc);return e._reactRootContainer=l,e[ur]=l.current,Xi(8===e.nodeType?e.parentNode:e),sc((function(){Ec(t,l,n,i)})),l}(n,t,e,r,i);return zc(o)}Dc.prototype.render=Pc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Ec(e,t,null,null)},Dc.prototype.unmount=Pc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;sc((function(){Ec(null,e,null,null)})),t[ur]=null}},Dc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Gt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Mt.length&&0!==t&&t<Mt[n].priority;n++);Mt.splice(n,0,e),0===n&&Ht(e)}},At=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ut(t.pendingLanes);0!==n&&(Ct(t,1|n),ec(t,Je()),0===(6&Bl)&&(Yl=Je()+500,Xr()))}break;case 13:sc((function(){var t=Ba(e,1);if(null!==t){var n=Ql();$l(t,e,1,n)}})),Kc(e,1)}},bt=function(e){if(13===e.tag){var t=Ba(e,134217728);if(null!==t)$l(t,e,134217728,Ql());Kc(e,134217728)}},yt=function(e){if(13===e.tag){var t=ql(e),n=Ba(e,t);if(null!==n)$l(n,e,t,Ql());Kc(e,t)}},Gt=function(){return mt},wt=function(e,t){var n=mt;try{return mt=e,t()}finally{mt=n}},be=function(e,t,n){switch(t){case"input":if(q(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=Cr(i);if(!r)throw Error(a(90));O(i),q(i,r)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Se=oc,Ze=sc;var Qc={usingClientEntryPoint:!1,Events:[pr,Ir,Cr,Be,xe,oc]},qc={findFiberByHostInstance:fr,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},$c={bundleType:qc.bundleType,version:qc.version,rendererPackageName:qc.rendererPackageName,rendererConfig:qc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:A.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=_e(e))?null:e.stateNode},findFiberByHostInstance:qc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var eu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!eu.isDisabled&&eu.supportsFiber)try{it=eu.inject($c),rt=eu}catch(tu){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Oc(t))throw Error(a(200));return function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:y,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Oc(e))throw Error(a(299));var n=!1,i="",r=_c;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=Tc(e,1,!1,null,0,n,0,i,r),e[ur]=t.current,Xi(8===e.nodeType?e.parentNode:e),new Pc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=_e(t))?null:e.stateNode},t.flushSync=function(e){return sc(e)},t.hydrate=function(e,t,n){if(!Uc(t))throw Error(a(200));return Jc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Oc(e))throw Error(a(405));var i=null!=n&&n.hydratedSources||null,r=!1,o="",s=_c;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Yc(t,null,e,1,null!=n?n:null,r,0,o,s),e[ur]=t.current,Xi(e),i)for(e=0;e<i.length;e++)r=(r=(n=i[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new Dc(t)},t.render=function(e,t,n){if(!Uc(t))throw Error(a(200));return Jc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Uc(e))throw Error(a(40));return!!e._reactRootContainer&&(sc((function(){Jc(null,null,e,!1,(function(){e._reactRootContainer=null,e[ur]=null}))})),!0)},t.unstable_batchedUpdates=oc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!Uc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Jc(e,t,n,!1,i)},t.version="18.2.0-next-9e3b772b8-20220608"},1250:function(e,t,n){"use strict";var i=n(4164);t.s=i.createRoot,i.hydrateRoot},4164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},67:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<a(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,o=r>>>1;i<o;){var s=2*(i+1)-1,l=e[s],c=s+1,u=e[c];if(0>a(l,n))c<r&&0>a(u,l)?(e[i]=u,e[c]=n,i=c):(e[i]=l,e[s]=n,i=s);else{if(!(c<r&&0>a(u,n)))break e;e[i]=u,e[c]=n,i=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],g=1,d=null,h=3,f=!1,p=!1,I=!1,C="function"===typeof setTimeout?setTimeout:null,m="function"===typeof clearTimeout?clearTimeout:null,v="undefined"!==typeof setImmediate?setImmediate:null;function A(e){for(var t=i(u);null!==t;){if(null===t.callback)r(u);else{if(!(t.startTime<=e))break;r(u),t.sortIndex=t.expirationTime,n(c,t)}t=i(u)}}function b(e){if(I=!1,A(e),!p)if(null!==i(c))p=!0,V(y);else{var t=i(u);null!==t&&F(b,t.startTime-e)}}function y(e,n){p=!1,I&&(I=!1,m(x),x=-1),f=!0;var a=h;try{for(A(n),d=i(c);null!==d&&(!(d.expirationTime>n)||e&&!k());){var o=d.callback;if("function"===typeof o){d.callback=null,h=d.priorityLevel;var s=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?d.callback=s:d===i(c)&&r(c),A(n)}else r(c);d=i(c)}if(null!==d)var l=!0;else{var g=i(u);null!==g&&F(b,g.startTime-n),l=!1}return l}finally{d=null,h=a,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var G,w=!1,B=null,x=-1,S=5,Z=-1;function k(){return!(t.unstable_now()-Z<S)}function R(){if(null!==B){var e=t.unstable_now();Z=e;var n=!0;try{n=B(!0,e)}finally{n?G():(w=!1,B=null)}}else w=!1}if("function"===typeof v)G=function(){v(R)};else if("undefined"!==typeof MessageChannel){var W=new MessageChannel,M=W.port2;W.port1.onmessage=R,G=function(){M.postMessage(null)}}else G=function(){C(R,0)};function V(e){B=e,w||(w=!0,G())}function F(e,n){x=C((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,V(y))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return i(c)},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},t.unstable_scheduleCallback=function(e,r,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:g++,callback:r,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(u,e),null===i(c)&&e===i(u)&&(I?(m(x),x=-1):I=!0,F(b,a-o))):(e.sortIndex=s,n(c,e),p||f||(p=!0,V(y))),e},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}},5585:function(e,t,n){"use strict";e.exports=n(67)},1372:function(e,t){"use strict";var n,i=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.server_context"),g=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),I=Symbol.for("react.offscreen");function C(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case a:case s:case o:case d:case h:return e;default:switch(e=e&&e.$$typeof){case u:case c:case g:case p:case f:case l:return e;default:return t}}case r:return t}}}n=Symbol.for("react.module.reference"),t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===s||e===o||e===d||e===h||e===I||"object"===typeof e&&null!==e&&(e.$$typeof===p||e.$$typeof===f||e.$$typeof===l||e.$$typeof===c||e.$$typeof===g||e.$$typeof===n||void 0!==e.getModuleId)},t.typeOf=C},7441:function(e,t,n){"use strict";e.exports=n(1372)},4976:function(e,t){"use strict";t.ConcurrentRoot=1,t.ContinuousEventPriority=4,t.DefaultEventPriority=16,t.DiscreteEventPriority=1},3721:function(e,t,n){e.exports=function(e){var t={},i=n(2791),r=n(5296),a=Object.assign;function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),h=Symbol.for("react.provider"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var A=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var b=Symbol.iterator;function y(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=b&&e[b]||e["@@iterator"])?e:null}function G(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case u:return"Fragment";case c:return"Portal";case d:return"Profiler";case g:return"StrictMode";case I:return"Suspense";case C:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case f:return(e.displayName||"Context")+".Consumer";case h:return(e._context.displayName||"Context")+".Provider";case p:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case m:return null!==(t=e.displayName||null)?t:G(e.type)||"Memo";case v:t=e._payload,e=e._init;try{return G(e(t))}catch(n){}}return null}function w(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return G(t);case 8:return t===g?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function B(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function x(e){if(B(e)!==e)throw Error(o(188))}function S(e){var t=e.alternate;if(!t){if(null===(t=B(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var a=r.alternate;if(null===a){if(null!==(i=r.return)){n=i;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===n)return x(r),e;if(a===i)return x(r),t;a=a.sibling}throw Error(o(188))}if(n.return!==i.return)n=r,i=a;else{for(var s=!1,l=r.child;l;){if(l===n){s=!0,n=r,i=a;break}if(l===i){s=!0,i=r,n=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===n){s=!0,n=a,i=r;break}if(l===i){s=!0,i=a,n=r;break}l=l.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==i)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}function Z(e){return null!==(e=S(e))?k(e):null}function k(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=k(e);if(null!==t)return t;e=e.sibling}return null}function R(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){if(4!==e.tag){var t=R(e);if(null!==t)return t}e=e.sibling}return null}var W,M=Array.isArray,V=e.getPublicInstance,F=e.getRootHostContext,N=e.getChildHostContext,H=e.prepareForCommit,T=e.resetAfterCommit,X=e.createInstance,Y=e.appendInitialChild,E=e.finalizeInitialChildren,z=e.prepareUpdate,L=e.shouldSetTextContent,K=e.createTextInstance,_=e.scheduleTimeout,P=e.cancelTimeout,D=e.noTimeout,O=e.isPrimaryRenderer,U=e.supportsMutation,j=e.supportsPersistence,J=e.supportsHydration,Q=e.getInstanceFromNode,q=e.preparePortalMount,$=e.getCurrentEventPriority,ee=e.detachDeletedInstance,te=e.supportsMicrotasks,ne=e.scheduleMicrotask,ie=e.supportsTestSelectors,re=e.findFiberRoot,ae=e.getBoundingRect,oe=e.getTextContent,se=e.isHiddenSubtree,le=e.matchAccessibilityRole,ce=e.setFocusIfFocusable,ue=e.setupIntersectionObserver,ge=e.appendChild,de=e.appendChildToContainer,he=e.commitTextUpdate,fe=e.commitMount,pe=e.commitUpdate,Ie=e.insertBefore,Ce=e.insertInContainerBefore,me=e.removeChild,ve=e.removeChildFromContainer,Ae=e.resetTextContent,be=e.hideInstance,ye=e.hideTextInstance,Ge=e.unhideInstance,we=e.unhideTextInstance,Be=e.clearContainer,xe=e.cloneInstance,Se=e.createContainerChildSet,Ze=e.appendChildToContainerChildSet,ke=e.finalizeContainerChildren,Re=e.replaceContainerChildren,We=e.cloneHiddenInstance,Me=e.cloneHiddenTextInstance,Ve=e.canHydrateInstance,Fe=e.canHydrateTextInstance,Ne=e.canHydrateSuspenseInstance,He=e.isSuspenseInstancePending,Te=e.isSuspenseInstanceFallback,Xe=e.registerSuspenseInstanceRetry,Ye=e.getNextHydratableSibling,Ee=e.getFirstHydratableChild,ze=e.getFirstHydratableChildWithinContainer,Le=e.getFirstHydratableChildWithinSuspenseInstance,Ke=e.hydrateInstance,_e=e.hydrateTextInstance,Pe=e.hydrateSuspenseInstance,De=e.getNextHydratableInstanceAfterSuspenseInstance,Oe=e.commitHydratedContainer,Ue=e.commitHydratedSuspenseInstance,je=e.clearSuspenseBoundary,Je=e.clearSuspenseBoundaryFromContainer,Qe=e.shouldDeleteUnhydratedTailInstances,qe=e.didNotMatchHydratedContainerTextInstance,$e=e.didNotMatchHydratedTextInstance;function et(e){if(void 0===W)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);W=t&&t[1]||""}return"\n"+W+e}var tt=!1;function nt(e,t){if(!e||tt)return"";tt=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var i=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){i=c}e.call(t.prototype)}else{try{throw Error()}catch(c){i=c}e()}}catch(c){if(c&&i&&"string"===typeof c.stack){for(var r=c.stack.split("\n"),a=i.stack.split("\n"),o=r.length-1,s=a.length-1;1<=o&&0<=s&&r[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(r[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||r[o]!==a[s]){var l="\n"+r[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=s);break}}}finally{tt=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?et(e):""}var it=Object.prototype.hasOwnProperty,rt=[],at=-1;function ot(e){return{current:e}}function st(e){0>at||(e.current=rt[at],rt[at]=null,at--)}function lt(e,t){at++,rt[at]=e.current,e.current=t}var ct={},ut=ot(ct),gt=ot(!1),dt=ct;function ht(e,t){var n=e.type.contextTypes;if(!n)return ct;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,a={};for(r in n)a[r]=t[r];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function ft(e){return null!==(e=e.childContextTypes)&&void 0!==e}function pt(){st(gt),st(ut)}function It(e,t,n){if(ut.current!==ct)throw Error(o(168));lt(ut,t),lt(gt,n)}function Ct(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in t))throw Error(o(108,w(e)||"Unknown",r));return a({},n,i)}function mt(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ct,dt=ut.current,lt(ut,e),lt(gt,gt.current),!0}function vt(e,t,n){var i=e.stateNode;if(!i)throw Error(o(169));n?(e=Ct(e,t,dt),i.__reactInternalMemoizedMergedChildContext=e,st(gt),st(ut),lt(ut,e)):st(gt),lt(gt,n)}var At=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(bt(e)/yt|0)|0},bt=Math.log,yt=Math.LN2;var Gt=64,wt=4194304;function Bt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function xt(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,r=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~r;0!==s?i=Bt(s):0!==(a&=o)&&(i=Bt(a))}else 0!==(o=n&~r)?i=Bt(o):0!==a&&(i=Bt(a));if(0===i)return 0;if(0!==t&&t!==i&&0===(t&r)&&((r=i&-i)>=(a=t&-t)||16===r&&0!==(4194240&a)))return t;if(0!==(4&i)&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)r=1<<(n=31-At(t)),i|=e[n],t&=~r;return i}function St(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Zt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function kt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Rt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-At(t)]=n}function Wt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-At(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}var Mt=0;function Vt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var Ft=r.unstable_scheduleCallback,Nt=r.unstable_cancelCallback,Ht=r.unstable_shouldYield,Tt=r.unstable_requestPaint,Xt=r.unstable_now,Yt=r.unstable_ImmediatePriority,Et=r.unstable_UserBlockingPriority,zt=r.unstable_NormalPriority,Lt=r.unstable_IdlePriority,Kt=null,_t=null;var Pt="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},Dt=null,Ot=!1,Ut=!1;function jt(e){null===Dt?Dt=[e]:Dt.push(e)}function Jt(){if(!Ut&&null!==Dt){Ut=!0;var e=0,t=Mt;try{var n=Dt;for(Mt=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}Dt=null,Ot=!1}catch(r){throw null!==Dt&&(Dt=Dt.slice(e+1)),Ft(Yt,Jt),r}finally{Mt=t,Ut=!1}}return null}var Qt=s.ReactCurrentBatchConfig;function qt(e,t){if(Pt(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!it.call(t,r)||!Pt(e[r],t[r]))return!1}return!0}function $t(e){switch(e.tag){case 5:return et(e.type);case 16:return et("Lazy");case 13:return et("Suspense");case 19:return et("SuspenseList");case 0:case 2:case 15:return e=nt(e.type,!1);case 11:return e=nt(e.type.render,!1);case 1:return e=nt(e.type,!0);default:return""}}function en(e,t){if(e&&e.defaultProps){for(var n in t=a({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var tn=ot(null),nn=null,rn=null,an=null;function on(){an=rn=nn=null}function sn(e,t,n){O?(lt(tn,t._currentValue),t._currentValue=n):(lt(tn,t._currentValue2),t._currentValue2=n)}function ln(e){var t=tn.current;st(tn),O?e._currentValue=t:e._currentValue2=t}function cn(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function un(e,t){nn=e,an=rn=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Hr=!0),e.firstContext=null)}function gn(e){var t=O?e._currentValue:e._currentValue2;if(an!==e)if(e={context:e,memoizedValue:t,next:null},null===rn){if(null===nn)throw Error(o(308));rn=e,nn.dependencies={lanes:0,firstContext:e}}else rn=rn.next=e;return t}var dn=null,hn=!1;function fn(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function pn(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function In(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Cn(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,null!==Ua&&0!==(1&e.mode)&&0===(2&Oa)?(null===(e=n.interleaved)?(t.next=t,null===dn?dn=[n]:dn.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function mn(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,Wt(e,n)}}function vn(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?r=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?r=a=t:a=a.next=t}else r=a=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:a,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function An(e,t,n,i){var r=e.updateQueue;hn=!1;var o=r.firstBaseUpdate,s=r.lastBaseUpdate,l=r.shared.pending;if(null!==l){r.shared.pending=null;var c=l,u=c.next;c.next=null,null===s?o=u:s.next=u,s=c;var g=e.alternate;null!==g&&((l=(g=g.updateQueue).lastBaseUpdate)!==s&&(null===l?g.firstBaseUpdate=u:l.next=u,g.lastBaseUpdate=c))}if(null!==o){var d=r.baseState;for(s=0,g=u=c=null,l=o;;){var h=l.lane,f=l.eventTime;if((i&h)===h){null!==g&&(g=g.next={eventTime:f,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=e,I=l;switch(h=t,f=n,I.tag){case 1:if("function"===typeof(p=I.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=I.payload)?p.call(f,d,h):p)||void 0===h)break e;d=a({},d,h);break e;case 2:hn=!0}}null!==l.callback&&0!==l.lane&&(e.flags|=64,null===(h=r.effects)?r.effects=[l]:h.push(l))}else f={eventTime:f,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===g?(u=g=f,c=d):g=g.next=f,s|=h;if(null===(l=l.next)){if(null===(l=r.shared.pending))break;l=(h=l).next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}if(null===g&&(c=d),r.baseState=c,r.firstBaseUpdate=u,r.lastBaseUpdate=g,null!==(t=r.shared.interleaved)){r=t;do{s|=r.lane,r=r.next}while(r!==t)}else null===o&&(r.shared.lanes=0);to|=s,e.lanes=s,e.memoizedState=d}}function bn(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(o(191,r));r.call(i)}}}var yn=(new i.Component).refs;function Gn(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:a({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var wn={isMounted:function(e){return!!(e=e._reactInternals)&&B(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=bo(),r=yo(e),a=In(i,r);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),Cn(e,a),null!==(t=Go(e,r,i))&&mn(t,e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=bo(),r=yo(e),a=In(i,r);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),Cn(e,a),null!==(t=Go(e,r,i))&&mn(t,e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=bo(),i=yo(e),r=In(n,i);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),Cn(e,r),null!==(t=Go(e,i,n))&&mn(t,e,i)}};function Bn(e,t,n,i,r,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!qt(n,i)||!qt(r,a))}function xn(e,t,n){var i=!1,r=ct,a=t.contextType;return"object"===typeof a&&null!==a?a=gn(a):(r=ft(t)?dt:ut.current,a=(i=null!==(i=t.contextTypes)&&void 0!==i)?ht(e,r):ct),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=wn,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=a),t}function Sn(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&wn.enqueueReplaceState(t,t.state,null)}function Zn(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs=yn,fn(e);var a=t.contextType;"object"===typeof a&&null!==a?r.context=gn(a):(a=ft(t)?dt:ut.current,r.context=ht(e,a)),r.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Gn(e,t,a,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&wn.enqueueReplaceState(r,r.state,null),An(e,n,r,i),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}var kn=[],Rn=0,Wn=null,Mn=0,Vn=[],Fn=0,Nn=null,Hn=1,Tn="";function Xn(e,t){kn[Rn++]=Mn,kn[Rn++]=Wn,Wn=e,Mn=t}function Yn(e,t,n){Vn[Fn++]=Hn,Vn[Fn++]=Tn,Vn[Fn++]=Nn,Nn=e;var i=Hn;e=Tn;var r=32-At(i)-1;i&=~(1<<r),n+=1;var a=32-At(t)+r;if(30<a){var o=r-r%5;a=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Hn=1<<32-At(t)+r|n<<r|i,Tn=a+e}else Hn=1<<a|n<<r|i,Tn=e}function En(e){null!==e.return&&(Xn(e,1),Yn(e,1,0))}function zn(e){for(;e===Wn;)Wn=kn[--Rn],kn[Rn]=null,Mn=kn[--Rn],kn[Rn]=null;for(;e===Nn;)Nn=Vn[--Fn],Vn[Fn]=null,Tn=Vn[--Fn],Vn[Fn]=null,Hn=Vn[--Fn],Vn[Fn]=null}var Ln=null,Kn=null,_n=!1,Pn=!1,Dn=null;function On(e,t){var n=qo(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function Un(e,t){switch(e.tag){case 5:return null!==(t=Ve(t,e.type,e.pendingProps))&&(e.stateNode=t,Ln=e,Kn=Ee(t),!0);case 6:return null!==(t=Fe(t,e.pendingProps))&&(e.stateNode=t,Ln=e,Kn=null,!0);case 13:if(null!==(t=Ne(t))){var n=null!==Nn?{id:Hn,overflow:Tn}:null;return e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=qo(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Ln=e,Kn=null,!0}return!1;default:return!1}}function jn(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function Jn(e){if(_n){var t=Kn;if(t){var n=t;if(!Un(e,t)){if(jn(e))throw Error(o(418));t=Ye(n);var i=Ln;t&&Un(e,t)?On(i,n):(e.flags=-4097&e.flags|2,_n=!1,Ln=e)}}else{if(jn(e))throw Error(o(418));e.flags=-4097&e.flags|2,_n=!1,Ln=e}}}function Qn(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ln=e}function qn(e){if(!J||e!==Ln)return!1;if(!_n)return Qn(e),_n=!0,!1;if(3!==e.tag&&(5!==e.tag||Qe(e.type)&&!L(e.type,e.memoizedProps))){var t=Kn;if(t){if(jn(e)){for(e=Kn;e;)e=Ye(e);throw Error(o(418))}for(;t;)On(e,t),t=Ye(t)}}if(Qn(e),13===e.tag){if(!J)throw Error(o(316));if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));Kn=De(e)}else Kn=Ln?Ye(e.stateNode):null;return!0}function $n(){J&&(Kn=Ln=null,Pn=_n=!1)}function ei(e){null===Dn?Dn=[e]:Dn.push(e)}function ti(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var i=n.stateNode}if(!i)throw Error(o(147,e));var r=i,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=r.refs;t===yn&&(t=r.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function ni(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ii(e){return(0,e._init)(e._payload)}function ri(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=es(e,t)).index=0,e.sibling=null,e}function a(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function g(e,t,n,i){return null===t||6!==t.tag?((t=rs(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function d(e,t,n,i){var a=n.type;return a===u?f(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===v&&ii(a)===t.type)?((i=r(t,n.props)).ref=ti(e,t,n),i.return=e,i):((i=ts(n.type,n.key,n.props,null,e.mode,i)).ref=ti(e,t,n),i.return=e,i)}function h(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=as(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function f(e,t,n,i,a){return null===t||7!==t.tag?((t=ns(n,e.mode,i,a)).return=e,t):((t=r(t,n)).return=e,t)}function p(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=rs(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case l:return(n=ts(t.type,t.key,t.props,null,e.mode,n)).ref=ti(e,null,t),n.return=e,n;case c:return(t=as(t,e.mode,n)).return=e,t;case v:return p(e,(0,t._init)(t._payload),n)}if(M(t)||y(t))return(t=ns(t,e.mode,n,null)).return=e,t;ni(e,t)}return null}function I(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:g(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case l:return n.key===r?d(e,t,n,i):null;case c:return n.key===r?h(e,t,n,i):null;case v:return I(e,t,(r=n._init)(n._payload),i)}if(M(n)||y(n))return null!==r?null:f(e,t,n,i,null);ni(e,n)}return null}function C(e,t,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i)return g(t,e=e.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case l:return d(t,e=e.get(null===i.key?n:i.key)||null,i,r);case c:return h(t,e=e.get(null===i.key?n:i.key)||null,i,r);case v:return C(e,t,n,(0,i._init)(i._payload),r)}if(M(i)||y(i))return f(t,e=e.get(n)||null,i,r,null);ni(t,i)}return null}function m(r,o,s,l){for(var c=null,u=null,g=o,d=o=0,h=null;null!==g&&d<s.length;d++){g.index>d?(h=g,g=null):h=g.sibling;var f=I(r,g,s[d],l);if(null===f){null===g&&(g=h);break}e&&g&&null===f.alternate&&t(r,g),o=a(f,o,d),null===u?c=f:u.sibling=f,u=f,g=h}if(d===s.length)return n(r,g),_n&&Xn(r,d),c;if(null===g){for(;d<s.length;d++)null!==(g=p(r,s[d],l))&&(o=a(g,o,d),null===u?c=g:u.sibling=g,u=g);return _n&&Xn(r,d),c}for(g=i(r,g);d<s.length;d++)null!==(h=C(g,r,d,s[d],l))&&(e&&null!==h.alternate&&g.delete(null===h.key?d:h.key),o=a(h,o,d),null===u?c=h:u.sibling=h,u=h);return e&&g.forEach((function(e){return t(r,e)})),_n&&Xn(r,d),c}function A(r,s,l,c){var u=y(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var g=u=null,d=s,h=s=0,f=null,m=l.next();null!==d&&!m.done;h++,m=l.next()){d.index>h?(f=d,d=null):f=d.sibling;var v=I(r,d,m.value,c);if(null===v){null===d&&(d=f);break}e&&d&&null===v.alternate&&t(r,d),s=a(v,s,h),null===g?u=v:g.sibling=v,g=v,d=f}if(m.done)return n(r,d),_n&&Xn(r,h),u;if(null===d){for(;!m.done;h++,m=l.next())null!==(m=p(r,m.value,c))&&(s=a(m,s,h),null===g?u=m:g.sibling=m,g=m);return _n&&Xn(r,h),u}for(d=i(r,d);!m.done;h++,m=l.next())null!==(m=C(d,r,h,m.value,c))&&(e&&null!==m.alternate&&d.delete(null===m.key?h:m.key),s=a(m,s,h),null===g?u=m:g.sibling=m,g=m);return e&&d.forEach((function(e){return t(r,e)})),_n&&Xn(r,h),u}return function e(i,a,o,g){if("object"===typeof o&&null!==o&&o.type===u&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case l:e:{for(var d=o.key,h=a;null!==h;){if(h.key===d){if((d=o.type)===u){if(7===h.tag){n(i,h.sibling),(a=r(h,o.props.children)).return=i,i=a;break e}}else if(h.elementType===d||"object"===typeof d&&null!==d&&d.$$typeof===v&&ii(d)===h.type){n(i,h.sibling),(a=r(h,o.props)).ref=ti(i,h,o),a.return=i,i=a;break e}n(i,h);break}t(i,h),h=h.sibling}o.type===u?((a=ns(o.props.children,i.mode,g,o.key)).return=i,i=a):((g=ts(o.type,o.key,o.props,null,i.mode,g)).ref=ti(i,a,o),g.return=i,i=g)}return s(i);case c:e:{for(h=o.key;null!==a;){if(a.key===h){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(i,a.sibling),(a=r(a,o.children||[])).return=i,i=a;break e}n(i,a);break}t(i,a),a=a.sibling}(a=as(o,i.mode,g)).return=i,i=a}return s(i);case v:return e(i,a,(h=o._init)(o._payload),g)}if(M(o))return m(i,a,o,g);if(y(o))return A(i,a,o,g);ni(i,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(i,a.sibling),(a=r(a,o)).return=i,i=a):(n(i,a),(a=rs(o,i.mode,g)).return=i,i=a),s(i)):n(i,a)}}var ai=ri(!0),oi=ri(!1),si={},li=ot(si),ci=ot(si),ui=ot(si);function gi(e){if(e===si)throw Error(o(174));return e}function di(e,t){lt(ui,t),lt(ci,e),lt(li,si),e=F(t),st(li),lt(li,e)}function hi(){st(li),st(ci),st(ui)}function fi(e){var t=gi(ui.current),n=gi(li.current);n!==(t=N(n,e.type,t))&&(lt(ci,e),lt(li,t))}function pi(e){ci.current===e&&(st(li),st(ci))}var Ii=ot(0);function Ci(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||He(n)||Te(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var mi=[];function vi(){for(var e=0;e<mi.length;e++){var t=mi[e];O?t._workInProgressVersionPrimary=null:t._workInProgressVersionSecondary=null}mi.length=0}var Ai=s.ReactCurrentDispatcher,bi=s.ReactCurrentBatchConfig,yi=0,Gi=null,wi=null,Bi=null,xi=!1,Si=!1,Zi=0,ki=0;function Ri(){throw Error(o(321))}function Wi(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Pt(e[n],t[n]))return!1;return!0}function Mi(e,t,n,i,r,a){if(yi=a,Gi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ai.current=null===e||null===e.memoizedState?fr:pr,e=n(i,r),Si){a=0;do{if(Si=!1,Zi=0,25<=a)throw Error(o(301));a+=1,Bi=wi=null,t.updateQueue=null,Ai.current=Ir,e=n(i,r)}while(Si)}if(Ai.current=hr,t=null!==wi&&null!==wi.next,yi=0,Bi=wi=Gi=null,xi=!1,t)throw Error(o(300));return e}function Vi(){var e=0!==Zi;return Zi=0,e}function Fi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Bi?Gi.memoizedState=Bi=e:Bi=Bi.next=e,Bi}function Ni(){if(null===wi){var e=Gi.alternate;e=null!==e?e.memoizedState:null}else e=wi.next;var t=null===Bi?Gi.memoizedState:Bi.next;if(null!==t)Bi=t,wi=e;else{if(null===e)throw Error(o(310));e={memoizedState:(wi=e).memoizedState,baseState:wi.baseState,baseQueue:wi.baseQueue,queue:wi.queue,next:null},null===Bi?Gi.memoizedState=Bi=e:Bi=Bi.next=e}return Bi}function Hi(e,t){return"function"===typeof t?t(e):t}function Ti(e){var t=Ni(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var i=wi,r=i.baseQueue,a=n.pending;if(null!==a){if(null!==r){var s=r.next;r.next=a.next,a.next=s}i.baseQueue=r=a,n.pending=null}if(null!==r){a=r.next,i=i.baseState;var l=s=null,c=null,u=a;do{var g=u.lane;if((yi&g)===g)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:e(i,u.action);else{var d={lane:g,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,s=i):c=c.next=d,Gi.lanes|=g,to|=g}u=u.next}while(null!==u&&u!==a);null===c?s=i:c.next=l,Pt(i,t.memoizedState)||(Hr=!0),t.memoizedState=i,t.baseState=s,t.baseQueue=c,n.lastRenderedState=i}if(null!==(e=n.interleaved)){r=e;do{a=r.lane,Gi.lanes|=a,to|=a,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Xi(e){var t=Ni(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,a=t.memoizedState;if(null!==r){n.pending=null;var s=r=r.next;do{a=e(a,s.action),s=s.next}while(s!==r);Pt(a,t.memoizedState)||(Hr=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,i]}function Yi(){}function Ei(e,t){var n=Gi,i=Ni(),r=t(),a=!Pt(i.memoizedState,r);if(a&&(i.memoizedState=r,Hr=!0),i=i.queue,Qi(Ki.bind(null,n,i,e),[e]),i.getSnapshot!==t||a||null!==Bi&&1&Bi.memoizedState.tag){if(n.flags|=2048,Di(9,Li.bind(null,n,i,r,t),void 0,null),null===Ua)throw Error(o(349));0!==(30&yi)||zi(n,t,r)}return r}function zi(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Gi.updateQueue)?(t={lastEffect:null,stores:null},Gi.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Li(e,t,n,i){t.value=n,t.getSnapshot=i,_i(t)&&Go(e,1,-1)}function Ki(e,t,n){return n((function(){_i(t)&&Go(e,1,-1)}))}function _i(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Pt(e,n)}catch(i){return!0}}function Pi(e){var t=Fi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:e},t.queue=e,e=e.dispatch=lr.bind(null,Gi,e),[t.memoizedState,e]}function Di(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=Gi.updateQueue)?(t={lastEffect:null,stores:null},Gi.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Oi(){return Ni().memoizedState}function Ui(e,t,n,i){var r=Fi();Gi.flags|=e,r.memoizedState=Di(1|t,n,void 0,void 0===i?null:i)}function ji(e,t,n,i){var r=Ni();i=void 0===i?null:i;var a=void 0;if(null!==wi){var o=wi.memoizedState;if(a=o.destroy,null!==i&&Wi(i,o.deps))return void(r.memoizedState=Di(t,n,a,i))}Gi.flags|=e,r.memoizedState=Di(1|t,n,a,i)}function Ji(e,t){return Ui(8390656,8,e,t)}function Qi(e,t){return ji(2048,8,e,t)}function qi(e,t){return ji(4,2,e,t)}function $i(e,t){return ji(4,4,e,t)}function er(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function tr(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ji(4,4,er.bind(null,t,e),n)}function nr(){}function ir(e,t){var n=Ni();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&Wi(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function rr(e,t){var n=Ni();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&Wi(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function ar(e,t){var n=Mt;Mt=0!==n&&4>n?n:4,e(!0);var i=bi.transition;bi.transition={};try{e(!1),t()}finally{Mt=n,bi.transition=i}}function or(){return Ni().memoizedState}function sr(e,t,n){var i=yo(e);n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},cr(e)?ur(t,n):(gr(e,t,n),null!==(e=Go(e,i,n=bo()))&&dr(e,t,i))}function lr(e,t,n){var i=yo(e),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(cr(e))ur(t,r);else{gr(e,t,r);var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(r.hasEagerState=!0,r.eagerState=s,Pt(s,o))return}catch(l){}null!==(e=Go(e,i,n=bo()))&&dr(e,t,i)}}function cr(e){var t=e.alternate;return e===Gi||null!==t&&t===Gi}function ur(e,t){Si=xi=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function gr(e,t,n){null!==Ua&&0!==(1&e.mode)&&0===(2&Oa)?(null===(e=t.interleaved)?(n.next=n,null===dn?dn=[t]:dn.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function dr(e,t,n){if(0!==(4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,Wt(e,n)}}var hr={readContext:gn,useCallback:Ri,useContext:Ri,useEffect:Ri,useImperativeHandle:Ri,useInsertionEffect:Ri,useLayoutEffect:Ri,useMemo:Ri,useReducer:Ri,useRef:Ri,useState:Ri,useDebugValue:Ri,useDeferredValue:Ri,useTransition:Ri,useMutableSource:Ri,useSyncExternalStore:Ri,useId:Ri,unstable_isNewReconciler:!1},fr={readContext:gn,useCallback:function(e,t){return Fi().memoizedState=[e,void 0===t?null:t],e},useContext:gn,useEffect:Ji,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ui(4194308,4,er.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ui(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ui(4,2,e,t)},useMemo:function(e,t){var n=Fi();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=Fi();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=sr.bind(null,Gi,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},Fi().memoizedState=e},useState:Pi,useDebugValue:nr,useDeferredValue:function(e){var t=Pi(e),n=t[0],i=t[1];return Ji((function(){var t=bi.transition;bi.transition={};try{i(e)}finally{bi.transition=t}}),[e]),n},useTransition:function(){var e=Pi(!1),t=e[0];return e=ar.bind(null,e[1]),Fi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=Gi,r=Fi();if(_n){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Ua)throw Error(o(349));0!==(30&yi)||zi(i,t,n)}r.memoizedState=n;var a={value:n,getSnapshot:t};return r.queue=a,Ji(Ki.bind(null,i,a,e),[e]),i.flags|=2048,Di(9,Li.bind(null,i,a,n,t),void 0,null),n},useId:function(){var e=Fi(),t=Ua.identifierPrefix;if(_n){var n=Tn;t=":"+t+"R"+(n=(Hn&~(1<<32-At(Hn)-1)).toString(32)+n),0<(n=Zi++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ki++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},pr={readContext:gn,useCallback:ir,useContext:gn,useEffect:Qi,useImperativeHandle:tr,useInsertionEffect:qi,useLayoutEffect:$i,useMemo:rr,useReducer:Ti,useRef:Oi,useState:function(){return Ti(Hi)},useDebugValue:nr,useDeferredValue:function(e){var t=Ti(Hi),n=t[0],i=t[1];return Qi((function(){var t=bi.transition;bi.transition={};try{i(e)}finally{bi.transition=t}}),[e]),n},useTransition:function(){return[Ti(Hi)[0],Ni().memoizedState]},useMutableSource:Yi,useSyncExternalStore:Ei,useId:or,unstable_isNewReconciler:!1},Ir={readContext:gn,useCallback:ir,useContext:gn,useEffect:Qi,useImperativeHandle:tr,useInsertionEffect:qi,useLayoutEffect:$i,useMemo:rr,useReducer:Xi,useRef:Oi,useState:function(){return Xi(Hi)},useDebugValue:nr,useDeferredValue:function(e){var t=Xi(Hi),n=t[0],i=t[1];return Qi((function(){var t=bi.transition;bi.transition={};try{i(e)}finally{bi.transition=t}}),[e]),n},useTransition:function(){return[Xi(Hi)[0],Ni().memoizedState]},useMutableSource:Yi,useSyncExternalStore:Ei,useId:or,unstable_isNewReconciler:!1};function Cr(e,t){try{var n="",i=t;do{n+=$t(i),i=i.return}while(i);var r=n}catch(a){r="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:r}}function mr(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var vr,Ar,br,yr,Gr="function"===typeof WeakMap?WeakMap:Map;function wr(e,t,n){(n=In(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){uo||(uo=!0,go=i),mr(0,t)},n}function Br(e,t,n){(n=In(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var r=t.value;n.payload=function(){return i(r)},n.callback=function(){mr(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){mr(0,t),"function"!==typeof i&&(null===ho?ho=new Set([this]):ho.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function xr(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new Gr;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(r.add(n),e=Do.bind(null,e,t,n),t.then(e,e))}function Sr(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function Zr(e,t,n,i,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=In(-1,1)).tag=2,Cn(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}function kr(e){e.flags|=4}function Rr(e,t){if(null!==e&&e.child===t.child)return!0;if(0!==(16&t.flags))return!1;for(e=t.child;null!==e;){if(0!==(12854&e.flags)||0!==(12854&e.subtreeFlags))return!1;e=e.sibling}return!0}if(U)vr=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)Y(e,n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ar=function(){},br=function(e,t,n,i,r){if((e=e.memoizedProps)!==i){var a=t.stateNode,o=gi(li.current);n=z(a,n,e,i,r,o),(t.updateQueue=n)&&kr(t)}},yr=function(e,t,n,i){n!==i&&kr(t)};else if(j){vr=function(e,t,n,i){for(var r=t.child;null!==r;){if(5===r.tag){var a=r.stateNode;n&&i&&(a=We(a,r.type,r.memoizedProps,r)),Y(e,a)}else if(6===r.tag)a=r.stateNode,n&&i&&(a=Me(a,r.memoizedProps,r)),Y(e,a);else if(4!==r.tag)if(22===r.tag&&null!==r.memoizedState)null!==(a=r.child)&&(a.return=r),vr(e,r,!0,!0);else if(null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};var Wr=function e(t,n,i,r){for(var a=n.child;null!==a;){if(5===a.tag){var o=a.stateNode;i&&r&&(o=We(o,a.type,a.memoizedProps,a)),Ze(t,o)}else if(6===a.tag)o=a.stateNode,i&&r&&(o=Me(o,a.memoizedProps,a)),Ze(t,o);else if(4!==a.tag)if(22===a.tag&&null!==a.memoizedState)null!==(o=a.child)&&(o.return=a),e(t,a,!0,!0);else if(null!==a.child){a.child.return=a,a=a.child;continue}if(a===n)break;for(;null===a.sibling;){if(null===a.return||a.return===n)return;a=a.return}a.sibling.return=a.return,a=a.sibling}};Ar=function(e,t){var n=t.stateNode;if(!Rr(e,t)){e=n.containerInfo;var i=Se(e);Wr(i,t,!1,!1),n.pendingChildren=i,kr(t),ke(e,i)}},br=function(e,t,n,i,r){var a=e.stateNode,o=e.memoizedProps;if((e=Rr(e,t))&&o===i)t.stateNode=a;else{var s=t.stateNode,l=gi(li.current),c=null;o!==i&&(c=z(s,n,o,i,r,l)),e&&null===c?t.stateNode=a:(a=xe(a,c,n,o,i,t,e,s),E(a,n,i,r,l)&&kr(t),t.stateNode=a,e?kr(t):vr(a,t,!1,!1))}},yr=function(e,t,n,i){n!==i?(e=gi(ui.current),n=gi(li.current),t.stateNode=K(i,e,n,t),kr(t)):t.stateNode=e.stateNode}}else Ar=function(){},br=function(){},yr=function(){};function Mr(e,t){if(!_n)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Vr(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Fr(e,t,n){var i=t.pendingProps;switch(zn(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vr(t),null;case 1:case 17:return ft(t.type)&&pt(),Vr(t),null;case 3:return i=t.stateNode,hi(),st(gt),st(ut),vi(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(qn(t)?kr(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Dn&&(Zo(Dn),Dn=null))),Ar(e,t),Vr(t),null;case 5:pi(t),n=gi(ui.current);var r=t.type;if(null!==e&&null!=t.stateNode)br(e,t,r,i,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(o(166));return Vr(t),null}if(e=gi(li.current),qn(t)){if(!J)throw Error(o(175));e=Ke(t.stateNode,t.type,t.memoizedProps,n,e,t,!Pn),t.updateQueue=e,null!==e&&kr(t)}else{var a=X(r,i,n,e,t);vr(a,t,!1,!1),t.stateNode=a,E(a,r,i,n,e)&&kr(t)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Vr(t),null;case 6:if(e&&null!=t.stateNode)yr(e,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(o(166));if(e=gi(ui.current),n=gi(li.current),qn(t)){if(!J)throw Error(o(176));if(e=t.stateNode,i=t.memoizedProps,(n=_e(e,i,t,!Pn))&&null!==(r=Ln))switch(a=0!==(1&r.mode),r.tag){case 3:qe(r.stateNode.containerInfo,e,i,a);break;case 5:$e(r.type,r.memoizedProps,r.stateNode,e,i,a)}n&&kr(t)}else t.stateNode=K(i,e,n,t)}return Vr(t),null;case 13:if(st(Ii),i=t.memoizedState,_n&&null!==Kn&&0!==(1&t.mode)&&0===(128&t.flags)){for(e=Kn;e;)e=Ye(e);return $n(),t.flags|=98560,t}if(null!==i&&null!==i.dehydrated){if(i=qn(t),null===e){if(!i)throw Error(o(318));if(!J)throw Error(o(344));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(o(317));Pe(e,t)}else $n(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return Vr(t),null}return null!==Dn&&(Zo(Dn),Dn=null),0!==(128&t.flags)?(t.lanes=n,t):(i=null!==i,n=!1,null===e?qn(t):n=null!==e.memoizedState,i&&!n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Ii.current)?0===$a&&($a=3):Ho())),null!==t.updateQueue&&(t.flags|=4),Vr(t),null);case 4:return hi(),Ar(e,t),null===e&&q(t.stateNode.containerInfo),Vr(t),null;case 10:return ln(t.type._context),Vr(t),null;case 19:if(st(Ii),null===(r=t.memoizedState))return Vr(t),null;if(i=0!==(128&t.flags),null===(a=r.rendering))if(i)Mr(r,!1);else{if(0!==$a||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(a=Ci(e))){for(t.flags|=128,Mr(r,!1),null!==(e=a.updateQueue)&&(t.updateQueue=e,t.flags|=4),t.subtreeFlags=0,e=n,i=t.child;null!==i;)r=e,(n=i).flags&=14680066,null===(a=n.alternate)?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,r=a.dependencies,n.dependencies=null===r?null:{lanes:r.lanes,firstContext:r.firstContext}),i=i.sibling;return lt(Ii,1&Ii.current|2),t.child}e=e.sibling}null!==r.tail&&Xt()>so&&(t.flags|=128,i=!0,Mr(r,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=Ci(a))){if(t.flags|=128,i=!0,null!==(e=e.updateQueue)&&(t.updateQueue=e,t.flags|=4),Mr(r,!0),null===r.tail&&"hidden"===r.tailMode&&!a.alternate&&!_n)return Vr(t),null}else 2*Xt()-r.renderingStartTime>so&&1073741824!==n&&(t.flags|=128,i=!0,Mr(r,!1),t.lanes=4194304);r.isBackwards?(a.sibling=t.child,t.child=a):(null!==(e=r.last)?e.sibling=a:t.child=a,r.last=a)}return null!==r.tail?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=Xt(),t.sibling=null,e=Ii.current,lt(Ii,i?1&e|2:1&e),t):(Vr(t),null);case 22:case 23:return Mo(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!==(1&t.mode)?0!==(1073741824&Qa)&&(Vr(t),U&&6&t.subtreeFlags&&(t.flags|=8192)):Vr(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}var Nr=s.ReactCurrentOwner,Hr=!1;function Tr(e,t,n,i){t.child=null===e?oi(t,null,n,i):ai(t,e.child,n,i)}function Xr(e,t,n,i,r){n=n.render;var a=t.ref;return un(t,r),i=Mi(e,t,n,i,a,r),n=Vi(),null===e||Hr?(_n&&n&&En(t),t.flags|=1,Tr(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,ra(e,t,r))}function Yr(e,t,n,i,r){if(null===e){var a=n.type;return"function"!==typeof a||$o(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=ts(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Er(e,t,a,i,r))}if(a=e.child,0===(e.lanes&r)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:qt)(o,i)&&e.ref===t.ref)return ra(e,t,r)}return t.flags|=1,(e=es(a,i)).ref=t.ref,e.return=t,t.child=e}function Er(e,t,n,i,r){if(null!==e&&qt(e.memoizedProps,i)&&e.ref===t.ref){if(Hr=!1,0===(e.lanes&r))return t.lanes=e.lanes,ra(e,t,r);0!==(131072&e.flags)&&(Hr=!0)}return Kr(e,t,n,i,r)}function zr(e,t,n){var i=t.pendingProps,r=i.children,a=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null},lt(qa,Qa),Qa|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null},t.updateQueue=null,lt(qa,Qa),Qa|=e,null;t.memoizedState={baseLanes:0,cachePool:null},i=null!==a?a.baseLanes:n,lt(qa,Qa),Qa|=i}else null!==a?(i=a.baseLanes|n,t.memoizedState=null):i=n,lt(qa,Qa),Qa|=i;return Tr(e,t,r,n),t.child}function Lr(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Kr(e,t,n,i,r){var a=ft(n)?dt:ut.current;return a=ht(t,a),un(t,r),n=Mi(e,t,n,i,a,r),i=Vi(),null===e||Hr?(_n&&i&&En(t),t.flags|=1,Tr(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,ra(e,t,r))}function _r(e,t,n,i,r){if(ft(n)){var a=!0;mt(t)}else a=!1;if(un(t,r),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),xn(t,n,i),Zn(t,n,i,r),i=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=gn(c):c=ht(t,c=ft(n)?dt:ut.current);var u=n.getDerivedStateFromProps,g="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;g||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==i||l!==c)&&Sn(t,o,i,c),hn=!1;var d=t.memoizedState;o.state=d,An(t,i,o,r),l=t.memoizedState,s!==i||d!==l||gt.current||hn?("function"===typeof u&&(Gn(t,n,u,i),l=t.memoizedState),(s=hn||Bn(t,n,s,i,d,l,c))?(g||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),o.props=i,o.state=l,o.context=c,i=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),i=!1)}else{o=t.stateNode,pn(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:en(t.type,s),o.props=c,g=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=gn(l):l=ht(t,l=ft(n)?dt:ut.current);var h=n.getDerivedStateFromProps;(u="function"===typeof h||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==g||d!==l)&&Sn(t,o,i,l),hn=!1,d=t.memoizedState,o.state=d,An(t,i,o,r);var f=t.memoizedState;s!==g||d!==f||gt.current||hn?("function"===typeof h&&(Gn(t,n,h,i),f=t.memoizedState),(c=hn||Bn(t,n,c,i,d,f,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(i,f,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(i,f,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=f),o.props=i,o.state=f,o.context=l,i=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),i=!1)}return Pr(e,t,n,i,a,r)}function Pr(e,t,n,i,r,a){Lr(e,t);var o=0!==(128&t.flags);if(!i&&!o)return r&&vt(t,n,!1),ra(e,t,a);i=t.stateNode,Nr.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&o?(t.child=ai(t,e.child,null,a),t.child=ai(t,null,s,a)):Tr(e,t,s,a),t.memoizedState=i.state,r&&vt(t,n,!0),t.child}function Dr(e){var t=e.stateNode;t.pendingContext?It(0,t.pendingContext,t.pendingContext!==t.context):t.context&&It(0,t.context,!1),di(e,t.containerInfo)}function Or(e,t,n,i,r){return $n(),ei(r),t.flags|=256,Tr(e,t,n,i),t.child}var Ur={dehydrated:null,treeContext:null,retryLane:0};function jr(e){return{baseLanes:e,cachePool:null}}function Jr(e,t,n){var i,r=t.pendingProps,a=Ii.current,s=!1,l=0!==(128&t.flags);if((i=l)||(i=(null===e||null!==e.memoizedState)&&0!==(2&a)),i?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),lt(Ii,1&a),null===e)return Jn(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:Te(e)?t.lanes=8:t.lanes=1073741824,null):(a=r.children,e=r.fallback,s?(r=t.mode,s=t.child,a={mode:"hidden",children:a},0===(1&r)&&null!==s?(s.childLanes=0,s.pendingProps=a):s=is(a,r,0,null),e=ns(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=jr(n),t.memoizedState=Ur,e):Qr(t,a));if(null!==(a=e.memoizedState)){if(null!==(i=a.dehydrated)){if(l)return 256&t.flags?(t.flags&=-257,ea(e,t,n,Error(o(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,a=t.mode,r=is({mode:"visible",children:r.children},a,0,null),(s=ns(s,a,n,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,0!==(1&t.mode)&&ai(t,e.child,null,n),t.child.memoizedState=jr(n),t.memoizedState=Ur,s);if(0===(1&t.mode))t=ea(e,t,n,null);else if(Te(i))t=ea(e,t,n,Error(o(419)));else if(r=0!==(n&e.childLanes),Hr||r){if(null!==(r=Ua)){switch(n&-n){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(r=0!==(s&(r.suspendedLanes|n))?0:s)&&r!==a.retryLane&&(a.retryLane=r,Go(e,r,-1))}Ho(),t=ea(e,t,n,Error(o(421)))}else He(i)?(t.flags|=128,t.child=e.child,t=Uo.bind(null,e),Xe(i,t),t=null):(n=a.treeContext,J&&(Kn=Le(i),Ln=t,_n=!0,Dn=null,Pn=!1,null!==n&&(Vn[Fn++]=Hn,Vn[Fn++]=Tn,Vn[Fn++]=Nn,Hn=n.id,Tn=n.overflow,Nn=t)),(t=Qr(t,t.pendingProps.children)).flags|=4096);return t}return s?(r=$r(e,t,r.children,r.fallback,n),s=t.child,a=e.child.memoizedState,s.memoizedState=null===a?jr(n):{baseLanes:a.baseLanes|n,cachePool:null},s.childLanes=e.childLanes&~n,t.memoizedState=Ur,r):(n=qr(e,t,r.children,n),t.memoizedState=null,n)}return s?(r=$r(e,t,r.children,r.fallback,n),s=t.child,a=e.child.memoizedState,s.memoizedState=null===a?jr(n):{baseLanes:a.baseLanes|n,cachePool:null},s.childLanes=e.childLanes&~n,t.memoizedState=Ur,r):(n=qr(e,t,r.children,n),t.memoizedState=null,n)}function Qr(e,t){return(t=is({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function qr(e,t,n,i){var r=e.child;return e=r.sibling,n=es(r,{mode:"visible",children:n}),0===(1&t.mode)&&(n.lanes=i),n.return=t,n.sibling=null,null!==e&&(null===(i=t.deletions)?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=n}function $r(e,t,n,i,r){var a=t.mode,o=(e=e.child).sibling,s={mode:"hidden",children:n};return 0===(1&a)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=s,t.deletions=null):(n=es(e,s)).subtreeFlags=14680064&e.subtreeFlags,null!==o?i=es(o,i):(i=ns(i,a,r,null)).flags|=2,i.return=t,n.return=t,n.sibling=i,t.child=n,i}function ea(e,t,n,i){return null!==i&&ei(i),ai(t,e.child,null,n),(e=Qr(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ta(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),cn(e.return,t,n)}function na(e,t,n,i,r){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=n,a.tailMode=r)}function ia(e,t,n){var i=t.pendingProps,r=i.revealOrder,a=i.tail;if(Tr(e,t,i.children,n),0!==(2&(i=Ii.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ta(e,n,t);else if(19===e.tag)ta(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(lt(Ii,i),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===Ci(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),na(t,!1,r,n,a);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===Ci(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}na(t,!0,n,null,a);break;case"together":na(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ra(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),to|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=es(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=es(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function aa(e,t){switch(zn(t),t.tag){case 1:return ft(t.type)&&pt(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return hi(),st(gt),st(ut),vi(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return pi(t),null;case 13:if(st(Ii),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));$n()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return st(Ii),null;case 4:return hi(),null;case 10:return ln(t.type._context),null;case 22:case 23:return Mo(),null;default:return null}}var oa=!1,sa=!1,la="function"===typeof WeakSet?WeakSet:Set,ca=null;function ua(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){Po(e,t,i)}else n.current=null}function ga(e,t,n){try{n()}catch(i){Po(e,t,i)}}var da=!1;function ha(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&e)===e){var a=r.destroy;r.destroy=void 0,void 0!==a&&ga(t,n,a)}r=r.next}while(r!==i)}}function fa(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function pa(e){var t=e.ref;if(null!==t){var n=e.stateNode;if(5===e.tag)e=V(n);else e=n;"function"===typeof t?t(e):t.current=e}}function Ia(e,t,n){if(_t&&"function"===typeof _t.onCommitFiberUnmount)try{_t.onCommitFiberUnmount(Kt,t)}catch(o){}switch(t.tag){case 0:case 11:case 14:case 15:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var i=e=e.next;do{var r=i,a=r.destroy;r=r.tag,void 0!==a&&(0!==(2&r)||0!==(4&r))&&ga(t,n,a),i=i.next}while(i!==e)}break;case 1:if(ua(t,n),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(o){Po(t,n,o)}break;case 5:ua(t,n);break;case 4:U?wa(e,t,n):j&&j&&(t=t.stateNode.containerInfo,n=Se(t),Re(t,n))}}function Ca(e,t,n){for(var i=t;;)if(Ia(e,i,n),null===i.child||U&&4===i.tag){if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}else i.child.return=i,i=i.child}function ma(e){var t=e.alternate;null!==t&&(e.alternate=null,ma(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&ee(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function va(e){return 5===e.tag||3===e.tag||4===e.tag}function Aa(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||va(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ba(e){if(U){e:{for(var t=e.return;null!==t;){if(va(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(n.tag){case 5:t=n.stateNode,32&n.flags&&(Ae(t),n.flags&=-33),Ga(e,n=Aa(e),t);break;case 3:case 4:t=n.stateNode.containerInfo,ya(e,n=Aa(e),t);break;default:throw Error(o(161))}}}function ya(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?Ce(n,e,t):de(n,e);else if(4!==i&&null!==(e=e.child))for(ya(e,t,n),e=e.sibling;null!==e;)ya(e,t,n),e=e.sibling}function Ga(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?Ie(n,e,t):ge(n,e);else if(4!==i&&null!==(e=e.child))for(Ga(e,t,n),e=e.sibling;null!==e;)Ga(e,t,n),e=e.sibling}function wa(e,t,n){for(var i,r,a=t,s=!1;;){if(!s){s=a.return;e:for(;;){if(null===s)throw Error(o(160));switch(i=s.stateNode,s.tag){case 5:r=!1;break e;case 3:case 4:i=i.containerInfo,r=!0;break e}s=s.return}s=!0}if(5===a.tag||6===a.tag)Ca(e,a,n),r?ve(i,a.stateNode):me(i,a.stateNode);else if(18===a.tag)r?Je(i,a.stateNode):je(i,a.stateNode);else if(4===a.tag){if(null!==a.child){i=a.stateNode.containerInfo,r=!0,a.child.return=a,a=a.child;continue}}else if(Ia(e,a,n),null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)return;4===(a=a.return).tag&&(s=!1)}a.sibling.return=a.return,a=a.sibling}}function Ba(e,t){if(U){switch(t.tag){case 0:case 11:case 14:case 15:return ha(3,t,t.return),fa(3,t),void ha(5,t,t.return);case 1:case 12:case 17:return;case 5:var n=t.stateNode;if(null!=n){var i=t.memoizedProps;e=null!==e?e.memoizedProps:i;var r=t.type,a=t.updateQueue;t.updateQueue=null,null!==a&&pe(n,a,r,e,i,t)}return;case 6:if(null===t.stateNode)throw Error(o(162));return n=t.memoizedProps,void he(t.stateNode,null!==e?e.memoizedProps:n,n);case 3:return void(J&&null!==e&&e.memoizedState.isDehydrated&&Oe(t.stateNode.containerInfo));case 13:case 19:return void xa(t)}throw Error(o(163))}switch(t.tag){case 0:case 11:case 14:case 15:return ha(3,t,t.return),fa(3,t),void ha(5,t,t.return);case 12:case 22:case 23:return;case 13:case 19:return void xa(t);case 3:J&&null!==e&&e.memoizedState.isDehydrated&&Oe(t.stateNode.containerInfo)}e:if(j){switch(t.tag){case 1:case 5:case 6:break e;case 3:case 4:t=t.stateNode,Re(t.containerInfo,t.pendingChildren);break e}throw Error(o(163))}}function xa(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new la),t.forEach((function(t){var i=jo.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))}))}}function Sa(e,t,n){ca=e,Za(e,t,n)}function Za(e,t,n){for(var i=0!==(1&e.mode);null!==ca;){var r=ca,a=r.child;if(22===r.tag&&i){var o=null!==r.memoizedState||oa;if(!o){var s=r.alternate,l=null!==s&&null!==s.memoizedState||sa;s=oa;var c=sa;if(oa=o,(sa=l)&&!c)for(ca=r;null!==ca;)l=(o=ca).child,22===o.tag&&null!==o.memoizedState?Wa(r):null!==l?(l.return=o,ca=l):Wa(r);for(;null!==a;)ca=a,Za(a,t,n),a=a.sibling;ca=r,oa=s,sa=c}ka(e)}else 0!==(8772&r.subtreeFlags)&&null!==a?(a.return=r,ca=a):ka(e)}}function ka(e){for(;null!==ca;){var t=ca;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:sa||fa(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!sa)if(null===n)i.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:en(t.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&bn(t,a,i);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:n=V(t.child.stateNode);break;case 1:n=t.child.stateNode}bn(t,s,n)}break;case 5:var l=t.stateNode;null===n&&4&t.flags&&fe(l,t.type,t.memoizedProps,t);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(J&&null===t.memoizedState){var c=t.alternate;if(null!==c){var u=c.memoizedState;if(null!==u){var g=u.dehydrated;null!==g&&Ue(g)}}}break;default:throw Error(o(163))}sa||512&t.flags&&pa(t)}catch(d){Po(t,t.return,d)}}if(t===e){ca=null;break}if(null!==(n=t.sibling)){n.return=t.return,ca=n;break}ca=t.return}}function Ra(e){for(;null!==ca;){var t=ca;if(t===e){ca=null;break}var n=t.sibling;if(null!==n){n.return=t.return,ca=n;break}ca=t.return}}function Wa(e){for(;null!==ca;){var t=ca;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{fa(4,t)}catch(l){Po(t,n,l)}break;case 1:var i=t.stateNode;if("function"===typeof i.componentDidMount){var r=t.return;try{i.componentDidMount()}catch(l){Po(t,r,l)}}var a=t.return;try{pa(t)}catch(l){Po(t,a,l)}break;case 5:var o=t.return;try{pa(t)}catch(l){Po(t,o,l)}}}catch(l){Po(t,t.return,l)}if(t===e){ca=null;break}var s=t.sibling;if(null!==s){s.return=t.return,ca=s;break}ca=t.return}}var Ma=0,Va=1,Fa=2,Na=3,Ha=4;if("function"===typeof Symbol&&Symbol.for){var Ta=Symbol.for;Ma=Ta("selector.component"),Va=Ta("selector.has_pseudo_class"),Fa=Ta("selector.role"),Na=Ta("selector.test_id"),Ha=Ta("selector.text")}function Xa(e){var t=Q(e);if(null!=t){if("string"!==typeof t.memoizedProps["data-testname"])throw Error(o(364));return t}if(null===(e=re(e)))throw Error(o(362));return e.stateNode.current}function Ya(e,t){switch(t.$$typeof){case Ma:if(e.type===t.value)return!0;break;case Va:e:{t=t.value,e=[e,0];for(var n=0;n<e.length;){var i=e[n++],r=e[n++],a=t[r];if(5!==i.tag||!se(i)){for(;null!=a&&Ya(i,a);)a=t[++r];if(r===t.length){t=!0;break e}for(i=i.child;null!==i;)e.push(i,r),i=i.sibling}}t=!1}return t;case Fa:if(5===e.tag&&le(e.stateNode,t.value))return!0;break;case Ha:if((5===e.tag||6===e.tag)&&(null!==(e=oe(e))&&0<=e.indexOf(t.value)))return!0;break;case Na:if(5===e.tag&&("string"===typeof(e=e.memoizedProps["data-testname"])&&e.toLowerCase()===t.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function Ea(e){switch(e.$$typeof){case Ma:return"<"+(G(e.value)||"Unknown")+">";case Va:return":has("+(Ea(e)||"")+")";case Fa:return'[role="'+e.value+'"]';case Ha:return'"'+e.value+'"';case Na:return'[data-testname="'+e.value+'"]';default:throw Error(o(365))}}function za(e,t){var n=[];e=[e,0];for(var i=0;i<e.length;){var r=e[i++],a=e[i++],o=t[a];if(5!==r.tag||!se(r)){for(;null!=o&&Ya(r,o);)o=t[++a];if(a===t.length)n.push(r);else for(r=r.child;null!==r;)e.push(r,a),r=r.sibling}}return n}function La(e,t){if(!ie)throw Error(o(363));e=za(e=Xa(e),t),t=[],e=Array.from(e);for(var n=0;n<e.length;){var i=e[n++];if(5===i.tag)se(i)||t.push(i.stateNode);else for(i=i.child;null!==i;)e.push(i),i=i.sibling}return t}var Ka=Math.ceil,_a=s.ReactCurrentDispatcher,Pa=s.ReactCurrentOwner,Da=s.ReactCurrentBatchConfig,Oa=0,Ua=null,ja=null,Ja=0,Qa=0,qa=ot(0),$a=0,eo=null,to=0,no=0,io=0,ro=null,ao=null,oo=0,so=1/0;function lo(){so=Xt()+500}var co,uo=!1,go=null,ho=null,fo=!1,po=null,Io=0,Co=0,mo=null,vo=-1,Ao=0;function bo(){return 0!==(6&Oa)?Xt():-1!==vo?vo:vo=Xt()}function yo(e){return 0===(1&e.mode)?1:0!==(2&Oa)&&0!==Ja?Ja&-Ja:null!==Qt.transition?(0===Ao&&(e=Gt,0===(4194240&(Gt<<=1))&&(Gt=64),Ao=e),Ao):0!==(e=Mt)?e:$()}function Go(e,t,n){if(50<Co)throw Co=0,mo=null,Error(o(185));var i=wo(e,t);return null===i?null:(Rt(i,t,n),0!==(2&Oa)&&i===Ua||(i===Ua&&(0===(2&Oa)&&(no|=t),4===$a&&ko(i,Ja)),Bo(i,n),1===t&&0===Oa&&0===(1&e.mode)&&(lo(),Ot&&Jt())),i)}function wo(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function Bo(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-At(a),s=1<<o,l=r[o];-1===l?0!==(s&n)&&0===(s&i)||(r[o]=St(s,t)):l<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var i=xt(e,e===Ua?Ja:0);if(0===i)null!==n&&Nt(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&Nt(n),1===t)0===e.tag?function(e){Ot=!0,jt(e)}(Ro.bind(null,e)):jt(Ro.bind(null,e)),te?ne((function(){0===Oa&&Jt()})):Ft(Yt,Jt),n=null;else{switch(Vt(i)){case 1:n=Yt;break;case 4:n=Et;break;case 16:default:n=zt;break;case 536870912:n=Lt}n=Jo(n,xo.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function xo(e,t){if(vo=-1,Ao=0,0!==(6&Oa))throw Error(o(327));var n=e.callbackNode;if(Ko()&&e.callbackNode!==n)return null;var i=xt(e,e===Ua?Ja:0);if(0===i)return null;if(0!==(30&i)||0!==(i&e.expiredLanes)||t)t=To(e,i);else{t=i;var r=Oa;Oa|=2;var a=No();for(Ua===e&&Ja===t||(lo(),Vo(e,t));;)try{Yo();break}catch(l){Fo(e,l)}on(),_a.current=a,Oa=r,null!==ja?t=0:(Ua=null,Ja=0,t=$a)}if(0!==t){if(2===t&&(0!==(r=Zt(e))&&(i=r,t=So(e,r))),1===t)throw n=eo,Vo(e,0),ko(e,i),Bo(e,Xt()),n;if(6===t)ko(e,i);else{if(r=e.current.alternate,0===(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],a=r.getSnapshot;r=r.value;try{if(!Pt(a(),r))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=To(e,i))&&(0!==(a=Zt(e))&&(i=a,t=So(e,a))),1===t))throw n=eo,Vo(e,0),ko(e,i),Bo(e,Xt()),n;switch(e.finishedWork=r,e.finishedLanes=i,t){case 0:case 1:throw Error(o(345));case 2:case 5:Lo(e,ao);break;case 3:if(ko(e,i),(130023424&i)===i&&10<(t=oo+500-Xt())){if(0!==xt(e,0))break;if(((r=e.suspendedLanes)&i)!==i){bo(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=_(Lo.bind(null,e,ao),t);break}Lo(e,ao);break;case 4:if(ko(e,i),(4194240&i)===i)break;for(t=e.eventTimes,r=-1;0<i;){var s=31-At(i);a=1<<s,(s=t[s])>r&&(r=s),i&=~a}if(i=r,10<(i=(120>(i=Xt()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Ka(i/1960))-i)){e.timeoutHandle=_(Lo.bind(null,e,ao),i);break}Lo(e,ao);break;default:throw Error(o(329))}}}return Bo(e,Xt()),e.callbackNode===n?xo.bind(null,e):null}function So(e,t){var n=ro;return e.current.memoizedState.isDehydrated&&(Vo(e,t).flags|=256),2!==(e=To(e,t))&&(t=ao,ao=n,null!==t&&Zo(t)),e}function Zo(e){null===ao?ao=e:ao.push.apply(ao,e)}function ko(e,t){for(t&=~io,t&=~no,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-At(t),i=1<<n;e[n]=-1,t&=~i}}function Ro(e){if(0!==(6&Oa))throw Error(o(327));Ko();var t=xt(e,0);if(0===(1&t))return Bo(e,Xt()),null;var n=To(e,t);if(0!==e.tag&&2===n){var i=Zt(e);0!==i&&(t=i,n=So(e,i))}if(1===n)throw n=eo,Vo(e,0),ko(e,t),Bo(e,Xt()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Lo(e,ao),Bo(e,Xt()),null}function Wo(e){null!==po&&0===po.tag&&0===(6&Oa)&&Ko();var t=Oa;Oa|=1;var n=Da.transition,i=Mt;try{if(Da.transition=null,Mt=1,e)return e()}finally{Mt=i,Da.transition=n,0===(6&(Oa=t))&&Jt()}}function Mo(){Qa=qa.current,st(qa)}function Vo(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==D&&(e.timeoutHandle=D,P(n)),null!==ja)for(n=ja.return;null!==n;){var i=n;switch(zn(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&pt();break;case 3:hi(),st(gt),st(ut),vi();break;case 5:pi(i);break;case 4:hi();break;case 13:case 19:st(Ii);break;case 10:ln(i.type._context);break;case 22:case 23:Mo()}n=n.return}if(Ua=e,ja=e=es(e.current,null),Ja=Qa=t,$a=0,eo=null,io=no=to=0,ao=ro=null,null!==dn){for(t=0;t<dn.length;t++)if(null!==(i=(n=dn[t]).interleaved)){n.interleaved=null;var r=i.next,a=n.pending;if(null!==a){var o=a.next;a.next=r,i.next=o}n.pending=i}dn=null}return e}function Fo(e,t){for(;;){var n=ja;try{if(on(),Ai.current=hr,xi){for(var i=Gi.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}xi=!1}if(yi=0,Bi=wi=Gi=null,Si=!1,Zi=0,Pa.current=null,null===n||null===n.return){$a=1,eo=t,ja=null;break}e:{var a=e,s=n.return,l=n,c=t;if(t=Ja,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,g=l,d=g.tag;if(0===(1&g.mode)&&(0===d||11===d||15===d)){var h=g.alternate;h?(g.updateQueue=h.updateQueue,g.memoizedState=h.memoizedState,g.lanes=h.lanes):(g.updateQueue=null,g.memoizedState=null)}var f=Sr(s);if(null!==f){f.flags&=-257,Zr(f,s,l,0,t),1&f.mode&&xr(a,u,t),c=u;var p=(t=f).updateQueue;if(null===p){var I=new Set;I.add(c),t.updateQueue=I}else p.add(c);break e}if(0===(1&t)){xr(a,u,t),Ho();break e}c=Error(o(426))}else if(_n&&1&l.mode){var C=Sr(s);if(null!==C){0===(65536&C.flags)&&(C.flags|=256),Zr(C,s,l,0,t),ei(c);break e}}a=c,4!==$a&&($a=2),null===ro?ro=[a]:ro.push(a),c=Cr(c,l),l=s;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t,vn(l,wr(0,c,t));break e;case 1:a=c;var m=l.type,v=l.stateNode;if(0===(128&l.flags)&&("function"===typeof m.getDerivedStateFromError||null!==v&&"function"===typeof v.componentDidCatch&&(null===ho||!ho.has(v)))){l.flags|=65536,t&=-t,l.lanes|=t,vn(l,Br(l,a,t));break e}}l=l.return}while(null!==l)}zo(n)}catch(A){t=A,ja===n&&null!==n&&(ja=n=n.return);continue}break}}function No(){var e=_a.current;return _a.current=hr,null===e?hr:e}function Ho(){0!==$a&&3!==$a&&2!==$a||($a=4),null===Ua||0===(268435455&to)&&0===(268435455&no)||ko(Ua,Ja)}function To(e,t){var n=Oa;Oa|=2;var i=No();for(Ua===e&&Ja===t||Vo(e,t);;)try{Xo();break}catch(r){Fo(e,r)}if(on(),Oa=n,_a.current=i,null!==ja)throw Error(o(261));return Ua=null,Ja=0,$a}function Xo(){for(;null!==ja;)Eo(ja)}function Yo(){for(;null!==ja&&!Ht();)Eo(ja)}function Eo(e){var t=co(e.alternate,e,Qa);e.memoizedProps=e.pendingProps,null===t?zo(e):ja=t,Pa.current=null}function zo(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Fr(n,t,Qa)))return void(ja=n)}else{if(null!==(n=aa(n,t)))return n.flags&=32767,void(ja=n);if(null===e)return $a=6,void(ja=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(ja=t);ja=t=e}while(null!==t);0===$a&&($a=5)}function Lo(e,t){var n=Mt,i=Da.transition;try{Da.transition=null,Mt=1,function(e,t,n){do{Ko()}while(null!==po);if(0!==(6&Oa))throw Error(o(327));var i=e.finishedWork,r=e.finishedLanes;if(null===i)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var a=i.lanes|i.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-At(n),a=1<<r;t[r]=0,i[r]=-1,e[r]=-1,n&=~a}}(e,a),e===Ua&&(ja=Ua=null,Ja=0),0===(2064&i.subtreeFlags)&&0===(2064&i.flags)||fo||(fo=!0,Jo(zt,(function(){return Ko(),null}))),a=0!==(15990&i.flags),0!==(15990&i.subtreeFlags)||a){a=Da.transition,Da.transition=null;var s=Mt;Mt=1;var l=Oa;Oa|=4,Pa.current=null,function(e,t){for(H(e.containerInfo),ca=t;null!==ca;)if(t=(e=ca).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,ca=t;else for(;null!==ca;){e=ca;try{var n=e.alternate;if(0!==(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==n){var i=n.memoizedProps,r=n.memoizedState,a=e.stateNode,s=a.getSnapshotBeforeUpdate(e.elementType===e.type?i:en(e.type,i),r);a.__reactInternalSnapshotBeforeUpdate=s}break;case 3:U&&Be(e.stateNode.containerInfo);break;default:throw Error(o(163))}}catch(l){Po(e,e.return,l)}if(null!==(t=e.sibling)){t.return=e.return,ca=t;break}ca=e.return}n=da,da=!1}(e,i),function(e,t){for(ca=t;null!==ca;){var n=(t=ca).deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var a=e;U?wa(a,r,t):Ca(a,r,t);var o=r.alternate;null!==o&&(o.return=null),r.return=null}catch(b){Po(r,t,b)}}if(n=t.child,0!==(12854&t.subtreeFlags)&&null!==n)n.return=t,ca=n;else for(;null!==ca;){t=ca;try{var s=t.flags;if(32&s&&U&&Ae(t.stateNode),512&s){var l=t.alternate;if(null!==l){var c=l.ref;null!==c&&("function"===typeof c?c(null):c.current=null)}}if(8192&s)switch(t.tag){case 13:if(null!==t.memoizedState){var u=t.alternate;null!==u&&null!==u.memoizedState||(oo=Xt())}break;case 22:var g=null!==t.memoizedState,d=t.alternate,h=null!==d&&null!==d.memoizedState;if(n=t,U)e:if(i=n,r=g,a=null,U)for(var f=i;;){if(5===f.tag){if(null===a){a=f;var p=f.stateNode;r?be(p):Ge(f.stateNode,f.memoizedProps)}}else if(6===f.tag){if(null===a){var I=f.stateNode;r?ye(I):we(I,f.memoizedProps)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===i)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===i)break;for(;null===f.sibling;){if(null===f.return||f.return===i)break e;a===f&&(a=null),f=f.return}a===f&&(a=null),f.sibling.return=f.return,f=f.sibling}if(g&&!h&&0!==(1&n.mode)){ca=n;for(var C=n.child;null!==C;){for(n=ca=C;null!==ca;){var m=(i=ca).child;switch(i.tag){case 0:case 11:case 14:case 15:ha(4,i,i.return);break;case 1:ua(i,i.return);var v=i.stateNode;if("function"===typeof v.componentWillUnmount){var A=i.return;try{v.props=i.memoizedProps,v.state=i.memoizedState,v.componentWillUnmount()}catch(b){Po(i,A,b)}}break;case 5:ua(i,i.return);break;case 22:if(null!==i.memoizedState){Ra(n);continue}}null!==m?(m.return=i,ca=m):Ra(n)}C=C.sibling}}}switch(4102&s){case 2:ba(t),t.flags&=-3;break;case 6:ba(t),t.flags&=-3,Ba(t.alternate,t);break;case 4096:t.flags&=-4097;break;case 4100:t.flags&=-4097,Ba(t.alternate,t);break;case 4:Ba(t.alternate,t)}}catch(b){Po(t,t.return,b)}if(null!==(n=t.sibling)){n.return=t.return,ca=n;break}ca=t.return}}}(e,i),T(e.containerInfo),e.current=i,Sa(i,e,r),Tt(),Oa=l,Mt=s,Da.transition=a}else e.current=i;if(fo&&(fo=!1,po=e,Io=r),a=e.pendingLanes,0===a&&(ho=null),function(e){if(_t&&"function"===typeof _t.onCommitFiberRoot)try{_t.onCommitFiberRoot(Kt,e,void 0,128===(128&e.current.flags))}catch(t){}}(i.stateNode),Bo(e,Xt()),null!==t)for(n=e.onRecoverableError,i=0;i<t.length;i++)n(t[i]);if(uo)throw uo=!1,e=go,go=null,e;0!==(1&Io)&&0!==e.tag&&Ko(),a=e.pendingLanes,0!==(1&a)?e===mo?Co++:(Co=0,mo=e):Co=0,Jt()}(e,t,n)}finally{Da.transition=i,Mt=n}return null}function Ko(){if(null!==po){var e=Vt(Io),t=Da.transition,n=Mt;try{if(Da.transition=null,Mt=16>e?16:e,null===po)var i=!1;else{if(e=po,po=null,Io=0,0!==(6&Oa))throw Error(o(331));var r=Oa;for(Oa|=4,ca=e.current;null!==ca;){var a=ca,s=a.child;if(0!==(16&ca.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(ca=u;null!==ca;){var g=ca;switch(g.tag){case 0:case 11:case 15:ha(8,g,a)}var d=g.child;if(null!==d)d.return=g,ca=d;else for(;null!==ca;){var h=(g=ca).sibling,f=g.return;if(ma(g),g===u){ca=null;break}if(null!==h){h.return=f,ca=h;break}ca=f}}}var p=a.alternate;if(null!==p){var I=p.child;if(null!==I){p.child=null;do{var C=I.sibling;I.sibling=null,I=C}while(null!==I)}}ca=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,ca=s;else e:for(;null!==ca;){if(0!==(2048&(a=ca).flags))switch(a.tag){case 0:case 11:case 15:ha(9,a,a.return)}var m=a.sibling;if(null!==m){m.return=a.return,ca=m;break e}ca=a.return}}var v=e.current;for(ca=v;null!==ca;){var A=(s=ca).child;if(0!==(2064&s.subtreeFlags)&&null!==A)A.return=s,ca=A;else e:for(s=v;null!==ca;){if(0!==(2048&(l=ca).flags))try{switch(l.tag){case 0:case 11:case 15:fa(9,l)}}catch(y){Po(l,l.return,y)}if(l===s){ca=null;break e}var b=l.sibling;if(null!==b){b.return=l.return,ca=b;break e}ca=l.return}}if(Oa=r,Jt(),_t&&"function"===typeof _t.onPostCommitFiberRoot)try{_t.onPostCommitFiberRoot(Kt,e)}catch(y){}i=!0}return i}finally{Mt=n,Da.transition=t}}return!1}function _o(e,t,n){Cn(e,t=wr(0,t=Cr(n,t),1)),t=bo(),null!==(e=wo(e,1))&&(Rt(e,1,t),Bo(e,t))}function Po(e,t,n){if(3===e.tag)_o(e,e,n);else for(;null!==t;){if(3===t.tag){_o(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===ho||!ho.has(i))){Cn(t,e=Br(t,e=Cr(n,e),1)),e=bo(),null!==(t=wo(t,1))&&(Rt(t,1,e),Bo(t,e));break}}t=t.return}}function Do(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=bo(),e.pingedLanes|=e.suspendedLanes&n,Ua===e&&(Ja&n)===n&&(4===$a||3===$a&&(130023424&Ja)===Ja&&500>Xt()-oo?Vo(e,0):io|=n),Bo(e,t)}function Oo(e,t){0===t&&(0===(1&e.mode)?t=1:(t=wt,0===(130023424&(wt<<=1))&&(wt=4194304)));var n=bo();null!==(e=wo(e,t))&&(Rt(e,t,n),Bo(e,n))}function Uo(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Oo(e,n)}function jo(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(o(314))}null!==i&&i.delete(t),Oo(e,n)}function Jo(e,t){return Ft(e,t)}function Qo(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qo(e,t,n,i){return new Qo(e,t,n,i)}function $o(e){return!(!(e=e.prototype)||!e.isReactComponent)}function es(e,t){var n=e.alternate;return null===n?((n=qo(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ts(e,t,n,i,r,a){var s=2;if(i=e,"function"===typeof e)$o(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case u:return ns(n.children,r,a,t);case g:s=8,r|=8;break;case d:return(e=qo(12,n,t,2|r)).elementType=d,e.lanes=a,e;case I:return(e=qo(13,n,t,r)).elementType=I,e.lanes=a,e;case C:return(e=qo(19,n,t,r)).elementType=C,e.lanes=a,e;case A:return is(n,r,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case h:s=10;break e;case f:s=9;break e;case p:s=11;break e;case m:s=14;break e;case v:s=16,i=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=qo(s,n,t,r)).elementType=e,t.type=i,t.lanes=a,t}function ns(e,t,n,i){return(e=qo(7,e,i,t)).lanes=n,e}function is(e,t,n,i){return(e=qo(22,e,i,t)).elementType=A,e.lanes=n,e.stateNode={},e}function rs(e,t,n){return(e=qo(6,e,null,t)).lanes=n,e}function as(e,t,n){return(t=qo(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function os(e,t,n,i,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=D,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=kt(0),this.expirationTimes=kt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kt(0),this.identifierPrefix=i,this.onRecoverableError=r,J&&(this.mutableSourceEagerHydrationData=null)}function ss(e,t,n,i,r,a,o,s,l){return e=new os(e,t,n,s,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=qo(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null},fn(a),e}function ls(e){if(!e)return ct;e:{if(B(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ft(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(ft(n))return Ct(e,n,t)}return t}function cs(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return null===(e=Z(t))?null:e.stateNode}function us(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function gs(e,t){us(e,t),(e=e.alternate)&&us(e,t)}function ds(e){return null===(e=Z(e))?null:e.stateNode}function hs(){return null}return co=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||gt.current)Hr=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return Hr=!1,function(e,t,n){switch(t.tag){case 3:Dr(t),$n();break;case 5:fi(t);break;case 1:ft(t.type)&&mt(t);break;case 4:di(t,t.stateNode.containerInfo);break;case 10:sn(0,t.type._context,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(null!==i)return null!==i.dehydrated?(lt(Ii,1&Ii.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Jr(e,t,n):(lt(Ii,1&Ii.current),null!==(e=ra(e,t,n))?e.sibling:null);lt(Ii,1&Ii.current);break;case 19:if(i=0!==(n&t.childLanes),0!==(128&e.flags)){if(i)return ia(e,t,n);t.flags|=128}var r=t.memoizedState;if(null!==r&&(r.rendering=null,r.tail=null,r.lastEffect=null),lt(Ii,Ii.current),i)break;return null;case 22:case 23:return t.lanes=0,zr(e,t,n)}return ra(e,t,n)}(e,t,n);Hr=0!==(131072&e.flags)}else Hr=!1,_n&&0!==(1048576&t.flags)&&Yn(t,Mn,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var r=ht(t,ut.current);un(t,n),r=Mi(null,t,i,e,r,n);var a=Vi();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ft(i)?(a=!0,mt(t)):a=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,fn(t),r.updater=wn,t.stateNode=r,r._reactInternals=t,Zn(t,i,e,n),t=Pr(null,t,i,!0,a,n)):(t.tag=0,_n&&a&&En(t),Tr(null,t,r,n),t=t.child),t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(r=i._init)(i._payload),t.type=i,r=t.tag=function(e){if("function"===typeof e)return $o(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===p)return 11;if(e===m)return 14}return 2}(i),e=en(i,e),r){case 0:t=Kr(null,t,i,e,n);break e;case 1:t=_r(null,t,i,e,n);break e;case 11:t=Xr(null,t,i,e,n);break e;case 14:t=Yr(null,t,i,en(i.type,e),n);break e}throw Error(o(306,i,""))}return t;case 0:return i=t.type,r=t.pendingProps,Kr(e,t,i,r=t.elementType===i?r:en(i,r),n);case 1:return i=t.type,r=t.pendingProps,_r(e,t,i,r=t.elementType===i?r:en(i,r),n);case 3:e:{if(Dr(t),null===e)throw Error(o(387));i=t.pendingProps,r=(a=t.memoizedState).element,pn(e,t),An(t,i,null,n);var s=t.memoizedState;if(i=s.element,J&&a.isDehydrated){if(a={element:i,isDehydrated:!1,cache:s.cache,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Or(e,t,i,n,r=Error(o(423)));break e}if(i!==r){t=Or(e,t,i,n,r=Error(o(424)));break e}for(J&&(Kn=ze(t.stateNode.containerInfo),Ln=t,_n=!0,Dn=null,Pn=!1),n=oi(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if($n(),i===r){t=ra(e,t,n);break e}Tr(e,t,i,n)}t=t.child}return t;case 5:return fi(t),null===e&&Jn(t),i=t.type,r=t.pendingProps,a=null!==e?e.memoizedProps:null,s=r.children,L(i,r)?s=null:null!==a&&L(i,a)&&(t.flags|=32),Lr(e,t),Tr(e,t,s,n),t.child;case 6:return null===e&&Jn(t),null;case 13:return Jr(e,t,n);case 4:return di(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=ai(t,null,i,n):Tr(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,Xr(e,t,i,r=t.elementType===i?r:en(i,r),n);case 7:return Tr(e,t,t.pendingProps,n),t.child;case 8:case 12:return Tr(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,r=t.pendingProps,a=t.memoizedProps,sn(0,i,s=r.value),null!==a)if(Pt(a.value,s)){if(a.children===r.children&&!gt.current){t=ra(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){s=a.child;for(var c=l.firstContext;null!==c;){if(c.context===i){if(1===a.tag){(c=In(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var g=(u=u.shared).pending;null===g?c.next=c:(c.next=g.next,g.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),cn(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),cn(s,n,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}Tr(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=t.pendingProps.children,un(t,n),i=i(r=gn(r)),t.flags|=1,Tr(e,t,i,n),t.child;case 14:return r=en(i=t.type,t.pendingProps),Yr(e,t,i,r=en(i.type,r),n);case 15:return Er(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:en(i,r),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,ft(i)?(e=!0,mt(t)):e=!1,un(t,n),xn(t,i,r),Zn(t,i,r,n),Pr(null,t,i,!0,e,n);case 19:return ia(e,t,n);case 22:return zr(e,t,n)}throw Error(o(156,t.tag))},t.attemptContinuousHydration=function(e){13===e.tag&&(Go(e,134217728,bo()),gs(e,134217728))},t.attemptHydrationAtCurrentPriority=function(e){if(13===e.tag){var t=bo(),n=yo(e);Go(e,n,t),gs(e,n)}},t.attemptSynchronousHydration=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Bt(t.pendingLanes);0!==n&&(Wt(t,1|n),Bo(t,Xt()),0===(6&Oa)&&(lo(),Jt()))}break;case 13:var i=bo();Wo((function(){return Go(e,1,i)})),gs(e,1)}},t.batchedUpdates=function(e,t){var n=Oa;Oa|=1;try{return e(t)}finally{0===(Oa=n)&&(lo(),Ot&&Jt())}},t.createComponentSelector=function(e){return{$$typeof:Ma,value:e}},t.createContainer=function(e,t,n,i,r,a,o){return ss(e,t,!1,null,0,i,0,a,o)},t.createHasPseudoClassSelector=function(e){return{$$typeof:Va,value:e}},t.createHydrationContainer=function(e,t,n,i,r,a,o,s,l){return(e=ss(n,i,!0,e,0,a,0,s,l)).context=ls(null),n=e.current,(a=In(i=bo(),r=yo(n))).callback=void 0!==t&&null!==t?t:null,Cn(n,a),e.current.lanes=r,Rt(e,r,i),Bo(e,i),e},t.createPortal=function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:c,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}},t.createRoleSelector=function(e){return{$$typeof:Fa,value:e}},t.createTestNameSelector=function(e){return{$$typeof:Na,value:e}},t.createTextSelector=function(e){return{$$typeof:Ha,value:e}},t.deferredUpdates=function(e){var t=Mt,n=Da.transition;try{return Da.transition=null,Mt=16,e()}finally{Mt=t,Da.transition=n}},t.discreteUpdates=function(e,t,n,i,r){var a=Mt,o=Da.transition;try{return Da.transition=null,Mt=1,e(t,n,i,r)}finally{Mt=a,Da.transition=o,0===Oa&&lo()}},t.findAllNodes=La,t.findBoundingRects=function(e,t){if(!ie)throw Error(o(363));t=La(e,t),e=[];for(var n=0;n<t.length;n++)e.push(ae(t[n]));for(t=e.length-1;0<t;t--)for(var i=(n=e[t]).x,r=i+n.width,a=n.y,s=a+n.height,l=t-1;0<=l;l--)if(t!==l){var c=e[l],u=c.x,g=u+c.width,d=c.y,h=d+c.height;if(i>=u&&a>=d&&r<=g&&s<=h){e.splice(t,1);break}if(!(i!==u||n.width!==c.width||h<a||d>s)){d>a&&(c.height+=d-a,c.y=a),h<s&&(c.height=s-d),e.splice(t,1);break}if(!(a!==d||n.height!==c.height||g<i||u>r)){u>i&&(c.width+=u-i,c.x=i),g<r&&(c.width=r-u),e.splice(t,1);break}}return e},t.findHostInstance=cs,t.findHostInstanceWithNoPortals=function(e){return null===(e=null!==(e=S(e))?R(e):null)?null:e.stateNode},t.findHostInstanceWithWarning=function(e){return cs(e)},t.flushControlled=function(e){var t=Oa;Oa|=1;var n=Da.transition,i=Mt;try{Da.transition=null,Mt=1,e()}finally{Mt=i,Da.transition=n,0===(Oa=t)&&(lo(),Jt())}},t.flushPassiveEffects=Ko,t.flushSync=Wo,t.focusWithin=function(e,t){if(!ie)throw Error(o(363));for(t=za(e=Xa(e),t),t=Array.from(t),e=0;e<t.length;){var n=t[e++];if(!se(n)){if(5===n.tag&&ce(n.stateNode))return!0;for(n=n.child;null!==n;)t.push(n),n=n.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Mt},t.getFindAllNodesFailureDescription=function(e,t){if(!ie)throw Error(o(363));var n=0,i=[];e=[Xa(e),0];for(var r=0;r<e.length;){var a=e[r++],s=e[r++],l=t[s];if((5!==a.tag||!se(a))&&(Ya(a,l)&&(i.push(Ea(l)),++s>n&&(n=s)),s<t.length))for(a=a.child;null!==a;)e.push(a,s),a=a.sibling}if(n<t.length){for(e=[];n<t.length;n++)e.push(Ea(t[n]));return"findAllNodes was able to match part of the selector:\n  "+i.join(" > ")+"\n\nNo matching component was found for:\n  "+e.join(" > ")}return null},t.getPublicRootInstance=function(e){return(e=e.current).child?5===e.child.tag?V(e.child.stateNode):e.child.stateNode:null},t.injectIntoDevTools=function(e){if(e={bundleType:e.bundleType,version:e.version,rendererPackageName:e.rendererPackageName,rendererConfig:e.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:s.ReactCurrentDispatcher,findHostInstanceByFiber:ds,findFiberByHostInstance:e.findFiberByHostInstance||hs,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},"undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)e=!1;else{var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)e=!0;else{try{Kt=t.inject(e),_t=t}catch(n){}e=!!t.checkDCE}}return e},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(e,t,n,i){if(!ie)throw Error(o(363));e=La(e,t);var r=ue(e,n,i).disconnect;return{disconnect:function(){r()}}},t.registerMutableSourceForHydration=function(e,t){var n=t._getVersion;n=n(t._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[t,n]:e.mutableSourceEagerHydrationData.push(t,n)},t.runWithPriority=function(e,t){var n=Mt;try{return Mt=e,t()}finally{Mt=n}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(e,t,n,i){var r=t.current,a=bo(),o=yo(r);return n=ls(n),null===t.context?t.context=n:t.pendingContext=n,(t=In(a,o)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),Cn(r,t),null!==(e=Go(r,o,a))&&mn(e,r,o),o},t}},4585:function(e,t,n){"use strict";e.exports=n(4976)},258:function(e,t,n){"use strict";e.exports=n(3721)},9195:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,i=n?Symbol.for("react.element"):60103,r=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,g=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,h=n?Symbol.for("react.suspense"):60113,f=n?Symbol.for("react.suspense_list"):60120,p=n?Symbol.for("react.memo"):60115,I=n?Symbol.for("react.lazy"):60116,C=n?Symbol.for("react.block"):60121,m=n?Symbol.for("react.fundamental"):60117,v=n?Symbol.for("react.responder"):60118,A=n?Symbol.for("react.scope"):60119;function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case u:case g:case a:case s:case o:case h:return e;default:switch(e=e&&e.$$typeof){case c:case d:case I:case p:case l:return e;default:return t}}case r:return t}}}function y(e){return b(e)===g}},8228:function(e,t,n){"use strict";n(9195)},2592:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=o(n(2791)),a=o(n(7585));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"render",value:function(){return r.default.createElement("input",this.props,this.props.children)}}]),t}(r.default.Component);t.default=(0,a.default)(s)},5532:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=l(n(2791)),o=l(n(671)),s=l(n(2007));function l(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"render",value:function(){var e=this,t=i({},this.props);return t.parentBindings&&delete t.parentBindings,a.default.createElement("div",i({},t,{ref:function(t){e.props.parentBindings.domNode=t}}),this.props.children)}}]),t}(a.default.Component);c.propTypes={name:s.default.string,id:s.default.string},t.default=(0,o.default)(c)},4582:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(2791)),r=a(n(7585));function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var s=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,s=Array(a),l=0;l<a;l++)s[l]=arguments[l];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),r.render=function(){return i.default.createElement("a",r.props,r.props.children)},o(r,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(i.default.Component);t.default=(0,r.default)(s)},5667:function(e,t,n){"use strict";t.rU=void 0;var i=h(n(4582)),r=h(n(2592)),a=h(n(5532)),o=h(n(2338)),s=h(n(979)),l=h(n(3688)),c=h(n(4102)),u=h(n(7585)),g=h(n(671)),d=h(n(719));function h(e){return e&&e.__esModule?e:{default:e}}t.rU=i.default,r.default,a.default,o.default,s.default,l.default,c.default,u.default,g.default,d.default,i.default,r.default,a.default,o.default,s.default,l.default,c.default,u.default,g.default,d.default},719:function(e,t,n){"use strict";var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=n(2791),c=(n(4164),n(5183),n(3688)),u=n(2338),g=n(2007),d=n(5203),h={to:g.string.isRequired,containerId:g.string,container:g.object,activeClass:g.string,spy:g.bool,smooth:g.oneOfType([g.bool,g.string]),offset:g.number,delay:g.number,isDynamic:g.bool,onClick:g.func,duration:g.oneOfType([g.number,g.func]),absolute:g.bool,onSetActive:g.func,onSetInactive:g.func,ignoreCancelEvents:g.bool,hashSpy:g.bool,spyThrottle:g.number},f={Scroll:function(e,t){console.warn("Helpers.Scroll is deprecated since v1.7.0");var n=t||u,g=function(t){function u(e){a(this,u);var t=o(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,e));return f.call(t),t.state={active:!1},t}return s(u,t),r(u,[{key:"getScrollSpyContainer",value:function(){var e=this.props.containerId,t=this.props.container;return e?document.getElementById(e):t&&t.nodeType?t:document}},{key:"componentDidMount",value:function(){if(this.props.spy||this.props.hashSpy){var e=this.getScrollSpyContainer();c.isMounted(e)||c.mount(e,this.props.spyThrottle),this.props.hashSpy&&(d.isMounted()||d.mount(n),d.mapContainer(this.props.to,e)),this.props.spy&&c.addStateHandler(this.stateHandler),c.addSpyHandler(this.spyHandler,e),this.setState({container:e})}}},{key:"componentWillUnmount",value:function(){c.unmount(this.stateHandler,this.spyHandler)}},{key:"render",value:function(){var t="";t=this.state&&this.state.active?((this.props.className||"")+" "+(this.props.activeClass||"active")).trim():this.props.className;var n=i({},this.props);for(var r in h)n.hasOwnProperty(r)&&delete n[r];return n.className=t,n.onClick=this.handleClick,l.createElement(e,n)}}]),u}(l.Component),f=function(){var e=this;this.scrollTo=function(t,r){n.scrollTo(t,i({},e.state,r))},this.handleClick=function(t){e.props.onClick&&e.props.onClick(t),t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),e.scrollTo(e.props.to,e.props)},this.stateHandler=function(){n.getActiveLink()!==e.props.to&&(null!==e.state&&e.state.active&&e.props.onSetInactive&&e.props.onSetInactive(),e.setState({active:!1}))},this.spyHandler=function(t){var i=e.getScrollSpyContainer();if(!d.isMounted()||d.isInitialized()){var r=e.props.to,a=null,o=0,s=0,l=0;if(i.getBoundingClientRect)l=i.getBoundingClientRect().top;if(!a||e.props.isDynamic){if(!(a=n.get(r)))return;var u=a.getBoundingClientRect();s=(o=u.top-l+t)+u.height}var g=t-e.props.offset,h=g>=Math.floor(o)&&g<Math.floor(s),f=g<Math.floor(o)||g>=Math.floor(s),p=n.getActiveLink();return f?(r===p&&n.setActiveLink(void 0),e.props.hashSpy&&d.getHash()===r&&d.changeHash(),e.props.spy&&e.state.active&&(e.setState({active:!1}),e.props.onSetInactive&&e.props.onSetInactive()),c.updateStates()):h&&p!==r?(n.setActiveLink(r),e.props.hashSpy&&d.changeHash(r),e.props.spy&&(e.setState({active:!0}),e.props.onSetActive&&e.props.onSetActive(r)),c.updateStates()):void 0}}};return g.propTypes=h,g.defaultProps={offset:0},g},Element:function(e){console.warn("Helpers.Element is deprecated since v1.7.0");var t=function(t){function n(e){a(this,n);var t=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.childBindings={domNode:null},t}return s(n,t),r(n,[{key:"componentDidMount",value:function(){if("undefined"===typeof window)return!1;this.registerElems(this.props.name)}},{key:"componentDidUpdate",value:function(e){this.props.name!==e.name&&this.registerElems(this.props.name)}},{key:"componentWillUnmount",value:function(){if("undefined"===typeof window)return!1;u.unregister(this.props.name)}},{key:"registerElems",value:function(e){u.register(e,this.childBindings.domNode)}},{key:"render",value:function(){return l.createElement(e,i({},this.props,{parentBindings:this.childBindings}))}}]),n}(l.Component);return t.propTypes={name:g.string,id:g.string},t}};e.exports=f},4102:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=(s(n(5183)),s(n(3987))),a=s(n(8616)),o=s(n(979));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(e){return r.default[e.smooth]||r.default.defaultEasing},c=function(){if("undefined"!==typeof window)return window.requestAnimationFrame||window.webkitRequestAnimationFrame}()||function(e,t,n){window.setTimeout(e,n||1e3/60,(new Date).getTime())},u=function(e){var t=e.data.containerElement;if(t&&t!==document&&t!==document.body)return t.scrollLeft;var n=void 0!==window.pageXOffset,i="CSS1Compat"===(document.compatMode||"");return n?window.pageXOffset:i?document.documentElement.scrollLeft:document.body.scrollLeft},g=function(e){var t=e.data.containerElement;if(t&&t!==document&&t!==document.body)return t.scrollTop;var n=void 0!==window.pageXOffset,i="CSS1Compat"===(document.compatMode||"");return n?window.pageYOffset:i?document.documentElement.scrollTop:document.body.scrollTop},d=function e(t,n,i){var r=n.data;if(n.ignoreCancelEvents||!r.cancel)if(r.delta=Math.round(r.targetPosition-r.startPosition),null===r.start&&(r.start=i),r.progress=i-r.start,r.percent=r.progress>=r.duration?1:t(r.progress/r.duration),r.currentPosition=r.startPosition+Math.ceil(r.delta*r.percent),r.containerElement&&r.containerElement!==document&&r.containerElement!==document.body?n.horizontal?r.containerElement.scrollLeft=r.currentPosition:r.containerElement.scrollTop=r.currentPosition:n.horizontal?window.scrollTo(r.currentPosition,0):window.scrollTo(0,r.currentPosition),r.percent<1){var a=e.bind(null,t,n);c.call(window,a)}else o.default.registered.end&&o.default.registered.end(r.to,r.target,r.currentPosition);else o.default.registered.end&&o.default.registered.end(r.to,r.target,r.currentPositionY)},h=function(e){e.data.containerElement=e?e.containerId?document.getElementById(e.containerId):e.container&&e.container.nodeType?e.container:document:null},f=function(e,t,n,i){if(t.data=t.data||{currentPosition:0,startPosition:0,targetPosition:0,progress:0,duration:0,cancel:!1,target:null,containerElement:null,to:null,start:null,delta:null,percent:null,delayTimeout:null},window.clearTimeout(t.data.delayTimeout),a.default.subscribe((function(){t.data.cancel=!0})),h(t),t.data.start=null,t.data.cancel=!1,t.data.startPosition=t.horizontal?u(t):g(t),t.data.targetPosition=t.absolute?e:e+t.data.startPosition,t.data.startPosition!==t.data.targetPosition){var r;t.data.delta=Math.round(t.data.targetPosition-t.data.startPosition),t.data.duration=("function"===typeof(r=t.duration)?r:function(){return r})(t.data.delta),t.data.duration=isNaN(parseFloat(t.data.duration))?1e3:parseFloat(t.data.duration),t.data.to=n,t.data.target=i;var s=l(t),f=d.bind(null,s,t);t&&t.delay>0?t.data.delayTimeout=window.setTimeout((function(){o.default.registered.begin&&o.default.registered.begin(t.data.to,t.data.target),c.call(window,f)}),t.delay):(o.default.registered.begin&&o.default.registered.begin(t.data.to,t.data.target),c.call(window,f))}else o.default.registered.end&&o.default.registered.end(t.data.to,t.data.target,t.data.currentPosition)},p=function(e){return(e=i({},e)).data=e.data||{currentPosition:0,startPosition:0,targetPosition:0,progress:0,duration:0,cancel:!1,target:null,containerElement:null,to:null,start:null,delta:null,percent:null,delayTimeout:null},e.absolute=!0,e};t.default={animateTopScroll:f,getAnimationType:l,scrollToTop:function(e){f(0,p(e))},scrollToBottom:function(e){e=p(e),h(e),f(e.horizontal?function(e){var t=e.data.containerElement;if(t&&t!==document&&t!==document.body)return t.scrollWidth-t.offsetWidth;var n=document.body,i=document.documentElement;return Math.max(n.scrollWidth,n.offsetWidth,i.clientWidth,i.scrollWidth,i.offsetWidth)}(e):function(e){var t=e.data.containerElement;if(t&&t!==document&&t!==document.body)return t.scrollHeight-t.offsetHeight;var n=document.body,i=document.documentElement;return Math.max(n.scrollHeight,n.offsetHeight,i.clientHeight,i.scrollHeight,i.offsetHeight)}(e),e)},scrollTo:function(e,t){f(e,p(t))},scrollMore:function(e,t){t=p(t),h(t);var n=t.horizontal?u(t):g(t);f(e+n,t)}}},8616:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(4360),r=["mousedown","mousewheel","touchmove","keydown"];t.default={subscribe:function(e){return"undefined"!==typeof document&&r.forEach((function(t){return(0,i.addPassiveEventListener)(document,t,e)}))}}},4360:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.addPassiveEventListener=function(e,t,n){var i=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t)}catch(n){}return e}();e.addEventListener(t,n,!!i&&{passive:!0})},t.removePassiveEventListener=function(e,t,n){e.removeEventListener(t,n)}},671:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=l(n(2791)),o=(l(n(4164)),l(n(2338))),s=l(n(2007));function l(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.childBindings={domNode:null},t}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),r(n,[{key:"componentDidMount",value:function(){if("undefined"===typeof window)return!1;this.registerElems(this.props.name)}},{key:"componentDidUpdate",value:function(e){this.props.name!==e.name&&this.registerElems(this.props.name)}},{key:"componentWillUnmount",value:function(){if("undefined"===typeof window)return!1;o.default.unregister(this.props.name)}},{key:"registerElems",value:function(e){o.default.register(e,this.childBindings.domNode)}},{key:"render",value:function(){return a.default.createElement(e,i({},this.props,{parentBindings:this.childBindings}))}}]),n}(a.default.Component);return t.propTypes={name:s.default.string,id:s.default.string},t}},979:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={registered:{},scrollEvent:{register:function(e,t){n.registered[e]=t},remove:function(e){n.registered[e]=null}}};t.default=n},5203:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n(4360);var i,r=n(5183),a=(i=r)&&i.__esModule?i:{default:i};var o={mountFlag:!1,initialized:!1,scroller:null,containers:{},mount:function(e){this.scroller=e,this.handleHashChange=this.handleHashChange.bind(this),window.addEventListener("hashchange",this.handleHashChange),this.initStateFromHash(),this.mountFlag=!0},mapContainer:function(e,t){this.containers[e]=t},isMounted:function(){return this.mountFlag},isInitialized:function(){return this.initialized},initStateFromHash:function(){var e=this,t=this.getHash();t?window.setTimeout((function(){e.scrollTo(t,!0),e.initialized=!0}),10):this.initialized=!0},scrollTo:function(e,t){var n=this.scroller;if(n.get(e)&&(t||e!==n.getActiveLink())){var i=this.containers[e]||document;n.scrollTo(e,{container:i})}},getHash:function(){return a.default.getHash()},changeHash:function(e,t){this.isInitialized()&&a.default.getHash()!==e&&a.default.updateHash(e,t)},handleHashChange:function(){this.scrollTo(this.getHash())},unmount:function(){this.scroller=null,this.containers=null,window.removeEventListener("hashchange",this.handleHashChange)}};t.default=o},7585:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=u(n(2791)),o=u(n(3688)),s=u(n(2338)),l=u(n(2007)),c=u(n(5203));function u(e){return e&&e.__esModule?e:{default:e}}var g={to:l.default.string.isRequired,containerId:l.default.string,container:l.default.object,activeClass:l.default.string,activeStyle:l.default.object,spy:l.default.bool,horizontal:l.default.bool,smooth:l.default.oneOfType([l.default.bool,l.default.string]),offset:l.default.number,delay:l.default.number,isDynamic:l.default.bool,onClick:l.default.func,duration:l.default.oneOfType([l.default.number,l.default.func]),absolute:l.default.bool,onSetActive:l.default.func,onSetInactive:l.default.func,ignoreCancelEvents:l.default.bool,hashSpy:l.default.bool,saveHashHistory:l.default.bool,spyThrottle:l.default.number};t.default=function(e,t){var n=t||s.default,l=function(t){function s(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e));return u.call(t),t.state={active:!1},t}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,t),r(s,[{key:"getScrollSpyContainer",value:function(){var e=this.props.containerId,t=this.props.container;return e&&!t?document.getElementById(e):t&&t.nodeType?t:document}},{key:"componentDidMount",value:function(){if(this.props.spy||this.props.hashSpy){var e=this.getScrollSpyContainer();o.default.isMounted(e)||o.default.mount(e,this.props.spyThrottle),this.props.hashSpy&&(c.default.isMounted()||c.default.mount(n),c.default.mapContainer(this.props.to,e)),o.default.addSpyHandler(this.spyHandler,e),this.setState({container:e})}}},{key:"componentWillUnmount",value:function(){o.default.unmount(this.stateHandler,this.spyHandler)}},{key:"render",value:function(){var t="";t=this.state&&this.state.active?((this.props.className||"")+" "+(this.props.activeClass||"active")).trim():this.props.className;var n={};n=this.state&&this.state.active?i({},this.props.style,this.props.activeStyle):i({},this.props.style);var r=i({},this.props);for(var o in g)r.hasOwnProperty(o)&&delete r[o];return r.className=t,r.style=n,r.onClick=this.handleClick,a.default.createElement(e,r)}}]),s}(a.default.PureComponent),u=function(){var e=this;this.scrollTo=function(t,r){n.scrollTo(t,i({},e.state,r))},this.handleClick=function(t){e.props.onClick&&e.props.onClick(t),t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),e.scrollTo(e.props.to,e.props)},this.spyHandler=function(t,i){var r=e.getScrollSpyContainer();if(!c.default.isMounted()||c.default.isInitialized()){var a=e.props.horizontal,o=e.props.to,s=null,l=void 0,u=void 0;if(a){var g=0,d=0,h=0;if(r.getBoundingClientRect)h=r.getBoundingClientRect().left;if(!s||e.props.isDynamic){if(!(s=n.get(o)))return;var f=s.getBoundingClientRect();d=(g=f.left-h+t)+f.width}var p=t-e.props.offset;l=p>=Math.floor(g)&&p<Math.floor(d),u=p<Math.floor(g)||p>=Math.floor(d)}else{var I=0,C=0,m=0;if(r.getBoundingClientRect)m=r.getBoundingClientRect().top;if(!s||e.props.isDynamic){if(!(s=n.get(o)))return;var v=s.getBoundingClientRect();C=(I=v.top-m+i)+v.height}var A=i-e.props.offset;l=A>=Math.floor(I)&&A<Math.floor(C),u=A<Math.floor(I)||A>=Math.floor(C)}var b=n.getActiveLink();if(u){if(o===b&&n.setActiveLink(void 0),e.props.hashSpy&&c.default.getHash()===o){var y=e.props.saveHashHistory,G=void 0!==y&&y;c.default.changeHash("",G)}e.props.spy&&e.state.active&&(e.setState({active:!1}),e.props.onSetInactive&&e.props.onSetInactive(o,s))}if(l&&(b!==o||!1===e.state.active)){n.setActiveLink(o);var w=e.props.saveHashHistory,B=void 0!==w&&w;e.props.hashSpy&&c.default.changeHash(o,B),e.props.spy&&(e.setState({active:!0}),e.props.onSetActive&&e.props.onSetActive(o,s))}}}};return l.propTypes=g,l.defaultProps={offset:0},l}},3688:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(3881),a=(i=r)&&i.__esModule?i:{default:i},o=n(4360);var s={spyCallbacks:[],spySetState:[],scrollSpyContainers:[],mount:function(e,t){if(e){var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:66;return(0,a.default)(e,t)}((function(t){s.scrollHandler(e)}),t);s.scrollSpyContainers.push(e),(0,o.addPassiveEventListener)(e,"scroll",n)}},isMounted:function(e){return-1!==s.scrollSpyContainers.indexOf(e)},currentPositionX:function(e){if(e===document){var t=void 0!==window.pageYOffset,n="CSS1Compat"===(document.compatMode||"");return t?window.pageXOffset:n?document.documentElement.scrollLeft:document.body.scrollLeft}return e.scrollLeft},currentPositionY:function(e){if(e===document){var t=void 0!==window.pageXOffset,n="CSS1Compat"===(document.compatMode||"");return t?window.pageYOffset:n?document.documentElement.scrollTop:document.body.scrollTop}return e.scrollTop},scrollHandler:function(e){(s.scrollSpyContainers[s.scrollSpyContainers.indexOf(e)].spyCallbacks||[]).forEach((function(t){return t(s.currentPositionX(e),s.currentPositionY(e))}))},addStateHandler:function(e){s.spySetState.push(e)},addSpyHandler:function(e,t){var n=s.scrollSpyContainers[s.scrollSpyContainers.indexOf(t)];n.spyCallbacks||(n.spyCallbacks=[]),n.spyCallbacks.push(e),e(s.currentPositionX(t),s.currentPositionY(t))},updateStates:function(){s.spySetState.forEach((function(e){return e()}))},unmount:function(e,t){s.scrollSpyContainers.forEach((function(e){return e.spyCallbacks&&e.spyCallbacks.length&&e.spyCallbacks.indexOf(t)>-1&&e.spyCallbacks.splice(e.spyCallbacks.indexOf(t),1)})),s.spySetState&&s.spySetState.length&&s.spySetState.indexOf(e)>-1&&s.spySetState.splice(s.spySetState.indexOf(e),1),document.removeEventListener("scroll",s.scrollHandler)},update:function(){return s.scrollSpyContainers.forEach((function(e){return s.scrollHandler(e)}))}};t.default=s},2338:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=s(n(5183)),a=s(n(4102)),o=s(n(979));function s(e){return e&&e.__esModule?e:{default:e}}var l={},c=void 0;t.default={unmount:function(){l={}},register:function(e,t){l[e]=t},unregister:function(e){delete l[e]},get:function(e){return l[e]||document.getElementById(e)||document.getElementsByName(e)[0]||document.getElementsByClassName(e)[0]},setActiveLink:function(e){return c=e},getActiveLink:function(){return c},scrollTo:function(e,t){var n=this.get(e);if(n){var s=(t=i({},t,{absolute:!1})).containerId,l=t.container,c=void 0;c=s?document.getElementById(s):l&&l.nodeType?l:document,t.absolute=!0;var u=t.horizontal,g=r.default.scrollOffset(c,n,u)+(t.offset||0);if(!t.smooth)return o.default.registered.begin&&o.default.registered.begin(e,n),c===document?t.horizontal?window.scrollTo(g,0):window.scrollTo(0,g):c.scrollTop=g,void(o.default.registered.end&&o.default.registered.end(e,n));a.default.animateTopScroll(g,t,e,n)}else console.warn("target Element not found")}}},3987:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={defaultEasing:function(e){return e<.5?Math.pow(2*e,2)/2:1-Math.pow(2*(1-e),2)/2},linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:(4-2*e)*e-1},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}}},5183:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){for(var n=e.offsetTop,i=e.offsetParent;i&&!t(i);)n+=i.offsetTop,i=i.offsetParent;return{offsetTop:n,offsetParent:i}};t.default={updateHash:function(e,t){var n=0===e.indexOf("#")?e.substring(1):e,i=n?"#"+n:"",r=window&&window.location,a=i?r.pathname+r.search+i:r.pathname+r.search;t?history.pushState(history.state,"",a):history.replaceState(history.state,"",a)},getHash:function(){return window.location.hash.replace(/^#/,"")},filterElementInContainer:function(e){return function(t){return e.contains?e!=t&&e.contains(t):!!(16&e.compareDocumentPosition(t))}},scrollOffset:function(e,t,i){if(i)return e===document?t.getBoundingClientRect().left+(window.scrollX||window.pageXOffset):"static"!==getComputedStyle(e).position?t.offsetLeft:t.offsetLeft-e.offsetLeft;if(e===document)return t.getBoundingClientRect().top+(window.scrollY||window.pageYOffset);if("static"!==getComputedStyle(e).position){if(t.offsetParent!==e){var r=n(t,(function(t){return t===e||t===document})),a=r.offsetTop;if(r.offsetParent!==e)throw new Error("Seems containerElement is not an ancestor of the Element");return a}return t.offsetTop}if(t.offsetParent===e.offsetParent)return t.offsetTop-e.offsetTop;var o=function(e){return e===document};return n(t,o).offsetTop-n(e,o).offsetTop}}},7003:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Unity=void 0;var i=n(2791),r=n(2791),a=n(6445),o=n(8802),s=n(8604),l=n(6428),c=(0,r.forwardRef)((function(e,t){var n=(0,r.useRef)(null),c=(0,a.useUnityCanvasId)(),u=(0,s.useUnityArguments)(e),g=(0,l.useUnityLoader)(e.unityProvider.unityConfig);return(0,o.useUnityInstance)(g,n.current,u,e.unityProvider),(0,i.useImperativeHandle)(t,(function(){return n.current})),(0,i.createElement)("canvas",{ref:n,id:c,style:e.style,className:e.className,tabIndex:e.tabIndex})}));t.Unity=c},9774:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorMessages=void 0;t.errorMessages={genericNoUnityInstance:"No Unity Instance found.",requestFullscreenNoUnityInstance:"Unable to Set Fullscreen while Unity is not Instantiated.",requestPointerLockNoUnityInstanceOrCanvas:"Unable to Request Pointer Lock while Unity is not Instantiated or the Canvas is not found.",sendMessageNoUnityInstance:"Unable to Send Message while Unity is not Instantiated.",quitNoUnityInstance:"Unable to Quit Unity while Unity is not Instantiated.",screenshotNoUnityInstanceOrCanvas:"Unable to Take Screenshot while Unity is not Instantiated or Canvas is not available.",noEventListener:"Unable to find Event Listener in Event System for Event"}},7359:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isBrowserEnvironment=void 0,t.isBrowserEnvironment="undefined"!==typeof window&&"undefined"!==typeof document},7229:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.UnityLoaderStatus=void 0,function(e){e.Idle="Idle",e.Loading="Loading",e.Loaded="Loaded",e.Error="Error"}(n||(n={})),t.UnityLoaderStatus=n},5277:function(e,t,n){"use strict";var i=n(7003);var r=n(7138)},4773:function(e,t,n){"use strict";var i=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var i,r=0,a=t.length;r<a;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.useEventSystem=void 0;var r=n(2791),a=n(9774),o=n(7359),s=[];!0===o.isBrowserEnvironment&&(window.dispatchReactUnityEvent=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=void 0;return s.forEach((function(n){r=n.apply(void 0,i([e],t,!1))})),r});t.useEventSystem=function(){var e=(0,r.useRef)([]),t=(0,r.useCallback)((function(t,n){e.current=i(i([],e.current,!0),[{eventName:t,callback:n}],!1)}),[e]),n=(0,r.useCallback)((function(t,n){e.current=e.current.filter((function(e){return e.eventName!==t&&e.callback!==n}))}),[e]),o=(0,r.useCallback)((function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var r=e.current.find((function(e){return e.eventName===t}));if("undefined"!==typeof r)return r.callback.apply(r,n);console.warn(a.errorMessages.noEventListener,{eventName:t})}),[e]);return(0,r.useEffect)((function(){return s.push(o),function(){s.splice(s.indexOf(o),1)}}),[o]),{addEventListener:t,removeEventListener:n}}},9627:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useNullableState=void 0;var i=n(2791);t.useNullableState=function(e){return(0,i.useState)(e||null)}},8604:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useUnityArguments=void 0;var i=n(2791);t.useUnityArguments=function(e){return(0,i.useMemo)((function(){return{dataUrl:e.unityProvider.unityConfig.dataUrl,frameworkUrl:e.unityProvider.unityConfig.frameworkUrl,codeUrl:e.unityProvider.unityConfig.codeUrl,streamingAssetsUrl:e.unityProvider.unityConfig.streamingAssetsUrl,memoryUrl:e.unityProvider.unityConfig.memoryUrl,symbolsUrl:e.unityProvider.unityConfig.symbolsUrl,companyName:e.unityProvider.unityConfig.companyName,productName:e.unityProvider.unityConfig.productName,productVersion:e.unityProvider.unityConfig.productVersion,webglContextAttributes:e.unityProvider.unityConfig.webglContextAttributes||{},cacheControl:e.unityProvider.unityConfig.cacheControl||function(){return"must-revalidate"},devicePixelRatio:e.devicePixelRatio||1,matchWebGLToCanvasSize:"boolean"!==typeof e.matchWebGLToCanvasSize||e.matchWebGLToCanvasSize,disabledCanvasEvents:e.disabledCanvasEvents||["contextmenu","dragstart"],print:function(e){},printErr:function(e){}}}),[])}},6445:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useUnityCanvasId=void 0;var i=n(2791),r=0,a="react-unity-webgl-canvas";t.useUnityCanvasId=function(){return(0,i.useMemo)((function(){return[a,++r].join("-")}),[])}},7138:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useUnityContext=void 0;var i=n(2791),r=n(9774),a=n(4773),o=n(9627);t.useUnityContext=function(e){var t=(0,o.useNullableState)(),n=t[0],s=t[1],l=(0,i.useState)(0),c=l[0],u=l[1],g=(0,i.useState)(!1),d=g[0],h=g[1],f=(0,o.useNullableState)(),p=f[0],I=f[1],C=(0,a.useEventSystem)(),m=(0,i.useRef)({setLoadingProgression:u,setInitialisationError:I,setUnityInstance:s,setIsLoaded:h,unityConfig:e}),v=(0,i.useCallback)((function(e){null!==n?n.SetFullscreen(!0===e?1:0):console.warn(r.errorMessages.requestFullscreenNoUnityInstance)}),[n]),A=(0,i.useCallback)((function(){if(null!==n&&"undefined"!==typeof n.Module.canvas)return n.Module.canvas.requestPointerLock();console.warn(r.errorMessages.requestPointerLockNoUnityInstanceOrCanvas)}),[n]),b=(0,i.useCallback)((function(e,t,i){null!==n?n.SendMessage(e,t,i):console.warn(r.errorMessages.sendMessageNoUnityInstance)}),[n]),y=(0,i.useCallback)((function(e,t){if(null!==n&&"undefined"!==typeof n.Module.canvas)return n.Module.canvas.toDataURL(e,t);console.warn(r.errorMessages.screenshotNoUnityInstanceOrCanvas)}),[n]),G=(0,i.useCallback)((function(){return null===n?(console.warn(r.errorMessages.quitNoUnityInstance),Promise.reject()):n.Quit()}),[n]);return(0,i.useEffect)((function(){h(1===c)}),[c]),{unityProvider:m.current,loadingProgression:c,initialisationError:p,isLoaded:d,UNSAFE__unityInstance:n,requestFullscreen:v,requestPointerLock:A,sendMessage:b,unload:G,takeScreenshot:y,addEventListener:C.addEventListener,removeEventListener:C.removeEventListener}}},8802:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function o(e){try{l(i.next(e))}catch(t){a(t)}}function s(e){try{l(i.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((i=i.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,i,r,a,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(s){a=[6,s],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.useUnityInstance=void 0;var a=n(2791),o=n(7229),s=n(7359);t.useUnityInstance=function(e,t,n,l){(0,a.useEffect)((function(){i(void 0,void 0,void 0,(function(){var i,a;return r(this,(function(r){switch(r.label){case 0:if(!1===s.isBrowserEnvironment)return[2];if(e!==o.UnityLoaderStatus.Loaded||null===t)return l.setUnityInstance(null),l.setInitialisationError(null),[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,window.createUnityInstance(t,n,l.setLoadingProgression)];case 2:return i=r.sent(),l.setUnityInstance(i),l.setInitialisationError(null),[3,4];case 3:return a=r.sent(),l.setUnityInstance(null),l.setInitialisationError(a),[3,4];case 4:return[2]}}))}))}),[e,t,n,l])}},6428:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useUnityLoader=void 0;var i=n(2791),r=n(7359),a=n(7229);t.useUnityLoader=function(e){var t=(0,i.useState)(a.UnityLoaderStatus.Loading),n=t[0],o=t[1];return(0,i.useEffect)((function(){if(!1!==r.isBrowserEnvironment){if(null!==e.loaderUrl){var t=window.document.querySelector('script[src="'.concat(e.loaderUrl,'"]'));null===t?((t=window.document.createElement("script")).type="text/javascript",t.src=e.loaderUrl,t.async=!0,t.setAttribute("data-status","loading"),window.document.body.appendChild(t),t.addEventListener("load",(function(){return null===t||void 0===t?void 0:t.setAttribute("data-status","loaded")})),t.addEventListener("error",(function(){return null===t||void 0===t?void 0:t.setAttribute("data-status","error")}))):o("loaded"===t.getAttribute("data-status")?a.UnityLoaderStatus.Loaded:a.UnityLoaderStatus.Error);var n=function(e){return o("load"===e.type?a.UnityLoaderStatus.Loaded:a.UnityLoaderStatus.Error)};return t.addEventListener("load",n),t.addEventListener("error",n),function(){null!==t&&(t.removeEventListener("load",n),t.removeEventListener("error",n),window.document.body.removeChild(t))}}o(a.UnityLoaderStatus.Idle)}}),[e.loaderUrl]),n}},6374:function(e,t,n){"use strict";var i=n(2791),r=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var i,a={},c=null,u=null;for(i in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,i)&&!l.hasOwnProperty(i)&&(a[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===a[i]&&(a[i]=t[i]);return{$$typeof:r,type:e,key:c,ref:u,props:a,_owner:s.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},9117:function(e,t){"use strict";var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,I={};function C(e,t,n){this.props=e,this.context=t,this.refs=I,this.updater=n||f}function m(){}function v(e,t,n){this.props=e,this.context=t,this.refs=I,this.updater=n||f}C.prototype.isReactComponent={},C.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},C.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},m.prototype=C.prototype;var A=v.prototype=new m;A.constructor=v,p(A,C.prototype),A.isPureReactComponent=!0;var b=Array.isArray,y=Object.prototype.hasOwnProperty,G={current:null},w={key:!0,ref:!0,__self:!0,__source:!0};function B(e,t,i){var r,a={},o=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)y.call(t,r)&&!w.hasOwnProperty(r)&&(a[r]=t[r]);var l=arguments.length-2;if(1===l)a.children=i;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===a[r]&&(a[r]=l[r]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:G.current}}function x(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var S=/\/+/g;function Z(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function k(e,t,r,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case i:l=!0}}if(l)return o=o(l=e),e=""===a?"."+Z(l,0):a,b(o)?(r="",null!=e&&(r=e.replace(S,"$&/")+"/"),k(o,t,r,"",(function(e){return e}))):null!=o&&(x(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,r+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(S,"$&/")+"/")+e)),t.push(o)),1;if(l=0,a=""===a?".":a+":",b(e))for(var c=0;c<e.length;c++){var u=a+Z(s=e[c],c);l+=k(s,t,r,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(s=e.next()).done;)l+=k(s=s.value,t,r,u=a+Z(s,c++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function R(e,t,n){if(null==e)return e;var i=[],r=0;return k(e,i,"","",(function(e){return t.call(n,e,r++)})),i}function W(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var M={current:null},V={transition:null},F={ReactCurrentDispatcher:M,ReactCurrentBatchConfig:V,ReactCurrentOwner:G};t.Children={map:R,forEach:function(e,t,n){R(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return R(e,(function(){t++})),t},toArray:function(e){return R(e,(function(e){return e}))||[]},only:function(e){if(!x(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=C,t.Fragment=r,t.Profiler=o,t.PureComponent=v,t.StrictMode=a,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=F,t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=p({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=G.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)y.call(t,c)&&!w.hasOwnProperty(c)&&(r[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)r.children=i;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:n,type:e.type,key:a,ref:o,props:r,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=B,t.createFactory=function(e){var t=B.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=x,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:W}},t.memo=function(e,t){return{$$typeof:g,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=V.transition;V.transition={};try{e()}finally{V.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return M.current.useCallback(e,t)},t.useContext=function(e){return M.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return M.current.useDeferredValue(e)},t.useEffect=function(e,t){return M.current.useEffect(e,t)},t.useId=function(){return M.current.useId()},t.useImperativeHandle=function(e,t,n){return M.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return M.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return M.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return M.current.useMemo(e,t)},t.useReducer=function(e,t,n){return M.current.useReducer(e,t,n)},t.useRef=function(e){return M.current.useRef(e)},t.useState=function(e){return M.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return M.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return M.current.useTransition()},t.version="18.2.0"},2791:function(e,t,n){"use strict";e.exports=n(9117)},184:function(e,t,n){"use strict";e.exports=n(6374)},6813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<a(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,o=r>>>1;i<o;){var s=2*(i+1)-1,l=e[s],c=s+1,u=e[c];if(0>a(l,n))c<r&&0>a(u,l)?(e[i]=u,e[c]=n,i=c):(e[i]=l,e[s]=n,i=s);else{if(!(c<r&&0>a(u,n)))break e;e[i]=u,e[c]=n,i=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],g=1,d=null,h=3,f=!1,p=!1,I=!1,C="function"===typeof setTimeout?setTimeout:null,m="function"===typeof clearTimeout?clearTimeout:null,v="undefined"!==typeof setImmediate?setImmediate:null;function A(e){for(var t=i(u);null!==t;){if(null===t.callback)r(u);else{if(!(t.startTime<=e))break;r(u),t.sortIndex=t.expirationTime,n(c,t)}t=i(u)}}function b(e){if(I=!1,A(e),!p)if(null!==i(c))p=!0,V(y);else{var t=i(u);null!==t&&F(b,t.startTime-e)}}function y(e,n){p=!1,I&&(I=!1,m(x),x=-1),f=!0;var a=h;try{for(A(n),d=i(c);null!==d&&(!(d.expirationTime>n)||e&&!k());){var o=d.callback;if("function"===typeof o){d.callback=null,h=d.priorityLevel;var s=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?d.callback=s:d===i(c)&&r(c),A(n)}else r(c);d=i(c)}if(null!==d)var l=!0;else{var g=i(u);null!==g&&F(b,g.startTime-n),l=!1}return l}finally{d=null,h=a,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var G,w=!1,B=null,x=-1,S=5,Z=-1;function k(){return!(t.unstable_now()-Z<S)}function R(){if(null!==B){var e=t.unstable_now();Z=e;var n=!0;try{n=B(!0,e)}finally{n?G():(w=!1,B=null)}}else w=!1}if("function"===typeof v)G=function(){v(R)};else if("undefined"!==typeof MessageChannel){var W=new MessageChannel,M=W.port2;W.port1.onmessage=R,G=function(){M.postMessage(null)}}else G=function(){C(R,0)};function V(e){B=e,w||(w=!0,G())}function F(e,n){x=C((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,V(y))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return i(c)},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},t.unstable_scheduleCallback=function(e,r,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:g++,callback:r,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(u,e),null===i(c)&&e===i(u)&&(I?(m(x),x=-1):I=!0,F(b,a-o))):(e.sortIndex=s,n(c,e),p||f||(p=!0,V(y))),e},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}},5296:function(e,t,n){"use strict";e.exports=n(6813)},7809:function(e,t,n){"use strict";var i=n(8018),r=n(5456),a=n(4807),o=n(7240);function s(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e}e.exports=function(e,t,n){if(!o(e))return e;if(Array.isArray(t)&&(t=[].concat.apply([],t).join(".")),"string"!==typeof t)return e;for(var l=i(t,{sep:".",brackets:!0}).filter(s),c=l.length,u=-1,g=e;++u<c;){var d=l[u];u===c-1?a(g[d])&&a(n)?g[d]=r({},g[d],n):g[d]=n:(o(g[d])||(g[d]={}),g=g[d])}return e}},7240:function(e){"use strict";e.exports=function(e){return"undefined"!==typeof e&&null!==e&&("object"===typeof e||"function"===typeof e)}},9613:function(e){e.exports=function(e,t,n,i){var r=n?n.call(i,e,t):void 0;if(void 0!==r)return!!r;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var a=Object.keys(e),o=Object.keys(t);if(a.length!==o.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),l=0;l<a.length;l++){var c=a[l];if(!s(c))return!1;var u=e[c],g=t[c];if(!1===(r=n?n.call(i,u,g,c):void 0)||void 0===r&&u!==g)return!1}return!0}},8018:function(e,t,n){"use strict";var i=n(9955);function r(e,t,n,i){var a=e.indexOf(t,n);return"\\"===e.charAt(a-1)?r(e,t,a+1):a}function a(e,t){return!0===t.keepDoubleQuotes&&'"'===e||(!0===t.keepSingleQuotes&&"'"===e||t.keepQuotes)}function o(e,t,n){return"function"===typeof e.keepEscaping?e.keepEscaping(t,n):!0===e.keepEscaping||"\\"===t[n+1]}e.exports=function(e,t,n){if("string"!==typeof e)throw new TypeError("expected a string");"function"===typeof t&&(n=t,t=null),"string"===typeof t&&(t={sep:t});var s,l=i({sep:"."},t),c=l.quotes||['"',"'","`"];!0===l.brackets?s={"<":">","(":")","[":"]","{":"}"}:l.brackets&&(s=l.brackets);var u,g=[],d=[],h=[""],f=l.sep,p=e.length,I=-1;function C(){if(s&&d.length)return s[d[d.length-1]]}for(;++I<p;){var m=e[I],v=e[I+1],A={val:m,idx:I,arr:h,str:e};if(g.push(A),"\\"!==m){if(s&&s[m]){d.push(m);var b=C(),y=I+1;if(-1!==e.indexOf(b,y+1))for(;d.length&&y<p;){var G=e[++y];if("\\"!==G)if(-1===c.indexOf(G)){if(b=C(),d.length&&-1===e.indexOf(b,y+1))break;s[G]?d.push(G):b===G&&d.pop()}else y=r(e,G,y+1);else G++}if(-1===(u=y)){h[h.length-1]+=m;continue}m=e.slice(I,u+1),A.val=m,A.idx=I=u}if(-1!==c.indexOf(m)){if(-1===(u=r(e,m,I+1))){h[h.length-1]+=m;continue}m=!0===a(m,l)?e.slice(I,u+1):e.slice(I+1,u),A.val=m,A.idx=I=u}"function"===typeof n&&(n(A,g),m=A.val,I=A.idx),A.val!==f||!1===A.split?h[h.length-1]+=A.val:h.push("")}else A.val=!0===o(l,e,I)?m+v:v,A.escaped=!0,"function"===typeof n&&n(A),h[h.length-1]+=A.val,I++}return h}},9955:function(e,t,n){"use strict";var i=n(9105),r=n(7823);function a(e,t){for(var n in t)c(t,n)&&(e[n]=t[n])}function o(e){return e&&"string"===typeof e}function s(e){var t={};for(var n in e)t[n]=e[n];return t}function l(e){return e&&"object"===typeof e||i(e)}function c(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=Object.assign||function(e){if(null===e||"undefined"===typeof e)throw new TypeError("Cannot convert undefined or null to object");l(e)||(e={});for(var t=1;t<arguments.length;t++){var n=arguments[t];o(n)&&(n=s(n)),l(n)&&(a(e,n),r(e,n))}return e}},9049:function(e){e.exports=function(){var e=function e(){function t(e){return r.appendChild(e.dom),e}function n(e){for(var t=0;t<r.children.length;t++)r.children[t].style.display=t===e?"block":"none";i=e}var i=0,r=document.createElement("div");r.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",r.addEventListener("click",(function(e){e.preventDefault(),n(++i%r.children.length)}),!1);var a=(performance||Date).now(),o=a,s=0,l=t(new e.Panel("FPS","#0ff","#002")),c=t(new e.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var u=t(new e.Panel("MB","#f08","#201"));return n(0),{REVISION:16,dom:r,addPanel:t,showPanel:n,begin:function(){a=(performance||Date).now()},end:function(){s++;var e=(performance||Date).now();if(c.update(e-a,200),e>o+1e3&&(l.update(1e3*s/(e-o),100),o=e,s=0,u)){var t=performance.memory;u.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){a=this.end()},domElement:r,setMode:n}};return e.Panel=function(e,t,n){var i=1/0,r=0,a=Math.round,o=a(window.devicePixelRatio||1),s=80*o,l=48*o,c=3*o,u=2*o,g=3*o,d=15*o,h=74*o,f=30*o,p=document.createElement("canvas");p.width=s,p.height=l,p.style.cssText="width:80px;height:48px";var I=p.getContext("2d");return I.font="bold "+9*o+"px Helvetica,Arial,sans-serif",I.textBaseline="top",I.fillStyle=n,I.fillRect(0,0,s,l),I.fillStyle=t,I.fillText(e,c,u),I.fillRect(g,d,h,f),I.fillStyle=n,I.globalAlpha=.9,I.fillRect(g,d,h,f),{dom:p,update:function(l,C){i=Math.min(i,l),r=Math.max(r,l),I.fillStyle=n,I.globalAlpha=1,I.fillRect(0,0,s,d),I.fillStyle=t,I.fillText(a(l)+" "+e+" ("+a(i)+"-"+a(r)+")",c,u),I.drawImage(p,g+o,d,h-o,f,g,d,h-o,f),I.fillRect(g+h-o,d,o,f),I.fillStyle=n,I.globalAlpha=.9,I.fillRect(g+h-o,d,o,a((1-l/C)*f))}}},e}()},4960:function(){},6759:function(){},6272:function(){},8593:function(e){"use strict";e.exports=JSON.parse('{"name":"axios","version":"0.21.4","description":"Promise based HTTP client for the browser and node.js","main":"index.js","scripts":{"test":"grunt test","start":"node ./sandbox/server.js","build":"NODE_ENV=production grunt build","preversion":"npm test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json","postversion":"git push && git push --tags","examples":"node ./examples/server.js","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","fix":"eslint --fix lib/**/*.js"},"repository":{"type":"git","url":"https://github.com/axios/axios.git"},"keywords":["xhr","http","ajax","promise","node"],"author":"Matt Zabriskie","license":"MIT","bugs":{"url":"https://github.com/axios/axios/issues"},"homepage":"https://axios-http.com","devDependencies":{"coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^8.2.1","sinon":"^4.5.0","terser-webpack-plugin":"^4.2.3","typescript":"^4.0.5","url-search-params":"^0.10.0","webpack":"^4.44.2","webpack-dev-server":"^3.11.0"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"jsdelivr":"dist/axios.min.js","unpkg":"dist/axios.min.js","typings":"./index.d.ts","dependencies":{"follow-redirects":"^1.14.0"},"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}]}')}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var a=t[i]={exports:{}};return e[i].call(a.exports,a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(i,r){if(1&r&&(i=this(i)),8&r)return i;if("object"===typeof i&&i){if(4&r&&i.__esModule)return i;if(16&r&&"function"===typeof i.then)return i}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&r&&i;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){o[e]=function(){return i[e]}}));return o.default=function(){return i},n.d(a,o),a}}(),n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="./",n.nc=void 0,function(){"use strict";var e={};n.r(e),n.d(e,{ACESFilmicToneMapping:function(){return Yu},AddEquation:function(){return lu},AddOperation:function(){return Fu},AdditiveAnimationBlendMode:function(){return fd},AdditiveBlending:function(){return ru},AlphaFormat:function(){return Cg},AlwaysDepth:function(){return Bu},AlwaysStencilFunc:function(){return Kd},AmbientLight:function(){return Uy},AmbientLightProbe:function(){return uG},AnimationAction:function(){return YG},AnimationClip:function(){return Cy},AnimationLoader:function(){return Sy},AnimationMixer:function(){return zG},AnimationObjectGroup:function(){return XG},AnimationUtils:function(){return ry},ArcCurve:function(){return bA},ArrayCamera:function(){return Um},ArrowHelper:function(){return Mw},Audio:function(){return yG},AudioAnalyser:function(){return ZG},AudioContext:function(){return sG},AudioListener:function(){return bG},AudioLoader:function(){return lG},AxesHelper:function(){return Vw},BackSide:function(){return $c},BasicDepthPacking:function(){return Ad},BasicShadowMap:function(){return Uc},Bone:function(){return Hv},BooleanKeyframeTrack:function(){return uy},Box2:function(){return $G},Box3:function(){return Uh},Box3Helper:function(){return kw},BoxBufferGeometry:function(){return Nw},BoxGeometry:function(){return oI},BoxHelper:function(){return Zw},BufferAttribute:function(){return yp},BufferGeometry:function(){return Ep},BufferGeometryLoader:function(){return tG},ByteType:function(){return sg},Cache:function(){return Ay},Camera:function(){return dI},CameraHelper:function(){return Gw},CanvasTexture:function(){return mA},CapsuleBufferGeometry:function(){return Hw},CapsuleGeometry:function(){return LA},CatmullRomCurve3:function(){return SA},CineonToneMapping:function(){return Xu},CircleBufferGeometry:function(){return Tw},CircleGeometry:function(){return KA},ClampToEdgeWrapping:function(){return Uu},Clock:function(){return pG},Color:function(){return dp},ColorKeyframeTrack:function(){return gy},ColorManagement:function(){return Wh},CompressedArrayTexture:function(){return CA},CompressedTexture:function(){return IA},CompressedTextureLoader:function(){return Zy},ConeBufferGeometry:function(){return Xw},ConeGeometry:function(){return PA},CubeCamera:function(){return pI},CubeReflectionMapping:function(){return Lu},CubeRefractionMapping:function(){return Ku},CubeTexture:function(){return II},CubeTextureLoader:function(){return Ry},CubeUVReflectionMapping:function(){return Du},CubicBezierCurve:function(){return WA},CubicBezierCurve3:function(){return MA},CubicInterpolant:function(){return oy},CullFaceBack:function(){return Pc},CullFaceFront:function(){return Dc},CullFaceFrontBack:function(){return Oc},CullFaceNone:function(){return _c},Curve:function(){return vA},CurvePath:function(){return YA},CustomBlending:function(){return su},CustomToneMapping:function(){return Eu},CylinderBufferGeometry:function(){return Yw},CylinderGeometry:function(){return _A},Cylindrical:function(){return QG},Data3DTexture:function(){return zh},DataArrayTexture:function(){return Yh},DataTexture:function(){return Tv},DataTextureLoader:function(){return Wy},DataUtils:function(){return vp},DecrementStencilOp:function(){return Md},DecrementWrapStencilOp:function(){return Fd},DefaultLoadingManager:function(){return yy},DepthFormat:function(){return bg},DepthStencilFormat:function(){return yg},DepthTexture:function(){return qm},DirectionalLight:function(){return Oy},DirectionalLightHelper:function(){return Aw},DiscreteInterpolant:function(){return ly},DisplayP3ColorSpace:function(){return Sd},DodecahedronBufferGeometry:function(){return Ew},DodecahedronGeometry:function(){return OA},DoubleSide:function(){return eu},DstAlphaFactor:function(){return vu},DstColorFactor:function(){return bu},DynamicCopyUsage:function(){return Qd},DynamicDrawUsage:function(){return Pd},DynamicReadUsage:function(){return Ud},EdgesGeometry:function(){return qA},EllipseCurve:function(){return AA},EqualDepth:function(){return Zu},EqualStencilFunc:function(){return Xd},EquirectangularReflectionMapping:function(){return _u},EquirectangularRefractionMapping:function(){return Pu},Euler:function(){return Mf},EventDispatcher:function(){return nh},ExtrudeBufferGeometry:function(){return zw},ExtrudeGeometry:function(){return Zb},FileLoader:function(){return xy},Float16BufferAttribute:function(){return Rp},Float32BufferAttribute:function(){return Wp},Float64BufferAttribute:function(){return Mp},FloatType:function(){return dg},Fog:function(){return ov},FogExp2:function(){return av},FramebufferTexture:function(){return pA},FrontSide:function(){return qc},Frustum:function(){return wI},GLBufferAttribute:function(){return DG},GLSL1:function(){return $d},GLSL3:function(){return eh},GreaterDepth:function(){return Ru},GreaterEqualDepth:function(){return ku},GreaterEqualStencilFunc:function(){return Ld},GreaterStencilFunc:function(){return Ed},GridHelper:function(){return pw},Group:function(){return jm},HalfFloatType:function(){return hg},HemisphereLight:function(){return Fy},HemisphereLightHelper:function(){return fw},HemisphereLightProbe:function(){return cG},IcosahedronBufferGeometry:function(){return Lw},IcosahedronGeometry:function(){return Rb},ImageBitmapLoader:function(){return oG},ImageLoader:function(){return ky},ImageUtils:function(){return Mh},IncrementStencilOp:function(){return Wd},IncrementWrapStencilOp:function(){return Vd},InstancedBufferAttribute:function(){return zv},InstancedBufferGeometry:function(){return eG},InstancedInterleavedBuffer:function(){return PG},InstancedMesh:function(){return jv},Int16BufferAttribute:function(){return xp},Int32BufferAttribute:function(){return Zp},Int8BufferAttribute:function(){return Gp},IntType:function(){return ug},InterleavedBuffer:function(){return lv},InterleavedBufferAttribute:function(){return uv},Interpolant:function(){return ay},InterpolateDiscrete:function(){return sd},InterpolateLinear:function(){return ld},InterpolateSmooth:function(){return cd},InvertStencilOp:function(){return Nd},KeepStencilOp:function(){return kd},KeyframeTrack:function(){return cy},LOD:function(){return Zv},LatheBufferGeometry:function(){return Kw},LatheGeometry:function(){return zA},Layers:function(){return Vf},LessDepth:function(){return xu},LessEqualDepth:function(){return Su},LessEqualStencilFunc:function(){return Yd},LessStencilFunc:function(){return Td},Light:function(){return Vy},LightProbe:function(){return Qy},Line:function(){return nA},Line3:function(){return nw},LineBasicMaterial:function(){return Jv},LineCurve:function(){return VA},LineCurve3:function(){return FA},LineDashedMaterial:function(){return Qb},LineLoop:function(){return oA},LineSegments:function(){return aA},LinearEncoding:function(){return md},LinearFilter:function(){return tg},LinearInterpolant:function(){return sy},LinearMipMapLinearFilter:function(){return ag},LinearMipMapNearestFilter:function(){return ig},LinearMipmapLinearFilter:function(){return rg},LinearMipmapNearestFilter:function(){return ng},LinearSRGBColorSpace:function(){return xd},LinearToneMapping:function(){return Hu},Loader:function(){return Gy},LoaderUtils:function(){return $y},LoadingManager:function(){return by},LoopOnce:function(){return rd},LoopPingPong:function(){return od},LoopRepeat:function(){return ad},LuminanceAlphaFormat:function(){return Ag},LuminanceFormat:function(){return vg},MOUSE:function(){return Lc},Material:function(){return sp},MaterialLoader:function(){return qy},MathUtils:function(){return Ih},Matrix3:function(){return mh},Matrix4:function(){return yf},MaxEquation:function(){return du},Mesh:function(){return rI},MeshBasicMaterial:function(){return fp},MeshDepthMaterial:function(){return Lm},MeshDistanceMaterial:function(){return Km},MeshLambertMaterial:function(){return jb},MeshMatcapMaterial:function(){return Jb},MeshNormalMaterial:function(){return Ub},MeshPhongMaterial:function(){return Db},MeshPhysicalMaterial:function(){return Pb},MeshStandardMaterial:function(){return _b},MeshToonMaterial:function(){return Ob},MinEquation:function(){return gu},MirroredRepeatWrapping:function(){return ju},MixOperation:function(){return Vu},MultiplyBlending:function(){return ou},MultiplyOperation:function(){return Mu},NearestFilter:function(){return Ju},NearestMipMapLinearFilter:function(){return eg},NearestMipMapNearestFilter:function(){return qu},NearestMipmapLinearFilter:function(){return $u},NearestMipmapNearestFilter:function(){return Qu},NeverDepth:function(){return wu},NeverStencilFunc:function(){return Hd},NoBlending:function(){return nu},NoColorSpace:function(){return wd},NoToneMapping:function(){return Nu},NormalAnimationBlendMode:function(){return hd},NormalBlending:function(){return iu},NotEqualDepth:function(){return Wu},NotEqualStencilFunc:function(){return zd},NumberKeyframeTrack:function(){return dy},Object3D:function(){return Of},ObjectLoader:function(){return nG},ObjectSpaceNormalMap:function(){return Gd},OctahedronBufferGeometry:function(){return _w},OctahedronGeometry:function(){return Wb},OneFactor:function(){return fu},OneMinusDstAlphaFactor:function(){return Au},OneMinusDstColorFactor:function(){return yu},OneMinusSrcAlphaFactor:function(){return mu},OneMinusSrcColorFactor:function(){return Iu},OrthographicCamera:function(){return XI},PCFShadowMap:function(){return jc},PCFSoftShadowMap:function(){return Jc},PMREMGenerator:function(){return OI},Path:function(){return EA},PerspectiveCamera:function(){return hI},Plane:function(){return bI},PlaneBufferGeometry:function(){return Pw},PlaneGeometry:function(){return SI},PlaneHelper:function(){return Rw},PointLight:function(){return Py},PointLightHelper:function(){return uw},Points:function(){return dA},PointsMaterial:function(){return sA},PolarGridHelper:function(){return Iw},PolyhedronBufferGeometry:function(){return Dw},PolyhedronGeometry:function(){return DA},PositionalAudio:function(){return SG},PropertyBinding:function(){return TG},PropertyMixer:function(){return kG},QuadraticBezierCurve:function(){return NA},QuadraticBezierCurve3:function(){return HA},Quaternion:function(){return _h},QuaternionKeyframeTrack:function(){return fy},QuaternionLinearInterpolant:function(){return hy},RED_GREEN_RGTC2_Format:function(){return nd},RED_RGTC1_Format:function(){return ed},REVISION:function(){return zc},RGBADepthPacking:function(){return bd},RGBAFormat:function(){return mg},RGBAIntegerFormat:function(){return Sg},RGBA_ASTC_10x10_Format:function(){return Jg},RGBA_ASTC_10x5_Format:function(){return Og},RGBA_ASTC_10x6_Format:function(){return Ug},RGBA_ASTC_10x8_Format:function(){return jg},RGBA_ASTC_12x10_Format:function(){return Qg},RGBA_ASTC_12x12_Format:function(){return qg},RGBA_ASTC_4x4_Format:function(){return Yg},RGBA_ASTC_5x4_Format:function(){return Eg},RGBA_ASTC_5x5_Format:function(){return zg},RGBA_ASTC_6x5_Format:function(){return Lg},RGBA_ASTC_6x6_Format:function(){return Kg},RGBA_ASTC_8x5_Format:function(){return _g},RGBA_ASTC_8x6_Format:function(){return Pg},RGBA_ASTC_8x8_Format:function(){return Dg},RGBA_BPTC_Format:function(){return $g},RGBA_ETC2_EAC_Format:function(){return Xg},RGBA_PVRTC_2BPPV1_Format:function(){return Ng},RGBA_PVRTC_4BPPV1_Format:function(){return Fg},RGBA_S3TC_DXT1_Format:function(){return kg},RGBA_S3TC_DXT3_Format:function(){return Rg},RGBA_S3TC_DXT5_Format:function(){return Wg},RGB_ETC1_Format:function(){return Hg},RGB_ETC2_Format:function(){return Tg},RGB_PVRTC_2BPPV1_Format:function(){return Vg},RGB_PVRTC_4BPPV1_Format:function(){return Mg},RGB_S3TC_DXT1_Format:function(){return Zg},RGFormat:function(){return Bg},RGIntegerFormat:function(){return xg},RawShaderMaterial:function(){return Kb},Ray:function(){return bf},Raycaster:function(){return OG},RectAreaLight:function(){return jy},RedFormat:function(){return Gg},RedIntegerFormat:function(){return wg},ReinhardToneMapping:function(){return Tu},RepeatWrapping:function(){return Ou},ReplaceStencilOp:function(){return Rd},ReverseSubtractEquation:function(){return uu},RingBufferGeometry:function(){return Ow},RingGeometry:function(){return Mb},SIGNED_RED_GREEN_RGTC2_Format:function(){return id},SIGNED_RED_RGTC1_Format:function(){return td},SRGBColorSpace:function(){return Bd},Scene:function(){return sv},ShaderChunk:function(){return ZI},ShaderLib:function(){return RI},ShaderMaterial:function(){return gI},ShadowMaterial:function(){return Lb},Shape:function(){return $A},ShapeBufferGeometry:function(){return Uw},ShapeGeometry:function(){return Vb},ShapePath:function(){return Fw},ShapeUtils:function(){return Bb},ShortType:function(){return lg},Skeleton:function(){return Ev},SkeletonHelper:function(){return lw},SkinnedMesh:function(){return Nv},Source:function(){return Vh},Sphere:function(){return hf},SphereBufferGeometry:function(){return jw},SphereGeometry:function(){return Fb},Spherical:function(){return JG},SphericalHarmonics3:function(){return Jy},SplineCurve:function(){return TA},SpotLight:function(){return Ey},SpotLightHelper:function(){return rw},Sprite:function(){return wv},SpriteMaterial:function(){return gv},SrcAlphaFactor:function(){return Cu},SrcAlphaSaturateFactor:function(){return Gu},SrcColorFactor:function(){return pu},StaticCopyUsage:function(){return Jd},StaticDrawUsage:function(){return _d},StaticReadUsage:function(){return Od},StereoCamera:function(){return fG},StreamCopyUsage:function(){return qd},StreamDrawUsage:function(){return Dd},StreamReadUsage:function(){return jd},StringKeyframeTrack:function(){return py},SubtractEquation:function(){return cu},SubtractiveBlending:function(){return au},TOUCH:function(){return Kc},TangentSpaceNormalMap:function(){return yd},TetrahedronBufferGeometry:function(){return Jw},TetrahedronGeometry:function(){return Nb},Texture:function(){return Hh},TextureLoader:function(){return My},TorusBufferGeometry:function(){return Qw},TorusGeometry:function(){return Hb},TorusKnotBufferGeometry:function(){return qw},TorusKnotGeometry:function(){return Tb},Triangle:function(){return ap},TriangleFanDrawMode:function(){return Cd},TriangleStripDrawMode:function(){return Id},TrianglesDrawMode:function(){return pd},TubeBufferGeometry:function(){return $w},TubeGeometry:function(){return Xb},TwoPassDoubleSide:function(){return tu},UVMapping:function(){return zu},Uint16BufferAttribute:function(){return Sp},Uint32BufferAttribute:function(){return kp},Uint8BufferAttribute:function(){return wp},Uint8ClampedBufferAttribute:function(){return Bp},Uniform:function(){return LG},UniformsGroup:function(){return _G},UniformsLib:function(){return kI},UniformsUtils:function(){return uI},UnsignedByteType:function(){return og},UnsignedInt248Type:function(){return Ig},UnsignedIntType:function(){return gg},UnsignedShort4444Type:function(){return fg},UnsignedShort5551Type:function(){return pg},UnsignedShortType:function(){return cg},VSMShadowMap:function(){return Qc},Vector2:function(){return Ch},Vector3:function(){return Ph},Vector4:function(){return Th},VectorKeyframeTrack:function(){return Iy},VideoTexture:function(){return fA},WebGL1Renderer:function(){return iv},WebGL3DRenderTarget:function(){return Lh},WebGLArrayRenderTarget:function(){return Eh},WebGLCubeRenderTarget:function(){return CI},WebGLMultipleRenderTargets:function(){return Kh},WebGLRenderTarget:function(){return Xh},WebGLRenderer:function(){return nv},WebGLUtils:function(){return Om},WireframeGeometry:function(){return Yb},WrapAroundEnding:function(){return dd},ZeroCurvatureEnding:function(){return ud},ZeroFactor:function(){return hu},ZeroSlopeEnding:function(){return gd},ZeroStencilOp:function(){return Zd},_SRGBAFormat:function(){return th},sRGBEncoding:function(){return vd}});var t=n(2791),i=n.t(t,2),r=n(4164);function a(e){if(Array.isArray(e))return e}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function s(e,t){if(e){if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){return a(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=a.call(n)).done)&&(s.push(i.value),s.length!==t);l=!0);}catch(e){c=!0,r=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw r}}return s}}(e,t)||s(e,t)||l()}var u=n(184),g=(0,t.createContext)(),d={darkMode:!1},h=function(e,t){return"toggle"===t.type?{darkMode:!e.darkMode}:e},f=function(e){var n=c((0,t.useReducer)(h,d),2),i=n[0],r=n[1];return(0,u.jsx)(g.Provider,{value:{state:i,dispatch:r},children:e.children})};function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function I(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,p(e,t)}var C=n(2007),m=n.n(C);function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},v.apply(this,arguments)}function A(e){return"/"===e.charAt(0)}function b(e,t){for(var n=t,i=n+1,r=e.length;i<r;n+=1,i+=1)e[n]=e[i];e.pop()}var y=function(e,t){void 0===t&&(t="");var n,i=e&&e.split("/")||[],r=t&&t.split("/")||[],a=e&&A(e),o=t&&A(t),s=a||o;if(e&&A(e)?r=i:i.length&&(r.pop(),r=r.concat(i)),!r.length)return"/";if(r.length){var l=r[r.length-1];n="."===l||".."===l||""===l}else n=!1;for(var c=0,u=r.length;u>=0;u--){var g=r[u];"."===g?b(r,u):".."===g?(b(r,u),c++):c&&(b(r,u),c--)}if(!s)for(;c--;c)r.unshift("..");!s||""===r[0]||r[0]&&A(r[0])||r.unshift("");var d=r.join("/");return n&&"/"!==d.substr(-1)&&(d+="/"),d},G=!0,w="Invariant failed";function B(e,t){if(!e){if(G)throw new Error(w);var n="function"===typeof t?t():t,i=n?"".concat(w,": ").concat(n):w;throw new Error(i)}}function x(e){return"/"===e.charAt(0)?e:"/"+e}function S(e){return"/"===e.charAt(0)?e.substr(1):e}function Z(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function k(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function R(e){var t=e.pathname,n=e.search,i=e.hash,r=t||"/";return n&&"?"!==n&&(r+="?"===n.charAt(0)?n:"?"+n),i&&"#"!==i&&(r+="#"===i.charAt(0)?i:"#"+i),r}function W(e,t,n,i){var r;"string"===typeof e?(r=function(e){var t=e||"/",n="",i="",r=t.indexOf("#");-1!==r&&(i=t.substr(r),t=t.substr(0,r));var a=t.indexOf("?");return-1!==a&&(n=t.substr(a),t=t.substr(0,a)),{pathname:t,search:"?"===n?"":n,hash:"#"===i?"":i}}(e),r.state=t):(void 0===(r=v({},e)).pathname&&(r.pathname=""),r.search?"?"!==r.search.charAt(0)&&(r.search="?"+r.search):r.search="",r.hash?"#"!==r.hash.charAt(0)&&(r.hash="#"+r.hash):r.hash="",void 0!==t&&void 0===r.state&&(r.state=t));try{r.pathname=decodeURI(r.pathname)}catch(a){throw a instanceof URIError?new URIError('Pathname "'+r.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):a}return n&&(r.key=n),i?r.pathname?"/"!==r.pathname.charAt(0)&&(r.pathname=y(r.pathname,i.pathname)):r.pathname=i.pathname:r.pathname||(r.pathname="/"),r}function M(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,i,r){if(null!=e){var a="function"===typeof e?e(t,n):e;"string"===typeof a?"function"===typeof i?i(a,r):r(!0):r(!1!==a)}else r(!0)},appendListener:function(e){var n=!0;function i(){n&&e.apply(void 0,arguments)}return t.push(i),function(){n=!1,t=t.filter((function(e){return e!==i}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];t.forEach((function(e){return e.apply(void 0,n)}))}}}var V=!("undefined"===typeof window||!window.document||!window.document.createElement);function F(e,t){t(window.confirm(e))}var N="popstate",H="hashchange";function T(){try{return window.history.state||{}}catch(e){return{}}}function X(e){void 0===e&&(e={}),V||B(!1);var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),i=!(-1===window.navigator.userAgent.indexOf("Trident")),r=e,a=r.forceRefresh,o=void 0!==a&&a,s=r.getUserConfirmation,l=void 0===s?F:s,c=r.keyLength,u=void 0===c?6:c,g=e.basename?k(x(e.basename)):"";function d(e){var t=e||{},n=t.key,i=t.state,r=window.location,a=r.pathname+r.search+r.hash;return g&&(a=Z(a,g)),W(a,i,n)}function h(){return Math.random().toString(36).substr(2,u)}var f=M();function p(e){v(E,e),E.length=t.length,f.notifyListeners(E.location,E.action)}function I(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||A(d(e.state))}function C(){A(d(T()))}var m=!1;function A(e){if(m)m=!1,p();else{f.confirmTransitionTo(e,"POP",l,(function(t){t?p({action:"POP",location:e}):function(e){var t=E.location,n=y.indexOf(t.key);-1===n&&(n=0);var i=y.indexOf(e.key);-1===i&&(i=0);var r=n-i;r&&(m=!0,w(r))}(e)}))}}var b=d(T()),y=[b.key];function G(e){return g+R(e)}function w(e){t.go(e)}var S=0;function X(e){1===(S+=e)&&1===e?(window.addEventListener(N,I),i&&window.addEventListener(H,C)):0===S&&(window.removeEventListener(N,I),i&&window.removeEventListener(H,C))}var Y=!1;var E={length:t.length,action:"POP",location:b,createHref:G,push:function(e,i){var r="PUSH",a=W(e,i,h(),E.location);f.confirmTransitionTo(a,r,l,(function(e){if(e){var i=G(a),s=a.key,l=a.state;if(n)if(t.pushState({key:s,state:l},null,i),o)window.location.href=i;else{var c=y.indexOf(E.location.key),u=y.slice(0,c+1);u.push(a.key),y=u,p({action:r,location:a})}else window.location.href=i}}))},replace:function(e,i){var r="REPLACE",a=W(e,i,h(),E.location);f.confirmTransitionTo(a,r,l,(function(e){if(e){var i=G(a),s=a.key,l=a.state;if(n)if(t.replaceState({key:s,state:l},null,i),o)window.location.replace(i);else{var c=y.indexOf(E.location.key);-1!==c&&(y[c]=a.key),p({action:r,location:a})}else window.location.replace(i)}}))},go:w,goBack:function(){w(-1)},goForward:function(){w(1)},block:function(e){void 0===e&&(e=!1);var t=f.setPrompt(e);return Y||(X(1),Y=!0),function(){return Y&&(Y=!1,X(-1)),t()}},listen:function(e){var t=f.appendListener(e);return X(1),function(){X(-1),t()}}};return E}var Y="hashchange",E={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+S(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:S,decodePath:x},slash:{encodePath:x,decodePath:x}};function z(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function L(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function K(e){window.location.replace(z(window.location.href)+"#"+e)}function _(e){void 0===e&&{},V||B(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),i=n.getUserConfirmation,r=void 0===i?F:i,a=n.hashType,o=void 0===a?"slash":a,s=e.basename?k(x(e.basename)):"",l=E[o],c=l.encodePath,u=l.decodePath;function g(){var e=u(L());return s&&Z(e,s),W(e)}var d=M();function h(e){v(N,e),N.length=t.length,d.notifyListeners(N.location,N.action)}var f=!1,p=null;function I(){var e=L(),t=c(e);if(e!==t)K(t);else{var n=g(),i=N.location;if(!f&&function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash}(i,n))return;if(p===R(n))return;null,function(e){if(f)!1,h();else{var t="POP";d.confirmTransitionTo(e,t,r,(function(n){n?h({action:t,location:e}):function(e){var t=N.location,n=b.lastIndexOf(R(t));-1===n&&0;var i=b.lastIndexOf(R(e));-1===i&&0;var r=n-i;r&&(!0,y(r))}(e)}))}}(n)}}var C=L(),m=c(C);C!==m&&K(m);var A=g(),b=[R(A)];function y(e){t.go(e)}var G=0;function w(e){1===(G+=e)&&1===e?window.addEventListener(Y,I):0===G&&window.removeEventListener(Y,I)}var S=!1;var N={length:t.length,action:"POP",location:A,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&z(window.location.href),n+"#"+c(s+R(e))},push:function(e,t){var n="PUSH",i=W(e,void 0,void 0,N.location);d.confirmTransitionTo(i,n,r,(function(e){if(e){var t=R(i),r=c(s+t);if(L()!==r){t,function(e){window.location.hash=e}(r);var a=b.lastIndexOf(R(N.location)),o=b.slice(0,a+1);o.push(t),o,h({action:n,location:i})}else h()}}))},replace:function(e,t){var n="REPLACE",i=W(e,void 0,void 0,N.location);d.confirmTransitionTo(i,n,r,(function(e){if(e){var t=R(i),r=c(s+t);L()!==r&&(t,K(r));var a=b.indexOf(R(N.location));-1!==a&&(b[a]=t),h({action:n,location:i})}}))},go:y,goBack:function(){y(-1)},goForward:function(){y(1)},block:function(e){void 0===e&&!1;var t=d.setPrompt(e);return S||(w(1),!0),function(){return S&&(!1,w(-1)),t()}},listen:function(e){var t=d.appendListener(e);return w(1),function(){w(-1),t()}}};return N}function P(e,t,n){return Math.min(Math.max(e,t),n)}var D=n(6151),O=n.n(D);n(8228);function U(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}var j=n(2110),J=n.n(j),Q=1073741823,q="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{};var $=t.createContext||function(e,n){var i,r,a="__create-react-context-"+function(){var e="__global_unique_id__";return q[e]=(q[e]||0)+1}()+"__",o=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).emitter=function(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,i){e=n,t.forEach((function(t){return t(e,i)}))}}}(t.props.value),t}I(t,e);var i=t.prototype;return i.getChildContext=function(){var e;return(e={})[a]=this.emitter,e},i.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var t,i=this.props.value,r=e.value;!function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(i,r)?(t="function"===typeof n?n(i,r):Q,0!==(t|=0)&&this.emitter.set(e.value,t)):t=0}},i.render=function(){return this.props.children},t}(t.Component);o.childContextTypes=((i={})[a]=m().object.isRequired,i);var s=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this).observedBits=void 0,e.state={value:e.getValue()},e.onUpdate=function(t,n){0!==((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}I(n,t);var i=n.prototype;return i.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?Q:t},i.componentDidMount=function(){this.context[a]&&this.context[a].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?Q:e},i.componentWillUnmount=function(){this.context[a]&&this.context[a].off(this.onUpdate)},i.getValue=function(){return this.context[a]?this.context[a].get():e},i.render=function(){return function(e){return Array.isArray(e)?e[0]:e}(this.props.children)(this.state.value)},n}(t.Component);return s.contextTypes=((r={})[a]=m().object,r),{Provider:o,Consumer:s}},ee=function(e){var t=$();return t.displayName=e,t},te=ee("Router-History"),ne=ee("Router"),ie=function(e){function n(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._pendingLocation=e}))),n}I(n,e),n.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var i=n.prototype;return i.componentDidMount=function(){var e=this;this._isMounted=!0,this.unlisten&&this.unlisten(),this.props.staticContext||(this.unlisten=this.props.history.listen((function(t){e._isMounted&&e.setState({location:t})}))),this._pendingLocation&&this.setState({location:this._pendingLocation})},i.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},i.render=function(){return t.createElement(ne.Provider,{value:{history:this.props.history,location:this.state.location,match:n.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},t.createElement(te.Provider,{children:this.props.children||null,value:this.props.history}))},n}(t.Component);t.Component;t.Component;var re={},ae=1e4,oe=0;function se(e,t){void 0===t&&(t={}),("string"===typeof t||Array.isArray(t))&&(t={path:t});var n=t,i=n.path,r=n.exact,a=void 0!==r&&r,o=n.strict,s=void 0!==o&&o,l=n.sensitive,c=void 0!==l&&l;return[].concat(i).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var i=function(e,t){var n=""+t.end+t.strict+t.sensitive,i=re[n]||(re[n]={});if(i[e])return i[e];var r=[],a={regexp:O()(e,r,t),keys:r};return oe<ae&&(i[e]=a,oe++),a}(n,{end:a,strict:s,sensitive:c}),r=i.regexp,o=i.keys,l=r.exec(e);if(!l)return null;var u=l[0],g=l.slice(1),d=e===u;return a&&!d?null:{path:n,url:"/"===n&&""===u?"/":u,isExact:d,params:o.reduce((function(e,t,n){return e[t.name]=g[n],e}),{})}}),null)}var le=function(e){function n(){return e.apply(this,arguments)||this}return I(n,e),n.prototype.render=function(){var e=this;return t.createElement(ne.Consumer,null,(function(n){n||B(!1);var i=e.props.location||n.location,r=v({},n,{location:i,match:e.props.computedMatch?e.props.computedMatch:e.props.path?se(i.pathname,e.props):n.match}),a=e.props,o=a.children,s=a.component,l=a.render;return Array.isArray(o)&&function(e){return 0===t.Children.count(e)}(o)&&(o=null),t.createElement(ne.Provider,{value:r},r.match?o?"function"===typeof o?o(r):o:s?t.createElement(s,r):l?l(r):null:"function"===typeof o?o(r):null)}))},n}(t.Component);function ce(e){return"/"===e.charAt(0)?e:"/"+e}function ue(e,t){if(!e)return t;var n=ce(e);return 0!==t.pathname.indexOf(n)?t:v({},t,{pathname:t.pathname.substr(n.length)})}function ge(e){return"string"===typeof e?e:R(e)}function de(e){return function(){B(!1)}}function he(){}t.Component;var fe=function(e){function n(){return e.apply(this,arguments)||this}return I(n,e),n.prototype.render=function(){var e=this;return t.createElement(ne.Consumer,null,(function(n){n||B(!1);var i,r,a=e.props.location||n.location;return t.Children.forEach(e.props.children,(function(e){if(null==r&&t.isValidElement(e)){i=e;var o=e.props.path||e.props.from;r=o?se(a.pathname,v({},e.props,{path:o})):n.match}})),r?t.cloneElement(i,{location:a,computedMatch:r}):null}))},n}(t.Component);var pe=t.useContext;function Ie(){return pe(ne).location}var Ce=function(e){function n(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).history=X(t.props),t}return I(n,e),n.prototype.render=function(){return t.createElement(ie,{history:this.history,children:this.props.children})},n}(t.Component);t.Component;var me=function(e,t){return"function"===typeof e?e(t):e},ve=function(e,t){return"string"===typeof e?W(e,null,null,t):e},Ae=function(e){return e},be=t.forwardRef;"undefined"===typeof be&&(be=Ae);var ye=be((function(e,n){var i=e.innerRef,r=e.navigate,a=e.onClick,o=U(e,["innerRef","navigate","onClick"]),s=o.target,l=v({},o,{onClick:function(e){try{a&&a(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||s&&"_self"!==s||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),r())}});return l.ref=Ae!==be&&n||i,t.createElement("a",l)}));var Ge=be((function(e,n){var i=e.component,r=void 0===i?ye:i,a=e.replace,o=e.to,s=e.innerRef,l=U(e,["component","replace","to","innerRef"]);return t.createElement(ne.Consumer,null,(function(e){e||B(!1);var i=e.history,c=ve(me(o,e.location),e.location),u=c?i.createHref(c):"",g=v({},l,{href:u,navigate:function(){var t=me(o,e.location),n=R(e.location)===R(ve(t));(a||n?i.replace:i.push)(t)}});return Ae!==be?g.ref=n||s:g.innerRef=s,t.createElement(r,g)}))})),we=function(e){return e},Be=t.forwardRef;"undefined"===typeof Be&&(Be=we);var xe=Be((function(e,n){var i=e["aria-current"],r=void 0===i?"page":i,a=e.activeClassName,o=void 0===a?"active":a,s=e.activeStyle,l=e.className,c=e.exact,u=e.isActive,g=e.location,d=e.sensitive,h=e.strict,f=e.style,p=e.to,I=e.innerRef,C=U(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return t.createElement(ne.Consumer,null,(function(e){e||B(!1);var i=g||e.location,a=ve(me(p,i),i),m=a.pathname,A=m&&m.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),b=A?se(i.pathname,{path:A,exact:c,sensitive:d,strict:h}):null,y=!!(u?u(b,i):b),G="function"===typeof l?l(y):l,w="function"===typeof f?f(y):f;y&&(G=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(G,o),w=v({},w,s));var x=v({"aria-current":y&&r||null,className:G,style:w,to:a},C);return we!==Be?x.ref=n||I:x.innerRef=I,t.createElement(Ge,x)}))}));function Se(e){return Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Se(e)}function Ze(e){var t=function(e,t){if("object"!==Se(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==Se(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Se(t)?t:String(t)}function ke(e,t,n){return(t=Ze(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Re(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function We(e){return function(e){if(Array.isArray(e))return o(e)}(e)||Re(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(n),!0).forEach((function(t){ke(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fe(e,t){if(null==e)return{};var n,i,r=U(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Ne="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},He="object"===("undefined"===typeof window?"undefined":Ne(window))&&"object"===("undefined"===typeof document?"undefined":Ne(document))&&9===document.nodeType;function Te(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,Ze(i.key),i)}}function Xe(e,t,n){return t&&Te(e.prototype,t),n&&Te(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ye(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Ee={}.constructor;function ze(e){if(null==e||"object"!==typeof e)return e;if(Array.isArray(e))return e.map(ze);if(e.constructor!==Ee)return e;var t={};for(var n in e)t[n]=ze(e[n]);return t}function Le(e,t,n){void 0===e&&(e="unnamed");var i=n.jss,r=ze(t),a=i.plugins.onCreateRule(e,r,n);return a||(e[0],null)}var Ke=function(e,t){for(var n="",i=0;i<e.length&&"!important"!==e[i];i++)n&&(n+=t),n+=e[i];return n},_e=function(e){if(!Array.isArray(e))return e;var t="";if(Array.isArray(e[0]))for(var n=0;n<e.length&&"!important"!==e[n];n++)t&&(t+=", "),t+=Ke(e[n]," ");else t=Ke(e,", ");return"!important"===e[e.length-1]&&(t+=" !important"),t};function Pe(e){return e&&!1===e.format?{linebreak:"",space:""}:{linebreak:"\n",space:" "}}function De(e,t){for(var n="",i=0;i<t;i++)n+="  ";return n+e}function Oe(e,t,n){void 0===n&&(n={});var i="";if(!t)return i;var r=n.indent,a=void 0===r?0:r,o=t.fallbacks;!1===n.format&&(a=-1/0);var s=Pe(n),l=s.linebreak,c=s.space;if(e&&a++,o)if(Array.isArray(o))for(var u=0;u<o.length;u++){var g=o[u];for(var d in g){var h=g[d];null!=h&&(i&&(i+=l),i+=De(d+":"+c+_e(h)+";",a))}}else for(var f in o){var p=o[f];null!=p&&(i&&(i+=l),i+=De(f+":"+c+_e(p)+";",a))}for(var I in t){var C=t[I];null!=C&&"fallbacks"!==I&&(i&&(i+=l),i+=De(I+":"+c+_e(C)+";",a))}return(i||n.allowEmpty)&&e?(i&&(i=""+l+i+l),De(""+e+c+"{"+i,--a)+De("}",a)):i}var Ue=/([[\].#*$><+~=|^:(),"'`\s])/g,je="undefined"!==typeof CSS&&CSS.escape,Je=function(e){return je?je(e):e.replace(Ue,"\\$1")},Qe=function(){function e(e,t,n){this.type="style",this.isProcessed=!1;var i=n.sheet,r=n.Renderer;this.key=e,this.options=n,this.style=t,i?this.renderer=i.renderer:r&&(this.renderer=new r)}return e.prototype.prop=function(e,t,n){if(void 0===t)return this.style[e];var i=!!n&&n.force;if(!i&&this.style[e]===t)return this;var r=t;n&&!1===n.process||(r=this.options.jss.plugins.onChangeValue(t,e,this));var a=null==r||!1===r,o=e in this.style;if(a&&!o&&!i)return this;var s=a&&o;if(s?delete this.style[e]:this.style[e]=r,this.renderable&&this.renderer)return s?this.renderer.removeProperty(this.renderable,e):this.renderer.setProperty(this.renderable,e,r),this;var l=this.options.sheet;return l&&l.attached,this},e}(),qe=function(e){function t(t,n,i){var r;r=e.call(this,t,n,i)||this;var a=i.selector,o=i.scoped,s=i.sheet,l=i.generateId;return a?r.selectorText=a:!1!==o&&(r.id=l(Ye(Ye(r)),s),r.selectorText="."+Je(r.id)),r}I(t,e);var n=t.prototype;return n.applyTo=function(e){var t=this.renderer;if(t){var n=this.toJSON();for(var i in n)t.setProperty(e,i,n[i])}return this},n.toJSON=function(){var e={};for(var t in this.style){var n=this.style[t];"object"!==typeof n?e[t]=n:Array.isArray(n)&&(e[t]=_e(n))}return e},n.toString=function(e){var t=this.options.sheet,n=!!t&&t.options.link?v({},e,{allowEmpty:!0}):e;return Oe(this.selectorText,this.style,n)},Xe(t,[{key:"selector",set:function(e){if(e!==this.selectorText){this.selectorText=e;var t=this.renderer,n=this.renderable;if(n&&t)t.setSelector(n,e)||t.replaceRule(n,this)}},get:function(){return this.selectorText}}]),t}(Qe),$e={onCreateRule:function(e,t,n){return"@"===e[0]||n.parent&&"keyframes"===n.parent.type?null:new qe(e,t,n)}},et={indent:1,children:!0},tt=/@([\w-]+)/,nt=function(){function e(e,t,n){this.type="conditional",this.isProcessed=!1,this.key=e;var i=e.match(tt);for(var r in this.at=i?i[1]:"unknown",this.query=n.name||"@"+this.at,this.options=n,this.rules=new xt(v({},n,{parent:this})),t)this.rules.add(r,t[r]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.indexOf=function(e){return this.rules.indexOf(e)},t.addRule=function(e,t,n){var i=this.rules.add(e,t,n);return i?(this.options.jss.plugins.onProcessRule(i),i):null},t.replaceRule=function(e,t,n){var i=this.rules.replace(e,t,n);return i&&this.options.jss.plugins.onProcessRule(i),i},t.toString=function(e){void 0===e&&(e=et);var t=Pe(e).linebreak;if(null==e.indent&&(e.indent=et.indent),null==e.children&&(e.children=et.children),!1===e.children)return this.query+" {}";var n=this.rules.toString(e);return n?this.query+" {"+t+n+t+"}":""},e}(),it=/@container|@media|@supports\s+/,rt={onCreateRule:function(e,t,n){return it.test(e)?new nt(e,t,n):null}},at={indent:1,children:!0},ot=/@keyframes\s+([\w-]+)/,st=function(){function e(e,t,n){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var i=e.match(ot);i&&i[1]?this.name=i[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=n;var r=n.scoped,a=n.sheet,o=n.generateId;for(var s in this.id=!1===r?this.name:Je(o(this,a)),this.rules=new xt(v({},n,{parent:this})),t)this.rules.add(s,t[s],v({},n,{parent:this}));this.rules.process()}return e.prototype.toString=function(e){void 0===e&&(e=at);var t=Pe(e).linebreak;if(null==e.indent&&(e.indent=at.indent),null==e.children&&(e.children=at.children),!1===e.children)return this.at+" "+this.id+" {}";var n=this.rules.toString(e);return n&&(n=""+t+n+t),this.at+" "+this.id+" {"+n+"}"},e}(),lt=/@keyframes\s+/,ct=/\$([\w-]+)/g,ut=function(e,t){return"string"===typeof e?e.replace(ct,(function(e,n){return n in t?t[n]:e})):e},gt=function(e,t,n){var i=e[t],r=ut(i,n);r!==i&&(e[t]=r)},dt={onCreateRule:function(e,t,n){return"string"===typeof e&&lt.test(e)?new st(e,t,n):null},onProcessStyle:function(e,t,n){return"style"===t.type&&n?("animation-name"in e&&gt(e,"animation-name",n.keyframes),"animation"in e&&gt(e,"animation",n.keyframes),e):e},onChangeValue:function(e,t,n){var i=n.options.sheet;if(!i)return e;switch(t){case"animation":case"animation-name":return ut(e,i.keyframes);default:return e}}},ht=function(e){function t(){return e.apply(this,arguments)||this}return I(t,e),t.prototype.toString=function(e){var t=this.options.sheet,n=!!t&&t.options.link?v({},e,{allowEmpty:!0}):e;return Oe(this.key,this.style,n)},t}(Qe),ft={onCreateRule:function(e,t,n){return n.parent&&"keyframes"===n.parent.type?new ht(e,t,n):null}},pt=function(){function e(e,t,n){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=e,this.style=t,this.options=n}return e.prototype.toString=function(e){var t=Pe(e).linebreak;if(Array.isArray(this.style)){for(var n="",i=0;i<this.style.length;i++)n+=Oe(this.at,this.style[i]),this.style[i+1]&&(n+=t);return n}return Oe(this.at,this.style,e)},e}(),It=/@font-face/,Ct={onCreateRule:function(e,t,n){return It.test(e)?new pt(e,t,n):null}},mt=function(){function e(e,t,n){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=e,this.style=t,this.options=n}return e.prototype.toString=function(e){return Oe(this.key,this.style,e)},e}(),vt={onCreateRule:function(e,t,n){return"@viewport"===e||"@-ms-viewport"===e?new mt(e,t,n):null}},At=function(){function e(e,t,n){this.type="simple",this.isProcessed=!1,this.key=e,this.value=t,this.options=n}return e.prototype.toString=function(e){if(Array.isArray(this.value)){for(var t="",n=0;n<this.value.length;n++)t+=this.key+" "+this.value[n]+";",this.value[n+1]&&(t+="\n");return t}return this.key+" "+this.value+";"},e}(),bt={"@charset":!0,"@import":!0,"@namespace":!0},yt={onCreateRule:function(e,t,n){return e in bt?new At(e,t,n):null}},Gt=[$e,rt,dt,ft,Ct,vt,yt],wt={process:!0},Bt={force:!0,process:!0},xt=function(){function e(e){this.map={},this.raw={},this.index=[],this.counter=0,this.options=e,this.classes=e.classes,this.keyframes=e.keyframes}var t=e.prototype;return t.add=function(e,t,n){var i=this.options,r=i.parent,a=i.sheet,o=i.jss,s=i.Renderer,l=i.generateId,c=i.scoped,u=v({classes:this.classes,parent:r,sheet:a,jss:o,Renderer:s,generateId:l,scoped:c,name:e,keyframes:this.keyframes,selector:void 0},n),g=e;e in this.raw&&(g=e+"-d"+this.counter++),this.raw[g]=t,g in this.classes&&(u.selector="."+Je(this.classes[g]));var d=Le(g,t,u);if(!d)return null;this.register(d);var h=void 0===u.index?this.index.length:u.index;return this.index.splice(h,0,d),d},t.replace=function(e,t,n){var i=this.get(e),r=this.index.indexOf(i);i&&this.remove(i);var a=n;return-1!==r&&(a=v({},n,{index:r})),this.add(e,t,a)},t.get=function(e){return this.map[e]},t.remove=function(e){this.unregister(e),delete this.raw[e.key],this.index.splice(this.index.indexOf(e),1)},t.indexOf=function(e){return this.index.indexOf(e)},t.process=function(){var e=this.options.jss.plugins;this.index.slice(0).forEach(e.onProcessRule,e)},t.register=function(e){this.map[e.key]=e,e instanceof qe?(this.map[e.selector]=e,e.id&&(this.classes[e.key]=e.id)):e instanceof st&&this.keyframes&&(this.keyframes[e.name]=e.id)},t.unregister=function(e){delete this.map[e.key],e instanceof qe?(delete this.map[e.selector],delete this.classes[e.key]):e instanceof st&&delete this.keyframes[e.name]},t.update=function(){var e,t,n;if("string"===typeof(arguments.length<=0?void 0:arguments[0])?(e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1],n=arguments.length<=2?void 0:arguments[2]):(t=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1],e=null),e)this.updateOne(this.get(e),t,n);else for(var i=0;i<this.index.length;i++)this.updateOne(this.index[i],t,n)},t.updateOne=function(t,n,i){void 0===i&&(i=wt);var r=this.options,a=r.jss.plugins,o=r.sheet;if(t.rules instanceof e)t.rules.update(n,i);else{var s=t.style;if(a.onUpdate(n,t,o,i),i.process&&s&&s!==t.style){for(var l in a.onProcessStyle(t.style,t,o),t.style){var c=t.style[l];c!==s[l]&&t.prop(l,c,Bt)}for(var u in s){var g=t.style[u],d=s[u];null==g&&g!==d&&t.prop(u,null,Bt)}}}},t.toString=function(e){for(var t="",n=this.options.sheet,i=!!n&&n.options.link,r=Pe(e).linebreak,a=0;a<this.index.length;a++){var o=this.index[a].toString(e);(o||i)&&(t&&(t+=r),t+=o)}return t},e}(),St=function(){function e(e,t){for(var n in this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=v({},t,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),t.Renderer&&(this.renderer=new t.Renderer(this)),this.rules=new xt(this.options),e)this.rules.add(n,e[n]);this.rules.process()}var t=e.prototype;return t.attach=function(){return this.attached||(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy()),this},t.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},t.addRule=function(e,t,n){var i=this.queue;this.attached&&!i&&(this.queue=[]);var r=this.rules.add(e,t,n);return r?(this.options.jss.plugins.onProcessRule(r),this.attached?this.deployed?(i?i.push(r):(this.insertRule(r),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0)),r):r:(this.deployed=!1,r)):null},t.replaceRule=function(e,t,n){var i=this.rules.get(e);if(!i)return this.addRule(e,t,n);var r=this.rules.replace(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),this.attached?this.deployed?(this.renderer&&(r?i.renderable&&this.renderer.replaceRule(i.renderable,r):this.renderer.deleteRule(i)),r):r:(this.deployed=!1,r)},t.insertRule=function(e){this.renderer&&this.renderer.insertRule(e)},t.addRules=function(e,t){var n=[];for(var i in e){var r=this.addRule(i,e[i],t);r&&n.push(r)}return n},t.getRule=function(e){return this.rules.get(e)},t.deleteRule=function(e){var t="object"===typeof e?e:this.rules.get(e);return!(!t||this.attached&&!t.renderable)&&(this.rules.remove(t),!(this.attached&&t.renderable&&this.renderer)||this.renderer.deleteRule(t.renderable))},t.indexOf=function(e){return this.rules.indexOf(e)},t.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},t.update=function(){var e;return(e=this.rules).update.apply(e,arguments),this},t.updateOne=function(e,t,n){return this.rules.updateOne(e,t,n),this},t.toString=function(e){return this.rules.toString(e)},e}(),Zt=function(){function e(){this.plugins={internal:[],external:[]},this.registry={}}var t=e.prototype;return t.onCreateRule=function(e,t,n){for(var i=0;i<this.registry.onCreateRule.length;i++){var r=this.registry.onCreateRule[i](e,t,n);if(r)return r}return null},t.onProcessRule=function(e){if(!e.isProcessed){for(var t=e.options.sheet,n=0;n<this.registry.onProcessRule.length;n++)this.registry.onProcessRule[n](e,t);e.style&&this.onProcessStyle(e.style,e,t),e.isProcessed=!0}},t.onProcessStyle=function(e,t,n){for(var i=0;i<this.registry.onProcessStyle.length;i++)t.style=this.registry.onProcessStyle[i](t.style,t,n)},t.onProcessSheet=function(e){for(var t=0;t<this.registry.onProcessSheet.length;t++)this.registry.onProcessSheet[t](e)},t.onUpdate=function(e,t,n,i){for(var r=0;r<this.registry.onUpdate.length;r++)this.registry.onUpdate[r](e,t,n,i)},t.onChangeValue=function(e,t,n){for(var i=e,r=0;r<this.registry.onChangeValue.length;r++)i=this.registry.onChangeValue[r](i,t,n);return i},t.use=function(e,t){void 0===t&&(t={queue:"external"});var n=this.plugins[t.queue];-1===n.indexOf(e)&&(n.push(e),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce((function(e,t){for(var n in t)n in e&&e[n].push(t[n]);return e}),{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},e}(),kt=function(){function e(){this.registry=[]}var t=e.prototype;return t.add=function(e){var t=this.registry,n=e.options.index;if(-1===t.indexOf(e))if(0===t.length||n>=this.index)t.push(e);else for(var i=0;i<t.length;i++)if(t[i].options.index>n)return void t.splice(i,0,e)},t.reset=function(){this.registry=[]},t.remove=function(e){var t=this.registry.indexOf(e);this.registry.splice(t,1)},t.toString=function(e){for(var t=void 0===e?{}:e,n=t.attached,i=U(t,["attached"]),r=Pe(i).linebreak,a="",o=0;o<this.registry.length;o++){var s=this.registry[o];null!=n&&s.attached!==n||(a&&(a+=r),a+=s.toString(i))}return a},Xe(e,[{key:"index",get:function(){return 0===this.registry.length?0:this.registry[this.registry.length-1].options.index}}]),e}(),Rt=new kt,Wt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window&&window.Math===Math?window:"undefined"!==typeof self&&self.Math===Math?self:Function("return this")(),Mt="2f1acc6c3a606b082e5eef5e54414ffb";null==Wt[Mt]&&(Wt[Mt]=0);var Vt=Wt[Mt]++,Ft=function(e){void 0===e&&(e={});var t=0;return function(n,i){t+=1;var r="",a="";return i&&(i.options.classNamePrefix&&(a=i.options.classNamePrefix),null!=i.options.jss.id&&(r=String(i.options.jss.id))),e.minify?""+(a||"c")+Vt+r+t:a+n.key+"-"+Vt+(r?"-"+r:"")+"-"+t}},Nt=function(e){var t;return function(){return t||(t=e()),t}},Ht=function(e,t){try{return e.attributeStyleMap?e.attributeStyleMap.get(t):e.style.getPropertyValue(t)}catch(n){return""}},Tt=function(e,t,n){try{var i=n;if(Array.isArray(n)&&(i=_e(n)),e.attributeStyleMap)e.attributeStyleMap.set(t,i);else{var r=i?i.indexOf("!important"):-1,a=r>-1?i.substr(0,r-1):i;e.style.setProperty(t,a,r>-1?"important":"")}}catch(o){return!1}return!0},Xt=function(e,t){try{e.attributeStyleMap?e.attributeStyleMap.delete(t):e.style.removeProperty(t)}catch(n){}},Yt=function(e,t){return e.selectorText=t,e.selectorText===t},Et=Nt((function(){return document.querySelector("head")}));function zt(e){var t=Rt.registry;if(t.length>0){var n=function(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(i.attached&&i.options.index>t.index&&i.options.insertionPoint===t.insertionPoint)return i}return null}(t,e);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=function(e,t){for(var n=e.length-1;n>=0;n--){var i=e[n];if(i.attached&&i.options.insertionPoint===t.insertionPoint)return i}return null}(t,e),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var i=e.insertionPoint;if(i&&"string"===typeof i){var r=function(e){for(var t=Et(),n=0;n<t.childNodes.length;n++){var i=t.childNodes[n];if(8===i.nodeType&&i.nodeValue.trim()===e)return i}return null}(i);if(r)return{parent:r.parentNode,node:r.nextSibling}}return!1}var Lt=Nt((function(){var e=document.querySelector('meta[property="csp-nonce"]');return e?e.getAttribute("content"):null})),Kt=function(e,t,n){try{"insertRule"in e?e.insertRule(t,n):"appendRule"in e&&e.appendRule(t)}catch(i){return!1}return e.cssRules[n]},_t=function(e,t){var n=e.cssRules.length;return void 0===t||t>n?n:t},Pt=function(){function e(e){this.getPropertyValue=Ht,this.setProperty=Tt,this.removeProperty=Xt,this.setSelector=Yt,this.hasInsertedRules=!1,this.cssRules=[],e&&Rt.add(e),this.sheet=e;var t=this.sheet?this.sheet.options:{},n=t.media,i=t.meta,r=t.element;this.element=r||function(){var e=document.createElement("style");return e.textContent="\n",e}(),this.element.setAttribute("data-jss",""),n&&this.element.setAttribute("media",n),i&&this.element.setAttribute("data-meta",i);var a=Lt();a&&this.element.setAttribute("nonce",a)}var t=e.prototype;return t.attach=function(){if(!this.element.parentNode&&this.sheet){!function(e,t){var n=t.insertionPoint,i=zt(t);if(!1!==i&&i.parent)i.parent.insertBefore(e,i.node);else if(n&&"number"===typeof n.nodeType){var r=n,a=r.parentNode;a&&a.insertBefore(e,r.nextSibling)}else Et().appendChild(e)}(this.element,this.sheet.options);var e=Boolean(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&e&&(this.hasInsertedRules=!1,this.deploy())}},t.detach=function(){if(this.sheet){var e=this.element.parentNode;e&&e.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent="\n")}},t.deploy=function(){var e=this.sheet;e&&(e.options.link?this.insertRules(e.rules):this.element.textContent="\n"+e.toString()+"\n")},t.insertRules=function(e,t){for(var n=0;n<e.index.length;n++)this.insertRule(e.index[n],n,t)},t.insertRule=function(e,t,n){if(void 0===n&&(n=this.element.sheet),e.rules){var i=e,r=n;if("conditional"===e.type||"keyframes"===e.type){var a=_t(n,t);if(!1===(r=Kt(n,i.toString({children:!1}),a)))return!1;this.refCssRule(e,a,r)}return this.insertRules(i.rules,r),r}var o=e.toString();if(!o)return!1;var s=_t(n,t),l=Kt(n,o,s);return!1!==l&&(this.hasInsertedRules=!0,this.refCssRule(e,s,l),l)},t.refCssRule=function(e,t,n){e.renderable=n,e.options.parent instanceof St&&this.cssRules.splice(t,0,n)},t.deleteRule=function(e){var t=this.element.sheet,n=this.indexOf(e);return-1!==n&&(t.deleteRule(n),this.cssRules.splice(n,1),!0)},t.indexOf=function(e){return this.cssRules.indexOf(e)},t.replaceRule=function(e,t){var n=this.indexOf(e);return-1!==n&&(this.element.sheet.deleteRule(n),this.cssRules.splice(n,1),this.insertRule(t,n))},t.getRules=function(){return this.element.sheet.cssRules},e}(),Dt=0,Ot=function(){function e(e){this.id=Dt++,this.version="10.10.0",this.plugins=new Zt,this.options={id:{minify:!1},createGenerateId:Ft,Renderer:He?Pt:null,plugins:[]},this.generateId=Ft({minify:!1});for(var t=0;t<Gt.length;t++)this.plugins.use(Gt[t],{queue:"internal"});this.setup(e)}var t=e.prototype;return t.setup=function(e){return void 0===e&&(e={}),e.createGenerateId&&(this.options.createGenerateId=e.createGenerateId),e.id&&(this.options.id=v({},this.options.id,e.id)),(e.createGenerateId||e.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),null!=e.insertionPoint&&(this.options.insertionPoint=e.insertionPoint),"Renderer"in e&&(this.options.Renderer=e.Renderer),e.plugins&&this.use.apply(this,e.plugins),this},t.createStyleSheet=function(e,t){void 0===t&&(t={});var n=t.index;"number"!==typeof n&&(n=0===Rt.index?0:Rt.index+1);var i=new St(e,v({},t,{jss:this,generateId:t.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:n}));return this.plugins.onProcessSheet(i),i},t.removeStyleSheet=function(e){return e.detach(),Rt.remove(e),this},t.createRule=function(e,t,n){if(void 0===t&&(t={}),void 0===n&&(n={}),"object"===typeof e)return this.createRule(void 0,e,t);var i=v({},n,{name:e,jss:this,Renderer:this.options.Renderer});i.generateId||(i.generateId=this.generateId),i.classes||(i.classes={}),i.keyframes||(i.keyframes={});var r=Le(e,t,i);return r&&this.plugins.onProcessRule(r),r},t.use=function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return n.forEach((function(t){e.plugins.use(t)})),this},e}(),Ut=function(e){return new Ot(e)},jt="object"===typeof CSS&&null!=CSS&&"number"in CSS;function Jt(e){var t=null;for(var n in e){var i=e[n],r=typeof i;if("function"===r)t||(t={}),t[n]=i;else if("object"===r&&null!==i&&!Array.isArray(i)){var a=Jt(i);a&&(t||(t={}),t[n]=a)}}return t}Ut();function Qt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.baseClasses,n=e.newClasses;e.Component;if(!n)return t;var i=v({},t);return Object.keys(n).forEach((function(e){n[e]&&(i[e]="".concat(t[e]," ").concat(n[e]))})),i}var qt={set:function(e,t,n,i){var r=e.get(t);r||(r=new Map,e.set(t,r)),r.set(n,i)},get:function(e,t,n){var i=e.get(t);return i?i.get(n):void 0},delete:function(e,t,n){e.get(t).delete(n)}},$t=qt;var en=t.createContext(null);function tn(){return t.useContext(en)}var nn="function"===typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__",rn=["checked","disabled","error","focused","focusVisible","required","expanded","selected"];var an=Date.now(),on="fnValues"+an,sn="fnStyle"+ ++an,ln=function(){return{onCreateRule:function(e,t,n){if("function"!==typeof t)return null;var i=Le(e,{},n);return i[sn]=t,i},onProcessStyle:function(e,t){if(on in t||sn in t)return e;var n={};for(var i in e){var r=e[i];"function"===typeof r&&(delete e[i],n[i]=r)}return t[on]=n,e},onUpdate:function(e,t,n,i){var r=t,a=r[sn];a&&(r.style=a(e)||{});var o=r[on];if(o)for(var s in o)r.prop(s,o[s](e),i)}}},cn="@global",un="@global ",gn=function(){function e(e,t,n){for(var i in this.type="global",this.at=cn,this.isProcessed=!1,this.key=e,this.options=n,this.rules=new xt(v({},n,{parent:this})),t)this.rules.add(i,t[i]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.addRule=function(e,t,n){var i=this.rules.add(e,t,n);return i&&this.options.jss.plugins.onProcessRule(i),i},t.replaceRule=function(e,t,n){var i=this.rules.replace(e,t,n);return i&&this.options.jss.plugins.onProcessRule(i),i},t.indexOf=function(e){return this.rules.indexOf(e)},t.toString=function(e){return this.rules.toString(e)},e}(),dn=function(){function e(e,t,n){this.type="global",this.at=cn,this.isProcessed=!1,this.key=e,this.options=n;var i=e.substr(8);this.rule=n.jss.createRule(i,t,v({},n,{parent:this}))}return e.prototype.toString=function(e){return this.rule?this.rule.toString(e):""},e}(),hn=/\s*,\s*/g;function fn(e,t){for(var n=e.split(hn),i="",r=0;r<n.length;r++)i+=t+" "+n[r].trim(),n[r+1]&&(i+=", ");return i}var pn=function(){return{onCreateRule:function(e,t,n){if(!e)return null;if(e===cn)return new gn(e,t,n);if("@"===e[0]&&e.substr(0,8)===un)return new dn(e,t,n);var i=n.parent;return i&&("global"===i.type||i.options.parent&&"global"===i.options.parent.type)&&(n.scoped=!1),n.selector||!1!==n.scoped||(n.selector=e),null},onProcessRule:function(e,t){"style"===e.type&&t&&(function(e,t){var n=e.options,i=e.style,r=i?i[cn]:null;if(r){for(var a in r)t.addRule(a,r[a],v({},n,{selector:fn(a,e.selector)}));delete i[cn]}}(e,t),function(e,t){var n=e.options,i=e.style;for(var r in i)if("@"===r[0]&&r.substr(0,cn.length)===cn){var a=fn(r.substr(cn.length),e.selector);t.addRule(a,i[r],v({},n,{selector:a})),delete i[r]}}(e,t))}}},In=/\s*,\s*/g,Cn=/&/g,mn=/\$([\w-]+)/g;var vn=function(){function e(e,t){return function(n,i){var r=e.getRule(i)||t&&t.getRule(i);return r?r.selector:i}}function t(e,t){for(var n=t.split(In),i=e.split(In),r="",a=0;a<n.length;a++)for(var o=n[a],s=0;s<i.length;s++){var l=i[s];r&&(r+=", "),r+=-1!==l.indexOf("&")?l.replace(Cn,o):o+" "+l}return r}function n(e,t,n){if(n)return v({},n,{index:n.index+1});var i=e.options.nestingLevel;i=void 0===i?1:i+1;var r=v({},e.options,{nestingLevel:i,index:t.indexOf(e)+1});return delete r.name,r}return{onProcessStyle:function(i,r,a){if("style"!==r.type)return i;var o,s,l=r,c=l.options.parent;for(var u in i){var g=-1!==u.indexOf("&"),d="@"===u[0];if(g||d){if(o=n(l,c,o),g){var h=t(u,l.selector);s||(s=e(c,a)),h=h.replace(mn,s);var f=l.key+"-"+u;"replaceRule"in c?c.replaceRule(f,i[u],v({},o,{selector:h})):c.addRule(f,i[u],v({},o,{selector:h}))}else d&&c.addRule(u,{},o).addRule(l.key,i[u],{selector:l.selector});delete i[u]}}return i}}},An=/[A-Z]/g,bn=/^ms-/,yn={};function Gn(e){return"-"+e.toLowerCase()}var wn=function(e){if(yn.hasOwnProperty(e))return yn[e];var t=e.replace(An,Gn);return yn[e]=bn.test(t)?"-"+t:t};function Bn(e){var t={};for(var n in e){t[0===n.indexOf("--")?n:wn(n)]=e[n]}return e.fallbacks&&(Array.isArray(e.fallbacks)?t.fallbacks=e.fallbacks.map(Bn):t.fallbacks=Bn(e.fallbacks)),t}var xn=function(){return{onProcessStyle:function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)e[t]=Bn(e[t]);return e}return Bn(e)},onChangeValue:function(e,t,n){if(0===t.indexOf("--"))return e;var i=wn(t);return t===i?e:(n.prop(i,e),null)}}},Sn=jt&&CSS?CSS.px:"px",Zn=jt&&CSS?CSS.ms:"ms",kn=jt&&CSS?CSS.percent:"%";function Rn(e){var t=/(-[a-z])/g,n=function(e){return e[1].toUpperCase()},i={};for(var r in e)i[r]=e[r],i[r.replace(t,n)]=e[r];return i}var Wn=Rn({"animation-delay":Zn,"animation-duration":Zn,"background-position":Sn,"background-position-x":Sn,"background-position-y":Sn,"background-size":Sn,border:Sn,"border-bottom":Sn,"border-bottom-left-radius":Sn,"border-bottom-right-radius":Sn,"border-bottom-width":Sn,"border-left":Sn,"border-left-width":Sn,"border-radius":Sn,"border-right":Sn,"border-right-width":Sn,"border-top":Sn,"border-top-left-radius":Sn,"border-top-right-radius":Sn,"border-top-width":Sn,"border-width":Sn,"border-block":Sn,"border-block-end":Sn,"border-block-end-width":Sn,"border-block-start":Sn,"border-block-start-width":Sn,"border-block-width":Sn,"border-inline":Sn,"border-inline-end":Sn,"border-inline-end-width":Sn,"border-inline-start":Sn,"border-inline-start-width":Sn,"border-inline-width":Sn,"border-start-start-radius":Sn,"border-start-end-radius":Sn,"border-end-start-radius":Sn,"border-end-end-radius":Sn,margin:Sn,"margin-bottom":Sn,"margin-left":Sn,"margin-right":Sn,"margin-top":Sn,"margin-block":Sn,"margin-block-end":Sn,"margin-block-start":Sn,"margin-inline":Sn,"margin-inline-end":Sn,"margin-inline-start":Sn,padding:Sn,"padding-bottom":Sn,"padding-left":Sn,"padding-right":Sn,"padding-top":Sn,"padding-block":Sn,"padding-block-end":Sn,"padding-block-start":Sn,"padding-inline":Sn,"padding-inline-end":Sn,"padding-inline-start":Sn,"mask-position-x":Sn,"mask-position-y":Sn,"mask-size":Sn,height:Sn,width:Sn,"min-height":Sn,"max-height":Sn,"min-width":Sn,"max-width":Sn,bottom:Sn,left:Sn,top:Sn,right:Sn,inset:Sn,"inset-block":Sn,"inset-block-end":Sn,"inset-block-start":Sn,"inset-inline":Sn,"inset-inline-end":Sn,"inset-inline-start":Sn,"box-shadow":Sn,"text-shadow":Sn,"column-gap":Sn,"column-rule":Sn,"column-rule-width":Sn,"column-width":Sn,"font-size":Sn,"font-size-delta":Sn,"letter-spacing":Sn,"text-decoration-thickness":Sn,"text-indent":Sn,"text-stroke":Sn,"text-stroke-width":Sn,"word-spacing":Sn,motion:Sn,"motion-offset":Sn,outline:Sn,"outline-offset":Sn,"outline-width":Sn,perspective:Sn,"perspective-origin-x":kn,"perspective-origin-y":kn,"transform-origin":kn,"transform-origin-x":kn,"transform-origin-y":kn,"transform-origin-z":kn,"transition-delay":Zn,"transition-duration":Zn,"vertical-align":Sn,"flex-basis":Sn,"shape-margin":Sn,size:Sn,gap:Sn,grid:Sn,"grid-gap":Sn,"row-gap":Sn,"grid-row-gap":Sn,"grid-column-gap":Sn,"grid-template-rows":Sn,"grid-template-columns":Sn,"grid-auto-rows":Sn,"grid-auto-columns":Sn,"box-shadow-x":Sn,"box-shadow-y":Sn,"box-shadow-blur":Sn,"box-shadow-spread":Sn,"font-line-height":Sn,"text-shadow-x":Sn,"text-shadow-y":Sn,"text-shadow-blur":Sn});function Mn(e,t,n){if(null==t)return t;if(Array.isArray(t))for(var i=0;i<t.length;i++)t[i]=Mn(e,t[i],n);else if("object"===typeof t)if("fallbacks"===e)for(var r in t)t[r]=Mn(r,t[r],n);else for(var a in t)t[a]=Mn(e+"-"+a,t[a],n);else if("number"===typeof t&&!1===isNaN(t)){var o=n[e]||Wn[e];return!o||0===t&&o===Sn?t.toString():"function"===typeof o?o(t).toString():""+t+o}return t}var Vn=function(e){void 0===e&&(e={});var t=Rn(e);return{onProcessStyle:function(e,n){if("style"!==n.type)return e;for(var i in e)e[i]=Mn(i,e[i],t);return e},onChangeValue:function(e,n){return Mn(n,e,t)}}},Fn="",Nn="",Hn="",Tn="",Xn=He&&"ontouchstart"in document.documentElement;if(He){var Yn={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},En=document.createElement("p").style;for(var zn in Yn)if(zn+"Transform"in En){Fn=zn,Nn=Yn[zn];break}"Webkit"===Fn&&"msHyphens"in En&&(Fn="ms",Nn=Yn.ms,Tn="edge"),"Webkit"===Fn&&"-apple-trailing-word"in En&&(Hn="apple")}var Ln={js:Fn,css:Nn,vendor:Hn,browser:Tn,isTouch:Xn};var Kn={noPrefill:["appearance"],supportedProperty:function(e){return"appearance"===e&&("ms"===Ln.js?"-webkit-"+e:Ln.css+e)}},_n={noPrefill:["color-adjust"],supportedProperty:function(e){return"color-adjust"===e&&("Webkit"===Ln.js?Ln.css+"print-"+e:e)}},Pn=/[-\s]+(.)?/g;function Dn(e,t){return t?t.toUpperCase():""}function On(e){return e.replace(Pn,Dn)}function Un(e){return On("-"+e)}var jn,Jn={noPrefill:["mask"],supportedProperty:function(e,t){if(!/^mask/.test(e))return!1;if("Webkit"===Ln.js){var n="mask-image";if(On(n)in t)return e;if(Ln.js+Un(n)in t)return Ln.css+e}return e}},Qn={noPrefill:["text-orientation"],supportedProperty:function(e){return"text-orientation"===e&&("apple"!==Ln.vendor||Ln.isTouch?e:Ln.css+e)}},qn={noPrefill:["transform"],supportedProperty:function(e,t,n){return"transform"===e&&(n.transform?e:Ln.css+e)}},$n={noPrefill:["transition"],supportedProperty:function(e,t,n){return"transition"===e&&(n.transition?e:Ln.css+e)}},ei={noPrefill:["writing-mode"],supportedProperty:function(e){return"writing-mode"===e&&("Webkit"===Ln.js||"ms"===Ln.js&&"edge"!==Ln.browser?Ln.css+e:e)}},ti={noPrefill:["user-select"],supportedProperty:function(e){return"user-select"===e&&("Moz"===Ln.js||"ms"===Ln.js||"apple"===Ln.vendor?Ln.css+e:e)}},ni={supportedProperty:function(e,t){return!!/^break-/.test(e)&&("Webkit"===Ln.js?"WebkitColumn"+Un(e)in t&&Ln.css+"column-"+e:"Moz"===Ln.js&&("page"+Un(e)in t&&"page-"+e))}},ii={supportedProperty:function(e,t){if(!/^(border|margin|padding)-inline/.test(e))return!1;if("Moz"===Ln.js)return e;var n=e.replace("-inline","");return Ln.js+Un(n)in t&&Ln.css+n}},ri={supportedProperty:function(e,t){return On(e)in t&&e}},ai={supportedProperty:function(e,t){var n=Un(e);return"-"===e[0]||"-"===e[0]&&"-"===e[1]?e:Ln.js+n in t?Ln.css+e:"Webkit"!==Ln.js&&"Webkit"+n in t&&"-webkit-"+e}},oi={supportedProperty:function(e){return"scroll-snap"===e.substring(0,11)&&("ms"===Ln.js?""+Ln.css+e:e)}},si={supportedProperty:function(e){return"overscroll-behavior"===e&&("ms"===Ln.js?Ln.css+"scroll-chaining":e)}},li={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},ci={supportedProperty:function(e,t){var n=li[e];return!!n&&(Ln.js+Un(n)in t&&Ln.css+n)}},ui={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},gi=Object.keys(ui),di=function(e){return Ln.css+e},hi={supportedProperty:function(e,t,n){var i=n.multiple;if(gi.indexOf(e)>-1){var r=ui[e];if(!Array.isArray(r))return Ln.js+Un(r)in t&&Ln.css+r;if(!i)return!1;for(var a=0;a<r.length;a++)if(!(Ln.js+Un(r[0])in t))return!1;return r.map(di)}return!1}},fi=[Kn,_n,Jn,Qn,qn,$n,ei,ti,ni,ii,ri,ai,oi,si,ci,hi],pi=fi.filter((function(e){return e.supportedProperty})).map((function(e){return e.supportedProperty})),Ii=fi.filter((function(e){return e.noPrefill})).reduce((function(e,t){return e.push.apply(e,We(t.noPrefill)),e}),[]),Ci={};if(He){jn=document.createElement("p");var mi=window.getComputedStyle(document.documentElement,"");for(var vi in mi)isNaN(vi)||(Ci[mi[vi]]=mi[vi]);Ii.forEach((function(e){return delete Ci[e]}))}function Ai(e,t){if(void 0===t&&(t={}),!jn)return e;if(null!=Ci[e])return Ci[e];"transition"!==e&&"transform"!==e||(t[e]=e in jn.style);for(var n=0;n<pi.length&&(Ci[e]=pi[n](e,jn.style,t),!Ci[e]);n++);try{jn.style[e]=""}catch(i){return!1}return Ci[e]}var bi,yi={},Gi={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},wi=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g;function Bi(e,t,n){if("var"===t)return"var";if("all"===t)return"all";if("all"===n)return", all";var i=t?Ai(t):", "+Ai(n);return i||(t||n)}function xi(e,t){var n=t;if(!bi||"content"===e)return t;if("string"!==typeof n||!isNaN(parseInt(n,10)))return n;var i=e+n;if(null!=yi[i])return yi[i];try{bi.style[e]=n}catch(r){return yi[i]=!1,!1}if(Gi[e])n=n.replace(wi,Bi);else if(""===bi.style[e]&&("-ms-flex"===(n=Ln.css+n)&&(bi.style[e]="-ms-flexbox"),bi.style[e]=n,""===bi.style[e]))return yi[i]=!1,!1;return bi.style[e]="",yi[i]=n,yi[i]}He&&(bi=document.createElement("p"));var Si=function(){function e(t){for(var n in t){var i=t[n];if("fallbacks"===n&&Array.isArray(i))t[n]=i.map(e);else{var r=!1,a=Ai(n);a&&a!==n&&(r=!0);var o=!1,s=xi(a,_e(i));s&&s!==i&&(o=!0),(r||o)&&(r&&delete t[n],t[a||n]=s||i)}}return t}return{onProcessRule:function(e){if("keyframes"===e.type){var t=e;t.at=function(e){return"-"===e[1]||"ms"===Ln.js?e:"@"+Ln.css+"keyframes"+e.substr(10)}(t.at)}},onProcessStyle:function(t,n){return"style"!==n.type?t:e(t)},onChangeValue:function(e,t){return xi(t,_e(e))||e}}};var Zi=function(){var e=function(e,t){return e.length===t.length?e>t?1:-1:e.length-t.length};return{onProcessStyle:function(t,n){if("style"!==n.type)return t;for(var i={},r=Object.keys(t).sort(e),a=0;a<r.length;a++)i[r[a]]=t[r[a]];return i}}};var ki=Ut({plugins:[ln(),pn(),vn(),xn(),Vn(),"undefined"===typeof window?null:Si(),Zi()]}),Ri=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.disableGlobal,n=void 0!==t&&t,i=e.productionPrefix,r=void 0===i?"jss":i,a=e.seed,o=void 0===a?"":a,s=""===o?"":"".concat(o,"-"),l=0,c=function(){return l+=1};return function(e,t){var i=t.options.name;if(i&&0===i.indexOf("Mui")&&!t.options.link&&!n){if(-1!==rn.indexOf(e.key))return"Mui-".concat(e.key);var a="".concat(s).concat(i,"-").concat(e.key);return t.options.theme[nn]&&""===o?"".concat(a,"-").concat(c()):a}return"".concat(s).concat(r).concat(c())}}(),Wi={disableGeneration:!1,generateClassName:Ri,jss:ki,sheetsCache:null,sheetsManager:new Map,sheetsRegistry:null},Mi=t.createContext(Wi);var Vi=-1e9;function Fi(e){return e&&"object"===Se(e)&&e.constructor===Object}function Ni(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},i=n.clone?v({},e):e;return Fi(e)&&Fi(t)&&Object.keys(t).forEach((function(r){"__proto__"!==r&&(Fi(t[r])&&r in e?i[r]=Ni(e[r],t[r],n):i[r]=t[r])})),i}var Hi={};function Ti(e,t){var n=e.state,i=e.theme,r=e.stylesOptions,a=e.stylesCreator,o=e.name;if(!r.disableGeneration){var s=$t.get(r.sheetsManager,a,i);s||(s={refs:0,staticSheet:null,dynamicStyles:null},$t.set(r.sheetsManager,a,i,s));var l=v({},a.options,r,{theme:i,flip:"boolean"===typeof r.flip?r.flip:"rtl"===i.direction});l.generateId=l.serverGenerateClassName||l.generateClassName;var c=r.sheetsRegistry;if(0===s.refs){var u;r.sheetsCache&&(u=$t.get(r.sheetsCache,a,i));var g=a.create(i,o);u||((u=r.jss.createStyleSheet(g,v({link:!1},l))).attach(),r.sheetsCache&&$t.set(r.sheetsCache,a,i,u)),c&&c.add(u),s.staticSheet=u,s.dynamicStyles=Jt(g)}if(s.dynamicStyles){var d=r.jss.createStyleSheet(s.dynamicStyles,v({link:!0},l));d.update(t),d.attach(),n.dynamicSheet=d,n.classes=Qt({baseClasses:s.staticSheet.classes,newClasses:d.classes}),c&&c.add(d)}else n.classes=s.staticSheet.classes;s.refs+=1}}function Xi(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.name,r=n.classNamePrefix,a=n.Component,o=n.defaultTheme,s=void 0===o?Hi:o,l=Fe(n,["name","classNamePrefix","Component","defaultTheme"]),c=function(e){var t="function"===typeof e;return{create:function(n,i){var r;try{r=t?e(n):e}catch(s){throw s}if(!i||!n.overrides||!n.overrides[i])return r;var a=n.overrides[i],o=v({},r);return Object.keys(a).forEach((function(e){o[e]=Ni(o[e],a[e])})),o},options:{}}}(e),u=i||r||"makeStyles";c.options={index:Vi+=1,name:i,meta:u,classNamePrefix:u};return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=tn()||s,r=v({},t.useContext(Mi),l),o=t.useRef(),u=t.useRef();!function(e,n){var i,r=t.useRef([]),a=t.useMemo((function(){return{}}),n);r.current!==a&&(r.current=a,i=e()),t.useEffect((function(){return function(){i&&i()}}),[a])}((function(){var t={name:i,state:{},stylesCreator:c,stylesOptions:r,theme:n};return Ti(t,e),u.current=!1,o.current=t,function(){!function(e){var t=e.state,n=e.theme,i=e.stylesOptions,r=e.stylesCreator;if(!i.disableGeneration){var a=$t.get(i.sheetsManager,r,n);a.refs-=1;var o=i.sheetsRegistry;0===a.refs&&($t.delete(i.sheetsManager,r,n),i.jss.removeStyleSheet(a.staticSheet),o&&o.remove(a.staticSheet)),t.dynamicSheet&&(i.jss.removeStyleSheet(t.dynamicSheet),o&&o.remove(t.dynamicSheet))}}(t)}}),[n,c]),t.useEffect((function(){u.current&&function(e,t){var n=e.state;n.dynamicSheet&&n.dynamicSheet.update(t)}(o.current,e),u.current=!0}));var g=function(e,t,n){var i=e.state;if(e.stylesOptions.disableGeneration)return t||{};i.cacheClasses||(i.cacheClasses={value:null,lastProp:null,lastJSS:{}});var r=!1;return i.classes!==i.cacheClasses.lastJSS&&(i.cacheClasses.lastJSS=i.classes,r=!0),t!==i.cacheClasses.lastProp&&(i.cacheClasses.lastProp=t,r=!0),r&&(i.cacheClasses.value=Qt({baseClasses:i.cacheClasses.lastJSS,newClasses:t,Component:n})),i.cacheClasses.value}(o.current,e.classes,a);return g}}var Yi=["xs","sm","md","lg","xl"];function Ei(e,t,n){var i;return v({gutters:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return console.warn(["Material-UI: theme.mixins.gutters() is deprecated.","You can use the source of the mixin directly:","\n      paddingLeft: theme.spacing(2),\n      paddingRight: theme.spacing(2),\n      [theme.breakpoints.up('sm')]: {\n        paddingLeft: theme.spacing(3),\n        paddingRight: theme.spacing(3),\n      },\n      "].join("\n")),v({paddingLeft:t(2),paddingRight:t(2)},n,ke({},e.up("sm"),v({paddingLeft:t(3),paddingRight:t(3)},n[e.up("sm")])))},toolbar:(i={minHeight:56},ke(i,"".concat(e.up("xs")," and (orientation: landscape)"),{minHeight:48}),ke(i,e.up("sm"),{minHeight:64}),i)},n)}function zi(e){for(var t="https://mui.com/production-error/?code="+e,n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified Material-UI error #"+e+"; visit "+t+" for the full message."}var Li={black:"#000",white:"#fff"},Ki={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#d5d5d5",A200:"#aaaaaa",A400:"#303030",A700:"#616161"},_i={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe"},Pi={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"},Di={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Oi={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},Ui={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},ji={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};function Ji(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function Qi(e){if(e.type)return e;if("#"===e.charAt(0))return Qi(function(e){e=e.substr(1);var t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),n=e.match(t);return n&&1===n[0].length&&(n=n.map((function(e){return e+e}))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map((function(e,t){return t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3})).join(", "),")"):""}(e));var t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla"].indexOf(n))throw new Error(zi(3,e));var i=e.substring(t+1,e.length-1).split(",");return i=i.map((function(e){return parseFloat(e)})),{type:n,values:i}}function qi(e){var t=e.type,n=e.values;return-1!==t.indexOf("rgb")?n=n.map((function(e,t){return t<3?parseInt(e,10):e})):-1!==t.indexOf("hsl")&&(n[1]="".concat(n[1],"%"),n[2]="".concat(n[2],"%")),"".concat(t,"(").concat(n.join(", "),")")}function $i(e){var t="hsl"===(e=Qi(e)).type?Qi(function(e){var t=(e=Qi(e)).values,n=t[0],i=t[1]/100,r=t[2]/100,a=i*Math.min(r,1-r),o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return r-a*Math.max(Math.min(t-3,9-t,1),-1)},s="rgb",l=[Math.round(255*o(0)),Math.round(255*o(8)),Math.round(255*o(4))];return"hsla"===e.type&&(s+="a",l.push(t[3])),qi({type:s,values:l})}(e)).values:e.values;return t=t.map((function(e){return(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)})),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function er(e,t){return e=Qi(e),t=Ji(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),e.values[3]=t,qi(e)}function tr(e,t){if(e=Qi(e),t=Ji(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]*=1-t;return qi(e)}function nr(e,t){if(e=Qi(e),t=Ji(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;return qi(e)}var ir={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Li.white,default:Ki[50]},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},rr={text:{primary:Li.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",hint:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:Ki[800],default:"#303030"},action:{active:Li.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function ar(e,t,n,i){var r=i.light||i,a=i.dark||1.5*i;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=nr(e.main,r):"dark"===t&&(e.dark=tr(e.main,a)))}function or(e){var t=e.primary,n=void 0===t?{light:_i[300],main:_i[500],dark:_i[700]}:t,i=e.secondary,r=void 0===i?{light:Pi.A200,main:Pi.A400,dark:Pi.A700}:i,a=e.error,o=void 0===a?{light:Di[300],main:Di[500],dark:Di[700]}:a,s=e.warning,l=void 0===s?{light:Oi[300],main:Oi[500],dark:Oi[700]}:s,c=e.info,u=void 0===c?{light:Ui[300],main:Ui[500],dark:Ui[700]}:c,g=e.success,d=void 0===g?{light:ji[300],main:ji[500],dark:ji[700]}:g,h=e.type,f=void 0===h?"light":h,p=e.contrastThreshold,I=void 0===p?3:p,C=e.tonalOffset,m=void 0===C?.2:C,A=Fe(e,["primary","secondary","error","warning","info","success","type","contrastThreshold","tonalOffset"]);function b(e){var t=function(e,t){var n=$i(e),i=$i(t);return(Math.max(n,i)+.05)/(Math.min(n,i)+.05)}(e,rr.text.primary)>=I?rr.text.primary:ir.text.primary;return t}var y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:700;if(!(e=v({},e)).main&&e[t]&&(e.main=e[t]),!e.main)throw new Error(zi(4,t));if("string"!==typeof e.main)throw new Error(zi(5,JSON.stringify(e.main)));return ar(e,"light",n,m),ar(e,"dark",i,m),e.contrastText||(e.contrastText=b(e.main)),e},G={dark:rr,light:ir};return Ni(v({common:Li,type:f,primary:y(n),secondary:y(r,"A400","A200","A700"),error:y(o),warning:y(l),info:y(u),success:y(d),grey:Ki,contrastThreshold:I,getContrastText:b,augmentColor:y,tonalOffset:m},G[f]),A)}function sr(e){return Math.round(1e5*e)/1e5}function lr(e){return sr(e)}var cr={textTransform:"uppercase"},ur='"Roboto", "Helvetica", "Arial", sans-serif';function gr(e,t){var n="function"===typeof t?t(e):t,i=n.fontFamily,r=void 0===i?ur:i,a=n.fontSize,o=void 0===a?14:a,s=n.fontWeightLight,l=void 0===s?300:s,c=n.fontWeightRegular,u=void 0===c?400:c,g=n.fontWeightMedium,d=void 0===g?500:g,h=n.fontWeightBold,f=void 0===h?700:h,p=n.htmlFontSize,I=void 0===p?16:p,C=n.allVariants,m=n.pxToRem,A=Fe(n,["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"]);var b=o/14,y=m||function(e){return"".concat(e/I*b,"rem")},G=function(e,t,n,i,a){return v({fontFamily:r,fontWeight:e,fontSize:y(t),lineHeight:n},r===ur?{letterSpacing:"".concat(sr(i/t),"em")}:{},a,C)},w={h1:G(l,96,1.167,-1.5),h2:G(l,60,1.2,-.5),h3:G(u,48,1.167,0),h4:G(u,34,1.235,.25),h5:G(u,24,1.334,0),h6:G(d,20,1.6,.15),subtitle1:G(u,16,1.75,.15),subtitle2:G(d,14,1.57,.1),body1:G(u,16,1.5,.15),body2:G(u,14,1.43,.15),button:G(d,14,1.75,.4,cr),caption:G(u,12,1.66,.4),overline:G(u,12,2.66,1,cr)};return Ni(v({htmlFontSize:I,pxToRem:y,round:lr,fontFamily:r,fontSize:o,fontWeightLight:l,fontWeightRegular:u,fontWeightMedium:d,fontWeightBold:f},w),A,{clone:!1})}function dr(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var hr=["none",dr(0,2,1,-1,0,1,1,0,0,1,3,0),dr(0,3,1,-2,0,2,2,0,0,1,5,0),dr(0,3,3,-2,0,3,4,0,0,1,8,0),dr(0,2,4,-1,0,4,5,0,0,1,10,0),dr(0,3,5,-1,0,5,8,0,0,1,14,0),dr(0,3,5,-1,0,6,10,0,0,1,18,0),dr(0,4,5,-2,0,7,10,1,0,2,16,1),dr(0,5,5,-3,0,8,10,1,0,3,14,2),dr(0,5,6,-3,0,9,12,1,0,3,16,2),dr(0,6,6,-3,0,10,14,1,0,4,18,3),dr(0,6,7,-4,0,11,15,1,0,4,20,3),dr(0,7,8,-4,0,12,17,2,0,5,22,4),dr(0,7,8,-4,0,13,19,2,0,5,24,4),dr(0,7,9,-4,0,14,21,2,0,5,26,4),dr(0,8,9,-5,0,15,22,2,0,6,28,5),dr(0,8,10,-5,0,16,24,2,0,6,30,5),dr(0,8,11,-5,0,17,26,2,0,6,32,5),dr(0,9,11,-5,0,18,28,2,0,7,34,6),dr(0,9,12,-6,0,19,29,2,0,7,36,6),dr(0,10,13,-6,0,20,31,3,0,8,38,7),dr(0,10,13,-6,0,21,33,3,0,8,40,7),dr(0,10,14,-6,0,22,35,3,0,8,42,7),dr(0,11,14,-7,0,23,36,3,0,9,44,8),dr(0,11,15,-7,0,24,38,3,0,9,46,8)],fr={borderRadius:4},pr={xs:0,sm:600,md:960,lg:1280,xl:1920},Ir={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(pr[e],"px)")}};var Cr=function(e,t){return t?Ni(e,t,{clone:!1}):e};var mr={m:"margin",p:"padding"},vr={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},Ar={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},br=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}((function(e){if(e.length>2){if(!Ar[e])return[e];e=Ar[e]}var t=c(e.split(""),2),n=t[0],i=t[1],r=mr[n],a=vr[i]||"";return Array.isArray(a)?a.map((function(e){return r+e})):[r+a]})),yr=["m","mt","mr","mb","ml","mx","my","p","pt","pr","pb","pl","px","py","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY"];function Gr(e){var t=e.spacing||8;return"number"===typeof t?function(e){return t*e}:Array.isArray(t)?function(e){return t[e]}:"function"===typeof t?t:function(){}}function wr(e,t){return function(n){return e.reduce((function(e,i){return e[i]=function(e,t){if("string"===typeof t||null==t)return t;var n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}(t,n),e}),{})}}function Br(e){var t=Gr(e.theme);return Object.keys(e).map((function(n){if(-1===yr.indexOf(n))return null;var i=wr(br(n),t),r=e[n];return function(e,t,n){if(Array.isArray(t)){var i=e.theme.breakpoints||Ir;return t.reduce((function(e,r,a){return e[i.up(i.keys[a])]=n(t[a]),e}),{})}if("object"===Se(t)){var r=e.theme.breakpoints||Ir;return Object.keys(t).reduce((function(e,i){return e[r.up(i)]=n(t[i]),e}),{})}return n(t)}(e,r,i)})).reduce(Cr,{})}Br.propTypes={},Br.filterProps=yr;var xr={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Sr={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Zr(e){return"".concat(Math.round(e),"ms")}var kr={easing:xr,duration:Sr,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.duration,i=void 0===n?Sr.standard:n,r=t.easing,a=void 0===r?xr.easeInOut:r,o=t.delay,s=void 0===o?0:o;Fe(t,["duration","easing","delay"]);return(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"===typeof i?i:Zr(i)," ").concat(a," ").concat("string"===typeof s?s:Zr(s))})).join(",")},getAutoHeightDuration:function(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}},Rr={mobileStepper:1e3,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function Wr(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,n=void 0===t?{}:t,i=e.mixins,r=void 0===i?{}:i,a=e.palette,o=void 0===a?{}:a,s=e.spacing,l=e.typography,c=void 0===l?{}:l,u=Fe(e,["breakpoints","mixins","palette","spacing","typography"]),g=or(o),d=function(e){var t=e.values,n=void 0===t?{xs:0,sm:600,md:960,lg:1280,xl:1920}:t,i=e.unit,r=void 0===i?"px":i,a=e.step,o=void 0===a?5:a,s=Fe(e,["values","unit","step"]);function l(e){var t="number"===typeof n[e]?n[e]:e;return"@media (min-width:".concat(t).concat(r,")")}function c(e,t){var i=Yi.indexOf(t);return i===Yi.length-1?l(e):"@media (min-width:".concat("number"===typeof n[e]?n[e]:e).concat(r,") and ")+"(max-width:".concat((-1!==i&&"number"===typeof n[Yi[i+1]]?n[Yi[i+1]]:t)-o/100).concat(r,")")}return v({keys:Yi,values:n,up:l,down:function(e){var t=Yi.indexOf(e)+1,i=n[Yi[t]];return t===Yi.length?l("xs"):"@media (max-width:".concat(("number"===typeof i&&t>0?i:e)-o/100).concat(r,")")},between:c,only:function(e){return c(e,e)},width:function(e){return n[e]}},s)}(n),h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var t=Gr({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return 0===n.length?t(1):1===n.length?t(n[0]):n.map((function(e){if("string"===typeof e)return e;var n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return Object.defineProperty(n,"unit",{get:function(){return e}}),n.mui=!0,n}(s),f=Ni({breakpoints:d,direction:"ltr",mixins:Ei(d,h,r),overrides:{},palette:g,props:{},shadows:hr,typography:gr(g,c),spacing:h,shape:fr,transitions:kr,zIndex:Rr},u),p=arguments.length,I=new Array(p>1?p-1:0),C=1;C<p;C++)I[C-1]=arguments[C];return f=I.reduce((function(e,t){return Ni(e,t)}),f)}var Mr=Wr();var Vr=function(e){return Xi(e,v({defaultTheme:Mr},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))};function Fr(e){var t,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=Fr(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}var Nr=function(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=Fr(e))&&(i&&(i+=" "),i+=t);return i};function Hr(e){var t=e.props,n=e.states,i=e.muiFormControl;return n.reduce((function(e,n){return e[n]=t[n],i&&"undefined"===typeof t[n]&&(e[n]=i[n]),e}),{})}var Tr=t.createContext();var Xr=Tr;function Yr(e){var t=e.theme,n=e.name,i=e.props;if(!t||!t.props||!t.props[n])return i;var r,a=t.props[n];for(r in a)void 0===i[r]&&(i[r]=a[r]);return i}var Er=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(i){var r=n.defaultTheme,a=n.withTheme,o=void 0!==a&&a,s=n.name,l=Fe(n,["defaultTheme","withTheme","name"]);var c=s,u=Xi(e,v({defaultTheme:r,Component:i,name:s||i.displayName,classNamePrefix:c},l)),g=t.forwardRef((function(e,n){e.classes;var a,l=e.innerRef,c=Fe(e,["classes","innerRef"]),g=u(v({},i.defaultProps,e)),d=c;return("string"===typeof s||o)&&(a=tn()||r,s&&(d=Yr({theme:a,name:s,props:c})),o&&!d.theme&&(d.theme=a)),t.createElement(i,v({ref:l||n,classes:g},d))}));return J()(g,i),g}};var zr=function(e,t){return Er(e,v({defaultTheme:Mr},t))};function Lr(e){if("string"!==typeof e)throw new Error(zi(7));return e.charAt(0).toUpperCase()+e.slice(1)}function Kr(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function _r(e,n){return t.useMemo((function(){return null==e&&null==n?null:function(t){Kr(e,t),Kr(n,t)}}),[e,n])}function Pr(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function i(){for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];var o=this;clearTimeout(t),t=setTimeout((function(){e.apply(o,r)}),n)}return i.clear=function(){clearTimeout(t)},i}function Dr(e,t){return parseInt(e[t],10)||0}var Or="undefined"!==typeof window?t.useLayoutEffect:t.useEffect,Ur={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"},jr=t.forwardRef((function(e,n){var i=e.onChange,r=e.rows,a=e.rowsMax,o=e.rowsMin,s=e.maxRows,l=e.minRows,c=void 0===l?1:l,u=e.style,g=e.value,d=Fe(e,["onChange","rows","rowsMax","rowsMin","maxRows","minRows","style","value"]),h=s||a,f=r||o||c,p=t.useRef(null!=g).current,I=t.useRef(null),C=_r(n,I),m=t.useRef(null),A=t.useRef(0),b=t.useState({}),y=b[0],G=b[1],w=t.useCallback((function(){var t=I.current,n=window.getComputedStyle(t),i=m.current;i.style.width=n.width,i.value=t.value||e.placeholder||"x","\n"===i.value.slice(-1)&&(i.value+=" ");var r=n["box-sizing"],a=Dr(n,"padding-bottom")+Dr(n,"padding-top"),o=Dr(n,"border-bottom-width")+Dr(n,"border-top-width"),s=i.scrollHeight-a;i.value="x";var l=i.scrollHeight-a,c=s;f&&(c=Math.max(Number(f)*l,c)),h&&(c=Math.min(Number(h)*l,c));var u=(c=Math.max(c,l))+("border-box"===r?a+o:0),g=Math.abs(c-s)<=1;G((function(e){return A.current<20&&(u>0&&Math.abs((e.outerHeightStyle||0)-u)>1||e.overflow!==g)?(A.current+=1,{overflow:g,outerHeightStyle:u}):e}))}),[h,f,e.placeholder]);t.useEffect((function(){var e=Pr((function(){A.current=0,w()}));return window.addEventListener("resize",e),function(){e.clear(),window.removeEventListener("resize",e)}}),[w]),Or((function(){w()})),t.useEffect((function(){A.current=0}),[g]);return t.createElement(t.Fragment,null,t.createElement("textarea",v({value:g,onChange:function(e){A.current=0,p||w(),i&&i(e)},ref:C,rows:f,style:v({height:y.outerHeightStyle,overflow:y.overflow?"hidden":null},u)},d)),t.createElement("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:m,tabIndex:-1,style:v({},Ur,u)}))})),Jr=jr;function Qr(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}function qr(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(Qr(e.value)&&""!==e.value||t&&Qr(e.defaultValue)&&""!==e.defaultValue)}var $r="undefined"===typeof window?t.useEffect:t.useLayoutEffect,ea=t.forwardRef((function(e,n){var i=e["aria-describedby"],r=e.autoComplete,a=e.autoFocus,o=e.classes,s=e.className,l=(e.color,e.defaultValue),c=e.disabled,u=e.endAdornment,g=(e.error,e.fullWidth),d=void 0!==g&&g,h=e.id,f=e.inputComponent,p=void 0===f?"input":f,I=e.inputProps,C=void 0===I?{}:I,m=e.inputRef,A=(e.margin,e.multiline),b=void 0!==A&&A,y=e.name,G=e.onBlur,w=e.onChange,B=e.onClick,x=e.onFocus,S=e.onKeyDown,Z=e.onKeyUp,k=e.placeholder,R=e.readOnly,W=e.renderSuffix,M=e.rows,V=e.rowsMax,F=e.rowsMin,N=e.maxRows,H=e.minRows,T=e.startAdornment,X=e.type,Y=void 0===X?"text":X,E=e.value,z=Fe(e,["aria-describedby","autoComplete","autoFocus","classes","className","color","defaultValue","disabled","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","rowsMax","rowsMin","maxRows","minRows","startAdornment","type","value"]),L=null!=C.value?C.value:E,K=t.useRef(null!=L).current,_=t.useRef(),P=t.useCallback((function(e){0}),[]),D=_r(C.ref,P),O=_r(m,D),U=_r(_,O),j=t.useState(!1),J=j[0],Q=j[1],q=t.useContext(Tr);var $=Hr({props:e,muiFormControl:q,states:["color","disabled","error","hiddenLabel","margin","required","filled"]});$.focused=q?q.focused:J,t.useEffect((function(){!q&&c&&J&&(Q(!1),G&&G())}),[q,c,J,G]);var ee=q&&q.onFilled,te=q&&q.onEmpty,ne=t.useCallback((function(e){qr(e)?ee&&ee():te&&te()}),[ee,te]);$r((function(){K&&ne({value:L})}),[L,ne,K]);t.useEffect((function(){ne(_.current)}),[]);var ie=p,re=v({},C,{ref:U});"string"!==typeof ie?re=v({inputRef:U,type:Y},re,{ref:null}):b?!M||N||H||V||F?(re=v({minRows:M||H,rowsMax:V,maxRows:N},re),ie=Jr):ie="textarea":re=v({type:Y},re);return t.useEffect((function(){q&&q.setAdornedStart(Boolean(T))}),[q,T]),t.createElement("div",v({className:Nr(o.root,o["color".concat(Lr($.color||"primary"))],s,$.disabled&&o.disabled,$.error&&o.error,d&&o.fullWidth,$.focused&&o.focused,q&&o.formControl,b&&o.multiline,T&&o.adornedStart,u&&o.adornedEnd,"dense"===$.margin&&o.marginDense),onClick:function(e){_.current&&e.currentTarget===e.target&&_.current.focus(),B&&B(e)},ref:n},z),T,t.createElement(Xr.Provider,{value:null},t.createElement(ie,v({"aria-invalid":$.error,"aria-describedby":i,autoComplete:r,autoFocus:a,defaultValue:l,disabled:$.disabled,id:h,onAnimationStart:function(e){ne("mui-auto-fill-cancel"===e.animationName?_.current:{value:"x"})},name:y,placeholder:k,readOnly:R,required:$.required,rows:M,value:L,onKeyDown:S,onKeyUp:Z},re,{className:Nr(o.input,C.className,$.disabled&&o.disabled,b&&o.inputMultiline,$.hiddenLabel&&o.inputHiddenLabel,T&&o.inputAdornedStart,u&&o.inputAdornedEnd,"search"===Y&&o.inputTypeSearch,"dense"===$.margin&&o.inputMarginDense),onBlur:function(e){G&&G(e),C.onBlur&&C.onBlur(e),q&&q.onBlur?q.onBlur(e):Q(!1)},onChange:function(e){if(!K){var t=e.target||_.current;if(null==t)throw new Error(zi(1));ne({value:t.value})}for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];C.onChange&&C.onChange.apply(C,[e].concat(i)),w&&w.apply(void 0,[e].concat(i))},onFocus:function(e){$.disabled?e.stopPropagation():(x&&x(e),C.onFocus&&C.onFocus(e),q&&q.onFocus?q.onFocus(e):Q(!0))}}))),u,W?W(v({},$,{startAdornment:T})):null)})),ta=zr((function(e){var t="light"===e.palette.type,n={color:"currentColor",opacity:t?.42:.5,transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})},i={opacity:"0 !important"},r={opacity:t?.42:.5};return{"@global":{"@keyframes mui-auto-fill":{},"@keyframes mui-auto-fill-cancel":{}},root:v({},e.typography.body1,{color:e.palette.text.primary,lineHeight:"1.1876em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center","&$disabled":{color:e.palette.text.disabled,cursor:"default"}}),formControl:{},focused:{},disabled:{},adornedStart:{},adornedEnd:{},error:{},marginDense:{},multiline:{padding:"".concat(6,"px 0 ").concat(7,"px"),"&$marginDense":{paddingTop:3}},colorSecondary:{},fullWidth:{width:"100%"},input:{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"".concat(6,"px 0 ").concat(7,"px"),border:0,boxSizing:"content-box",background:"none",height:"1.1876em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&:-ms-input-placeholder":n,"&::-ms-input-placeholder":n,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{"-webkit-appearance":"none"},"label[data-shrink=false] + $formControl &":{"&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&:-ms-input-placeholder":i,"&::-ms-input-placeholder":i,"&:focus::-webkit-input-placeholder":r,"&:focus::-moz-placeholder":r,"&:focus:-ms-input-placeholder":r,"&:focus::-ms-input-placeholder":r},"&$disabled":{opacity:1},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},inputMarginDense:{paddingTop:3},inputMultiline:{height:"auto",resize:"none",padding:0},inputTypeSearch:{"-moz-appearance":"textfield","-webkit-appearance":"textfield"},inputAdornedStart:{},inputAdornedEnd:{},inputHiddenLabel:{}}}),{name:"MuiInputBase"})(ea),na=t.forwardRef((function(e,n){var i=e.disableUnderline,r=e.classes,a=e.fullWidth,o=void 0!==a&&a,s=e.inputComponent,l=void 0===s?"input":s,c=e.multiline,u=void 0!==c&&c,g=e.type,d=void 0===g?"text":g,h=Fe(e,["disableUnderline","classes","fullWidth","inputComponent","multiline","type"]);return t.createElement(ta,v({classes:v({},r,{root:Nr(r.root,!i&&r.underline),underline:null}),fullWidth:o,inputComponent:l,multiline:u,ref:n,type:d},h))}));na.muiName="Input";var ia=zr((function(e){var t="light"===e.palette.type?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return{root:{position:"relative"},formControl:{"label + &":{marginTop:16}},focused:{},disabled:{},colorSecondary:{"&$underline:after":{borderBottomColor:e.palette.secondary.main}},underline:{"&:after":{borderBottom:"2px solid ".concat(e.palette.primary.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},"&$focused:after":{transform:"scaleX(1)"},"&$error:after":{borderBottomColor:e.palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:"1px solid ".concat(t),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},"&:hover:not($disabled):before":{borderBottom:"2px solid ".concat(e.palette.text.primary),"@media (hover: none)":{borderBottom:"1px solid ".concat(t)}},"&$disabled:before":{borderBottomStyle:"dotted"}},error:{},marginDense:{},multiline:{},fullWidth:{},input:{},inputMarginDense:{},inputMultiline:{},inputTypeSearch:{}}}),{name:"MuiInput"})(na),ra=t.forwardRef((function(e,n){var i=e.disableUnderline,r=e.classes,a=e.fullWidth,o=void 0!==a&&a,s=e.inputComponent,l=void 0===s?"input":s,c=e.multiline,u=void 0!==c&&c,g=e.type,d=void 0===g?"text":g,h=Fe(e,["disableUnderline","classes","fullWidth","inputComponent","multiline","type"]);return t.createElement(ta,v({classes:v({},r,{root:Nr(r.root,!i&&r.underline),underline:null}),fullWidth:o,inputComponent:l,multiline:u,ref:n,type:d},h))}));ra.muiName="Input";var aa=zr((function(e){var t="light"===e.palette.type,n=t?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",i=t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.09)";return{root:{position:"relative",backgroundColor:i,borderTopLeftRadius:e.shape.borderRadius,borderTopRightRadius:e.shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:t?"rgba(0, 0, 0, 0.13)":"rgba(255, 255, 255, 0.13)","@media (hover: none)":{backgroundColor:i}},"&$focused":{backgroundColor:t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.09)"},"&$disabled":{backgroundColor:t?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)"}},colorSecondary:{"&$underline:after":{borderBottomColor:e.palette.secondary.main}},underline:{"&:after":{borderBottom:"2px solid ".concat(e.palette.primary.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},"&$focused:after":{transform:"scaleX(1)"},"&$error:after":{borderBottomColor:e.palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:"1px solid ".concat(n),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},"&:hover:before":{borderBottom:"1px solid ".concat(e.palette.text.primary)},"&$disabled:before":{borderBottomStyle:"dotted"}},focused:{},disabled:{},adornedStart:{paddingLeft:12},adornedEnd:{paddingRight:12},error:{},marginDense:{},multiline:{padding:"27px 12px 10px","&$marginDense":{paddingTop:23,paddingBottom:6}},input:{padding:"27px 12px 10px","&:-webkit-autofill":{WebkitBoxShadow:"light"===e.palette.type?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===e.palette.type?null:"#fff",caretColor:"light"===e.palette.type?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},inputMarginDense:{paddingTop:23,paddingBottom:6},inputHiddenLabel:{paddingTop:18,paddingBottom:19,"&$inputMarginDense":{paddingTop:10,paddingBottom:11}},inputMultiline:{padding:0},inputAdornedStart:{paddingLeft:0},inputAdornedEnd:{paddingRight:0}}}),{name:"MuiFilledInput"})(ra);function oa(){return tn()||Mr}var sa=t.forwardRef((function(e,n){e.children;var i=e.classes,r=e.className,a=e.label,o=e.labelWidth,s=e.notched,l=e.style,c=Fe(e,["children","classes","className","label","labelWidth","notched","style"]),u="rtl"===oa().direction?"right":"left";if(void 0!==a)return t.createElement("fieldset",v({"aria-hidden":!0,className:Nr(i.root,r),ref:n,style:l},c),t.createElement("legend",{className:Nr(i.legendLabelled,s&&i.legendNotched)},a?t.createElement("span",null,a):t.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}})));var g=o>0?.75*o+8:.01;return t.createElement("fieldset",v({"aria-hidden":!0,style:v(ke({},"padding".concat(Lr(u)),8),l),className:Nr(i.root,r),ref:n},c),t.createElement("legend",{className:i.legend,style:{width:s?g:.01}},t.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}})))})),la=zr((function(e){return{root:{position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden"},legend:{textAlign:"left",padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})},legendLabelled:{display:"block",width:"auto",textAlign:"left",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),"& > span":{paddingLeft:5,paddingRight:5,display:"inline-block"}},legendNotched:{maxWidth:1e3,transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})}}}),{name:"PrivateNotchedOutline"})(sa),ca=t.forwardRef((function(e,n){var i=e.classes,r=e.fullWidth,a=void 0!==r&&r,o=e.inputComponent,s=void 0===o?"input":o,l=e.label,c=e.labelWidth,u=void 0===c?0:c,g=e.multiline,d=void 0!==g&&g,h=e.notched,f=e.type,p=void 0===f?"text":f,I=Fe(e,["classes","fullWidth","inputComponent","label","labelWidth","multiline","notched","type"]);return t.createElement(ta,v({renderSuffix:function(e){return t.createElement(la,{className:i.notchedOutline,label:l,labelWidth:u,notched:"undefined"!==typeof h?h:Boolean(e.startAdornment||e.filled||e.focused)})},classes:v({},i,{root:Nr(i.root,i.underline),notchedOutline:null}),fullWidth:a,inputComponent:s,multiline:d,ref:n,type:p},I))}));ca.muiName="Input";var ua=zr((function(e){var t="light"===e.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{root:{position:"relative",borderRadius:e.shape.borderRadius,"&:hover $notchedOutline":{borderColor:e.palette.text.primary},"@media (hover: none)":{"&:hover $notchedOutline":{borderColor:t}},"&$focused $notchedOutline":{borderColor:e.palette.primary.main,borderWidth:2},"&$error $notchedOutline":{borderColor:e.palette.error.main},"&$disabled $notchedOutline":{borderColor:e.palette.action.disabled}},colorSecondary:{"&$focused $notchedOutline":{borderColor:e.palette.secondary.main}},focused:{},disabled:{},adornedStart:{paddingLeft:14},adornedEnd:{paddingRight:14},error:{},marginDense:{},multiline:{padding:"18.5px 14px","&$marginDense":{paddingTop:10.5,paddingBottom:10.5}},notchedOutline:{borderColor:t},input:{padding:"18.5px 14px","&:-webkit-autofill":{WebkitBoxShadow:"light"===e.palette.type?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===e.palette.type?null:"#fff",caretColor:"light"===e.palette.type?null:"#fff",borderRadius:"inherit"}},inputMarginDense:{paddingTop:10.5,paddingBottom:10.5},inputMultiline:{padding:0},inputAdornedStart:{paddingLeft:0},inputAdornedEnd:{paddingRight:0}}}),{name:"MuiOutlinedInput"})(ca);function ga(){return t.useContext(Xr)}var da=t.forwardRef((function(e,n){var i=e.children,r=e.classes,a=e.className,o=(e.color,e.component),s=void 0===o?"label":o,l=(e.disabled,e.error,e.filled,e.focused,e.required,Fe(e,["children","classes","className","color","component","disabled","error","filled","focused","required"])),c=Hr({props:e,muiFormControl:ga(),states:["color","required","focused","disabled","error","filled"]});return t.createElement(s,v({className:Nr(r.root,r["color".concat(Lr(c.color||"primary"))],a,c.disabled&&r.disabled,c.error&&r.error,c.filled&&r.filled,c.focused&&r.focused,c.required&&r.required),ref:n},l),i,c.required&&t.createElement("span",{"aria-hidden":!0,className:Nr(r.asterisk,c.error&&r.error)},"\u2009","*"))})),ha=zr((function(e){return{root:v({color:e.palette.text.secondary},e.typography.body1,{lineHeight:1,padding:0,"&$focused":{color:e.palette.primary.main},"&$disabled":{color:e.palette.text.disabled},"&$error":{color:e.palette.error.main}}),colorSecondary:{"&$focused":{color:e.palette.secondary.main}},focused:{},disabled:{},error:{},filled:{},required:{},asterisk:{"&$error":{color:e.palette.error.main}}}}),{name:"MuiFormLabel"})(da),fa=t.forwardRef((function(e,n){var i=e.classes,r=e.className,a=e.disableAnimation,o=void 0!==a&&a,s=(e.margin,e.shrink),l=(e.variant,Fe(e,["classes","className","disableAnimation","margin","shrink","variant"])),c=ga(),u=s;"undefined"===typeof u&&c&&(u=c.filled||c.focused||c.adornedStart);var g=Hr({props:e,muiFormControl:c,states:["margin","variant"]});return t.createElement(ha,v({"data-shrink":u,className:Nr(i.root,r,c&&i.formControl,!o&&i.animated,u&&i.shrink,"dense"===g.margin&&i.marginDense,{filled:i.filled,outlined:i.outlined}[g.variant]),classes:{focused:i.focused,disabled:i.disabled,error:i.error,required:i.required,asterisk:i.asterisk},ref:n},l))})),pa=zr((function(e){return{root:{display:"block",transformOrigin:"top left"},focused:{},disabled:{},error:{},required:{},asterisk:{},formControl:{position:"absolute",left:0,top:0,transform:"translate(0, 24px) scale(1)"},marginDense:{transform:"translate(0, 21px) scale(1)"},shrink:{transform:"translate(0, 1.5px) scale(0.75)",transformOrigin:"top left"},animated:{transition:e.transitions.create(["color","transform"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})},filled:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 20px) scale(1)","&$marginDense":{transform:"translate(12px, 17px) scale(1)"},"&$shrink":{transform:"translate(12px, 10px) scale(0.75)","&$marginDense":{transform:"translate(12px, 7px) scale(0.75)"}}},outlined:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 20px) scale(1)","&$marginDense":{transform:"translate(14px, 12px) scale(1)"},"&$shrink":{transform:"translate(14px, -6px) scale(0.75)"}}}}),{name:"MuiInputLabel"})(fa);function Ia(e,n){return t.isValidElement(e)&&-1!==n.indexOf(e.type.muiName)}var Ca=t.forwardRef((function(e,n){var i=e.children,r=e.classes,a=e.className,o=e.color,s=void 0===o?"primary":o,l=e.component,c=void 0===l?"div":l,u=e.disabled,g=void 0!==u&&u,d=e.error,h=void 0!==d&&d,f=e.fullWidth,p=void 0!==f&&f,I=e.focused,C=e.hiddenLabel,m=void 0!==C&&C,A=e.margin,b=void 0===A?"none":A,y=e.required,G=void 0!==y&&y,w=e.size,B=e.variant,x=void 0===B?"standard":B,S=Fe(e,["children","classes","className","color","component","disabled","error","fullWidth","focused","hiddenLabel","margin","required","size","variant"]),Z=t.useState((function(){var e=!1;return i&&t.Children.forEach(i,(function(t){if(Ia(t,["Input","Select"])){var n=Ia(t,["Select"])?t.props.input:t;n&&n.props.startAdornment&&(e=!0)}})),e})),k=Z[0],R=Z[1],W=t.useState((function(){var e=!1;return i&&t.Children.forEach(i,(function(t){Ia(t,["Input","Select"])&&qr(t.props,!0)&&(e=!0)})),e})),M=W[0],V=W[1],F=t.useState(!1),N=F[0],H=F[1],T=void 0!==I?I:N;g&&T&&H(!1);var X=t.useCallback((function(){V(!0)}),[]),Y={adornedStart:k,setAdornedStart:R,color:s,disabled:g,error:h,filled:M,focused:T,fullWidth:p,hiddenLabel:m,margin:("small"===w?"dense":void 0)||b,onBlur:function(){H(!1)},onEmpty:t.useCallback((function(){V(!1)}),[]),onFilled:X,onFocus:function(){H(!0)},registerEffect:undefined,required:G,variant:x};return t.createElement(Xr.Provider,{value:Y},t.createElement(c,v({className:Nr(r.root,a,"none"!==b&&r["margin".concat(Lr(b))],p&&r.fullWidth),ref:n},S),i))})),ma=zr({root:{display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},marginNormal:{marginTop:16,marginBottom:8},marginDense:{marginTop:8,marginBottom:4},fullWidth:{width:"100%"}},{name:"MuiFormControl"})(Ca),va=t.forwardRef((function(e,n){var i=e.children,r=e.classes,a=e.className,o=e.component,s=void 0===o?"p":o,l=(e.disabled,e.error,e.filled,e.focused,e.margin,e.required,e.variant,Fe(e,["children","classes","className","component","disabled","error","filled","focused","margin","required","variant"])),c=Hr({props:e,muiFormControl:ga(),states:["variant","margin","disabled","error","filled","focused","required"]});return t.createElement(s,v({className:Nr(r.root,("filled"===c.variant||"outlined"===c.variant)&&r.contained,a,c.disabled&&r.disabled,c.error&&r.error,c.filled&&r.filled,c.focused&&r.focused,c.required&&r.required,"dense"===c.margin&&r.marginDense),ref:n},l)," "===i?t.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}}):i)})),Aa=zr((function(e){return{root:v({color:e.palette.text.secondary},e.typography.caption,{textAlign:"left",marginTop:3,margin:0,"&$disabled":{color:e.palette.text.disabled},"&$error":{color:e.palette.error.main}}),error:{},disabled:{},marginDense:{marginTop:4},contained:{marginLeft:14,marginRight:14},focused:{},filled:{},required:{}}}),{name:"MuiFormHelperText"})(va);n(3413);function ba(e){return e&&e.ownerDocument||document}function ya(e){return ba(e).defaultView||window}function Ga(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return null==t?e:function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];e.apply(this,i),t.apply(this,i)}}),(function(){}))}var wa="undefined"!==typeof window?t.useLayoutEffect:t.useEffect,Ba=t.forwardRef((function(e,n){var i=e.children,a=e.container,o=e.disablePortal,s=void 0!==o&&o,l=e.onRendered,c=t.useState(null),u=c[0],g=c[1],d=_r(t.isValidElement(i)?i.ref:null,n);return wa((function(){s||g(function(e){return e="function"===typeof e?e():e,r.findDOMNode(e)}(a)||document.body)}),[a,s]),wa((function(){if(u&&!s)return Kr(n,u),function(){Kr(n,null)}}),[n,u,s]),wa((function(){l&&(u||s)&&l()}),[l,u,s]),s?t.isValidElement(i)?t.cloneElement(i,{ref:d}):i:u?r.createPortal(i,u):u}));var xa=Ba,Sa="undefined"!==typeof window?t.useLayoutEffect:t.useEffect;function Za(e){var n=t.useRef(e);return Sa((function(){n.current=e})),t.useCallback((function(){return n.current.apply(void 0,arguments)}),[])}function ka(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ra(){var e=document.createElement("div");e.style.width="99px",e.style.height="99px",e.style.position="absolute",e.style.top="-9999px",e.style.overflow="scroll",document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t}function Wa(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function Ma(e){return parseInt(window.getComputedStyle(e)["padding-right"],10)||0}function Va(e,t,n){var i=arguments.length>4?arguments[4]:void 0,r=[t,n].concat(We(arguments.length>3&&void 0!==arguments[3]?arguments[3]:[])),a=["TEMPLATE","SCRIPT","STYLE"];[].forEach.call(e.children,(function(e){1===e.nodeType&&-1===r.indexOf(e)&&-1===a.indexOf(e.tagName)&&Wa(e,i)}))}function Fa(e,t){var n=-1;return e.some((function(e,i){return!!t(e)&&(n=i,!0)})),n}function Na(e,t){var n,i=[],r=[],a=e.container;if(!t.disableScrollLock){if(function(e){var t=ba(e);return t.body===e?ya(t).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(a)){var o=Ra();i.push({value:a.style.paddingRight,key:"padding-right",el:a}),a.style["padding-right"]="".concat(Ma(a)+o,"px"),n=ba(a).querySelectorAll(".mui-fixed"),[].forEach.call(n,(function(e){r.push(e.style.paddingRight),e.style.paddingRight="".concat(Ma(e)+o,"px")}))}var s=a.parentElement,l="HTML"===s.nodeName&&"scroll"===window.getComputedStyle(s)["overflow-y"]?s:a;i.push({value:l.style.overflow,key:"overflow",el:l}),l.style.overflow="hidden"}return function(){n&&[].forEach.call(n,(function(e,t){r[t]?e.style.paddingRight=r[t]:e.style.removeProperty("padding-right")})),i.forEach((function(e){var t=e.value,n=e.el,i=e.key;t?n.style.setProperty(i,t):n.style.removeProperty(i)}))}}var Ha=function(){function e(){ka(this,e),this.modals=[],this.containers=[]}return Xe(e,[{key:"add",value:function(e,t){var n=this.modals.indexOf(e);if(-1!==n)return n;n=this.modals.length,this.modals.push(e),e.modalRef&&Wa(e.modalRef,!1);var i=function(e){var t=[];return[].forEach.call(e.children,(function(e){e.getAttribute&&"true"===e.getAttribute("aria-hidden")&&t.push(e)})),t}(t);Va(t,e.mountNode,e.modalRef,i,!0);var r=Fa(this.containers,(function(e){return e.container===t}));return-1!==r?(this.containers[r].modals.push(e),n):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblingNodes:i}),n)}},{key:"mount",value:function(e,t){var n=Fa(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),i=this.containers[n];i.restore||(i.restore=Na(i,t))}},{key:"remove",value:function(e){var t=this.modals.indexOf(e);if(-1===t)return t;var n=Fa(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),i=this.containers[n];if(i.modals.splice(i.modals.indexOf(e),1),this.modals.splice(t,1),0===i.modals.length)i.restore&&i.restore(),e.modalRef&&Wa(e.modalRef,!0),Va(i.container,e.mountNode,e.modalRef,i.hiddenSiblingNodes,!1),this.containers.splice(n,1);else{var r=i.modals[i.modals.length-1];r.modalRef&&Wa(r.modalRef,!1)}return t}},{key:"isTopModal",value:function(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}]),e}();var Ta=function(e){var n=e.children,i=e.disableAutoFocus,a=void 0!==i&&i,o=e.disableEnforceFocus,s=void 0!==o&&o,l=e.disableRestoreFocus,c=void 0!==l&&l,u=e.getDoc,g=e.isEnabled,d=e.open,h=t.useRef(),f=t.useRef(null),p=t.useRef(null),I=t.useRef(),C=t.useRef(null),m=t.useCallback((function(e){C.current=r.findDOMNode(e)}),[]),v=_r(n.ref,m),A=t.useRef();return t.useEffect((function(){A.current=d}),[d]),!A.current&&d&&"undefined"!==typeof window&&(I.current=u().activeElement),t.useEffect((function(){if(d){var e=ba(C.current);a||!C.current||C.current.contains(e.activeElement)||(C.current.hasAttribute("tabIndex")||C.current.setAttribute("tabIndex",-1),C.current.focus());var t=function(){null!==C.current&&(e.hasFocus()&&!s&&g()&&!h.current?C.current&&!C.current.contains(e.activeElement)&&C.current.focus():h.current=!1)},n=function(t){!s&&g()&&9===t.keyCode&&e.activeElement===C.current&&(h.current=!0,t.shiftKey?p.current.focus():f.current.focus())};e.addEventListener("focus",t,!0),e.addEventListener("keydown",n,!0);var i=setInterval((function(){t()}),50);return function(){clearInterval(i),e.removeEventListener("focus",t,!0),e.removeEventListener("keydown",n,!0),c||(I.current&&I.current.focus&&I.current.focus(),I.current=null)}}}),[a,s,c,g,d]),t.createElement(t.Fragment,null,t.createElement("div",{tabIndex:0,ref:f,"data-test":"sentinelStart"}),t.cloneElement(n,{ref:v}),t.createElement("div",{tabIndex:0,ref:p,"data-test":"sentinelEnd"}))},Xa={root:{zIndex:-1,position:"fixed",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},invisible:{backgroundColor:"transparent"}},Ya=t.forwardRef((function(e,n){var i=e.invisible,r=void 0!==i&&i,a=e.open,o=Fe(e,["invisible","open"]);return a?t.createElement("div",v({"aria-hidden":!0,ref:n},o,{style:v({},Xa.root,r?Xa.invisible:{},o.style)})):null})),Ea=Ya;var za=new Ha,La=t.forwardRef((function(e,n){var i=tn(),a=Yr({name:"MuiModal",props:v({},e),theme:i}),o=a.BackdropComponent,s=void 0===o?Ea:o,l=a.BackdropProps,c=a.children,u=a.closeAfterTransition,g=void 0!==u&&u,d=a.container,h=a.disableAutoFocus,f=void 0!==h&&h,p=a.disableBackdropClick,I=void 0!==p&&p,C=a.disableEnforceFocus,m=void 0!==C&&C,A=a.disableEscapeKeyDown,b=void 0!==A&&A,y=a.disablePortal,G=void 0!==y&&y,w=a.disableRestoreFocus,B=void 0!==w&&w,x=a.disableScrollLock,S=void 0!==x&&x,Z=a.hideBackdrop,k=void 0!==Z&&Z,R=a.keepMounted,W=void 0!==R&&R,M=a.manager,V=void 0===M?za:M,F=a.onBackdropClick,N=a.onClose,H=a.onEscapeKeyDown,T=a.onRendered,X=a.open,Y=Fe(a,["BackdropComponent","BackdropProps","children","closeAfterTransition","container","disableAutoFocus","disableBackdropClick","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onEscapeKeyDown","onRendered","open"]),E=t.useState(!0),z=E[0],L=E[1],K=t.useRef({}),_=t.useRef(null),P=t.useRef(null),D=_r(P,n),O=function(e){return!!e.children&&e.children.props.hasOwnProperty("in")}(a),U=function(){return ba(_.current)},j=function(){return K.current.modalRef=P.current,K.current.mountNode=_.current,K.current},J=function(){V.mount(j(),{disableScrollLock:S}),P.current.scrollTop=0},Q=Za((function(){var e=function(e){return e="function"===typeof e?e():e,r.findDOMNode(e)}(d)||U().body;V.add(j(),e),P.current&&J()})),q=t.useCallback((function(){return V.isTopModal(j())}),[V]),$=Za((function(e){_.current=e,e&&(T&&T(),X&&q()?J():Wa(P.current,!0))})),ee=t.useCallback((function(){V.remove(j())}),[V]);if(t.useEffect((function(){return function(){ee()}}),[ee]),t.useEffect((function(){X?Q():O&&g||ee()}),[X,ee,O,g,Q]),!W&&!X&&(!O||z))return null;var te=function(e){return{root:{position:"fixed",zIndex:e.zIndex.modal,right:0,bottom:0,top:0,left:0},hidden:{visibility:"hidden"}}}(i||{zIndex:Rr}),ne={};return void 0===c.props.tabIndex&&(ne.tabIndex=c.props.tabIndex||"-1"),O&&(ne.onEnter=Ga((function(){L(!1)}),c.props.onEnter),ne.onExited=Ga((function(){L(!0),g&&ee()}),c.props.onExited)),t.createElement(xa,{ref:$,container:d,disablePortal:G},t.createElement("div",v({ref:D,onKeyDown:function(e){"Escape"===e.key&&q()&&(H&&H(e),b||(e.stopPropagation(),N&&N(e,"escapeKeyDown")))},role:"presentation"},Y,{style:v({},te.root,!X&&z?te.hidden:{},Y.style)}),k?null:t.createElement(s,v({open:X,onClick:function(e){e.target===e.currentTarget&&(F&&F(e),!I&&N&&N(e,"backdropClick"))}},l)),t.createElement(Ta,{disableEnforceFocus:m,disableAutoFocus:f,disableRestoreFocus:B,getDoc:U,isEnabled:q,open:X},t.cloneElement(c,ne))))})),Ka=La,_a=!1,Pa=t.createContext(null),Da=function(e){return e.scrollTop},Oa="unmounted",Ua="exited",ja="entering",Ja="entered",Qa="exiting",qa=function(e){function n(t,n){var i;i=e.call(this,t,n)||this;var r,a=n&&!n.isMounting?t.enter:t.appear;return i.appearStatus=null,t.in?a?(r=Ua,i.appearStatus=ja):r=Ja:r=t.unmountOnExit||t.mountOnEnter?Oa:Ua,i.state={status:r},i.nextCallback=null,i}I(n,e),n.getDerivedStateFromProps=function(e,t){return e.in&&t.status===Oa?{status:Ua}:null};var i=n.prototype;return i.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},i.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==ja&&n!==Ja&&(t=ja):n!==ja&&n!==Ja||(t=Qa)}this.updateStatus(!1,t)},i.componentWillUnmount=function(){this.cancelNextCallback()},i.getTimeouts=function(){var e,t,n,i=this.props.timeout;return e=t=n=i,null!=i&&"number"!==typeof i&&(e=i.exit,t=i.enter,n=void 0!==i.appear?i.appear:t),{exit:e,enter:t,appear:n}},i.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===ja){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:r.findDOMNode(this);n&&Da(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Ua&&this.setState({status:Oa})},i.performEnter=function(e){var t=this,n=this.props.enter,i=this.context?this.context.isMounting:e,a=this.props.nodeRef?[i]:[r.findDOMNode(this),i],o=a[0],s=a[1],l=this.getTimeouts(),c=i?l.appear:l.enter;!e&&!n||_a?this.safeSetState({status:Ja},(function(){t.props.onEntered(o)})):(this.props.onEnter(o,s),this.safeSetState({status:ja},(function(){t.props.onEntering(o,s),t.onTransitionEnd(c,(function(){t.safeSetState({status:Ja},(function(){t.props.onEntered(o,s)}))}))})))},i.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),i=this.props.nodeRef?void 0:r.findDOMNode(this);t&&!_a?(this.props.onExit(i),this.safeSetState({status:Qa},(function(){e.props.onExiting(i),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:Ua},(function(){e.props.onExited(i)}))}))}))):this.safeSetState({status:Ua},(function(){e.props.onExited(i)}))},i.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},i.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},i.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(i){n&&(n=!1,t.nextCallback=null,e(i))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},i.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:r.findDOMNode(this),i=null==e&&!this.props.addEndListener;if(n&&!i){if(this.props.addEndListener){var a=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=a[0],s=a[1];this.props.addEndListener(o,s)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},i.render=function(){var e=this.state.status;if(e===Oa)return null;var n=this.props,i=n.children,r=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,U(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return t.createElement(Pa.Provider,{value:null},"function"===typeof i?i(e,r):t.cloneElement(t.Children.only(i),r))},n}(t.Component);function $a(){}qa.contextType=Pa,qa.propTypes={},qa.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:$a,onEntering:$a,onEntered:$a,onExit:$a,onExiting:$a,onExited:$a},qa.UNMOUNTED=Oa,qa.EXITED=Ua,qa.ENTERING=ja,qa.ENTERED=Ja,qa.EXITING=Qa;var eo=qa,to=function(e){return e.scrollTop};function no(e,t){var n=e.timeout,i=e.style,r=void 0===i?{}:i;return{duration:r.transitionDuration||"number"===typeof n?n:n[t.mode]||0,delay:r.transitionDelay}}function io(e){return"scale(".concat(e,", ").concat(Math.pow(e,2),")")}var ro={entering:{opacity:1,transform:io(1)},entered:{opacity:1,transform:"none"}},ao=t.forwardRef((function(e,n){var i=e.children,r=e.disableStrictModeCompat,a=void 0!==r&&r,o=e.in,s=e.onEnter,l=e.onEntered,u=e.onEntering,g=e.onExit,d=e.onExited,h=e.onExiting,f=e.style,p=e.timeout,I=void 0===p?"auto":p,C=e.TransitionComponent,m=void 0===C?eo:C,A=Fe(e,["children","disableStrictModeCompat","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"]),b=t.useRef(),y=t.useRef(),G=oa(),w=G.unstable_strictMode&&!a,B=t.useRef(null),x=_r(i.ref,n),S=_r(w?B:void 0,x),Z=function(e){return function(t,n){if(e){var i=c(w?[B.current,t]:[t,n],2),r=i[0],a=i[1];void 0===a?e(r):e(r,a)}}},k=Z(u),R=Z((function(e,t){to(e);var n,i=no({style:f,timeout:I},{mode:"enter"}),r=i.duration,a=i.delay;"auto"===I?(n=G.transitions.getAutoHeightDuration(e.clientHeight),y.current=n):n=r,e.style.transition=[G.transitions.create("opacity",{duration:n,delay:a}),G.transitions.create("transform",{duration:.666*n,delay:a})].join(","),s&&s(e,t)})),W=Z(l),M=Z(h),V=Z((function(e){var t,n=no({style:f,timeout:I},{mode:"exit"}),i=n.duration,r=n.delay;"auto"===I?(t=G.transitions.getAutoHeightDuration(e.clientHeight),y.current=t):t=i,e.style.transition=[G.transitions.create("opacity",{duration:t,delay:r}),G.transitions.create("transform",{duration:.666*t,delay:r||.333*t})].join(","),e.style.opacity="0",e.style.transform=io(.75),g&&g(e)})),F=Z(d);return t.useEffect((function(){return function(){clearTimeout(b.current)}}),[]),t.createElement(m,v({appear:!0,in:o,nodeRef:w?B:void 0,onEnter:R,onEntered:W,onEntering:k,onExit:V,onExited:F,onExiting:M,addEndListener:function(e,t){var n=w?e:t;"auto"===I&&(b.current=setTimeout(n,y.current||0))},timeout:"auto"===I?null:I},A),(function(e,n){return t.cloneElement(i,v({style:v({opacity:0,transform:io(.75),visibility:"exited"!==e||o?void 0:"hidden"},ro[e],f,i.props.style),ref:S},n))}))}));ao.muiSupportAuto=!0;var oo=ao,so=t.forwardRef((function(e,n){var i=e.classes,r=e.className,a=e.component,o=void 0===a?"div":a,s=e.square,l=void 0!==s&&s,c=e.elevation,u=void 0===c?1:c,g=e.variant,d=void 0===g?"elevation":g,h=Fe(e,["classes","className","component","square","elevation","variant"]);return t.createElement(o,v({className:Nr(i.root,r,"outlined"===d?i.outlined:i["elevation".concat(u)],!l&&i.rounded),ref:n},h))})),lo=zr((function(e){var t={};return e.shadows.forEach((function(e,n){t["elevation".concat(n)]={boxShadow:e}})),v({root:{backgroundColor:e.palette.background.paper,color:e.palette.text.primary,transition:e.transitions.create("box-shadow")},rounded:{borderRadius:e.shape.borderRadius},outlined:{border:"1px solid ".concat(e.palette.divider)}},t)}),{name:"MuiPaper"})(so);function co(e,t){var n=0;return"number"===typeof t?n=t:"center"===t?n=e.height/2:"bottom"===t&&(n=e.height),n}function uo(e,t){var n=0;return"number"===typeof t?n=t:"center"===t?n=e.width/2:"right"===t&&(n=e.width),n}function go(e){return[e.horizontal,e.vertical].map((function(e){return"number"===typeof e?"".concat(e,"px"):e})).join(" ")}function ho(e){return"function"===typeof e?e():e}var fo=t.forwardRef((function(e,n){var i=e.action,a=e.anchorEl,o=e.anchorOrigin,s=void 0===o?{vertical:"top",horizontal:"left"}:o,l=e.anchorPosition,c=e.anchorReference,u=void 0===c?"anchorEl":c,g=e.children,d=e.classes,h=e.className,f=e.container,p=e.elevation,I=void 0===p?8:p,C=e.getContentAnchorEl,m=e.marginThreshold,A=void 0===m?16:m,b=e.onEnter,y=e.onEntered,G=e.onEntering,w=e.onExit,B=e.onExited,x=e.onExiting,S=e.open,Z=e.PaperProps,k=void 0===Z?{}:Z,R=e.transformOrigin,W=void 0===R?{vertical:"top",horizontal:"left"}:R,M=e.TransitionComponent,V=void 0===M?oo:M,F=e.transitionDuration,N=void 0===F?"auto":F,H=e.TransitionProps,T=void 0===H?{}:H,X=Fe(e,["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","classes","className","container","elevation","getContentAnchorEl","marginThreshold","onEnter","onEntered","onEntering","onExit","onExited","onExiting","open","PaperProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"]),Y=t.useRef(),E=t.useCallback((function(e){if("anchorPosition"===u)return l;var t=ho(a),n=(t&&1===t.nodeType?t:ba(Y.current).body).getBoundingClientRect(),i=0===e?s.vertical:"center";return{top:n.top+co(n,i),left:n.left+uo(n,s.horizontal)}}),[a,s.horizontal,s.vertical,l,u]),z=t.useCallback((function(e){var t=0;if(C&&"anchorEl"===u){var n=C(e);if(n&&e.contains(n)){var i=function(e,t){for(var n=t,i=0;n&&n!==e;)i+=(n=n.parentElement).scrollTop;return i}(e,n);t=n.offsetTop+n.clientHeight/2-i||0}0}return t}),[s.vertical,u,C]),L=t.useCallback((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{vertical:co(e,W.vertical)+t,horizontal:uo(e,W.horizontal)}}),[W.horizontal,W.vertical]),K=t.useCallback((function(e){var t=z(e),n={width:e.offsetWidth,height:e.offsetHeight},i=L(n,t);if("none"===u)return{top:null,left:null,transformOrigin:go(i)};var r=E(t),o=r.top-i.vertical,s=r.left-i.horizontal,l=o+n.height,c=s+n.width,g=ya(ho(a)),d=g.innerHeight-A,h=g.innerWidth-A;if(o<A){var f=o-A;o-=f,i.vertical+=f}else if(l>d){var p=l-d;o-=p,i.vertical+=p}if(s<A){var I=s-A;s-=I,i.horizontal+=I}else if(c>h){var C=c-h;s-=C,i.horizontal+=C}return{top:"".concat(Math.round(o),"px"),left:"".concat(Math.round(s),"px"),transformOrigin:go(i)}}),[a,u,E,z,L,A]),_=t.useCallback((function(){var e=Y.current;if(e){var t=K(e);null!==t.top&&(e.style.top=t.top),null!==t.left&&(e.style.left=t.left),e.style.transformOrigin=t.transformOrigin}}),[K]),P=t.useCallback((function(e){Y.current=r.findDOMNode(e)}),[]);t.useEffect((function(){S&&_()})),t.useImperativeHandle(i,(function(){return S?{updatePosition:function(){_()}}:null}),[S,_]),t.useEffect((function(){if(S){var e=Pr((function(){_()}));return window.addEventListener("resize",e),function(){e.clear(),window.removeEventListener("resize",e)}}}),[S,_]);var D=N;"auto"!==N||V.muiSupportAuto||(D=void 0);var O=f||(a?ba(ho(a)).body:void 0);return t.createElement(Ka,v({container:O,open:S,ref:n,BackdropProps:{invisible:!0},className:Nr(d.root,h)},X),t.createElement(V,v({appear:!0,in:S,onEnter:b,onEntered:y,onExit:w,onExited:B,onExiting:x,timeout:D},T,{onEntering:Ga((function(e,t){G&&G(e,t),_()}),T.onEntering)}),t.createElement(lo,v({elevation:I,ref:P},k,{className:Nr(d.paper,k.className)}),g)))})),po=zr({root:{},paper:{position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}},{name:"MuiPopover"})(fo);var Io=t.createContext({}),Co=t.forwardRef((function(e,n){var i=e.children,r=e.classes,a=e.className,o=e.component,s=void 0===o?"ul":o,l=e.dense,c=void 0!==l&&l,u=e.disablePadding,g=void 0!==u&&u,d=e.subheader,h=Fe(e,["children","classes","className","component","dense","disablePadding","subheader"]),f=t.useMemo((function(){return{dense:c}}),[c]);return t.createElement(Io.Provider,{value:f},t.createElement(s,v({className:Nr(r.root,a,c&&r.dense,!g&&r.padding,d&&r.subheader),ref:n},h),d,i))})),mo=zr({root:{listStyle:"none",margin:0,padding:0,position:"relative"},padding:{paddingTop:8,paddingBottom:8},dense:{},subheader:{paddingTop:0}},{name:"MuiList"})(Co);function vo(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function Ao(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function bo(e,t){if(void 0===t)return!0;var n=e.innerText;return void 0===n&&(n=e.textContent),0!==(n=n.trim().toLowerCase()).length&&(t.repeating?n[0]===t.keys[0]:0===n.indexOf(t.keys.join("")))}function yo(e,t,n,i,r,a){for(var o=!1,s=r(e,t,!!t&&n);s;){if(s===e.firstChild){if(o)return;o=!0}var l=!i&&(s.disabled||"true"===s.getAttribute("aria-disabled"));if(s.hasAttribute("tabindex")&&bo(s,a)&&!l)return void s.focus();s=r(e,s,n)}}var Go="undefined"===typeof window?t.useEffect:t.useLayoutEffect,wo=t.forwardRef((function(e,n){var i=e.actions,a=e.autoFocus,o=void 0!==a&&a,s=e.autoFocusItem,l=void 0!==s&&s,c=e.children,u=e.className,g=e.disabledItemsFocusable,d=void 0!==g&&g,h=e.disableListWrap,f=void 0!==h&&h,p=e.onKeyDown,I=e.variant,C=void 0===I?"selectedMenu":I,m=Fe(e,["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"]),A=t.useRef(null),b=t.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Go((function(){o&&A.current.focus()}),[o]),t.useImperativeHandle(i,(function(){return{adjustStyleForScrollbar:function(e,t){var n=!A.current.style.width;if(e.clientHeight<A.current.clientHeight&&n){var i="".concat(Ra(),"px");A.current.style["rtl"===t.direction?"paddingLeft":"paddingRight"]=i,A.current.style.width="calc(100% + ".concat(i,")")}return A.current}}}),[]);var y=_r(t.useCallback((function(e){A.current=r.findDOMNode(e)}),[]),n),G=-1;t.Children.forEach(c,(function(e,n){t.isValidElement(e)&&(e.props.disabled||("selectedMenu"===C&&e.props.selected||-1===G)&&(G=n))}));var w=t.Children.map(c,(function(e,n){if(n===G){var i={};return l&&(i.autoFocus=!0),void 0===e.props.tabIndex&&"selectedMenu"===C&&(i.tabIndex=0),t.cloneElement(e,i)}return e}));return t.createElement(mo,v({role:"menu",ref:y,className:u,onKeyDown:function(e){var t=A.current,n=e.key,i=ba(t).activeElement;if("ArrowDown"===n)e.preventDefault(),yo(t,i,f,d,vo);else if("ArrowUp"===n)e.preventDefault(),yo(t,i,f,d,Ao);else if("Home"===n)e.preventDefault(),yo(t,null,f,d,vo);else if("End"===n)e.preventDefault(),yo(t,null,f,d,Ao);else if(1===n.length){var r=b.current,a=n.toLowerCase(),o=performance.now();r.keys.length>0&&(o-r.lastTime>500?(r.keys=[],r.repeating=!0,r.previousKeyMatched=!0):r.repeating&&a!==r.keys[0]&&(r.repeating=!1)),r.lastTime=o,r.keys.push(a);var s=i&&!r.repeating&&bo(i,r);r.previousKeyMatched&&(s||yo(t,i,!1,d,vo,r))?e.preventDefault():r.previousKeyMatched=!1}p&&p(e)},tabIndex:o?0:-1},m),w)})),Bo=wo,xo={vertical:"top",horizontal:"right"},So={vertical:"top",horizontal:"left"},Zo=t.forwardRef((function(e,n){var i=e.autoFocus,a=void 0===i||i,o=e.children,s=e.classes,l=e.disableAutoFocusItem,c=void 0!==l&&l,u=e.MenuListProps,g=void 0===u?{}:u,d=e.onClose,h=e.onEntering,f=e.open,p=e.PaperProps,I=void 0===p?{}:p,C=e.PopoverClasses,m=e.transitionDuration,A=void 0===m?"auto":m,b=e.TransitionProps,y=(b=void 0===b?{}:b).onEntering,G=Fe(b,["onEntering"]),w=e.variant,B=void 0===w?"selectedMenu":w,x=Fe(e,["autoFocus","children","classes","disableAutoFocusItem","MenuListProps","onClose","onEntering","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant"]),S=oa(),Z=a&&!c&&f,k=t.useRef(null),R=t.useRef(null),W=-1;t.Children.map(o,(function(e,n){t.isValidElement(e)&&(e.props.disabled||("menu"!==B&&e.props.selected||-1===W)&&(W=n))}));var M=t.Children.map(o,(function(e,n){return n===W?t.cloneElement(e,{ref:function(t){R.current=r.findDOMNode(t),Kr(e.ref,t)}}):e}));return t.createElement(po,v({getContentAnchorEl:function(){return R.current},classes:C,onClose:d,TransitionProps:v({onEntering:function(e,t){k.current&&k.current.adjustStyleForScrollbar(e,S),h&&h(e,t),y&&y(e,t)}},G),anchorOrigin:"rtl"===S.direction?xo:So,transformOrigin:"rtl"===S.direction?xo:So,PaperProps:v({},I,{classes:v({},I.classes,{root:s.paper})}),open:f,ref:n,transitionDuration:A},x),t.createElement(Bo,v({onKeyDown:function(e){"Tab"===e.key&&(e.preventDefault(),d&&d(e,"tabKeyDown"))},actions:k,autoFocus:a&&(-1===W||c),autoFocusItem:Z,variant:B},g,{className:Nr(s.list,g.className)}),M))})),ko=zr({paper:{maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"},list:{outline:0}},{name:"MuiMenu"})(Zo);function Ro(e){var n=e.controlled,i=e.default,r=(e.name,e.state,t.useRef(void 0!==n).current),a=t.useState(i),o=a[0],s=a[1];return[r?n:o,t.useCallback((function(e){r||s(e)}),[])]}function Wo(e,t){return"object"===Se(t)&&null!==t?e===t:String(e)===String(t)}var Mo=t.forwardRef((function(e,n){var i=e["aria-label"],r=e.autoFocus,a=e.autoWidth,o=e.children,s=e.classes,l=e.className,u=e.defaultValue,g=e.disabled,d=e.displayEmpty,h=e.IconComponent,f=e.inputRef,p=e.labelId,I=e.MenuProps,C=void 0===I?{}:I,m=e.multiple,A=e.name,b=e.onBlur,y=e.onChange,G=e.onClose,w=e.onFocus,B=e.onOpen,x=e.open,S=e.readOnly,Z=e.renderValue,k=e.SelectDisplayProps,R=void 0===k?{}:k,W=e.tabIndex,M=(e.type,e.value),V=e.variant,F=void 0===V?"standard":V,N=Fe(e,["aria-label","autoFocus","autoWidth","children","classes","className","defaultValue","disabled","displayEmpty","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"]),H=c(Ro({controlled:M,default:u,name:"Select"}),2),T=H[0],X=H[1],Y=t.useRef(null),E=t.useState(null),z=E[0],L=E[1],K=t.useRef(null!=x).current,_=t.useState(),P=_[0],D=_[1],O=t.useState(!1),U=O[0],j=O[1],J=_r(n,f);t.useImperativeHandle(J,(function(){return{focus:function(){z.focus()},node:Y.current,value:T}}),[z,T]),t.useEffect((function(){r&&z&&z.focus()}),[r,z]),t.useEffect((function(){if(z){var e=ba(z).getElementById(p);if(e){var t=function(){getSelection().isCollapsed&&z.focus()};return e.addEventListener("click",t),function(){e.removeEventListener("click",t)}}}}),[p,z]);var Q,q,$=function(e,t){e?B&&B(t):G&&G(t),K||(D(a?null:z.clientWidth),j(e))},ee=t.Children.toArray(o),te=function(e){return function(t){var n;if(m||$(!1,t),m){n=Array.isArray(T)?T.slice():[];var i=T.indexOf(e.props.value);-1===i?n.push(e.props.value):n.splice(i,1)}else n=e.props.value;e.props.onClick&&e.props.onClick(t),T!==n&&(X(n),y&&(t.persist(),Object.defineProperty(t,"target",{writable:!0,value:{value:n,name:A}}),y(t,e)))}},ne=null!==z&&(K?x:U);delete N["aria-invalid"];var ie=[],re=!1;(qr({value:T})||d)&&(Z?Q=Z(T):re=!0);var ae=ee.map((function(e){if(!t.isValidElement(e))return null;var n;if(m){if(!Array.isArray(T))throw new Error(zi(2));n=T.some((function(t){return Wo(t,e.props.value)})),n&&re&&ie.push(e.props.children)}else(n=Wo(T,e.props.value))&&re&&(q=e.props.children);return n&&!0,t.cloneElement(e,{"aria-selected":n?"true":void 0,onClick:te(e),onKeyUp:function(t){" "===t.key&&t.preventDefault(),e.props.onKeyUp&&e.props.onKeyUp(t)},role:"option",selected:n,value:void 0,"data-value":e.props.value})}));re&&(Q=m?ie.join(", "):q);var oe,se=P;!a&&K&&z&&(se=z.clientWidth),oe="undefined"!==typeof W?W:g?null:0;var le=R.id||(A?"mui-component-select-".concat(A):void 0);return t.createElement(t.Fragment,null,t.createElement("div",v({className:Nr(s.root,s.select,s.selectMenu,s[F],l,g&&s.disabled),ref:L,tabIndex:oe,role:"button","aria-disabled":g?"true":void 0,"aria-expanded":ne?"true":void 0,"aria-haspopup":"listbox","aria-label":i,"aria-labelledby":[p,le].filter(Boolean).join(" ")||void 0,onKeyDown:function(e){if(!S){-1!==[" ","ArrowUp","ArrowDown","Enter"].indexOf(e.key)&&(e.preventDefault(),$(!0,e))}},onMouseDown:g||S?null:function(e){0===e.button&&(e.preventDefault(),z.focus(),$(!0,e))},onBlur:function(e){!ne&&b&&(e.persist(),Object.defineProperty(e,"target",{writable:!0,value:{value:T,name:A}}),b(e))},onFocus:w},R,{id:le}),function(e){return null==e||"string"===typeof e&&!e.trim()}(Q)?t.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}}):Q),t.createElement("input",v({value:Array.isArray(T)?T.join(","):T,name:A,ref:Y,"aria-hidden":!0,onChange:function(e){var t=ee.map((function(e){return e.props.value})).indexOf(e.target.value);if(-1!==t){var n=ee[t];X(n.props.value),y&&y(e,n)}},tabIndex:-1,className:s.nativeInput,autoFocus:r},N)),t.createElement(h,{className:Nr(s.icon,s["icon".concat(Lr(F))],ne&&s.iconOpen,g&&s.disabled)}),t.createElement(ko,v({id:"menu-".concat(A||""),anchorEl:z,open:ne,onClose:function(e){$(!1,e)}},C,{MenuListProps:v({"aria-labelledby":p,role:"listbox",disableListWrap:!0},C.MenuListProps),PaperProps:v({},C.PaperProps,{style:v({minWidth:se},null!=C.PaperProps?C.PaperProps.style:null)})}),ae))})),Vo=Mo,Fo=t.forwardRef((function(e,n){var i=e.children,r=e.classes,a=e.className,o=e.color,s=void 0===o?"inherit":o,l=e.component,c=void 0===l?"svg":l,u=e.fontSize,g=void 0===u?"medium":u,d=e.htmlColor,h=e.titleAccess,f=e.viewBox,p=void 0===f?"0 0 24 24":f,I=Fe(e,["children","classes","className","color","component","fontSize","htmlColor","titleAccess","viewBox"]);return t.createElement(c,v({className:Nr(r.root,a,"inherit"!==s&&r["color".concat(Lr(s))],"default"!==g&&"medium"!==g&&r["fontSize".concat(Lr(g))]),focusable:"false",viewBox:p,color:d,"aria-hidden":!h||void 0,role:h?"img":void 0,ref:n},I),i,h?t.createElement("title",null,h):null)}));Fo.muiName="SvgIcon";var No=zr((function(e){return{root:{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,fontSize:e.typography.pxToRem(24),transition:e.transitions.create("fill",{duration:e.transitions.duration.shorter})},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorAction:{color:e.palette.action.active},colorError:{color:e.palette.error.main},colorDisabled:{color:e.palette.action.disabled},fontSizeInherit:{fontSize:"inherit"},fontSizeSmall:{fontSize:e.typography.pxToRem(20)},fontSizeLarge:{fontSize:e.typography.pxToRem(35)}}}),{name:"MuiSvgIcon"})(Fo);function Ho(e,n){var i=function(n,i){return t.createElement(No,v({ref:i},n),e)};return i.muiName=No.muiName,t.memo(t.forwardRef(i))}var To=Ho(t.createElement("path",{d:"M7 10l5 5 5-5z"})),Xo=t.forwardRef((function(e,n){var i=e.classes,r=e.className,a=e.disabled,o=e.IconComponent,s=e.inputRef,l=e.variant,c=void 0===l?"standard":l,u=Fe(e,["classes","className","disabled","IconComponent","inputRef","variant"]);return t.createElement(t.Fragment,null,t.createElement("select",v({className:Nr(i.root,i.select,i[c],r,a&&i.disabled),disabled:a,ref:s||n},u)),e.multiple?null:t.createElement(o,{className:Nr(i.icon,i["icon".concat(Lr(c))],a&&i.disabled)}))})),Yo=Xo,Eo=function(e){return{root:{},select:{"-moz-appearance":"none","-webkit-appearance":"none",userSelect:"none",borderRadius:0,minWidth:16,cursor:"pointer","&:focus":{backgroundColor:"light"===e.palette.type?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)",borderRadius:0},"&::-ms-expand":{display:"none"},"&$disabled":{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:e.palette.background.paper},"&&":{paddingRight:24}},filled:{"&&":{paddingRight:32}},outlined:{borderRadius:e.shape.borderRadius,"&&":{paddingRight:32}},selectMenu:{height:"auto",minHeight:"1.1876em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},disabled:{},icon:{position:"absolute",right:0,top:"calc(50% - 12px)",pointerEvents:"none",color:e.palette.action.active,"&$disabled":{color:e.palette.action.disabled}},iconOpen:{transform:"rotate(180deg)"},iconFilled:{right:7},iconOutlined:{right:7},nativeInput:{bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%"}}},zo=t.createElement(ia,null),Lo=t.forwardRef((function(e,n){var i=e.children,r=e.classes,a=e.IconComponent,o=void 0===a?To:a,s=e.input,l=void 0===s?zo:s,c=e.inputProps,u=(e.variant,Fe(e,["children","classes","IconComponent","input","inputProps","variant"])),g=Hr({props:e,muiFormControl:ga(),states:["variant"]});return t.cloneElement(l,v({inputComponent:Yo,inputProps:v({children:i,classes:r,IconComponent:o,variant:g.variant,type:void 0},c,l?l.props.inputProps:{}),ref:n},u))}));Lo.muiName="Select";zr(Eo,{name:"MuiNativeSelect"})(Lo);var Ko=Eo,_o=t.createElement(ia,null),Po=t.createElement(aa,null),Do=t.forwardRef((function e(n,i){var r=n.autoWidth,a=void 0!==r&&r,o=n.children,s=n.classes,l=n.displayEmpty,c=void 0!==l&&l,u=n.IconComponent,g=void 0===u?To:u,d=n.id,h=n.input,f=n.inputProps,p=n.label,I=n.labelId,C=n.labelWidth,m=void 0===C?0:C,A=n.MenuProps,b=n.multiple,y=void 0!==b&&b,G=n.native,w=void 0!==G&&G,B=n.onClose,x=n.onOpen,S=n.open,Z=n.renderValue,k=n.SelectDisplayProps,R=n.variant,W=void 0===R?"standard":R,M=Fe(n,["autoWidth","children","classes","displayEmpty","IconComponent","id","input","inputProps","label","labelId","labelWidth","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"]),V=w?Yo:Vo,F=Hr({props:n,muiFormControl:ga(),states:["variant"]}).variant||W,N=h||{standard:_o,outlined:t.createElement(ua,{label:p,labelWidth:m}),filled:Po}[F];return t.cloneElement(N,v({inputComponent:V,inputProps:v({children:o,IconComponent:g,variant:F,type:void 0,multiple:y},w?{id:d}:{autoWidth:a,displayEmpty:c,labelId:I,MenuProps:A,onClose:B,onOpen:x,open:S,renderValue:Z,SelectDisplayProps:v({id:d},k)},f,{classes:f?Qt({baseClasses:s,newClasses:f.classes,Component:e}):s},h?h.props.inputProps:{}),ref:i},M))}));Do.muiName="Select";var Oo=zr(Ko,{name:"MuiSelect"})(Do),Uo={standard:ia,filled:aa,outlined:ua},jo=t.forwardRef((function(e,n){var i=e.autoComplete,r=e.autoFocus,a=void 0!==r&&r,o=e.children,s=e.classes,l=e.className,c=e.color,u=void 0===c?"primary":c,g=e.defaultValue,d=e.disabled,h=void 0!==d&&d,f=e.error,p=void 0!==f&&f,I=e.FormHelperTextProps,C=e.fullWidth,m=void 0!==C&&C,A=e.helperText,b=e.hiddenLabel,y=e.id,G=e.InputLabelProps,w=e.inputProps,B=e.InputProps,x=e.inputRef,S=e.label,Z=e.multiline,k=void 0!==Z&&Z,R=e.name,W=e.onBlur,M=e.onChange,V=e.onFocus,F=e.placeholder,N=e.required,H=void 0!==N&&N,T=e.rows,X=e.rowsMax,Y=e.maxRows,E=e.minRows,z=e.select,L=void 0!==z&&z,K=e.SelectProps,_=e.type,P=e.value,D=e.variant,O=void 0===D?"standard":D,U=Fe(e,["autoComplete","autoFocus","children","classes","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","hiddenLabel","id","InputLabelProps","inputProps","InputProps","inputRef","label","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","rowsMax","maxRows","minRows","select","SelectProps","type","value","variant"]);var j={};if("outlined"===O&&(G&&"undefined"!==typeof G.shrink&&(j.notched=G.shrink),S)){var J,Q=null!==(J=null===G||void 0===G?void 0:G.required)&&void 0!==J?J:H;j.label=t.createElement(t.Fragment,null,S,Q&&"\xa0*")}L&&(K&&K.native||(j.id=void 0),j["aria-describedby"]=void 0);var q=A&&y?"".concat(y,"-helper-text"):void 0,$=S&&y?"".concat(y,"-label"):void 0,ee=Uo[O],te=t.createElement(ee,v({"aria-describedby":q,autoComplete:i,autoFocus:a,defaultValue:g,fullWidth:m,multiline:k,name:R,rows:T,rowsMax:X,maxRows:Y,minRows:E,type:_,value:P,id:y,inputRef:x,onBlur:W,onChange:M,onFocus:V,placeholder:F,inputProps:w},j,B));return t.createElement(ma,v({className:Nr(s.root,l),disabled:h,error:p,fullWidth:m,hiddenLabel:b,ref:n,required:H,color:u,variant:O},U),S&&t.createElement(pa,v({htmlFor:y,id:$},G),S),L?t.createElement(Oo,v({"aria-describedby":q,id:y,labelId:$,value:P,input:te},K),o):te,A&&t.createElement(Aa,v({id:q},I),A))})),Jo=zr({root:{}},{name:"MuiTextField"})(jo),Qo=!0,qo=!1,$o=null,es={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function ts(e){e.metaKey||e.altKey||e.ctrlKey||(Qo=!0)}function ns(){Qo=!1}function is(){"hidden"===this.visibilityState&&qo&&(Qo=!0)}function rs(e){var t=e.target;try{return t.matches(":focus-visible")}catch(n){}return Qo||function(e){var t=e.type,n=e.tagName;return!("INPUT"!==n||!es[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}function as(){qo=!0,window.clearTimeout($o),$o=window.setTimeout((function(){qo=!1}),100)}function os(){return{isFocusVisible:rs,onBlurVisible:as,ref:t.useCallback((function(e){var t,n=r.findDOMNode(e);null!=n&&((t=n.ownerDocument).addEventListener("keydown",ts,!0),t.addEventListener("mousedown",ns,!0),t.addEventListener("pointerdown",ns,!0),t.addEventListener("touchstart",ns,!0),t.addEventListener("visibilitychange",is,!0))}),[])}}function ss(e,n){var i=Object.create(null);return e&&t.Children.map(e,(function(e){return e})).forEach((function(e){i[e.key]=function(e){return n&&(0,t.isValidElement)(e)?n(e):e}(e)})),i}function ls(e,t,n){return null!=n[t]?n[t]:e.props[t]}function cs(e,n){return ss(e.children,(function(i){return(0,t.cloneElement)(i,{onExited:n.bind(null,i),in:!0,appear:ls(i,"appear",e),enter:ls(i,"enter",e),exit:ls(i,"exit",e)})}))}function us(e,n,i){var r=ss(e.children),a=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var i,r=Object.create(null),a=[];for(var o in e)o in t?a.length&&(r[o]=a,a=[]):a.push(o);var s={};for(var l in t){if(r[l])for(i=0;i<r[l].length;i++){var c=r[l][i];s[r[l][i]]=n(c)}s[l]=n(l)}for(i=0;i<a.length;i++)s[a[i]]=n(a[i]);return s}(n,r);return Object.keys(a).forEach((function(o){var s=a[o];if((0,t.isValidElement)(s)){var l=o in n,c=o in r,u=n[o],g=(0,t.isValidElement)(u)&&!u.props.in;!c||l&&!g?c||!l||g?c&&l&&(0,t.isValidElement)(u)&&(a[o]=(0,t.cloneElement)(s,{onExited:i.bind(null,s),in:u.props.in,exit:ls(s,"exit",e),enter:ls(s,"enter",e)})):a[o]=(0,t.cloneElement)(s,{in:!1}):a[o]=(0,t.cloneElement)(s,{onExited:i.bind(null,s),in:!0,exit:ls(s,"exit",e),enter:ls(s,"enter",e)})}})),a}var gs=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},ds=function(e){function n(t,n){var i,r=(i=e.call(this,t,n)||this).handleExited.bind(Ye(i));return i.state={contextValue:{isMounting:!0},handleExited:r,firstRender:!0},i}I(n,e);var i=n.prototype;return i.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},i.componentWillUnmount=function(){this.mounted=!1},n.getDerivedStateFromProps=function(e,t){var n=t.children,i=t.handleExited;return{children:t.firstRender?cs(e,i):us(e,n,i),firstRender:!1}},i.handleExited=function(e,t){var n=ss(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=v({},t.children);return delete n[e.key],{children:n}})))},i.render=function(){var e=this.props,n=e.component,i=e.childFactory,r=U(e,["component","childFactory"]),a=this.state.contextValue,o=gs(this.state.children).map(i);return delete r.appear,delete r.enter,delete r.exit,null===n?t.createElement(Pa.Provider,{value:a},o):t.createElement(Pa.Provider,{value:a},t.createElement(n,r,o))},n}(t.Component);ds.propTypes={},ds.defaultProps={component:"div",childFactory:function(e){return e}};var hs=ds,fs="undefined"===typeof window?t.useEffect:t.useLayoutEffect;var ps=function(e){var n=e.classes,i=e.pulsate,r=void 0!==i&&i,a=e.rippleX,o=e.rippleY,s=e.rippleSize,l=e.in,c=e.onExited,u=void 0===c?function(){}:c,g=e.timeout,d=t.useState(!1),h=d[0],f=d[1],p=Nr(n.ripple,n.rippleVisible,r&&n.ripplePulsate),I={width:s,height:s,top:-s/2+o,left:-s/2+a},C=Nr(n.child,h&&n.childLeaving,r&&n.childPulsate),m=Za(u);return fs((function(){if(!l){f(!0);var e=setTimeout(m,g);return function(){clearTimeout(e)}}}),[m,l,g]),t.createElement("span",{className:p,style:I},t.createElement("span",{className:C}))},Is=t.forwardRef((function(e,n){var i=e.center,r=void 0!==i&&i,a=e.classes,o=e.className,s=Fe(e,["center","classes","className"]),l=t.useState([]),c=l[0],u=l[1],g=t.useRef(0),d=t.useRef(null);t.useEffect((function(){d.current&&(d.current(),d.current=null)}),[c]);var h=t.useRef(!1),f=t.useRef(null),p=t.useRef(null),I=t.useRef(null);t.useEffect((function(){return function(){clearTimeout(f.current)}}),[]);var C=t.useCallback((function(e){var n=e.pulsate,i=e.rippleX,r=e.rippleY,o=e.rippleSize,s=e.cb;u((function(e){return[].concat(We(e),[t.createElement(ps,{key:g.current,classes:a,timeout:550,pulsate:n,rippleX:i,rippleY:r,rippleSize:o})])})),g.current+=1,d.current=s}),[a]),m=t.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,i=t.pulsate,a=void 0!==i&&i,o=t.center,s=void 0===o?r||t.pulsate:o,l=t.fakeElement,c=void 0!==l&&l;if("mousedown"===e.type&&h.current)h.current=!1;else{"touchstart"===e.type&&(h.current=!0);var u,g,d,m=c?null:I.current,v=m?m.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(s||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)u=Math.round(v.width/2),g=Math.round(v.height/2);else{var A=e.touches?e.touches[0]:e,b=A.clientX,y=A.clientY;u=Math.round(b-v.left),g=Math.round(y-v.top)}if(s)(d=Math.sqrt((2*Math.pow(v.width,2)+Math.pow(v.height,2))/3))%2===0&&(d+=1);else{var G=2*Math.max(Math.abs((m?m.clientWidth:0)-u),u)+2,w=2*Math.max(Math.abs((m?m.clientHeight:0)-g),g)+2;d=Math.sqrt(Math.pow(G,2)+Math.pow(w,2))}e.touches?null===p.current&&(p.current=function(){C({pulsate:a,rippleX:u,rippleY:g,rippleSize:d,cb:n})},f.current=setTimeout((function(){p.current&&(p.current(),p.current=null)}),80)):C({pulsate:a,rippleX:u,rippleY:g,rippleSize:d,cb:n})}}),[r,C]),A=t.useCallback((function(){m({},{pulsate:!0})}),[m]),b=t.useCallback((function(e,t){if(clearTimeout(f.current),"touchend"===e.type&&p.current)return e.persist(),p.current(),p.current=null,void(f.current=setTimeout((function(){b(e,t)})));p.current=null,u((function(e){return e.length>0?e.slice(1):e})),d.current=t}),[]);return t.useImperativeHandle(n,(function(){return{pulsate:A,start:m,stop:b}}),[A,m,b]),t.createElement("span",v({className:Nr(a.root,o),ref:I},s),t.createElement(hs,{component:null,exit:!0},c))})),Cs=zr((function(e){return{root:{overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"},ripple:{opacity:0,position:"absolute"},rippleVisible:{opacity:.3,transform:"scale(1)",animation:"$enter ".concat(550,"ms ").concat(e.transitions.easing.easeInOut)},ripplePulsate:{animationDuration:"".concat(e.transitions.duration.shorter,"ms")},child:{opacity:1,display:"block",width:"100%",height:"100%",borderRadius:"50%",backgroundColor:"currentColor"},childLeaving:{opacity:0,animation:"$exit ".concat(550,"ms ").concat(e.transitions.easing.easeInOut)},childPulsate:{position:"absolute",left:0,top:0,animation:"$pulsate 2500ms ".concat(e.transitions.easing.easeInOut," 200ms infinite")},"@keyframes enter":{"0%":{transform:"scale(0)",opacity:.1},"100%":{transform:"scale(1)",opacity:.3}},"@keyframes exit":{"0%":{opacity:1},"100%":{opacity:0}},"@keyframes pulsate":{"0%":{transform:"scale(1)"},"50%":{transform:"scale(0.92)"},"100%":{transform:"scale(1)"}}}}),{flip:!1,name:"MuiTouchRipple"})(t.memo(Is)),ms=t.forwardRef((function(e,n){var i=e.action,a=e.buttonRef,o=e.centerRipple,s=void 0!==o&&o,l=e.children,c=e.classes,u=e.className,g=e.component,d=void 0===g?"button":g,h=e.disabled,f=void 0!==h&&h,p=e.disableRipple,I=void 0!==p&&p,C=e.disableTouchRipple,m=void 0!==C&&C,A=e.focusRipple,b=void 0!==A&&A,y=e.focusVisibleClassName,G=e.onBlur,w=e.onClick,B=e.onFocus,x=e.onFocusVisible,S=e.onKeyDown,Z=e.onKeyUp,k=e.onMouseDown,R=e.onMouseLeave,W=e.onMouseUp,M=e.onTouchEnd,V=e.onTouchMove,F=e.onTouchStart,N=e.onDragLeave,H=e.tabIndex,T=void 0===H?0:H,X=e.TouchRippleProps,Y=e.type,E=void 0===Y?"button":Y,z=Fe(e,["action","buttonRef","centerRipple","children","classes","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","onBlur","onClick","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","onDragLeave","tabIndex","TouchRippleProps","type"]),L=t.useRef(null);var K=t.useRef(null),_=t.useState(!1),P=_[0],D=_[1];f&&P&&D(!1);var O=os(),U=O.isFocusVisible,j=O.onBlurVisible,J=O.ref;function Q(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m;return Za((function(i){return t&&t(i),!n&&K.current&&K.current[e](i),!0}))}t.useImperativeHandle(i,(function(){return{focusVisible:function(){D(!0),L.current.focus()}}}),[]),t.useEffect((function(){P&&b&&!I&&K.current.pulsate()}),[I,b,P]);var q=Q("start",k),$=Q("stop",N),ee=Q("stop",W),te=Q("stop",(function(e){P&&e.preventDefault(),R&&R(e)})),ne=Q("start",F),ie=Q("stop",M),re=Q("stop",V),ae=Q("stop",(function(e){P&&(j(e),D(!1)),G&&G(e)}),!1),oe=Za((function(e){L.current||(L.current=e.currentTarget),U(e)&&(D(!0),x&&x(e)),B&&B(e)})),se=function(){var e=r.findDOMNode(L.current);return d&&"button"!==d&&!("A"===e.tagName&&e.href)},le=t.useRef(!1),ce=Za((function(e){b&&!le.current&&P&&K.current&&" "===e.key&&(le.current=!0,e.persist(),K.current.stop(e,(function(){K.current.start(e)}))),e.target===e.currentTarget&&se()&&" "===e.key&&e.preventDefault(),S&&S(e),e.target===e.currentTarget&&se()&&"Enter"===e.key&&!f&&(e.preventDefault(),w&&w(e))})),ue=Za((function(e){b&&" "===e.key&&K.current&&P&&!e.defaultPrevented&&(le.current=!1,e.persist(),K.current.stop(e,(function(){K.current.pulsate(e)}))),Z&&Z(e),w&&e.target===e.currentTarget&&se()&&" "===e.key&&!e.defaultPrevented&&w(e)})),ge=d;"button"===ge&&z.href&&(ge="a");var de={};"button"===ge?(de.type=E,de.disabled=f):("a"===ge&&z.href||(de.role="button"),de["aria-disabled"]=f);var he=_r(a,n),fe=_r(J,L),pe=_r(he,fe),Ie=t.useState(!1),Ce=Ie[0],me=Ie[1];t.useEffect((function(){me(!0)}),[]);var ve=Ce&&!I&&!f;return t.createElement(ge,v({className:Nr(c.root,u,P&&[c.focusVisible,y],f&&c.disabled),onBlur:ae,onClick:w,onFocus:oe,onKeyDown:ce,onKeyUp:ue,onMouseDown:q,onMouseLeave:te,onMouseUp:ee,onDragLeave:$,onTouchEnd:ie,onTouchMove:re,onTouchStart:ne,ref:pe,tabIndex:f?-1:T},de,z),l,ve?t.createElement(Cs,v({ref:K,center:s},X)):null)})),vs=zr({root:{display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle","-moz-appearance":"none","-webkit-appearance":"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},"&$disabled":{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}},disabled:{},focusVisible:{}},{name:"MuiButtonBase"})(ms),As=t.forwardRef((function(e,n){var i=e.children,r=e.classes,a=e.className,o=e.color,s=void 0===o?"default":o,l=e.component,c=void 0===l?"button":l,u=e.disabled,g=void 0!==u&&u,d=e.disableElevation,h=void 0!==d&&d,f=e.disableFocusRipple,p=void 0!==f&&f,I=e.endIcon,C=e.focusVisibleClassName,m=e.fullWidth,A=void 0!==m&&m,b=e.size,y=void 0===b?"medium":b,G=e.startIcon,w=e.type,B=void 0===w?"button":w,x=e.variant,S=void 0===x?"text":x,Z=Fe(e,["children","classes","className","color","component","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"]),k=G&&t.createElement("span",{className:Nr(r.startIcon,r["iconSize".concat(Lr(y))])},G),R=I&&t.createElement("span",{className:Nr(r.endIcon,r["iconSize".concat(Lr(y))])},I);return t.createElement(vs,v({className:Nr(r.root,r[S],a,"inherit"===s?r.colorInherit:"default"!==s&&r["".concat(S).concat(Lr(s))],"medium"!==y&&[r["".concat(S,"Size").concat(Lr(y))],r["size".concat(Lr(y))]],h&&r.disableElevation,g&&r.disabled,A&&r.fullWidth),component:c,disabled:g,focusRipple:!p,focusVisibleClassName:Nr(r.focusVisible,C),ref:n,type:B},Z),t.createElement("span",{className:r.label},k,i,R))})),bs=zr((function(e){return{root:v({},e.typography.button,{boxSizing:"border-box",minWidth:64,padding:"6px 16px",borderRadius:e.shape.borderRadius,color:e.palette.text.primary,transition:e.transitions.create(["background-color","box-shadow","border"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none",backgroundColor:er(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"},"&$disabled":{backgroundColor:"transparent"}},"&$disabled":{color:e.palette.action.disabled}}),label:{width:"100%",display:"inherit",alignItems:"inherit",justifyContent:"inherit"},text:{padding:"6px 8px"},textPrimary:{color:e.palette.primary.main,"&:hover":{backgroundColor:er(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},textSecondary:{color:e.palette.secondary.main,"&:hover":{backgroundColor:er(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},outlined:{padding:"5px 15px",border:"1px solid ".concat("light"===e.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),"&$disabled":{border:"1px solid ".concat(e.palette.action.disabledBackground)}},outlinedPrimary:{color:e.palette.primary.main,border:"1px solid ".concat(er(e.palette.primary.main,.5)),"&:hover":{border:"1px solid ".concat(e.palette.primary.main),backgroundColor:er(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},outlinedSecondary:{color:e.palette.secondary.main,border:"1px solid ".concat(er(e.palette.secondary.main,.5)),"&:hover":{border:"1px solid ".concat(e.palette.secondary.main),backgroundColor:er(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{border:"1px solid ".concat(e.palette.action.disabled)}},contained:{color:e.palette.getContrastText(e.palette.grey[300]),backgroundColor:e.palette.grey[300],boxShadow:e.shadows[2],"&:hover":{backgroundColor:e.palette.grey.A100,boxShadow:e.shadows[4],"@media (hover: none)":{boxShadow:e.shadows[2],backgroundColor:e.palette.grey[300]},"&$disabled":{backgroundColor:e.palette.action.disabledBackground}},"&$focusVisible":{boxShadow:e.shadows[6]},"&:active":{boxShadow:e.shadows[8]},"&$disabled":{color:e.palette.action.disabled,boxShadow:e.shadows[0],backgroundColor:e.palette.action.disabledBackground}},containedPrimary:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.dark,"@media (hover: none)":{backgroundColor:e.palette.primary.main}}},containedSecondary:{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main,"&:hover":{backgroundColor:e.palette.secondary.dark,"@media (hover: none)":{backgroundColor:e.palette.secondary.main}}},disableElevation:{boxShadow:"none","&:hover":{boxShadow:"none"},"&$focusVisible":{boxShadow:"none"},"&:active":{boxShadow:"none"},"&$disabled":{boxShadow:"none"}},focusVisible:{},disabled:{},colorInherit:{color:"inherit",borderColor:"currentColor"},textSizeSmall:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},textSizeLarge:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},outlinedSizeSmall:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},outlinedSizeLarge:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},containedSizeSmall:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},containedSizeLarge:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},sizeSmall:{},sizeLarge:{},fullWidth:{width:"100%"},startIcon:{display:"inherit",marginRight:8,marginLeft:-4,"&$iconSizeSmall":{marginLeft:-2}},endIcon:{display:"inherit",marginRight:-4,marginLeft:8,"&$iconSizeSmall":{marginRight:-2}},iconSizeSmall:{"& > *:first-child":{fontSize:18}},iconSizeMedium:{"& > *:first-child":{fontSize:20}},iconSizeLarge:{"& > *:first-child":{fontSize:22}}}}),{name:"MuiButton"})(As),ys="undefined"===typeof window?t.useEffect:t.useLayoutEffect,Gs=t.forwardRef((function(e,n){var i=e.alignItems,a=void 0===i?"center":i,o=e.autoFocus,s=void 0!==o&&o,l=e.button,c=void 0!==l&&l,u=e.children,g=e.classes,d=e.className,h=e.component,f=e.ContainerComponent,p=void 0===f?"li":f,I=e.ContainerProps,C=(I=void 0===I?{}:I).className,m=Fe(I,["className"]),A=e.dense,b=void 0!==A&&A,y=e.disabled,G=void 0!==y&&y,w=e.disableGutters,B=void 0!==w&&w,x=e.divider,S=void 0!==x&&x,Z=e.focusVisibleClassName,k=e.selected,R=void 0!==k&&k,W=Fe(e,["alignItems","autoFocus","button","children","classes","className","component","ContainerComponent","ContainerProps","dense","disabled","disableGutters","divider","focusVisibleClassName","selected"]),M=t.useContext(Io),V={dense:b||M.dense||!1,alignItems:a},F=t.useRef(null);ys((function(){s&&F.current&&F.current.focus()}),[s]);var N=t.Children.toArray(u),H=N.length&&Ia(N[N.length-1],["ListItemSecondaryAction"]),T=_r(t.useCallback((function(e){F.current=r.findDOMNode(e)}),[]),n),X=v({className:Nr(g.root,d,V.dense&&g.dense,!B&&g.gutters,S&&g.divider,G&&g.disabled,c&&g.button,"center"!==a&&g.alignItemsFlexStart,H&&g.secondaryAction,R&&g.selected),disabled:G},W),Y=h||"li";return c&&(X.component=h||"div",X.focusVisibleClassName=Nr(g.focusVisible,Z),Y=vs),H?(Y=X.component||h?Y:"div","li"===p&&("li"===Y?Y="div":"li"===X.component&&(X.component="div")),t.createElement(Io.Provider,{value:V},t.createElement(p,v({className:Nr(g.container,C),ref:T},m),t.createElement(Y,X,N),N.pop()))):t.createElement(Io.Provider,{value:V},t.createElement(Y,v({ref:T},X),N))})),ws=zr((function(e){return{root:{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,"&$focusVisible":{backgroundColor:e.palette.action.selected},"&$selected, &$selected:hover":{backgroundColor:e.palette.action.selected},"&$disabled":{opacity:.5}},container:{position:"relative"},focusVisible:{},dense:{paddingTop:4,paddingBottom:4},alignItemsFlexStart:{alignItems:"flex-start"},disabled:{},divider:{borderBottom:"1px solid ".concat(e.palette.divider),backgroundClip:"padding-box"},gutters:{paddingLeft:16,paddingRight:16},button:{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:e.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}},secondaryAction:{paddingRight:48},selected:{}}}),{name:"MuiListItem"})(Gs),Bs=t.forwardRef((function(e,n){var i,r=e.classes,a=e.className,o=e.component,s=void 0===o?"li":o,l=e.disableGutters,c=void 0!==l&&l,u=e.ListItemClasses,g=e.role,d=void 0===g?"menuitem":g,h=e.selected,f=e.tabIndex,p=Fe(e,["classes","className","component","disableGutters","ListItemClasses","role","selected","tabIndex"]);return e.disabled||(i=void 0!==f?f:-1),t.createElement(ws,v({button:!0,role:d,tabIndex:i,component:s,selected:h,disableGutters:c,classes:v({dense:r.dense},u),className:Nr(r.root,a,h&&r.selected,!c&&r.gutters),ref:n},p))})),xs=zr((function(e){return{root:v({},e.typography.body1,ke({minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",width:"auto",overflow:"hidden",whiteSpace:"nowrap"},e.breakpoints.up("sm"),{minHeight:"auto"})),gutters:{},selected:{},dense:v({},e.typography.body2,{minHeight:"auto"})}}),{name:"MuiMenuItem"})(Bs),Ss={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p"},Zs=t.forwardRef((function(e,n){var i=e.align,r=void 0===i?"inherit":i,a=e.classes,o=e.className,s=e.color,l=void 0===s?"initial":s,c=e.component,u=e.display,g=void 0===u?"initial":u,d=e.gutterBottom,h=void 0!==d&&d,f=e.noWrap,p=void 0!==f&&f,I=e.paragraph,C=void 0!==I&&I,m=e.variant,A=void 0===m?"body1":m,b=e.variantMapping,y=void 0===b?Ss:b,G=Fe(e,["align","classes","className","color","component","display","gutterBottom","noWrap","paragraph","variant","variantMapping"]),w=c||(C?"p":y[A]||Ss[A])||"span";return t.createElement(w,v({className:Nr(a.root,o,"inherit"!==A&&a[A],"initial"!==l&&a["color".concat(Lr(l))],p&&a.noWrap,h&&a.gutterBottom,C&&a.paragraph,"inherit"!==r&&a["align".concat(Lr(r))],"initial"!==g&&a["display".concat(Lr(g))]),ref:n},G))})),ks=zr((function(e){return{root:{margin:0},body2:e.typography.body2,body1:e.typography.body1,caption:e.typography.caption,button:e.typography.button,h1:e.typography.h1,h2:e.typography.h2,h3:e.typography.h3,h4:e.typography.h4,h5:e.typography.h5,h6:e.typography.h6,subtitle1:e.typography.subtitle1,subtitle2:e.typography.subtitle2,overline:e.typography.overline,srOnly:{position:"absolute",height:1,width:1,overflow:"hidden"},alignLeft:{textAlign:"left"},alignCenter:{textAlign:"center"},alignRight:{textAlign:"right"},alignJustify:{textAlign:"justify"},noWrap:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},gutterBottom:{marginBottom:"0.35em"},paragraph:{marginBottom:16},colorInherit:{color:"inherit"},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorTextPrimary:{color:e.palette.text.primary},colorTextSecondary:{color:e.palette.text.secondary},colorError:{color:e.palette.error.main},displayInline:{display:"inline"},displayBlock:{display:"block"}}}),{name:"MuiTypography"})(Zs),Rs=t.forwardRef((function(e,n){e.checked;var i=e.classes,r=e.className,a=e.control,o=e.disabled,s=(e.inputRef,e.label),l=e.labelPlacement,c=void 0===l?"end":l,u=(e.name,e.onChange,e.value,Fe(e,["checked","classes","className","control","disabled","inputRef","label","labelPlacement","name","onChange","value"])),g=ga(),d=o;"undefined"===typeof d&&"undefined"!==typeof a.props.disabled&&(d=a.props.disabled),"undefined"===typeof d&&g&&(d=g.disabled);var h={disabled:d};return["checked","name","onChange","value","inputRef"].forEach((function(t){"undefined"===typeof a.props[t]&&"undefined"!==typeof e[t]&&(h[t]=e[t])})),t.createElement("label",v({className:Nr(i.root,r,"end"!==c&&i["labelPlacement".concat(Lr(c))],d&&i.disabled),ref:n},u),t.cloneElement(a,h),t.createElement(ks,{component:"span",className:Nr(i.label,d&&i.disabled)},s))})),Ws=zr((function(e){return{root:{display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,"&$disabled":{cursor:"default"}},labelPlacementStart:{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},labelPlacementTop:{flexDirection:"column-reverse",marginLeft:16},labelPlacementBottom:{flexDirection:"column",marginLeft:16},disabled:{},label:{"&$disabled":{color:e.palette.text.disabled}}}}),{name:"MuiFormControlLabel"})(Rs),Ms=t.forwardRef((function(e,n){var i=e.classes,r=e.className,a=e.row,o=void 0!==a&&a,s=Fe(e,["classes","className","row"]);return t.createElement("div",v({className:Nr(i.root,r,o&&i.row),ref:n},s))})),Vs=zr({root:{display:"flex",flexDirection:"column",flexWrap:"wrap"},row:{flexDirection:"row"}},{name:"MuiFormGroup"})(Ms);var Fs=t.createContext();function Ns(e){var n=t.useState(e),i=n[0],r=n[1],a=e||i;return t.useEffect((function(){null==i&&r("mui-".concat(Math.round(1e5*Math.random())))}),[i]),a}var Hs=t.forwardRef((function(e,n){var i=e.actions,r=e.children,a=e.name,o=e.value,s=e.onChange,l=Fe(e,["actions","children","name","value","onChange"]),u=t.useRef(null),g=c(Ro({controlled:o,default:e.defaultValue,name:"RadioGroup"}),2),d=g[0],h=g[1];t.useImperativeHandle(i,(function(){return{focus:function(){var e=u.current.querySelector("input:not(:disabled):checked");e||(e=u.current.querySelector("input:not(:disabled)")),e&&e.focus()}}}),[]);var f=_r(n,u),p=Ns(a);return t.createElement(Fs.Provider,{value:{name:p,onChange:function(e){h(e.target.value),s&&s(e,e.target.value)},value:d}},t.createElement(Vs,v({role:"radiogroup",ref:f},l),r))})),Ts=Hs,Xs=t.forwardRef((function(e,n){var i=e.edge,r=void 0!==i&&i,a=e.children,o=e.classes,s=e.className,l=e.color,c=void 0===l?"default":l,u=e.disabled,g=void 0!==u&&u,d=e.disableFocusRipple,h=void 0!==d&&d,f=e.size,p=void 0===f?"medium":f,I=Fe(e,["edge","children","classes","className","color","disabled","disableFocusRipple","size"]);return t.createElement(vs,v({className:Nr(o.root,s,"default"!==c&&o["color".concat(Lr(c))],g&&o.disabled,"small"===p&&o["size".concat(Lr(p))],{start:o.edgeStart,end:o.edgeEnd}[r]),centerRipple:!0,focusRipple:!h,disabled:g,ref:n},I),t.createElement("span",{className:o.label},a))})),Ys=zr((function(e){return{root:{textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:12,borderRadius:"50%",overflow:"visible",color:e.palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{backgroundColor:er(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{backgroundColor:"transparent",color:e.palette.action.disabled}},edgeStart:{marginLeft:-12,"$sizeSmall&":{marginLeft:-3}},edgeEnd:{marginRight:-12,"$sizeSmall&":{marginRight:-3}},colorInherit:{color:"inherit"},colorPrimary:{color:e.palette.primary.main,"&:hover":{backgroundColor:er(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},colorSecondary:{color:e.palette.secondary.main,"&:hover":{backgroundColor:er(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},disabled:{},sizeSmall:{padding:3,fontSize:e.typography.pxToRem(18)},label:{width:"100%",display:"flex",alignItems:"inherit",justifyContent:"inherit"}}}),{name:"MuiIconButton"})(Xs),Es=t.forwardRef((function(e,n){var i=e.autoFocus,r=e.checked,a=e.checkedIcon,o=e.classes,s=e.className,l=e.defaultChecked,u=e.disabled,g=e.icon,d=e.id,h=e.inputProps,f=e.inputRef,p=e.name,I=e.onBlur,C=e.onChange,m=e.onFocus,A=e.readOnly,b=e.required,y=e.tabIndex,G=e.type,w=e.value,B=Fe(e,["autoFocus","checked","checkedIcon","classes","className","defaultChecked","disabled","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"]),x=c(Ro({controlled:r,default:Boolean(l),name:"SwitchBase",state:"checked"}),2),S=x[0],Z=x[1],k=ga(),R=u;k&&"undefined"===typeof R&&(R=k.disabled);var W="checkbox"===G||"radio"===G;return t.createElement(Ys,v({component:"span",className:Nr(o.root,s,S&&o.checked,R&&o.disabled),disabled:R,tabIndex:null,role:void 0,onFocus:function(e){m&&m(e),k&&k.onFocus&&k.onFocus(e)},onBlur:function(e){I&&I(e),k&&k.onBlur&&k.onBlur(e)},ref:n},B),t.createElement("input",v({autoFocus:i,checked:r,defaultChecked:l,className:o.input,disabled:R,id:W&&d,name:p,onChange:function(e){var t=e.target.checked;Z(t),C&&C(e,t)},readOnly:A,ref:f,required:b,tabIndex:y,type:G,value:w},h)),S?a:g)})),zs=zr({root:{padding:9},checked:{},disabled:{},input:{cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}},{name:"PrivateSwitchBase"})(Es),Ls=Ho(t.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),Ks=Ho(t.createElement("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}));var _s=zr((function(e){return{root:{position:"relative",display:"flex","&$checked $layer":{transform:"scale(1)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.shortest})}},layer:{left:0,position:"absolute",transform:"scale(0)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeIn,duration:e.transitions.duration.shortest})},checked:{}}}),{name:"PrivateRadioButtonIcon"})((function(e){var n=e.checked,i=e.classes,r=e.fontSize;return t.createElement("div",{className:Nr(i.root,n&&i.checked)},t.createElement(Ls,{fontSize:r}),t.createElement(Ks,{fontSize:r,className:i.layer}))}));var Ps=t.createElement(_s,{checked:!0}),Ds=t.createElement(_s,null),Os=t.forwardRef((function(e,n){var i=e.checked,r=e.classes,a=e.color,o=void 0===a?"secondary":a,s=e.name,l=e.onChange,c=e.size,u=void 0===c?"medium":c,g=Fe(e,["checked","classes","color","name","onChange","size"]),d=t.useContext(Fs),h=i,f=Ga(l,d&&d.onChange),p=s;return d&&("undefined"===typeof h&&(h=d.value===e.value),"undefined"===typeof p&&(p=d.name)),t.createElement(zs,v({color:o,type:"radio",icon:t.cloneElement(Ds,{fontSize:"small"===u?"small":"medium"}),checkedIcon:t.cloneElement(Ps,{fontSize:"small"===u?"small":"medium"}),classes:{root:Nr(r.root,r["color".concat(Lr(o))]),checked:r.checked,disabled:r.disabled},name:p,checked:h,onChange:f,ref:n},g))})),Us=zr((function(e){return{root:{color:e.palette.text.secondary},checked:{},disabled:{},colorPrimary:{"&$checked":{color:e.palette.primary.main,"&:hover":{backgroundColor:er(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:e.palette.action.disabled}},colorSecondary:{"&$checked":{color:e.palette.secondary.main,"&:hover":{backgroundColor:er(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:e.palette.action.disabled}}}}),{name:"MuiRadio"})(Os),js="undefined"!==typeof window&&"undefined"!==typeof document&&"undefined"!==typeof navigator,Js=function(){for(var e=["Edge","Trident","Firefox"],t=0;t<e.length;t+=1)if(js&&navigator.userAgent.indexOf(e[t])>=0)return 1;return 0}();var Qs=js&&window.Promise?function(e){var t=!1;return function(){t||(t=!0,window.Promise.resolve().then((function(){t=!1,e()})))}}:function(e){var t=!1;return function(){t||(t=!0,setTimeout((function(){t=!1,e()}),Js))}};function qs(e){return e&&"[object Function]"==={}.toString.call(e)}function $s(e,t){if(1!==e.nodeType)return[];var n=e.ownerDocument.defaultView.getComputedStyle(e,null);return t?n[t]:n}function el(e){return"HTML"===e.nodeName?e:e.parentNode||e.host}function tl(e){if(!e)return document.body;switch(e.nodeName){case"HTML":case"BODY":return e.ownerDocument.body;case"#document":return e.body}var t=$s(e),n=t.overflow,i=t.overflowX,r=t.overflowY;return/(auto|scroll|overlay)/.test(n+r+i)?e:tl(el(e))}function nl(e){return e&&e.referenceNode?e.referenceNode:e}var il=js&&!(!window.MSInputMethodContext||!document.documentMode),rl=js&&/MSIE 10/.test(navigator.userAgent);function al(e){return 11===e?il:10===e?rl:il||rl}function ol(e){if(!e)return document.documentElement;for(var t=al(10)?document.body:null,n=e.offsetParent||null;n===t&&e.nextElementSibling;)n=(e=e.nextElementSibling).offsetParent;var i=n&&n.nodeName;return i&&"BODY"!==i&&"HTML"!==i?-1!==["TH","TD","TABLE"].indexOf(n.nodeName)&&"static"===$s(n,"position")?ol(n):n:e?e.ownerDocument.documentElement:document.documentElement}function sl(e){return null!==e.parentNode?sl(e.parentNode):e}function ll(e,t){if(!e||!e.nodeType||!t||!t.nodeType)return document.documentElement;var n=e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING,i=n?e:t,r=n?t:e,a=document.createRange();a.setStart(i,0),a.setEnd(r,0);var o=a.commonAncestorContainer;if(e!==o&&t!==o||i.contains(r))return function(e){var t=e.nodeName;return"BODY"!==t&&("HTML"===t||ol(e.firstElementChild)===e)}(o)?o:ol(o);var s=sl(e);return s.host?ll(s.host,t):ll(e,sl(t).host)}function cl(e){var t="top"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top")?"scrollTop":"scrollLeft",n=e.nodeName;if("BODY"===n||"HTML"===n){var i=e.ownerDocument.documentElement;return(e.ownerDocument.scrollingElement||i)[t]}return e[t]}function ul(e,t){var n="x"===t?"Left":"Top",i="Left"===n?"Right":"Bottom";return parseFloat(e["border"+n+"Width"])+parseFloat(e["border"+i+"Width"])}function gl(e,t,n,i){return Math.max(t["offset"+e],t["scroll"+e],n["client"+e],n["offset"+e],n["scroll"+e],al(10)?parseInt(n["offset"+e])+parseInt(i["margin"+("Height"===e?"Top":"Left")])+parseInt(i["margin"+("Height"===e?"Bottom":"Right")]):0)}function dl(e){var t=e.body,n=e.documentElement,i=al(10)&&getComputedStyle(n);return{height:gl("Height",t,n,i),width:gl("Width",t,n,i)}}var hl=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),fl=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},pl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};function Il(e){return pl({},e,{right:e.left+e.width,bottom:e.top+e.height})}function Cl(e){var t={};try{if(al(10)){t=e.getBoundingClientRect();var n=cl(e,"top"),i=cl(e,"left");t.top+=n,t.left+=i,t.bottom+=n,t.right+=i}else t=e.getBoundingClientRect()}catch(g){}var r={left:t.left,top:t.top,width:t.right-t.left,height:t.bottom-t.top},a="HTML"===e.nodeName?dl(e.ownerDocument):{},o=a.width||e.clientWidth||r.width,s=a.height||e.clientHeight||r.height,l=e.offsetWidth-o,c=e.offsetHeight-s;if(l||c){var u=$s(e);l-=ul(u,"x"),c-=ul(u,"y"),r.width-=l,r.height-=c}return Il(r)}function ml(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=al(10),r="HTML"===t.nodeName,a=Cl(e),o=Cl(t),s=tl(e),l=$s(t),c=parseFloat(l.borderTopWidth),u=parseFloat(l.borderLeftWidth);n&&r&&(o.top=Math.max(o.top,0),o.left=Math.max(o.left,0));var g=Il({top:a.top-o.top-c,left:a.left-o.left-u,width:a.width,height:a.height});if(g.marginTop=0,g.marginLeft=0,!i&&r){var d=parseFloat(l.marginTop),h=parseFloat(l.marginLeft);g.top-=c-d,g.bottom-=c-d,g.left-=u-h,g.right-=u-h,g.marginTop=d,g.marginLeft=h}return(i&&!n?t.contains(s):t===s&&"BODY"!==s.nodeName)&&(g=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=cl(t,"top"),r=cl(t,"left"),a=n?-1:1;return e.top+=i*a,e.bottom+=i*a,e.left+=r*a,e.right+=r*a,e}(g,t)),g}function vl(e){var t=e.nodeName;if("BODY"===t||"HTML"===t)return!1;if("fixed"===$s(e,"position"))return!0;var n=el(e);return!!n&&vl(n)}function Al(e){if(!e||!e.parentElement||al())return document.documentElement;for(var t=e.parentElement;t&&"none"===$s(t,"transform");)t=t.parentElement;return t||document.documentElement}function bl(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a={top:0,left:0},o=r?Al(e):ll(e,nl(t));if("viewport"===i)a=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.ownerDocument.documentElement,i=ml(e,n),r=Math.max(n.clientWidth,window.innerWidth||0),a=Math.max(n.clientHeight,window.innerHeight||0),o=t?0:cl(n),s=t?0:cl(n,"left");return Il({top:o-i.top+i.marginTop,left:s-i.left+i.marginLeft,width:r,height:a})}(o,r);else{var s=void 0;"scrollParent"===i?"BODY"===(s=tl(el(t))).nodeName&&(s=e.ownerDocument.documentElement):s="window"===i?e.ownerDocument.documentElement:i;var l=ml(s,o,r);if("HTML"!==s.nodeName||vl(o))a=l;else{var c=dl(e.ownerDocument),u=c.height,g=c.width;a.top+=l.top-l.marginTop,a.bottom=u+l.top,a.left+=l.left-l.marginLeft,a.right=g+l.left}}var d="number"===typeof(n=n||0);return a.left+=d?n:n.left||0,a.top+=d?n:n.top||0,a.right-=d?n:n.right||0,a.bottom-=d?n:n.bottom||0,a}function yl(e){return e.width*e.height}function Gl(e,t,n,i,r){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(-1===e.indexOf("auto"))return e;var o=bl(n,i,a,r),s={top:{width:o.width,height:t.top-o.top},right:{width:o.right-t.right,height:o.height},bottom:{width:o.width,height:o.bottom-t.bottom},left:{width:t.left-o.left,height:o.height}},l=Object.keys(s).map((function(e){return pl({key:e},s[e],{area:yl(s[e])})})).sort((function(e,t){return t.area-e.area})),c=l.filter((function(e){var t=e.width,i=e.height;return t>=n.clientWidth&&i>=n.clientHeight})),u=c.length>0?c[0].key:l[0].key,g=e.split("-")[1];return u+(g?"-"+g:"")}function wl(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return ml(n,i?Al(t):ll(t,nl(n)),i)}function Bl(e){var t=e.ownerDocument.defaultView.getComputedStyle(e),n=parseFloat(t.marginTop||0)+parseFloat(t.marginBottom||0),i=parseFloat(t.marginLeft||0)+parseFloat(t.marginRight||0);return{width:e.offsetWidth+i,height:e.offsetHeight+n}}function xl(e){var t={left:"right",right:"left",bottom:"top",top:"bottom"};return e.replace(/left|right|bottom|top/g,(function(e){return t[e]}))}function Sl(e,t,n){n=n.split("-")[0];var i=Bl(e),r={width:i.width,height:i.height},a=-1!==["right","left"].indexOf(n),o=a?"top":"left",s=a?"left":"top",l=a?"height":"width",c=a?"width":"height";return r[o]=t[o]+t[l]/2-i[l]/2,r[s]=n===s?t[s]-i[c]:t[xl(s)],r}function Zl(e,t){return Array.prototype.find?e.find(t):e.filter(t)[0]}function kl(e,t,n){var i=void 0===n?e:e.slice(0,function(e,t,n){if(Array.prototype.findIndex)return e.findIndex((function(e){return e[t]===n}));var i=Zl(e,(function(e){return e[t]===n}));return e.indexOf(i)}(e,"name",n));return i.forEach((function(e){e.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var n=e.function||e.fn;e.enabled&&qs(n)&&(t.offsets.popper=Il(t.offsets.popper),t.offsets.reference=Il(t.offsets.reference),t=n(t,e))})),t}function Rl(){if(!this.state.isDestroyed){var e={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};e.offsets.reference=wl(this.state,this.popper,this.reference,this.options.positionFixed),e.placement=Gl(this.options.placement,e.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),e.originalPlacement=e.placement,e.positionFixed=this.options.positionFixed,e.offsets.popper=Sl(this.popper,e.offsets.reference,e.placement),e.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",e=kl(this.modifiers,e),this.state.isCreated?this.options.onUpdate(e):(this.state.isCreated=!0,this.options.onCreate(e))}}function Wl(e,t){return e.some((function(e){var n=e.name;return e.enabled&&n===t}))}function Ml(e){for(var t=[!1,"ms","Webkit","Moz","O"],n=e.charAt(0).toUpperCase()+e.slice(1),i=0;i<t.length;i++){var r=t[i],a=r?""+r+n:e;if("undefined"!==typeof document.body.style[a])return a}return null}function Vl(){return this.state.isDestroyed=!0,Wl(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[Ml("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function Fl(e){var t=e.ownerDocument;return t?t.defaultView:window}function Nl(e,t,n,i){var r="BODY"===e.nodeName,a=r?e.ownerDocument.defaultView:e;a.addEventListener(t,n,{passive:!0}),r||Nl(tl(a.parentNode),t,n,i),i.push(a)}function Hl(e,t,n,i){n.updateBound=i,Fl(e).addEventListener("resize",n.updateBound,{passive:!0});var r=tl(e);return Nl(r,"scroll",n.updateBound,n.scrollParents),n.scrollElement=r,n.eventsEnabled=!0,n}function Tl(){this.state.eventsEnabled||(this.state=Hl(this.reference,this.options,this.state,this.scheduleUpdate))}function Xl(){var e,t;this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=(e=this.reference,t=this.state,Fl(e).removeEventListener("resize",t.updateBound),t.scrollParents.forEach((function(e){e.removeEventListener("scroll",t.updateBound)})),t.updateBound=null,t.scrollParents=[],t.scrollElement=null,t.eventsEnabled=!1,t))}function Yl(e){return""!==e&&!isNaN(parseFloat(e))&&isFinite(e)}function El(e,t){Object.keys(t).forEach((function(n){var i="";-1!==["width","height","top","right","bottom","left"].indexOf(n)&&Yl(t[n])&&(i="px"),e.style[n]=t[n]+i}))}var zl=js&&/Firefox/i.test(navigator.userAgent);function Ll(e,t,n){var i=Zl(e,(function(e){return e.name===t})),r=!!i&&e.some((function(e){return e.name===n&&e.enabled&&e.order<i.order}));if(!r){var a="`"+t+"`",o="`"+n+"`";console.warn(o+" modifier is required by "+a+" modifier in order to work, be sure to include it before "+a+"!")}return r}var Kl=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],_l=Kl.slice(3);function Pl(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=_l.indexOf(e),i=_l.slice(n+1).concat(_l.slice(0,n));return t?i.reverse():i}var Dl="flip",Ol="clockwise",Ul="counterclockwise";function jl(e,t,n,i){var r=[0,0],a=-1!==["right","left"].indexOf(i),o=e.split(/(\+|\-)/).map((function(e){return e.trim()})),s=o.indexOf(Zl(o,(function(e){return-1!==e.search(/,|\s/)})));o[s]&&-1===o[s].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var l=/\s*,\s*|\s+/,c=-1!==s?[o.slice(0,s).concat([o[s].split(l)[0]]),[o[s].split(l)[1]].concat(o.slice(s+1))]:[o];return c=c.map((function(e,i){var r=(1===i?!a:a)?"height":"width",o=!1;return e.reduce((function(e,t){return""===e[e.length-1]&&-1!==["+","-"].indexOf(t)?(e[e.length-1]=t,o=!0,e):o?(e[e.length-1]+=t,o=!1,e):e.concat(t)}),[]).map((function(e){return function(e,t,n,i){var r=e.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),a=+r[1],o=r[2];if(!a)return e;if(0===o.indexOf("%")){return Il("%p"===o?n:i)[t]/100*a}if("vh"===o||"vw"===o)return("vh"===o?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*a;return a}(e,r,t,n)}))})),c.forEach((function(e,t){e.forEach((function(n,i){Yl(n)&&(r[t]+=n*("-"===e[i-1]?-1:1))}))})),r}var Jl={shift:{order:100,enabled:!0,fn:function(e){var t=e.placement,n=t.split("-")[0],i=t.split("-")[1];if(i){var r=e.offsets,a=r.reference,o=r.popper,s=-1!==["bottom","top"].indexOf(n),l=s?"left":"top",c=s?"width":"height",u={start:fl({},l,a[l]),end:fl({},l,a[l]+a[c]-o[c])};e.offsets.popper=pl({},o,u[i])}return e}},offset:{order:200,enabled:!0,fn:function(e,t){var n=t.offset,i=e.placement,r=e.offsets,a=r.popper,o=r.reference,s=i.split("-")[0],l=void 0;return l=Yl(+n)?[+n,0]:jl(n,a,o,s),"left"===s?(a.top+=l[0],a.left-=l[1]):"right"===s?(a.top+=l[0],a.left+=l[1]):"top"===s?(a.left+=l[0],a.top-=l[1]):"bottom"===s&&(a.left+=l[0],a.top+=l[1]),e.popper=a,e},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(e,t){var n=t.boundariesElement||ol(e.instance.popper);e.instance.reference===n&&(n=ol(n));var i=Ml("transform"),r=e.instance.popper.style,a=r.top,o=r.left,s=r[i];r.top="",r.left="",r[i]="";var l=bl(e.instance.popper,e.instance.reference,t.padding,n,e.positionFixed);r.top=a,r.left=o,r[i]=s,t.boundaries=l;var c=t.priority,u=e.offsets.popper,g={primary:function(e){var n=u[e];return u[e]<l[e]&&!t.escapeWithReference&&(n=Math.max(u[e],l[e])),fl({},e,n)},secondary:function(e){var n="right"===e?"left":"top",i=u[n];return u[e]>l[e]&&!t.escapeWithReference&&(i=Math.min(u[n],l[e]-("right"===e?u.width:u.height))),fl({},n,i)}};return c.forEach((function(e){var t=-1!==["left","top"].indexOf(e)?"primary":"secondary";u=pl({},u,g[t](e))})),e.offsets.popper=u,e},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(e){var t=e.offsets,n=t.popper,i=t.reference,r=e.placement.split("-")[0],a=Math.floor,o=-1!==["top","bottom"].indexOf(r),s=o?"right":"bottom",l=o?"left":"top",c=o?"width":"height";return n[s]<a(i[l])&&(e.offsets.popper[l]=a(i[l])-n[c]),n[l]>a(i[s])&&(e.offsets.popper[l]=a(i[s])),e}},arrow:{order:500,enabled:!0,fn:function(e,t){var n;if(!Ll(e.instance.modifiers,"arrow","keepTogether"))return e;var i=t.element;if("string"===typeof i){if(!(i=e.instance.popper.querySelector(i)))return e}else if(!e.instance.popper.contains(i))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),e;var r=e.placement.split("-")[0],a=e.offsets,o=a.popper,s=a.reference,l=-1!==["left","right"].indexOf(r),c=l?"height":"width",u=l?"Top":"Left",g=u.toLowerCase(),d=l?"left":"top",h=l?"bottom":"right",f=Bl(i)[c];s[h]-f<o[g]&&(e.offsets.popper[g]-=o[g]-(s[h]-f)),s[g]+f>o[h]&&(e.offsets.popper[g]+=s[g]+f-o[h]),e.offsets.popper=Il(e.offsets.popper);var p=s[g]+s[c]/2-f/2,I=$s(e.instance.popper),C=parseFloat(I["margin"+u]),m=parseFloat(I["border"+u+"Width"]),v=p-e.offsets.popper[g]-C-m;return v=Math.max(Math.min(o[c]-f,v),0),e.arrowElement=i,e.offsets.arrow=(fl(n={},g,Math.round(v)),fl(n,d,""),n),e},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(e,t){if(Wl(e.instance.modifiers,"inner"))return e;if(e.flipped&&e.placement===e.originalPlacement)return e;var n=bl(e.instance.popper,e.instance.reference,t.padding,t.boundariesElement,e.positionFixed),i=e.placement.split("-")[0],r=xl(i),a=e.placement.split("-")[1]||"",o=[];switch(t.behavior){case Dl:o=[i,r];break;case Ol:o=Pl(i);break;case Ul:o=Pl(i,!0);break;default:o=t.behavior}return o.forEach((function(s,l){if(i!==s||o.length===l+1)return e;i=e.placement.split("-")[0],r=xl(i);var c=e.offsets.popper,u=e.offsets.reference,g=Math.floor,d="left"===i&&g(c.right)>g(u.left)||"right"===i&&g(c.left)<g(u.right)||"top"===i&&g(c.bottom)>g(u.top)||"bottom"===i&&g(c.top)<g(u.bottom),h=g(c.left)<g(n.left),f=g(c.right)>g(n.right),p=g(c.top)<g(n.top),I=g(c.bottom)>g(n.bottom),C="left"===i&&h||"right"===i&&f||"top"===i&&p||"bottom"===i&&I,m=-1!==["top","bottom"].indexOf(i),v=!!t.flipVariations&&(m&&"start"===a&&h||m&&"end"===a&&f||!m&&"start"===a&&p||!m&&"end"===a&&I),A=!!t.flipVariationsByContent&&(m&&"start"===a&&f||m&&"end"===a&&h||!m&&"start"===a&&I||!m&&"end"===a&&p),b=v||A;(d||C||b)&&(e.flipped=!0,(d||C)&&(i=o[l+1]),b&&(a=function(e){return"end"===e?"start":"start"===e?"end":e}(a)),e.placement=i+(a?"-"+a:""),e.offsets.popper=pl({},e.offsets.popper,Sl(e.instance.popper,e.offsets.reference,e.placement)),e=kl(e.instance.modifiers,e,"flip"))})),e},behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:function(e){var t=e.placement,n=t.split("-")[0],i=e.offsets,r=i.popper,a=i.reference,o=-1!==["left","right"].indexOf(n),s=-1===["top","left"].indexOf(n);return r[o?"left":"top"]=a[n]-(s?r[o?"width":"height"]:0),e.placement=xl(t),e.offsets.popper=Il(r),e}},hide:{order:800,enabled:!0,fn:function(e){if(!Ll(e.instance.modifiers,"hide","preventOverflow"))return e;var t=e.offsets.reference,n=Zl(e.instance.modifiers,(function(e){return"preventOverflow"===e.name})).boundaries;if(t.bottom<n.top||t.left>n.right||t.top>n.bottom||t.right<n.left){if(!0===e.hide)return e;e.hide=!0,e.attributes["x-out-of-boundaries"]=""}else{if(!1===e.hide)return e;e.hide=!1,e.attributes["x-out-of-boundaries"]=!1}return e}},computeStyle:{order:850,enabled:!0,fn:function(e,t){var n=t.x,i=t.y,r=e.offsets.popper,a=Zl(e.instance.modifiers,(function(e){return"applyStyle"===e.name})).gpuAcceleration;void 0!==a&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var o=void 0!==a?a:t.gpuAcceleration,s=ol(e.instance.popper),l=Cl(s),c={position:r.position},u=function(e,t){var n=e.offsets,i=n.popper,r=n.reference,a=Math.round,o=Math.floor,s=function(e){return e},l=a(r.width),c=a(i.width),u=-1!==["left","right"].indexOf(e.placement),g=-1!==e.placement.indexOf("-"),d=t?u||g||l%2===c%2?a:o:s,h=t?a:s;return{left:d(l%2===1&&c%2===1&&!g&&t?i.left-1:i.left),top:h(i.top),bottom:h(i.bottom),right:d(i.right)}}(e,window.devicePixelRatio<2||!zl),g="bottom"===n?"top":"bottom",d="right"===i?"left":"right",h=Ml("transform"),f=void 0,p=void 0;if(p="bottom"===g?"HTML"===s.nodeName?-s.clientHeight+u.bottom:-l.height+u.bottom:u.top,f="right"===d?"HTML"===s.nodeName?-s.clientWidth+u.right:-l.width+u.right:u.left,o&&h)c[h]="translate3d("+f+"px, "+p+"px, 0)",c[g]=0,c[d]=0,c.willChange="transform";else{var I="bottom"===g?-1:1,C="right"===d?-1:1;c[g]=p*I,c[d]=f*C,c.willChange=g+", "+d}var m={"x-placement":e.placement};return e.attributes=pl({},m,e.attributes),e.styles=pl({},c,e.styles),e.arrowStyles=pl({},e.offsets.arrow,e.arrowStyles),e},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(e){var t,n;return El(e.instance.popper,e.styles),t=e.instance.popper,n=e.attributes,Object.keys(n).forEach((function(e){!1!==n[e]?t.setAttribute(e,n[e]):t.removeAttribute(e)})),e.arrowElement&&Object.keys(e.arrowStyles).length&&El(e.arrowElement,e.arrowStyles),e},onLoad:function(e,t,n,i,r){var a=wl(r,t,e,n.positionFixed),o=Gl(n.placement,a,t,e,n.modifiers.flip.boundariesElement,n.modifiers.flip.padding);return t.setAttribute("x-placement",o),El(t,{position:n.positionFixed?"fixed":"absolute"}),n},gpuAcceleration:void 0}},Ql={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:Jl},ql=function(){function e(t,n){var i=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scheduleUpdate=function(){return requestAnimationFrame(i.update)},this.update=Qs(this.update.bind(this)),this.options=pl({},e.Defaults,r),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=t&&t.jquery?t[0]:t,this.popper=n&&n.jquery?n[0]:n,this.options.modifiers={},Object.keys(pl({},e.Defaults.modifiers,r.modifiers)).forEach((function(t){i.options.modifiers[t]=pl({},e.Defaults.modifiers[t]||{},r.modifiers?r.modifiers[t]:{})})),this.modifiers=Object.keys(this.options.modifiers).map((function(e){return pl({name:e},i.options.modifiers[e])})).sort((function(e,t){return e.order-t.order})),this.modifiers.forEach((function(e){e.enabled&&qs(e.onLoad)&&e.onLoad(i.reference,i.popper,i.options,e,i.state)})),this.update();var a=this.options.eventsEnabled;a&&this.enableEventListeners(),this.state.eventsEnabled=a}return hl(e,[{key:"update",value:function(){return Rl.call(this)}},{key:"destroy",value:function(){return Vl.call(this)}},{key:"enableEventListeners",value:function(){return Tl.call(this)}},{key:"disableEventListeners",value:function(){return Xl.call(this)}}]),e}();ql.Utils=("undefined"!==typeof window?window:n.g).PopperUtils,ql.placements=Kl,ql.Defaults=Ql;var $l=ql;function ec(e){return"function"===typeof e?e():e}var tc="undefined"!==typeof window?t.useLayoutEffect:t.useEffect,nc={},ic=t.forwardRef((function(e,n){var i=e.anchorEl,r=e.children,a=e.container,o=e.disablePortal,s=void 0!==o&&o,l=e.keepMounted,c=void 0!==l&&l,u=e.modifiers,g=e.open,d=e.placement,h=void 0===d?"bottom":d,f=e.popperOptions,p=void 0===f?nc:f,I=e.popperRef,C=e.style,m=e.transition,A=void 0!==m&&m,b=Fe(e,["anchorEl","children","container","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition"]),y=t.useRef(null),G=_r(y,n),w=t.useRef(null),B=_r(w,I),x=t.useRef(B);tc((function(){x.current=B}),[B]),t.useImperativeHandle(I,(function(){return w.current}),[]);var S=t.useState(!0),Z=S[0],k=S[1],R=function(e,t){if("ltr"===(t&&t.direction||"ltr"))return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}(h,tn()),W=t.useState(R),M=W[0],V=W[1];t.useEffect((function(){w.current&&w.current.update()}));var F=t.useCallback((function(){if(y.current&&i&&g){w.current&&(w.current.destroy(),x.current(null));var e=function(e){V(e.placement)},t=(ec(i),new $l(ec(i),y.current,v({placement:R},p,{modifiers:v({},s?{}:{preventOverflow:{boundariesElement:"window"}},u,p.modifiers),onCreate:Ga(e,p.onCreate),onUpdate:Ga(e,p.onUpdate)})));x.current(t)}}),[i,s,u,g,R,p]),N=t.useCallback((function(e){Kr(G,e),F()}),[G,F]),H=function(){w.current&&(w.current.destroy(),x.current(null))};if(t.useEffect((function(){return function(){H()}}),[]),t.useEffect((function(){g||A||H()}),[g,A]),!c&&!g&&(!A||Z))return null;var T={placement:M};return A&&(T.TransitionProps={in:g,onEnter:function(){k(!1)},onExited:function(){k(!0),H()}}),t.createElement(xa,{disablePortal:s,container:a},t.createElement("div",v({ref:N,role:"tooltip"},b,{style:v({position:"fixed",top:0,left:0,display:g||!c||A?null:"none"},C)}),"function"===typeof r?r(T):r))})),rc=ic;function ac(e){return Math.round(1e5*e)/1e5}var oc=!1,sc=null;var lc=t.forwardRef((function(e,n){var i=e.arrow,a=void 0!==i&&i,o=e.children,s=e.classes,l=e.disableFocusListener,u=void 0!==l&&l,g=e.disableHoverListener,d=void 0!==g&&g,h=e.disableTouchListener,f=void 0!==h&&h,p=e.enterDelay,I=void 0===p?100:p,C=e.enterNextDelay,m=void 0===C?0:C,A=e.enterTouchDelay,b=void 0===A?700:A,y=e.id,G=e.interactive,w=void 0!==G&&G,B=e.leaveDelay,x=void 0===B?0:B,S=e.leaveTouchDelay,Z=void 0===S?1500:S,k=e.onClose,R=e.onOpen,W=e.open,M=e.placement,V=void 0===M?"bottom":M,F=e.PopperComponent,N=void 0===F?rc:F,H=e.PopperProps,T=e.title,X=e.TransitionComponent,Y=void 0===X?oo:X,E=e.TransitionProps,z=Fe(e,["arrow","children","classes","disableFocusListener","disableHoverListener","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","id","interactive","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","title","TransitionComponent","TransitionProps"]),L=oa(),K=t.useState(),_=K[0],P=K[1],D=t.useState(null),O=D[0],U=D[1],j=t.useRef(!1),J=t.useRef(),Q=t.useRef(),q=t.useRef(),$=t.useRef(),ee=c(Ro({controlled:W,default:!1,name:"Tooltip",state:"open"}),2),te=ee[0],ne=ee[1],ie=te,re=Ns(y);t.useEffect((function(){return function(){clearTimeout(J.current),clearTimeout(Q.current),clearTimeout(q.current),clearTimeout($.current)}}),[]);var ae=function(e){clearTimeout(sc),oc=!0,ne(!0),R&&R(e)},oe=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(t){var n=o.props;"mouseover"===t.type&&n.onMouseOver&&e&&n.onMouseOver(t),j.current&&"touchstart"!==t.type||(_&&_.removeAttribute("title"),clearTimeout(Q.current),clearTimeout(q.current),I||oc&&m?(t.persist(),Q.current=setTimeout((function(){ae(t)}),oc?m:I)):ae(t))}},se=os(),le=se.isFocusVisible,ce=se.onBlurVisible,ue=se.ref,ge=t.useState(!1),de=ge[0],he=ge[1],fe=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(t){_||P(t.currentTarget),le(t)&&(he(!0),oe()(t));var n=o.props;n.onFocus&&e&&n.onFocus(t)}},pe=function(e){clearTimeout(sc),sc=setTimeout((function(){oc=!1}),800+x),ne(!1),k&&k(e),clearTimeout(J.current),J.current=setTimeout((function(){j.current=!1}),L.transitions.duration.shortest)},Ie=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(t){var n=o.props;"blur"===t.type&&(n.onBlur&&e&&n.onBlur(t),de&&(he(!1),ce())),"mouseleave"===t.type&&n.onMouseLeave&&t.currentTarget===_&&n.onMouseLeave(t),clearTimeout(Q.current),clearTimeout(q.current),t.persist(),q.current=setTimeout((function(){pe(t)}),x)}},Ce=function(e){j.current=!0;var t=o.props;t.onTouchStart&&t.onTouchStart(e)},me=_r(P,n),ve=_r(ue,me),Ae=t.useCallback((function(e){Kr(ve,r.findDOMNode(e))}),[ve]),be=_r(o.ref,Ae);""===T&&(ie=!1);var ye=v({"aria-describedby":ie?re:null,title:!ie&&!d&&"string"===typeof T?T:null},z,o.props,{className:Nr(z.className,o.props.className),onTouchStart:Ce,ref:be}),Ge={};f||(ye.onTouchStart=function(e){Ce(e),clearTimeout(q.current),clearTimeout(J.current),clearTimeout($.current),e.persist(),$.current=setTimeout((function(){oe()(e)}),b)},ye.onTouchEnd=function(e){o.props.onTouchEnd&&o.props.onTouchEnd(e),clearTimeout($.current),clearTimeout(q.current),e.persist(),q.current=setTimeout((function(){pe(e)}),Z)}),d||(ye.onMouseOver=oe(),ye.onMouseLeave=Ie(),w&&(Ge.onMouseOver=oe(!1),Ge.onMouseLeave=Ie(!1))),u||(ye.onFocus=fe(),ye.onBlur=Ie(),w&&(Ge.onFocus=fe(!1),Ge.onBlur=Ie(!1)));var we=t.useMemo((function(){return Ni({popperOptions:{modifiers:{arrow:{enabled:Boolean(O),element:O}}}},H)}),[O,H]);return t.createElement(t.Fragment,null,t.cloneElement(o,ye),t.createElement(N,v({className:Nr(s.popper,w&&s.popperInteractive,a&&s.popperArrow),placement:V,anchorEl:_,open:!!_&&ie,id:ye["aria-describedby"],transition:!0},Ge,we),(function(e){var n=e.placement,i=e.TransitionProps;return t.createElement(Y,v({timeout:L.transitions.duration.shorter},i,E),t.createElement("div",{className:Nr(s.tooltip,s["tooltipPlacement".concat(Lr(n.split("-")[0]))],j.current&&s.touch,a&&s.tooltipArrow)},T,a?t.createElement("span",{className:s.arrow,ref:U}):null))})))})),cc=zr((function(e){return{popper:{zIndex:e.zIndex.tooltip,pointerEvents:"none"},popperInteractive:{pointerEvents:"auto"},popperArrow:{'&[x-placement*="bottom"] $arrow':{top:0,left:0,marginTop:"-0.71em",marginLeft:4,marginRight:4,"&::before":{transformOrigin:"0 100%"}},'&[x-placement*="top"] $arrow':{bottom:0,left:0,marginBottom:"-0.71em",marginLeft:4,marginRight:4,"&::before":{transformOrigin:"100% 0"}},'&[x-placement*="right"] $arrow':{left:0,marginLeft:"-0.71em",height:"1em",width:"0.71em",marginTop:4,marginBottom:4,"&::before":{transformOrigin:"100% 100%"}},'&[x-placement*="left"] $arrow':{right:0,marginRight:"-0.71em",height:"1em",width:"0.71em",marginTop:4,marginBottom:4,"&::before":{transformOrigin:"0 0"}}},tooltip:{backgroundColor:er(e.palette.grey[700],.9),borderRadius:e.shape.borderRadius,color:e.palette.common.white,fontFamily:e.typography.fontFamily,padding:"4px 8px",fontSize:e.typography.pxToRem(10),lineHeight:"".concat(ac(1.4),"em"),maxWidth:300,wordWrap:"break-word",fontWeight:e.typography.fontWeightMedium},tooltipArrow:{position:"relative",margin:"0"},arrow:{overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:er(e.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}},touch:{padding:"8px 16px",fontSize:e.typography.pxToRem(14),lineHeight:"".concat(ac(16/14),"em"),fontWeight:e.typography.fontWeightRegular},tooltipPlacementLeft:ke({transformOrigin:"right center",margin:"0 24px "},e.breakpoints.up("sm"),{margin:"0 14px"}),tooltipPlacementRight:ke({transformOrigin:"left center",margin:"0 24px"},e.breakpoints.up("sm"),{margin:"0 14px"}),tooltipPlacementTop:ke({transformOrigin:"center bottom",margin:"24px 0"},e.breakpoints.up("sm"),{margin:"14px 0"}),tooltipPlacementBottom:ke({transformOrigin:"center top",margin:"24px 0"},e.breakpoints.up("sm"),{margin:"14px 0"})}}),{name:"MuiTooltip",flip:!1})(lc),uc={1:"Adana",2:"Ad\u0131yaman",3:"Afyonkarahisar",4:"A\u011fr\u0131",5:"Amasya",6:"Ankara",7:"Antalya",8:"Artvin",9:"Ayd\u0131n",10:"Bal\u0131kesir",11:"Bilecik",12:"Bing\xf6l",13:"Bitlis",14:"Bolu",15:"Burdur",16:"Bursa",17:"\xc7anakkale",18:"\xc7ank\u0131r\u0131",19:"\xc7orum",20:"Denizli",21:"Diyarbak\u0131r",22:"Edirne",23:"Elaz\u0131\u011f",24:"Erzincan",25:"Erzurum",26:"Eski\u015fehir",27:"Gaziantep",28:"Giresun",29:"G\xfcm\xfc\u015fhane",30:"Hakkari",31:"Hatay",32:"Isparta",33:"\u0130stanbul",34:"\u0130zmir",35:"Kars",36:"Kastamonu",37:"Kayseri",38:"K\u0131rklareli",39:"K\u0131r\u015fehir",40:"Kocaeli",41:"Konya",42:"K\xfctahya",43:"Malatya",44:"Manisa",45:"Kahramanmara\u015f",46:"Mardin",47:"Mu\u011fla",48:"Mu\u015f",49:"Nev\u015fehir",50:"Ni\u011fde",51:"Ordu",52:"Rize",53:"Sakarya",54:"Samsun",55:"Siirt",56:"Sinop",57:"Sivas",58:"Tekirda\u011f",59:"Tokat",60:"Trabzon",61:"Tunceli",63:"\u015eanl\u0131urfa",64:"U\u015fak",65:"Van",66:"Yozgat",67:"Zonguldak",68:"Aksaray",69:"Bayburt",70:"Karaman",71:"K\u0131r\u0131kkale",72:"Batman",73:"\u015e\u0131rnak",74:"Bart\u0131n",75:"Ardahan",76:"I\u011fd\u0131r",77:"Yalova",78:"Karab\xfck",79:"Kilis",80:"Osmaniye",81:"D\xfczce"},gc=Vr((function(e){return{form:{display:"flex",flexDirection:"column",alignItems:"center","& > *":{margin:e.spacing(1)},color:"grey"},textField:{"& .MuiOutlinedInput-root":{borderRadius:"25px","& fieldset":{borderColor:"#00EBF6",borderWidth:"3px"},"&:hover fieldset":{borderColor:"#7FFFD4"},"&.Mui-focused fieldset":{borderColor:"#FF1493"},color:"grey"}},button:{backgroundColor:"#00EBF6",borderRadius:"25px",color:"#fff",padding:"10px 50px","&:hover":{backgroundColor:"#7FFFD4",color:"#333"}},select:{"& .MuiOutlinedInput-root":{borderRadius:"25px","& fieldset":{borderColor:"#00EBF6",borderWidth:"3px"},"&:hover fieldset":{borderColor:"#7FFFD4"},"&.Mui-focused fieldset":{borderColor:"#FF1493"},color:"grey"},width:"150px"},selectCity:{"& .MuiOutlinedInput-root":{borderRadius:"25px","& fieldset":{borderColor:"#00EBF6",borderWidth:"3px"},"&:hover fieldset":{borderColor:"#7FFFD4"},"&.Mui-focused fieldset":{borderColor:"#FF1493"},color:"grey"},width:"270px"},radioGroup:{"& .MuiOutlinedInput-root":{borderRadius:"25px","& fieldset":{borderColor:"#00EBF6",borderWidth:"3px"},"&:hover fieldset":{borderColor:"#7FFFD4"},"&.Mui-focused fieldset":{borderColor:"#FF1493"},color:"grey"},width:"270px"}}})),dc=function(e){var n=e.onSubmit,i=(e.onGenderChange,gc()),r=c((0,t.useState)({firstName:"",birthDay:"",birthMonth:"",birthYear:"",height:"",weight:"",city:"",gender:""}),2),a=r[0],o=r[1],s=c((0,t.useState)(""),2),l=(s[0],s[1],c((0,t.useState)({firstName:!1,lastName:!1,birthDay:!1,birthMonth:!1,birthYear:!1,height:!1,weight:!1,city:!1,gender:!1}),2)),g=l[0],d=l[1],h=function(e){var t=e.target,n=t.name,i=t.value;o((function(e){return Ve(Ve({},e),{},ke({},n,i))}))},f=c((0,t.useState)(""),2),p=(f[0],f[1]),I=function(e){p(e.target.value)};return(0,u.jsxs)("form",{className:i.form,onSubmit:function(e){e.preventDefault();var t={};Object.keys(a).forEach((function(e){a[e]||(t[e]=!0)})),d(t),Object.values(a).some((function(e){return""===e}))?alert("L\xfctfen gerekli bilgileri doldurunuz."):(0===Object.keys(t).length&&console.log("Form submitted:",a),n(a))},children:[(0,u.jsx)(Jo,{label:(0,u.jsx)("span",{style:{color:"grey",fontSize:"12pt"},children:"Ad\u0131n"}),type:"text",name:"firstName",value:a.firstName,onChange:function(e){var t=e.target.value.replace(/\d+/g,"").slice(0,25);h({target:{name:"firstName",value:t}})},variant:"outlined",className:i.textField,error:g.firstName,helperText:g.firstName&&"Bu alan zorunludur."}),(0,u.jsx)(Jo,{label:(0,u.jsx)("span",{style:{color:"grey",fontSize:"12pt"},children:"Boyun cm"}),name:"height",type:"number",InputProps:{inputProps:{min:50,max:160}},value:a.height,onInput:function(e){e.target.value=Math.max(0,parseInt(e.target.value)).toString().slice(0,3)},onChange:function(e){var t=e.target,n=t.name,i=t.value;Number(e.target.value)>160?o((function(e){return Ve(Ve({},e),{},ke({},n,160))})):o((function(e){return Ve(Ve({},e),{},ke({},n,i))}))},variant:"outlined",className:i.textField,error:g.height,helperText:g.height&&"Bu alan zorunludur."}),(0,u.jsx)(Jo,{label:(0,u.jsx)("span",{style:{color:"grey",fontSize:"12pt"},children:"Kilon kg"}),name:"weight",type:"number",InputProps:{inputProps:{min:25,max:100}},value:a.weight,onInput:function(e){e.target.value=Math.max(0,parseInt(e.target.value)).toString().slice(0,3)},onChange:function(e){var t=e.target,n=t.name,i=t.value;Number(e.target.value)>100?o((function(e){return Ve(Ve({},e),{},ke({},n,100))})):o((function(e){return Ve(Ve({},e),{},ke({},n,i))}))},variant:"outlined",className:i.textField,error:g.weight,helperText:g.weight&&"Bu alan zorunludur."}),(0,u.jsxs)(ma,{variant:"outlined",className:i.selectCity,children:[(0,u.jsx)(pa,{id:"city-select-label",children:(0,u.jsx)("span",{style:{color:"grey",fontSize:"12pt"},children:"Ya\u015fad\u0131\u011f\u0131n \u015eehir"})}),(0,u.jsx)(Oo,{labelId:"city-select-label",id:"city-select",name:"city",value:a.city,onChange:h,label:"Ya\u015fad\u0131\u011f\u0131n \u015eehir",error:g.city,helperText:g.city&&"Bu alan zorunludur.",children:Object.values(uc).map((function(e){return(0,u.jsx)(xs,{value:Object.keys(uc).find((function(t){return uc[t]===e})),children:e},e)}))})]}),(0,u.jsxs)(ma,{variant:"outlined",component:"fieldset",className:i.radioGroup,style:{display:"flex",alignItems:"center",color:"grey"},children:[(0,u.jsx)("span",{style:{marginTop:"1rem",marginBottom:"-0.5rem",fontSize:"12pt"},children:"Cinsiyetin"}),(0,u.jsxs)(Ts,{"aria-label":"Cinsiyet",name:"gender",value:a.gender,onChange:function(e){h(e),I(e)},style:{display:"flex",flexDirection:"row"},children:[(0,u.jsx)(Ws,{value:"1",control:(0,u.jsx)(Us,{}),label:"Erkek"}),(0,u.jsx)(Ws,{value:"2",control:(0,u.jsx)(Us,{}),label:"K\u0131z"})]})]}),(0,u.jsx)("span",{style:{marginTop:"1rem",marginBottom:"-0.5rem",fontSize:"12pt"},children:"Do\u011fum Tarihin"}),(0,u.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,u.jsx)(cc,{title:"Do\u011fum Tarihin",children:(0,u.jsxs)(ma,{variant:"outlined",className:i.select,children:[(0,u.jsxs)(pa,{id:"birthday-day-label",children:[" ",(0,u.jsx)("span",{style:{color:"grey",fontSize:"12pt"},children:"G\xfcn"})]}),(0,u.jsx)(Oo,{labelId:"birthday-day-label",id:"birthday-day",value:a.birthDay,onChange:h,label:"G\xfcn",name:"birthDay",error:g.birthDay,helperText:g.birthDay&&"Bu alan zorunludur.",children:We(Array(31)).map((function(e,t){return(0,u.jsx)(xs,{value:t+1,children:t+1},t+1)}))})]})}),(0,u.jsx)(cc,{title:"Do\u011fum Tarihin",children:(0,u.jsxs)(ma,{variant:"outlined",className:i.select,children:[(0,u.jsxs)(pa,{id:"birthday-month-label",children:[" ",(0,u.jsx)("span",{style:{color:"grey",fontSize:"12pt"},children:"Ay"})]}),(0,u.jsx)(Oo,{labelId:"birthday-month-label",id:"birthday-month",value:a.birthMonth,onChange:h,label:"Ay",name:"birthMonth",error:g.birthMonth,helperText:g.birthMonth&&"Bu alan zorunludur.",children:We(Array(12)).map((function(e,t){return(0,u.jsx)(xs,{value:t+1,children:t+1},t+1)}))})]})}),(0,u.jsx)(cc,{title:"Do\u011fum Tarihin",children:(0,u.jsxs)(ma,{variant:"outlined",className:i.select,children:[(0,u.jsxs)(pa,{id:"birth-year-label",children:[" ",(0,u.jsx)("span",{style:{color:"grey",fontSize:"12pt"},children:"Do\u011fum Y\u0131l\u0131"})]}),(0,u.jsxs)(Oo,{labelId:"birth-year-label",id:"birth-year",name:"birthYear",value:a.birthYear,onChange:h,label:"Do\u011fum Y\u0131l\u0131",error:g.birthYear,helperText:g.birthYear&&"Bu alan zorunludur.",children:[(0,u.jsx)(xs,{value:"",children:(0,u.jsx)("em",{children:"-"})}),Array.from({length:16},(function(e,t){return 2021-t})).map((function(e){return(0,u.jsx)(xs,{value:e,children:e},e)}))]})]})})]}),(0,u.jsx)(bs,{variant:"contained",type:"submit",className:i.button,children:"Kaydet"})]})},hc=n.p+"static/media/bayram_kutlama.71c3fc4eefbde5cfc710.mp4",fc=(n.p,n.p,n(1060)),pc=["color","size"],Ic=function(e){var t=e.color,n=e.size,i=Fe(e,pc);return fc.createElement("svg",Ve({xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fill:t},i),fc.createElement("path",{d:"M21.64,13a1,1,0,0,0-1.05-.14,8.05,8.05,0,0,1-3.37.73A8.15,8.15,0,0,1,9.08,5.49a8.59,8.59,0,0,1,.25-2A1,1,0,0,0,8,2.36,10.14,10.14,0,1,0,22,14.05,1,1,0,0,0,21.64,13Zm-9.5,6.69A8.14,8.14,0,0,1,7.08,5.22v.27A10.15,10.15,0,0,0,17.22,15.63a9.79,9.79,0,0,0,2.1-.22A8.11,8.11,0,0,1,12.14,19.73Z"}))};Ic.propTypes={color:m().string,size:m().oneOfType([m().string,m().number])},Ic.defaultProps={color:"currentColor",size:"24"};var Cc=Ic,mc=["color","size"],vc=function(e){var t=e.color,n=e.size,i=Fe(e,mc);return fc.createElement("svg",Ve({xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fill:t},i),fc.createElement("path",{d:"M5.64,17l-.71.71a1,1,0,0,0,0,1.41,1,1,0,0,0,1.41,0l.71-.71A1,1,0,0,0,5.64,17ZM5,12a1,1,0,0,0-1-1H3a1,1,0,0,0,0,2H4A1,1,0,0,0,5,12Zm7-7a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0V4A1,1,0,0,0,12,5ZM5.64,7.05a1,1,0,0,0,.7.29,1,1,0,0,0,.71-.29,1,1,0,0,0,0-1.41l-.71-.71A1,1,0,0,0,4.93,6.34Zm12,.29a1,1,0,0,0,.7-.29l.71-.71a1,1,0,1,0-1.41-1.41L17,5.64a1,1,0,0,0,0,1.41A1,1,0,0,0,17.66,7.34ZM21,11H20a1,1,0,0,0,0,2h1a1,1,0,0,0,0-2Zm-9,8a1,1,0,0,0-1,1v1a1,1,0,0,0,2,0V20A1,1,0,0,0,12,19ZM18.36,17A1,1,0,0,0,17,18.36l.71.71a1,1,0,0,0,1.41,0,1,1,0,0,0,0-1.41ZM12,6.5A5.5,5.5,0,1,0,17.5,12,5.51,5.51,0,0,0,12,6.5Zm0,9A3.5,3.5,0,1,1,15.5,12,3.5,3.5,0,0,1,12,15.5Z"}))};vc.propTypes={color:m().string,size:m().oneOfType([m().string,m().number])},vc.defaultProps={color:"currentColor",size:"24"};var Ac,bc,yc=vc,Gc=function(){var e=(0,t.useContext)(g),n=e.state.darkMode;return(0,u.jsxs)("div",{className:"toggle",onClick:function(){e.dispatch({type:"toggle"})},children:[(0,u.jsx)(Cc,{}),(0,u.jsx)(yc,{}),(0,u.jsx)("div",{className:"t-button",style:n?{left:"2px"}:{right:"2px"}})]})},wc=n(5667),Bc=n.p+"static/media/tkc_logo.89d8f71a2e70271161c5.png",xc=function(e){var t=e.img;return(0,u.jsx)("div",{className:"floatingDivForLogo",children:(0,u.jsx)("img",{src:t,alt:""})})},Sc=function(){return(0,u.jsxs)("div",{id:"Navbar",children:[(0,u.jsx)("div",{className:"n-left",style:{marginTop:"-4rem"},children:(0,u.jsx)(wc.rU,{to:"Intro",smooth:!0,spy:!0,children:(0,u.jsx)(xc,{img:Bc})})}),(0,u.jsx)("div",{className:"n-right",style:{marginTop:"0rem"},children:(0,u.jsx)("div",{className:"n-list",style:{marginRight:"2rem",marginTop:"-4rem"},children:(0,u.jsx)(Gc,{})})})]})};function Zc(e){return a(e)||Re(e)||s(e)||l()}function kc(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}function Rc(e){return Rc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Rc(e)}function Wc(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Mc(e,t){if(t&&("object"===Se(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ye(e)}function Vc(e){var t=Wc();return function(){var n,i=Rc(e);if(t){var r=Rc(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Mc(this,n)}}function Fc(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw a}}}}function Nc(e,t,n){return Nc=Wc()?Reflect.construct.bind():function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&p(r,n.prototype),r},Nc.apply(null,arguments)}function Hc(e){var t="function"===typeof Map?new Map:void 0;return Hc=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"===typeof e}}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Nc(e,arguments,Rc(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),p(n,e)},Hc(e)}function Tc(e,t,n,i,r,a,o){try{var s=e[a](o),l=s.value}catch(c){return void n(c)}s.done?t(l):Promise.resolve(l).then(i,r)}function Xc(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function o(e){Tc(a,i,r,o,s,"next",e)}function s(e){Tc(a,i,r,o,s,"throw",e)}o(void 0)}))}}function Yc(){return Yc="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Rc(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},Yc.apply(this,arguments)}function Ec(){Ec=function(){return t};var e,t={},n=Object.prototype,i=n.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,i){var a=t&&t.prototype instanceof C?t:C,o=Object.create(a.prototype),s=new R(i||[]);return r(o,"_invoke",{value:x(e,n,s)}),o}function g(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",h="suspendedYield",f="executing",p="completed",I={};function C(){}function m(){}function v(){}var A={};c(A,o,(function(){return this}));var b=Object.getPrototypeOf,y=b&&b(b(W([])));y&&y!==n&&i.call(y,o)&&(A=y);var G=v.prototype=C.prototype=Object.create(A);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function B(e,t){function n(r,a,o,s){var l=g(e[r],e,a);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==Se(u)&&i.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(u).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,s)}))}s(l.arg)}var a;r(this,"_invoke",{value:function(e,i){function r(){return new t((function(t,r){n(e,i,t,r)}))}return a=a?a.then(r,r):r()}})}function x(t,n,i){var r=d;return function(a,o){if(r===f)throw new Error("Generator is already running");if(r===p){if("throw"===a)throw o;return{value:e,done:!0}}for(i.method=a,i.arg=o;;){var s=i.delegate;if(s){var l=S(s,i);if(l){if(l===I)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(r===d)throw r=p,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r=f;var c=g(t,n,i);if("normal"===c.type){if(r=i.done?p:h,c.arg===I)continue;return{value:c.arg,done:i.done}}"throw"===c.type&&(r=p,i.method="throw",i.arg=c.arg)}}}function S(t,n){var i=n.method,r=t.iterator[i];if(r===e)return n.delegate=null,"throw"===i&&t.iterator.return&&(n.method="return",n.arg=e,S(t,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+i+"' method")),I;var a=g(r,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,I;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,I):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,I)}function Z(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(Z,this),this.reset(!0)}function W(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function n(){for(;++r<t.length;)if(i.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(Se(t)+" is not iterable")}return m.prototype=v,r(G,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:m,configurable:!0}),m.displayName=c(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,l,"GeneratorFunction")),e.prototype=Object.create(G),e},t.awrap=function(e){return{__await:e}},w(B.prototype),c(B.prototype,s,(function(){return this})),t.AsyncIterator=B,t.async=function(e,n,i,r,a){void 0===a&&(a=Promise);var o=new B(u(e,n,i,r),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},w(G),c(G,l,"Generator"),c(G,o,(function(){return this})),c(G,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},t.values=W,R.prototype={constructor:R,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(i,r){return s.type="throw",s.arg=t,n.next=i,r&&(n.method="next",n.arg=e),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var l=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,I):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),I},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),I}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;k(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,i){return this.delegate={iterator:W(t),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=e),I}},t}var zc="151",Lc={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Kc={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},_c=0,Pc=1,Dc=2,Oc=3,Uc=0,jc=1,Jc=2,Qc=3,qc=0,$c=1,eu=2,tu=2,nu=0,iu=1,ru=2,au=3,ou=4,su=5,lu=100,cu=101,uu=102,gu=103,du=104,hu=200,fu=201,pu=202,Iu=203,Cu=204,mu=205,vu=206,Au=207,bu=208,yu=209,Gu=210,wu=0,Bu=1,xu=2,Su=3,Zu=4,ku=5,Ru=6,Wu=7,Mu=0,Vu=1,Fu=2,Nu=0,Hu=1,Tu=2,Xu=3,Yu=4,Eu=5,zu=300,Lu=301,Ku=302,_u=303,Pu=304,Du=306,Ou=1e3,Uu=1001,ju=1002,Ju=1003,Qu=1004,qu=1004,$u=1005,eg=1005,tg=1006,ng=1007,ig=1007,rg=1008,ag=1008,og=1009,sg=1010,lg=1011,cg=1012,ug=1013,gg=1014,dg=1015,hg=1016,fg=1017,pg=1018,Ig=1020,Cg=1021,mg=1023,vg=1024,Ag=1025,bg=1026,yg=1027,Gg=1028,wg=1029,Bg=1030,xg=1031,Sg=1033,Zg=33776,kg=33777,Rg=33778,Wg=33779,Mg=35840,Vg=35841,Fg=35842,Ng=35843,Hg=36196,Tg=37492,Xg=37496,Yg=37808,Eg=37809,zg=37810,Lg=37811,Kg=37812,_g=37813,Pg=37814,Dg=37815,Og=37816,Ug=37817,jg=37818,Jg=37819,Qg=37820,qg=37821,$g=36492,ed=36283,td=36284,nd=36285,id=36286,rd=2200,ad=2201,od=2202,sd=2300,ld=2301,cd=2302,ud=2400,gd=2401,dd=2402,hd=2500,fd=2501,pd=0,Id=1,Cd=2,md=3e3,vd=3001,Ad=3200,bd=3201,yd=0,Gd=1,wd="",Bd="srgb",xd="srgb-linear",Sd="display-p3",Zd=0,kd=7680,Rd=7681,Wd=7682,Md=7683,Vd=34055,Fd=34056,Nd=5386,Hd=512,Td=513,Xd=514,Yd=515,Ed=516,zd=517,Ld=518,Kd=519,_d=35044,Pd=35048,Dd=35040,Od=35045,Ud=35049,jd=35041,Jd=35046,Qd=35050,qd=35042,$d="100",eh="300 es",th=1035,nh=function(){function e(){ka(this,e)}return Xe(e,[{key:"addEventListener",value:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}},{key:"hasEventListener",value:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}},{key:"removeEventListener",value:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var i=n.indexOf(t);-1!==i&&n.splice(i,1)}}}},{key:"dispatchEvent",value:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),i=0,r=n.length;i<r;i++)n[i].call(this,e);e.target=null}}}}]),e}(),ih=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],rh=1234567,ah=Math.PI/180,oh=180/Math.PI;function sh(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(ih[255&e]+ih[e>>8&255]+ih[e>>16&255]+ih[e>>24&255]+"-"+ih[255&t]+ih[t>>8&255]+"-"+ih[t>>16&15|64]+ih[t>>24&255]+"-"+ih[63&n|128]+ih[n>>8&255]+"-"+ih[n>>16&255]+ih[n>>24&255]+ih[255&i]+ih[i>>8&255]+ih[i>>16&255]+ih[i>>24&255]).toLowerCase()}function lh(e,t,n){return Math.max(t,Math.min(n,e))}function ch(e,t){return(e%t+t)%t}function uh(e,t,n){return(1-n)*e+n*t}function gh(e){return 0===(e&e-1)&&0!==e}function dh(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function hh(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function fh(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function ph(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}var Ih={DEG2RAD:ah,RAD2DEG:oh,generateUUID:sh,clamp:lh,euclideanModulo:ch,mapLinear:function(e,t,n,i,r){return i+(e-t)*(r-i)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:uh,damp:function(e,t,n,i){return uh(e,t,1-Math.exp(-n*i))},pingpong:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t-Math.abs(ch(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(rh=e);var t=rh+=1831565813;return t=Math.imul(t^t>>>15,1|t),(((t^=t+Math.imul(t^t>>>7,61|t))^t>>>14)>>>0)/4294967296},degToRad:function(e){return e*ah},radToDeg:function(e){return e*oh},isPowerOfTwo:gh,ceilPowerOfTwo:dh,floorPowerOfTwo:hh,setQuaternionFromProperEuler:function(e,t,n,i,r){var a=Math.cos,o=Math.sin,s=a(n/2),l=o(n/2),c=a((t+i)/2),u=o((t+i)/2),g=a((t-i)/2),d=o((t-i)/2),h=a((i-t)/2),f=o((i-t)/2);switch(r){case"XYX":e.set(s*u,l*g,l*d,s*c);break;case"YZY":e.set(l*d,s*u,l*g,s*c);break;case"ZXZ":e.set(l*g,l*d,s*u,s*c);break;case"XZX":e.set(s*u,l*f,l*h,s*c);break;case"YXY":e.set(l*h,s*u,l*f,s*c);break;case"ZYZ":e.set(l*f,l*h,s*u,s*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}},normalize:ph,denormalize:fh},Ch=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;ka(this,t),t.prototype.isVector2=!0,this.x=e,this.y=n}return Xe(t,[{key:"width",get:function(){return this.x},set:function(e){this.x=e}},{key:"height",get:function(){return this.y},set:function(e){this.y=e}},{key:"set",value:function(e,t){return this.x=e,this.y=t,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"cross",value:function(e){return this.x*e.y-this.y*e.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){var e=Math.atan2(-this.y,-this.x)+Math.PI;return e}},{key:"angleTo",value:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;var n=this.dot(e)/t;return Math.acos(lh(n,-1,1))}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}},{key:"fromBufferAttribute",value:function(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}},{key:"rotateAround",value:function(e,t){var n=Math.cos(t),i=Math.sin(t),r=this.x-e.x,a=this.y-e.y;return this.x=r*n-a*i+e.x,this.y=r*i+a*n+e.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}},{key:Symbol.iterator,value:Ec().mark((function e(){return Ec().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:case"end":return e.stop()}}),e,this)}))}]),t}(),mh=function(){function e(){ka(this,e),e.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}return Xe(e,[{key:"set",value:function(e,t,n,i,r,a,o,s,l){var c=this.elements;return c[0]=e,c[1]=i,c[2]=o,c[3]=t,c[4]=r,c[5]=s,c[6]=n,c[7]=a,c[8]=l,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}},{key:"setFromMatrix4",value:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,i=t.elements,r=this.elements,a=n[0],o=n[3],s=n[6],l=n[1],c=n[4],u=n[7],g=n[2],d=n[5],h=n[8],f=i[0],p=i[3],I=i[6],C=i[1],m=i[4],v=i[7],A=i[2],b=i[5],y=i[8];return r[0]=a*f+o*C+s*A,r[3]=a*p+o*m+s*b,r[6]=a*I+o*v+s*y,r[1]=l*f+c*C+u*A,r[4]=l*p+c*m+u*b,r[7]=l*I+c*v+u*y,r[2]=g*f+d*C+h*A,r[5]=g*p+d*m+h*b,r[8]=g*I+d*v+h*y,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],o=e[5],s=e[6],l=e[7],c=e[8];return t*a*c-t*o*l-n*r*c+n*o*s+i*r*l-i*a*s}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],o=e[5],s=e[6],l=e[7],c=e[8],u=c*a-o*l,g=o*s-c*r,d=l*r-a*s,h=t*u+n*g+i*d;if(0===h)return this.set(0,0,0,0,0,0,0,0,0);var f=1/h;return e[0]=u*f,e[1]=(i*l-c*n)*f,e[2]=(o*n-i*a)*f,e[3]=g*f,e[4]=(c*t-i*s)*f,e[5]=(i*r-o*t)*f,e[6]=d*f,e[7]=(n*s-l*t)*f,e[8]=(a*t-n*r)*f,this}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}},{key:"getNormalMatrix",value:function(e){return this.setFromMatrix4(e).invert().transpose()}},{key:"transposeIntoArray",value:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}},{key:"setUvTransform",value:function(e,t,n,i,r,a,o){var s=Math.cos(r),l=Math.sin(r);return this.set(n*s,n*l,-n*(s*a+l*o)+a+e,-i*l,i*s,-i*(-l*a+s*o)+o+t,0,0,1),this}},{key:"scale",value:function(e,t){return this.premultiply(vh.makeScale(e,t)),this}},{key:"rotate",value:function(e){return this.premultiply(vh.makeRotation(-e)),this}},{key:"translate",value:function(e,t){return this.premultiply(vh.makeTranslation(e,t)),this}},{key:"makeTranslation",value:function(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}},{key:"makeRotation",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}},{key:"makeScale",value:function(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<9;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}},{key:"clone",value:function(){return(new this.constructor).fromArray(this.elements)}}]),e}(),vh=new mh;function Ah(e){for(var t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}var bh={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function yh(e,t){return new bh[e](t)}function Gh(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function wh(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function Bh(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}var xh=(new mh).fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),Sh=(new mh).fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);var Zh,kh=(ke(Ac={},xd,(function(e){return e})),ke(Ac,Bd,(function(e){return e.convertSRGBToLinear()})),ke(Ac,Sd,(function(e){return e.convertSRGBToLinear().applyMatrix3(Sh)})),Ac),Rh=(ke(bc={},xd,(function(e){return e})),ke(bc,Bd,(function(e){return e.convertLinearToSRGB()})),ke(bc,Sd,(function(e){return e.applyMatrix3(xh).convertLinearToSRGB()})),bc),Wh={enabled:!1,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(e){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!e},get workingColorSpace(){return xd},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,n){if(!1===this.enabled||t===n||!t||!n)return e;var i=kh[t],r=Rh[n];if(void 0===i||void 0===r)throw new Error('Unsupported color space conversion, "'.concat(t,'" to "').concat(n,'".'));return r(i(e))},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}},Mh=function(){function e(){ka(this,e)}return Xe(e,null,[{key:"getDataURL",value:function(e){if(/^data:/i.test(e.src))return e.src;if("undefined"===typeof HTMLCanvasElement)return e.src;var t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Zh&&(Zh=Gh("canvas")),Zh.width=e.width,Zh.height=e.height;var n=Zh.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Zh}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}},{key:"sRGBToLinear",value:function(e){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){var t=Gh("canvas");t.width=e.width,t.height=e.height;var n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);for(var i=n.getImageData(0,0,e.width,e.height),r=i.data,a=0;a<r.length;a++)r[a]=255*wh(r[a]/255);return n.putImageData(i,0,0),t}if(e.data){for(var o=e.data.slice(0),s=0;s<o.length;s++)o instanceof Uint8Array||o instanceof Uint8ClampedArray?o[s]=Math.floor(255*wh(o[s]/255)):o[s]=wh(o[s]);return{data:o,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}]),e}(),Vh=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;ka(this,e),this.isSource=!0,this.uuid=sh(),this.data=t,this.version=0}return Xe(e,[{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];var n={uuid:this.uuid,url:""},i=this.data;if(null!==i){var r;if(Array.isArray(i)){r=[];for(var a=0,o=i.length;a<o;a++)i[a].isDataTexture?r.push(Fh(i[a].image)):r.push(Fh(i[a]))}else r=Fh(i);n.url=r}return t||(e.images[this.uuid]=n),n}}]),e}();function Fh(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?Mh.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var Nh=0,Hh=function(e){kc(n,e);var t=Vc(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.DEFAULT_IMAGE,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.DEFAULT_MAPPING,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Uu,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Uu,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:tg,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:rg,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:mg,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:og,g=arguments.length>8&&void 0!==arguments[8]?arguments[8]:n.DEFAULT_ANISOTROPY,d=arguments.length>9&&void 0!==arguments[9]?arguments[9]:md;return ka(this,n),(e=t.call(this)).isTexture=!0,Object.defineProperty(Ye(e),"id",{value:Nh++}),e.uuid=sh(),e.name="",e.source=new Vh(i),e.mipmaps=[],e.mapping=r,e.channel=0,e.wrapS=a,e.wrapT=o,e.magFilter=s,e.minFilter=l,e.anisotropy=g,e.format=c,e.internalFormat=null,e.type=u,e.offset=new Ch(0,0),e.repeat=new Ch(1,1),e.center=new Ch(0,0),e.rotation=0,e.matrixAutoUpdate=!0,e.matrix=new mh,e.generateMipmaps=!0,e.premultiplyAlpha=!1,e.flipY=!0,e.unpackAlignment=4,e.encoding=d,e.userData={},e.version=0,e.onUpdate=null,e.isRenderTargetTexture=!1,e.needsPMREMUpdate=!1,e}return Xe(n,[{key:"image",get:function(){return this.source.data},set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.source.data=e}},{key:"updateMatrix",value:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"transformUv",value:function(e){if(this.mapping!==zu)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ou:e.x=e.x-Math.floor(e.x);break;case Uu:e.x=e.x<0?0:1;break;case ju:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case Ou:e.y=e.y-Math.floor(e.y);break;case Uu:e.y=e.y<0?0:1;break;case ju:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}},{key:"needsUpdate",set:function(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}}]),n}(nh);Hh.DEFAULT_IMAGE=null,Hh.DEFAULT_MAPPING=zu,Hh.DEFAULT_ANISOTROPY=1;var Th=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;ka(this,t),t.prototype.isVector4=!0,this.x=e,this.y=n,this.z=i,this.w=r}return Xe(t,[{key:"width",get:function(){return this.z},set:function(e){this.z=e}},{key:"height",get:function(){return this.w},set:function(e){this.w=e}},{key:"set",value:function(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setW",value:function(e){return this.w=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,i=this.z,r=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*i+a[12]*r,this.y=a[1]*t+a[5]*n+a[9]*i+a[13]*r,this.z=a[2]*t+a[6]*n+a[10]*i+a[14]*r,this.w=a[3]*t+a[7]*n+a[11]*i+a[15]*r,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"setAxisAngleFromQuaternion",value:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}},{key:"setAxisAngleFromRotationMatrix",value:function(e){var t,n,i,r,a=.01,o=.1,s=e.elements,l=s[0],c=s[4],u=s[8],g=s[1],d=s[5],h=s[9],f=s[2],p=s[6],I=s[10];if(Math.abs(c-g)<a&&Math.abs(u-f)<a&&Math.abs(h-p)<a){if(Math.abs(c+g)<o&&Math.abs(u+f)<o&&Math.abs(h+p)<o&&Math.abs(l+d+I-3)<o)return this.set(1,0,0,0),this;t=Math.PI;var C=(l+1)/2,m=(d+1)/2,v=(I+1)/2,A=(c+g)/4,b=(u+f)/4,y=(h+p)/4;return C>m&&C>v?C<a?(n=0,i=.707106781,r=.707106781):(i=A/(n=Math.sqrt(C)),r=b/n):m>v?m<a?(n=.707106781,i=0,r=.707106781):(n=A/(i=Math.sqrt(m)),r=y/i):v<a?(n=.707106781,i=.707106781,r=0):(n=b/(r=Math.sqrt(v)),i=y/r),this.set(n,i,r,t),this}var G=Math.sqrt((p-h)*(p-h)+(u-f)*(u-f)+(g-c)*(g-c));return Math.abs(G)<.001&&(G=1),this.x=(p-h)/G,this.y=(u-f)/G,this.z=(g-c)/G,this.w=Math.acos((l+d+I-1)/2),this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}},{key:"fromBufferAttribute",value:function(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}},{key:Symbol.iterator,value:Ec().mark((function e(){return Ec().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:return e.next=8,this.w;case 8:case"end":return e.stop()}}),e,this)}))}]),t}(),Xh=function(e){kc(n,e);var t=Vc(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ka(this,n),(e=t.call(this)).isWebGLRenderTarget=!0,e.width=i,e.height=r,e.depth=1,e.scissor=new Th(0,0,i,r),e.scissorTest=!1,e.viewport=new Th(0,0,i,r);var o={width:i,height:r,depth:1};return e.texture=new Hh(o,a.mapping,a.wrapS,a.wrapT,a.magFilter,a.minFilter,a.format,a.type,a.anisotropy,a.encoding),e.texture.isRenderTargetTexture=!0,e.texture.flipY=!1,e.texture.generateMipmaps=void 0!==a.generateMipmaps&&a.generateMipmaps,e.texture.internalFormat=void 0!==a.internalFormat?a.internalFormat:null,e.texture.minFilter=void 0!==a.minFilter?a.minFilter:tg,e.depthBuffer=void 0===a.depthBuffer||a.depthBuffer,e.stencilBuffer=void 0!==a.stencilBuffer&&a.stencilBuffer,e.depthTexture=void 0!==a.depthTexture?a.depthTexture:null,e.samples=void 0!==a.samples?a.samples:0,e}return Xe(n,[{key:"setSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;var t=Object.assign({},e.texture.image);return this.texture.source=new Vh(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(nh),Yh=function(e){kc(n,e);var t=Vc(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return ka(this,n),(e=t.call(this,null)).isDataArrayTexture=!0,e.image={data:i,width:r,height:a,depth:o},e.magFilter=Ju,e.minFilter=Ju,e.wrapR=Uu,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return Xe(n)}(Hh),Eh=function(e){kc(n,e);var t=Vc(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return ka(this,n),(e=t.call(this,i,r)).isWebGLArrayRenderTarget=!0,e.depth=a,e.texture=new Yh(null,i,r,a),e.texture.isRenderTargetTexture=!0,e}return Xe(n)}(Xh),zh=function(e){kc(n,e);var t=Vc(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return ka(this,n),(e=t.call(this,null)).isData3DTexture=!0,e.image={data:i,width:r,height:a,depth:o},e.magFilter=Ju,e.minFilter=Ju,e.wrapR=Uu,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return Xe(n)}(Hh),Lh=function(e){kc(n,e);var t=Vc(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return ka(this,n),(e=t.call(this,i,r)).isWebGL3DRenderTarget=!0,e.depth=a,e.texture=new zh(null,i,r,a),e.texture.isRenderTargetTexture=!0,e}return Xe(n)}(Xh),Kh=function(e){kc(n,e);var t=Vc(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};ka(this,n),(e=t.call(this,i,r,o)).isWebGLMultipleRenderTargets=!0;var s=e.texture;e.texture=[];for(var l=0;l<a;l++)e.texture[l]=s.clone(),e.texture[l].isRenderTargetTexture=!0;return e}return Xe(n,[{key:"setSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(var i=0,r=this.texture.length;i<r;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}},{key:"copy",value:function(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(var t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}]),n}(Xh),_h=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;ka(this,t),this.isQuaternion=!0,this._x=e,this._y=n,this._z=i,this._w=r}return Xe(t,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function(e,t){var n=e._x,i=e._y,r=e._z,a=e._order,o=Math.cos,s=Math.sin,l=o(n/2),c=o(i/2),u=o(r/2),g=s(n/2),d=s(i/2),h=s(r/2);switch(a){case"XYZ":this._x=g*c*u+l*d*h,this._y=l*d*u-g*c*h,this._z=l*c*h+g*d*u,this._w=l*c*u-g*d*h;break;case"YXZ":this._x=g*c*u+l*d*h,this._y=l*d*u-g*c*h,this._z=l*c*h-g*d*u,this._w=l*c*u+g*d*h;break;case"ZXY":this._x=g*c*u-l*d*h,this._y=l*d*u+g*c*h,this._z=l*c*h+g*d*u,this._w=l*c*u-g*d*h;break;case"ZYX":this._x=g*c*u-l*d*h,this._y=l*d*u+g*c*h,this._z=l*c*h-g*d*u,this._w=l*c*u+g*d*h;break;case"YZX":this._x=g*c*u+l*d*h,this._y=l*d*u+g*c*h,this._z=l*c*h-g*d*u,this._w=l*c*u-g*d*h;break;case"XZY":this._x=g*c*u-l*d*h,this._y=l*d*u-g*c*h,this._z=l*c*h+g*d*u,this._w=l*c*u+g*d*h;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==t&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(e,t){var n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=e.elements,n=t[0],i=t[4],r=t[8],a=t[1],o=t[5],s=t[9],l=t[2],c=t[6],u=t[10],g=n+o+u;if(g>0){var d=.5/Math.sqrt(g+1);this._w=.25/d,this._x=(c-s)*d,this._y=(r-l)*d,this._z=(a-i)*d}else if(n>o&&n>u){var h=2*Math.sqrt(1+n-o-u);this._w=(c-s)/h,this._x=.25*h,this._y=(i+a)/h,this._z=(r+l)/h}else if(o>u){var f=2*Math.sqrt(1+o-n-u);this._w=(r-l)/f,this._x=(i+a)/f,this._y=.25*f,this._z=(s+c)/f}else{var p=2*Math.sqrt(1+u-n-o);this._w=(a-i)/p,this._x=(r+l)/p,this._y=(s+c)/p,this._z=.25*p}return this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(e,t){var n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}},{key:"angleTo",value:function(e){return 2*Math.acos(Math.abs(lh(this.dot(e),-1,1)))}},{key:"rotateTowards",value:function(e,t){var n=this.angleTo(e);if(0===n)return this;var i=Math.min(1,t/n);return this.slerp(e,i),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}},{key:"multiply",value:function(e){return this.multiplyQuaternions(this,e)}},{key:"premultiply",value:function(e){return this.multiplyQuaternions(e,this)}},{key:"multiplyQuaternions",value:function(e,t){var n=e._x,i=e._y,r=e._z,a=e._w,o=t._x,s=t._y,l=t._z,c=t._w;return this._x=n*c+a*o+i*l-r*s,this._y=i*c+a*s+r*o-n*l,this._z=r*c+a*l+n*s-i*o,this._w=a*c-n*o-i*s-r*l,this._onChangeCallback(),this}},{key:"slerp",value:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,i=this._y,r=this._z,a=this._w,o=a*e._w+n*e._x+i*e._y+r*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=i,this._z=r,this;var s=1-o*o;if(s<=Number.EPSILON){var l=1-t;return this._w=l*a+t*this._w,this._x=l*n+t*this._x,this._y=l*i+t*this._y,this._z=l*r+t*this._z,this.normalize(),this._onChangeCallback(),this}var c=Math.sqrt(s),u=Math.atan2(c,o),g=Math.sin((1-t)*u)/c,d=Math.sin(t*u)/c;return this._w=a*g+this._w*d,this._x=n*g+this._x*d,this._y=i*g+this._y*d,this._z=r*g+this._z*d,this._onChangeCallback(),this}},{key:"slerpQuaternions",value:function(e,t,n){return this.copy(e).slerp(t,n)}},{key:"random",value:function(){var e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),i=2*Math.PI*Math.random(),r=2*Math.PI*Math.random();return this.set(t*Math.cos(i),n*Math.sin(r),n*Math.cos(r),t*Math.sin(i))}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}},{key:"fromBufferAttribute",value:function(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}},{key:"toJSON",value:function(){return this.toArray()}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}},{key:Symbol.iterator,value:Ec().mark((function e(){return Ec().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._x;case 2:return e.next=4,this._y;case 4:return e.next=6,this._z;case 6:return e.next=8,this._w;case 8:case"end":return e.stop()}}),e,this)}))}],[{key:"slerpFlat",value:function(e,t,n,i,r,a,o){var s=n[i+0],l=n[i+1],c=n[i+2],u=n[i+3],g=r[a+0],d=r[a+1],h=r[a+2],f=r[a+3];if(0===o)return e[t+0]=s,e[t+1]=l,e[t+2]=c,void(e[t+3]=u);if(1===o)return e[t+0]=g,e[t+1]=d,e[t+2]=h,void(e[t+3]=f);if(u!==f||s!==g||l!==d||c!==h){var p=1-o,I=s*g+l*d+c*h+u*f,C=I>=0?1:-1,m=1-I*I;if(m>Number.EPSILON){var v=Math.sqrt(m),A=Math.atan2(v,I*C);p=Math.sin(p*A)/v,o=Math.sin(o*A)/v}var b=o*C;if(s=s*p+g*b,l=l*p+d*b,c=c*p+h*b,u=u*p+f*b,p===1-o){var y=1/Math.sqrt(s*s+l*l+c*c+u*u);s*=y,l*=y,c*=y,u*=y}}e[t]=s,e[t+1]=l,e[t+2]=c,e[t+3]=u}},{key:"multiplyQuaternionsFlat",value:function(e,t,n,i,r,a){var o=n[i],s=n[i+1],l=n[i+2],c=n[i+3],u=r[a],g=r[a+1],d=r[a+2],h=r[a+3];return e[t]=o*h+c*u+s*d-l*g,e[t+1]=s*h+c*g+l*u-o*d,e[t+2]=l*h+c*d+o*g-s*u,e[t+3]=c*h-o*u-s*g-l*d,e}}]),t}(),Ph=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;ka(this,t),t.prototype.isVector3=!0,this.x=e,this.y=n,this.z=i}return Xe(t,[{key:"set",value:function(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this}},{key:"multiplyVectors",value:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}},{key:"applyEuler",value:function(e){return this.applyQuaternion(Oh.setFromEuler(e))}},{key:"applyAxisAngle",value:function(e,t){return this.applyQuaternion(Oh.setFromAxisAngle(e,t))}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*i,this.y=r[1]*t+r[4]*n+r[7]*i,this.z=r[2]*t+r[5]*n+r[8]*i,this}},{key:"applyNormalMatrix",value:function(e){return this.applyMatrix3(e).normalize()}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements,a=1/(r[3]*t+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*i+r[12])*a,this.y=(r[1]*t+r[5]*n+r[9]*i+r[13])*a,this.z=(r[2]*t+r[6]*n+r[10]*i+r[14])*a,this}},{key:"applyQuaternion",value:function(e){var t=this.x,n=this.y,i=this.z,r=e.x,a=e.y,o=e.z,s=e.w,l=s*t+a*i-o*n,c=s*n+o*t-r*i,u=s*i+r*n-a*t,g=-r*t-a*n-o*i;return this.x=l*s+g*-r+c*-o-u*-a,this.y=c*s+g*-a+u*-r-l*-o,this.z=u*s+g*-o+l*-a-c*-r,this}},{key:"project",value:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}},{key:"unproject",value:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}},{key:"transformDirection",value:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*i,this.y=r[1]*t+r[5]*n+r[9]*i,this.z=r[2]*t+r[6]*n+r[10]*i,this.normalize()}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}},{key:"cross",value:function(e){return this.crossVectors(this,e)}},{key:"crossVectors",value:function(e,t){var n=e.x,i=e.y,r=e.z,a=t.x,o=t.y,s=t.z;return this.x=i*s-r*o,this.y=r*a-n*s,this.z=n*o-i*a,this}},{key:"projectOnVector",value:function(e){var t=e.lengthSq();if(0===t)return this.set(0,0,0);var n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}},{key:"projectOnPlane",value:function(e){return Dh.copy(this).projectOnVector(e),this.sub(Dh)}},{key:"reflect",value:function(e){return this.sub(Dh.copy(e).multiplyScalar(2*this.dot(e)))}},{key:"angleTo",value:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;var n=this.dot(e)/t;return Math.acos(lh(n,-1,1))}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}},{key:"setFromSpherical",value:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}},{key:"setFromSphericalCoords",value:function(e,t,n){var i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}},{key:"setFromCylindrical",value:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}},{key:"setFromCylindricalCoords",value:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}},{key:"setFromMatrixPosition",value:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}},{key:"setFromMatrixScale",value:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}},{key:"setFromMatrixColumn",value:function(e,t){return this.fromArray(e.elements,4*t)}},{key:"setFromMatrix3Column",value:function(e,t){return this.fromArray(e.elements,3*t)}},{key:"setFromEuler",value:function(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}},{key:"setFromColor",value:function(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}},{key:"fromBufferAttribute",value:function(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}},{key:"randomDirection",value:function(){var e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-Math.pow(e,2));return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}},{key:Symbol.iterator,value:Ec().mark((function e(){return Ec().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:case"end":return e.stop()}}),e,this)}))}]),t}(),Dh=new Ph,Oh=new _h,Uh=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ph(1/0,1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ph(-1/0,-1/0,-1/0);ka(this,e),this.isBox3=!0,this.min=t,this.max=n}return Xe(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromArray",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t+=3)this.expandByPoint(Jh.fromArray(e,t));return this}},{key:"setFromBufferAttribute",value:function(e){this.makeEmpty();for(var t=0,n=e.count;t<n;t++)this.expandByPoint(Jh.fromBufferAttribute(e,t));return this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=Jh.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"setFromObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(e,t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"getCenter",value:function(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"expandByObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.updateWorldMatrix(!1,!1),void 0!==e.boundingBox)null===e.boundingBox&&e.computeBoundingBox(),Qh.copy(e.boundingBox),Qh.applyMatrix4(e.matrixWorld),this.union(Qh);else{var n=e.geometry;if(void 0!==n)if(t&&void 0!==n.attributes&&void 0!==n.attributes.position)for(var i=n.attributes.position,r=0,a=i.count;r<a;r++)Jh.fromBufferAttribute(i,r).applyMatrix4(e.matrixWorld),this.expandByPoint(Jh);else null===n.boundingBox&&n.computeBoundingBox(),Qh.copy(n.boundingBox),Qh.applyMatrix4(e.matrixWorld),this.union(Qh)}for(var o=e.children,s=0,l=o.length;s<l;s++)this.expandByObject(o[s],t);return this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}},{key:"getParameter",value:function(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}},{key:"intersectsSphere",value:function(e){return this.clampPoint(e.center,Jh),Jh.distanceToSquared(e.center)<=e.radius*e.radius}},{key:"intersectsPlane",value:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}},{key:"intersectsTriangle",value:function(e){if(this.isEmpty())return!1;this.getCenter(af),of.subVectors(this.max,af),qh.subVectors(e.a,af),$h.subVectors(e.b,af),ef.subVectors(e.c,af),tf.subVectors($h,qh),nf.subVectors(ef,$h),rf.subVectors(qh,ef);var t=[0,-tf.z,tf.y,0,-nf.z,nf.y,0,-rf.z,rf.y,tf.z,0,-tf.x,nf.z,0,-nf.x,rf.z,0,-rf.x,-tf.y,tf.x,0,-nf.y,nf.x,0,-rf.y,rf.x,0];return!!cf(t,qh,$h,ef,of)&&(!!cf(t=[1,0,0,0,1,0,0,0,1],qh,$h,ef,of)&&(sf.crossVectors(tf,nf),cf(t=[sf.x,sf.y,sf.z],qh,$h,ef,of)))}},{key:"clampPoint",value:function(e,t){return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return this.clampPoint(e,Jh).distanceTo(e)}},{key:"getBoundingSphere",value:function(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(Jh).length()),e}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"applyMatrix4",value:function(e){return this.isEmpty()||(jh[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),jh[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),jh[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),jh[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),jh[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),jh[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),jh[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),jh[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(jh)),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}(),jh=[new Ph,new Ph,new Ph,new Ph,new Ph,new Ph,new Ph,new Ph],Jh=new Ph,Qh=new Uh,qh=new Ph,$h=new Ph,ef=new Ph,tf=new Ph,nf=new Ph,rf=new Ph,af=new Ph,of=new Ph,sf=new Ph,lf=new Ph;function cf(e,t,n,i,r){for(var a=0,o=e.length-3;a<=o;a+=3){lf.fromArray(e,a);var s=r.x*Math.abs(lf.x)+r.y*Math.abs(lf.y)+r.z*Math.abs(lf.z),l=t.dot(lf),c=n.dot(lf),u=i.dot(lf);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>s)return!1}return!0}var uf=new Uh,gf=new Ph,df=new Ph,hf=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ph,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;ka(this,e),this.center=t,this.radius=n}return Xe(e,[{key:"set",value:function(e,t){return this.center.copy(e),this.radius=t,this}},{key:"setFromPoints",value:function(e,t){var n=this.center;void 0!==t?n.copy(t):uf.setFromPoints(e).getCenter(n);for(var i=0,r=0,a=e.length;r<a;r++)i=Math.max(i,n.distanceToSquared(e[r]));return this.radius=Math.sqrt(i),this}},{key:"copy",value:function(e){return this.center.copy(e.center),this.radius=e.radius,this}},{key:"isEmpty",value:function(){return this.radius<0}},{key:"makeEmpty",value:function(){return this.center.set(0,0,0),this.radius=-1,this}},{key:"containsPoint",value:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}},{key:"distanceToPoint",value:function(e){return e.distanceTo(this.center)-this.radius}},{key:"intersectsSphere",value:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}},{key:"intersectsBox",value:function(e){return e.intersectsSphere(this)}},{key:"intersectsPlane",value:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}},{key:"clampPoint",value:function(e,t){var n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}},{key:"getBoundingBox",value:function(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}},{key:"applyMatrix4",value:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}},{key:"translate",value:function(e){return this.center.add(e),this}},{key:"expandByPoint",value:function(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;gf.subVectors(e,this.center);var t=gf.lengthSq();if(t>this.radius*this.radius){var n=Math.sqrt(t),i=.5*(n-this.radius);this.center.addScaledVector(gf,i/n),this.radius+=i}return this}},{key:"union",value:function(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(df.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(gf.copy(e.center).add(df)),this.expandByPoint(gf.copy(e.center).sub(df))),this)}},{key:"equals",value:function(e){return e.center.equals(this.center)&&e.radius===this.radius}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),ff=new Ph,pf=new Ph,If=new Ph,Cf=new Ph,mf=new Ph,vf=new Ph,Af=new Ph,bf=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ph,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ph(0,0,-1);ka(this,e),this.origin=t,this.direction=n}return Xe(e,[{key:"set",value:function(e,t){return this.origin.copy(e),this.direction.copy(t),this}},{key:"copy",value:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}},{key:"at",value:function(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}},{key:"lookAt",value:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this}},{key:"recast",value:function(e){return this.origin.copy(this.at(e,ff)),this}},{key:"closestPointToPoint",value:function(e,t){t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}},{key:"distanceToPoint",value:function(e){return Math.sqrt(this.distanceSqToPoint(e))}},{key:"distanceSqToPoint",value:function(e){var t=ff.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(ff.copy(this.origin).addScaledVector(this.direction,t),ff.distanceToSquared(e))}},{key:"distanceSqToSegment",value:function(e,t,n,i){pf.copy(e).add(t).multiplyScalar(.5),If.copy(t).sub(e).normalize(),Cf.copy(this.origin).sub(pf);var r,a,o,s,l=.5*e.distanceTo(t),c=-this.direction.dot(If),u=Cf.dot(this.direction),g=-Cf.dot(If),d=Cf.lengthSq(),h=Math.abs(1-c*c);if(h>0)if(a=c*u-g,s=l*h,(r=c*g-u)>=0)if(a>=-s)if(a<=s){var f=1/h;o=(r*=f)*(r+c*(a*=f)+2*u)+a*(c*r+a+2*g)+d}else a=l,o=-(r=Math.max(0,-(c*a+u)))*r+a*(a+2*g)+d;else a=-l,o=-(r=Math.max(0,-(c*a+u)))*r+a*(a+2*g)+d;else a<=-s?o=-(r=Math.max(0,-(-c*l+u)))*r+(a=r>0?-l:Math.min(Math.max(-l,-g),l))*(a+2*g)+d:a<=s?(r=0,o=(a=Math.min(Math.max(-l,-g),l))*(a+2*g)+d):o=-(r=Math.max(0,-(c*l+u)))*r+(a=r>0?l:Math.min(Math.max(-l,-g),l))*(a+2*g)+d;else a=c>0?-l:l,o=-(r=Math.max(0,-(c*a+u)))*r+a*(a+2*g)+d;return n&&n.copy(this.origin).addScaledVector(this.direction,r),i&&i.copy(pf).addScaledVector(If,a),o}},{key:"intersectSphere",value:function(e,t){ff.subVectors(e.center,this.origin);var n=ff.dot(this.direction),i=ff.dot(ff)-n*n,r=e.radius*e.radius;if(i>r)return null;var a=Math.sqrt(r-i),o=n-a,s=n+a;return s<0?null:o<0?this.at(s,t):this.at(o,t)}},{key:"intersectsSphere",value:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}},{key:"distanceToPlane",value:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}},{key:"intersectPlane",value:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}},{key:"intersectsPlane",value:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}},{key:"intersectBox",value:function(e,t){var n,i,r,a,o,s,l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,g=this.origin;return l>=0?(n=(e.min.x-g.x)*l,i=(e.max.x-g.x)*l):(n=(e.max.x-g.x)*l,i=(e.min.x-g.x)*l),c>=0?(r=(e.min.y-g.y)*c,a=(e.max.y-g.y)*c):(r=(e.max.y-g.y)*c,a=(e.min.y-g.y)*c),n>a||r>i?null:((r>n||isNaN(n))&&(n=r),(a<i||isNaN(i))&&(i=a),u>=0?(o=(e.min.z-g.z)*u,s=(e.max.z-g.z)*u):(o=(e.max.z-g.z)*u,s=(e.min.z-g.z)*u),n>s||o>i?null:((o>n||n!==n)&&(n=o),(s<i||i!==i)&&(i=s),i<0?null:this.at(n>=0?n:i,t)))}},{key:"intersectsBox",value:function(e){return null!==this.intersectBox(e,ff)}},{key:"intersectTriangle",value:function(e,t,n,i,r){mf.subVectors(t,e),vf.subVectors(n,e),Af.crossVectors(mf,vf);var a,o=this.direction.dot(Af);if(o>0){if(i)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}Cf.subVectors(this.origin,e);var s=a*this.direction.dot(vf.crossVectors(Cf,vf));if(s<0)return null;var l=a*this.direction.dot(mf.cross(Cf));if(l<0)return null;if(s+l>o)return null;var c=-a*Cf.dot(Af);return c<0?null:this.at(c/o,r)}},{key:"applyMatrix4",value:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}},{key:"equals",value:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),yf=function(){function e(){ka(this,e),e.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}return Xe(e,[{key:"set",value:function(e,t,n,i,r,a,o,s,l,c,u,g,d,h,f,p){var I=this.elements;return I[0]=e,I[4]=t,I[8]=n,I[12]=i,I[1]=r,I[5]=a,I[9]=o,I[13]=s,I[2]=l,I[6]=c,I[10]=u,I[14]=g,I[3]=d,I[7]=h,I[11]=f,I[15]=p,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"clone",value:function(){return(new e).fromArray(this.elements)}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}},{key:"copyPosition",value:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}},{key:"setFromMatrix3",value:function(e){var t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(e){var t=this.elements,n=e.elements,i=1/Gf.setFromMatrixColumn(e,0).length(),r=1/Gf.setFromMatrixColumn(e,1).length(),a=1/Gf.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromEuler",value:function(e){var t=this.elements,n=e.x,i=e.y,r=e.z,a=Math.cos(n),o=Math.sin(n),s=Math.cos(i),l=Math.sin(i),c=Math.cos(r),u=Math.sin(r);if("XYZ"===e.order){var g=a*c,d=a*u,h=o*c,f=o*u;t[0]=s*c,t[4]=-s*u,t[8]=l,t[1]=d+h*l,t[5]=g-f*l,t[9]=-o*s,t[2]=f-g*l,t[6]=h+d*l,t[10]=a*s}else if("YXZ"===e.order){var p=s*c,I=s*u,C=l*c,m=l*u;t[0]=p+m*o,t[4]=C*o-I,t[8]=a*l,t[1]=a*u,t[5]=a*c,t[9]=-o,t[2]=I*o-C,t[6]=m+p*o,t[10]=a*s}else if("ZXY"===e.order){var v=s*c,A=s*u,b=l*c,y=l*u;t[0]=v-y*o,t[4]=-a*u,t[8]=b+A*o,t[1]=A+b*o,t[5]=a*c,t[9]=y-v*o,t[2]=-a*l,t[6]=o,t[10]=a*s}else if("ZYX"===e.order){var G=a*c,w=a*u,B=o*c,x=o*u;t[0]=s*c,t[4]=B*l-w,t[8]=G*l+x,t[1]=s*u,t[5]=x*l+G,t[9]=w*l-B,t[2]=-l,t[6]=o*s,t[10]=a*s}else if("YZX"===e.order){var S=a*s,Z=a*l,k=o*s,R=o*l;t[0]=s*c,t[4]=R-S*u,t[8]=k*u+Z,t[1]=u,t[5]=a*c,t[9]=-o*c,t[2]=-l*c,t[6]=Z*u+k,t[10]=S-R*u}else if("XZY"===e.order){var W=a*s,M=a*l,V=o*s,F=o*l;t[0]=s*c,t[4]=-u,t[8]=l*c,t[1]=W*u+F,t[5]=a*c,t[9]=M*u-V,t[2]=V*u-M,t[6]=o*c,t[10]=F*u+W}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(e){return this.compose(Bf,e,xf)}},{key:"lookAt",value:function(e,t,n){var i=this.elements;return kf.subVectors(e,t),0===kf.lengthSq()&&(kf.z=1),kf.normalize(),Sf.crossVectors(n,kf),0===Sf.lengthSq()&&(1===Math.abs(n.z)?kf.x+=1e-4:kf.z+=1e-4,kf.normalize(),Sf.crossVectors(n,kf)),Sf.normalize(),Zf.crossVectors(kf,Sf),i[0]=Sf.x,i[4]=Zf.x,i[8]=kf.x,i[1]=Sf.y,i[5]=Zf.y,i[9]=kf.y,i[2]=Sf.z,i[6]=Zf.z,i[10]=kf.z,this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,i=t.elements,r=this.elements,a=n[0],o=n[4],s=n[8],l=n[12],c=n[1],u=n[5],g=n[9],d=n[13],h=n[2],f=n[6],p=n[10],I=n[14],C=n[3],m=n[7],v=n[11],A=n[15],b=i[0],y=i[4],G=i[8],w=i[12],B=i[1],x=i[5],S=i[9],Z=i[13],k=i[2],R=i[6],W=i[10],M=i[14],V=i[3],F=i[7],N=i[11],H=i[15];return r[0]=a*b+o*B+s*k+l*V,r[4]=a*y+o*x+s*R+l*F,r[8]=a*G+o*S+s*W+l*N,r[12]=a*w+o*Z+s*M+l*H,r[1]=c*b+u*B+g*k+d*V,r[5]=c*y+u*x+g*R+d*F,r[9]=c*G+u*S+g*W+d*N,r[13]=c*w+u*Z+g*M+d*H,r[2]=h*b+f*B+p*k+I*V,r[6]=h*y+f*x+p*R+I*F,r[10]=h*G+f*S+p*W+I*N,r[14]=h*w+f*Z+p*M+I*H,r[3]=C*b+m*B+v*k+A*V,r[7]=C*y+m*x+v*R+A*F,r[11]=C*G+m*S+v*W+A*N,r[15]=C*w+m*Z+v*M+A*H,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[4],i=e[8],r=e[12],a=e[1],o=e[5],s=e[9],l=e[13],c=e[2],u=e[6],g=e[10],d=e[14];return e[3]*(+r*s*u-i*l*u-r*o*g+n*l*g+i*o*d-n*s*d)+e[7]*(+t*s*d-t*l*g+r*a*g-i*a*d+i*l*c-r*s*c)+e[11]*(+t*l*u-t*o*d-r*a*u+n*a*d+r*o*c-n*l*c)+e[15]*(-i*o*c-t*s*u+t*o*g+i*a*u-n*a*g+n*s*c)}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}},{key:"setPosition",value:function(e,t,n){var i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],o=e[5],s=e[6],l=e[7],c=e[8],u=e[9],g=e[10],d=e[11],h=e[12],f=e[13],p=e[14],I=e[15],C=u*p*l-f*g*l+f*s*d-o*p*d-u*s*I+o*g*I,m=h*g*l-c*p*l-h*s*d+a*p*d+c*s*I-a*g*I,v=c*f*l-h*u*l+h*o*d-a*f*d-c*o*I+a*u*I,A=h*u*s-c*f*s-h*o*g+a*f*g+c*o*p-a*u*p,b=t*C+n*m+i*v+r*A;if(0===b)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var y=1/b;return e[0]=C*y,e[1]=(f*g*r-u*p*r-f*i*d+n*p*d+u*i*I-n*g*I)*y,e[2]=(o*p*r-f*s*r+f*i*l-n*p*l-o*i*I+n*s*I)*y,e[3]=(u*s*r-o*g*r-u*i*l+n*g*l+o*i*d-n*s*d)*y,e[4]=m*y,e[5]=(c*p*r-h*g*r+h*i*d-t*p*d-c*i*I+t*g*I)*y,e[6]=(h*s*r-a*p*r-h*i*l+t*p*l+a*i*I-t*s*I)*y,e[7]=(a*g*r-c*s*r+c*i*l-t*g*l-a*i*d+t*s*d)*y,e[8]=v*y,e[9]=(h*u*r-c*f*r-h*n*d+t*f*d+c*n*I-t*u*I)*y,e[10]=(a*f*r-h*o*r+h*n*l-t*f*l-a*n*I+t*o*I)*y,e[11]=(c*o*r-a*u*r-c*n*l+t*u*l+a*n*d-t*o*d)*y,e[12]=A*y,e[13]=(c*f*i-h*u*i+h*n*g-t*f*g-c*n*p+t*u*p)*y,e[14]=(h*o*i-a*f*i-h*n*s+t*f*s+a*n*p-t*o*p)*y,e[15]=(a*u*i-c*o*i+c*n*s-t*u*s-a*n*g+t*o*g)*y,this}},{key:"scale",value:function(e){var t=this.elements,n=e.x,i=e.y,r=e.z;return t[0]*=n,t[4]*=i,t[8]*=r,t[1]*=n,t[5]*=i,t[9]*=r,t[2]*=n,t[6]*=i,t[10]*=r,t[3]*=n,t[7]*=i,t[11]*=r,this}},{key:"getMaxScaleOnAxis",value:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}},{key:"makeTranslation",value:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}},{key:"makeRotationX",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}},{key:"makeRotationY",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(e,t){var n=Math.cos(t),i=Math.sin(t),r=1-n,a=e.x,o=e.y,s=e.z,l=r*a,c=r*o;return this.set(l*a+n,l*o-i*s,l*s+i*o,0,l*o+i*s,c*o+n,c*s-i*a,0,l*s-i*o,c*s+i*a,r*s*s+n,0,0,0,0,1),this}},{key:"makeScale",value:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}},{key:"makeShear",value:function(e,t,n,i,r,a){return this.set(1,n,r,0,e,1,a,0,t,i,1,0,0,0,0,1),this}},{key:"compose",value:function(e,t,n){var i=this.elements,r=t._x,a=t._y,o=t._z,s=t._w,l=r+r,c=a+a,u=o+o,g=r*l,d=r*c,h=r*u,f=a*c,p=a*u,I=o*u,C=s*l,m=s*c,v=s*u,A=n.x,b=n.y,y=n.z;return i[0]=(1-(f+I))*A,i[1]=(d+v)*A,i[2]=(h-m)*A,i[3]=0,i[4]=(d-v)*b,i[5]=(1-(g+I))*b,i[6]=(p+C)*b,i[7]=0,i[8]=(h+m)*y,i[9]=(p-C)*y,i[10]=(1-(g+f))*y,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}},{key:"decompose",value:function(e,t,n){var i=this.elements,r=Gf.set(i[0],i[1],i[2]).length(),a=Gf.set(i[4],i[5],i[6]).length(),o=Gf.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),e.x=i[12],e.y=i[13],e.z=i[14],wf.copy(this);var s=1/r,l=1/a,c=1/o;return wf.elements[0]*=s,wf.elements[1]*=s,wf.elements[2]*=s,wf.elements[4]*=l,wf.elements[5]*=l,wf.elements[6]*=l,wf.elements[8]*=c,wf.elements[9]*=c,wf.elements[10]*=c,t.setFromRotationMatrix(wf),n.x=r,n.y=a,n.z=o,this}},{key:"makePerspective",value:function(e,t,n,i,r,a){var o=this.elements,s=2*r/(t-e),l=2*r/(n-i),c=(t+e)/(t-e),u=(n+i)/(n-i),g=-(a+r)/(a-r),d=-2*a*r/(a-r);return o[0]=s,o[4]=0,o[8]=c,o[12]=0,o[1]=0,o[5]=l,o[9]=u,o[13]=0,o[2]=0,o[6]=0,o[10]=g,o[14]=d,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}},{key:"makeOrthographic",value:function(e,t,n,i,r,a){var o=this.elements,s=1/(t-e),l=1/(n-i),c=1/(a-r),u=(t+e)*s,g=(n+i)*l,d=(a+r)*c;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-u,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-g,o[2]=0,o[6]=0,o[10]=-2*c,o[14]=-d,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<16;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}]),e}(),Gf=new Ph,wf=new yf,Bf=new Ph(0,0,0),xf=new Ph(1,1,1),Sf=new Ph,Zf=new Ph,kf=new Ph,Rf=new yf,Wf=new _h,Mf=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.DEFAULT_ORDER;ka(this,t),this.isEuler=!0,this._x=e,this._y=n,this._z=i,this._order=r}return Xe(t,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"order",get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:"copy",value:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=e.elements,r=i[0],a=i[4],o=i[8],s=i[1],l=i[5],c=i[9],u=i[2],g=i[6],d=i[10];switch(t){case"XYZ":this._y=Math.asin(lh(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-a,r)):(this._x=Math.atan2(g,l),this._z=0);break;case"YXZ":this._x=Math.asin(-lh(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(o,d),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-u,r),this._z=0);break;case"ZXY":this._x=Math.asin(lh(g,-1,1)),Math.abs(g)<.9999999?(this._y=Math.atan2(-u,d),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(s,r));break;case"ZYX":this._y=Math.asin(-lh(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(g,d),this._z=Math.atan2(s,r)):(this._x=0,this._z=Math.atan2(-a,l));break;case"YZX":this._z=Math.asin(lh(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,r)):(this._x=0,this._y=Math.atan2(o,d));break;case"XZY":this._z=Math.asin(-lh(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(g,l),this._y=Math.atan2(o,r)):(this._x=Math.atan2(-c,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}},{key:"setFromQuaternion",value:function(e,t,n){return Rf.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Rf,t,n)}},{key:"setFromVector3",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,t)}},{key:"reorder",value:function(e){return Wf.setFromEuler(this),this.setFromQuaternion(Wf,e)}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}},{key:"fromArray",value:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}},{key:Symbol.iterator,value:Ec().mark((function e(){return Ec().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._x;case 2:return e.next=4,this._y;case 4:return e.next=6,this._z;case 6:return e.next=8,this._order;case 8:case"end":return e.stop()}}),e,this)}))}]),t}();Mf.DEFAULT_ORDER="XYZ";var Vf=function(){function e(){ka(this,e),this.mask=1}return Xe(e,[{key:"set",value:function(e){this.mask=(1<<e|0)>>>0}},{key:"enable",value:function(e){this.mask|=1<<e|0}},{key:"enableAll",value:function(){this.mask=-1}},{key:"toggle",value:function(e){this.mask^=1<<e|0}},{key:"disable",value:function(e){this.mask&=~(1<<e|0)}},{key:"disableAll",value:function(){this.mask=0}},{key:"test",value:function(e){return 0!==(this.mask&e.mask)}},{key:"isEnabled",value:function(e){return 0!==(this.mask&(1<<e|0))}}]),e}(),Ff=0,Nf=new Ph,Hf=new _h,Tf=new yf,Xf=new Ph,Yf=new Ph,Ef=new Ph,zf=new _h,Lf=new Ph(1,0,0),Kf=new Ph(0,1,0),_f=new Ph(0,0,1),Pf={type:"added"},Df={type:"removed"},Of=function(e){kc(n,e);var t=Vc(n);function n(){var e;ka(this,n),(e=t.call(this)).isObject3D=!0,Object.defineProperty(Ye(e),"id",{value:Ff++}),e.uuid=sh(),e.name="",e.type="Object3D",e.parent=null,e.children=[],e.up=n.DEFAULT_UP.clone();var i=new Ph,r=new Mf,a=new _h,o=new Ph(1,1,1);return r._onChange((function(){a.setFromEuler(r,!1)})),a._onChange((function(){r.setFromQuaternion(a,void 0,!1)})),Object.defineProperties(Ye(e),{position:{configurable:!0,enumerable:!0,value:i},rotation:{configurable:!0,enumerable:!0,value:r},quaternion:{configurable:!0,enumerable:!0,value:a},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new yf},normalMatrix:{value:new mh}}),e.matrix=new yf,e.matrixWorld=new yf,e.matrixAutoUpdate=n.DEFAULT_MATRIX_AUTO_UPDATE,e.matrixWorldNeedsUpdate=!1,e.matrixWorldAutoUpdate=n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,e.layers=new Vf,e.visible=!0,e.castShadow=!1,e.receiveShadow=!1,e.frustumCulled=!0,e.renderOrder=0,e.animations=[],e.userData={},e}return Xe(n,[{key:"onBeforeRender",value:function(){}},{key:"onAfterRender",value:function(){}},{key:"applyMatrix4",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}},{key:"applyQuaternion",value:function(e){return this.quaternion.premultiply(e),this}},{key:"setRotationFromAxisAngle",value:function(e,t){this.quaternion.setFromAxisAngle(e,t)}},{key:"setRotationFromEuler",value:function(e){this.quaternion.setFromEuler(e,!0)}},{key:"setRotationFromMatrix",value:function(e){this.quaternion.setFromRotationMatrix(e)}},{key:"setRotationFromQuaternion",value:function(e){this.quaternion.copy(e)}},{key:"rotateOnAxis",value:function(e,t){return Hf.setFromAxisAngle(e,t),this.quaternion.multiply(Hf),this}},{key:"rotateOnWorldAxis",value:function(e,t){return Hf.setFromAxisAngle(e,t),this.quaternion.premultiply(Hf),this}},{key:"rotateX",value:function(e){return this.rotateOnAxis(Lf,e)}},{key:"rotateY",value:function(e){return this.rotateOnAxis(Kf,e)}},{key:"rotateZ",value:function(e){return this.rotateOnAxis(_f,e)}},{key:"translateOnAxis",value:function(e,t){return Nf.copy(e).applyQuaternion(this.quaternion),this.position.add(Nf.multiplyScalar(t)),this}},{key:"translateX",value:function(e){return this.translateOnAxis(Lf,e)}},{key:"translateY",value:function(e){return this.translateOnAxis(Kf,e)}},{key:"translateZ",value:function(e){return this.translateOnAxis(_f,e)}},{key:"localToWorld",value:function(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}},{key:"worldToLocal",value:function(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Tf.copy(this.matrixWorld).invert())}},{key:"lookAt",value:function(e,t,n){e.isVector3?Xf.copy(e):Xf.set(e,t,n);var i=this.parent;this.updateWorldMatrix(!0,!1),Yf.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Tf.lookAt(Yf,Xf,this.up):Tf.lookAt(Xf,Yf,this.up),this.quaternion.setFromRotationMatrix(Tf),i&&(Tf.extractRotation(i.matrixWorld),Hf.setFromRotationMatrix(Tf),this.quaternion.premultiply(Hf.invert()))}},{key:"add",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Pf)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}},{key:"remove",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(Df)),this}},{key:"removeFromParent",value:function(){var e=this.parent;return null!==e&&e.remove(this),this}},{key:"clear",value:function(){for(var e=0;e<this.children.length;e++){var t=this.children[e];t.parent=null,t.dispatchEvent(Df)}return this.children.length=0,this}},{key:"attach",value:function(e){return this.updateWorldMatrix(!0,!1),Tf.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Tf.multiply(e.parent.matrixWorld)),e.applyMatrix4(Tf),this.add(e),e.updateWorldMatrix(!1,!0),this}},{key:"getObjectById",value:function(e){return this.getObjectByProperty("id",e)}},{key:"getObjectByName",value:function(e){return this.getObjectByProperty("name",e)}},{key:"getObjectByProperty",value:function(e,t){if(this[e]===t)return this;for(var n=0,i=this.children.length;n<i;n++){var r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}}},{key:"getObjectsByProperty",value:function(e,t){var n=[];this[e]===t&&n.push(this);for(var i=0,r=this.children.length;i<r;i++){var a=this.children[i].getObjectsByProperty(e,t);a.length>0&&(n=n.concat(a))}return n}},{key:"getWorldPosition",value:function(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}},{key:"getWorldQuaternion",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Yf,e,Ef),e}},{key:"getWorldScale",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Yf,zf,e),e}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}},{key:"raycast",value:function(){}},{key:"traverse",value:function(e){e(this);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].traverse(e)}},{key:"traverseVisible",value:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}}},{key:"traverseAncestors",value:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}},{key:"updateMatrix",value:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}},{key:"updateMatrixWorld",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,i=t.length;n<i;n++){var r=t[n];!0!==r.matrixWorldAutoUpdate&&!0!==e||r.updateMatrixWorld(e)}}},{key:"updateWorldMatrix",value:function(e,t){var n=this.parent;if(!0===e&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var i=this.children,r=0,a=i.length;r<a;r++){var o=i[r];!0===o.matrixWorldAutoUpdate&&o.updateWorldMatrix(!1,!0)}}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var i={};function r(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(e.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){var o=a.shapes;if(Array.isArray(o))for(var s=0,l=o.length;s<l;s++){var c=o[s];r(e.shapes,c)}else r(e.shapes,o)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){for(var u=[],g=0,d=this.material.length;g<d;g++)u.push(r(e.materials,this.material[g]));i.material=u}else i.material=r(e.materials,this.material);if(this.children.length>0){i.children=[];for(var h=0;h<this.children.length;h++)i.children.push(this.children[h].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(var f=0;f<this.animations.length;f++){var p=this.animations[f];i.animations.push(r(e.animations,p))}}if(t){var I=w(e.geometries),C=w(e.materials),m=w(e.textures),v=w(e.images),A=w(e.shapes),b=w(e.skeletons),y=w(e.animations),G=w(e.nodes);I.length>0&&(n.geometries=I),C.length>0&&(n.materials=C),m.length>0&&(n.textures=m),v.length>0&&(n.images=v),A.length>0&&(n.shapes=A),b.length>0&&(n.skeletons=b),y.length>0&&(n.animations=y),G.length>0&&(n.nodes=G)}return n.object=i,n;function w(e){var t=[];for(var n in e){var i=e[n];delete i.metadata,t.push(i)}return t}}},{key:"clone",value:function(e){return(new this.constructor).copy(this,e)}},{key:"copy",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var i=e.children[n];this.add(i.clone())}return this}}]),n}(nh);Of.DEFAULT_UP=new Ph(0,1,0),Of.DEFAULT_MATRIX_AUTO_UPDATE=!0,Of.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;var Uf=new Ph,jf=new Ph,Jf=new Ph,Qf=new Ph,qf=new Ph,$f=new Ph,ep=new Ph,tp=new Ph,np=new Ph,ip=new Ph,rp=!1,ap=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ph,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ph,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Ph;ka(this,e),this.a=t,this.b=n,this.c=i}return Xe(e,[{key:"set",value:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}},{key:"setFromPointsAndIndices",value:function(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}},{key:"setFromAttributeAndIndices",value:function(e,t,n,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}},{key:"getArea",value:function(){return Uf.subVectors(this.c,this.b),jf.subVectors(this.a,this.b),.5*Uf.cross(jf).length()}},{key:"getMidpoint",value:function(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}},{key:"getNormal",value:function(t){return e.getNormal(this.a,this.b,this.c,t)}},{key:"getPlane",value:function(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}},{key:"getBarycoord",value:function(t,n){return e.getBarycoord(t,this.a,this.b,this.c,n)}},{key:"getUV",value:function(t,n,i,r,a){return!1===rp&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),rp=!0),e.getInterpolation(t,this.a,this.b,this.c,n,i,r,a)}},{key:"getInterpolation",value:function(t,n,i,r,a){return e.getInterpolation(t,this.a,this.b,this.c,n,i,r,a)}},{key:"containsPoint",value:function(t){return e.containsPoint(t,this.a,this.b,this.c)}},{key:"isFrontFacing",value:function(t){return e.isFrontFacing(this.a,this.b,this.c,t)}},{key:"intersectsBox",value:function(e){return e.intersectsTriangle(this)}},{key:"closestPointToPoint",value:function(e,t){var n,i,r=this.a,a=this.b,o=this.c;qf.subVectors(a,r),$f.subVectors(o,r),tp.subVectors(e,r);var s=qf.dot(tp),l=$f.dot(tp);if(s<=0&&l<=0)return t.copy(r);np.subVectors(e,a);var c=qf.dot(np),u=$f.dot(np);if(c>=0&&u<=c)return t.copy(a);var g=s*u-c*l;if(g<=0&&s>=0&&c<=0)return n=s/(s-c),t.copy(r).addScaledVector(qf,n);ip.subVectors(e,o);var d=qf.dot(ip),h=$f.dot(ip);if(h>=0&&d<=h)return t.copy(o);var f=d*l-s*h;if(f<=0&&l>=0&&h<=0)return i=l/(l-h),t.copy(r).addScaledVector($f,i);var p=c*h-d*u;if(p<=0&&u-c>=0&&d-h>=0)return ep.subVectors(o,a),i=(u-c)/(u-c+(d-h)),t.copy(a).addScaledVector(ep,i);var I=1/(p+f+g);return n=f*I,i=g*I,t.copy(r).addScaledVector(qf,n).addScaledVector($f,i)}},{key:"equals",value:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}],[{key:"getNormal",value:function(e,t,n,i){i.subVectors(n,t),Uf.subVectors(e,t),i.cross(Uf);var r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}},{key:"getBarycoord",value:function(e,t,n,i,r){Uf.subVectors(i,t),jf.subVectors(n,t),Jf.subVectors(e,t);var a=Uf.dot(Uf),o=Uf.dot(jf),s=Uf.dot(Jf),l=jf.dot(jf),c=jf.dot(Jf),u=a*l-o*o;if(0===u)return r.set(-2,-1,-1);var g=1/u,d=(l*s-o*c)*g,h=(a*c-o*s)*g;return r.set(1-d-h,h,d)}},{key:"containsPoint",value:function(e,t,n,i){return this.getBarycoord(e,t,n,i,Qf),Qf.x>=0&&Qf.y>=0&&Qf.x+Qf.y<=1}},{key:"getUV",value:function(e,t,n,i,r,a,o,s){return!1===rp&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),rp=!0),this.getInterpolation(e,t,n,i,r,a,o,s)}},{key:"getInterpolation",value:function(e,t,n,i,r,a,o,s){return this.getBarycoord(e,t,n,i,Qf),s.setScalar(0),s.addScaledVector(r,Qf.x),s.addScaledVector(a,Qf.y),s.addScaledVector(o,Qf.z),s}},{key:"isFrontFacing",value:function(e,t,n,i){return Uf.subVectors(n,t),jf.subVectors(e,t),Uf.cross(jf).dot(i)<0}}]),e}(),op=0,sp=function(e){kc(n,e);var t=Vc(n);function n(){var e;return ka(this,n),(e=t.call(this)).isMaterial=!0,Object.defineProperty(Ye(e),"id",{value:op++}),e.uuid=sh(),e.name="",e.type="Material",e.blending=iu,e.side=qc,e.vertexColors=!1,e.opacity=1,e.transparent=!1,e.blendSrc=Cu,e.blendDst=mu,e.blendEquation=lu,e.blendSrcAlpha=null,e.blendDstAlpha=null,e.blendEquationAlpha=null,e.depthFunc=Su,e.depthTest=!0,e.depthWrite=!0,e.stencilWriteMask=255,e.stencilFunc=Kd,e.stencilRef=0,e.stencilFuncMask=255,e.stencilFail=kd,e.stencilZFail=kd,e.stencilZPass=kd,e.stencilWrite=!1,e.clippingPlanes=null,e.clipIntersection=!1,e.clipShadows=!1,e.shadowSide=null,e.colorWrite=!0,e.precision=null,e.polygonOffset=!1,e.polygonOffsetFactor=0,e.polygonOffsetUnits=0,e.dithering=!1,e.alphaToCoverage=!1,e.premultipliedAlpha=!1,e.forceSinglePass=!1,e.visible=!0,e.toneMapped=!0,e.userData={},e.version=0,e._alphaTest=0,e}return Xe(n,[{key:"alphaTest",get:function(){return this._alphaTest},set:function(e){this._alphaTest>0!==e>0&&this.version++,this._alphaTest=e}},{key:"onBuild",value:function(){}},{key:"onBeforeRender",value:function(){}},{key:"onBeforeCompile",value:function(){}},{key:"customProgramCacheKey",value:function(){return this.onBeforeCompile.toString()}},{key:"setValues",value:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n){var i=this[t];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n:console.warn("THREE.Material: '".concat(t,"' is not a property of THREE.").concat(this.type,"."))}else console.warn("THREE.Material: parameter '".concat(t,"' has value of undefined."))}}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(e){var t=[];for(var n in e){var i=e[n];delete i.metadata,t.push(i)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==iu&&(n.blending=this.blending),this.side!==qc&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.forceSinglePass&&(n.forceSinglePass=this.forceSinglePass),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){var r=i(e.textures),a=i(e.images);r.length>0&&(n.textures=r),a.length>0&&(n.images=a)}return n}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;var t=e.clippingPlanes,n=null;if(null!==t){var i=t.length;n=new Array(i);for(var r=0;r!==i;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}}]),n}(nh),lp={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},cp={h:0,s:0,l:0},up={h:0,s:0,l:0};function gp(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}var dp=function(e){function t(e,n,i){return ka(this,t),this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===n&&void 0===i?this.set(e):this.setRGB(e,n,i)}return Xe(t,[{key:"set",value:function(e){return e&&e.isColor?this.copy(e):"number"===typeof e?this.setHex(e):"string"===typeof e&&this.setStyle(e),this}},{key:"setScalar",value:function(e){return this.r=e,this.g=e,this.b=e,this}},{key:"setHex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bd;return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,Wh.toWorkingColorSpace(this,t),this}},{key:"setRGB",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Wh.workingColorSpace;return this.r=e,this.g=t,this.b=n,Wh.toWorkingColorSpace(this,i),this}},{key:"setHSL",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Wh.workingColorSpace;if(e=ch(e,1),t=lh(t,0,1),n=lh(n,0,1),0===t)this.r=this.g=this.b=n;else{var r=n<=.5?n*(1+t):n+t-n*t,a=2*n-r;this.r=gp(a,r,e+1/3),this.g=gp(a,r,e),this.b=gp(a,r,e-1/3)}return Wh.toWorkingColorSpace(this,i),this}},{key:"setStyle",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bd;function i(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}if(t=/^(\w+)\(([^\)]*)\)/.exec(e)){var r,a=t[1],o=t[2];switch(a){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,Wh.toWorkingColorSpace(this,n),i(r[4]),this;if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,Wh.toWorkingColorSpace(this,n),i(r[4]),this;break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){var s=parseFloat(r[1])/360,l=parseFloat(r[2])/100,c=parseFloat(r[3])/100;return i(r[4]),this.setHSL(s,l,c,n)}break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(t=/^\#([A-Fa-f\d]+)$/.exec(e)){var u=t[1],g=u.length;if(3===g)return this.setRGB(parseInt(u.charAt(0),16)/15,parseInt(u.charAt(1),16)/15,parseInt(u.charAt(2),16)/15,n);if(6===g)return this.setHex(parseInt(u,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}},{key:"setColorName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bd,n=lp[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}},{key:"copySRGBToLinear",value:function(e){return this.r=wh(e.r),this.g=wh(e.g),this.b=wh(e.b),this}},{key:"copyLinearToSRGB",value:function(e){return this.r=Bh(e.r),this.g=Bh(e.g),this.b=Bh(e.b),this}},{key:"convertSRGBToLinear",value:function(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bd;return Wh.fromWorkingColorSpace(hp.copy(this),e),lh(255*hp.r,0,255)<<16^lh(255*hp.g,0,255)<<8^lh(255*hp.b,0,255)<<0}},{key:"getHexString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bd;return("000000"+this.getHex(e).toString(16)).slice(-6)}},{key:"getHSL",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Wh.workingColorSpace;Wh.fromWorkingColorSpace(hp.copy(this),t);var n,i,r=hp.r,a=hp.g,o=hp.b,s=Math.max(r,a,o),l=Math.min(r,a,o),c=(l+s)/2;if(l===s)n=0,i=0;else{var u=s-l;switch(i=c<=.5?u/(s+l):u/(2-s-l),s){case r:n=(a-o)/u+(a<o?6:0);break;case a:n=(o-r)/u+2;break;case o:n=(r-a)/u+4}n/=6}return e.h=n,e.s=i,e.l=c,e}},{key:"getRGB",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Wh.workingColorSpace;return Wh.fromWorkingColorSpace(hp.copy(this),t),e.r=hp.r,e.g=hp.g,e.b=hp.b,e}},{key:"getStyle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bd;Wh.fromWorkingColorSpace(hp.copy(this),e);var t=hp.r,n=hp.g,i=hp.b;return e!==Bd?"color(".concat(e," ").concat(t.toFixed(3)," ").concat(n.toFixed(3)," ").concat(i.toFixed(3),")"):"rgb(".concat(255*t|0,",").concat(255*n|0,",").concat(255*i|0,")")}},{key:"offsetHSL",value:function(e,t,n){return this.getHSL(cp),cp.h+=e,cp.s+=t,cp.l+=n,this.setHSL(cp.h,cp.s,cp.l),this}},{key:"add",value:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}},{key:"addColors",value:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}},{key:"addScalar",value:function(e){return this.r+=e,this.g+=e,this.b+=e,this}},{key:"sub",value:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}},{key:"multiply",value:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}},{key:"multiplyScalar",value:function(e){return this.r*=e,this.g*=e,this.b*=e,this}},{key:"lerp",value:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}},{key:"lerpColors",value:function(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}},{key:"lerpHSL",value:function(e,t){this.getHSL(cp),e.getHSL(up);var n=uh(cp.h,up.h,t),i=uh(cp.s,up.s,t),r=uh(cp.l,up.l,t);return this.setHSL(n,i,r),this}},{key:"setFromVector3",value:function(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}},{key:"applyMatrix3",value:function(e){var t=this.r,n=this.g,i=this.b,r=e.elements;return this.r=r[0]*t+r[3]*n+r[6]*i,this.g=r[1]*t+r[4]*n+r[7]*i,this.b=r[2]*t+r[5]*n+r[8]*i,this}},{key:"equals",value:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}},{key:"fromBufferAttribute",value:function(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}},{key:"toJSON",value:function(){return this.getHex()}},{key:Symbol.iterator,value:Ec().mark((function e(){return Ec().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.r;case 2:return e.next=4,this.g;case 4:return e.next=6,this.b;case 6:case"end":return e.stop()}}),e,this)}))}]),t}(),hp=new dp;dp.NAMES=lp;var fp=function(e){kc(n,e);var t=Vc(n);function n(e){var i;return ka(this,n),(i=t.call(this)).isMeshBasicMaterial=!0,i.type="MeshBasicMaterial",i.color=new dp(16777215),i.map=null,i.lightMap=null,i.lightMapIntensity=1,i.aoMap=null,i.aoMapIntensity=1,i.specularMap=null,i.alphaMap=null,i.envMap=null,i.combine=Mu,i.reflectivity=1,i.refractionRatio=.98,i.wireframe=!1,i.wireframeLinewidth=1,i.wireframeLinecap="round",i.wireframeLinejoin="round",i.fog=!0,i.setValues(e),i}return Xe(n,[{key:"copy",value:function(e){return Yc(Rc(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}]),n}(sp),pp=Ip();function Ip(){for(var e=new ArrayBuffer(4),t=new Float32Array(e),n=new Uint32Array(e),i=new Uint32Array(512),r=new Uint32Array(512),a=0;a<256;++a){var o=a-127;o<-27?(i[a]=0,i[256|a]=32768,r[a]=24,r[256|a]=24):o<-14?(i[a]=1024>>-o-14,i[256|a]=1024>>-o-14|32768,r[a]=-o-1,r[256|a]=-o-1):o<=15?(i[a]=o+15<<10,i[256|a]=o+15<<10|32768,r[a]=13,r[256|a]=13):o<128?(i[a]=31744,i[256|a]=64512,r[a]=24,r[256|a]=24):(i[a]=31744,i[256|a]=64512,r[a]=13,r[256|a]=13)}for(var s=new Uint32Array(2048),l=new Uint32Array(64),c=new Uint32Array(64),u=1;u<1024;++u){for(var g=u<<13,d=0;0===(8388608&g);)g<<=1,d-=8388608;g&=-8388609,d+=947912704,s[u]=g|d}for(var h=1024;h<2048;++h)s[h]=939524096+(h-1024<<13);for(var f=1;f<31;++f)l[f]=f<<23;l[31]=1199570944,l[32]=2147483648;for(var p=33;p<63;++p)l[p]=2147483648+(p-32<<23);l[63]=3347054592;for(var I=1;I<64;++I)32!==I&&(c[I]=1024);return{floatView:t,uint32View:n,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:l,offsetTable:c}}function Cp(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=lh(e,-65504,65504),pp.floatView[0]=e;var t=pp.uint32View[0],n=t>>23&511;return pp.baseTable[n]+((8388607&t)>>pp.shiftTable[n])}function mp(e){var t=e>>10;return pp.uint32View[0]=pp.mantissaTable[pp.offsetTable[t]+(1023&e)]+pp.exponentTable[t],pp.floatView[0]}var vp={toHalfFloat:Cp,fromHalfFloat:mp},Ap=new Ph,bp=new Ch,yp=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(ka(this,e),Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=n,this.count=void 0!==t?t.length/n:0,this.normalized=i,this.usage=_d,this.updateRange={offset:0,count:-1},this.version=0}return Xe(e,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var i=0,r=this.itemSize;i<r;i++)this.array[e+i]=t.array[n+i];return this}},{key:"copyArray",value:function(e){return this.array.set(e),this}},{key:"applyMatrix3",value:function(e){if(2===this.itemSize)for(var t=0,n=this.count;t<n;t++)bp.fromBufferAttribute(this,t),bp.applyMatrix3(e),this.setXY(t,bp.x,bp.y);else if(3===this.itemSize)for(var i=0,r=this.count;i<r;i++)Ap.fromBufferAttribute(this,i),Ap.applyMatrix3(e),this.setXYZ(i,Ap.x,Ap.y,Ap.z);return this}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.count;t<n;t++)Ap.fromBufferAttribute(this,t),Ap.applyMatrix4(e),this.setXYZ(t,Ap.x,Ap.y,Ap.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)Ap.fromBufferAttribute(this,t),Ap.applyNormalMatrix(e),this.setXYZ(t,Ap.x,Ap.y,Ap.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)Ap.fromBufferAttribute(this,t),Ap.transformDirection(e),this.setXYZ(t,Ap.x,Ap.y,Ap.z);return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"getX",value:function(e){var t=this.array[e*this.itemSize];return this.normalized&&(t=fh(t,this.array)),t}},{key:"setX",value:function(e,t){return this.normalized&&(t=ph(t,this.array)),this.array[e*this.itemSize]=t,this}},{key:"getY",value:function(e){var t=this.array[e*this.itemSize+1];return this.normalized&&(t=fh(t,this.array)),t}},{key:"setY",value:function(e,t){return this.normalized&&(t=ph(t,this.array)),this.array[e*this.itemSize+1]=t,this}},{key:"getZ",value:function(e){var t=this.array[e*this.itemSize+2];return this.normalized&&(t=fh(t,this.array)),t}},{key:"setZ",value:function(e,t){return this.normalized&&(t=ph(t,this.array)),this.array[e*this.itemSize+2]=t,this}},{key:"getW",value:function(e){var t=this.array[e*this.itemSize+3];return this.normalized&&(t=fh(t,this.array)),t}},{key:"setW",value:function(e,t){return this.normalized&&(t=ph(t,this.array)),this.array[e*this.itemSize+3]=t,this}},{key:"setXY",value:function(e,t,n){return e*=this.itemSize,this.normalized&&(t=ph(t,this.array),n=ph(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=ph(t,this.array),n=ph(n,this.array),i=ph(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}},{key:"setXYZW",value:function(e,t,n,i,r){return e*=this.itemSize,this.normalized&&(t=ph(t,this.array),n=ph(n,this.array),i=ph(i,this.array),r=ph(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=r,this}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"clone",value:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},{key:"toJSON",value:function(){var e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==_d&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}},{key:"copyColorsArray",value:function(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}},{key:"copyVector2sArray",value:function(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}},{key:"copyVector3sArray",value:function(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}},{key:"copyVector4sArray",value:function(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}]),e}(),Gp=function(e){kc(n,e);var t=Vc(n);function n(e,i,r){return ka(this,n),t.call(this,new Int8Array(e),i,r)}return Xe(n)}(yp),wp=function(e){kc(n,e);var t=Vc(n);function n(e,i,r){return ka(this,n),t.call(this,new Uint8Array(e),i,r)}return Xe(n)}(yp),Bp=function(e){kc(n,e);var t=Vc(n);function n(e,i,r){return ka(this,n),t.call(this,new Uint8ClampedArray(e),i,r)}return Xe(n)}(yp),xp=function(e){kc(n,e);var t=Vc(n);function n(e,i,r){return ka(this,n),t.call(this,new Int16Array(e),i,r)}return Xe(n)}(yp),Sp=function(e){kc(n,e);var t=Vc(n);function n(e,i,r){return ka(this,n),t.call(this,new Uint16Array(e),i,r)}return Xe(n)}(yp),Zp=function(e){kc(n,e);var t=Vc(n);function n(e,i,r){return ka(this,n),t.call(this,new Int32Array(e),i,r)}return Xe(n)}(yp),kp=function(e){kc(n,e);var t=Vc(n);function n(e,i,r){return ka(this,n),t.call(this,new Uint32Array(e),i,r)}return Xe(n)}(yp),Rp=function(e){kc(n,e);var t=Vc(n);function n(e,i,r){var a;return ka(this,n),(a=t.call(this,new Uint16Array(e),i,r)).isFloat16BufferAttribute=!0,a}return Xe(n,[{key:"getX",value:function(e){var t=mp(this.array[e*this.itemSize]);return this.normalized&&(t=fh(t,this.array)),t}},{key:"setX",value:function(e,t){return this.normalized&&(t=ph(t,this.array)),this.array[e*this.itemSize]=Cp(t),this}},{key:"getY",value:function(e){var t=mp(this.array[e*this.itemSize+1]);return this.normalized&&(t=fh(t,this.array)),t}},{key:"setY",value:function(e,t){return this.normalized&&(t=ph(t,this.array)),this.array[e*this.itemSize+1]=Cp(t),this}},{key:"getZ",value:function(e){var t=mp(this.array[e*this.itemSize+2]);return this.normalized&&(t=fh(t,this.array)),t}},{key:"setZ",value:function(e,t){return this.normalized&&(t=ph(t,this.array)),this.array[e*this.itemSize+2]=Cp(t),this}},{key:"getW",value:function(e){var t=mp(this.array[e*this.itemSize+3]);return this.normalized&&(t=fh(t,this.array)),t}},{key:"setW",value:function(e,t){return this.normalized&&(t=ph(t,this.array)),this.array[e*this.itemSize+3]=Cp(t),this}},{key:"setXY",value:function(e,t,n){return e*=this.itemSize,this.normalized&&(t=ph(t,this.array),n=ph(n,this.array)),this.array[e+0]=Cp(t),this.array[e+1]=Cp(n),this}},{key:"setXYZ",value:function(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=ph(t,this.array),n=ph(n,this.array),i=ph(i,this.array)),this.array[e+0]=Cp(t),this.array[e+1]=Cp(n),this.array[e+2]=Cp(i),this}},{key:"setXYZW",value:function(e,t,n,i,r){return e*=this.itemSize,this.normalized&&(t=ph(t,this.array),n=ph(n,this.array),i=ph(i,this.array),r=ph(r,this.array)),this.array[e+0]=Cp(t),this.array[e+1]=Cp(n),this.array[e+2]=Cp(i),this.array[e+3]=Cp(r),this}}]),n}(yp),Wp=function(e){kc(n,e);var t=Vc(n);function n(e,i,r){return ka(this,n),t.call(this,new Float32Array(e),i,r)}return Xe(n)}(yp),Mp=function(e){kc(n,e);var t=Vc(n);function n(e,i,r){return ka(this,n),t.call(this,new Float64Array(e),i,r)}return Xe(n)}(yp),Vp=0,Fp=new yf,Np=new Of,Hp=new Ph,Tp=new Uh,Xp=new Uh,Yp=new Ph,Ep=function(e){kc(n,e);var t=Vc(n);function n(){var e;return ka(this,n),(e=t.call(this)).isBufferGeometry=!0,Object.defineProperty(Ye(e),"id",{value:Vp++}),e.uuid=sh(),e.name="",e.type="BufferGeometry",e.index=null,e.attributes={},e.morphAttributes={},e.morphTargetsRelative=!1,e.groups=[],e.boundingBox=null,e.boundingSphere=null,e.drawRange={start:0,count:1/0},e.userData={},e}return Xe(n,[{key:"getIndex",value:function(){return this.index}},{key:"setIndex",value:function(e){return Array.isArray(e)?this.index=new(Ah(e)?kp:Sp)(e,1):this.index=e,this}},{key:"getAttribute",value:function(e){return this.attributes[e]}},{key:"setAttribute",value:function(e,t){return this.attributes[e]=t,this}},{key:"deleteAttribute",value:function(e){return delete this.attributes[e],this}},{key:"hasAttribute",value:function(e){return void 0!==this.attributes[e]}},{key:"addGroup",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:n})}},{key:"clearGroups",value:function(){this.groups=[]}},{key:"setDrawRange",value:function(e,t){this.drawRange.start=e,this.drawRange.count=t}},{key:"applyMatrix4",value:function(e){var t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var i=(new mh).getNormalMatrix(e);n.applyNormalMatrix(i),n.needsUpdate=!0}var r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}},{key:"applyQuaternion",value:function(e){return Fp.makeRotationFromQuaternion(e),this.applyMatrix4(Fp),this}},{key:"rotateX",value:function(e){return Fp.makeRotationX(e),this.applyMatrix4(Fp),this}},{key:"rotateY",value:function(e){return Fp.makeRotationY(e),this.applyMatrix4(Fp),this}},{key:"rotateZ",value:function(e){return Fp.makeRotationZ(e),this.applyMatrix4(Fp),this}},{key:"translate",value:function(e,t,n){return Fp.makeTranslation(e,t,n),this.applyMatrix4(Fp),this}},{key:"scale",value:function(e,t,n){return Fp.makeScale(e,t,n),this.applyMatrix4(Fp),this}},{key:"lookAt",value:function(e){return Np.lookAt(e),Np.updateMatrix(),this.applyMatrix4(Np.matrix),this}},{key:"center",value:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Hp).negate(),this.translate(Hp.x,Hp.y,Hp.z),this}},{key:"setFromPoints",value:function(e){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new Wp(t,3)),this}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new Uh);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Ph(-1/0,-1/0,-1/0),new Ph(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(var n=0,i=t.length;n<i;n++){var r=t[n];Tp.setFromBufferAttribute(r),this.morphTargetsRelative?(Yp.addVectors(this.boundingBox.min,Tp.min),this.boundingBox.expandByPoint(Yp),Yp.addVectors(this.boundingBox.max,Tp.max),this.boundingBox.expandByPoint(Yp)):(this.boundingBox.expandByPoint(Tp.min),this.boundingBox.expandByPoint(Tp.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new hf);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Ph,1/0);if(e){var n=this.boundingSphere.center;if(Tp.setFromBufferAttribute(e),t)for(var i=0,r=t.length;i<r;i++){var a=t[i];Xp.setFromBufferAttribute(a),this.morphTargetsRelative?(Yp.addVectors(Tp.min,Xp.min),Tp.expandByPoint(Yp),Yp.addVectors(Tp.max,Xp.max),Tp.expandByPoint(Yp)):(Tp.expandByPoint(Xp.min),Tp.expandByPoint(Xp.max))}Tp.getCenter(n);for(var o=0,s=0,l=e.count;s<l;s++)Yp.fromBufferAttribute(e,s),o=Math.max(o,n.distanceToSquared(Yp));if(t)for(var c=0,u=t.length;c<u;c++)for(var g=t[c],d=this.morphTargetsRelative,h=0,f=g.count;h<f;h++)Yp.fromBufferAttribute(g,h),d&&(Hp.fromBufferAttribute(e,h),Yp.add(Hp)),o=Math.max(o,n.distanceToSquared(Yp));this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}},{key:"computeTangents",value:function(){var e=this.index,t=this.attributes;if(null!==e&&void 0!==t.position&&void 0!==t.normal&&void 0!==t.uv){var n=e.array,i=t.position.array,r=t.normal.array,a=t.uv.array,o=i.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new yp(new Float32Array(4*o),4));for(var s=this.getAttribute("tangent").array,l=[],c=[],u=0;u<o;u++)l[u]=new Ph,c[u]=new Ph;var g=new Ph,d=new Ph,h=new Ph,f=new Ch,p=new Ch,I=new Ch,C=new Ph,m=new Ph,v=this.groups;0===v.length&&(v=[{start:0,count:n.length}]);for(var A=0,b=v.length;A<b;++A)for(var y=v[A],G=y.start,w=G,B=G+y.count;w<B;w+=3)H(n[w+0],n[w+1],n[w+2]);for(var x=new Ph,S=new Ph,Z=new Ph,k=new Ph,R=0,W=v.length;R<W;++R)for(var M=v[R],V=M.start,F=V,N=V+M.count;F<N;F+=3)T(n[F+0]),T(n[F+1]),T(n[F+2])}else console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");function H(e,t,n){g.fromArray(i,3*e),d.fromArray(i,3*t),h.fromArray(i,3*n),f.fromArray(a,2*e),p.fromArray(a,2*t),I.fromArray(a,2*n),d.sub(g),h.sub(g),p.sub(f),I.sub(f);var r=1/(p.x*I.y-I.x*p.y);isFinite(r)&&(C.copy(d).multiplyScalar(I.y).addScaledVector(h,-p.y).multiplyScalar(r),m.copy(h).multiplyScalar(p.x).addScaledVector(d,-I.x).multiplyScalar(r),l[e].add(C),l[t].add(C),l[n].add(C),c[e].add(m),c[t].add(m),c[n].add(m))}function T(e){Z.fromArray(r,3*e),k.copy(Z);var t=l[e];x.copy(t),x.sub(Z.multiplyScalar(Z.dot(t))).normalize(),S.crossVectors(k,t);var n=S.dot(c[e])<0?-1:1;s[4*e]=x.x,s[4*e+1]=x.y,s[4*e+2]=x.z,s[4*e+3]=n}}},{key:"computeVertexNormals",value:function(){var e=this.index,t=this.getAttribute("position");if(void 0!==t){var n=this.getAttribute("normal");if(void 0===n)n=new yp(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(var i=0,r=n.count;i<r;i++)n.setXYZ(i,0,0,0);var a=new Ph,o=new Ph,s=new Ph,l=new Ph,c=new Ph,u=new Ph,g=new Ph,d=new Ph;if(e)for(var h=0,f=e.count;h<f;h+=3){var p=e.getX(h+0),I=e.getX(h+1),C=e.getX(h+2);a.fromBufferAttribute(t,p),o.fromBufferAttribute(t,I),s.fromBufferAttribute(t,C),g.subVectors(s,o),d.subVectors(a,o),g.cross(d),l.fromBufferAttribute(n,p),c.fromBufferAttribute(n,I),u.fromBufferAttribute(n,C),l.add(g),c.add(g),u.add(g),n.setXYZ(p,l.x,l.y,l.z),n.setXYZ(I,c.x,c.y,c.z),n.setXYZ(C,u.x,u.y,u.z)}else for(var m=0,v=t.count;m<v;m+=3)a.fromBufferAttribute(t,m+0),o.fromBufferAttribute(t,m+1),s.fromBufferAttribute(t,m+2),g.subVectors(s,o),d.subVectors(a,o),g.cross(d),n.setXYZ(m+0,g.x,g.y,g.z),n.setXYZ(m+1,g.x,g.y,g.z),n.setXYZ(m+2,g.x,g.y,g.z);this.normalizeNormals(),n.needsUpdate=!0}}},{key:"merge",value:function(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeGeometries() instead."),this}},{key:"normalizeNormals",value:function(){for(var e=this.attributes.normal,t=0,n=e.count;t<n;t++)Yp.fromBufferAttribute(e,t),Yp.normalize(),e.setXYZ(t,Yp.x,Yp.y,Yp.z)}},{key:"toNonIndexed",value:function(){function e(e,t){for(var n=e.array,i=e.itemSize,r=e.normalized,a=new n.constructor(t.length*i),o=0,s=0,l=0,c=t.length;l<c;l++){o=e.isInterleavedBufferAttribute?t[l]*e.data.stride+e.offset:t[l]*i;for(var u=0;u<i;u++)a[s++]=n[o++]}return new yp(a,i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;var t=new n,i=this.index.array,r=this.attributes;for(var a in r){var o=e(r[a],i);t.setAttribute(a,o)}var s=this.morphAttributes;for(var l in s){for(var c=[],u=s[l],g=0,d=u.length;g<d;g++){var h=e(u[g],i);c.push(h)}t.morphAttributes[l]=c}t.morphTargetsRelative=this.morphTargetsRelative;for(var f=this.groups,p=0,I=f.length;p<I;p++){var C=f[p];t.addGroup(C.start,C.count,C.materialIndex)}return t}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var i=this.index;null!==i&&(e.data.index={type:i.array.constructor.name,array:Array.prototype.slice.call(i.array)});var r=this.attributes;for(var a in r){var o=r[a];e.data.attributes[a]=o.toJSON(e.data)}var s={},l=!1;for(var c in this.morphAttributes){for(var u=this.morphAttributes[c],g=[],d=0,h=u.length;d<h;d++){var f=u[d];g.push(f.toJSON(e.data))}g.length>0&&(s[c]=g,l=!0)}l&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);var p=this.groups;p.length>0&&(e.data.groups=JSON.parse(JSON.stringify(p)));var I=this.boundingSphere;return null!==I&&(e.data.boundingSphere={center:I.center.toArray(),radius:I.radius}),e}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var t={};this.name=e.name;var n=e.index;null!==n&&this.setIndex(n.clone(t));var i=e.attributes;for(var r in i){var a=i[r];this.setAttribute(r,a.clone(t))}var o=e.morphAttributes;for(var s in o){for(var l=[],c=o[s],u=0,g=c.length;u<g;u++)l.push(c[u].clone(t));this.morphAttributes[s]=l}this.morphTargetsRelative=e.morphTargetsRelative;for(var d=e.groups,h=0,f=d.length;h<f;h++){var p=d[h];this.addGroup(p.start,p.count,p.materialIndex)}var I=e.boundingBox;null!==I&&(this.boundingBox=I.clone());var C=e.boundingSphere;return null!==C&&(this.boundingSphere=C.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(nh),zp=new yf,Lp=new bf,Kp=new hf,_p=new Ph,Pp=new Ph,Dp=new Ph,Op=new Ph,Up=new Ph,jp=new Ph,Jp=new Ch,Qp=new Ch,qp=new Ch,$p=new Ph,eI=new Ph,tI=new Ph,nI=new Ph,iI=new Ph,rI=function(e){kc(n,e);var t=Vc(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ep,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new fp;return ka(this,n),(e=t.call(this)).isMesh=!0,e.type="Mesh",e.geometry=i,e.material=r,e.updateMorphTargets(),e}return Xe(n,[{key:"copy",value:function(e,t){return Yc(Rc(n.prototype),"copy",this).call(this,e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}},{key:"updateMorphTargets",value:function(){var e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){var n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,r=n.length;i<r;i++){var a=n[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=i}}}}},{key:"getVertexPosition",value:function(e,t){var n=this.geometry,i=n.attributes.position,r=n.morphAttributes.position,a=n.morphTargetsRelative;t.fromBufferAttribute(i,e);var o=this.morphTargetInfluences;if(r&&o){jp.set(0,0,0);for(var s=0,l=r.length;s<l;s++){var c=o[s],u=r[s];0!==c&&(Up.fromBufferAttribute(u,e),a?jp.addScaledVector(Up,c):jp.addScaledVector(Up.sub(t),c))}t.add(jp)}return this.isSkinnedMesh&&this.applyBoneTransform(e,t),t}},{key:"raycast",value:function(e,t){var n=this.geometry,i=this.material,r=this.matrixWorld;if(void 0!==i){if(null===n.boundingSphere&&n.computeBoundingSphere(),Kp.copy(n.boundingSphere),Kp.applyMatrix4(r),Lp.copy(e.ray).recast(e.near),!1===Kp.containsPoint(Lp.origin)){if(null===Lp.intersectSphere(Kp,_p))return;if(Lp.origin.distanceToSquared(_p)>Math.pow(e.far-e.near,2))return}if(zp.copy(r).invert(),Lp.copy(e.ray).applyMatrix4(zp),null===n.boundingBox||!1!==Lp.intersectsBox(n.boundingBox)){var a,o=n.index,s=n.attributes.position,l=n.attributes.uv,c=n.attributes.uv2,u=n.attributes.normal,g=n.groups,d=n.drawRange;if(null!==o)if(Array.isArray(i))for(var h=0,f=g.length;h<f;h++)for(var p=g[h],I=i[p.materialIndex],C=Math.max(p.start,d.start),m=Math.min(o.count,Math.min(p.start+p.count,d.start+d.count));C<m;C+=3){var v=o.getX(C),A=o.getX(C+1),b=o.getX(C+2);(a=aI(this,I,e,Lp,l,c,u,v,A,b))&&(a.faceIndex=Math.floor(C/3),a.face.materialIndex=p.materialIndex,t.push(a))}else for(var y=Math.max(0,d.start),G=Math.min(o.count,d.start+d.count);y<G;y+=3){var w=o.getX(y),B=o.getX(y+1),x=o.getX(y+2);(a=aI(this,i,e,Lp,l,c,u,w,B,x))&&(a.faceIndex=Math.floor(y/3),t.push(a))}else if(void 0!==s)if(Array.isArray(i))for(var S=0,Z=g.length;S<Z;S++)for(var k=g[S],R=i[k.materialIndex],W=Math.max(k.start,d.start),M=Math.min(s.count,Math.min(k.start+k.count,d.start+d.count));W<M;W+=3){(a=aI(this,R,e,Lp,l,c,u,W,W+1,W+2))&&(a.faceIndex=Math.floor(W/3),a.face.materialIndex=k.materialIndex,t.push(a))}else for(var V=Math.max(0,d.start),F=Math.min(s.count,d.start+d.count);V<F;V+=3){(a=aI(this,i,e,Lp,l,c,u,V,V+1,V+2))&&(a.faceIndex=Math.floor(V/3),t.push(a))}}}}}]),n}(Of);function aI(e,t,n,i,r,a,o,s,l,c){e.getVertexPosition(s,Pp),e.getVertexPosition(l,Dp),e.getVertexPosition(c,Op);var u=function(e,t,n,i,r,a,o,s){if(null===(t.side===$c?i.intersectTriangle(o,a,r,!0,s):i.intersectTriangle(r,a,o,t.side===qc,s)))return null;iI.copy(s),iI.applyMatrix4(e.matrixWorld);var l=n.ray.origin.distanceTo(iI);return l<n.near||l>n.far?null:{distance:l,point:iI.clone(),object:e}}(e,t,n,i,Pp,Dp,Op,nI);if(u){r&&(Jp.fromBufferAttribute(r,s),Qp.fromBufferAttribute(r,l),qp.fromBufferAttribute(r,c),u.uv=ap.getInterpolation(nI,Pp,Dp,Op,Jp,Qp,qp,new Ch)),a&&(Jp.fromBufferAttribute(a,s),Qp.fromBufferAttribute(a,l),qp.fromBufferAttribute(a,c),u.uv2=ap.getInterpolation(nI,Pp,Dp,Op,Jp,Qp,qp,new Ch)),o&&($p.fromBufferAttribute(o,s),eI.fromBufferAttribute(o,l),tI.fromBufferAttribute(o,c),u.normal=ap.getInterpolation(nI,Pp,Dp,Op,$p,eI,tI,new Ph),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));var g={a:s,b:l,c:c,normal:new Ph,materialIndex:0};ap.getNormal(Pp,Dp,Op,g.normal),u.face=g}return u}var oI=function(e){kc(n,e);var t=Vc(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;ka(this,n),(e=t.call(this)).type="BoxGeometry",e.parameters={width:i,height:r,depth:a,widthSegments:o,heightSegments:s,depthSegments:l};var c=Ye(e);o=Math.floor(o),s=Math.floor(s),l=Math.floor(l);var u=[],g=[],d=[],h=[],f=0,p=0;function I(e,t,n,i,r,a,o,s,l,I,C){for(var m=a/l,v=o/I,A=a/2,b=o/2,y=s/2,G=l+1,w=I+1,B=0,x=0,S=new Ph,Z=0;Z<w;Z++)for(var k=Z*v-b,R=0;R<G;R++){var W=R*m-A;S[e]=W*i,S[t]=k*r,S[n]=y,g.push(S.x,S.y,S.z),S[e]=0,S[t]=0,S[n]=s>0?1:-1,d.push(S.x,S.y,S.z),h.push(R/l),h.push(1-Z/I),B+=1}for(var M=0;M<I;M++)for(var V=0;V<l;V++){var F=f+V+G*M,N=f+V+G*(M+1),H=f+(V+1)+G*(M+1),T=f+(V+1)+G*M;u.push(F,N,T),u.push(N,H,T),x+=6}c.addGroup(p,x,C),p+=x,f+=B}return I("z","y","x",-1,-1,a,r,i,l,s,0),I("z","y","x",1,-1,a,r,-i,l,s,1),I("x","z","y",1,1,i,a,r,o,l,2),I("x","z","y",1,-1,i,a,-r,o,l,3),I("x","y","z",1,-1,i,r,a,o,s,4),I("x","y","z",-1,-1,i,r,-a,o,s,5),e.setIndex(u),e.setAttribute("position",new Wp(g,3)),e.setAttribute("normal",new Wp(d,3)),e.setAttribute("uv",new Wp(h,2)),e}return Xe(n,[{key:"copy",value:function(e){return Yc(Rc(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new n(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}]),n}(Ep);function sI(e){var t={};for(var n in e)for(var i in t[n]={},e[n]){var r=e[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[n][i]=null):t[n][i]=r.clone():Array.isArray(r)?t[n][i]=r.slice():t[n][i]=r}return t}function lI(e){for(var t={},n=0;n<e.length;n++){var i=sI(e[n]);for(var r in i)t[r]=i[r]}return t}function cI(e){return null===e.getRenderTarget()&&e.outputEncoding===vd?Bd:xd}var uI={clone:sI,merge:lI},gI=function(e){kc(n,e);var t=Vc(n);function n(e){var i;return ka(this,n),(i=t.call(this)).isShaderMaterial=!0,i.type="ShaderMaterial",i.defines={},i.uniforms={},i.uniformsGroups=[],i.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",i.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",i.linewidth=1,i.wireframe=!1,i.wireframeLinewidth=1,i.fog=!1,i.lights=!1,i.clipping=!1,i.forceSinglePass=!0,i.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},i.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},i.index0AttributeName=void 0,i.uniformsNeedUpdate=!1,i.glslVersion=null,void 0!==e&&i.setValues(e),i}return Xe(n,[{key:"copy",value:function(e){return Yc(Rc(n.prototype),"copy",this).call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=sI(e.uniforms),this.uniformsGroups=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}},{key:"toJSON",value:function(e){var t=Yc(Rc(n.prototype),"toJSON",this).call(this,e);for(var i in t.glslVersion=this.glslVersion,t.uniforms={},this.uniforms){var r=this.uniforms[i].value;r&&r.isTexture?t.uniforms[i]={type:"t",value:r.toJSON(e).uuid}:r&&r.isColor?t.uniforms[i]={type:"c",value:r.getHex()}:r&&r.isVector2?t.uniforms[i]={type:"v2",value:r.toArray()}:r&&r.isVector3?t.uniforms[i]={type:"v3",value:r.toArray()}:r&&r.isVector4?t.uniforms[i]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?t.uniforms[i]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?t.uniforms[i]={type:"m4",value:r.toArray()}:t.uniforms[i]={value:r}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;var a={};for(var o in this.extensions)!0===this.extensions[o]&&(a[o]=!0);return Object.keys(a).length>0&&(t.extensions=a),t}}]),n}(sp),dI=function(e){kc(n,e);var t=Vc(n);function n(){var e;return ka(this,n),(e=t.call(this)).isCamera=!0,e.type="Camera",e.matrixWorldInverse=new yf,e.projectionMatrix=new yf,e.projectionMatrixInverse=new yf,e}return Xe(n,[{key:"copy",value:function(e,t){return Yc(Rc(n.prototype),"copy",this).call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}},{key:"updateMatrixWorld",value:function(e){Yc(Rc(n.prototype),"updateMatrixWorld",this).call(this,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"updateWorldMatrix",value:function(e,t){Yc(Rc(n.prototype),"updateWorldMatrix",this).call(this,e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}(Of),hI=function(e){kc(n,e);var t=Vc(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;return ka(this,n),(e=t.call(this)).isPerspectiveCamera=!0,e.type="PerspectiveCamera",e.fov=i,e.zoom=1,e.near=a,e.far=o,e.focus=10,e.aspect=r,e.view=null,e.filmGauge=35,e.filmOffset=0,e.updateProjectionMatrix(),e}return Xe(n,[{key:"copy",value:function(e,t){return Yc(Rc(n.prototype),"copy",this).call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}},{key:"setFocalLength",value:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*oh*Math.atan(t),this.updateProjectionMatrix()}},{key:"getFocalLength",value:function(){var e=Math.tan(.5*ah*this.fov);return.5*this.getFilmHeight()/e}},{key:"getEffectiveFOV",value:function(){return 2*oh*Math.atan(Math.tan(.5*ah*this.fov)/this.zoom)}},{key:"getFilmWidth",value:function(){return this.filmGauge*Math.min(this.aspect,1)}},{key:"getFilmHeight",value:function(){return this.filmGauge/Math.max(this.aspect,1)}},{key:"setViewOffset",value:function(e,t,n,i,r,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=this.near,t=e*Math.tan(.5*ah*this.fov)/this.zoom,n=2*t,i=this.aspect*n,r=-.5*i,a=this.view;if(null!==this.view&&this.view.enabled){var o=a.fullWidth,s=a.fullHeight;r+=a.offsetX*i/o,t-=a.offsetY*n/s,i*=a.width/o,n*=a.height/s}var l=this.filmOffset;0!==l&&(r+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=Yc(Rc(n.prototype),"toJSON",this).call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}]),n}(dI),fI=-90,pI=function(e){kc(n,e);var t=Vc(n);function n(e,i,r){var a;ka(this,n),(a=t.call(this)).type="CubeCamera",a.renderTarget=r;var o=new hI(fI,1,e,i);o.layers=a.layers,o.up.set(0,1,0),o.lookAt(1,0,0),a.add(o);var s=new hI(fI,1,e,i);s.layers=a.layers,s.up.set(0,1,0),s.lookAt(-1,0,0),a.add(s);var l=new hI(fI,1,e,i);l.layers=a.layers,l.up.set(0,0,-1),l.lookAt(0,1,0),a.add(l);var c=new hI(fI,1,e,i);c.layers=a.layers,c.up.set(0,0,1),c.lookAt(0,-1,0),a.add(c);var u=new hI(fI,1,e,i);u.layers=a.layers,u.up.set(0,1,0),u.lookAt(0,0,1),a.add(u);var g=new hI(fI,1,e,i);return g.layers=a.layers,g.up.set(0,1,0),g.lookAt(0,0,-1),a.add(g),a}return Xe(n,[{key:"update",value:function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,i=c(this.children,6),r=i[0],a=i[1],o=i[2],s=i[3],l=i[4],u=i[5],g=e.getRenderTarget(),d=e.toneMapping,h=e.xr.enabled;e.toneMapping=Nu,e.xr.enabled=!1;var f=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,r),e.setRenderTarget(n,1),e.render(t,a),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,s),e.setRenderTarget(n,4),e.render(t,l),n.texture.generateMipmaps=f,e.setRenderTarget(n,5),e.render(t,u),e.setRenderTarget(g),e.toneMapping=d,e.xr.enabled=h,n.texture.needsPMREMUpdate=!0}}]),n}(Of),II=function(e){kc(n,e);var t=Vc(n);function n(e,i,r,a,o,s,l,c,u,g){var d;return ka(this,n),e=void 0!==e?e:[],i=void 0!==i?i:Lu,(d=t.call(this,e,i,r,a,o,s,l,c,u,g)).isCubeTexture=!0,d.flipY=!1,d}return Xe(n,[{key:"images",get:function(){return this.image},set:function(e){this.image=e}}]),n}(Hh),CI=function(e){kc(n,e);var t=Vc(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ka(this,n),(e=t.call(this,i,i,r)).isWebGLCubeRenderTarget=!0;var a={width:i,height:i,depth:1},o=[a,a,a,a,a,a];return e.texture=new II(o,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),e.texture.isRenderTargetTexture=!0,e.texture.generateMipmaps=void 0!==r.generateMipmaps&&r.generateMipmaps,e.texture.minFilter=void 0!==r.minFilter?r.minFilter:tg,e}return Xe(n,[{key:"fromEquirectangularTexture",value:function(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;var n={tEquirect:{value:null}},i="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",r="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",a=new oI(5,5,5),o=new gI({name:"CubemapFromEquirect",uniforms:sI(n),vertexShader:i,fragmentShader:r,side:$c,blending:nu});o.uniforms.tEquirect.value=t;var s=new rI(a,o),l=t.minFilter;return t.minFilter===rg&&(t.minFilter=tg),new pI(1,10,this).update(e,s),t.minFilter=l,s.geometry.dispose(),s.material.dispose(),this}},{key:"clear",value:function(e,t,n,i){for(var r=e.getRenderTarget(),a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,n,i);e.setRenderTarget(r)}}]),n}(Xh),mI=new Ph,vI=new Ph,AI=new mh,bI=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ph(1,0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;ka(this,e),this.isPlane=!0,this.normal=t,this.constant=n}return Xe(e,[{key:"set",value:function(e,t){return this.normal.copy(e),this.constant=t,this}},{key:"setComponents",value:function(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}},{key:"setFromNormalAndCoplanarPoint",value:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}},{key:"setFromCoplanarPoints",value:function(e,t,n){var i=mI.subVectors(n,t).cross(vI.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}},{key:"copy",value:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this}},{key:"normalize",value:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}},{key:"negate",value:function(){return this.constant*=-1,this.normal.negate(),this}},{key:"distanceToPoint",value:function(e){return this.normal.dot(e)+this.constant}},{key:"distanceToSphere",value:function(e){return this.distanceToPoint(e.center)-e.radius}},{key:"projectPoint",value:function(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}},{key:"intersectLine",value:function(e,t){var n=e.delta(mI),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;var r=-(e.start.dot(this.normal)+this.constant)/i;return r<0||r>1?null:t.copy(e.start).addScaledVector(n,r)}},{key:"intersectsLine",value:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}},{key:"intersectsBox",value:function(e){return e.intersectsPlane(this)}},{key:"intersectsSphere",value:function(e){return e.intersectsPlane(this)}},{key:"coplanarPoint",value:function(e){return e.copy(this.normal).multiplyScalar(-this.constant)}},{key:"applyMatrix4",value:function(e,t){var n=t||AI.getNormalMatrix(e),i=this.coplanarPoint(mI).applyMatrix4(e),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}},{key:"translate",value:function(e){return this.constant-=e.dot(this.normal),this}},{key:"equals",value:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),yI=new hf,GI=new Ph,wI=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new bI,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new bI,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new bI,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new bI,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new bI,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new bI;ka(this,e),this.planes=[t,n,i,r,a,o]}return Xe(e,[{key:"set",value:function(e,t,n,i,r,a){var o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(i),o[4].copy(r),o[5].copy(a),this}},{key:"copy",value:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this}},{key:"setFromProjectionMatrix",value:function(e){var t=this.planes,n=e.elements,i=n[0],r=n[1],a=n[2],o=n[3],s=n[4],l=n[5],c=n[6],u=n[7],g=n[8],d=n[9],h=n[10],f=n[11],p=n[12],I=n[13],C=n[14],m=n[15];return t[0].setComponents(o-i,u-s,f-g,m-p).normalize(),t[1].setComponents(o+i,u+s,f+g,m+p).normalize(),t[2].setComponents(o+r,u+l,f+d,m+I).normalize(),t[3].setComponents(o-r,u-l,f-d,m-I).normalize(),t[4].setComponents(o-a,u-c,f-h,m-C).normalize(),t[5].setComponents(o+a,u+c,f+h,m+C).normalize(),this}},{key:"intersectsObject",value:function(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),yI.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{var t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),yI.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(yI)}},{key:"intersectsSprite",value:function(e){return yI.center.set(0,0,0),yI.radius=.7071067811865476,yI.applyMatrix4(e.matrixWorld),this.intersectsSphere(yI)}},{key:"intersectsSphere",value:function(e){for(var t=this.planes,n=e.center,i=-e.radius,r=0;r<6;r++){if(t[r].distanceToPoint(n)<i)return!1}return!0}},{key:"intersectsBox",value:function(e){for(var t=this.planes,n=0;n<6;n++){var i=t[n];if(GI.x=i.normal.x>0?e.max.x:e.min.x,GI.y=i.normal.y>0?e.max.y:e.min.y,GI.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(GI)<0)return!1}return!0}},{key:"containsPoint",value:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();function BI(){var e=null,t=!1,n=null,i=null;function r(t,a){n(t,a),i=e.requestAnimationFrame(r)}return{start:function(){!0!==t&&null!==n&&(i=e.requestAnimationFrame(r),t=!0)},stop:function(){e.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function xI(e,t){var n=t.isWebGL2,i=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),i.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);var n=i.get(t);n&&(e.deleteBuffer(n.buffer),i.delete(t))},update:function(t,r){if(t.isGLBufferAttribute){var a=i.get(t);(!a||a.version<t.version)&&i.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version})}else{t.isInterleavedBufferAttribute&&(t=t.data);var o=i.get(t);void 0===o?i.set(t,function(t,i){var r,a=t.array,o=t.usage,s=e.createBuffer();if(e.bindBuffer(i,s),e.bufferData(i,a,o),t.onUploadCallback(),a instanceof Float32Array)r=5126;else if(a instanceof Uint16Array)if(t.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");r=5131}else r=5123;else if(a instanceof Int16Array)r=5122;else if(a instanceof Uint32Array)r=5125;else if(a instanceof Int32Array)r=5124;else if(a instanceof Int8Array)r=5120;else if(a instanceof Uint8Array)r=5121;else{if(!(a instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+a);r=5121}return{buffer:s,type:r,bytesPerElement:a.BYTES_PER_ELEMENT,version:t.version}}(t,r)):o.version<t.version&&(!function(t,i,r){var a=i.array,o=i.updateRange;e.bindBuffer(r,t),-1===o.count?e.bufferSubData(r,0,a):(n?e.bufferSubData(r,o.offset*a.BYTES_PER_ELEMENT,a,o.offset,o.count):e.bufferSubData(r,o.offset*a.BYTES_PER_ELEMENT,a.subarray(o.offset,o.offset+o.count)),o.count=-1),i.onUploadCallback()}(o.buffer,t,r),o.version=t.version)}}}}var SI=function(e){kc(n,e);var t=Vc(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;ka(this,n),(e=t.call(this)).type="PlaneGeometry",e.parameters={width:i,height:r,widthSegments:a,heightSegments:o};for(var s=i/2,l=r/2,c=Math.floor(a),u=Math.floor(o),g=c+1,d=u+1,h=i/c,f=r/u,p=[],I=[],C=[],m=[],v=0;v<d;v++)for(var A=v*f-l,b=0;b<g;b++){var y=b*h-s;I.push(y,-A,0),C.push(0,0,1),m.push(b/c),m.push(1-v/u)}for(var G=0;G<u;G++)for(var w=0;w<c;w++){var B=w+g*G,x=w+g*(G+1),S=w+1+g*(G+1),Z=w+1+g*G;p.push(B,x,Z),p.push(x,S,Z)}return e.setIndex(p),e.setAttribute("position",new Wp(I,3)),e.setAttribute("normal",new Wp(C,3)),e.setAttribute("uv",new Wp(m,2)),e}return Xe(n,[{key:"copy",value:function(e){return Yc(Rc(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new n(e.width,e.height,e.widthSegments,e.heightSegments)}}]),n}(Ep),ZI={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_NORMALMAP_TANGENTSPACE\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal, vNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, vec2 fullSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\t\n\t\tvec2 lodFudge = pow( 1.95, lod ) / fullSize;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec2 fullSize = vec2( textureSize( sampler, 0 ) );\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), fullSize, floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), fullSize, ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#ifdef USE_UV\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_UV2\n\tattribute vec2 uv2;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},kI={common:{diffuse:{value:new dp(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new mh},alphaMap:{value:null},alphaMapTransform:{value:new mh},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new mh}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new mh}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new mh}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new mh},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new mh},normalScale:{value:new Ch(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new mh},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new mh}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new mh}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new mh}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new dp(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new dp(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new mh}},sprite:{diffuse:{value:new dp(16777215)},opacity:{value:1},center:{value:new Ch(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new mh},alphaMap:{value:null},alphaTest:{value:0}}},RI={basic:{uniforms:lI([kI.common,kI.specularmap,kI.envmap,kI.aomap,kI.lightmap,kI.fog]),vertexShader:ZI.meshbasic_vert,fragmentShader:ZI.meshbasic_frag},lambert:{uniforms:lI([kI.common,kI.specularmap,kI.envmap,kI.aomap,kI.lightmap,kI.emissivemap,kI.bumpmap,kI.normalmap,kI.displacementmap,kI.fog,kI.lights,{emissive:{value:new dp(0)}}]),vertexShader:ZI.meshlambert_vert,fragmentShader:ZI.meshlambert_frag},phong:{uniforms:lI([kI.common,kI.specularmap,kI.envmap,kI.aomap,kI.lightmap,kI.emissivemap,kI.bumpmap,kI.normalmap,kI.displacementmap,kI.fog,kI.lights,{emissive:{value:new dp(0)},specular:{value:new dp(1118481)},shininess:{value:30}}]),vertexShader:ZI.meshphong_vert,fragmentShader:ZI.meshphong_frag},standard:{uniforms:lI([kI.common,kI.envmap,kI.aomap,kI.lightmap,kI.emissivemap,kI.bumpmap,kI.normalmap,kI.displacementmap,kI.roughnessmap,kI.metalnessmap,kI.fog,kI.lights,{emissive:{value:new dp(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ZI.meshphysical_vert,fragmentShader:ZI.meshphysical_frag},toon:{uniforms:lI([kI.common,kI.aomap,kI.lightmap,kI.emissivemap,kI.bumpmap,kI.normalmap,kI.displacementmap,kI.gradientmap,kI.fog,kI.lights,{emissive:{value:new dp(0)}}]),vertexShader:ZI.meshtoon_vert,fragmentShader:ZI.meshtoon_frag},matcap:{uniforms:lI([kI.common,kI.bumpmap,kI.normalmap,kI.displacementmap,kI.fog,{matcap:{value:null}}]),vertexShader:ZI.meshmatcap_vert,fragmentShader:ZI.meshmatcap_frag},points:{uniforms:lI([kI.points,kI.fog]),vertexShader:ZI.points_vert,fragmentShader:ZI.points_frag},dashed:{uniforms:lI([kI.common,kI.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ZI.linedashed_vert,fragmentShader:ZI.linedashed_frag},depth:{uniforms:lI([kI.common,kI.displacementmap]),vertexShader:ZI.depth_vert,fragmentShader:ZI.depth_frag},normal:{uniforms:lI([kI.common,kI.bumpmap,kI.normalmap,kI.displacementmap,{opacity:{value:1}}]),vertexShader:ZI.meshnormal_vert,fragmentShader:ZI.meshnormal_frag},sprite:{uniforms:lI([kI.sprite,kI.fog]),vertexShader:ZI.sprite_vert,fragmentShader:ZI.sprite_frag},background:{uniforms:{uvTransform:{value:new mh},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ZI.background_vert,fragmentShader:ZI.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:ZI.backgroundCube_vert,fragmentShader:ZI.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ZI.cube_vert,fragmentShader:ZI.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ZI.equirect_vert,fragmentShader:ZI.equirect_frag},distanceRGBA:{uniforms:lI([kI.common,kI.displacementmap,{referencePosition:{value:new Ph},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ZI.distanceRGBA_vert,fragmentShader:ZI.distanceRGBA_frag},shadow:{uniforms:lI([kI.lights,kI.fog,{color:{value:new dp(0)},opacity:{value:1}}]),vertexShader:ZI.shadow_vert,fragmentShader:ZI.shadow_frag}};RI.physical={uniforms:lI([RI.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new mh},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new mh},clearcoatNormalScale:{value:new Ch(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new mh},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new mh},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new mh},sheen:{value:0},sheenColor:{value:new dp(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new mh},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new mh},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new mh},transmissionSamplerSize:{value:new Ch},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new mh},attenuationDistance:{value:0},attenuationColor:{value:new dp(0)},specularColor:{value:new dp(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new mh},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new mh}}]),vertexShader:ZI.meshphysical_vert,fragmentShader:ZI.meshphysical_frag};var WI={r:0,b:0,g:0};function MI(e,t,n,i,r,a,o){var s,l,c=new dp(0),u=!0===a?0:1,g=null,d=0,h=null;function f(t,n){t.getRGB(WI,cI(e)),i.buffers.color.setClear(WI.r,WI.g,WI.b,n,o)}return{getClearColor:function(){return c},setClearColor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;c.set(e),f(c,u=t)},getClearAlpha:function(){return u},setClearAlpha:function(e){f(c,u=e)},render:function(i,a){var o=!1,p=!0===a.isScene?a.background:null;p&&p.isTexture&&(p=(a.backgroundBlurriness>0?n:t).get(p));var I=e.xr,C=I.getSession&&I.getSession();C&&"additive"===C.environmentBlendMode&&(p=null),null===p?f(c,u):p&&p.isColor&&(f(p,1),o=!0),(e.autoClear||o)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),p&&(p.isCubeTexture||p.mapping===Du)?(void 0===l&&((l=new rI(new oI(1,1,1),new gI({name:"BackgroundCubeMaterial",uniforms:sI(RI.backgroundCube.uniforms),vertexShader:RI.backgroundCube.vertexShader,fragmentShader:RI.backgroundCube.fragmentShader,side:$c,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(l)),l.material.uniforms.envMap.value=p,l.material.uniforms.flipEnvMap.value=p.isCubeTexture&&!1===p.isRenderTargetTexture?-1:1,l.material.uniforms.backgroundBlurriness.value=a.backgroundBlurriness,l.material.uniforms.backgroundIntensity.value=a.backgroundIntensity,l.material.toneMapped=p.encoding!==vd,g===p&&d===p.version&&h===e.toneMapping||(l.material.needsUpdate=!0,g=p,d=p.version,h=e.toneMapping),l.layers.enableAll(),i.unshift(l,l.geometry,l.material,0,0,null)):p&&p.isTexture&&(void 0===s&&((s=new rI(new SI(2,2),new gI({name:"BackgroundMaterial",uniforms:sI(RI.background.uniforms),vertexShader:RI.background.vertexShader,fragmentShader:RI.background.fragmentShader,side:qc,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(s.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(s)),s.material.uniforms.t2D.value=p,s.material.uniforms.backgroundIntensity.value=a.backgroundIntensity,s.material.toneMapped=p.encoding!==vd,!0===p.matrixAutoUpdate&&p.updateMatrix(),s.material.uniforms.uvTransform.value.copy(p.matrix),g===p&&d===p.version&&h===e.toneMapping||(s.material.needsUpdate=!0,g=p,d=p.version,h=e.toneMapping),s.layers.enableAll(),i.unshift(s,s.geometry,s.material,0,0,null))}}}function VI(e,t,n,i){var r=e.getParameter(34921),a=i.isWebGL2?null:t.get("OES_vertex_array_object"),o=i.isWebGL2||null!==a,s={},l=h(null),c=l,u=!1;function g(t){return i.isWebGL2?e.bindVertexArray(t):a.bindVertexArrayOES(t)}function d(t){return i.isWebGL2?e.deleteVertexArray(t):a.deleteVertexArrayOES(t)}function h(e){for(var t=[],n=[],i=[],a=0;a<r;a++)t[a]=0,n[a]=0,i[a]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:i,object:e,attributes:{},index:null}}function f(){for(var e=c.newAttributes,t=0,n=e.length;t<n;t++)e[t]=0}function p(e){I(e,0)}function I(n,r){var a=c.newAttributes,o=c.enabledAttributes,s=c.attributeDivisors;(a[n]=1,0===o[n]&&(e.enableVertexAttribArray(n),o[n]=1),s[n]!==r)&&((i.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),s[n]=r)}function C(){for(var t=c.newAttributes,n=c.enabledAttributes,i=0,r=n.length;i<r;i++)n[i]!==t[i]&&(e.disableVertexAttribArray(i),n[i]=0)}function m(t,n,r,a,o,s){!0!==i.isWebGL2||5124!==r&&5125!==r?e.vertexAttribPointer(t,n,r,a,o,s):e.vertexAttribIPointer(t,n,r,o,s)}function v(){A(),u=!0,c!==l&&g((c=l).object)}function A(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(r,l,d,v,A){var b=!1;if(o){var y=function(t,n,r){var o=!0===r.wireframe,l=s[t.id];void 0===l&&(l={},s[t.id]=l);var c=l[n.id];void 0===c&&(c={},l[n.id]=c);var u=c[o];void 0===u&&(u=h(i.isWebGL2?e.createVertexArray():a.createVertexArrayOES()),c[o]=u);return u}(v,d,l);c!==y&&g((c=y).object),b=function(e,t,n,i){var r=c.attributes,a=t.attributes,o=0,s=n.getAttributes();for(var l in s){if(s[l].location>=0){var u=r[l],g=a[l];if(void 0===g&&("instanceMatrix"===l&&e.instanceMatrix&&(g=e.instanceMatrix),"instanceColor"===l&&e.instanceColor&&(g=e.instanceColor)),void 0===u)return!0;if(u.attribute!==g)return!0;if(g&&u.data!==g.data)return!0;o++}}return c.attributesNum!==o||c.index!==i}(r,v,d,A),b&&function(e,t,n,i){var r={},a=t.attributes,o=0,s=n.getAttributes();for(var l in s){if(s[l].location>=0){var u=a[l];void 0===u&&("instanceMatrix"===l&&e.instanceMatrix&&(u=e.instanceMatrix),"instanceColor"===l&&e.instanceColor&&(u=e.instanceColor));var g={};g.attribute=u,u&&u.data&&(g.data=u.data),r[l]=g,o++}}c.attributes=r,c.attributesNum=o,c.index=i}(r,v,d,A)}else{var G=!0===l.wireframe;c.geometry===v.id&&c.program===d.id&&c.wireframe===G||(c.geometry=v.id,c.program=d.id,c.wireframe=G,b=!0)}null!==A&&n.update(A,34963),(b||u)&&(u=!1,function(r,a,o,s){if(!1===i.isWebGL2&&(r.isInstancedMesh||s.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;f();var l=s.attributes,c=o.getAttributes(),u=a.defaultAttributeValues;for(var g in c){var d=c[g];if(d.location>=0){var h=l[g];if(void 0===h&&("instanceMatrix"===g&&r.instanceMatrix&&(h=r.instanceMatrix),"instanceColor"===g&&r.instanceColor&&(h=r.instanceColor)),void 0!==h){var v=h.normalized,A=h.itemSize,b=n.get(h);if(void 0===b)continue;var y=b.buffer,G=b.type,w=b.bytesPerElement;if(h.isInterleavedBufferAttribute){var B=h.data,x=B.stride,S=h.offset;if(B.isInstancedInterleavedBuffer){for(var Z=0;Z<d.locationSize;Z++)I(d.location+Z,B.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=B.meshPerAttribute*B.count)}else for(var k=0;k<d.locationSize;k++)p(d.location+k);e.bindBuffer(34962,y);for(var R=0;R<d.locationSize;R++)m(d.location+R,A/d.locationSize,G,v,x*w,(S+A/d.locationSize*R)*w)}else{if(h.isInstancedBufferAttribute){for(var W=0;W<d.locationSize;W++)I(d.location+W,h.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=h.meshPerAttribute*h.count)}else for(var M=0;M<d.locationSize;M++)p(d.location+M);e.bindBuffer(34962,y);for(var V=0;V<d.locationSize;V++)m(d.location+V,A/d.locationSize,G,v,A*w,A/d.locationSize*V*w)}}else if(void 0!==u){var F=u[g];if(void 0!==F)switch(F.length){case 2:e.vertexAttrib2fv(d.location,F);break;case 3:e.vertexAttrib3fv(d.location,F);break;case 4:e.vertexAttrib4fv(d.location,F);break;default:e.vertexAttrib1fv(d.location,F)}}}}C()}(r,l,d,v),null!==A&&e.bindBuffer(34963,n.get(A).buffer))},reset:v,resetDefaultState:A,dispose:function(){for(var e in v(),s){var t=s[e];for(var n in t){var i=t[n];for(var r in i)d(i[r].object),delete i[r];delete t[n]}delete s[e]}},releaseStatesOfGeometry:function(e){if(void 0!==s[e.id]){var t=s[e.id];for(var n in t){var i=t[n];for(var r in i)d(i[r].object),delete i[r];delete t[n]}delete s[e.id]}},releaseStatesOfProgram:function(e){for(var t in s){var n=s[t];if(void 0!==n[e.id]){var i=n[e.id];for(var r in i)d(i[r].object),delete i[r];delete n[e.id]}}},initAttributes:f,enableAttribute:p,disableUnusedAttributes:C}}function FI(e,t,n,i){var r,a=i.isWebGL2;this.setMode=function(e){r=e},this.render=function(t,i){e.drawArrays(r,t,i),n.update(i,r,1)},this.renderInstances=function(i,o,s){if(0!==s){var l,c;if(a)l=e,c="drawArraysInstanced";else if(c="drawArraysInstancedANGLE",null===(l=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](r,i,o,s),n.update(o,r,s)}}}function NI(e,t,n){var i;function r(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var a="undefined"!==typeof WebGL2RenderingContext&&"WebGL2RenderingContext"===e.constructor.name,o=void 0!==n.precision?n.precision:"highp",s=r(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s);var l=a||t.has("WEBGL_draw_buffers"),c=!0===n.logarithmicDepthBuffer,u=e.getParameter(34930),g=e.getParameter(35660),d=e.getParameter(3379),h=e.getParameter(34076),f=e.getParameter(34921),p=e.getParameter(36347),I=e.getParameter(36348),C=e.getParameter(36349),m=g>0,v=a||t.has("OES_texture_float");return{isWebGL2:a,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==i)return i;if(!0===t.has("EXT_texture_filter_anisotropic")){var n=t.get("EXT_texture_filter_anisotropic");i=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:r,precision:o,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:g,maxTextureSize:d,maxCubemapSize:h,maxAttributes:f,maxVertexUniforms:p,maxVaryings:I,maxFragmentUniforms:C,vertexTextures:m,floatFragmentTextures:v,floatVertexTextures:m&&v,maxSamples:a?e.getParameter(36183):0}}function HI(e){var t=this,n=null,i=0,r=!1,a=!1,o=new bI,s=new mh,l={value:null,needsUpdate:!1};function c(e,n,i,r){var a=null!==e?e.length:0,c=null;if(0!==a){if(c=l.value,!0!==r||null===c){var u=i+4*a,g=n.matrixWorldInverse;s.getNormalMatrix(g),(null===c||c.length<u)&&(c=new Float32Array(u));for(var d=0,h=i;d!==a;++d,h+=4)o.copy(e[d]).applyMatrix4(g,s),o.normal.toArray(c,h),c[h+3]=o.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=a,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){var n=0!==e.length||t||0!==i||r;return r=t,i=e.length,n},this.beginShadows=function(){a=!0,c(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(e,t){n=c(e,t,0)},this.setState=function(o,s,u){var g=o.clippingPlanes,d=o.clipIntersection,h=o.clipShadows,f=e.get(o);if(!r||null===g||0===g.length||a&&!h)a?c(null):function(){l.value!==n&&(l.value=n,l.needsUpdate=i>0);t.numPlanes=i,t.numIntersection=0}();else{var p=a?0:i,I=4*p,C=f.clippingState||null;l.value=C,C=c(g,s,I,u);for(var m=0;m!==I;++m)C[m]=n[m];f.clippingState=C,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=p}}}function TI(e){var t=new WeakMap;function n(e,t){return t===_u?e.mapping=Lu:t===Pu&&(e.mapping=Ku),e}function i(e){var n=e.target;n.removeEventListener("dispose",i);var r=t.get(n);void 0!==r&&(t.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture&&!1===r.isRenderTargetTexture){var a=r.mapping;if(a===_u||a===Pu){if(t.has(r))return n(t.get(r).texture,r.mapping);var o=r.image;if(o&&o.height>0){var s=new CI(o.height/2);return s.fromEquirectangularTexture(e,r),t.set(r,s),r.addEventListener("dispose",i),n(s.texture,r.mapping)}return null}}return r},dispose:function(){t=new WeakMap}}}var XI=function(e){kc(n,e);var t=Vc(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;return ka(this,n),(e=t.call(this)).isOrthographicCamera=!0,e.type="OrthographicCamera",e.zoom=1,e.view=null,e.left=i,e.right=r,e.top=a,e.bottom=o,e.near=s,e.far=l,e.updateProjectionMatrix(),e}return Xe(n,[{key:"copy",value:function(e,t){return Yc(Rc(n.prototype),"copy",this).call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}},{key:"setViewOffset",value:function(e,t,n,i,r,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2,r=n-e,a=n+e,o=i+t,s=i-t;if(null!==this.view&&this.view.enabled){var l=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a=(r+=l*this.view.offsetX)+l*this.view.width,s=(o-=c*this.view.offsetY)-c*this.view.height}this.projectionMatrix.makeOrthographic(r,a,o,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=Yc(Rc(n.prototype),"toJSON",this).call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}]),n}(dI),YI=[.125,.215,.35,.446,.526,.582],EI=20,zI=new XI,LI=new dp,KI=null,_I=(1+Math.sqrt(5))/2,PI=1/_I,DI=[new Ph(1,1,1),new Ph(-1,1,1),new Ph(1,1,-1),new Ph(-1,1,-1),new Ph(0,_I,PI),new Ph(0,_I,-PI),new Ph(PI,0,_I),new Ph(-PI,0,_I),new Ph(_I,PI,0),new Ph(-_I,PI,0)],OI=function(){function e(t){ka(this,e),this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}return Xe(e,[{key:"fromScene",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;KI=this._renderer.getRenderTarget(),this._setSize(256);var r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(e,n,i,r),t>0&&this._blur(r,0,0,t),this._applyPMREM(r),this._cleanup(r),r}},{key:"fromEquirectangular",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}},{key:"fromCubemap",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}},{key:"compileCubemapShader",value:function(){null===this._cubemapMaterial&&(this._cubemapMaterial=QI(),this._compileMaterial(this._cubemapMaterial))}},{key:"compileEquirectangularShader",value:function(){null===this._equirectMaterial&&(this._equirectMaterial=JI(),this._compileMaterial(this._equirectMaterial))}},{key:"dispose",value:function(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}},{key:"_setSize",value:function(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}},{key:"_dispose",value:function(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(var e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}},{key:"_cleanup",value:function(e){this._renderer.setRenderTarget(KI),e.scissorTest=!1,jI(e,0,0,e.width,e.height)}},{key:"_fromTexture",value:function(e,t){e.mapping===Lu||e.mapping===Ku?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),KI=this._renderer.getRenderTarget();var n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}},{key:"_allocateTargets",value:function(){var e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:tg,minFilter:tg,generateMipmaps:!1,type:hg,format:mg,encoding:md,depthBuffer:!1},i=UI(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=UI(e,t,n);var r=this._lodMax,a=function(e){for(var t=[],n=[],i=[],r=e,a=e-4+1+YI.length,o=0;o<a;o++){var s=Math.pow(2,r);n.push(s);var l=1/s;o>e-4?l=YI[o-e+4-1]:0===o&&(l=0),i.push(l);for(var c=1/(s-2),u=-c,g=1+c,d=[u,u,g,u,g,g,u,u,g,g,u,g],h=6,f=6,p=3,I=2,C=1,m=new Float32Array(p*f*h),v=new Float32Array(I*f*h),A=new Float32Array(C*f*h),b=0;b<h;b++){var y=b%3*2/3-1,G=b>2?0:-1,w=[y,G,0,y+2/3,G,0,y+2/3,G+1,0,y,G,0,y+2/3,G+1,0,y,G+1,0];m.set(w,p*f*b),v.set(d,I*f*b);var B=[b,b,b,b,b,b];A.set(B,C*f*b)}var x=new Ep;x.setAttribute("position",new yp(m,p)),x.setAttribute("uv",new yp(v,I)),x.setAttribute("faceIndex",new yp(A,C)),t.push(x),r>4&&r--}return{lodPlanes:t,sizeLods:n,sigmas:i}}(r);this._sizeLods=a.sizeLods,this._lodPlanes=a.lodPlanes,this._sigmas=a.sigmas,this._blurMaterial=function(e,t,n){var i=new Float32Array(EI),r=new Ph(0,1,0),a=new gI({name:"SphericalGaussianBlur",defines:{n:EI,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:"".concat(e,".0")},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:nu,depthTest:!1,depthWrite:!1});return a}(r,e,t)}return i}},{key:"_compileMaterial",value:function(e){var t=new rI(this._lodPlanes[0],e);this._renderer.compile(t,zI)}},{key:"_sceneToCubeUV",value:function(e,t,n,i){var r=new hI(90,1,t,n),a=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],s=this._renderer,l=s.autoClear,c=s.toneMapping;s.getClearColor(LI),s.toneMapping=Nu,s.autoClear=!1;var u=new fp({name:"PMREM.Background",side:$c,depthWrite:!1,depthTest:!1}),g=new rI(new oI,u),d=!1,h=e.background;h?h.isColor&&(u.color.copy(h),e.background=null,d=!0):(u.color.copy(LI),d=!0);for(var f=0;f<6;f++){var p=f%3;0===p?(r.up.set(0,a[f],0),r.lookAt(o[f],0,0)):1===p?(r.up.set(0,0,a[f]),r.lookAt(0,o[f],0)):(r.up.set(0,a[f],0),r.lookAt(0,0,o[f]));var I=this._cubeSize;jI(i,p*I,f>2?I:0,I,I),s.setRenderTarget(i),d&&s.render(g,r),s.render(e,r)}g.geometry.dispose(),g.material.dispose(),s.toneMapping=c,s.autoClear=l,e.background=h}},{key:"_textureToCubeUV",value:function(e,t){var n=this._renderer,i=e.mapping===Lu||e.mapping===Ku;i?(null===this._cubemapMaterial&&(this._cubemapMaterial=QI()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=JI());var r=i?this._cubemapMaterial:this._equirectMaterial,a=new rI(this._lodPlanes[0],r);r.uniforms.envMap.value=e;var o=this._cubeSize;jI(t,0,0,3*o,2*o),n.setRenderTarget(t),n.render(a,zI)}},{key:"_applyPMREM",value:function(e){var t=this._renderer,n=t.autoClear;t.autoClear=!1;for(var i=1;i<this._lodPlanes.length;i++){var r=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),a=DI[(i-1)%DI.length];this._blur(e,i-1,i,r,a)}t.autoClear=n}},{key:"_blur",value:function(e,t,n,i,r){var a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,i,"latitudinal",r),this._halfBlur(a,e,n,n,i,"longitudinal",r)}},{key:"_halfBlur",value:function(e,t,n,i,r,a,o){var s=this._renderer,l=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");var c=new rI(this._lodPlanes[i],l),u=l.uniforms,g=this._sizeLods[n]-1,d=isFinite(r)?Math.PI/(2*g):2*Math.PI/39,h=r/d,f=isFinite(r)?1+Math.floor(3*h):EI;f>EI&&console.warn("sigmaRadians, ".concat(r,", is too large and will clip, as it requested ").concat(f," samples when the maximum is set to ").concat(EI));for(var p=[],I=0,C=0;C<EI;++C){var m=C/h,v=Math.exp(-m*m/2);p.push(v),0===C?I+=v:C<f&&(I+=2*v)}for(var A=0;A<p.length;A++)p[A]=p[A]/I;u.envMap.value=e.texture,u.samples.value=f,u.weights.value=p,u.latitudinal.value="latitudinal"===a,o&&(u.poleAxis.value=o);var b=this._lodMax;u.dTheta.value=d,u.mipInt.value=b-n;var y=this._sizeLods[i];jI(t,3*y*(i>b-4?i-b+4:0),4*(this._cubeSize-y),3*y,2*y),s.setRenderTarget(t),s.render(c,zI)}}]),e}();function UI(e,t,n){var i=new Xh(e,t,n);return i.texture.mapping=Du,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function jI(e,t,n,i,r){e.viewport.set(t,n,i,r),e.scissor.set(t,n,i,r)}function JI(){return new gI({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:nu,depthTest:!1,depthWrite:!1})}function QI(){return new gI({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:nu,depthTest:!1,depthWrite:!1})}function qI(e){var t=new WeakMap,n=null;function i(e){var n=e.target;n.removeEventListener("dispose",i);var r=t.get(n);void 0!==r&&(t.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture){var a=r.mapping,o=a===_u||a===Pu,s=a===Lu||a===Ku;if(o||s){if(r.isRenderTargetTexture&&!0===r.needsPMREMUpdate){r.needsPMREMUpdate=!1;var l=t.get(r);return null===n&&(n=new OI(e)),l=o?n.fromEquirectangular(r,l):n.fromCubemap(r,l),t.set(r,l),l.texture}if(t.has(r))return t.get(r).texture;var c=r.image;if(o&&c&&c.height>0||s&&c&&function(e){for(var t=0,n=6,i=0;i<n;i++)void 0!==e[i]&&t++;return t===n}(c)){null===n&&(n=new OI(e));var u=o?n.fromEquirectangular(r):n.fromCubemap(r);return t.set(r,u),r.addEventListener("dispose",i),u.texture}return null}}return r},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function $I(e){var t={};function n(n){if(void 0!==t[n])return t[n];var i;switch(n){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=e.getExtension(n)}return t[n]=i,i}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){var t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function eC(e,t,n,i){var r={},a=new WeakMap;function o(e){var s=e.target;for(var l in null!==s.index&&t.remove(s.index),s.attributes)t.remove(s.attributes[l]);s.removeEventListener("dispose",o),delete r[s.id];var c=a.get(s);c&&(t.remove(c),a.delete(s)),i.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e){var n=[],i=e.index,r=e.attributes.position,o=0;if(null!==i){var s=i.array;o=i.version;for(var l=0,c=s.length;l<c;l+=3){var u=s[l+0],g=s[l+1],d=s[l+2];n.push(u,g,g,d,d,u)}}else{var h=r.array;o=r.version;for(var f=0,p=h.length/3-1;f<p;f+=3){var I=f+0,C=f+1,m=f+2;n.push(I,C,C,m,m,I)}}var v=new(Ah(n)?kp:Sp)(n,1);v.version=o;var A=a.get(e);A&&t.remove(A),a.set(e,v)}return{get:function(e,t){return!0===r[t.id]||(t.addEventListener("dispose",o),r[t.id]=!0,n.memory.geometries++),t},update:function(e){var n=e.attributes;for(var i in n)t.update(n[i],34962);var r=e.morphAttributes;for(var a in r)for(var o=r[a],s=0,l=o.length;s<l;s++)t.update(o[s],34962)},getWireframeAttribute:function(e){var t=a.get(e);if(t){var n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return a.get(e)}}}function tC(e,t,n,i){var r,a,o,s=i.isWebGL2;this.setMode=function(e){r=e},this.setIndex=function(e){a=e.type,o=e.bytesPerElement},this.render=function(t,i){e.drawElements(r,i,a,t*o),n.update(i,r,1)},this.renderInstances=function(i,l,c){if(0!==c){var u,g;if(s)u=e,g="drawElementsInstanced";else if(g="drawElementsInstancedANGLE",null===(u=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[g](r,l,a,i*o,c),n.update(l,r,c)}}}function nC(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,i){switch(t.calls++,n){case 4:t.triangles+=i*(e/3);break;case 1:t.lines+=i*(e/2);break;case 3:t.lines+=i*(e-1);break;case 2:t.lines+=i*e;break;case 0:t.points+=i*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function iC(e,t){return e[0]-t[0]}function rC(e,t){return Math.abs(t[1])-Math.abs(e[1])}function aC(e,t,n){for(var i={},r=new Float32Array(8),a=new WeakMap,o=new Th,s=[],l=0;l<8;l++)s[l]=[l,0];return{update:function(l,c,u){var g=l.morphTargetInfluences;if(!0===t.isWebGL2){var d=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,h=void 0!==d?d.length:0,f=a.get(c);if(void 0===f||f.count!==h){void 0!==f&&f.texture.dispose();var p=void 0!==c.morphAttributes.position,I=void 0!==c.morphAttributes.normal,C=void 0!==c.morphAttributes.color,m=c.morphAttributes.position||[],v=c.morphAttributes.normal||[],A=c.morphAttributes.color||[],b=0;!0===p&&(b=1),!0===I&&(b=2),!0===C&&(b=3);var y=c.attributes.position.count*b,G=1;y>t.maxTextureSize&&(G=Math.ceil(y/t.maxTextureSize),y=t.maxTextureSize);var w=new Float32Array(y*G*4*h),B=new Yh(w,y,G,h);B.type=dg,B.needsUpdate=!0;for(var x=4*b,S=0;S<h;S++)for(var Z=m[S],k=v[S],R=A[S],W=y*G*4*S,M=0;M<Z.count;M++){var V=M*x;!0===p&&(o.fromBufferAttribute(Z,M),w[W+V+0]=o.x,w[W+V+1]=o.y,w[W+V+2]=o.z,w[W+V+3]=0),!0===I&&(o.fromBufferAttribute(k,M),w[W+V+4]=o.x,w[W+V+5]=o.y,w[W+V+6]=o.z,w[W+V+7]=0),!0===C&&(o.fromBufferAttribute(R,M),w[W+V+8]=o.x,w[W+V+9]=o.y,w[W+V+10]=o.z,w[W+V+11]=4===R.itemSize?o.w:1)}f={count:h,texture:B,size:new Ch(y,G)},a.set(c,f),c.addEventListener("dispose",(function e(){B.dispose(),a.delete(c),c.removeEventListener("dispose",e)}))}for(var F=0,N=0;N<g.length;N++)F+=g[N];var H=c.morphTargetsRelative?1:1-F;u.getUniforms().setValue(e,"morphTargetBaseInfluence",H),u.getUniforms().setValue(e,"morphTargetInfluences",g),u.getUniforms().setValue(e,"morphTargetsTexture",f.texture,n),u.getUniforms().setValue(e,"morphTargetsTextureSize",f.size)}else{var T=void 0===g?0:g.length,X=i[c.id];if(void 0===X||X.length!==T){X=[];for(var Y=0;Y<T;Y++)X[Y]=[Y,0];i[c.id]=X}for(var E=0;E<T;E++){var z=X[E];z[0]=E,z[1]=g[E]}X.sort(rC);for(var L=0;L<8;L++)L<T&&X[L][1]?(s[L][0]=X[L][0],s[L][1]=X[L][1]):(s[L][0]=Number.MAX_SAFE_INTEGER,s[L][1]=0);s.sort(iC);for(var K=c.morphAttributes.position,_=c.morphAttributes.normal,P=0,D=0;D<8;D++){var O=s[D],U=O[0],j=O[1];U!==Number.MAX_SAFE_INTEGER&&j?(K&&c.getAttribute("morphTarget"+D)!==K[U]&&c.setAttribute("morphTarget"+D,K[U]),_&&c.getAttribute("morphNormal"+D)!==_[U]&&c.setAttribute("morphNormal"+D,_[U]),r[D]=j,P+=j):(K&&!0===c.hasAttribute("morphTarget"+D)&&c.deleteAttribute("morphTarget"+D),_&&!0===c.hasAttribute("morphNormal"+D)&&c.deleteAttribute("morphNormal"+D),r[D]=0)}var J=c.morphTargetsRelative?1:1-P;u.getUniforms().setValue(e,"morphTargetBaseInfluence",J),u.getUniforms().setValue(e,"morphTargetInfluences",r)}}}}function oC(e,t,n,i){var r=new WeakMap;function a(e){var t=e.target;t.removeEventListener("dispose",a),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(e){var o=i.render.frame,s=e.geometry,l=t.get(e,s);return r.get(l)!==o&&(t.update(l),r.set(l,o)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",a)&&e.addEventListener("dispose",a),n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),l},dispose:function(){r=new WeakMap}}}var sC=new Hh,lC=new Yh,cC=new zh,uC=new II,gC=[],dC=[],hC=new Float32Array(16),fC=new Float32Array(9),pC=new Float32Array(4);function IC(e,t,n){var i=e[0];if(i<=0||i>0)return e;var r=t*n,a=gC[r];if(void 0===a&&(a=new Float32Array(r),gC[r]=a),0!==t){i.toArray(a,0);for(var o=1,s=0;o!==t;++o)s+=n,e[o].toArray(a,s)}return a}function CC(e,t){if(e.length!==t.length)return!1;for(var n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}function mC(e,t){for(var n=0,i=t.length;n<i;n++)e[n]=t[n]}function vC(e,t){var n=dC[t];void 0===n&&(n=new Int32Array(t),dC[t]=n);for(var i=0;i!==t;++i)n[i]=e.allocateTextureUnit();return n}function AC(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function bC(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(CC(n,t))return;e.uniform2fv(this.addr,t),mC(n,t)}}function yC(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(CC(n,t))return;e.uniform3fv(this.addr,t),mC(n,t)}}function GC(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(CC(n,t))return;e.uniform4fv(this.addr,t),mC(n,t)}}function wC(e,t){var n=this.cache,i=t.elements;if(void 0===i){if(CC(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),mC(n,t)}else{if(CC(n,i))return;pC.set(i),e.uniformMatrix2fv(this.addr,!1,pC),mC(n,i)}}function BC(e,t){var n=this.cache,i=t.elements;if(void 0===i){if(CC(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),mC(n,t)}else{if(CC(n,i))return;fC.set(i),e.uniformMatrix3fv(this.addr,!1,fC),mC(n,i)}}function xC(e,t){var n=this.cache,i=t.elements;if(void 0===i){if(CC(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),mC(n,t)}else{if(CC(n,i))return;hC.set(i),e.uniformMatrix4fv(this.addr,!1,hC),mC(n,i)}}function SC(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function ZC(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(CC(n,t))return;e.uniform2iv(this.addr,t),mC(n,t)}}function kC(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(CC(n,t))return;e.uniform3iv(this.addr,t),mC(n,t)}}function RC(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(CC(n,t))return;e.uniform4iv(this.addr,t),mC(n,t)}}function WC(e,t){var n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function MC(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(CC(n,t))return;e.uniform2uiv(this.addr,t),mC(n,t)}}function VC(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(CC(n,t))return;e.uniform3uiv(this.addr,t),mC(n,t)}}function FC(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(CC(n,t))return;e.uniform4uiv(this.addr,t),mC(n,t)}}function NC(e,t,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2D(t||sC,r)}function HC(e,t,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(t||cC,r)}function TC(e,t,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(t||uC,r)}function XC(e,t,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(t||lC,r)}function YC(e,t){e.uniform1fv(this.addr,t)}function EC(e,t){var n=IC(t,this.size,2);e.uniform2fv(this.addr,n)}function zC(e,t){var n=IC(t,this.size,3);e.uniform3fv(this.addr,n)}function LC(e,t){var n=IC(t,this.size,4);e.uniform4fv(this.addr,n)}function KC(e,t){var n=IC(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function _C(e,t){var n=IC(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function PC(e,t){var n=IC(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function DC(e,t){e.uniform1iv(this.addr,t)}function OC(e,t){e.uniform2iv(this.addr,t)}function UC(e,t){e.uniform3iv(this.addr,t)}function jC(e,t){e.uniform4iv(this.addr,t)}function JC(e,t){e.uniform1uiv(this.addr,t)}function QC(e,t){e.uniform2uiv(this.addr,t)}function qC(e,t){e.uniform3uiv(this.addr,t)}function $C(e,t){e.uniform4uiv(this.addr,t)}function em(e,t,n){var i=this.cache,r=t.length,a=vC(n,r);CC(i,a)||(e.uniform1iv(this.addr,a),mC(i,a));for(var o=0;o!==r;++o)n.setTexture2D(t[o]||sC,a[o])}function tm(e,t,n){var i=this.cache,r=t.length,a=vC(n,r);CC(i,a)||(e.uniform1iv(this.addr,a),mC(i,a));for(var o=0;o!==r;++o)n.setTexture3D(t[o]||cC,a[o])}function nm(e,t,n){var i=this.cache,r=t.length,a=vC(n,r);CC(i,a)||(e.uniform1iv(this.addr,a),mC(i,a));for(var o=0;o!==r;++o)n.setTextureCube(t[o]||uC,a[o])}function im(e,t,n){var i=this.cache,r=t.length,a=vC(n,r);CC(i,a)||(e.uniform1iv(this.addr,a),mC(i,a));for(var o=0;o!==r;++o)n.setTexture2DArray(t[o]||lC,a[o])}var rm=Xe((function e(t,n,i){ka(this,e),this.id=t,this.addr=i,this.cache=[],this.setValue=function(e){switch(e){case 5126:return AC;case 35664:return bC;case 35665:return yC;case 35666:return GC;case 35674:return wC;case 35675:return BC;case 35676:return xC;case 5124:case 35670:return SC;case 35667:case 35671:return ZC;case 35668:case 35672:return kC;case 35669:case 35673:return RC;case 5125:return WC;case 36294:return MC;case 36295:return VC;case 36296:return FC;case 35678:case 36198:case 36298:case 36306:case 35682:return NC;case 35679:case 36299:case 36307:return HC;case 35680:case 36300:case 36308:case 36293:return TC;case 36289:case 36303:case 36311:case 36292:return XC}}(n.type)})),am=Xe((function e(t,n,i){ka(this,e),this.id=t,this.addr=i,this.cache=[],this.size=n.size,this.setValue=function(e){switch(e){case 5126:return YC;case 35664:return EC;case 35665:return zC;case 35666:return LC;case 35674:return KC;case 35675:return _C;case 35676:return PC;case 5124:case 35670:return DC;case 35667:case 35671:return OC;case 35668:case 35672:return UC;case 35669:case 35673:return jC;case 5125:return JC;case 36294:return QC;case 36295:return qC;case 36296:return $C;case 35678:case 36198:case 36298:case 36306:case 35682:return em;case 35679:case 36299:case 36307:return tm;case 35680:case 36300:case 36308:case 36293:return nm;case 36289:case 36303:case 36311:case 36292:return im}}(n.type)})),om=function(){function e(t){ka(this,e),this.id=t,this.seq=[],this.map={}}return Xe(e,[{key:"setValue",value:function(e,t,n){for(var i=this.seq,r=0,a=i.length;r!==a;++r){var o=i[r];o.setValue(e,t[o.id],n)}}}]),e}(),sm=/(\w+)(\])?(\[|\.)?/g;function lm(e,t){e.seq.push(t),e.map[t.id]=t}function cm(e,t,n){var i=e.name,r=i.length;for(sm.lastIndex=0;;){var a=sm.exec(i),o=sm.lastIndex,s=a[1],l="]"===a[2],c=a[3];if(l&&(s|=0),void 0===c||"["===c&&o+2===r){lm(n,void 0===c?new rm(s,e,t):new am(s,e,t));break}var u=n.map[s];void 0===u&&lm(n,u=new om(s)),n=u}}var um=function(){function e(t,n){ka(this,e),this.seq=[],this.map={};for(var i=t.getProgramParameter(n,35718),r=0;r<i;++r){var a=t.getActiveUniform(n,r);cm(a,t.getUniformLocation(n,a.name),this)}}return Xe(e,[{key:"setValue",value:function(e,t,n,i){var r=this.map[t];void 0!==r&&r.setValue(e,n,i)}},{key:"setOptional",value:function(e,t,n){var i=t[n];void 0!==i&&this.setValue(e,n,i)}}],[{key:"upload",value:function(e,t,n,i){for(var r=0,a=t.length;r!==a;++r){var o=t[r],s=n[o.id];!1!==s.needsUpdate&&o.setValue(e,s.value,i)}}},{key:"seqWithValue",value:function(e,t){for(var n=[],i=0,r=e.length;i!==r;++i){var a=e[i];a.id in t&&n.push(a)}return n}}]),e}();function gm(e,t,n){var i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),i}var dm=0;function hm(e,t,n){var i=e.getShaderParameter(t,35713),r=e.getShaderInfoLog(t).trim();if(i&&""===r)return"";var a=/ERROR: 0:(\d+)/.exec(r);if(a){var o=parseInt(a[1]);return n.toUpperCase()+"\n\n"+r+"\n\n"+function(e,t){for(var n=e.split("\n"),i=[],r=Math.max(t-6,0),a=Math.min(t+6,n.length),o=r;o<a;o++){var s=o+1;i.push("".concat(s===t?">":" "," ").concat(s,": ").concat(n[o]))}return i.join("\n")}(e.getShaderSource(t),o)}return r}function fm(e,t){var n=function(e){switch(e){case md:return["Linear","( value )"];case vd:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function pm(e,t){var n;switch(t){case Hu:n="Linear";break;case Tu:n="Reinhard";break;case Xu:n="OptimizedCineon";break;case Yu:n="ACESFilmic";break;case Eu:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Im(e){return""!==e}function Cm(e,t){var n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function mm(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var vm=/^[ \t]*#include +<([\w\d./]+)>/gm;function Am(e){return e.replace(vm,bm)}function bm(e,t){var n=ZI[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return Am(n)}var ym=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Gm(e){return e.replace(ym,wm)}function wm(e,t,n,i){for(var r="",a=parseInt(t);a<parseInt(n);a++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return r}function Bm(e){var t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function xm(e,t,n,i){var r,a,o=e.getContext(),s=n.defines,l=n.vertexShader,c=n.fragmentShader,u=function(e){var t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===jc?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===Jc?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===Qc&&(t="SHADOWMAP_TYPE_VSM"),t}(n),g=function(e){var t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case Lu:case Ku:t="ENVMAP_TYPE_CUBE";break;case Du:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),d=function(e){var t="ENVMAP_MODE_REFLECTION";e.envMap&&e.envMapMode===Ku&&(t="ENVMAP_MODE_REFRACTION");return t}(n),h=function(e){var t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case Mu:t="ENVMAP_BLENDING_MULTIPLY";break;case Vu:t="ENVMAP_BLENDING_MIX";break;case Fu:t="ENVMAP_BLENDING_ADD"}return t}(n),f=function(e){var t=e.envMapCubeUVHeight;if(null===t)return null;var n=Math.log2(t)-2,i=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:i,maxMip:n}}(n),p=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.normalMapTangentSpace||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Im).join("\n")}(n),I=function(e){var t=[];for(var n in e){var i=e[n];!1!==i&&t.push("#define "+n+" "+i)}return t.join("\n")}(s),C=o.createProgram(),m=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?((r=[I].filter(Im).join("\n")).length>0&&(r+="\n"),(a=[p,I].filter(Im).join("\n")).length>0&&(a+="\n")):(r=[Bm(n),"#define SHADER_NAME "+n.shaderName,I,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs2?"#define USE_UV2":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+u:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Im).join("\n"),a=[p,Bm(n),"#define SHADER_NAME "+n.shaderName,I,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+g:"",n.envMap?"#define "+d:"",n.envMap?"#define "+h:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs2?"#define USE_UV2":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+u:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Nu?"#define TONE_MAPPING":"",n.toneMapping!==Nu?ZI.tonemapping_pars_fragment:"",n.toneMapping!==Nu?pm("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",ZI.encodings_pars_fragment,fm("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Im).join("\n")),l=mm(l=Cm(l=Am(l),n),n),c=mm(c=Cm(c=Am(c),n),n),l=Gm(l),c=Gm(c),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(m="#version 300 es\n",r=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+r,a=["#define varying in",n.glslVersion===eh?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===eh?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+a);var v,A,b=m+a+c,y=gm(o,35633,m+r+l),G=gm(o,35632,b);if(o.attachShader(C,y),o.attachShader(C,G),void 0!==n.index0AttributeName?o.bindAttribLocation(C,0,n.index0AttributeName):!0===n.morphTargets&&o.bindAttribLocation(C,0,"position"),o.linkProgram(C),e.debug.checkShaderErrors){var w=o.getProgramInfoLog(C).trim(),B=o.getShaderInfoLog(y).trim(),x=o.getShaderInfoLog(G).trim(),S=!0,Z=!0;if(!1===o.getProgramParameter(C,35714))if(S=!1,"function"===typeof e.debug.onShaderError)e.debug.onShaderError(o,C,y,G);else{var k=hm(o,y,"vertex"),R=hm(o,G,"fragment");console.error("THREE.WebGLProgram: Shader Error "+o.getError()+" - VALIDATE_STATUS "+o.getProgramParameter(C,35715)+"\n\nProgram Info Log: "+w+"\n"+k+"\n"+R)}else""!==w?console.warn("THREE.WebGLProgram: Program Info Log:",w):""!==B&&""!==x||(Z=!1);Z&&(this.diagnostics={runnable:S,programLog:w,vertexShader:{log:B,prefix:r},fragmentShader:{log:x,prefix:a}})}return o.deleteShader(y),o.deleteShader(G),this.getUniforms=function(){return void 0===v&&(v=new um(o,C)),v},this.getAttributes=function(){return void 0===A&&(A=function(e,t){for(var n={},i=e.getProgramParameter(t,35721),r=0;r<i;r++){var a=e.getActiveAttrib(t,r),o=a.name,s=1;35674===a.type&&(s=2),35675===a.type&&(s=3),35676===a.type&&(s=4),n[o]={type:a.type,location:e.getAttribLocation(t,o),locationSize:s}}return n}(o,C)),A},this.destroy=function(){i.releaseStatesOfProgram(this),o.deleteProgram(C),this.program=void 0},this.name=n.shaderName,this.id=dm++,this.cacheKey=t,this.usedTimes=1,this.program=C,this.vertexShader=y,this.fragmentShader=G,this}var Sm=0,Zm=function(){function e(){ka(this,e),this.shaderCache=new Map,this.materialCache=new Map}return Xe(e,[{key:"update",value:function(e){var t=e.vertexShader,n=e.fragmentShader,i=this._getShaderStage(t),r=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return!1===a.has(i)&&(a.add(i),i.usedTimes++),!1===a.has(r)&&(a.add(r),r.usedTimes++),this}},{key:"remove",value:function(e){var t,n=Fc(this.materialCache.get(e));try{for(n.s();!(t=n.n()).done;){var i=t.value;i.usedTimes--,0===i.usedTimes&&this.shaderCache.delete(i.code)}}catch(r){n.e(r)}finally{n.f()}return this.materialCache.delete(e),this}},{key:"getVertexShaderID",value:function(e){return this._getShaderStage(e.vertexShader).id}},{key:"getFragmentShaderID",value:function(e){return this._getShaderStage(e.fragmentShader).id}},{key:"dispose",value:function(){this.shaderCache.clear(),this.materialCache.clear()}},{key:"_getShaderCacheForMaterial",value:function(e){var t=this.materialCache,n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}},{key:"_getShaderStage",value:function(e){var t=this.shaderCache,n=t.get(e);return void 0===n&&(n=new km(e),t.set(e,n)),n}}]),e}(),km=Xe((function e(t){ka(this,e),this.id=Sm++,this.code=t,this.usedTimes=0}));function Rm(e,t,n,i,r,a,o){var s=new Vf,l=new Zm,c=[],u=r.isWebGL2,g=r.logarithmicDepthBuffer,d=r.vertexTextures,h=r.precision,f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function p(e){return 1===e?"uv2":"uv"}return{getParameters:function(a,s,c,I,C){var m=I.fog,v=C.geometry,A=a.isMeshStandardMaterial?I.environment:null,b=(a.isMeshStandardMaterial?n:t).get(a.envMap||A),y=b&&b.mapping===Du?b.image.height:null,G=f[a.type];null!==a.precision&&(h=r.getMaxPrecision(a.precision))!==a.precision&&console.warn("THREE.WebGLProgram.getParameters:",a.precision,"not supported, using",h,"instead.");var w,B,x,S,Z=v.morphAttributes.position||v.morphAttributes.normal||v.morphAttributes.color,k=void 0!==Z?Z.length:0,R=0;if(void 0!==v.morphAttributes.position&&(R=1),void 0!==v.morphAttributes.normal&&(R=2),void 0!==v.morphAttributes.color&&(R=3),G){var W=RI[G];w=W.vertexShader,B=W.fragmentShader}else w=a.vertexShader,B=a.fragmentShader,l.update(a),x=l.getVertexShaderID(a),S=l.getFragmentShaderID(a);var M=e.getRenderTarget(),V=!0===C.isInstancedMesh,F=!!a.map,N=!!a.matcap,H=!!b,T=!!a.aoMap,X=!!a.lightMap,Y=!!a.bumpMap,E=!!a.normalMap,z=!!a.displacementMap,L=!!a.emissiveMap,K=!!a.metalnessMap,_=!!a.roughnessMap,P=a.clearcoat>0,D=a.iridescence>0,O=a.sheen>0,U=a.transmission>0,j=P&&!!a.clearcoatMap,J=P&&!!a.clearcoatNormalMap,Q=P&&!!a.clearcoatRoughnessMap,q=D&&!!a.iridescenceMap,$=D&&!!a.iridescenceThicknessMap,ee=O&&!!a.sheenColorMap,te=O&&!!a.sheenRoughnessMap,ne=!!a.specularMap,ie=!!a.specularColorMap,re=!!a.specularIntensityMap,ae=U&&!!a.transmissionMap,oe=U&&!!a.thicknessMap,se=!!a.gradientMap,le=!!a.alphaMap,ce=a.alphaTest>0,ue=!!a.extensions,ge=!!v.attributes.uv2;return{isWebGL2:u,shaderID:G,shaderName:a.type,vertexShader:w,fragmentShader:B,defines:a.defines,customVertexShaderID:x,customFragmentShaderID:S,isRawShaderMaterial:!0===a.isRawShaderMaterial,glslVersion:a.glslVersion,precision:h,instancing:V,instancingColor:V&&null!==C.instanceColor,supportsVertexTextures:d,outputEncoding:null===M?e.outputEncoding:!0===M.isXRRenderTarget?M.texture.encoding:md,map:F,matcap:N,envMap:H,envMapMode:H&&b.mapping,envMapCubeUVHeight:y,aoMap:T,lightMap:X,bumpMap:Y,normalMap:E,displacementMap:d&&z,emissiveMap:L,normalMapObjectSpace:E&&a.normalMapType===Gd,normalMapTangentSpace:E&&a.normalMapType===yd,decodeVideoTexture:F&&!0===a.map.isVideoTexture&&a.map.encoding===vd,metalnessMap:K,roughnessMap:_,clearcoat:P,clearcoatMap:j,clearcoatNormalMap:J,clearcoatRoughnessMap:Q,iridescence:D,iridescenceMap:q,iridescenceThicknessMap:$,sheen:O,sheenColorMap:ee,sheenRoughnessMap:te,specularMap:ne,specularColorMap:ie,specularIntensityMap:re,transmission:U,transmissionMap:ae,thicknessMap:oe,gradientMap:se,opaque:!1===a.transparent&&a.blending===iu,alphaMap:le,alphaTest:ce,combine:a.combine,mapUv:F&&p(a.map.channel),aoMapUv:T&&p(a.aoMap.channel),lightMapUv:X&&p(a.lightMap.channel),bumpMapUv:Y&&p(a.bumpMap.channel),normalMapUv:E&&p(a.normalMap.channel),displacementMapUv:z&&p(a.displacementMap.channel),emissiveMapUv:L&&p(a.emissiveMap.channel),metalnessMapUv:K&&p(a.metalnessMap.channel),roughnessMapUv:_&&p(a.roughnessMap.channel),clearcoatMapUv:j&&p(a.clearcoatMap.channel),clearcoatNormalMapUv:J&&p(a.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Q&&p(a.clearcoatRoughnessMap.channel),iridescenceMapUv:q&&p(a.iridescenceMap.channel),iridescenceThicknessMapUv:$&&p(a.iridescenceThicknessMap.channel),sheenColorMapUv:ee&&p(a.sheenColorMap.channel),sheenRoughnessMapUv:te&&p(a.sheenRoughnessMap.channel),specularMapUv:ne&&p(a.specularMap.channel),specularColorMapUv:ie&&p(a.specularColorMap.channel),specularIntensityMapUv:re&&p(a.specularIntensityMap.channel),transmissionMapUv:ae&&p(a.transmissionMap.channel),thicknessMapUv:oe&&p(a.thicknessMap.channel),alphaMapUv:le&&p(a.alphaMap.channel),vertexTangents:E&&!!v.attributes.tangent,vertexColors:a.vertexColors,vertexAlphas:!0===a.vertexColors&&!!v.attributes.color&&4===v.attributes.color.itemSize,vertexUvs2:ge,pointsUvs:!0===C.isPoints&&!!v.attributes.uv&&(F||le),fog:!!m,useFog:!0===a.fog,fogExp2:m&&m.isFogExp2,flatShading:!0===a.flatShading,sizeAttenuation:!0===a.sizeAttenuation,logarithmicDepthBuffer:g,skinning:!0===C.isSkinnedMesh,morphTargets:void 0!==v.morphAttributes.position,morphNormals:void 0!==v.morphAttributes.normal,morphColors:void 0!==v.morphAttributes.color,morphTargetsCount:k,morphTextureStride:R,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numSpotLightMaps:s.spotLightMap.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numSpotLightShadowsWithMaps:s.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:a.dithering,shadowMapEnabled:e.shadowMap.enabled&&c.length>0,shadowMapType:e.shadowMap.type,toneMapping:a.toneMapped?e.toneMapping:Nu,useLegacyLights:e.useLegacyLights,premultipliedAlpha:a.premultipliedAlpha,doubleSided:a.side===eu,flipSided:a.side===$c,useDepthPacking:a.depthPacking>=0,depthPacking:a.depthPacking||0,index0AttributeName:a.index0AttributeName,extensionDerivatives:ue&&!0===a.extensions.derivatives,extensionFragDepth:ue&&!0===a.extensions.fragDepth,extensionDrawBuffers:ue&&!0===a.extensions.drawBuffers,extensionShaderTextureLOD:ue&&!0===a.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||i.has("EXT_shader_texture_lod"),customProgramCacheKey:a.customProgramCacheKey()}},getProgramCacheKey:function(t){var n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(var i in t.defines)n.push(i),n.push(t.defines[i]);return!1===t.isRawShaderMaterial&&(!function(e,t){e.push(t.precision),e.push(t.outputEncoding),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.mapUv),e.push(t.alphaMapUv),e.push(t.lightMapUv),e.push(t.aoMapUv),e.push(t.bumpMapUv),e.push(t.normalMapUv),e.push(t.displacementMapUv),e.push(t.emissiveMapUv),e.push(t.metalnessMapUv),e.push(t.roughnessMapUv),e.push(t.clearcoatMapUv),e.push(t.clearcoatNormalMapUv),e.push(t.clearcoatRoughnessMapUv),e.push(t.iridescenceMapUv),e.push(t.iridescenceThicknessMapUv),e.push(t.sheenColorMapUv),e.push(t.sheenRoughnessMapUv),e.push(t.specularMapUv),e.push(t.specularColorMapUv),e.push(t.specularIntensityMapUv),e.push(t.transmissionMapUv),e.push(t.thicknessMapUv),e.push(t.combine),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){s.disableAll(),t.isWebGL2&&s.enable(0);t.supportsVertexTextures&&s.enable(1);t.instancing&&s.enable(2);t.instancingColor&&s.enable(3);t.matcap&&s.enable(4);t.envMap&&s.enable(5);t.normalMapObjectSpace&&s.enable(6);t.normalMapTangentSpace&&s.enable(7);t.clearcoat&&s.enable(8);t.iridescence&&s.enable(9);t.alphaTest&&s.enable(10);t.vertexColors&&s.enable(11);t.vertexAlphas&&s.enable(12);t.vertexUvs2&&s.enable(13);t.vertexTangents&&s.enable(14);e.push(s.mask),s.disableAll(),t.fog&&s.enable(0);t.useFog&&s.enable(1);t.flatShading&&s.enable(2);t.logarithmicDepthBuffer&&s.enable(3);t.skinning&&s.enable(4);t.morphTargets&&s.enable(5);t.morphNormals&&s.enable(6);t.morphColors&&s.enable(7);t.premultipliedAlpha&&s.enable(8);t.shadowMapEnabled&&s.enable(9);t.useLegacyLights&&s.enable(10);t.doubleSided&&s.enable(11);t.flipSided&&s.enable(12);t.useDepthPacking&&s.enable(13);t.dithering&&s.enable(14);t.transmission&&s.enable(15);t.sheen&&s.enable(16);t.decodeVideoTexture&&s.enable(17);t.opaque&&s.enable(18);t.pointsUvs&&s.enable(19);e.push(s.mask)}(n,t),n.push(e.outputEncoding)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){var t,n=f[e.type];if(n){var i=RI[n];t=uI.clone(i.uniforms)}else t=e.uniforms;return t},acquireProgram:function(t,n){for(var i,r=0,o=c.length;r<o;r++){var s=c[r];if(s.cacheKey===n){++(i=s).usedTimes;break}}return void 0===i&&(i=new xm(e,n,t,a),c.push(i)),i},releaseProgram:function(e){if(0===--e.usedTimes){var t=c.indexOf(e);c[t]=c[c.length-1],c.pop(),e.destroy()}},releaseShaderCache:function(e){l.remove(e)},programs:c,dispose:function(){l.dispose()}}}function Wm(){var e=new WeakMap;return{get:function(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,i){e.get(t)[n]=i},dispose:function(){e=new WeakMap}}}function Mm(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Vm(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Fm(){var e=[],t=0,n=[],i=[],r=[];function a(n,i,r,a,o,s){var l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:i,material:r,groupOrder:a,renderOrder:n.renderOrder,z:o,group:s},e[t]=l):(l.id=n.id,l.object=n,l.geometry=i,l.material=r,l.groupOrder=a,l.renderOrder=n.renderOrder,l.z=o,l.group=s),t++,l}return{opaque:n,transmissive:i,transparent:r,init:function(){t=0,n.length=0,i.length=0,r.length=0},push:function(e,t,o,s,l,c){var u=a(e,t,o,s,l,c);o.transmission>0?i.push(u):!0===o.transparent?r.push(u):n.push(u)},unshift:function(e,t,o,s,l,c){var u=a(e,t,o,s,l,c);o.transmission>0?i.unshift(u):!0===o.transparent?r.unshift(u):n.unshift(u)},finish:function(){for(var n=t,i=e.length;n<i;n++){var r=e[n];if(null===r.id)break;r.id=null,r.object=null,r.geometry=null,r.material=null,r.group=null}},sort:function(e,t){n.length>1&&n.sort(e||Mm),i.length>1&&i.sort(t||Vm),r.length>1&&r.sort(t||Vm)}}}function Nm(){var e=new WeakMap;return{get:function(t,n){var i,r=e.get(t);return void 0===r?(i=new Fm,e.set(t,[i])):n>=r.length?(i=new Fm,r.push(i)):i=r[n],i},dispose:function(){e=new WeakMap}}}function Hm(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new Ph,color:new dp};break;case"SpotLight":n={position:new Ph,direction:new Ph,color:new dp,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Ph,color:new dp,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Ph,skyColor:new dp,groundColor:new dp};break;case"RectAreaLight":n={color:new dp,position:new Ph,halfWidth:new Ph,halfHeight:new Ph}}return e[t.id]=n,n}}}var Tm=0;function Xm(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function Ym(e,t){for(var n=new Hm,i=function(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ch};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ch,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0},a=0;a<9;a++)r.probe.push(new Ph);var o=new Ph,s=new yf,l=new yf;return{setup:function(a,o){for(var s=0,l=0,c=0,u=0;u<9;u++)r.probe[u].set(0,0,0);var g=0,d=0,h=0,f=0,p=0,I=0,C=0,m=0,v=0,A=0;a.sort(Xm);for(var b=!0===o?Math.PI:1,y=0,G=a.length;y<G;y++){var w=a[y],B=w.color,x=w.intensity,S=w.distance,Z=w.shadow&&w.shadow.map?w.shadow.map.texture:null;if(w.isAmbientLight)s+=B.r*x*b,l+=B.g*x*b,c+=B.b*x*b;else if(w.isLightProbe)for(var k=0;k<9;k++)r.probe[k].addScaledVector(w.sh.coefficients[k],x);else if(w.isDirectionalLight){var R=n.get(w);if(R.color.copy(w.color).multiplyScalar(w.intensity*b),w.castShadow){var W=w.shadow,M=i.get(w);M.shadowBias=W.bias,M.shadowNormalBias=W.normalBias,M.shadowRadius=W.radius,M.shadowMapSize=W.mapSize,r.directionalShadow[g]=M,r.directionalShadowMap[g]=Z,r.directionalShadowMatrix[g]=w.shadow.matrix,I++}r.directional[g]=R,g++}else if(w.isSpotLight){var V=n.get(w);V.position.setFromMatrixPosition(w.matrixWorld),V.color.copy(B).multiplyScalar(x*b),V.distance=S,V.coneCos=Math.cos(w.angle),V.penumbraCos=Math.cos(w.angle*(1-w.penumbra)),V.decay=w.decay,r.spot[h]=V;var F=w.shadow;if(w.map&&(r.spotLightMap[v]=w.map,v++,F.updateMatrices(w),w.castShadow&&A++),r.spotLightMatrix[h]=F.matrix,w.castShadow){var N=i.get(w);N.shadowBias=F.bias,N.shadowNormalBias=F.normalBias,N.shadowRadius=F.radius,N.shadowMapSize=F.mapSize,r.spotShadow[h]=N,r.spotShadowMap[h]=Z,m++}h++}else if(w.isRectAreaLight){var H=n.get(w);H.color.copy(B).multiplyScalar(x),H.halfWidth.set(.5*w.width,0,0),H.halfHeight.set(0,.5*w.height,0),r.rectArea[f]=H,f++}else if(w.isPointLight){var T=n.get(w);if(T.color.copy(w.color).multiplyScalar(w.intensity*b),T.distance=w.distance,T.decay=w.decay,w.castShadow){var X=w.shadow,Y=i.get(w);Y.shadowBias=X.bias,Y.shadowNormalBias=X.normalBias,Y.shadowRadius=X.radius,Y.shadowMapSize=X.mapSize,Y.shadowCameraNear=X.camera.near,Y.shadowCameraFar=X.camera.far,r.pointShadow[d]=Y,r.pointShadowMap[d]=Z,r.pointShadowMatrix[d]=w.shadow.matrix,C++}r.point[d]=T,d++}else if(w.isHemisphereLight){var E=n.get(w);E.skyColor.copy(w.color).multiplyScalar(x*b),E.groundColor.copy(w.groundColor).multiplyScalar(x*b),r.hemi[p]=E,p++}}f>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(r.rectAreaLTC1=kI.LTC_FLOAT_1,r.rectAreaLTC2=kI.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=kI.LTC_HALF_1,r.rectAreaLTC2=kI.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=s,r.ambient[1]=l,r.ambient[2]=c;var z=r.hash;z.directionalLength===g&&z.pointLength===d&&z.spotLength===h&&z.rectAreaLength===f&&z.hemiLength===p&&z.numDirectionalShadows===I&&z.numPointShadows===C&&z.numSpotShadows===m&&z.numSpotMaps===v||(r.directional.length=g,r.spot.length=h,r.rectArea.length=f,r.point.length=d,r.hemi.length=p,r.directionalShadow.length=I,r.directionalShadowMap.length=I,r.pointShadow.length=C,r.pointShadowMap.length=C,r.spotShadow.length=m,r.spotShadowMap.length=m,r.directionalShadowMatrix.length=I,r.pointShadowMatrix.length=C,r.spotLightMatrix.length=m+v-A,r.spotLightMap.length=v,r.numSpotLightShadowsWithMaps=A,z.directionalLength=g,z.pointLength=d,z.spotLength=h,z.rectAreaLength=f,z.hemiLength=p,z.numDirectionalShadows=I,z.numPointShadows=C,z.numSpotShadows=m,z.numSpotMaps=v,r.version=Tm++)},setupView:function(e,t){for(var n=0,i=0,a=0,c=0,u=0,g=t.matrixWorldInverse,d=0,h=e.length;d<h;d++){var f=e[d];if(f.isDirectionalLight){var p=r.directional[n];p.direction.setFromMatrixPosition(f.matrixWorld),o.setFromMatrixPosition(f.target.matrixWorld),p.direction.sub(o),p.direction.transformDirection(g),n++}else if(f.isSpotLight){var I=r.spot[a];I.position.setFromMatrixPosition(f.matrixWorld),I.position.applyMatrix4(g),I.direction.setFromMatrixPosition(f.matrixWorld),o.setFromMatrixPosition(f.target.matrixWorld),I.direction.sub(o),I.direction.transformDirection(g),a++}else if(f.isRectAreaLight){var C=r.rectArea[c];C.position.setFromMatrixPosition(f.matrixWorld),C.position.applyMatrix4(g),l.identity(),s.copy(f.matrixWorld),s.premultiply(g),l.extractRotation(s),C.halfWidth.set(.5*f.width,0,0),C.halfHeight.set(0,.5*f.height,0),C.halfWidth.applyMatrix4(l),C.halfHeight.applyMatrix4(l),c++}else if(f.isPointLight){var m=r.point[i];m.position.setFromMatrixPosition(f.matrixWorld),m.position.applyMatrix4(g),i++}else if(f.isHemisphereLight){var v=r.hemi[u];v.direction.setFromMatrixPosition(f.matrixWorld),v.direction.transformDirection(g),u++}}},state:r}}function Em(e,t){var n=new Ym(e,t),i=[],r=[];return{init:function(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:n},setupLights:function(e){n.setup(i,e)},setupLightsView:function(e){n.setupView(i,e)},pushLight:function(e){i.push(e)},pushShadow:function(e){r.push(e)}}}function zm(e,t){var n=new WeakMap;return{get:function(i){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=n.get(i);return void 0===o?(r=new Em(e,t),n.set(i,[r])):a>=o.length?(r=new Em(e,t),o.push(r)):r=o[a],r},dispose:function(){n=new WeakMap}}}var Lm=function(e){kc(n,e);var t=Vc(n);function n(e){var i;return ka(this,n),(i=t.call(this)).isMeshDepthMaterial=!0,i.type="MeshDepthMaterial",i.depthPacking=Ad,i.map=null,i.alphaMap=null,i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.wireframe=!1,i.wireframeLinewidth=1,i.setValues(e),i}return Xe(n,[{key:"copy",value:function(e){return Yc(Rc(n.prototype),"copy",this).call(this,e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}]),n}(sp),Km=function(e){kc(n,e);var t=Vc(n);function n(e){var i;return ka(this,n),(i=t.call(this)).isMeshDistanceMaterial=!0,i.type="MeshDistanceMaterial",i.map=null,i.alphaMap=null,i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.setValues(e),i}return Xe(n,[{key:"copy",value:function(e){return Yc(Rc(n.prototype),"copy",this).call(this,e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}]),n}(sp);function _m(e,t,n){var i,r=new wI,a=new Ch,o=new Ch,s=new Th,l=new Lm({depthPacking:bd}),c=new Km,u={},g=n.maxTextureSize,d=(ke(i={},qc,$c),ke(i,$c,qc),ke(i,eu,eu),i),h=new gI({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ch},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),f=h.clone();f.defines.HORIZONTAL_PASS=1;var p=new Ep;p.setAttribute("position",new yp(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var I=new rI(p,h),C=this;function m(n,i){var r=t.update(I);h.defines.VSM_SAMPLES!==n.blurSamples&&(h.defines.VSM_SAMPLES=n.blurSamples,f.defines.VSM_SAMPLES=n.blurSamples,h.needsUpdate=!0,f.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new Xh(a.x,a.y)),h.uniforms.shadow_pass.value=n.map.texture,h.uniforms.resolution.value=n.mapSize,h.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(i,null,r,h,I,null),f.uniforms.shadow_pass.value=n.mapPass.texture,f.uniforms.resolution.value=n.mapSize,f.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(i,null,r,f,I,null)}function v(t,n,i,r){var a=null,o=!0===i.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==o)a=o;else if(a=!0===i.isPointLight?c:l,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){var s=a.uuid,g=n.uuid,h=u[s];void 0===h&&(h={},u[s]=h);var f=h[g];void 0===f&&(f=a.clone(),h[g]=f),a=f}(a.visible=n.visible,a.wireframe=n.wireframe,a.side=r===Qc?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:d[n.side],a.alphaMap=n.alphaMap,a.alphaTest=n.alphaTest,a.map=n.map,a.clipShadows=n.clipShadows,a.clippingPlanes=n.clippingPlanes,a.clipIntersection=n.clipIntersection,a.displacementMap=n.displacementMap,a.displacementScale=n.displacementScale,a.displacementBias=n.displacementBias,a.wireframeLinewidth=n.wireframeLinewidth,a.linewidth=n.linewidth,!0===i.isPointLight&&!0===a.isMeshDistanceMaterial)&&(e.properties.get(a).light=i);return a}function A(n,i,a,o,s){if(!1!==n.visible){if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===Qc)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);var l=t.update(n),c=n.material;if(Array.isArray(c))for(var u=l.groups,g=0,d=u.length;g<d;g++){var h=u[g],f=c[h.materialIndex];if(f&&f.visible){var p=v(n,f,o,s);e.renderBufferDirect(a,null,l,p,n,h)}}else if(c.visible){var I=v(n,c,o,s);e.renderBufferDirect(a,null,l,I,n,null)}}for(var C=n.children,m=0,b=C.length;m<b;m++)A(C[m],i,a,o,s)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=jc,this.render=function(t,n,i){if(!1!==C.enabled&&(!1!==C.autoUpdate||!1!==C.needsUpdate)&&0!==t.length){var l=e.getRenderTarget(),c=e.getActiveCubeFace(),u=e.getActiveMipmapLevel(),d=e.state;d.setBlending(nu),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(var h=0,f=t.length;h<f;h++){var p=t[h],I=p.shadow;if(void 0!==I){if(!1!==I.autoUpdate||!1!==I.needsUpdate){a.copy(I.mapSize);var v=I.getFrameExtents();if(a.multiply(v),o.copy(I.mapSize),(a.x>g||a.y>g)&&(a.x>g&&(o.x=Math.floor(g/v.x),a.x=o.x*v.x,I.mapSize.x=o.x),a.y>g&&(o.y=Math.floor(g/v.y),a.y=o.y*v.y,I.mapSize.y=o.y)),null===I.map){var b=this.type!==Qc?{minFilter:Ju,magFilter:Ju}:{};I.map=new Xh(a.x,a.y,b),I.map.texture.name=p.name+".shadowMap",I.camera.updateProjectionMatrix()}e.setRenderTarget(I.map),e.clear();for(var y=I.getViewportCount(),G=0;G<y;G++){var w=I.getViewport(G);s.set(o.x*w.x,o.y*w.y,o.x*w.z,o.y*w.w),d.viewport(s),I.updateMatrices(p,G),r=I.getFrustum(),A(n,i,I.camera,p,this.type)}!0!==I.isPointLightShadow&&this.type===Qc&&m(I,i),I.needsUpdate=!1}}else console.warn("THREE.WebGLShadowMap:",p,"has no shadow.")}C.needsUpdate=!1,e.setRenderTarget(l,c,u)}}}function Pm(e,t,n){var i,r,a=n.isWebGL2;var o=new function(){var t=!1,n=new Th,i=null,r=new Th(0,0,0,0);return{setMask:function(n){i===n||t||(e.colorMask(n,n,n,n),i=n)},setLocked:function(e){t=e},setClear:function(t,i,a,o,s){!0===s&&(t*=o,i*=o,a*=o),n.set(t,i,a,o),!1===r.equals(n)&&(e.clearColor(t,i,a,o),r.copy(n))},reset:function(){t=!1,i=null,r.set(-1,0,0,0)}}},s=new function(){var t=!1,n=null,i=null,r=null;return{setTest:function(e){e?L(2929):K(2929)},setMask:function(i){n===i||t||(e.depthMask(i),n=i)},setFunc:function(t){if(i!==t){switch(t){case wu:e.depthFunc(512);break;case Bu:e.depthFunc(519);break;case xu:e.depthFunc(513);break;case Su:e.depthFunc(515);break;case Zu:e.depthFunc(514);break;case ku:e.depthFunc(518);break;case Ru:e.depthFunc(516);break;case Wu:e.depthFunc(517);break;default:e.depthFunc(515)}i=t}},setLocked:function(e){t=e},setClear:function(t){r!==t&&(e.clearDepth(t),r=t)},reset:function(){t=!1,n=null,i=null,r=null}}},l=new function(){var t=!1,n=null,i=null,r=null,a=null,o=null,s=null,l=null,c=null;return{setTest:function(e){t||(e?L(2960):K(2960))},setMask:function(i){n===i||t||(e.stencilMask(i),n=i)},setFunc:function(t,n,o){i===t&&r===n&&a===o||(e.stencilFunc(t,n,o),i=t,r=n,a=o)},setOp:function(t,n,i){o===t&&s===n&&l===i||(e.stencilOp(t,n,i),o=t,s=n,l=i)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,i=null,r=null,a=null,o=null,s=null,l=null,c=null}}},c=new WeakMap,u=new WeakMap,g={},d={},h=new WeakMap,f=[],p=null,I=!1,C=null,m=null,v=null,A=null,b=null,y=null,G=null,w=!1,B=null,x=null,S=null,Z=null,k=null,R=e.getParameter(35661),W=!1,M=0,V=e.getParameter(7938);-1!==V.indexOf("WebGL")?(M=parseFloat(/^WebGL (\d)/.exec(V)[1]),W=M>=1):-1!==V.indexOf("OpenGL ES")&&(M=parseFloat(/^OpenGL ES (\d)/.exec(V)[1]),W=M>=2);var F=null,N={},H=e.getParameter(3088),T=e.getParameter(2978),X=(new Th).fromArray(H),Y=(new Th).fromArray(T);function E(t,n,i){var r=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(var o=0;o<i;o++)e.texImage2D(n+o,0,6408,1,1,0,6408,5121,r);return a}var z={};function L(t){!0!==g[t]&&(e.enable(t),g[t]=!0)}function K(t){!1!==g[t]&&(e.disable(t),g[t]=!1)}z[3553]=E(3553,3553,1),z[34067]=E(34067,34069,6),o.setClear(0,0,0,1),s.setClear(1),l.setClear(0),L(2929),s.setFunc(Su),U(!1),j(Pc),L(2884),O(nu);var _=(ke(i={},lu,32774),ke(i,cu,32778),ke(i,uu,32779),i);if(a)_[gu]=32775,_[du]=32776;else{var P=t.get("EXT_blend_minmax");null!==P&&(_[gu]=P.MIN_EXT,_[du]=P.MAX_EXT)}var D=(ke(r={},hu,0),ke(r,fu,1),ke(r,pu,768),ke(r,Cu,770),ke(r,Gu,776),ke(r,bu,774),ke(r,vu,772),ke(r,Iu,769),ke(r,mu,771),ke(r,yu,775),ke(r,Au,773),r);function O(t,n,i,r,a,o,s,l){if(t!==nu){if(!1===I&&(L(3042),I=!0),t===su)a=a||n,o=o||i,s=s||r,n===m&&a===b||(e.blendEquationSeparate(_[n],_[a]),m=n,b=a),i===v&&r===A&&o===y&&s===G||(e.blendFuncSeparate(D[i],D[r],D[o],D[s]),v=i,A=r,y=o,G=s),C=t,w=!1;else if(t!==C||l!==w){if(m===lu&&b===lu||(e.blendEquation(32774),m=lu,b=lu),l)switch(t){case iu:e.blendFuncSeparate(1,771,1,771);break;case ru:e.blendFunc(1,1);break;case au:e.blendFuncSeparate(0,769,0,1);break;case ou:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case iu:e.blendFuncSeparate(770,771,1,771);break;case ru:e.blendFunc(770,1);break;case au:e.blendFuncSeparate(0,769,0,1);break;case ou:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}v=null,A=null,y=null,G=null,C=t,w=l}}else!0===I&&(K(3042),I=!1)}function U(t){B!==t&&(t?e.frontFace(2304):e.frontFace(2305),B=t)}function j(t){t!==_c?(L(2884),t!==x&&(t===Pc?e.cullFace(1029):t===Dc?e.cullFace(1028):e.cullFace(1032))):K(2884),x=t}function J(t,n,i){t?(L(32823),Z===n&&k===i||(e.polygonOffset(n,i),Z=n,k=i)):K(32823)}return{buffers:{color:o,depth:s,stencil:l},enable:L,disable:K,bindFramebuffer:function(t,n){return d[t]!==n&&(e.bindFramebuffer(t,n),d[t]=n,a&&(36009===t&&(d[36160]=n),36160===t&&(d[36009]=n)),!0)},drawBuffers:function(i,r){var a=f,o=!1;if(i)if(void 0===(a=h.get(r))&&(a=[],h.set(r,a)),i.isWebGLMultipleRenderTargets){var s=i.texture;if(a.length!==s.length||36064!==a[0]){for(var l=0,c=s.length;l<c;l++)a[l]=36064+l;a.length=s.length,o=!0}}else 36064!==a[0]&&(a[0]=36064,o=!0);else 1029!==a[0]&&(a[0]=1029,o=!0);o&&(n.isWebGL2?e.drawBuffers(a):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(a))},useProgram:function(t){return p!==t&&(e.useProgram(t),p=t,!0)},setBlending:O,setMaterial:function(e,t){e.side===eu?K(2884):L(2884);var n=e.side===$c;t&&(n=!n),U(n),e.blending===iu&&!1===e.transparent?O(nu):O(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),s.setFunc(e.depthFunc),s.setTest(e.depthTest),s.setMask(e.depthWrite),o.setMask(e.colorWrite);var i=e.stencilWrite;l.setTest(i),i&&(l.setMask(e.stencilWriteMask),l.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),l.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),J(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?L(32926):K(32926)},setFlipSided:U,setCullFace:j,setLineWidth:function(t){t!==S&&(W&&e.lineWidth(t),S=t)},setPolygonOffset:J,setScissorTest:function(e){e?L(3089):K(3089)},activeTexture:function(t){void 0===t&&(t=33984+R-1),F!==t&&(e.activeTexture(t),F=t)},bindTexture:function(t,n,i){void 0===i&&(i=null===F?33984+R-1:F);var r=N[i];void 0===r&&(r={type:void 0,texture:void 0},N[i]=r),r.type===t&&r.texture===n||(F!==i&&(e.activeTexture(i),F=i),e.bindTexture(t,n||z[t]),r.type=t,r.texture=n)},unbindTexture:function(){var t=N[F];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexImage3D:function(){try{e.compressedTexImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},updateUBOMapping:function(t,n){var i=u.get(n);void 0===i&&(i=new WeakMap,u.set(n,i));var r=i.get(t);void 0===r&&(r=e.getUniformBlockIndex(n,t.name),i.set(t,r))},uniformBlockBinding:function(t,n){var i=u.get(n).get(t);c.get(n)!==i&&(e.uniformBlockBinding(n,i,t.__bindingPointIndex),c.set(n,i))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===X.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),X.copy(t))},viewport:function(t){!1===Y.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),Y.copy(t))},reset:function(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===a&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),g={},F=null,N={},d={},h=new WeakMap,f=[],p=null,I=!1,C=null,m=null,v=null,A=null,b=null,y=null,G=null,w=!1,B=null,x=null,S=null,Z=null,k=null,X.set(0,0,e.canvas.width,e.canvas.height),Y.set(0,0,e.canvas.width,e.canvas.height),o.reset(),s.reset(),l.reset()}}}function Dm(e,t,n,i,r,a,o){var s,l,c,u=r.isWebGL2,g=r.maxTextures,d=r.maxCubemapSize,h=r.maxTextureSize,f=r.maxSamples,p=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,I="undefined"!==typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),C=new WeakMap,m=new WeakMap,v=!1;try{v="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(_){}function A(e,t){return v?new OffscreenCanvas(e,t):Gh("canvas")}function b(e,t,n,i){var r=1;if((e.width>i||e.height>i)&&(r=i/Math.max(e.width,e.height)),r<1||!0===t){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){var a=t?hh:Math.floor,o=a(r*e.width),s=a(r*e.height);void 0===c&&(c=A(o,s));var l=n?A(o,s):c;return l.width=o,l.height=s,l.getContext("2d").drawImage(e,0,0,o,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+o+"x"+s+")."),l}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function y(e){return gh(e.width)&&gh(e.height)}function G(e,t){return e.generateMipmaps&&t&&e.minFilter!==Ju&&e.minFilter!==tg}function w(t){e.generateMipmap(t)}function B(n,i,r,a){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!1===u)return i;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}var s=i;return 6403===i&&(5126===r&&(s=33326),5131===r&&(s=33325),5121===r&&(s=33321)),33319===i&&(5126===r&&(s=33328),5131===r&&(s=33327),5121===r&&(s=33323)),6408===i&&(5126===r&&(s=34836),5131===r&&(s=34842),5121===r&&(s=a===vd&&!1===o?35907:32856),32819===r&&(s=32854),32820===r&&(s=32855)),33325!==s&&33326!==s&&33327!==s&&33328!==s&&34842!==s&&34836!==s||t.get("EXT_color_buffer_float"),s}function x(e,t,n){return!0===G(e,n)||e.isFramebufferTexture&&e.minFilter!==Ju&&e.minFilter!==tg?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function S(e){return e===Ju||e===Qu||e===$u?9728:9729}function Z(e){var t=e.target;t.removeEventListener("dispose",Z),function(e){var t=i.get(e);if(void 0===t.__webglInit)return;var n=e.source,r=m.get(n);if(r){var a=r[t.__cacheKey];a.usedTimes--,0===a.usedTimes&&R(e),0===Object.keys(r).length&&m.delete(n)}i.remove(e)}(t),t.isVideoTexture&&C.delete(t)}function k(t){var n=t.target;n.removeEventListener("dispose",k),function(t){var n=t.texture,r=i.get(t),a=i.get(n);void 0!==a.__webglTexture&&(e.deleteTexture(a.__webglTexture),o.memory.textures--);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(var s=0;s<6;s++)e.deleteFramebuffer(r.__webglFramebuffer[s]),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer[s]);else{if(e.deleteFramebuffer(r.__webglFramebuffer),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer),r.__webglMultisampledFramebuffer&&e.deleteFramebuffer(r.__webglMultisampledFramebuffer),r.__webglColorRenderbuffer)for(var l=0;l<r.__webglColorRenderbuffer.length;l++)r.__webglColorRenderbuffer[l]&&e.deleteRenderbuffer(r.__webglColorRenderbuffer[l]);r.__webglDepthRenderbuffer&&e.deleteRenderbuffer(r.__webglDepthRenderbuffer)}if(t.isWebGLMultipleRenderTargets)for(var c=0,u=n.length;c<u;c++){var g=i.get(n[c]);g.__webglTexture&&(e.deleteTexture(g.__webglTexture),o.memory.textures--),i.remove(n[c])}i.remove(n),i.remove(t)}(n)}function R(t){var n=i.get(t);e.deleteTexture(n.__webglTexture);var r=t.source;delete m.get(r)[n.__cacheKey],o.memory.textures--}var W=0;function M(e,t){var r=i.get(e);if(e.isVideoTexture&&function(e){var t=o.render.frame;C.get(e)!==t&&(C.set(e,t),e.update())}(e),!1===e.isRenderTargetTexture&&e.version>0&&r.__version!==e.version){var a=e.image;if(null===a)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==a.complete)return void T(r,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(3553,r.__webglTexture,33984+t)}var V=(ke(s={},Ou,10497),ke(s,Uu,33071),ke(s,ju,33648),s),F=(ke(l={},Ju,9728),ke(l,Qu,9984),ke(l,$u,9986),ke(l,tg,9729),ke(l,ng,9985),ke(l,rg,9987),l);function N(n,a,o){if(o?(e.texParameteri(n,10242,V[a.wrapS]),e.texParameteri(n,10243,V[a.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,V[a.wrapR]),e.texParameteri(n,10240,F[a.magFilter]),e.texParameteri(n,10241,F[a.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),a.wrapS===Uu&&a.wrapT===Uu||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,S(a.magFilter)),e.texParameteri(n,10241,S(a.minFilter)),a.minFilter!==Ju&&a.minFilter!==tg&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){var s=t.get("EXT_texture_filter_anisotropic");if(a.magFilter===Ju)return;if(a.minFilter!==$u&&a.minFilter!==rg)return;if(a.type===dg&&!1===t.has("OES_texture_float_linear"))return;if(!1===u&&a.type===hg&&!1===t.has("OES_texture_half_float_linear"))return;(a.anisotropy>1||i.get(a).__currentAnisotropy)&&(e.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,r.getMaxAnisotropy())),i.get(a).__currentAnisotropy=a.anisotropy)}}function H(t,n){var i=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",Z));var r=n.source,a=m.get(r);void 0===a&&(a={},m.set(r,a));var s=function(e){var t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.encoding),t.join()}(n);if(s!==t.__cacheKey){void 0===a[s]&&(a[s]={texture:e.createTexture(),usedTimes:0},o.memory.textures++,i=!0),a[s].usedTimes++;var l=a[t.__cacheKey];void 0!==l&&(a[t.__cacheKey].usedTimes--,0===l.usedTimes&&R(n)),t.__cacheKey=s,t.__webglTexture=a[s].texture}return i}function T(t,r,o){var s=3553;(r.isDataArrayTexture||r.isCompressedArrayTexture)&&(s=35866),r.isData3DTexture&&(s=32879);var l=H(t,r),c=r.source;n.bindTexture(s,t.__webglTexture,33984+o);var g=i.get(c);if(c.version!==g.__version||!0===l){n.activeTexture(33984+o),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);var d,f=function(e){return!u&&(e.wrapS!==Uu||e.wrapT!==Uu||e.minFilter!==Ju&&e.minFilter!==tg)}(r)&&!1===y(r.image),p=b(r.image,f,!1,h),I=y(p=K(r,p))||u,C=a.convert(r.format,r.encoding),m=a.convert(r.type),v=B(r.internalFormat,C,m,r.encoding,r.isVideoTexture);N(s,r,I);var A=r.mipmaps,S=u&&!0!==r.isVideoTexture,Z=void 0===g.__version||!0===l,k=x(r,p,I);if(r.isDepthTexture)v=6402,u?v=r.type===dg?36012:r.type===gg?33190:r.type===Ig?35056:33189:r.type===dg&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===bg&&6402===v&&r.type!==cg&&r.type!==gg&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=gg,m=a.convert(r.type)),r.format===yg&&6402===v&&(v=34041,r.type!==Ig&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=Ig,m=a.convert(r.type))),Z&&(S?n.texStorage2D(3553,1,v,p.width,p.height):n.texImage2D(3553,0,v,p.width,p.height,0,C,m,null));else if(r.isDataTexture)if(A.length>0&&I){S&&Z&&n.texStorage2D(3553,k,v,A[0].width,A[0].height);for(var R=0,W=A.length;R<W;R++)d=A[R],S?n.texSubImage2D(3553,R,0,0,d.width,d.height,C,m,d.data):n.texImage2D(3553,R,v,d.width,d.height,0,C,m,d.data);r.generateMipmaps=!1}else S?(Z&&n.texStorage2D(3553,k,v,p.width,p.height),n.texSubImage2D(3553,0,0,0,p.width,p.height,C,m,p.data)):n.texImage2D(3553,0,v,p.width,p.height,0,C,m,p.data);else if(r.isCompressedTexture)if(r.isCompressedArrayTexture){S&&Z&&n.texStorage3D(35866,k,v,A[0].width,A[0].height,p.depth);for(var M=0,V=A.length;M<V;M++)d=A[M],r.format!==mg?null!==C?S?n.compressedTexSubImage3D(35866,M,0,0,0,d.width,d.height,p.depth,C,d.data,0,0):n.compressedTexImage3D(35866,M,v,d.width,d.height,p.depth,0,d.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):S?n.texSubImage3D(35866,M,0,0,0,d.width,d.height,p.depth,C,m,d.data):n.texImage3D(35866,M,v,d.width,d.height,p.depth,0,C,m,d.data)}else{S&&Z&&n.texStorage2D(3553,k,v,A[0].width,A[0].height);for(var F=0,T=A.length;F<T;F++)d=A[F],r.format!==mg?null!==C?S?n.compressedTexSubImage2D(3553,F,0,0,d.width,d.height,C,d.data):n.compressedTexImage2D(3553,F,v,d.width,d.height,0,d.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):S?n.texSubImage2D(3553,F,0,0,d.width,d.height,C,m,d.data):n.texImage2D(3553,F,v,d.width,d.height,0,C,m,d.data)}else if(r.isDataArrayTexture)S?(Z&&n.texStorage3D(35866,k,v,p.width,p.height,p.depth),n.texSubImage3D(35866,0,0,0,0,p.width,p.height,p.depth,C,m,p.data)):n.texImage3D(35866,0,v,p.width,p.height,p.depth,0,C,m,p.data);else if(r.isData3DTexture)S?(Z&&n.texStorage3D(32879,k,v,p.width,p.height,p.depth),n.texSubImage3D(32879,0,0,0,0,p.width,p.height,p.depth,C,m,p.data)):n.texImage3D(32879,0,v,p.width,p.height,p.depth,0,C,m,p.data);else if(r.isFramebufferTexture){if(Z)if(S)n.texStorage2D(3553,k,v,p.width,p.height);else for(var X=p.width,Y=p.height,E=0;E<k;E++)n.texImage2D(3553,E,v,X,Y,0,C,m,null),X>>=1,Y>>=1}else if(A.length>0&&I){S&&Z&&n.texStorage2D(3553,k,v,A[0].width,A[0].height);for(var z=0,L=A.length;z<L;z++)d=A[z],S?n.texSubImage2D(3553,z,0,0,C,m,d):n.texImage2D(3553,z,v,C,m,d);r.generateMipmaps=!1}else S?(Z&&n.texStorage2D(3553,k,v,p.width,p.height),n.texSubImage2D(3553,0,0,0,C,m,p)):n.texImage2D(3553,0,v,C,m,p);G(r,I)&&w(s),g.__version=c.version,r.onUpdate&&r.onUpdate(r)}t.__version=r.version}function X(t,r,o,s,l){var c=a.convert(o.format,o.encoding),u=a.convert(o.type),g=B(o.internalFormat,c,u,o.encoding);i.get(r).__hasExternalTextures||(32879===l||35866===l?n.texImage3D(l,0,g,r.width,r.height,r.depth,0,c,u,null):n.texImage2D(l,0,g,r.width,r.height,0,c,u,null)),n.bindFramebuffer(36160,t),L(r)?p.framebufferTexture2DMultisampleEXT(36160,s,l,i.get(o).__webglTexture,0,z(r)):(3553===l||l>=34069&&l<=34074)&&e.framebufferTexture2D(36160,s,l,i.get(o).__webglTexture,0),n.bindFramebuffer(36160,null)}function Y(t,n,i){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){var r=33189;if(i||L(n)){var o=n.depthTexture;o&&o.isDepthTexture&&(o.type===dg?r=36012:o.type===gg&&(r=33190));var s=z(n);L(n)?p.renderbufferStorageMultisampleEXT(36161,s,r,n.width,n.height):e.renderbufferStorageMultisample(36161,s,r,n.width,n.height)}else e.renderbufferStorage(36161,r,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){var l=z(n);i&&!1===L(n)?e.renderbufferStorageMultisample(36161,l,35056,n.width,n.height):L(n)?p.renderbufferStorageMultisampleEXT(36161,l,35056,n.width,n.height):e.renderbufferStorage(36161,34041,n.width,n.height),e.framebufferRenderbuffer(36160,33306,36161,t)}else for(var c=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture],u=0;u<c.length;u++){var g=c[u],d=a.convert(g.format,g.encoding),h=a.convert(g.type),f=B(g.internalFormat,d,h,g.encoding),I=z(n);i&&!1===L(n)?e.renderbufferStorageMultisample(36161,I,f,n.width,n.height):L(n)?p.renderbufferStorageMultisampleEXT(36161,I,f,n.width,n.height):e.renderbufferStorage(36161,f,n.width,n.height)}e.bindRenderbuffer(36161,null)}function E(t){var r=i.get(t),a=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!r.__autoAllocateDepthBuffer){if(a)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,r){if(r&&r.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,t),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(r.depthTexture).__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),M(r.depthTexture,0);var a=i.get(r.depthTexture).__webglTexture,o=z(r);if(r.depthTexture.format===bg)L(r)?p.framebufferTexture2DMultisampleEXT(36160,36096,3553,a,0,o):e.framebufferTexture2D(36160,36096,3553,a,0);else{if(r.depthTexture.format!==yg)throw new Error("Unknown depthTexture format");L(r)?p.framebufferTexture2DMultisampleEXT(36160,33306,3553,a,0,o):e.framebufferTexture2D(36160,33306,3553,a,0)}}(r.__webglFramebuffer,t)}else if(a){r.__webglDepthbuffer=[];for(var o=0;o<6;o++)n.bindFramebuffer(36160,r.__webglFramebuffer[o]),r.__webglDepthbuffer[o]=e.createRenderbuffer(),Y(r.__webglDepthbuffer[o],t,!1)}else n.bindFramebuffer(36160,r.__webglFramebuffer),r.__webglDepthbuffer=e.createRenderbuffer(),Y(r.__webglDepthbuffer,t,!1);n.bindFramebuffer(36160,null)}function z(e){return Math.min(f,e.samples)}function L(e){var n=i.get(e);return u&&e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function K(e,n){var i=e.encoding,r=e.format,a=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||e.format===th||i!==md&&(i===vd?!1===u?!0===t.has("EXT_sRGB")&&r===mg?(e.format=th,e.minFilter=tg,e.generateMipmaps=!1):n=Mh.sRGBToLinear(n):r===mg&&a===og||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",i)),n}this.allocateTextureUnit=function(){var e=W;return e>=g&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+g),W+=1,e},this.resetTextureUnits=function(){W=0},this.setTexture2D=M,this.setTexture2DArray=function(e,t){var r=i.get(e);e.version>0&&r.__version!==e.version?T(r,e,t):n.bindTexture(35866,r.__webglTexture,33984+t)},this.setTexture3D=function(e,t){var r=i.get(e);e.version>0&&r.__version!==e.version?T(r,e,t):n.bindTexture(32879,r.__webglTexture,33984+t)},this.setTextureCube=function(t,r){var o=i.get(t);t.version>0&&o.__version!==t.version?function(t,r,o){if(6!==r.image.length)return;var s=H(t,r),l=r.source;n.bindTexture(34067,t.__webglTexture,33984+o);var c=i.get(l);if(l.version!==c.__version||!0===s){n.activeTexture(33984+o),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);for(var g=r.isCompressedTexture||r.image[0].isCompressedTexture,h=r.image[0]&&r.image[0].isDataTexture,f=[],p=0;p<6;p++)f[p]=g||h?h?r.image[p].image:r.image[p]:b(r.image[p],!1,!0,d),f[p]=K(r,f[p]);var I,C=f[0],m=y(C)||u,v=a.convert(r.format,r.encoding),A=a.convert(r.type),S=B(r.internalFormat,v,A,r.encoding),Z=u&&!0!==r.isVideoTexture,k=void 0===c.__version||!0===s,R=x(r,C,m);if(N(34067,r,m),g){Z&&k&&n.texStorage2D(34067,R,S,C.width,C.height);for(var W=0;W<6;W++){I=f[W].mipmaps;for(var M=0;M<I.length;M++){var V=I[M];r.format!==mg?null!==v?Z?n.compressedTexSubImage2D(34069+W,M,0,0,V.width,V.height,v,V.data):n.compressedTexImage2D(34069+W,M,S,V.width,V.height,0,V.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Z?n.texSubImage2D(34069+W,M,0,0,V.width,V.height,v,A,V.data):n.texImage2D(34069+W,M,S,V.width,V.height,0,v,A,V.data)}}}else{I=r.mipmaps,Z&&k&&(I.length>0&&R++,n.texStorage2D(34067,R,S,f[0].width,f[0].height));for(var F=0;F<6;F++)if(h){Z?n.texSubImage2D(34069+F,0,0,0,f[F].width,f[F].height,v,A,f[F].data):n.texImage2D(34069+F,0,S,f[F].width,f[F].height,0,v,A,f[F].data);for(var T=0;T<I.length;T++){var X=I[T].image[F].image;Z?n.texSubImage2D(34069+F,T+1,0,0,X.width,X.height,v,A,X.data):n.texImage2D(34069+F,T+1,S,X.width,X.height,0,v,A,X.data)}}else{Z?n.texSubImage2D(34069+F,0,0,0,v,A,f[F]):n.texImage2D(34069+F,0,S,v,A,f[F]);for(var Y=0;Y<I.length;Y++){var E=I[Y];Z?n.texSubImage2D(34069+F,Y+1,0,0,v,A,E.image[F]):n.texImage2D(34069+F,Y+1,S,v,A,E.image[F])}}}G(r,m)&&w(34067),c.__version=l.version,r.onUpdate&&r.onUpdate(r)}t.__version=r.version}(o,t,r):n.bindTexture(34067,o.__webglTexture,33984+r)},this.rebindTextures=function(e,t,n){var r=i.get(e);void 0!==t&&X(r.__webglFramebuffer,e,e.texture,36064,3553),void 0!==n&&E(e)},this.setupRenderTarget=function(t){var s=t.texture,l=i.get(t),c=i.get(s);t.addEventListener("dispose",k),!0!==t.isWebGLMultipleRenderTargets&&(void 0===c.__webglTexture&&(c.__webglTexture=e.createTexture()),c.__version=s.version,o.memory.textures++);var g=!0===t.isWebGLCubeRenderTarget,d=!0===t.isWebGLMultipleRenderTargets,h=y(t)||u;if(g){l.__webglFramebuffer=[];for(var f=0;f<6;f++)l.__webglFramebuffer[f]=e.createFramebuffer()}else{if(l.__webglFramebuffer=e.createFramebuffer(),d)if(r.drawBuffers)for(var p=t.texture,I=0,C=p.length;I<C;I++){var m=i.get(p[I]);void 0===m.__webglTexture&&(m.__webglTexture=e.createTexture(),o.memory.textures++)}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(u&&t.samples>0&&!1===L(t)){var v=d?s:[s];l.__webglMultisampledFramebuffer=e.createFramebuffer(),l.__webglColorRenderbuffer=[],n.bindFramebuffer(36160,l.__webglMultisampledFramebuffer);for(var A=0;A<v.length;A++){var b=v[A];l.__webglColorRenderbuffer[A]=e.createRenderbuffer(),e.bindRenderbuffer(36161,l.__webglColorRenderbuffer[A]);var x=a.convert(b.format,b.encoding),S=a.convert(b.type),Z=B(b.internalFormat,x,S,b.encoding,!0===t.isXRRenderTarget),R=z(t);e.renderbufferStorageMultisample(36161,R,Z,t.width,t.height),e.framebufferRenderbuffer(36160,36064+A,36161,l.__webglColorRenderbuffer[A])}e.bindRenderbuffer(36161,null),t.depthBuffer&&(l.__webglDepthRenderbuffer=e.createRenderbuffer(),Y(l.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(36160,null)}}if(g){n.bindTexture(34067,c.__webglTexture),N(34067,s,h);for(var W=0;W<6;W++)X(l.__webglFramebuffer[W],t,s,36064,34069+W);G(s,h)&&w(34067),n.unbindTexture()}else if(d){for(var M=t.texture,V=0,F=M.length;V<F;V++){var H=M[V],T=i.get(H);n.bindTexture(3553,T.__webglTexture),N(3553,H,h),X(l.__webglFramebuffer,t,H,36064+V,3553),G(H,h)&&w(3553)}n.unbindTexture()}else{var K=3553;(t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(u?K=t.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(K,c.__webglTexture),N(K,s,h),X(l.__webglFramebuffer,t,s,36064,K),G(s,h)&&w(K),n.unbindTexture()}t.depthBuffer&&E(t)},this.updateRenderTargetMipmap=function(e){for(var t=y(e)||u,r=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture],a=0,o=r.length;a<o;a++){var s=r[a];if(G(s,t)){var l=e.isWebGLCubeRenderTarget?34067:3553,c=i.get(s).__webglTexture;n.bindTexture(l,c),w(l),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(u&&t.samples>0&&!1===L(t)){var r=t.isWebGLMultipleRenderTargets?t.texture:[t.texture],a=t.width,o=t.height,s=16384,l=[],c=t.stencilBuffer?33306:36096,g=i.get(t),d=!0===t.isWebGLMultipleRenderTargets;if(d)for(var h=0;h<r.length;h++)n.bindFramebuffer(36160,g.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+h,36161,null),n.bindFramebuffer(36160,g.__webglFramebuffer),e.framebufferTexture2D(36009,36064+h,3553,null,0);n.bindFramebuffer(36008,g.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,g.__webglFramebuffer);for(var f=0;f<r.length;f++){l.push(36064+f),t.depthBuffer&&l.push(c);var p=void 0!==g.__ignoreDepthValues&&g.__ignoreDepthValues;if(!1===p&&(t.depthBuffer&&(s|=256),t.stencilBuffer&&(s|=1024)),d&&e.framebufferRenderbuffer(36008,36064,36161,g.__webglColorRenderbuffer[f]),!0===p&&(e.invalidateFramebuffer(36008,[c]),e.invalidateFramebuffer(36009,[c])),d){var C=i.get(r[f]).__webglTexture;e.framebufferTexture2D(36009,36064,3553,C,0)}e.blitFramebuffer(0,0,a,o,0,0,a,o,s,9728),I&&e.invalidateFramebuffer(36008,l)}if(n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,null),d)for(var m=0;m<r.length;m++){n.bindFramebuffer(36160,g.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+m,36161,g.__webglColorRenderbuffer[m]);var v=i.get(r[m]).__webglTexture;n.bindFramebuffer(36160,g.__webglFramebuffer),e.framebufferTexture2D(36009,36064+m,3553,v,0)}n.bindFramebuffer(36009,g.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=E,this.setupFrameBufferTexture=X,this.useMultisampledRTT=L}function Om(e,t,n){var i=n.isWebGL2;return{convert:function(n){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(n===og)return 5121;if(n===fg)return 32819;if(n===pg)return 32820;if(n===sg)return 5120;if(n===lg)return 5122;if(n===cg)return 5123;if(n===ug)return 5124;if(n===gg)return 5125;if(n===dg)return 5126;if(n===hg)return i?5131:null!==(r=t.get("OES_texture_half_float"))?r.HALF_FLOAT_OES:null;if(n===Cg)return 6406;if(n===mg)return 6408;if(n===vg)return 6409;if(n===Ag)return 6410;if(n===bg)return 6402;if(n===yg)return 34041;if(n===th)return null!==(r=t.get("EXT_sRGB"))?r.SRGB_ALPHA_EXT:null;if(n===Gg)return 6403;if(n===wg)return 36244;if(n===Bg)return 33319;if(n===xg)return 33320;if(n===Sg)return 36249;if(n===Zg||n===kg||n===Rg||n===Wg)if(a===vd){if(null===(r=t.get("WEBGL_compressed_texture_s3tc_srgb")))return null;if(n===Zg)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===kg)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Rg)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Wg)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(null===(r=t.get("WEBGL_compressed_texture_s3tc")))return null;if(n===Zg)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===kg)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Rg)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Wg)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===Mg||n===Vg||n===Fg||n===Ng){if(null===(r=t.get("WEBGL_compressed_texture_pvrtc")))return null;if(n===Mg)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===Vg)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===Fg)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===Ng)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===Hg)return null!==(r=t.get("WEBGL_compressed_texture_etc1"))?r.COMPRESSED_RGB_ETC1_WEBGL:null;if(n===Tg||n===Xg){if(null===(r=t.get("WEBGL_compressed_texture_etc")))return null;if(n===Tg)return a===vd?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(n===Xg)return a===vd?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}if(n===Yg||n===Eg||n===zg||n===Lg||n===Kg||n===_g||n===Pg||n===Dg||n===Og||n===Ug||n===jg||n===Jg||n===Qg||n===qg){if(null===(r=t.get("WEBGL_compressed_texture_astc")))return null;if(n===Yg)return a===vd?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===Eg)return a===vd?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===zg)return a===vd?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===Lg)return a===vd?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===Kg)return a===vd?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===_g)return a===vd?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===Pg)return a===vd?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===Dg)return a===vd?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===Og)return a===vd?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===Ug)return a===vd?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===jg)return a===vd?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===Jg)return a===vd?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===Qg)return a===vd?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===qg)return a===vd?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===$g){if(null===(r=t.get("EXT_texture_compression_bptc")))return null;if(n===$g)return a===vd?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT}if(n===ed||n===td||n===nd||n===id){if(null===(r=t.get("EXT_texture_compression_rgtc")))return null;if(n===$g)return r.COMPRESSED_RED_RGTC1_EXT;if(n===td)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===nd)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===id)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===Ig?i?34042:null!==(r=t.get("WEBGL_depth_texture"))?r.UNSIGNED_INT_24_8_WEBGL:null:void 0!==e[n]?e[n]:null}}}var Um=function(e){kc(n,e);var t=Vc(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return ka(this,n),(e=t.call(this)).isArrayCamera=!0,e.cameras=i,e}return Xe(n)}(hI),jm=function(e){kc(n,e);var t=Vc(n);function n(){var e;return ka(this,n),(e=t.call(this)).isGroup=!0,e.type="Group",e}return Xe(n)}(Of),Jm={type:"move"},Qm=function(){function e(){ka(this,e),this._targetRay=null,this._grip=null,this._hand=null}return Xe(e,[{key:"getHandSpace",value:function(){return null===this._hand&&(this._hand=new jm,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}},{key:"getTargetRaySpace",value:function(){return null===this._targetRay&&(this._targetRay=new jm,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Ph,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Ph),this._targetRay}},{key:"getGripSpace",value:function(){return null===this._grip&&(this._grip=new jm,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Ph,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Ph),this._grip}},{key:"dispatchEvent",value:function(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}},{key:"connect",value:function(e){if(e&&e.hand){var t=this._hand;if(t){var n,i=Fc(e.hand.values());try{for(i.s();!(n=i.n()).done;){var r=n.value;this._getHandJoint(t,r)}}catch(a){i.e(a)}finally{i.f()}}}return this.dispatchEvent({type:"connected",data:e}),this}},{key:"disconnect",value:function(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}},{key:"update",value:function(e,t,n){var i=null,r=null,a=null,o=this._targetRay,s=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){a=!0;var c,u=Fc(e.hand.values());try{for(u.s();!(c=u.n()).done;){var g=c.value,d=t.getJointPose(g,n),h=this._getHandJoint(l,g);null!==d&&(h.matrix.fromArray(d.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),h.jointRadius=d.radius),h.visible=null!==d}}catch(C){u.e(C)}finally{u.f()}var f=l.joints["index-finger-tip"],p=l.joints["thumb-tip"],I=f.position.distanceTo(p.position);l.inputState.pinching&&I>.025?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&I<=.015&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==s&&e.gripSpace&&null!==(r=t.getPose(e.gripSpace,n))&&(s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),r.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(r.linearVelocity)):s.hasLinearVelocity=!1,r.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(r.angularVelocity)):s.hasAngularVelocity=!1);null!==o&&(null===(i=t.getPose(e.targetRaySpace,n))&&null!==r&&(i=r),null!==i&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(Jm)))}return null!==o&&(o.visible=null!==i),null!==s&&(s.visible=null!==r),null!==l&&(l.visible=null!==a),this}},{key:"_getHandJoint",value:function(e,t){if(void 0===e.joints[t.jointName]){var n=new jm;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}]),e}(),qm=function(e){kc(n,e);var t=Vc(n);function n(e,i,r,a,o,s,l,c,u,g){var d;if(ka(this,n),(g=void 0!==g?g:bg)!==bg&&g!==yg)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");return void 0===r&&g===bg&&(r=gg),void 0===r&&g===yg&&(r=Ig),(d=t.call(this,null,a,o,s,l,c,g,r,u)).isDepthTexture=!0,d.image={width:e,height:i},d.magFilter=void 0!==l?l:Ju,d.minFilter=void 0!==c?c:Ju,d.flipY=!1,d.generateMipmaps=!1,d}return Xe(n)}(Hh),$m=function(e){kc(n,e);var t=Vc(n);function n(e,i){var r;ka(this,n);var a=Ye(r=t.call(this)),o=null,s=1,l=null,c="local-floor",u=1,g=null,d=null,h=null,f=null,p=null,I=null,C=i.getContextAttributes(),m=null,v=null,A=[],b=[],y=new Set,G=new Map,w=new hI;w.layers.enable(1),w.viewport=new Th;var B=new hI;B.layers.enable(2),B.viewport=new Th;var x=[w,B],S=new Um;S.layers.enable(1),S.layers.enable(2);var Z=null,k=null;function R(e){var t=b.indexOf(e.inputSource);if(-1!==t){var n=A[t];void 0!==n&&n.dispatchEvent({type:e.type,data:e.inputSource})}}function W(){o.removeEventListener("select",R),o.removeEventListener("selectstart",R),o.removeEventListener("selectend",R),o.removeEventListener("squeeze",R),o.removeEventListener("squeezestart",R),o.removeEventListener("squeezeend",R),o.removeEventListener("end",W),o.removeEventListener("inputsourceschange",M);for(var t=0;t<A.length;t++){var n=b[t];null!==n&&(b[t]=null,A[t].disconnect(n))}Z=null,k=null,e.setRenderTarget(m),p=null,f=null,h=null,o=null,v=null,T.stop(),a.isPresenting=!1,a.dispatchEvent({type:"sessionend"})}function M(e){for(var t=0;t<e.removed.length;t++){var n=e.removed[t],i=b.indexOf(n);i>=0&&(b[i]=null,A[i].disconnect(n))}for(var r=0;r<e.added.length;r++){var a=e.added[r],o=b.indexOf(a);if(-1===o){for(var s=0;s<A.length;s++){if(s>=b.length){b.push(a),o=s;break}if(null===b[s]){b[s]=a,o=s;break}}if(-1===o)break}var l=A[o];l&&l.connect(a)}}r.cameraAutoUpdate=!0,r.enabled=!1,r.isPresenting=!1,r.getController=function(e){var t=A[e];return void 0===t&&(t=new Qm,A[e]=t),t.getTargetRaySpace()},r.getControllerGrip=function(e){var t=A[e];return void 0===t&&(t=new Qm,A[e]=t),t.getGripSpace()},r.getHand=function(e){var t=A[e];return void 0===t&&(t=new Qm,A[e]=t),t.getHandSpace()},r.setFramebufferScaleFactor=function(e){s=e,!0===a.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},r.setReferenceSpaceType=function(e){c=e,!0===a.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},r.getReferenceSpace=function(){return g||l},r.setReferenceSpace=function(e){g=e},r.getBaseLayer=function(){return null!==f?f:p},r.getBinding=function(){return h},r.getFrame=function(){return I},r.getSession=function(){return o},r.setSession=function(){var t=Xc(Ec().mark((function t(n){var r,d,I,A,b;return Ec().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===(o=n)){t.next=25;break}if(m=e.getRenderTarget(),o.addEventListener("select",R),o.addEventListener("selectstart",R),o.addEventListener("selectend",R),o.addEventListener("squeeze",R),o.addEventListener("squeezestart",R),o.addEventListener("squeezeend",R),o.addEventListener("end",W),o.addEventListener("inputsourceschange",M),!0===C.xrCompatible){t.next=14;break}return t.next=14,i.makeXRCompatible();case 14:return void 0===o.renderState.layers||!1===e.capabilities.isWebGL2?(r={antialias:void 0!==o.renderState.layers||C.antialias,alpha:C.alpha,depth:C.depth,stencil:C.stencil,framebufferScaleFactor:s},p=new XRWebGLLayer(o,i,r),o.updateRenderState({baseLayer:p}),v=new Xh(p.framebufferWidth,p.framebufferHeight,{format:mg,type:og,encoding:e.outputEncoding,stencilBuffer:C.stencil})):(d=null,I=null,A=null,C.depth&&(A=C.stencil?35056:33190,d=C.stencil?yg:bg,I=C.stencil?Ig:gg),b={colorFormat:32856,depthFormat:A,scaleFactor:s},h=new XRWebGLBinding(o,i),f=h.createProjectionLayer(b),o.updateRenderState({layers:[f]}),v=new Xh(f.textureWidth,f.textureHeight,{format:mg,type:og,depthTexture:new qm(f.textureWidth,f.textureHeight,I,void 0,void 0,void 0,void 0,void 0,void 0,d),stencilBuffer:C.stencil,encoding:e.outputEncoding,samples:C.antialias?4:0}),e.properties.get(v).__ignoreDepthValues=f.ignoreDepthValues),v.isXRRenderTarget=!0,this.setFoveation(u),g=null,t.next=20,o.requestReferenceSpace(c);case 20:l=t.sent,T.setContext(o),T.start(),a.isPresenting=!0,a.dispatchEvent({type:"sessionstart"});case 25:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}();var V=new Ph,F=new Ph;function N(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}r.updateCamera=function(e){if(null!==o){S.near=B.near=w.near=e.near,S.far=B.far=w.far=e.far,Z===S.near&&k===S.far||(o.updateRenderState({depthNear:S.near,depthFar:S.far}),Z=S.near,k=S.far);var t=e.parent,n=S.cameras;N(S,t);for(var i=0;i<n.length;i++)N(n[i],t);2===n.length?function(e,t,n){V.setFromMatrixPosition(t.matrixWorld),F.setFromMatrixPosition(n.matrixWorld);var i=V.distanceTo(F),r=t.projectionMatrix.elements,a=n.projectionMatrix.elements,o=r[14]/(r[10]-1),s=r[14]/(r[10]+1),l=(r[9]+1)/r[5],c=(r[9]-1)/r[5],u=(r[8]-1)/r[0],g=(a[8]+1)/a[0],d=o*u,h=o*g,f=i/(-u+g),p=f*-u;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(p),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();var I=o+f,C=s+f,m=d-p,v=h+(i-p),A=l*s/C*I,b=c*s/C*I;e.projectionMatrix.makePerspective(m,v,A,b,I,C),e.projectionMatrixInverse.copy(e.projectionMatrix).invert()}(S,w,B):S.projectionMatrix.copy(w.projectionMatrix),function(e,t,n){null===n?e.matrix.copy(t.matrixWorld):(e.matrix.copy(n.matrixWorld),e.matrix.invert(),e.matrix.multiply(t.matrixWorld));e.matrix.decompose(e.position,e.quaternion,e.scale),e.updateMatrixWorld(!0);for(var i=e.children,r=0,a=i.length;r<a;r++)i[r].updateMatrixWorld(!0);e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse),e.isPerspectiveCamera&&(e.fov=2*oh*Math.atan(1/e.projectionMatrix.elements[5]),e.zoom=1)}(e,S,t)}},r.getCamera=function(){return S},r.getFoveation=function(){if(null!==f||null!==p)return u},r.setFoveation=function(e){u=e,null!==f&&(f.fixedFoveation=e),null!==p&&void 0!==p.fixedFoveation&&(p.fixedFoveation=e)},r.getPlanes=function(){return y};var H=null;var T=new BI;return T.setAnimationLoop((function(t,n){if(d=n.getViewerPose(g||l),I=n,null!==d){var i=d.views;null!==p&&(e.setRenderTargetFramebuffer(v,p.framebuffer),e.setRenderTarget(v));var r=!1;i.length!==S.cameras.length&&(S.cameras.length=0,r=!0);for(var o=0;o<i.length;o++){var s=i[o],c=null;if(null!==p)c=p.getViewport(s);else{var u=h.getViewSubImage(f,s);c=u.viewport,0===o&&(e.setRenderTargetTextures(v,u.colorTexture,f.ignoreDepthValues?void 0:u.depthStencilTexture),e.setRenderTarget(v))}var C=x[o];void 0===C&&((C=new hI).layers.enable(o),C.viewport=new Th,x[o]=C),C.matrix.fromArray(s.transform.matrix),C.matrix.decompose(C.position,C.quaternion,C.scale),C.projectionMatrix.fromArray(s.projectionMatrix),C.projectionMatrixInverse.copy(C.projectionMatrix).invert(),C.viewport.set(c.x,c.y,c.width,c.height),0===o&&(S.matrix.copy(C.matrix),S.matrix.decompose(S.position,S.quaternion,S.scale)),!0===r&&S.cameras.push(C)}}for(var m=0;m<A.length;m++){var w=b[m],B=A[m];null!==w&&void 0!==B&&B.update(w,n,g||l)}if(H&&H(t,n),n.detectedPlanes){a.dispatchEvent({type:"planesdetected",data:n.detectedPlanes});var Z,k=null,R=Fc(y);try{for(R.s();!(Z=R.n()).done;){var W=Z.value;n.detectedPlanes.has(W)||(null===k&&(k=[]),k.push(W))}}catch(E){R.e(E)}finally{R.f()}if(null!==k){var M,V=Fc(k);try{for(V.s();!(M=V.n()).done;){var F=M.value;y.delete(F),G.delete(F),a.dispatchEvent({type:"planeremoved",data:F})}}catch(E){V.e(E)}finally{V.f()}}var N,T=Fc(n.detectedPlanes);try{for(T.s();!(N=T.n()).done;){var X=N.value;if(y.has(X)){var Y=G.get(X);X.lastChangedTime>Y&&(G.set(X,X.lastChangedTime),a.dispatchEvent({type:"planechanged",data:X}))}else y.add(X),G.set(X,n.lastChangedTime),a.dispatchEvent({type:"planeadded",data:X})}}catch(E){T.e(E)}finally{T.f()}}I=null})),r.setAnimationLoop=function(e){H=e},r.dispose=function(){},r}return Xe(n)}(nh);function ev(e,t){function n(e,t){!0===e.matrixAutoUpdate&&e.updateMatrix(),t.value.copy(e.matrix)}function i(i,r){i.opacity.value=r.opacity,r.color&&i.diffuse.value.copy(r.color),r.emissive&&i.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(i.map.value=r.map,n(r.map,i.mapTransform)),r.alphaMap&&(i.alphaMap.value=r.alphaMap,n(r.alphaMap,i.alphaMapTransform)),r.bumpMap&&(i.bumpMap.value=r.bumpMap,n(r.bumpMap,i.bumpMapTransform),i.bumpScale.value=r.bumpScale,r.side===$c&&(i.bumpScale.value*=-1)),r.normalMap&&(i.normalMap.value=r.normalMap,n(r.normalMap,i.normalMapTransform),i.normalScale.value.copy(r.normalScale),r.side===$c&&i.normalScale.value.negate()),r.displacementMap&&(i.displacementMap.value=r.displacementMap,n(r.displacementMap,i.displacementMapTransform),i.displacementScale.value=r.displacementScale,i.displacementBias.value=r.displacementBias),r.emissiveMap&&(i.emissiveMap.value=r.emissiveMap,n(r.emissiveMap,i.emissiveMapTransform)),r.specularMap&&(i.specularMap.value=r.specularMap,n(r.specularMap,i.specularMapTransform)),r.alphaTest>0&&(i.alphaTest.value=r.alphaTest);var a=t.get(r).envMap;if(a&&(i.envMap.value=a,i.flipEnvMap.value=a.isCubeTexture&&!1===a.isRenderTargetTexture?-1:1,i.reflectivity.value=r.reflectivity,i.ior.value=r.ior,i.refractionRatio.value=r.refractionRatio),r.lightMap){i.lightMap.value=r.lightMap;var o=!0===e.useLegacyLights?Math.PI:1;i.lightMapIntensity.value=r.lightMapIntensity*o,n(r.lightMap,i.lightMapTransform)}r.aoMap&&(i.aoMap.value=r.aoMap,i.aoMapIntensity.value=r.aoMapIntensity,n(r.aoMap,i.aoMapTransform))}return{refreshFogUniforms:function(t,n){n.color.getRGB(t.fogColor.value,cI(e)),n.isFog?(t.fogNear.value=n.near,t.fogFar.value=n.far):n.isFogExp2&&(t.fogDensity.value=n.density)},refreshMaterialUniforms:function(e,r,a,o,s){r.isMeshBasicMaterial||r.isMeshLambertMaterial?i(e,r):r.isMeshToonMaterial?(i(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,r)):r.isMeshPhongMaterial?(i(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,r)):r.isMeshStandardMaterial?(i(e,r),function(e,i){e.metalness.value=i.metalness,i.metalnessMap&&(e.metalnessMap.value=i.metalnessMap,n(i.metalnessMap,e.metalnessMapTransform));e.roughness.value=i.roughness,i.roughnessMap&&(e.roughnessMap.value=i.roughnessMap,n(i.roughnessMap,e.roughnessMapTransform));var r=t.get(i).envMap;r&&(e.envMapIntensity.value=i.envMapIntensity)}(e,r),r.isMeshPhysicalMaterial&&function(e,t,i){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap,n(t.sheenColorMap,e.sheenColorMapTransform)),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap,n(t.sheenRoughnessMap,e.sheenRoughnessMapTransform)));t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap,n(t.clearcoatMap,e.clearcoatMapTransform)),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap,n(t.clearcoatRoughnessMap,e.clearcoatRoughnessMapTransform)),t.clearcoatNormalMap&&(e.clearcoatNormalMap.value=t.clearcoatNormalMap,n(t.clearcoatNormalMap,e.clearcoatNormalMapTransform),e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),t.side===$c&&e.clearcoatNormalScale.value.negate()));t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap,n(t.iridescenceMap,e.iridescenceMapTransform)),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap,n(t.iridescenceThicknessMap,e.iridescenceThicknessMapTransform)));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=i.texture,e.transmissionSamplerSize.value.set(i.width,i.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap,n(t.transmissionMap,e.transmissionMapTransform)),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap,n(t.thicknessMap,e.thicknessMapTransform)),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor));e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap,n(t.specularColorMap,e.specularColorMapTransform));t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap,n(t.specularIntensityMap,e.specularIntensityMapTransform))}(e,r,s)):r.isMeshMatcapMaterial?(i(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,r)):r.isMeshDepthMaterial?i(e,r):r.isMeshDistanceMaterial?(i(e,r),function(e,n){var i=t.get(n).light;e.referencePosition.value.setFromMatrixPosition(i.matrixWorld),e.nearDistance.value=i.shadow.camera.near,e.farDistance.value=i.shadow.camera.far}(e,r)):r.isMeshNormalMaterial?i(e,r):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform))}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,i,r){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*i,e.scale.value=.5*r,t.map&&(e.map.value=t.map,n(t.map,e.uvTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,r,a,o):r.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function tv(e,t,n,i){var r={},a={},o=[],s=n.isWebGL2?e.getParameter(35375):0;function l(e,t,n){var i=e.value;if(void 0===n[t]){if("number"===typeof i)n[t]=i;else{for(var r=Array.isArray(i)?i:[i],a=[],o=0;o<r.length;o++)a.push(r[o].clone());n[t]=a}return!0}if("number"===typeof i){if(n[t]!==i)return n[t]=i,!0}else for(var s=Array.isArray(n[t])?n[t]:[n[t]],l=Array.isArray(i)?i:[i],c=0;c<s.length;c++){var u=s[c];if(!1===u.equals(l[c]))return u.copy(l[c]),!0}return!1}function c(e){var t={boundary:0,storage:0};return"number"===typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),t}function u(t){var n=t.target;n.removeEventListener("dispose",u);var i=o.indexOf(n.__bindingPointIndex);o.splice(i,1),e.deleteBuffer(r[n.id]),delete r[n.id],delete a[n.id]}return{bind:function(e,t){var n=t.program;i.uniformBlockBinding(e,n)},update:function(n,g){var d=r[n.id];void 0===d&&(!function(e){for(var t=e.uniforms,n=0,i=16,r=0,a=0,o=t.length;a<o;a++){for(var s=t[a],l={boundary:0,storage:0},u=Array.isArray(s.value)?s.value:[s.value],g=0,d=u.length;g<d;g++){var h=c(u[g]);l.boundary+=h.boundary,l.storage+=h.storage}if(s.__data=new Float32Array(l.storage/Float32Array.BYTES_PER_ELEMENT),s.__offset=n,a>0)0!==(r=n%i)&&i-r-l.boundary<0&&(n+=i-r,s.__offset=n);n+=l.storage}r=n%i,r>0&&(n+=i-r);e.__size=n,e.__cache={}}(n),d=function(t){var n=function(){for(var e=0;e<s;e++)if(-1===o.indexOf(e))return o.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=n;var i=e.createBuffer(),r=t.__size,a=t.usage;return e.bindBuffer(35345,i),e.bufferData(35345,r,a),e.bindBuffer(35345,null),e.bindBufferBase(35345,n,i),i}(n),r[n.id]=d,n.addEventListener("dispose",u));var h=g.program;i.updateUBOMapping(n,h);var f=t.render.frame;a[n.id]!==f&&(!function(t){var n=r[t.id],i=t.uniforms,a=t.__cache;e.bindBuffer(35345,n);for(var o=0,s=i.length;o<s;o++){var u=i[o];if(!0===l(u,o,a)){for(var g=u.__offset,d=Array.isArray(u.value)?u.value:[u.value],h=0,f=0;f<d.length;f++){var p=d[f],I=c(p);"number"===typeof p?(u.__data[0]=p,e.bufferSubData(35345,g+h,u.__data)):p.isMatrix3?(u.__data[0]=p.elements[0],u.__data[1]=p.elements[1],u.__data[2]=p.elements[2],u.__data[3]=p.elements[0],u.__data[4]=p.elements[3],u.__data[5]=p.elements[4],u.__data[6]=p.elements[5],u.__data[7]=p.elements[0],u.__data[8]=p.elements[6],u.__data[9]=p.elements[7],u.__data[10]=p.elements[8],u.__data[11]=p.elements[0]):(p.toArray(u.__data,h),h+=I.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(35345,g,u.__data)}}e.bindBuffer(35345,null)}(n),a[n.id]=f)},dispose:function(){for(var t in r)e.deleteBuffer(r[t]);o=[],r={},a={}}}}var nv=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ka(this,e);var n,i=t.canvas,r=void 0===i?function(){var e=Gh("canvas");return e.style.display="block",e}():i,a=t.context,o=void 0===a?null:a,s=t.depth,l=void 0===s||s,c=t.stencil,u=void 0===c||c,g=t.alpha,d=void 0!==g&&g,h=t.antialias,f=void 0!==h&&h,p=t.premultipliedAlpha,I=void 0===p||p,C=t.preserveDrawingBuffer,m=void 0!==C&&C,v=t.powerPreference,A=void 0===v?"default":v,b=t.failIfMajorPerformanceCaveat,y=void 0!==b&&b;this.isWebGLRenderer=!0,n=null!==o?o.getContextAttributes().alpha:d;var G=null,w=null,B=[],x=[];this.domElement=r,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=md,this.useLegacyLights=!0,this.toneMapping=Nu,this.toneMappingExposure=1;var S=this,Z=!1,k=0,R=0,W=null,M=-1,V=null,F=new Th,N=new Th,H=null,T=r.width,X=r.height,Y=1,E=null,z=null,L=new Th(0,0,T,X),K=new Th(0,0,T,X),_=!1,P=new wI,D=!1,O=!1,U=null,j=new yf,J=new Ph,Q={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function q(){return null===W?Y:1}var $,ee,te,ne,ie,re,ae,oe,se,le,ce,ue,ge,de,he,fe,pe,Ie,Ce,me,ve,Ae,be,ye,Ge=o;function we(e,t){for(var n=0;n<e.length;n++){var i=e[n],a=r.getContext(i,t);if(null!==a)return a}return null}try{var Be={alpha:!0,depth:l,stencil:u,antialias:f,premultipliedAlpha:I,preserveDrawingBuffer:m,powerPreference:A,failIfMajorPerformanceCaveat:y};if("setAttribute"in r&&r.setAttribute("data-engine","three.js r".concat(zc)),r.addEventListener("webglcontextlost",ke,!1),r.addEventListener("webglcontextrestored",Re,!1),r.addEventListener("webglcontextcreationerror",We,!1),null===Ge){var xe=["webgl2","webgl","experimental-webgl"];if(!0===S.isWebGL1Renderer&&xe.shift(),null===(Ge=we(xe,Be)))throw we(xe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===Ge.getShaderPrecisionFormat&&(Ge.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Ke){throw console.error("THREE.WebGLRenderer: "+Ke.message),Ke}function Se(){$=new $I(Ge),ee=new NI(Ge,$,t),$.init(ee),Ae=new Om(Ge,$,ee),te=new Pm(Ge,$,ee),ne=new nC,ie=new Wm,re=new Dm(Ge,$,te,ie,ee,Ae,ne),ae=new TI(S),oe=new qI(S),se=new xI(Ge,ee),be=new VI(Ge,$,se,ee),le=new eC(Ge,se,ne,be),ce=new oC(Ge,le,se,ne),Ce=new aC(Ge,ee,re),fe=new HI(ie),ue=new Rm(S,ae,oe,$,ee,be,fe),ge=new ev(S,ie),de=new Nm,he=new zm($,ee),Ie=new MI(S,ae,oe,te,ce,n,I),pe=new _m(S,ce,ee),ye=new tv(Ge,ne,ee,te),me=new FI(Ge,$,ne,ee),ve=new tC(Ge,$,ne,ee),ne.programs=ue.programs,S.capabilities=ee,S.extensions=$,S.properties=ie,S.renderLists=de,S.shadowMap=pe,S.state=te,S.info=ne}Se();var Ze=new $m(S,Ge);function ke(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),Z=!0}function Re(){console.log("THREE.WebGLRenderer: Context Restored."),Z=!1;var e=ne.autoReset,t=pe.enabled,n=pe.autoUpdate,i=pe.needsUpdate,r=pe.type;Se(),ne.autoReset=e,pe.enabled=t,pe.autoUpdate=n,pe.needsUpdate=i,pe.type=r}function We(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function Me(e){var t=e.target;t.removeEventListener("dispose",Me),function(e){(function(e){var t=ie.get(e).programs;void 0!==t&&(t.forEach((function(e){ue.releaseProgram(e)})),e.isShaderMaterial&&ue.releaseShaderCache(e))})(e),ie.remove(e)}(t)}this.xr=Ze,this.getContext=function(){return Ge},this.getContextAttributes=function(){return Ge.getContextAttributes()},this.forceContextLoss=function(){var e=$.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=$.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return Y},this.setPixelRatio=function(e){void 0!==e&&(Y=e,this.setSize(T,X,!1))},this.getSize=function(e){return e.set(T,X)},this.setSize=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Ze.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(T=e,X=t,r.width=Math.floor(e*Y),r.height=Math.floor(t*Y),!0===n&&(r.style.width=e+"px",r.style.height=t+"px"),this.setViewport(0,0,e,t))},this.getDrawingBufferSize=function(e){return e.set(T*Y,X*Y).floor()},this.setDrawingBufferSize=function(e,t,n){T=e,X=t,Y=n,r.width=Math.floor(e*n),r.height=Math.floor(t*n),this.setViewport(0,0,e,t)},this.getCurrentViewport=function(e){return e.copy(F)},this.getViewport=function(e){return e.copy(L)},this.setViewport=function(e,t,n,i){e.isVector4?L.set(e.x,e.y,e.z,e.w):L.set(e,t,n,i),te.viewport(F.copy(L).multiplyScalar(Y).floor())},this.getScissor=function(e){return e.copy(K)},this.setScissor=function(e,t,n,i){e.isVector4?K.set(e.x,e.y,e.z,e.w):K.set(e,t,n,i),te.scissor(N.copy(K).multiplyScalar(Y).floor())},this.getScissorTest=function(){return _},this.setScissorTest=function(e){te.setScissorTest(_=e)},this.setOpaqueSort=function(e){E=e},this.setTransparentSort=function(e){z=e},this.getClearColor=function(e){return e.copy(Ie.getClearColor())},this.setClearColor=function(){Ie.setClearColor.apply(Ie,arguments)},this.getClearAlpha=function(){return Ie.getClearAlpha()},this.setClearAlpha=function(){Ie.setClearAlpha.apply(Ie,arguments)},this.clear=function(){var e=0;(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(e|=16384),(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(e|=256),(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&(e|=1024),Ge.clear(e)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){r.removeEventListener("webglcontextlost",ke,!1),r.removeEventListener("webglcontextrestored",Re,!1),r.removeEventListener("webglcontextcreationerror",We,!1),de.dispose(),he.dispose(),ie.dispose(),ae.dispose(),oe.dispose(),ce.dispose(),be.dispose(),ye.dispose(),ue.dispose(),Ze.dispose(),Ze.removeEventListener("sessionstart",Fe),Ze.removeEventListener("sessionend",Ne),U&&(U.dispose(),U=null),He.stop()},this.renderBufferDirect=function(e,t,n,i,r,a){null===t&&(t=Q);var o=r.isMesh&&r.matrixWorld.determinant()<0,s=function(e,t,n,i,r){!0!==t.isScene&&(t=Q);re.resetTextureUnits();var a=t.fog,o=i.isMeshStandardMaterial?t.environment:null,s=null===W?S.outputEncoding:!0===W.isXRRenderTarget?W.texture.encoding:md,l=(i.isMeshStandardMaterial?oe:ae).get(i.envMap||o),c=!0===i.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,u=!!i.normalMap&&!!n.attributes.tangent,g=!!n.morphAttributes.position,d=!!n.morphAttributes.normal,h=!!n.morphAttributes.color,f=i.toneMapped?S.toneMapping:Nu,p=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,I=void 0!==p?p.length:0,C=ie.get(i),m=w.state.lights;if(!0===D&&(!0===O||e!==V)){var v=e===V&&i.id===M;fe.setState(i,e,v)}var A=!1;i.version===C.__version?C.needsLights&&C.lightsStateVersion!==m.state.version||C.outputEncoding!==s||r.isInstancedMesh&&!1===C.instancing?A=!0:r.isInstancedMesh||!0!==C.instancing?r.isSkinnedMesh&&!1===C.skinning?A=!0:r.isSkinnedMesh||!0!==C.skinning?C.envMap!==l||!0===i.fog&&C.fog!==a?A=!0:void 0===C.numClippingPlanes||C.numClippingPlanes===fe.numPlanes&&C.numIntersection===fe.numIntersection?(C.vertexAlphas!==c||C.vertexTangents!==u||C.morphTargets!==g||C.morphNormals!==d||C.morphColors!==h||C.toneMapping!==f||!0===ee.isWebGL2&&C.morphTargetsCount!==I)&&(A=!0):A=!0:A=!0:A=!0:(A=!0,C.__version=i.version);var b=C.currentProgram;!0===A&&(b=ze(i,t,r));var y=!1,G=!1,B=!1,x=b.getUniforms(),Z=C.uniforms;te.useProgram(b.program)&&(y=!0,G=!0,B=!0);i.id!==M&&(M=i.id,G=!0);if(y||V!==e){if(x.setValue(Ge,"projectionMatrix",e.projectionMatrix),ee.logarithmicDepthBuffer&&x.setValue(Ge,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),V!==e&&(V=e,G=!0,B=!0),i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshStandardMaterial||i.envMap){var k=x.map.cameraPosition;void 0!==k&&k.setValue(Ge,J.setFromMatrixPosition(e.matrixWorld))}(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial)&&x.setValue(Ge,"isOrthographic",!0===e.isOrthographicCamera),(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.isShadowMaterial||r.isSkinnedMesh)&&x.setValue(Ge,"viewMatrix",e.matrixWorldInverse)}if(r.isSkinnedMesh){x.setOptional(Ge,r,"bindMatrix"),x.setOptional(Ge,r,"bindMatrixInverse");var R=r.skeleton;R&&(ee.floatVertexTextures?(null===R.boneTexture&&R.computeBoneTexture(),x.setValue(Ge,"boneTexture",R.boneTexture,re),x.setValue(Ge,"boneTextureSize",R.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}var F=n.morphAttributes;(void 0!==F.position||void 0!==F.normal||void 0!==F.color&&!0===ee.isWebGL2)&&Ce.update(r,n,b);(G||C.receiveShadow!==r.receiveShadow)&&(C.receiveShadow=r.receiveShadow,x.setValue(Ge,"receiveShadow",r.receiveShadow));i.isMeshGouraudMaterial&&null!==i.envMap&&(Z.envMap.value=l,Z.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1);G&&(x.setValue(Ge,"toneMappingExposure",S.toneMappingExposure),C.needsLights&&function(e,t){e.ambientLightColor.needsUpdate=t,e.lightProbe.needsUpdate=t,e.directionalLights.needsUpdate=t,e.directionalLightShadows.needsUpdate=t,e.pointLights.needsUpdate=t,e.pointLightShadows.needsUpdate=t,e.spotLights.needsUpdate=t,e.spotLightShadows.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}(Z,B),a&&!0===i.fog&&ge.refreshFogUniforms(Z,a),ge.refreshMaterialUniforms(Z,i,Y,X,U),um.upload(Ge,C.uniformsList,Z,re));i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(um.upload(Ge,C.uniformsList,Z,re),i.uniformsNeedUpdate=!1);i.isSpriteMaterial&&x.setValue(Ge,"center",r.center);if(x.setValue(Ge,"modelViewMatrix",r.modelViewMatrix),x.setValue(Ge,"normalMatrix",r.normalMatrix),x.setValue(Ge,"modelMatrix",r.matrixWorld),i.isShaderMaterial||i.isRawShaderMaterial)for(var N=i.uniformsGroups,H=0,T=N.length;H<T;H++)if(ee.isWebGL2){var E=N[H];ye.update(E,b),ye.bind(E,b)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.");return b}(e,t,n,i,r);te.setMaterial(i,o);var l=n.index,c=1;!0===i.wireframe&&(l=le.getWireframeAttribute(n),c=2);var u=n.drawRange,g=n.attributes.position,d=u.start*c,h=(u.start+u.count)*c;null!==a&&(d=Math.max(d,a.start*c),h=Math.min(h,(a.start+a.count)*c)),null!==l?(d=Math.max(d,0),h=Math.min(h,l.count)):void 0!==g&&null!==g&&(d=Math.max(d,0),h=Math.min(h,g.count));var f=h-d;if(!(f<0||f===1/0)){var p;be.setup(r,i,s,n,l);var I=me;if(null!==l&&(p=se.get(l),(I=ve).setIndex(p)),r.isMesh)!0===i.wireframe?(te.setLineWidth(i.wireframeLinewidth*q()),I.setMode(1)):I.setMode(4);else if(r.isLine){var C=i.linewidth;void 0===C&&(C=1),te.setLineWidth(C*q()),r.isLineSegments?I.setMode(1):r.isLineLoop?I.setMode(2):I.setMode(3)}else r.isPoints?I.setMode(0):r.isSprite&&I.setMode(4);if(r.isInstancedMesh)I.renderInstances(d,f,r.count);else if(n.isInstancedBufferGeometry){var m=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,v=Math.min(n.instanceCount,m);I.renderInstances(d,f,v)}else I.render(d,f)}},this.compile=function(e,t){function n(e,t,n){!0===e.transparent&&e.side===eu&&!1===e.forceSinglePass?(e.side=$c,e.needsUpdate=!0,ze(e,t,n),e.side=qc,e.needsUpdate=!0,ze(e,t,n),e.side=eu):ze(e,t,n)}(w=he.get(e)).init(),x.push(w),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(w.pushLight(e),e.castShadow&&w.pushShadow(e))})),w.setupLights(S.useLegacyLights),e.traverse((function(t){var i=t.material;if(i)if(Array.isArray(i))for(var r=0;r<i.length;r++){n(i[r],e,t)}else n(i,e,t)})),x.pop(),w=null};var Ve=null;function Fe(){He.stop()}function Ne(){He.start()}var He=new BI;function Te(e,t,n,i){if(!1!==e.visible){if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)w.pushLight(e),e.castShadow&&w.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||P.intersectsSprite(e)){i&&J.setFromMatrixPosition(e.matrixWorld).applyMatrix4(j);var r=ce.update(e),a=e.material;a.visible&&G.push(e,r,a,n,J.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==ne.render.frame&&(e.skeleton.update(),e.skeleton.frame=ne.render.frame),!e.frustumCulled||P.intersectsObject(e))){i&&J.setFromMatrixPosition(e.matrixWorld).applyMatrix4(j);var o=ce.update(e),s=e.material;if(Array.isArray(s))for(var l=o.groups,c=0,u=l.length;c<u;c++){var g=l[c],d=s[g.materialIndex];d&&d.visible&&G.push(e,o,d,n,J.z,g)}else s.visible&&G.push(e,o,s,n,J.z,null)}for(var h=e.children,f=0,p=h.length;f<p;f++)Te(h[f],t,n,i)}}function Xe(e,t,n,i){var r=e.opaque,a=e.transmissive,o=e.transparent;w.setupLightsView(n),!0===D&&fe.setGlobalState(S.clippingPlanes,n),a.length>0&&function(e,t,n,i){if(null===U){var r=ee.isWebGL2;U=new Xh(1024,1024,{generateMipmaps:!0,type:$.has("EXT_color_buffer_half_float")?hg:og,minFilter:rg,samples:r&&!0===f?4:0})}var a=S.getRenderTarget();S.setRenderTarget(U),S.clear();var o=S.toneMapping;S.toneMapping=Nu,Ye(e,n,i),re.updateMultisampleRenderTarget(U),re.updateRenderTargetMipmap(U);for(var s=!1,l=0,c=t.length;l<c;l++){var u=t[l],g=u.object,d=u.geometry,h=u.material,p=u.group;if(h.side===eu&&g.layers.test(i.layers)){var I=h.side;h.side=$c,h.needsUpdate=!0,Ee(g,n,i,d,h,p),h.side=I,h.needsUpdate=!0,s=!0}}!0===s&&(re.updateMultisampleRenderTarget(U),re.updateRenderTargetMipmap(U));S.setRenderTarget(a),S.toneMapping=o}(r,a,t,n),i&&te.viewport(F.copy(i)),r.length>0&&Ye(r,t,n),a.length>0&&Ye(a,t,n),o.length>0&&Ye(o,t,n),te.buffers.depth.setTest(!0),te.buffers.depth.setMask(!0),te.buffers.color.setMask(!0),te.setPolygonOffset(!1)}function Ye(e,t,n){for(var i=!0===t.isScene?t.overrideMaterial:null,r=0,a=e.length;r<a;r++){var o=e[r],s=o.object,l=o.geometry,c=null===i?o.material:i,u=o.group;s.layers.test(n.layers)&&Ee(s,t,n,l,c,u)}}function Ee(e,t,n,i,r,a){e.onBeforeRender(S,t,n,i,r,a),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),r.onBeforeRender(S,t,n,i,e,a),!0===r.transparent&&r.side===eu&&!1===r.forceSinglePass?(r.side=$c,r.needsUpdate=!0,S.renderBufferDirect(n,t,i,r,e,a),r.side=qc,r.needsUpdate=!0,S.renderBufferDirect(n,t,i,r,e,a),r.side=eu):S.renderBufferDirect(n,t,i,r,e,a),e.onAfterRender(S,t,n,i,r,a)}function ze(e,t,n){!0!==t.isScene&&(t=Q);var i=ie.get(e),r=w.state.lights,a=w.state.shadowsArray,o=r.state.version,s=ue.getParameters(e,r.state,a,t,n),l=ue.getProgramCacheKey(s),c=i.programs;i.environment=e.isMeshStandardMaterial?t.environment:null,i.fog=t.fog,i.envMap=(e.isMeshStandardMaterial?oe:ae).get(e.envMap||i.environment),void 0===c&&(e.addEventListener("dispose",Me),c=new Map,i.programs=c);var u=c.get(l);if(void 0!==u){if(i.currentProgram===u&&i.lightsStateVersion===o)return Le(e,s),u}else s.uniforms=ue.getUniforms(e),e.onBuild(n,s,S),e.onBeforeCompile(s,S),u=ue.acquireProgram(s,l),c.set(l,u),i.uniforms=s.uniforms;var g=i.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(g.clippingPlanes=fe.uniform),Le(e,s),i.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),i.lightsStateVersion=o,i.needsLights&&(g.ambientLightColor.value=r.state.ambient,g.lightProbe.value=r.state.probe,g.directionalLights.value=r.state.directional,g.directionalLightShadows.value=r.state.directionalShadow,g.spotLights.value=r.state.spot,g.spotLightShadows.value=r.state.spotShadow,g.rectAreaLights.value=r.state.rectArea,g.ltc_1.value=r.state.rectAreaLTC1,g.ltc_2.value=r.state.rectAreaLTC2,g.pointLights.value=r.state.point,g.pointLightShadows.value=r.state.pointShadow,g.hemisphereLights.value=r.state.hemi,g.directionalShadowMap.value=r.state.directionalShadowMap,g.directionalShadowMatrix.value=r.state.directionalShadowMatrix,g.spotShadowMap.value=r.state.spotShadowMap,g.spotLightMatrix.value=r.state.spotLightMatrix,g.spotLightMap.value=r.state.spotLightMap,g.pointShadowMap.value=r.state.pointShadowMap,g.pointShadowMatrix.value=r.state.pointShadowMatrix);var d=u.getUniforms(),h=um.seqWithValue(d.seq,g);return i.currentProgram=u,i.uniformsList=h,u}function Le(e,t){var n=ie.get(e);n.outputEncoding=t.outputEncoding,n.instancing=t.instancing,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}He.setAnimationLoop((function(e){Ve&&Ve(e)})),"undefined"!==typeof self&&He.setContext(self),this.setAnimationLoop=function(e){Ve=e,Ze.setAnimationLoop(e),null===e?He.stop():He.start()},Ze.addEventListener("sessionstart",Fe),Ze.addEventListener("sessionend",Ne),this.render=function(e,t){if(void 0===t||!0===t.isCamera){if(!0!==Z){!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===Ze.enabled&&!0===Ze.isPresenting&&(!0===Ze.cameraAutoUpdate&&Ze.updateCamera(t),t=Ze.getCamera()),!0===e.isScene&&e.onBeforeRender(S,e,t,W),(w=he.get(e,x.length)).init(),x.push(w),j.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),P.setFromProjectionMatrix(j),O=this.localClippingEnabled,D=fe.init(this.clippingPlanes,O),(G=de.get(e,B.length)).init(),B.push(G),Te(e,t,0,S.sortObjects),G.finish(),!0===S.sortObjects&&G.sort(E,z),!0===D&&fe.beginShadows();var n=w.state.shadowsArray;if(pe.render(n,e,t),!0===D&&fe.endShadows(),!0===this.info.autoReset&&this.info.reset(),Ie.render(G,e),w.setupLights(S.useLegacyLights),t.isArrayCamera)for(var i=t.cameras,r=0,a=i.length;r<a;r++){var o=i[r];Xe(G,e,o,o.viewport)}else Xe(G,e,t);null!==W&&(re.updateMultisampleRenderTarget(W),re.updateRenderTargetMipmap(W)),!0===e.isScene&&e.onAfterRender(S,e,t),be.resetDefaultState(),M=-1,V=null,x.pop(),w=x.length>0?x[x.length-1]:null,B.pop(),G=B.length>0?B[B.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return k},this.getActiveMipmapLevel=function(){return R},this.getRenderTarget=function(){return W},this.setRenderTargetTextures=function(e,t,n){ie.get(e.texture).__webglTexture=t,ie.get(e.depthTexture).__webglTexture=n;var i=ie.get(e);i.__hasExternalTextures=!0,i.__hasExternalTextures&&(i.__autoAllocateDepthBuffer=void 0===n,i.__autoAllocateDepthBuffer||!0===$.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),i.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(e,t){var n=ie.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;W=e,k=t,R=n;var i=!0,r=null,a=!1,o=!1;if(e){var s=ie.get(e);void 0!==s.__useDefaultFramebuffer?(te.bindFramebuffer(36160,null),i=!1):void 0===s.__webglFramebuffer?re.setupRenderTarget(e):s.__hasExternalTextures&&re.rebindTextures(e,ie.get(e.texture).__webglTexture,ie.get(e.depthTexture).__webglTexture);var l=e.texture;(l.isData3DTexture||l.isDataArrayTexture||l.isCompressedArrayTexture)&&(o=!0);var c=ie.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(r=c[t],a=!0):r=ee.isWebGL2&&e.samples>0&&!1===re.useMultisampledRTT(e)?ie.get(e).__webglMultisampledFramebuffer:c,F.copy(e.viewport),N.copy(e.scissor),H=e.scissorTest}else F.copy(L).multiplyScalar(Y).floor(),N.copy(K).multiplyScalar(Y).floor(),H=_;if(te.bindFramebuffer(36160,r)&&ee.drawBuffers&&i&&te.drawBuffers(e,r),te.viewport(F),te.scissor(N),te.setScissorTest(H),a){var u=ie.get(e.texture);Ge.framebufferTexture2D(36160,36064,34069+t,u.__webglTexture,n)}else if(o){var g=ie.get(e.texture),d=t||0;Ge.framebufferTextureLayer(36160,36064,g.__webglTexture,n||0,d)}M=-1},this.readRenderTargetPixels=function(e,t,n,i,r,a,o){if(e&&e.isWebGLRenderTarget){var s=ie.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==o&&(s=s[o]),s){te.bindFramebuffer(36160,s);try{var l=e.texture,c=l.format,u=l.type;if(c!==mg&&Ae.convert(c)!==Ge.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");var g=u===hg&&($.has("EXT_color_buffer_half_float")||ee.isWebGL2&&$.has("EXT_color_buffer_float"));if(u!==og&&Ae.convert(u)!==Ge.getParameter(35738)&&(u!==dg||!(ee.isWebGL2||$.has("OES_texture_float")||$.has("WEBGL_color_buffer_float")))&&!g)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-i&&n>=0&&n<=e.height-r&&Ge.readPixels(t,n,i,r,Ae.convert(c),Ae.convert(u),a)}finally{var d=null!==W?ie.get(W).__webglFramebuffer:null;te.bindFramebuffer(36160,d)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=Math.pow(2,-n),r=Math.floor(t.image.width*i),a=Math.floor(t.image.height*i);re.setTexture2D(t,0),Ge.copyTexSubImage2D(3553,n,0,0,e.x,e.y,r,a),te.unbindTexture()},this.copyTextureToTexture=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=t.image.width,a=t.image.height,o=Ae.convert(n.format),s=Ae.convert(n.type);re.setTexture2D(n,0),Ge.pixelStorei(37440,n.flipY),Ge.pixelStorei(37441,n.premultiplyAlpha),Ge.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?Ge.texSubImage2D(3553,i,e.x,e.y,r,a,o,s,t.image.data):t.isCompressedTexture?Ge.compressedTexSubImage2D(3553,i,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,o,t.mipmaps[0].data):Ge.texSubImage2D(3553,i,e.x,e.y,o,s,t.image),0===i&&n.generateMipmaps&&Ge.generateMipmap(3553),te.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(S.isWebGL1Renderer)console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");else{var a,o=e.max.x-e.min.x+1,s=e.max.y-e.min.y+1,l=e.max.z-e.min.z+1,c=Ae.convert(i.format),u=Ae.convert(i.type);if(i.isData3DTexture)re.setTexture3D(i,0),a=32879;else{if(!i.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");re.setTexture2DArray(i,0),a=35866}Ge.pixelStorei(37440,i.flipY),Ge.pixelStorei(37441,i.premultiplyAlpha),Ge.pixelStorei(3317,i.unpackAlignment);var g=Ge.getParameter(3314),d=Ge.getParameter(32878),h=Ge.getParameter(3316),f=Ge.getParameter(3315),p=Ge.getParameter(32877),I=n.isCompressedTexture?n.mipmaps[0]:n.image;Ge.pixelStorei(3314,I.width),Ge.pixelStorei(32878,I.height),Ge.pixelStorei(3316,e.min.x),Ge.pixelStorei(3315,e.min.y),Ge.pixelStorei(32877,e.min.z),n.isDataTexture||n.isData3DTexture?Ge.texSubImage3D(a,r,t.x,t.y,t.z,o,s,l,c,u,I.data):n.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Ge.compressedTexSubImage3D(a,r,t.x,t.y,t.z,o,s,l,c,I.data)):Ge.texSubImage3D(a,r,t.x,t.y,t.z,o,s,l,c,u,I),Ge.pixelStorei(3314,g),Ge.pixelStorei(32878,d),Ge.pixelStorei(3316,h),Ge.pixelStorei(3315,f),Ge.pixelStorei(32877,p),0===r&&i.generateMipmaps&&Ge.generateMipmap(a),te.unbindTexture()}},this.initTexture=function(e){e.isCubeTexture?re.setTextureCube(e,0):e.isData3DTexture?re.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?re.setTexture2DArray(e,0):re.setTexture2D(e,0),te.unbindTexture()},this.resetState=function(){k=0,R=0,W=null,te.reset(),be.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}return Xe(e,[{key:"physicallyCorrectLights",get:function(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights},set:function(e){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}}]),e}(),iv=function(e){kc(n,e);var t=Vc(n);function n(){return ka(this,n),t.apply(this,arguments)}return Xe(n)}(nv);iv.prototype.isWebGL1Renderer=!0;var rv,av=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25e-5;ka(this,e),this.isFogExp2=!0,this.name="",this.color=new dp(t),this.density=n}return Xe(e,[{key:"clone",value:function(){return new e(this.color,this.density)}},{key:"toJSON",value:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}]),e}(),ov=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;ka(this,e),this.isFog=!0,this.name="",this.color=new dp(t),this.near=n,this.far=i}return Xe(e,[{key:"clone",value:function(){return new e(this.color,this.near,this.far)}},{key:"toJSON",value:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}]),e}(),sv=function(e){kc(n,e);var t=Vc(n);function n(){var e;return ka(this,n),(e=t.call(this)).isScene=!0,e.type="Scene",e.background=null,e.environment=null,e.fog=null,e.backgroundBlurriness=0,e.backgroundIntensity=1,e.overrideMaterial=null,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:Ye(e)})),e}return Xe(n,[{key:"copy",value:function(e,t){return Yc(Rc(n.prototype),"copy",this).call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}},{key:"toJSON",value:function(e){var t=Yc(Rc(n.prototype),"toJSON",this).call(this,e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t}},{key:"autoUpdate",get:function(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate},set:function(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}]),n}(Of),lv=function(){function e(t,n){ka(this,e),this.isInterleavedBuffer=!0,this.array=t,this.stride=n,this.count=void 0!==t?t.length/n:0,this.usage=_d,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=sh()}return Xe(e,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,n){e*=this.stride,n*=t.stride;for(var i=0,r=this.stride;i<r;i++)this.array[e+i]=t.array[n+i];return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"clone",value:function(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=sh()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);var t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"toJSON",value:function(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=sh()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}]),e}(),cv=new Ph,uv=function(){function e(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];ka(this,e),this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=n,this.offset=i,this.normalized=r}return Xe(e,[{key:"count",get:function(){return this.data.count}},{key:"array",get:function(){return this.data.array}},{key:"needsUpdate",set:function(e){this.data.needsUpdate=e}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.data.count;t<n;t++)cv.fromBufferAttribute(this,t),cv.applyMatrix4(e),this.setXYZ(t,cv.x,cv.y,cv.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)cv.fromBufferAttribute(this,t),cv.applyNormalMatrix(e),this.setXYZ(t,cv.x,cv.y,cv.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)cv.fromBufferAttribute(this,t),cv.transformDirection(e),this.setXYZ(t,cv.x,cv.y,cv.z);return this}},{key:"setX",value:function(e,t){return this.normalized&&(t=ph(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}},{key:"setY",value:function(e,t){return this.normalized&&(t=ph(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}},{key:"setZ",value:function(e,t){return this.normalized&&(t=ph(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}},{key:"setW",value:function(e,t){return this.normalized&&(t=ph(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}},{key:"getX",value:function(e){var t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=fh(t,this.array)),t}},{key:"getY",value:function(e){var t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=fh(t,this.array)),t}},{key:"getZ",value:function(e){var t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=fh(t,this.array)),t}},{key:"getW",value:function(e){var t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=fh(t,this.array)),t}},{key:"setXY",value:function(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=ph(t,this.array),n=ph(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=ph(t,this.array),n=ph(n,this.array),i=ph(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this}},{key:"setXYZW",value:function(e,t,n,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=ph(t,this.array),n=ph(n,this.array),i=ph(i,this.array),r=ph(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=r,this}},{key:"clone",value:function(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");for(var n=[],i=0;i<this.count;i++)for(var r=i*this.data.stride+this.offset,a=0;a<this.itemSize;a++)n.push(this.data.array[r+a]);return new yp(new this.array.constructor(n),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new e(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}},{key:"toJSON",value:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");for(var t=[],n=0;n<this.count;n++)for(var i=n*this.data.stride+this.offset,r=0;r<this.itemSize;r++)t.push(this.data.array[i+r]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}]),e}(),gv=function(e){kc(n,e);var t=Vc(n);function n(e){var i;return ka(this,n),(i=t.call(this)).isSpriteMaterial=!0,i.type="SpriteMaterial",i.color=new dp(16777215),i.map=null,i.alphaMap=null,i.rotation=0,i.sizeAttenuation=!0,i.transparent=!0,i.fog=!0,i.setValues(e),i}return Xe(n,[{key:"copy",value:function(e){return Yc(Rc(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}]),n}(sp),dv=new Ph,hv=new Ph,fv=new Ph,pv=new Ch,Iv=new Ch,Cv=new yf,mv=new Ph,vv=new Ph,Av=new Ph,bv=new Ch,yv=new Ch,Gv=new Ch,wv=function(e){kc(n,e);var t=Vc(n);function n(e){var i;if(ka(this,n),(i=t.call(this)).isSprite=!0,i.type="Sprite",void 0===rv){rv=new Ep;var r=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),a=new lv(r,5);rv.setIndex([0,1,2,0,2,3]),rv.setAttribute("position",new uv(a,3,0,!1)),rv.setAttribute("uv",new uv(a,2,3,!1))}return i.geometry=rv,i.material=void 0!==e?e:new gv,i.center=new Ch(.5,.5),i}return Xe(n,[{key:"raycast",value:function(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),hv.setFromMatrixScale(this.matrixWorld),Cv.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),fv.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&hv.multiplyScalar(-fv.z);var n,i,r=this.material.rotation;0!==r&&(i=Math.cos(r),n=Math.sin(r));var a=this.center;Bv(mv.set(-.5,-.5,0),fv,a,hv,n,i),Bv(vv.set(.5,-.5,0),fv,a,hv,n,i),Bv(Av.set(.5,.5,0),fv,a,hv,n,i),bv.set(0,0),yv.set(1,0),Gv.set(1,1);var o=e.ray.intersectTriangle(mv,vv,Av,!1,dv);if(null!==o||(Bv(vv.set(-.5,.5,0),fv,a,hv,n,i),yv.set(0,1),null!==(o=e.ray.intersectTriangle(mv,Av,vv,!1,dv)))){var s=e.ray.origin.distanceTo(dv);s<e.near||s>e.far||t.push({distance:s,point:dv.clone(),uv:ap.getInterpolation(dv,mv,vv,Av,bv,yv,Gv,new Ch),face:null,object:this})}}},{key:"copy",value:function(e,t){return Yc(Rc(n.prototype),"copy",this).call(this,e,t),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}]),n}(Of);function Bv(e,t,n,i,r,a){pv.subVectors(e,n).addScalar(.5).multiply(i),void 0!==r?(Iv.x=a*pv.x-r*pv.y,Iv.y=r*pv.x+a*pv.y):Iv.copy(pv),e.copy(t),e.x+=Iv.x,e.y+=Iv.y,e.applyMatrix4(Cv)}var xv=new Ph,Sv=new Ph,Zv=function(e){kc(n,e);var t=Vc(n);function n(){var e;return ka(this,n),(e=t.call(this))._currentLevel=0,e.type="LOD",Object.defineProperties(Ye(e),{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),e.autoUpdate=!0,e}return Xe(n,[{key:"copy",value:function(e){Yc(Rc(n.prototype),"copy",this).call(this,e,!1);for(var t=e.levels,i=0,r=t.length;i<r;i++){var a=t[i];this.addLevel(a.object.clone(),a.distance,a.hysteresis)}return this.autoUpdate=e.autoUpdate,this}},{key:"addLevel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;t=Math.abs(t);var i,r=this.levels;for(i=0;i<r.length&&!(t<r[i].distance);i++);return r.splice(i,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}},{key:"getCurrentLevel",value:function(){return this._currentLevel}},{key:"getObjectForDistance",value:function(e){var t=this.levels;if(t.length>0){var n,i;for(n=1,i=t.length;n<i;n++){var r=t[n].distance;if(t[n].object.visible&&(r-=r*t[n].hysteresis),e<r)break}return t[n-1].object}return null}},{key:"raycast",value:function(e,t){if(this.levels.length>0){xv.setFromMatrixPosition(this.matrixWorld);var n=e.ray.origin.distanceTo(xv);this.getObjectForDistance(n).raycast(e,t)}}},{key:"update",value:function(e){var t=this.levels;if(t.length>1){xv.setFromMatrixPosition(e.matrixWorld),Sv.setFromMatrixPosition(this.matrixWorld);var n,i,r=xv.distanceTo(Sv)/e.zoom;for(t[0].object.visible=!0,n=1,i=t.length;n<i;n++){var a=t[n].distance;if(t[n].object.visible&&(a-=a*t[n].hysteresis),!(r>=a))break;t[n-1].object.visible=!1,t[n].object.visible=!0}for(this._currentLevel=n-1;n<i;n++)t[n].object.visible=!1}}},{key:"toJSON",value:function(e){var t=Yc(Rc(n.prototype),"toJSON",this).call(this,e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];for(var i=this.levels,r=0,a=i.length;r<a;r++){var o=i[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}]),n}(Of),kv=new Ph,Rv=new Th,Wv=new Th,Mv=new Ph,Vv=new yf,Fv=new Ph,Nv=function(e){kc(n,e);var t=Vc(n);function n(e,i){var r;return ka(this,n),(r=t.call(this,e,i)).isSkinnedMesh=!0,r.type="SkinnedMesh",r.bindMode="attached",r.bindMatrix=new yf,r.bindMatrixInverse=new yf,r.boundingBox=null,r.boundingSphere=null,r}return Xe(n,[{key:"computeBoundingBox",value:function(){var e=this.geometry;null===this.boundingBox&&(this.boundingBox=new Uh),this.boundingBox.makeEmpty();for(var t=e.getAttribute("position"),n=0;n<t.count;n++)Fv.fromBufferAttribute(t,n),this.applyBoneTransform(n,Fv),this.boundingBox.expandByPoint(Fv)}},{key:"computeBoundingSphere",value:function(){var e=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new hf),this.boundingSphere.makeEmpty();for(var t=e.getAttribute("position"),n=0;n<t.count;n++)Fv.fromBufferAttribute(t,n),this.applyBoneTransform(n,Fv),this.boundingSphere.expandByPoint(Fv)}},{key:"copy",value:function(e,t){return Yc(Rc(n.prototype),"copy",this).call(this,e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}},{key:"bind",value:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}},{key:"pose",value:function(){this.skeleton.pose()}},{key:"normalizeSkinWeights",value:function(){for(var e=new Th,t=this.geometry.attributes.skinWeight,n=0,i=t.count;n<i;n++){e.fromBufferAttribute(t,n);var r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}},{key:"updateMatrixWorld",value:function(e){Yc(Rc(n.prototype),"updateMatrixWorld",this).call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}},{key:"applyBoneTransform",value:function(e,t){var n=this.skeleton,i=this.geometry;Rv.fromBufferAttribute(i.attributes.skinIndex,e),Wv.fromBufferAttribute(i.attributes.skinWeight,e),kv.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(var r=0;r<4;r++){var a=Wv.getComponent(r);if(0!==a){var o=Rv.getComponent(r);Vv.multiplyMatrices(n.bones[o].matrixWorld,n.boneInverses[o]),t.addScaledVector(Mv.copy(kv).applyMatrix4(Vv),a)}}return t.applyMatrix4(this.bindMatrixInverse)}},{key:"boneTransform",value:function(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}]),n}(rI),Hv=function(e){kc(n,e);var t=Vc(n);function n(){var e;return ka(this,n),(e=t.call(this)).isBone=!0,e.type="Bone",e}return Xe(n)}(Of),Tv=function(e){kc(n,e);var t=Vc(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,l=arguments.length>5?arguments[5]:void 0,c=arguments.length>6?arguments[6]:void 0,u=arguments.length>7?arguments[7]:void 0,g=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Ju,d=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Ju,h=arguments.length>10?arguments[10]:void 0,f=arguments.length>11?arguments[11]:void 0;return ka(this,n),(e=t.call(this,null,l,c,u,g,d,o,s,h,f)).isDataTexture=!0,e.image={data:i,width:r,height:a},e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return Xe(n)}(Hh),Xv=new yf,Yv=new yf,Ev=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];ka(this,e),this.uuid=sh(),this.bones=t.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}return Xe(e,[{key:"init",value:function(){var e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(var n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new yf)}}},{key:"calculateInverses",value:function(){this.boneInverses.length=0;for(var e=0,t=this.bones.length;e<t;e++){var n=new yf;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}},{key:"pose",value:function(){for(var e=0,t=this.bones.length;e<t;e++){var n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(var i=0,r=this.bones.length;i<r;i++){var a=this.bones[i];a&&(a.parent&&a.parent.isBone?(a.matrix.copy(a.parent.matrixWorld).invert(),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale))}}},{key:"update",value:function(){for(var e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture,r=0,a=e.length;r<a;r++){var o=e[r]?e[r].matrixWorld:Yv;Xv.multiplyMatrices(o,t[r]),Xv.toArray(n,16*r)}null!==i&&(i.needsUpdate=!0)}},{key:"clone",value:function(){return new e(this.bones,this.boneInverses)}},{key:"computeBoneTexture",value:function(){var e=Math.sqrt(4*this.bones.length);e=dh(e),e=Math.max(e,4);var t=new Float32Array(e*e*4);t.set(this.boneMatrices);var n=new Tv(t,e,e,mg,dg);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}},{key:"getBoneByName",value:function(e){for(var t=0,n=this.bones.length;t<n;t++){var i=this.bones[t];if(i.name===e)return i}}},{key:"dispose",value:function(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}},{key:"fromJSON",value:function(e,t){this.uuid=e.uuid;for(var n=0,i=e.bones.length;n<i;n++){var r=e.bones[n],a=t[r];void 0===a&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),a=new Hv),this.bones.push(a),this.boneInverses.push((new yf).fromArray(e.boneInverses[n]))}return this.init(),this}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;for(var t=this.bones,n=this.boneInverses,i=0,r=t.length;i<r;i++){var a=t[i];e.bones.push(a.uuid);var o=n[i];e.boneInverses.push(o.toArray())}return e}}]),e}(),zv=function(e){kc(n,e);var t=Vc(n);function n(e,i,r){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return ka(this,n),(a=t.call(this,e,i,r)).isInstancedBufferAttribute=!0,a.meshPerAttribute=o,a}return Xe(n,[{key:"copy",value:function(e){return Yc(Rc(n.prototype),"copy",this).call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"toJSON",value:function(){var e=Yc(Rc(n.prototype),"toJSON",this).call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}]),n}(yp),Lv=new yf,Kv=new yf,_v=[],Pv=new Uh,Dv=new yf,Ov=new rI,Uv=new hf,jv=function(e){kc(n,e);var t=Vc(n);function n(e,i,r){var a;ka(this,n),(a=t.call(this,e,i)).isInstancedMesh=!0,a.instanceMatrix=new zv(new Float32Array(16*r),16),a.instanceColor=null,a.count=r,a.boundingBox=null,a.boundingSphere=null;for(var o=0;o<r;o++)a.setMatrixAt(o,Dv);return a}return Xe(n,[{key:"computeBoundingBox",value:function(){var e=this.geometry,t=this.count;null===this.boundingBox&&(this.boundingBox=new Uh),null===e.boundingBox&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(var n=0;n<t;n++)this.getMatrixAt(n,Lv),Pv.copy(e.boundingBox).applyMatrix4(Lv),this.boundingBox.union(Pv)}},{key:"computeBoundingSphere",value:function(){var e=this.geometry,t=this.count;null===this.boundingSphere&&(this.boundingSphere=new hf),null===e.boundingSphere&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(var n=0;n<t;n++)this.getMatrixAt(n,Lv),Uv.copy(e.boundingSphere).applyMatrix4(Lv),this.boundingSphere.union(Uv)}},{key:"copy",value:function(e,t){return Yc(Rc(n.prototype),"copy",this).call(this,e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}},{key:"getColorAt",value:function(e,t){t.fromArray(this.instanceColor.array,3*e)}},{key:"getMatrixAt",value:function(e,t){t.fromArray(this.instanceMatrix.array,16*e)}},{key:"raycast",value:function(e,t){var n=this.matrixWorld,i=this.count;if(Ov.geometry=this.geometry,Ov.material=this.material,void 0!==Ov.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),Uv.copy(this.boundingSphere),Uv.applyMatrix4(n),!1!==e.ray.intersectsSphere(Uv)))for(var r=0;r<i;r++){this.getMatrixAt(r,Lv),Kv.multiplyMatrices(n,Lv),Ov.matrixWorld=Kv,Ov.raycast(e,_v);for(var a=0,o=_v.length;a<o;a++){var s=_v[a];s.instanceId=r,s.object=this,t.push(s)}_v.length=0}}},{key:"setColorAt",value:function(e,t){null===this.instanceColor&&(this.instanceColor=new zv(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}},{key:"setMatrixAt",value:function(e,t){t.toArray(this.instanceMatrix.array,16*e)}},{key:"updateMorphTargets",value:function(){}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(rI),Jv=function(e){kc(n,e);var t=Vc(n);function n(e){var i;return ka(this,n),(i=t.call(this)).isLineBasicMaterial=!0,i.type="LineBasicMaterial",i.color=new dp(16777215),i.map=null,i.linewidth=1,i.linecap="round",i.linejoin="round",i.fog=!0,i.setValues(e),i}return Xe(n,[{key:"copy",value:function(e){return Yc(Rc(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}]),n}(sp),Qv=new Ph,qv=new Ph,$v=new yf,eA=new bf,tA=new hf,nA=function(e){kc(n,e);var t=Vc(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ep,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Jv;return ka(this,n),(e=t.call(this)).isLine=!0,e.type="Line",e.geometry=i,e.material=r,e.updateMorphTargets(),e}return Xe(n,[{key:"copy",value:function(e,t){return Yc(Rc(n.prototype),"copy",this).call(this,e,t),this.material=e.material,this.geometry=e.geometry,this}},{key:"computeLineDistances",value:function(){var e=this.geometry;if(null===e.index){for(var t=e.attributes.position,n=[0],i=1,r=t.count;i<r;i++)Qv.fromBufferAttribute(t,i-1),qv.fromBufferAttribute(t,i),n[i]=n[i-1],n[i]+=Qv.distanceTo(qv);e.setAttribute("lineDistance",new Wp(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},{key:"raycast",value:function(e,t){var n=this.geometry,i=this.matrixWorld,r=e.params.Line.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),tA.copy(n.boundingSphere),tA.applyMatrix4(i),tA.radius+=r,!1!==e.ray.intersectsSphere(tA)){$v.copy(i).invert(),eA.copy(e.ray).applyMatrix4($v);var o=r/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,l=new Ph,c=new Ph,u=new Ph,g=new Ph,d=this.isLineSegments?2:1,h=n.index,f=n.attributes.position;if(null!==h)for(var p=Math.max(0,a.start),I=Math.min(h.count,a.start+a.count)-1;p<I;p+=d){var C=h.getX(p),m=h.getX(p+1);if(l.fromBufferAttribute(f,C),c.fromBufferAttribute(f,m),!(eA.distanceSqToSegment(l,c,g,u)>s)){g.applyMatrix4(this.matrixWorld);var v=e.ray.origin.distanceTo(g);v<e.near||v>e.far||t.push({distance:v,point:u.clone().applyMatrix4(this.matrixWorld),index:p,face:null,faceIndex:null,object:this})}}else for(var A=Math.max(0,a.start),b=Math.min(f.count,a.start+a.count)-1;A<b;A+=d){if(l.fromBufferAttribute(f,A),c.fromBufferAttribute(f,A+1),!(eA.distanceSqToSegment(l,c,g,u)>s)){g.applyMatrix4(this.matrixWorld);var y=e.ray.origin.distanceTo(g);y<e.near||y>e.far||t.push({distance:y,point:u.clone().applyMatrix4(this.matrixWorld),index:A,face:null,faceIndex:null,object:this})}}}}},{key:"updateMorphTargets",value:function(){var e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){var n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,r=n.length;i<r;i++){var a=n[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=i}}}}}]),n}(Of),iA=new Ph,rA=new Ph,aA=function(e){kc(n,e);var t=Vc(n);function n(e,i){var r;return ka(this,n),(r=t.call(this,e,i)).isLineSegments=!0,r.type="LineSegments",r}return Xe(n,[{key:"computeLineDistances",value:function(){var e=this.geometry;if(null===e.index){for(var t=e.attributes.position,n=[],i=0,r=t.count;i<r;i+=2)iA.fromBufferAttribute(t,i),rA.fromBufferAttribute(t,i+1),n[i]=0===i?0:n[i-1],n[i+1]=n[i]+iA.distanceTo(rA);e.setAttribute("lineDistance",new Wp(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}]),n}(nA),oA=function(e){kc(n,e);var t=Vc(n);function n(e,i){var r;return ka(this,n),(r=t.call(this,e,i)).isLineLoop=!0,r.type="LineLoop",r}return Xe(n)}(nA),sA=function(e){kc(n,e);var t=Vc(n);function n(e){var i;return ka(this,n),(i=t.call(this)).isPointsMaterial=!0,i.type="PointsMaterial",i.color=new dp(16777215),i.map=null,i.alphaMap=null,i.size=1,i.sizeAttenuation=!0,i.fog=!0,i.setValues(e),i}return Xe(n,[{key:"copy",value:function(e){return Yc(Rc(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}]),n}(sp),lA=new yf,cA=new bf,uA=new hf,gA=new Ph,dA=function(e){kc(n,e);var t=Vc(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ep,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new sA;return ka(this,n),(e=t.call(this)).isPoints=!0,e.type="Points",e.geometry=i,e.material=r,e.updateMorphTargets(),e}return Xe(n,[{key:"copy",value:function(e,t){return Yc(Rc(n.prototype),"copy",this).call(this,e,t),this.material=e.material,this.geometry=e.geometry,this}},{key:"raycast",value:function(e,t){var n=this.geometry,i=this.matrixWorld,r=e.params.Points.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),uA.copy(n.boundingSphere),uA.applyMatrix4(i),uA.radius+=r,!1!==e.ray.intersectsSphere(uA)){lA.copy(i).invert(),cA.copy(e.ray).applyMatrix4(lA);var o=r/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,l=n.index,c=n.attributes.position;if(null!==l)for(var u=Math.max(0,a.start),g=Math.min(l.count,a.start+a.count);u<g;u++){var d=l.getX(u);gA.fromBufferAttribute(c,d),hA(gA,d,s,i,e,t,this)}else for(var h=Math.max(0,a.start),f=Math.min(c.count,a.start+a.count);h<f;h++)gA.fromBufferAttribute(c,h),hA(gA,h,s,i,e,t,this)}}},{key:"updateMorphTargets",value:function(){var e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){var n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,r=n.length;i<r;i++){var a=n[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=i}}}}}]),n}(Of);function hA(e,t,n,i,r,a,o){var s=cA.distanceSqToPoint(e);if(s<n){var l=new Ph;cA.closestPointToPoint(e,l),l.applyMatrix4(i);var c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;a.push({distance:c,distanceToRay:Math.sqrt(s),point:l,index:t,face:null,object:o})}}var fA=function(e){kc(n,e);var t=Vc(n);function n(e,i,r,a,o,s,l,c,u){var g;ka(this,n),(g=t.call(this,e,i,r,a,o,s,l,c,u)).isVideoTexture=!0,g.minFilter=void 0!==s?s:tg,g.magFilter=void 0!==o?o:tg,g.generateMipmaps=!1;var d=Ye(g);return"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){d.needsUpdate=!0,e.requestVideoFrameCallback(t)})),g}return Xe(n,[{key:"clone",value:function(){return new this.constructor(this.image).copy(this)}},{key:"update",value:function(){var e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}]),n}(Hh),pA=function(e){kc(n,e);var t=Vc(n);function n(e,i,r){var a;return ka(this,n),(a=t.call(this,{width:e,height:i})).isFramebufferTexture=!0,a.format=r,a.magFilter=Ju,a.minFilter=Ju,a.generateMipmaps=!1,a.needsUpdate=!0,a}return Xe(n)}(Hh),IA=function(e){kc(n,e);var t=Vc(n);function n(e,i,r,a,o,s,l,c,u,g,d,h){var f;return ka(this,n),(f=t.call(this,null,s,l,c,u,g,a,o,d,h)).isCompressedTexture=!0,f.image={width:i,height:r},f.mipmaps=e,f.flipY=!1,f.generateMipmaps=!1,f}return Xe(n)}(Hh),CA=function(e){kc(n,e);var t=Vc(n);function n(e,i,r,a,o,s){var l;return ka(this,n),(l=t.call(this,e,i,r,o,s)).isCompressedArrayTexture=!0,l.image.depth=a,l.wrapR=Uu,l}return Xe(n)}(IA),mA=function(e){kc(n,e);var t=Vc(n);function n(e,i,r,a,o,s,l,c,u){var g;return ka(this,n),(g=t.call(this,e,i,r,a,o,s,l,c,u)).isCanvasTexture=!0,g.needsUpdate=!0,g}return Xe(n)}(Hh),vA=function(){function e(){ka(this,e),this.type="Curve",this.arcLengthDivisions=200}return Xe(e,[{key:"getPoint",value:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}},{key:"getPointAt",value:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)}},{key:"getPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}},{key:"getSpacedPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}},{key:"getLength",value:function(){var e=this.getLengths();return e[e.length-1]}},{key:"getLengths",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n=[],i=this.getPoint(0),r=0;n.push(0);for(var a=1;a<=e;a++)r+=(t=this.getPoint(a/e)).distanceTo(i),n.push(r),i=t;return this.cacheArcLengths=n,n}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.getLengths()}},{key:"getUtoTmapping",value:function(e,t){var n,i=this.getLengths(),r=0,a=i.length;n=t||e*i[a-1];for(var o,s=0,l=a-1;s<=l;)if((o=i[r=Math.floor(s+(l-s)/2)]-n)<0)s=r+1;else{if(!(o>0)){l=r;break}l=r-1}if(i[r=l]===n)return r/(a-1);var c=i[r];return(r+(n-c)/(i[r+1]-c))/(a-1)}},{key:"getTangent",value:function(e,t){var n=1e-4,i=e-n,r=e+n;i<0&&(i=0),r>1&&(r=1);var a=this.getPoint(i),o=this.getPoint(r),s=t||(a.isVector2?new Ch:new Ph);return s.copy(o).sub(a).normalize(),s}},{key:"getTangentAt",value:function(e,t){var n=this.getUtoTmapping(e);return this.getTangent(n,t)}},{key:"computeFrenetFrames",value:function(e,t){for(var n=new Ph,i=[],r=[],a=[],o=new Ph,s=new yf,l=0;l<=e;l++){var c=l/e;i[l]=this.getTangentAt(c,new Ph)}r[0]=new Ph,a[0]=new Ph;var u=Number.MAX_VALUE,g=Math.abs(i[0].x),d=Math.abs(i[0].y),h=Math.abs(i[0].z);g<=u&&(u=g,n.set(1,0,0)),d<=u&&(u=d,n.set(0,1,0)),h<=u&&n.set(0,0,1),o.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],o),a[0].crossVectors(i[0],r[0]);for(var f=1;f<=e;f++){if(r[f]=r[f-1].clone(),a[f]=a[f-1].clone(),o.crossVectors(i[f-1],i[f]),o.length()>Number.EPSILON){o.normalize();var p=Math.acos(lh(i[f-1].dot(i[f]),-1,1));r[f].applyMatrix4(s.makeRotationAxis(o,p))}a[f].crossVectors(i[f],r[f])}if(!0===t){var I=Math.acos(lh(r[0].dot(r[e]),-1,1));I/=e,i[0].dot(o.crossVectors(r[0],r[e]))>0&&(I=-I);for(var C=1;C<=e;C++)r[C].applyMatrix4(s.makeRotationAxis(i[C],I*C)),a[C].crossVectors(i[C],r[C])}return{tangents:i,normals:r,binormals:a}}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}},{key:"fromJSON",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}]),e}(),AA=function(e){kc(n,e);var t=Vc(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,c=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;return ka(this,n),(e=t.call(this)).isEllipseCurve=!0,e.type="EllipseCurve",e.aX=i,e.aY=r,e.xRadius=a,e.yRadius=o,e.aStartAngle=s,e.aEndAngle=l,e.aClockwise=c,e.aRotation=u,e}return Xe(n,[{key:"getPoint",value:function(e,t){for(var n=t||new Ch,i=2*Math.PI,r=this.aEndAngle-this.aStartAngle,a=Math.abs(r)<Number.EPSILON;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(r=a?0:i),!0!==this.aClockwise||a||(r===i?r=-i:r-=i);var o=this.aStartAngle+e*r,s=this.aX+this.xRadius*Math.cos(o),l=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){var c=Math.cos(this.aRotation),u=Math.sin(this.aRotation),g=s-this.aX,d=l-this.aY;s=g*c-d*u+this.aX,l=g*u+d*c+this.aY}return n.set(s,l)}},{key:"copy",value:function(e){return Yc(Rc(n.prototype),"copy",this).call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},{key:"toJSON",value:function(){var e=Yc(Rc(n.prototype),"toJSON",this).call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}},{key:"fromJSON",value:function(e){return Yc(Rc(n.prototype),"fromJSON",this).call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}]),n}(vA),bA=function(e){kc(n,e);var t=Vc(n);function n(e,i,r,a,o,s){var l;return ka(this,n),(l=t.call(this,e,i,r,r,a,o,s)).isArcCurve=!0,l.type="ArcCurve",l}return Xe(n)}(AA);function yA(){var e=0,t=0,n=0,i=0;function r(r,a,o,s){e=r,t=o,n=-3*r+3*a-2*o-s,i=2*r-2*a+o+s}return{initCatmullRom:function(e,t,n,i,a){r(t,n,a*(n-e),a*(i-t))},initNonuniformCatmullRom:function(e,t,n,i,a,o,s){var l=(t-e)/a-(n-e)/(a+o)+(n-t)/o,c=(n-t)/o-(i-t)/(o+s)+(i-n)/s;r(t,n,l*=o,c*=o)},calc:function(r){var a=r*r;return e+t*r+n*a+i*(a*r)}}}var GA=new Ph,wA=new yA,BA=new yA,xA=new yA,SA=function(e){kc(n,e);var t=Vc(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;return ka(this,n),(e=t.call(this)).isCatmullRomCurve3=!0,e.type="CatmullRomCurve3",e.points=i,e.closed=r,e.curveType=a,e.tension=o,e}return Xe(n,[{key:"getPoint",value:function(e){var t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ph,r=this.points,a=r.length,o=(a-(this.closed?0:1))*e,s=Math.floor(o),l=o-s;this.closed?s+=s>0?0:(Math.floor(Math.abs(s)/a)+1)*a:0===l&&s===a-1&&(s=a-2,l=1),this.closed||s>0?t=r[(s-1)%a]:(GA.subVectors(r[0],r[1]).add(r[0]),t=GA);var c=r[s%a],u=r[(s+1)%a];if(this.closed||s+2<a?n=r[(s+2)%a]:(GA.subVectors(r[a-1],r[a-2]).add(r[a-1]),n=GA),"centripetal"===this.curveType||"chordal"===this.curveType){var g="chordal"===this.curveType?.5:.25,d=Math.pow(t.distanceToSquared(c),g),h=Math.pow(c.distanceToSquared(u),g),f=Math.pow(u.distanceToSquared(n),g);h<1e-4&&(h=1),d<1e-4&&(d=h),f<1e-4&&(f=h),wA.initNonuniformCatmullRom(t.x,c.x,u.x,n.x,d,h,f),BA.initNonuniformCatmullRom(t.y,c.y,u.y,n.y,d,h,f),xA.initNonuniformCatmullRom(t.z,c.z,u.z,n.z,d,h,f)}else"catmullrom"===this.curveType&&(wA.initCatmullRom(t.x,c.x,u.x,n.x,this.tension),BA.initCatmullRom(t.y,c.y,u.y,n.y,this.tension),xA.initCatmullRom(t.z,c.z,u.z,n.z,this.tension));return i.set(wA.calc(l),BA.calc(l),xA.calc(l)),i}},{key:"copy",value:function(e){Yc(Rc(n.prototype),"copy",this).call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++){var r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}},{key:"toJSON",value:function(){var e=Yc(Rc(n.prototype),"toJSON",this).call(this);e.points=[];for(var t=0,i=this.points.length;t<i;t++){var r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}},{key:"fromJSON",value:function(e){Yc(Rc(n.prototype),"fromJSON",this).call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++){var r=e.points[t];this.points.push((new Ph).fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}]),n}(vA);function ZA(e,t,n,i,r){var a=.5*(i-t),o=.5*(r-n),s=e*e;return(2*n-2*i+a+o)*(e*s)+(-3*n+3*i-2*a-o)*s+a*e+n}function kA(e,t,n,i){return function(e,t){var n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,i)}function RA(e,t,n,i,r){return function(e,t){var n=1-e;return n*n*n*t}(e,t)+function(e,t){var n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,i)+function(e,t){return e*e*e*t}(e,r)}var WA=function(e){kc(n,e);var t=Vc(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ch,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ch,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Ch,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Ch;return ka(this,n),(e=t.call(this)).isCubicBezierCurve=!0,e.type="CubicBezierCurve",e.v0=i,e.v1=r,e.v2=a,e.v3=o,e}return Xe(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ch,n=this.v0,i=this.v1,r=this.v2,a=this.v3;return t.set(RA(e,n.x,i.x,r.x,a.x),RA(e,n.y,i.y,r.y,a.y)),t}},{key:"copy",value:function(e){return Yc(Rc(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=Yc(Rc(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return Yc(Rc(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}]),n}(vA),MA=function(e){kc(n,e);var t=Vc(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ph,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ph,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Ph,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Ph;return ka(this,n),(e=t.call(this)).isCubicBezierCurve3=!0,e.type="CubicBezierCurve3",e.v0=i,e.v1=r,e.v2=a,e.v3=o,e}return Xe(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ph,n=this.v0,i=this.v1,r=this.v2,a=this.v3;return t.set(RA(e,n.x,i.x,r.x,a.x),RA(e,n.y,i.y,r.y,a.y),RA(e,n.z,i.z,r.z,a.z)),t}},{key:"copy",value:function(e){return Yc(Rc(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=Yc(Rc(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return Yc(Rc(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}]),n}(vA),VA=function(e){kc(n,e);var t=Vc(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ch,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ch;return ka(this,n),(e=t.call(this)).isLineCurve=!0,e.type="LineCurve",e.v1=i,e.v2=r,e}return Xe(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ch;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}},{key:"getPointAt",value:function(e,t){return this.getPoint(e,t)}},{key:"getTangent",value:function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ch).subVectors(this.v2,this.v1).normalize()}},{key:"getTangentAt",value:function(e,t){return this.getTangent(e,t)}},{key:"copy",value:function(e){return Yc(Rc(n.prototype),"copy",this).call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=Yc(Rc(n.prototype),"toJSON",this).call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return Yc(Rc(n.prototype),"fromJSON",this).call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(vA),FA=function(e){kc(n,e);var t=Vc(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ph,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ph;return ka(this,n),(e=t.call(this)).isLineCurve3=!0,e.type="LineCurve3",e.v1=i,e.v2=r,e}return Xe(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ph;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}},{key:"getPointAt",value:function(e,t){return this.getPoint(e,t)}},{key:"getTangent",value:function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ph).subVectors(this.v2,this.v1).normalize()}},{key:"getTangentAt",value:function(e,t){return this.getTangent(e,t)}},{key:"copy",value:function(e){return Yc(Rc(n.prototype),"copy",this).call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=Yc(Rc(n.prototype),"toJSON",this).call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return Yc(Rc(n.prototype),"fromJSON",this).call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(vA),NA=function(e){kc(n,e);var t=Vc(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ch,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ch,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Ch;return ka(this,n),(e=t.call(this)).isQuadraticBezierCurve=!0,e.type="QuadraticBezierCurve",e.v0=i,e.v1=r,e.v2=a,e}return Xe(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ch,n=this.v0,i=this.v1,r=this.v2;return t.set(kA(e,n.x,i.x,r.x),kA(e,n.y,i.y,r.y)),t}},{key:"copy",value:function(e){return Yc(Rc(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=Yc(Rc(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return Yc(Rc(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(vA),HA=function(e){kc(n,e);var t=Vc(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ph,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ph,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Ph;return ka(this,n),(e=t.call(this)).isQuadraticBezierCurve3=!0,e.type="QuadraticBezierCurve3",e.v0=i,e.v1=r,e.v2=a,e}return Xe(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ph,n=this.v0,i=this.v1,r=this.v2;return t.set(kA(e,n.x,i.x,r.x),kA(e,n.y,i.y,r.y),kA(e,n.z,i.z,r.z)),t}},{key:"copy",value:function(e){return Yc(Rc(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=Yc(Rc(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return Yc(Rc(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(vA),TA=function(e){kc(n,e);var t=Vc(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return ka(this,n),(e=t.call(this)).isSplineCurve=!0,e.type="SplineCurve",e.points=i,e}return Xe(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ch,n=this.points,i=(n.length-1)*e,r=Math.floor(i),a=i-r,o=n[0===r?r:r-1],s=n[r],l=n[r>n.length-2?n.length-1:r+1],c=n[r>n.length-3?n.length-1:r+2];return t.set(ZA(a,o.x,s.x,l.x,c.x),ZA(a,o.y,s.y,l.y,c.y)),t}},{key:"copy",value:function(e){Yc(Rc(n.prototype),"copy",this).call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++){var r=e.points[t];this.points.push(r.clone())}return this}},{key:"toJSON",value:function(){var e=Yc(Rc(n.prototype),"toJSON",this).call(this);e.points=[];for(var t=0,i=this.points.length;t<i;t++){var r=this.points[t];e.points.push(r.toArray())}return e}},{key:"fromJSON",value:function(e){Yc(Rc(n.prototype),"fromJSON",this).call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++){var r=e.points[t];this.points.push((new Ch).fromArray(r))}return this}}]),n}(vA),XA=Object.freeze({__proto__:null,ArcCurve:bA,CatmullRomCurve3:SA,CubicBezierCurve:WA,CubicBezierCurve3:MA,EllipseCurve:AA,LineCurve:VA,LineCurve3:FA,QuadraticBezierCurve:NA,QuadraticBezierCurve3:HA,SplineCurve:TA}),YA=function(e){kc(n,e);var t=Vc(n);function n(){var e;return ka(this,n),(e=t.call(this)).type="CurvePath",e.curves=[],e.autoClose=!1,e}return Xe(n,[{key:"add",value:function(e){this.curves.push(e)}},{key:"closePath",value:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new VA(t,e))}},{key:"getPoint",value:function(e,t){for(var n=e*this.getLength(),i=this.getCurveLengths(),r=0;r<i.length;){if(i[r]>=n){var a=i[r]-n,o=this.curves[r],s=o.getLength(),l=0===s?0:1-a/s;return o.getPointAt(l,t)}r++}return null}},{key:"getLength",value:function(){var e=this.getCurveLengths();return e[e.length-1]}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}},{key:"getCurveLengths",value:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}},{key:"getSpacedPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40,t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}},{key:"getPoints",value:function(){for(var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,n=[],i=0,r=this.curves;i<r.length;i++)for(var a=r[i],o=a.isEllipseCurve?2*t:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?t*a.points.length:t,s=a.getPoints(o),l=0;l<s.length;l++){var c=s[l];e&&e.equals(c)||(n.push(c),e=c)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}},{key:"copy",value:function(e){Yc(Rc(n.prototype),"copy",this).call(this,e),this.curves=[];for(var t=0,i=e.curves.length;t<i;t++){var r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}},{key:"toJSON",value:function(){var e=Yc(Rc(n.prototype),"toJSON",this).call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,i=this.curves.length;t<i;t++){var r=this.curves[t];e.curves.push(r.toJSON())}return e}},{key:"fromJSON",value:function(e){Yc(Rc(n.prototype),"fromJSON",this).call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,i=e.curves.length;t<i;t++){var r=e.curves[t];this.curves.push((new XA[r.type]).fromJSON(r))}return this}}]),n}(vA),EA=function(e){kc(n,e);var t=Vc(n);function n(e){var i;return ka(this,n),(i=t.call(this)).type="Path",i.currentPoint=new Ch,e&&i.setFromPoints(e),i}return Xe(n,[{key:"setFromPoints",value:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}},{key:"moveTo",value:function(e,t){return this.currentPoint.set(e,t),this}},{key:"lineTo",value:function(e,t){var n=new VA(this.currentPoint.clone(),new Ch(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}},{key:"quadraticCurveTo",value:function(e,t,n,i){var r=new NA(this.currentPoint.clone(),new Ch(e,t),new Ch(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this}},{key:"bezierCurveTo",value:function(e,t,n,i,r,a){var o=new WA(this.currentPoint.clone(),new Ch(e,t),new Ch(n,i),new Ch(r,a));return this.curves.push(o),this.currentPoint.set(r,a),this}},{key:"splineThru",value:function(e){var t=[this.currentPoint.clone()].concat(e),n=new TA(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}},{key:"arc",value:function(e,t,n,i,r,a){var o=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+o,t+s,n,i,r,a),this}},{key:"absarc",value:function(e,t,n,i,r,a){return this.absellipse(e,t,n,n,i,r,a),this}},{key:"ellipse",value:function(e,t,n,i,r,a,o,s){var l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+l,t+c,n,i,r,a,o,s),this}},{key:"absellipse",value:function(e,t,n,i,r,a,o,s){var l=new AA(e,t,n,i,r,a,o,s);if(this.curves.length>0){var c=l.getPoint(0);c.equals(this.currentPoint)||this.lineTo(c.x,c.y)}this.curves.push(l);var u=l.getPoint(1);return this.currentPoint.copy(u),this}},{key:"copy",value:function(e){return Yc(Rc(n.prototype),"copy",this).call(this,e),this.currentPoint.copy(e.currentPoint),this}},{key:"toJSON",value:function(){var e=Yc(Rc(n.prototype),"toJSON",this).call(this);return e.currentPoint=this.currentPoint.toArray(),e}},{key:"fromJSON",value:function(e){return Yc(Rc(n.prototype),"fromJSON",this).call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}]),n}(YA),zA=function(e){kc(n,e);var t=Vc(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[new Ch(0,-.5),new Ch(.5,0),new Ch(0,.5)],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;ka(this,n),(e=t.call(this)).type="LatheGeometry",e.parameters={points:i,segments:r,phiStart:a,phiLength:o},r=Math.floor(r),o=lh(o,0,2*Math.PI);for(var s=[],l=[],c=[],u=[],g=[],d=1/r,h=new Ph,f=new Ch,p=new Ph,I=new Ph,C=new Ph,m=0,v=0,A=0;A<=i.length-1;A++)switch(A){case 0:m=i[A+1].x-i[A].x,v=i[A+1].y-i[A].y,p.x=1*v,p.y=-m,p.z=0*v,C.copy(p),p.normalize(),u.push(p.x,p.y,p.z);break;case i.length-1:u.push(C.x,C.y,C.z);break;default:m=i[A+1].x-i[A].x,v=i[A+1].y-i[A].y,p.x=1*v,p.y=-m,p.z=0*v,I.copy(p),p.x+=C.x,p.y+=C.y,p.z+=C.z,p.normalize(),u.push(p.x,p.y,p.z),C.copy(I)}for(var b=0;b<=r;b++)for(var y=a+b*d*o,G=Math.sin(y),w=Math.cos(y),B=0;B<=i.length-1;B++){h.x=i[B].x*G,h.y=i[B].y,h.z=i[B].x*w,l.push(h.x,h.y,h.z),f.x=b/r,f.y=B/(i.length-1),c.push(f.x,f.y);var x=u[3*B+0]*G,S=u[3*B+1],Z=u[3*B+0]*w;g.push(x,S,Z)}for(var k=0;k<r;k++)for(var R=0;R<i.length-1;R++){var W=R+k*i.length,M=W,V=W+i.length,F=W+i.length+1,N=W+1;s.push(M,V,N),s.push(F,N,V)}return e.setIndex(s),e.setAttribute("position",new Wp(l,3)),e.setAttribute("uv",new Wp(c,2)),e.setAttribute("normal",new Wp(g,3)),e}return Xe(n,[{key:"copy",value:function(e){return Yc(Rc(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new n(e.points,e.segments,e.phiStart,e.phiLength)}}]),n}(Ep),LA=function(e){kc(n,e);var t=Vc(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8;ka(this,n);var s=new EA;return s.absarc(0,-r/2,i,1.5*Math.PI,0),s.absarc(0,r/2,i,0,.5*Math.PI),(e=t.call(this,s.getPoints(a),o)).type="CapsuleGeometry",e.parameters={radius:i,height:r,capSegments:a,radialSegments:o},e}return Xe(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.length,e.capSegments,e.radialSegments)}}]),n}(zA),KA=function(e){kc(n,e);var t=Vc(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;ka(this,n),(e=t.call(this)).type="CircleGeometry",e.parameters={radius:i,segments:r,thetaStart:a,thetaLength:o},r=Math.max(3,r);var s=[],l=[],c=[],u=[],g=new Ph,d=new Ch;l.push(0,0,0),c.push(0,0,1),u.push(.5,.5);for(var h=0,f=3;h<=r;h++,f+=3){var p=a+h/r*o;g.x=i*Math.cos(p),g.y=i*Math.sin(p),l.push(g.x,g.y,g.z),c.push(0,0,1),d.x=(l[f]/i+1)/2,d.y=(l[f+1]/i+1)/2,u.push(d.x,d.y)}for(var I=1;I<=r;I++)s.push(I,I+1,0);return e.setIndex(s),e.setAttribute("position",new Wp(l,3)),e.setAttribute("normal",new Wp(c,3)),e.setAttribute("uv",new Wp(u,2)),e}return Xe(n,[{key:"copy",value:function(e){return Yc(Rc(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new n(e.radius,e.segments,e.thetaStart,e.thetaLength)}}]),n}(Ep),_A=function(e){kc(n,e);var t=Vc(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,l=arguments.length>5&&void 0!==arguments[5]&&arguments[5],c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;ka(this,n),(e=t.call(this)).type="CylinderGeometry",e.parameters={radiusTop:i,radiusBottom:r,height:a,radialSegments:o,heightSegments:s,openEnded:l,thetaStart:c,thetaLength:u};var g=Ye(e);o=Math.floor(o),s=Math.floor(s);var d=[],h=[],f=[],p=[],I=0,C=[],m=a/2,v=0;function A(e){for(var t=I,n=new Ch,a=new Ph,s=0,l=!0===e?i:r,C=!0===e?1:-1,A=1;A<=o;A++)h.push(0,m*C,0),f.push(0,C,0),p.push(.5,.5),I++;for(var b=I,y=0;y<=o;y++){var G=y/o*u+c,w=Math.cos(G),B=Math.sin(G);a.x=l*B,a.y=m*C,a.z=l*w,h.push(a.x,a.y,a.z),f.push(0,C,0),n.x=.5*w+.5,n.y=.5*B*C+.5,p.push(n.x,n.y),I++}for(var x=0;x<o;x++){var S=t+x,Z=b+x;!0===e?d.push(Z,Z+1,S):d.push(Z+1,Z,S),s+=3}g.addGroup(v,s,!0===e?1:2),v+=s}return function(){for(var e=new Ph,t=new Ph,n=0,l=(r-i)/a,A=0;A<=s;A++){for(var b=[],y=A/s,G=y*(r-i)+i,w=0;w<=o;w++){var B=w/o,x=B*u+c,S=Math.sin(x),Z=Math.cos(x);t.x=G*S,t.y=-y*a+m,t.z=G*Z,h.push(t.x,t.y,t.z),e.set(S,l,Z).normalize(),f.push(e.x,e.y,e.z),p.push(B,1-y),b.push(I++)}C.push(b)}for(var k=0;k<o;k++)for(var R=0;R<s;R++){var W=C[R][k],M=C[R+1][k],V=C[R+1][k+1],F=C[R][k+1];d.push(W,M,F),d.push(M,V,F),n+=6}g.addGroup(v,n,0),v+=n}(),!1===l&&(i>0&&A(!0),r>0&&A(!1)),e.setIndex(d),e.setAttribute("position",new Wp(h,3)),e.setAttribute("normal",new Wp(f,3)),e.setAttribute("uv",new Wp(p,2)),e}return Xe(n,[{key:"copy",value:function(e){return Yc(Rc(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new n(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}]),n}(Ep),PA=function(e){kc(n,e);var t=Vc(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2*Math.PI;return ka(this,n),(e=t.call(this,0,i,r,a,o,s,l,c)).type="ConeGeometry",e.parameters={radius:i,height:r,radialSegments:a,heightSegments:o,openEnded:s,thetaStart:l,thetaLength:c},e}return Xe(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}]),n}(_A),DA=function(e){kc(n,e);var t=Vc(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;ka(this,n),(e=t.call(this)).type="PolyhedronGeometry",e.parameters={vertices:i,indices:r,radius:a,detail:o};var s=[],l=[];function c(e,t,n,i){for(var r=i+1,a=[],o=0;o<=r;o++){a[o]=[];for(var s=e.clone().lerp(n,o/r),l=t.clone().lerp(n,o/r),c=r-o,g=0;g<=c;g++)a[o][g]=0===g&&o===r?s:s.clone().lerp(l,g/c)}for(var d=0;d<r;d++)for(var h=0;h<2*(r-d)-1;h++){var f=Math.floor(h/2);h%2===0?(u(a[d][f+1]),u(a[d+1][f]),u(a[d][f])):(u(a[d][f+1]),u(a[d+1][f+1]),u(a[d+1][f]))}}function u(e){s.push(e.x,e.y,e.z)}function g(e,t){var n=3*e;t.x=i[n+0],t.y=i[n+1],t.z=i[n+2]}function d(e,t,n,i){i<0&&1===e.x&&(l[t]=e.x-1),0===n.x&&0===n.z&&(l[t]=i/2/Math.PI+.5)}function h(e){return Math.atan2(e.z,-e.x)}return function(e){for(var t=new Ph,n=new Ph,i=new Ph,a=0;a<r.length;a+=3)g(r[a+0],t),g(r[a+1],n),g(r[a+2],i),c(t,n,i,e)}(o),function(e){for(var t=new Ph,n=0;n<s.length;n+=3)t.x=s[n+0],t.y=s[n+1],t.z=s[n+2],t.normalize().multiplyScalar(e),s[n+0]=t.x,s[n+1]=t.y,s[n+2]=t.z}(a),function(){for(var e=new Ph,t=0;t<s.length;t+=3){e.x=s[t+0],e.y=s[t+1],e.z=s[t+2];var n=h(e)/2/Math.PI+.5,i=(r=e,Math.atan2(-r.y,Math.sqrt(r.x*r.x+r.z*r.z))/Math.PI+.5);l.push(n,1-i)}var r;(function(){for(var e=new Ph,t=new Ph,n=new Ph,i=new Ph,r=new Ch,a=new Ch,o=new Ch,c=0,u=0;c<s.length;c+=9,u+=6){e.set(s[c+0],s[c+1],s[c+2]),t.set(s[c+3],s[c+4],s[c+5]),n.set(s[c+6],s[c+7],s[c+8]),r.set(l[u+0],l[u+1]),a.set(l[u+2],l[u+3]),o.set(l[u+4],l[u+5]),i.copy(e).add(t).add(n).divideScalar(3);var g=h(i);d(r,u+0,e,g),d(a,u+2,t,g),d(o,u+4,n,g)}})(),function(){for(var e=0;e<l.length;e+=6){var t=l[e+0],n=l[e+2],i=l[e+4],r=Math.max(t,n,i),a=Math.min(t,n,i);r>.9&&a<.1&&(t<.2&&(l[e+0]+=1),n<.2&&(l[e+2]+=1),i<.2&&(l[e+4]+=1))}}()}(),e.setAttribute("position",new Wp(s,3)),e.setAttribute("normal",new Wp(s.slice(),3)),e.setAttribute("uv",new Wp(l,2)),0===o?e.computeVertexNormals():e.normalizeNormals(),e}return Xe(n,[{key:"copy",value:function(e){return Yc(Rc(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new n(e.vertices,e.indices,e.radius,e.details)}}]),n}(Ep),OA=function(e){kc(n,e);var t=Vc(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;ka(this,n);var a=(1+Math.sqrt(5))/2,o=1/a,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-o,-a,0,-o,a,0,o,-a,0,o,a,-o,-a,0,-o,a,0,o,-a,0,o,a,0,-a,0,-o,a,0,-o,-a,0,o,a,0,o];return(e=t.call(this,s,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],i,r)).type="DodecahedronGeometry",e.parameters={radius:i,detail:r},e}return Xe(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.detail)}}]),n}(DA),UA=new Ph,jA=new Ph,JA=new Ph,QA=new ap,qA=function(e){kc(n,e);var t=Vc(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(ka(this,n),(e=t.call(this)).type="EdgesGeometry",e.parameters={geometry:i,thresholdAngle:r},null!==i){for(var a=Math.pow(10,4),o=Math.cos(ah*r),s=i.getIndex(),l=i.getAttribute("position"),c=s?s.count:l.count,u=[0,0,0],g=["a","b","c"],d=new Array(3),h={},f=[],p=0;p<c;p+=3){s?(u[0]=s.getX(p),u[1]=s.getX(p+1),u[2]=s.getX(p+2)):(u[0]=p,u[1]=p+1,u[2]=p+2);var I=QA.a,C=QA.b,m=QA.c;if(I.fromBufferAttribute(l,u[0]),C.fromBufferAttribute(l,u[1]),m.fromBufferAttribute(l,u[2]),QA.getNormal(JA),d[0]="".concat(Math.round(I.x*a),",").concat(Math.round(I.y*a),",").concat(Math.round(I.z*a)),d[1]="".concat(Math.round(C.x*a),",").concat(Math.round(C.y*a),",").concat(Math.round(C.z*a)),d[2]="".concat(Math.round(m.x*a),",").concat(Math.round(m.y*a),",").concat(Math.round(m.z*a)),d[0]!==d[1]&&d[1]!==d[2]&&d[2]!==d[0])for(var v=0;v<3;v++){var A=(v+1)%3,b=d[v],y=d[A],G=QA[g[v]],w=QA[g[A]],B="".concat(b,"_").concat(y),x="".concat(y,"_").concat(b);x in h&&h[x]?(JA.dot(h[x].normal)<=o&&(f.push(G.x,G.y,G.z),f.push(w.x,w.y,w.z)),h[x]=null):B in h||(h[B]={index0:u[v],index1:u[A],normal:JA.clone()})}}for(var S in h)if(h[S]){var Z=h[S],k=Z.index0,R=Z.index1;UA.fromBufferAttribute(l,k),jA.fromBufferAttribute(l,R),f.push(UA.x,UA.y,UA.z),f.push(jA.x,jA.y,jA.z)}e.setAttribute("position",new Wp(f,3))}return e}return Xe(n,[{key:"copy",value:function(e){return Yc(Rc(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}}]),n}(Ep),$A=function(e){kc(n,e);var t=Vc(n);function n(e){var i;return ka(this,n),(i=t.call(this,e)).uuid=sh(),i.type="Shape",i.holes=[],i}return Xe(n,[{key:"getPointsHoles",value:function(e){for(var t=[],n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t}},{key:"extractPoints",value:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}},{key:"copy",value:function(e){Yc(Rc(n.prototype),"copy",this).call(this,e),this.holes=[];for(var t=0,i=e.holes.length;t<i;t++){var r=e.holes[t];this.holes.push(r.clone())}return this}},{key:"toJSON",value:function(){var e=Yc(Rc(n.prototype),"toJSON",this).call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,i=this.holes.length;t<i;t++){var r=this.holes[t];e.holes.push(r.toJSON())}return e}},{key:"fromJSON",value:function(e){Yc(Rc(n.prototype),"fromJSON",this).call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,i=e.holes.length;t<i;t++){var r=e.holes[t];this.holes.push((new EA).fromJSON(r))}return this}}]),n}(EA),eb=function(e,t){var n,i,r,a,o,s,l,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,u=t&&t.length,g=u?t[0]*c:e.length,d=tb(e,0,g,c,!0),h=[];if(!d||d.next===d.prev)return h;if(u&&(d=function(e,t,n,i){var r,a,o,s=[];for(r=0,a=t.length;r<a;r++)(o=tb(e,t[r]*i,r<a-1?t[r+1]*i:e.length,i,!1))===o.next&&(o.steiner=!0),s.push(db(o));for(s.sort(lb),r=0;r<s.length;r++)n=cb(s[r],n);return n}(e,t,d,c)),e.length>80*c){n=r=e[0],i=a=e[1];for(var f=c;f<g;f+=c)(o=e[f])<n&&(n=o),(s=e[f+1])<i&&(i=s),o>r&&(r=o),s>a&&(a=s);l=0!==(l=Math.max(r-n,a-i))?32767/l:0}return ib(d,h,c,n,i,l,0),h};function tb(e,t,n,i,r){var a,o;if(r===function(e,t,n,i){for(var r=0,a=t,o=n-i;a<n;a+=i)r+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return r}(e,t,n,i)>0)for(a=t;a<n;a+=i)o=yb(a,e[a],e[a+1],o);else for(a=n-i;a>=t;a-=i)o=yb(a,e[a],e[a+1],o);return o&&Ib(o,o.next)&&(Gb(o),o=o.next),o}function nb(e,t){if(!e)return e;t||(t=e);var n,i=e;do{if(n=!1,i.steiner||!Ib(i,i.next)&&0!==pb(i.prev,i,i.next))i=i.next;else{if(Gb(i),(i=t=i.prev)===i.next)break;n=!0}}while(n||i!==t);return t}function ib(e,t,n,i,r,a,o){if(e){!o&&a&&function(e,t,n,i){var r=e;do{0===r.z&&(r.z=gb(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){var t,n,i,r,a,o,s,l,c=1;do{for(n=e,e=null,a=null,o=0;n;){for(o++,i=n,s=0,t=0;t<c&&(s++,i=i.nextZ);t++);for(l=c;s>0||l>0&&i;)0!==s&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,l--),a?a.nextZ=r:e=r,r.prevZ=a,a=r;n=i}a.nextZ=null,c*=2}while(o>1)}(r)}(e,i,r,a);for(var s,l,c=e;e.prev!==e.next;)if(s=e.prev,l=e.next,a?ab(e,i,r,a):rb(e))t.push(s.i/n|0),t.push(e.i/n|0),t.push(l.i/n|0),Gb(e),e=l.next,c=l.next;else if((e=l)===c){o?1===o?ib(e=ob(nb(e),t,n),t,n,i,r,a,2):2===o&&sb(e,t,n,i,r,a):ib(nb(e),t,n,i,r,a,1);break}}}function rb(e){var t=e.prev,n=e,i=e.next;if(pb(t,n,i)>=0)return!1;for(var r=t.x,a=n.x,o=i.x,s=t.y,l=n.y,c=i.y,u=r<a?r<o?r:o:a<o?a:o,g=s<l?s<c?s:c:l<c?l:c,d=r>a?r>o?r:o:a>o?a:o,h=s>l?s>c?s:c:l>c?l:c,f=i.next;f!==t;){if(f.x>=u&&f.x<=d&&f.y>=g&&f.y<=h&&hb(r,s,a,l,o,c,f.x,f.y)&&pb(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function ab(e,t,n,i){var r=e.prev,a=e,o=e.next;if(pb(r,a,o)>=0)return!1;for(var s=r.x,l=a.x,c=o.x,u=r.y,g=a.y,d=o.y,h=s<l?s<c?s:c:l<c?l:c,f=u<g?u<d?u:d:g<d?g:d,p=s>l?s>c?s:c:l>c?l:c,I=u>g?u>d?u:d:g>d?g:d,C=gb(h,f,t,n,i),m=gb(p,I,t,n,i),v=e.prevZ,A=e.nextZ;v&&v.z>=C&&A&&A.z<=m;){if(v.x>=h&&v.x<=p&&v.y>=f&&v.y<=I&&v!==r&&v!==o&&hb(s,u,l,g,c,d,v.x,v.y)&&pb(v.prev,v,v.next)>=0)return!1;if(v=v.prevZ,A.x>=h&&A.x<=p&&A.y>=f&&A.y<=I&&A!==r&&A!==o&&hb(s,u,l,g,c,d,A.x,A.y)&&pb(A.prev,A,A.next)>=0)return!1;A=A.nextZ}for(;v&&v.z>=C;){if(v.x>=h&&v.x<=p&&v.y>=f&&v.y<=I&&v!==r&&v!==o&&hb(s,u,l,g,c,d,v.x,v.y)&&pb(v.prev,v,v.next)>=0)return!1;v=v.prevZ}for(;A&&A.z<=m;){if(A.x>=h&&A.x<=p&&A.y>=f&&A.y<=I&&A!==r&&A!==o&&hb(s,u,l,g,c,d,A.x,A.y)&&pb(A.prev,A,A.next)>=0)return!1;A=A.nextZ}return!0}function ob(e,t,n){var i=e;do{var r=i.prev,a=i.next.next;!Ib(r,a)&&Cb(r,i,i.next,a)&&Ab(r,a)&&Ab(a,r)&&(t.push(r.i/n|0),t.push(i.i/n|0),t.push(a.i/n|0),Gb(i),Gb(i.next),i=e=a),i=i.next}while(i!==e);return nb(i)}function sb(e,t,n,i,r,a){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&fb(o,s)){var l=bb(o,s);return o=nb(o,o.next),l=nb(l,l.next),ib(o,t,n,i,r,a,0),void ib(l,t,n,i,r,a,0)}s=s.next}o=o.next}while(o!==e)}function lb(e,t){return e.x-t.x}function cb(e,t){var n=function(e,t){var n,i=t,r=-1/0,a=e.x,o=e.y;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var s=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=a&&s>r&&(r=s,n=i.x<i.next.x?i:i.next,s===a))return n}i=i.next}while(i!==t);if(!n)return null;var l,c=n,u=n.x,g=n.y,d=1/0;i=n;do{a>=i.x&&i.x>=u&&a!==i.x&&hb(o<g?a:r,o,u,g,o<g?r:a,o,i.x,i.y)&&(l=Math.abs(o-i.y)/(a-i.x),Ab(i,e)&&(l<d||l===d&&(i.x>n.x||i.x===n.x&&ub(n,i)))&&(n=i,d=l)),i=i.next}while(i!==c);return n}(e,t);if(!n)return t;var i=bb(n,e);return nb(i,i.next),nb(n,n.next)}function ub(e,t){return pb(e.prev,e,t.prev)<0&&pb(t.next,e,e.next)<0}function gb(e,t,n,i,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-i)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function db(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function hb(e,t,n,i,r,a,o,s){return(r-o)*(t-s)>=(e-o)*(a-s)&&(e-o)*(i-s)>=(n-o)*(t-s)&&(n-o)*(a-s)>=(r-o)*(i-s)}function fb(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Cb(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(Ab(e,t)&&Ab(t,e)&&function(e,t){var n=e,i=!1,r=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!==n.next.y>a&&n.next.y!==n.y&&r<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}(e,t)&&(pb(e.prev,e,t.prev)||pb(e,t.prev,t))||Ib(e,t)&&pb(e.prev,e,e.next)>0&&pb(t.prev,t,t.next)>0)}function pb(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Ib(e,t){return e.x===t.x&&e.y===t.y}function Cb(e,t,n,i){var r=vb(pb(e,t,n)),a=vb(pb(e,t,i)),o=vb(pb(n,i,e)),s=vb(pb(n,i,t));return r!==a&&o!==s||(!(0!==r||!mb(e,n,t))||(!(0!==a||!mb(e,i,t))||(!(0!==o||!mb(n,e,i))||!(0!==s||!mb(n,t,i)))))}function mb(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function vb(e){return e>0?1:e<0?-1:0}function Ab(e,t){return pb(e.prev,e,e.next)<0?pb(e,t,e.next)>=0&&pb(e,e.prev,t)>=0:pb(e,t,e.prev)<0||pb(e,e.next,t)<0}function bb(e,t){var n=new wb(e.i,e.x,e.y),i=new wb(t.i,t.x,t.y),r=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,a.next=i,i.prev=a,i}function yb(e,t,n,i){var r=new wb(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Gb(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function wb(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}var Bb=function(){function e(){ka(this,e)}return Xe(e,null,[{key:"area",value:function(e){for(var t=e.length,n=0,i=t-1,r=0;r<t;i=r++)n+=e[i].x*e[r].y-e[r].x*e[i].y;return.5*n}},{key:"isClockWise",value:function(t){return e.area(t)<0}},{key:"triangulateShape",value:function(e,t){var n=[],i=[],r=[];xb(e),Sb(n,e);var a=e.length;t.forEach(xb);for(var o=0;o<t.length;o++)i.push(a),a+=t[o].length,Sb(n,t[o]);for(var s=eb(n,i),l=0;l<s.length;l+=3)r.push(s.slice(l,l+3));return r}}]),e}();function xb(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function Sb(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}var Zb=function(e){kc(n,e);var t=Vc(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new $A([new Ch(.5,.5),new Ch(-.5,.5),new Ch(-.5,-.5),new Ch(.5,-.5)]),r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ka(this,n),(e=t.call(this)).type="ExtrudeGeometry",e.parameters={shapes:i,options:r},i=Array.isArray(i)?i:[i];for(var a=Ye(e),o=[],s=[],l=0,c=i.length;l<c;l++){u(i[l])}function u(e){var t,n,i,l,c,u=[],g=void 0!==r.curveSegments?r.curveSegments:12,d=void 0!==r.steps?r.steps:1,h=void 0!==r.depth?r.depth:1,f=void 0===r.bevelEnabled||r.bevelEnabled,p=void 0!==r.bevelThickness?r.bevelThickness:.2,I=void 0!==r.bevelSize?r.bevelSize:p-.1,C=void 0!==r.bevelOffset?r.bevelOffset:0,m=void 0!==r.bevelSegments?r.bevelSegments:3,v=r.extrudePath,A=void 0!==r.UVGenerator?r.UVGenerator:kb,b=!1;v&&(t=v.getSpacedPoints(d),b=!0,f=!1,n=v.computeFrenetFrames(d,!1),i=new Ph,l=new Ph,c=new Ph),f||(m=0,p=0,I=0,C=0);var y=e.extractPoints(g),G=y.shape,w=y.holes;if(!Bb.isClockWise(G)){G=G.reverse();for(var B=0,x=w.length;B<x;B++){var S=w[B];Bb.isClockWise(S)&&(w[B]=S.reverse())}}for(var Z=Bb.triangulateShape(G,w),k=G,R=0,W=w.length;R<W;R++){var M=w[R];G=G.concat(M)}function V(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().addScaledVector(t,n)}var F=G.length,N=Z.length;function H(e,t,n){var i,r,a,o=e.x-t.x,s=e.y-t.y,l=n.x-e.x,c=n.y-e.y,u=o*o+s*s,g=o*c-s*l;if(Math.abs(g)>Number.EPSILON){var d=Math.sqrt(u),h=Math.sqrt(l*l+c*c),f=t.x-s/d,p=t.y+o/d,I=((n.x-c/h-f)*c-(n.y+l/h-p)*l)/(o*c-s*l),C=(i=f+o*I-e.x)*i+(r=p+s*I-e.y)*r;if(C<=2)return new Ch(i,r);a=Math.sqrt(C/2)}else{var m=!1;o>Number.EPSILON?l>Number.EPSILON&&(m=!0):o<-Number.EPSILON?l<-Number.EPSILON&&(m=!0):Math.sign(s)===Math.sign(c)&&(m=!0),m?(i=-s,r=o,a=Math.sqrt(u)):(i=o,r=s,a=Math.sqrt(u/2))}return new Ch(i/a,r/a)}for(var T=[],X=0,Y=k.length,E=Y-1,z=X+1;X<Y;X++,E++,z++)E===Y&&(E=0),z===Y&&(z=0),T[X]=H(k[X],k[E],k[z]);for(var L,K=[],_=T.concat(),P=0,D=w.length;P<D;P++){var O=w[P];L=[];for(var U=0,j=O.length,J=j-1,Q=U+1;U<j;U++,J++,Q++)J===j&&(J=0),Q===j&&(Q=0),L[U]=H(O[U],O[J],O[Q]);K.push(L),_=_.concat(L)}for(var q=0;q<m;q++){for(var $=q/m,ee=p*Math.cos($*Math.PI/2),te=I*Math.sin($*Math.PI/2)+C,ne=0,ie=k.length;ne<ie;ne++){var re=V(k[ne],T[ne],te);We(re.x,re.y,-ee)}for(var ae=0,oe=w.length;ae<oe;ae++){var se=w[ae];L=K[ae];for(var le=0,ce=se.length;le<ce;le++){var ue=V(se[le],L[le],te);We(ue.x,ue.y,-ee)}}}for(var ge=I+C,de=0;de<F;de++){var he=f?V(G[de],_[de],ge):G[de];b?(l.copy(n.normals[0]).multiplyScalar(he.x),i.copy(n.binormals[0]).multiplyScalar(he.y),c.copy(t[0]).add(l).add(i),We(c.x,c.y,c.z)):We(he.x,he.y,0)}for(var fe=1;fe<=d;fe++)for(var pe=0;pe<F;pe++){var Ie=f?V(G[pe],_[pe],ge):G[pe];b?(l.copy(n.normals[fe]).multiplyScalar(Ie.x),i.copy(n.binormals[fe]).multiplyScalar(Ie.y),c.copy(t[fe]).add(l).add(i),We(c.x,c.y,c.z)):We(Ie.x,Ie.y,h/d*fe)}for(var Ce=m-1;Ce>=0;Ce--){for(var me=Ce/m,ve=p*Math.cos(me*Math.PI/2),Ae=I*Math.sin(me*Math.PI/2)+C,be=0,ye=k.length;be<ye;be++){var Ge=V(k[be],T[be],Ae);We(Ge.x,Ge.y,h+ve)}for(var we=0,Be=w.length;we<Be;we++){var xe=w[we];L=K[we];for(var Se=0,Ze=xe.length;Se<Ze;Se++){var ke=V(xe[Se],L[Se],Ae);b?We(ke.x,ke.y+t[d-1].y,t[d-1].x+ve):We(ke.x,ke.y,h+ve)}}}function Re(e,t){for(var n=e.length;--n>=0;){var i=n,r=n-1;r<0&&(r=e.length-1);for(var a=0,o=d+2*m;a<o;a++){var s=F*a,l=F*(a+1);Ve(t+i+s,t+r+s,t+r+l,t+i+l)}}}function We(e,t,n){u.push(e),u.push(t),u.push(n)}function Me(e,t,n){Fe(e),Fe(t),Fe(n);var i=o.length/3,r=A.generateTopUV(a,o,i-3,i-2,i-1);Ne(r[0]),Ne(r[1]),Ne(r[2])}function Ve(e,t,n,i){Fe(e),Fe(t),Fe(i),Fe(t),Fe(n),Fe(i);var r=o.length/3,s=A.generateSideWallUV(a,o,r-6,r-3,r-2,r-1);Ne(s[0]),Ne(s[1]),Ne(s[3]),Ne(s[1]),Ne(s[2]),Ne(s[3])}function Fe(e){o.push(u[3*e+0]),o.push(u[3*e+1]),o.push(u[3*e+2])}function Ne(e){s.push(e.x),s.push(e.y)}!function(){var e=o.length/3;if(f){for(var t=0,n=F*t,i=0;i<N;i++){var r=Z[i];Me(r[2]+n,r[1]+n,r[0]+n)}n=F*(t=d+2*m);for(var s=0;s<N;s++){var l=Z[s];Me(l[0]+n,l[1]+n,l[2]+n)}}else{for(var c=0;c<N;c++){var u=Z[c];Me(u[2],u[1],u[0])}for(var g=0;g<N;g++){var h=Z[g];Me(h[0]+F*d,h[1]+F*d,h[2]+F*d)}}a.addGroup(e,o.length/3-e,0)}(),function(){var e=o.length/3,t=0;Re(k,t),t+=k.length;for(var n=0,i=w.length;n<i;n++){var r=w[n];Re(r,t),t+=r.length}a.addGroup(e,o.length/3-e,1)}()}return e.setAttribute("position",new Wp(o,3)),e.setAttribute("uv",new Wp(s,2)),e.computeVertexNormals(),e}return Xe(n,[{key:"copy",value:function(e){return Yc(Rc(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}},{key:"toJSON",value:function(){var e=Yc(Rc(n.prototype),"toJSON",this).call(this);return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(var i=0,r=e.length;i<r;i++){var a=e[i];n.shapes.push(a.uuid)}else n.shapes.push(e.uuid);n.options=Object.assign({},t),void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,e)}}],[{key:"fromJSON",value:function(e,t){for(var i=[],r=0,a=e.shapes.length;r<a;r++){var o=t[e.shapes[r]];i.push(o)}var s=e.options.extrudePath;return void 0!==s&&(e.options.extrudePath=(new XA[s.type]).fromJSON(s)),new n(i,e.options)}}]),n}(Ep),kb={generateTopUV:function(e,t,n,i,r){var a=t[3*n],o=t[3*n+1],s=t[3*i],l=t[3*i+1],c=t[3*r],u=t[3*r+1];return[new Ch(a,o),new Ch(s,l),new Ch(c,u)]},generateSideWallUV:function(e,t,n,i,r,a){var o=t[3*n],s=t[3*n+1],l=t[3*n+2],c=t[3*i],u=t[3*i+1],g=t[3*i+2],d=t[3*r],h=t[3*r+1],f=t[3*r+2],p=t[3*a],I=t[3*a+1],C=t[3*a+2];return Math.abs(s-u)<Math.abs(o-c)?[new Ch(o,1-l),new Ch(c,1-g),new Ch(d,1-f),new Ch(p,1-C)]:[new Ch(s,1-l),new Ch(u,1-g),new Ch(h,1-f),new Ch(I,1-C)]}};var Rb=function(e){kc(n,e);var t=Vc(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;ka(this,n);var a=(1+Math.sqrt(5))/2,o=[-1,a,0,1,a,0,-1,-a,0,1,-a,0,0,-1,a,0,1,a,0,-1,-a,0,1,-a,a,0,-1,a,0,1,-a,0,-1,-a,0,1];return(e=t.call(this,o,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],i,r)).type="IcosahedronGeometry",e.parameters={radius:i,detail:r},e}return Xe(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.detail)}}]),n}(DA),Wb=function(e){kc(n,e);var t=Vc(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;ka(this,n);return(e=t.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],i,r)).type="OctahedronGeometry",e.parameters={radius:i,detail:r},e}return Xe(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.detail)}}]),n}(DA),Mb=function(e){kc(n,e);var t=Vc(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI;ka(this,n),(e=t.call(this)).type="RingGeometry",e.parameters={innerRadius:i,outerRadius:r,thetaSegments:a,phiSegments:o,thetaStart:s,thetaLength:l},a=Math.max(3,a);for(var c=[],u=[],g=[],d=[],h=i,f=(r-i)/(o=Math.max(1,o)),p=new Ph,I=new Ch,C=0;C<=o;C++){for(var m=0;m<=a;m++){var v=s+m/a*l;p.x=h*Math.cos(v),p.y=h*Math.sin(v),u.push(p.x,p.y,p.z),g.push(0,0,1),I.x=(p.x/r+1)/2,I.y=(p.y/r+1)/2,d.push(I.x,I.y)}h+=f}for(var A=0;A<o;A++)for(var b=A*(a+1),y=0;y<a;y++){var G=y+b,w=G,B=G+a+1,x=G+a+2,S=G+1;c.push(w,B,S),c.push(B,x,S)}return e.setIndex(c),e.setAttribute("position",new Wp(u,3)),e.setAttribute("normal",new Wp(g,3)),e.setAttribute("uv",new Wp(d,2)),e}return Xe(n,[{key:"copy",value:function(e){return Yc(Rc(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new n(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}]),n}(Ep),Vb=function(e){kc(n,e);var t=Vc(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new $A([new Ch(0,.5),new Ch(-.5,-.5),new Ch(.5,-.5)]),r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;ka(this,n),(e=t.call(this)).type="ShapeGeometry",e.parameters={shapes:i,curveSegments:r};var a=[],o=[],s=[],l=[],c=0,u=0;if(!1===Array.isArray(i))d(i);else for(var g=0;g<i.length;g++)d(i[g]),e.addGroup(c,u,g),c+=u,u=0;function d(e){var t=o.length/3,n=e.extractPoints(r),i=n.shape,c=n.holes;!1===Bb.isClockWise(i)&&(i=i.reverse());for(var g=0,d=c.length;g<d;g++){var h=c[g];!0===Bb.isClockWise(h)&&(c[g]=h.reverse())}for(var f=Bb.triangulateShape(i,c),p=0,I=c.length;p<I;p++){var C=c[p];i=i.concat(C)}for(var m=0,v=i.length;m<v;m++){var A=i[m];o.push(A.x,A.y,0),s.push(0,0,1),l.push(A.x,A.y)}for(var b=0,y=f.length;b<y;b++){var G=f[b],w=G[0]+t,B=G[1]+t,x=G[2]+t;a.push(w,B,x),u+=3}}return e.setIndex(a),e.setAttribute("position",new Wp(o,3)),e.setAttribute("normal",new Wp(s,3)),e.setAttribute("uv",new Wp(l,2)),e}return Xe(n,[{key:"copy",value:function(e){return Yc(Rc(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}},{key:"toJSON",value:function(){var e=Yc(Rc(n.prototype),"toJSON",this).call(this);return function(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,i=e.length;n<i;n++){var r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}}],[{key:"fromJSON",value:function(e,t){for(var i=[],r=0,a=e.shapes.length;r<a;r++){var o=t[e.shapes[r]];i.push(o)}return new n(i,e.curveSegments)}}]),n}(Ep);var Fb=function(e){kc(n,e);var t=Vc(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;ka(this,n),(e=t.call(this)).type="SphereGeometry",e.parameters={radius:i,widthSegments:r,heightSegments:a,phiStart:o,phiLength:s,thetaStart:l,thetaLength:c},r=Math.max(3,Math.floor(r)),a=Math.max(2,Math.floor(a));for(var u=Math.min(l+c,Math.PI),g=0,d=[],h=new Ph,f=new Ph,p=[],I=[],C=[],m=[],v=0;v<=a;v++){var A=[],b=v/a,y=0;0===v&&0===l?y=.5/r:v===a&&u===Math.PI&&(y=-.5/r);for(var G=0;G<=r;G++){var w=G/r;h.x=-i*Math.cos(o+w*s)*Math.sin(l+b*c),h.y=i*Math.cos(l+b*c),h.z=i*Math.sin(o+w*s)*Math.sin(l+b*c),I.push(h.x,h.y,h.z),f.copy(h).normalize(),C.push(f.x,f.y,f.z),m.push(w+y,1-b),A.push(g++)}d.push(A)}for(var B=0;B<a;B++)for(var x=0;x<r;x++){var S=d[B][x+1],Z=d[B][x],k=d[B+1][x],R=d[B+1][x+1];(0!==B||l>0)&&p.push(S,Z,R),(B!==a-1||u<Math.PI)&&p.push(Z,k,R)}return e.setIndex(p),e.setAttribute("position",new Wp(I,3)),e.setAttribute("normal",new Wp(C,3)),e.setAttribute("uv",new Wp(m,2)),e}return Xe(n,[{key:"copy",value:function(e){return Yc(Rc(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new n(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}]),n}(Ep),Nb=function(e){kc(n,e);var t=Vc(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;ka(this,n);return(e=t.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],i,r)).type="TetrahedronGeometry",e.parameters={radius:i,detail:r},e}return Xe(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.detail)}}]),n}(DA),Hb=function(e){kc(n,e);var t=Vc(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:48,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI;ka(this,n),(e=t.call(this)).type="TorusGeometry",e.parameters={radius:i,tube:r,radialSegments:a,tubularSegments:o,arc:s},a=Math.floor(a),o=Math.floor(o);for(var l=[],c=[],u=[],g=[],d=new Ph,h=new Ph,f=new Ph,p=0;p<=a;p++)for(var I=0;I<=o;I++){var C=I/o*s,m=p/a*Math.PI*2;h.x=(i+r*Math.cos(m))*Math.cos(C),h.y=(i+r*Math.cos(m))*Math.sin(C),h.z=r*Math.sin(m),c.push(h.x,h.y,h.z),d.x=i*Math.cos(C),d.y=i*Math.sin(C),f.subVectors(h,d).normalize(),u.push(f.x,f.y,f.z),g.push(I/o),g.push(p/a)}for(var v=1;v<=a;v++)for(var A=1;A<=o;A++){var b=(o+1)*v+A-1,y=(o+1)*(v-1)+A-1,G=(o+1)*(v-1)+A,w=(o+1)*v+A;l.push(b,y,w),l.push(y,G,w)}return e.setIndex(l),e.setAttribute("position",new Wp(c,3)),e.setAttribute("normal",new Wp(u,3)),e.setAttribute("uv",new Wp(g,2)),e}return Xe(n,[{key:"copy",value:function(e){return Yc(Rc(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new n(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}]),n}(Ep),Tb=function(e){kc(n,e);var t=Vc(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;ka(this,n),(e=t.call(this)).type="TorusKnotGeometry",e.parameters={radius:i,tube:r,tubularSegments:a,radialSegments:o,p:s,q:l},a=Math.floor(a),o=Math.floor(o);for(var c=[],u=[],g=[],d=[],h=new Ph,f=new Ph,p=new Ph,I=new Ph,C=new Ph,m=new Ph,v=new Ph,A=0;A<=a;++A){var b=A/a*s*Math.PI*2;M(b,s,l,i,p),M(b+.01,s,l,i,I),m.subVectors(I,p),v.addVectors(I,p),C.crossVectors(m,v),v.crossVectors(C,m),C.normalize(),v.normalize();for(var y=0;y<=o;++y){var G=y/o*Math.PI*2,w=-r*Math.cos(G),B=r*Math.sin(G);h.x=p.x+(w*v.x+B*C.x),h.y=p.y+(w*v.y+B*C.y),h.z=p.z+(w*v.z+B*C.z),u.push(h.x,h.y,h.z),f.subVectors(h,p).normalize(),g.push(f.x,f.y,f.z),d.push(A/a),d.push(y/o)}}for(var x=1;x<=a;x++)for(var S=1;S<=o;S++){var Z=(o+1)*(x-1)+(S-1),k=(o+1)*x+(S-1),R=(o+1)*x+S,W=(o+1)*(x-1)+S;c.push(Z,k,W),c.push(k,R,W)}function M(e,t,n,i,r){var a=Math.cos(e),o=Math.sin(e),s=n/t*e,l=Math.cos(s);r.x=i*(2+l)*.5*a,r.y=i*(2+l)*o*.5,r.z=i*Math.sin(s)*.5}return e.setIndex(c),e.setAttribute("position",new Wp(u,3)),e.setAttribute("normal",new Wp(g,3)),e.setAttribute("uv",new Wp(d,2)),e}return Xe(n,[{key:"copy",value:function(e){return Yc(Rc(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new n(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}]),n}(Ep),Xb=function(e){kc(n,e);var t=Vc(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new HA(new Ph(-1,-1,0),new Ph(-1,1,0),new Ph(1,1,0)),r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];ka(this,n),(e=t.call(this)).type="TubeGeometry",e.parameters={path:i,tubularSegments:r,radius:a,radialSegments:o,closed:s};var l=i.computeFrenetFrames(r,s);e.tangents=l.tangents,e.normals=l.normals,e.binormals=l.binormals;var c=new Ph,u=new Ph,g=new Ch,d=new Ph,h=[],f=[],p=[],I=[];function C(e){d=i.getPointAt(e/r,d);for(var t=l.normals[e],n=l.binormals[e],s=0;s<=o;s++){var g=s/o*Math.PI*2,p=Math.sin(g),I=-Math.cos(g);u.x=I*t.x+p*n.x,u.y=I*t.y+p*n.y,u.z=I*t.z+p*n.z,u.normalize(),f.push(u.x,u.y,u.z),c.x=d.x+a*u.x,c.y=d.y+a*u.y,c.z=d.z+a*u.z,h.push(c.x,c.y,c.z)}}return function(){for(var e=0;e<r;e++)C(e);C(!1===s?r:0),function(){for(var e=0;e<=r;e++)for(var t=0;t<=o;t++)g.x=e/r,g.y=t/o,p.push(g.x,g.y)}(),function(){for(var e=1;e<=r;e++)for(var t=1;t<=o;t++){var n=(o+1)*(e-1)+(t-1),i=(o+1)*e+(t-1),a=(o+1)*e+t,s=(o+1)*(e-1)+t;I.push(n,i,s),I.push(i,a,s)}}()}(),e.setIndex(I),e.setAttribute("position",new Wp(h,3)),e.setAttribute("normal",new Wp(f,3)),e.setAttribute("uv",new Wp(p,2)),e}return Xe(n,[{key:"copy",value:function(e){return Yc(Rc(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}},{key:"toJSON",value:function(){var e=Yc(Rc(n.prototype),"toJSON",this).call(this);return e.path=this.parameters.path.toJSON(),e}}],[{key:"fromJSON",value:function(e){return new n((new XA[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}]),n}(Ep),Yb=function(e){kc(n,e);var t=Vc(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(ka(this,n),(e=t.call(this)).type="WireframeGeometry",e.parameters={geometry:i},null!==i){var r=[],a=new Set,o=new Ph,s=new Ph;if(null!==i.index){var l=i.attributes.position,c=i.index,u=i.groups;0===u.length&&(u=[{start:0,count:c.count,materialIndex:0}]);for(var g=0,d=u.length;g<d;++g)for(var h=u[g],f=h.start,p=f,I=f+h.count;p<I;p+=3)for(var C=0;C<3;C++){var m=c.getX(p+C),v=c.getX(p+(C+1)%3);o.fromBufferAttribute(l,m),s.fromBufferAttribute(l,v),!0===Eb(o,s,a)&&(r.push(o.x,o.y,o.z),r.push(s.x,s.y,s.z))}}else for(var A=i.attributes.position,b=0,y=A.count/3;b<y;b++)for(var G=0;G<3;G++){var w=3*b+G,B=3*b+(G+1)%3;o.fromBufferAttribute(A,w),s.fromBufferAttribute(A,B),!0===Eb(o,s,a)&&(r.push(o.x,o.y,o.z),r.push(s.x,s.y,s.z))}e.setAttribute("position",new Wp(r,3))}return e}return Xe(n,[{key:"copy",value:function(e){return Yc(Rc(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}}]),n}(Ep);function Eb(e,t,n){var i="".concat(e.x,",").concat(e.y,",").concat(e.z,"-").concat(t.x,",").concat(t.y,",").concat(t.z),r="".concat(t.x,",").concat(t.y,",").concat(t.z,"-").concat(e.x,",").concat(e.y,",").concat(e.z);return!0!==n.has(i)&&!0!==n.has(r)&&(n.add(i),n.add(r),!0)}var zb=Object.freeze({__proto__:null,BoxGeometry:oI,CapsuleGeometry:LA,CircleGeometry:KA,ConeGeometry:PA,CylinderGeometry:_A,DodecahedronGeometry:OA,EdgesGeometry:qA,ExtrudeGeometry:Zb,IcosahedronGeometry:Rb,LatheGeometry:zA,OctahedronGeometry:Wb,PlaneGeometry:SI,PolyhedronGeometry:DA,RingGeometry:Mb,ShapeGeometry:Vb,SphereGeometry:Fb,TetrahedronGeometry:Nb,TorusGeometry:Hb,TorusKnotGeometry:Tb,TubeGeometry:Xb,WireframeGeometry:Yb}),Lb=function(e){kc(n,e);var t=Vc(n);function n(e){var i;return ka(this,n),(i=t.call(this)).isShadowMaterial=!0,i.type="ShadowMaterial",i.color=new dp(0),i.transparent=!0,i.fog=!0,i.setValues(e),i}return Xe(n,[{key:"copy",value:function(e){return Yc(Rc(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.fog=e.fog,this}}]),n}(sp),Kb=function(e){kc(n,e);var t=Vc(n);function n(e){var i;return ka(this,n),(i=t.call(this,e)).isRawShaderMaterial=!0,i.type="RawShaderMaterial",i}return Xe(n)}(gI),_b=function(e){kc(n,e);var t=Vc(n);function n(e){var i;return ka(this,n),(i=t.call(this)).isMeshStandardMaterial=!0,i.defines={STANDARD:""},i.type="MeshStandardMaterial",i.color=new dp(16777215),i.roughness=1,i.metalness=0,i.map=null,i.lightMap=null,i.lightMapIntensity=1,i.aoMap=null,i.aoMapIntensity=1,i.emissive=new dp(0),i.emissiveIntensity=1,i.emissiveMap=null,i.bumpMap=null,i.bumpScale=1,i.normalMap=null,i.normalMapType=yd,i.normalScale=new Ch(1,1),i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.roughnessMap=null,i.metalnessMap=null,i.alphaMap=null,i.envMap=null,i.envMapIntensity=1,i.wireframe=!1,i.wireframeLinewidth=1,i.wireframeLinecap="round",i.wireframeLinejoin="round",i.flatShading=!1,i.fog=!0,i.setValues(e),i}return Xe(n,[{key:"copy",value:function(e){return Yc(Rc(n.prototype),"copy",this).call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}]),n}(sp),Pb=function(e){kc(n,e);var t=Vc(n);function n(e){var i;return ka(this,n),(i=t.call(this)).isMeshPhysicalMaterial=!0,i.defines={STANDARD:"",PHYSICAL:""},i.type="MeshPhysicalMaterial",i.clearcoatMap=null,i.clearcoatRoughness=0,i.clearcoatRoughnessMap=null,i.clearcoatNormalScale=new Ch(1,1),i.clearcoatNormalMap=null,i.ior=1.5,Object.defineProperty(Ye(i),"reflectivity",{get:function(){return lh(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),i.iridescenceMap=null,i.iridescenceIOR=1.3,i.iridescenceThicknessRange=[100,400],i.iridescenceThicknessMap=null,i.sheenColor=new dp(0),i.sheenColorMap=null,i.sheenRoughness=1,i.sheenRoughnessMap=null,i.transmissionMap=null,i.thickness=0,i.thicknessMap=null,i.attenuationDistance=1/0,i.attenuationColor=new dp(1,1,1),i.specularIntensity=1,i.specularIntensityMap=null,i.specularColor=new dp(1,1,1),i.specularColorMap=null,i._sheen=0,i._clearcoat=0,i._iridescence=0,i._transmission=0,i.setValues(e),i}return Xe(n,[{key:"sheen",get:function(){return this._sheen},set:function(e){this._sheen>0!==e>0&&this.version++,this._sheen=e}},{key:"clearcoat",get:function(){return this._clearcoat},set:function(e){this._clearcoat>0!==e>0&&this.version++,this._clearcoat=e}},{key:"iridescence",get:function(){return this._iridescence},set:function(e){this._iridescence>0!==e>0&&this.version++,this._iridescence=e}},{key:"transmission",get:function(){return this._transmission},set:function(e){this._transmission>0!==e>0&&this.version++,this._transmission=e}},{key:"copy",value:function(e){return Yc(Rc(n.prototype),"copy",this).call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=We(e.iridescenceThicknessRange),this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}]),n}(_b),Db=function(e){kc(n,e);var t=Vc(n);function n(e){var i;return ka(this,n),(i=t.call(this)).isMeshPhongMaterial=!0,i.type="MeshPhongMaterial",i.color=new dp(16777215),i.specular=new dp(1118481),i.shininess=30,i.map=null,i.lightMap=null,i.lightMapIntensity=1,i.aoMap=null,i.aoMapIntensity=1,i.emissive=new dp(0),i.emissiveIntensity=1,i.emissiveMap=null,i.bumpMap=null,i.bumpScale=1,i.normalMap=null,i.normalMapType=yd,i.normalScale=new Ch(1,1),i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.specularMap=null,i.alphaMap=null,i.envMap=null,i.combine=Mu,i.reflectivity=1,i.refractionRatio=.98,i.wireframe=!1,i.wireframeLinewidth=1,i.wireframeLinecap="round",i.wireframeLinejoin="round",i.flatShading=!1,i.fog=!0,i.setValues(e),i}return Xe(n,[{key:"copy",value:function(e){return Yc(Rc(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}]),n}(sp),Ob=function(e){kc(n,e);var t=Vc(n);function n(e){var i;return ka(this,n),(i=t.call(this)).isMeshToonMaterial=!0,i.defines={TOON:""},i.type="MeshToonMaterial",i.color=new dp(16777215),i.map=null,i.gradientMap=null,i.lightMap=null,i.lightMapIntensity=1,i.aoMap=null,i.aoMapIntensity=1,i.emissive=new dp(0),i.emissiveIntensity=1,i.emissiveMap=null,i.bumpMap=null,i.bumpScale=1,i.normalMap=null,i.normalMapType=yd,i.normalScale=new Ch(1,1),i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.alphaMap=null,i.wireframe=!1,i.wireframeLinewidth=1,i.wireframeLinecap="round",i.wireframeLinejoin="round",i.fog=!0,i.setValues(e),i}return Xe(n,[{key:"copy",value:function(e){return Yc(Rc(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}]),n}(sp),Ub=function(e){kc(n,e);var t=Vc(n);function n(e){var i;return ka(this,n),(i=t.call(this)).isMeshNormalMaterial=!0,i.type="MeshNormalMaterial",i.bumpMap=null,i.bumpScale=1,i.normalMap=null,i.normalMapType=yd,i.normalScale=new Ch(1,1),i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.wireframe=!1,i.wireframeLinewidth=1,i.flatShading=!1,i.setValues(e),i}return Xe(n,[{key:"copy",value:function(e){return Yc(Rc(n.prototype),"copy",this).call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}]),n}(sp),jb=function(e){kc(n,e);var t=Vc(n);function n(e){var i;return ka(this,n),(i=t.call(this)).isMeshLambertMaterial=!0,i.type="MeshLambertMaterial",i.color=new dp(16777215),i.map=null,i.lightMap=null,i.lightMapIntensity=1,i.aoMap=null,i.aoMapIntensity=1,i.emissive=new dp(0),i.emissiveIntensity=1,i.emissiveMap=null,i.bumpMap=null,i.bumpScale=1,i.normalMap=null,i.normalMapType=yd,i.normalScale=new Ch(1,1),i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.specularMap=null,i.alphaMap=null,i.envMap=null,i.combine=Mu,i.reflectivity=1,i.refractionRatio=.98,i.wireframe=!1,i.wireframeLinewidth=1,i.wireframeLinecap="round",i.wireframeLinejoin="round",i.flatShading=!1,i.fog=!0,i.setValues(e),i}return Xe(n,[{key:"copy",value:function(e){return Yc(Rc(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}]),n}(sp),Jb=function(e){kc(n,e);var t=Vc(n);function n(e){var i;return ka(this,n),(i=t.call(this)).isMeshMatcapMaterial=!0,i.defines={MATCAP:""},i.type="MeshMatcapMaterial",i.color=new dp(16777215),i.matcap=null,i.map=null,i.bumpMap=null,i.bumpScale=1,i.normalMap=null,i.normalMapType=yd,i.normalScale=new Ch(1,1),i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.alphaMap=null,i.flatShading=!1,i.fog=!0,i.setValues(e),i}return Xe(n,[{key:"copy",value:function(e){return Yc(Rc(n.prototype),"copy",this).call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}]),n}(sp),Qb=function(e){kc(n,e);var t=Vc(n);function n(e){var i;return ka(this,n),(i=t.call(this)).isLineDashedMaterial=!0,i.type="LineDashedMaterial",i.scale=1,i.dashSize=3,i.gapSize=1,i.setValues(e),i}return Xe(n,[{key:"copy",value:function(e){return Yc(Rc(n.prototype),"copy",this).call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}]),n}(Jv);function qb(e,t,n){return ey(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)}function $b(e,t,n){return!e||!n&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}function ey(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function ty(e){for(var t=e.length,n=new Array(t),i=0;i!==t;++i)n[i]=i;return n.sort((function(t,n){return e[t]-e[n]})),n}function ny(e,t,n){for(var i=e.length,r=new e.constructor(i),a=0,o=0;o!==i;++a)for(var s=n[a]*t,l=0;l!==t;++l)r[o++]=e[s+l];return r}function iy(e,t,n,i){for(var r=1,a=e[0];void 0!==a&&void 0===a[i];)a=e[r++];if(void 0!==a){var o=a[i];if(void 0!==o)if(Array.isArray(o))do{void 0!==(o=a[i])&&(t.push(a.time),n.push.apply(n,o)),a=e[r++]}while(void 0!==a);else if(void 0!==o.toArray)do{void 0!==(o=a[i])&&(t.push(a.time),o.toArray(n,n.length)),a=e[r++]}while(void 0!==a);else do{void 0!==(o=a[i])&&(t.push(a.time),n.push(o)),a=e[r++]}while(void 0!==a)}}var ry={arraySlice:qb,convertArray:$b,isTypedArray:ey,getKeyframeOrder:ty,sortedArray:ny,flattenJSON:iy,subclip:function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30,a=e.clone();a.name=t;for(var o=[],s=0;s<a.tracks.length;++s){for(var l=a.tracks[s],c=l.getValueSize(),u=[],g=[],d=0;d<l.times.length;++d){var h=l.times[d]*r;if(!(h<n||h>=i)){u.push(l.times[d]);for(var f=0;f<c;++f)g.push(l.values[d*c+f])}}0!==u.length&&(l.times=$b(u,l.times.constructor),l.values=$b(g,l.values.constructor),o.push(l))}a.tracks=o;for(var p=1/0,I=0;I<a.tracks.length;++I)p>a.tracks[I].times[0]&&(p=a.tracks[I].times[0]);for(var C=0;C<a.tracks.length;++C)a.tracks[C].shift(-1*p);return a.resetDuration(),a},makeClipAdditive:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;i<=0&&(i=30);for(var r=n.tracks.length,a=t/i,o=function(){var t=n.tracks[s],i=t.ValueTypeName;if("bool"===i||"string"===i)return"continue";var r=e.tracks.find((function(e){return e.name===t.name&&e.ValueTypeName===i}));if(void 0===r)return"continue";var o=0,l=t.getValueSize();t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(o=l/3);var c=0,u=r.getValueSize();r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=u/3);var g,d=t.times.length-1;if(a<=t.times[0]){var h=o,f=l-o;g=qb(t.values,h,f)}else if(a>=t.times[d]){var p=d*l+o,I=p+l-o;g=qb(t.values,p,I)}else{var C=t.createInterpolant(),m=o,v=l-o;C.evaluate(a),g=qb(C.resultBuffer,m,v)}"quaternion"===i&&(new _h).fromArray(g).normalize().conjugate().toArray(g);for(var A=r.times.length,b=0;b<A;++b){var y=b*u+c;if("quaternion"===i)_h.multiplyQuaternionsFlat(r.values,y,g,0,r.values,y);else for(var G=u-2*c,w=0;w<G;++w)r.values[y+w]-=g[w]}},s=0;s<r;++s)o();return e.blendMode=fd,e}},ay=function(){function e(t,n,i,r){ka(this,e),this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new n.constructor(i),this.sampleValues=n,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}return Xe(e,[{key:"evaluate",value:function(e){var t=this.parameterPositions,n=this._cachedIndex,i=t[n],r=t[n-1];e:{t:{var a;n:{i:if(!(e<i)){for(var o=n+2;;){if(void 0===i){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(r=i,e<(i=t[++n]))break t}a=t.length;break n}if(e>=r)break e;var s=t[1];e<s&&(n=2,r=s);for(var l=n-2;;){if(void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(n===l)break;if(i=r,e>=(r=t[--n-1]))break t}a=n,n=0}for(;n<a;){var c=n+a>>>1;e<t[c]?a=c:n=c+1}if(i=t[n],void 0===(r=t[n-1]))return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===i)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,e,i)}},{key:"getSettings_",value:function(){return this.settings||this.DefaultSettings_}},{key:"copySampleValue_",value:function(e){for(var t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i,a=0;a!==i;++a)t[a]=n[r+a];return t}},{key:"interpolate_",value:function(){throw new Error("call to abstract method")}},{key:"intervalChanged_",value:function(){}}]),e}(),oy=function(e){kc(n,e);var t=Vc(n);function n(e,i,r,a){var o;return ka(this,n),(o=t.call(this,e,i,r,a))._weightPrev=-0,o._offsetPrev=-0,o._weightNext=-0,o._offsetNext=-0,o.DefaultSettings_={endingStart:ud,endingEnd:ud},o}return Xe(n,[{key:"intervalChanged_",value:function(e,t,n){var i=this.parameterPositions,r=e-2,a=e+1,o=i[r],s=i[a];if(void 0===o)switch(this.getSettings_().endingStart){case gd:r=e,o=2*t-n;break;case dd:o=t+i[r=i.length-2]-i[r+1];break;default:r=e,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case gd:a=e,s=2*n-t;break;case dd:a=1,s=n+i[1]-i[0];break;default:a=e-1,s=t}var l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-o),this._weightNext=l/(s-n),this._offsetPrev=r*c,this._offsetNext=a*c}},{key:"interpolate_",value:function(e,t,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,c=this._offsetPrev,u=this._offsetNext,g=this._weightPrev,d=this._weightNext,h=(n-t)/(i-t),f=h*h,p=f*h,I=-g*p+2*g*f-g*h,C=(1+g)*p+(-1.5-2*g)*f+(-.5+g)*h+1,m=(-1-d)*p+(1.5+d)*f+.5*h,v=d*p-d*f,A=0;A!==o;++A)r[A]=I*a[c+A]+C*a[l+A]+m*a[s+A]+v*a[u+A];return r}}]),n}(ay),sy=function(e){kc(n,e);var t=Vc(n);function n(e,i,r,a){return ka(this,n),t.call(this,e,i,r,a)}return Xe(n,[{key:"interpolate_",value:function(e,t,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,c=(n-t)/(i-t),u=1-c,g=0;g!==o;++g)r[g]=a[l+g]*u+a[s+g]*c;return r}}]),n}(ay),ly=function(e){kc(n,e);var t=Vc(n);function n(e,i,r,a){return ka(this,n),t.call(this,e,i,r,a)}return Xe(n,[{key:"interpolate_",value:function(e){return this.copySampleValue_(e-1)}}]),n}(ay),cy=function(){function e(t,n,i,r){if(ka(this,e),void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===n||0===n.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=$b(n,this.TimeBufferType),this.values=$b(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}return Xe(e,[{key:"InterpolantFactoryMethodDiscrete",value:function(e){return new ly(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodLinear",value:function(e){return new sy(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodSmooth",value:function(e){return new oy(this.times,this.values,this.getValueSize(),e)}},{key:"setInterpolation",value:function(e){var t;switch(e){case sd:t=this.InterpolantFactoryMethodDiscrete;break;case ld:t=this.InterpolantFactoryMethodLinear;break;case cd:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}},{key:"getInterpolation",value:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return sd;case this.InterpolantFactoryMethodLinear:return ld;case this.InterpolantFactoryMethodSmooth:return cd}}},{key:"getValueSize",value:function(){return this.values.length/this.times.length}},{key:"shift",value:function(e){if(0!==e)for(var t=this.times,n=0,i=t.length;n!==i;++n)t[n]+=e;return this}},{key:"scale",value:function(e){if(1!==e)for(var t=this.times,n=0,i=t.length;n!==i;++n)t[n]*=e;return this}},{key:"trim",value:function(e,t){for(var n=this.times,i=n.length,r=0,a=i-1;r!==i&&n[r]<e;)++r;for(;-1!==a&&n[a]>t;)--a;if(++a,0!==r||a!==i){r>=a&&(r=(a=Math.max(a,1))-1);var o=this.getValueSize();this.times=qb(n,r,a),this.values=qb(this.values,r*o,a*o)}return this}},{key:"validate",value:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var a=null,o=0;o!==r;o++){var s=n[o];if("number"===typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,s),e=!1;break}if(null!==a&&a>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,s,a),e=!1;break}a=s}if(void 0!==i&&ey(i))for(var l=0,c=i.length;l!==c;++l){var u=i[l];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,u),e=!1;break}}return e}},{key:"optimize",value:function(){for(var e=qb(this.times),t=qb(this.values),n=this.getValueSize(),i=this.getInterpolation()===cd,r=e.length-1,a=1,o=1;o<r;++o){var s=!1,l=e[o];if(l!==e[o+1]&&(1!==o||l!==e[0]))if(i)s=!0;else for(var c=o*n,u=c-n,g=c+n,d=0;d!==n;++d){var h=t[c+d];if(h!==t[u+d]||h!==t[g+d]){s=!0;break}}if(s){if(o!==a){e[a]=e[o];for(var f=o*n,p=a*n,I=0;I!==n;++I)t[p+I]=t[f+I]}++a}}if(r>0){e[a]=e[r];for(var C=r*n,m=a*n,v=0;v!==n;++v)t[m+v]=t[C+v];++a}return a!==e.length?(this.times=qb(e,0,a),this.values=qb(t,0,a*n)):(this.times=e,this.values=t),this}},{key:"clone",value:function(){var e=qb(this.times,0),t=qb(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}],[{key:"toJSON",value:function(e){var t,n=e.constructor;if(n.toJSON!==this.toJSON)t=n.toJSON(e);else{t={name:e.name,times:$b(e.times,Array),values:$b(e.values,Array)};var i=e.getInterpolation();i!==e.DefaultInterpolation&&(t.interpolation=i)}return t.type=e.ValueTypeName,t}}]),e}();cy.prototype.TimeBufferType=Float32Array,cy.prototype.ValueBufferType=Float32Array,cy.prototype.DefaultInterpolation=ld;var uy=function(e){kc(n,e);var t=Vc(n);function n(){return ka(this,n),t.apply(this,arguments)}return Xe(n)}(cy);uy.prototype.ValueTypeName="bool",uy.prototype.ValueBufferType=Array,uy.prototype.DefaultInterpolation=sd,uy.prototype.InterpolantFactoryMethodLinear=void 0,uy.prototype.InterpolantFactoryMethodSmooth=void 0;var gy=function(e){kc(n,e);var t=Vc(n);function n(){return ka(this,n),t.apply(this,arguments)}return Xe(n)}(cy);gy.prototype.ValueTypeName="color";var dy=function(e){kc(n,e);var t=Vc(n);function n(){return ka(this,n),t.apply(this,arguments)}return Xe(n)}(cy);dy.prototype.ValueTypeName="number";var hy=function(e){kc(n,e);var t=Vc(n);function n(e,i,r,a){return ka(this,n),t.call(this,e,i,r,a)}return Xe(n,[{key:"interpolate_",value:function(e,t,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=(n-t)/(i-t),l=e*o,c=l+o;l!==c;l+=4)_h.slerpFlat(r,0,a,l-o,a,l,s);return r}}]),n}(ay),fy=function(e){kc(n,e);var t=Vc(n);function n(){return ka(this,n),t.apply(this,arguments)}return Xe(n,[{key:"InterpolantFactoryMethodLinear",value:function(e){return new hy(this.times,this.values,this.getValueSize(),e)}}]),n}(cy);fy.prototype.ValueTypeName="quaternion",fy.prototype.DefaultInterpolation=ld,fy.prototype.InterpolantFactoryMethodSmooth=void 0;var py=function(e){kc(n,e);var t=Vc(n);function n(){return ka(this,n),t.apply(this,arguments)}return Xe(n)}(cy);py.prototype.ValueTypeName="string",py.prototype.ValueBufferType=Array,py.prototype.DefaultInterpolation=sd,py.prototype.InterpolantFactoryMethodLinear=void 0,py.prototype.InterpolantFactoryMethodSmooth=void 0;var Iy=function(e){kc(n,e);var t=Vc(n);function n(){return ka(this,n),t.apply(this,arguments)}return Xe(n)}(cy);Iy.prototype.ValueTypeName="vector";var Cy=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,i=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:hd;ka(this,e),this.name=t,this.tracks=i,this.duration=n,this.blendMode=r,this.uuid=sh(),this.duration<0&&this.resetDuration()}return Xe(e,[{key:"resetDuration",value:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t){var i=this.tracks[t];e=Math.max(e,i.times[i.times.length-1])}return this.duration=e,this}},{key:"trim",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}},{key:"validate",value:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}},{key:"optimize",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}},{key:"clone",value:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}},{key:"toJSON",value:function(){return this.constructor.toJSON(this)}}],[{key:"parse",value:function(e){for(var t=[],n=e.tracks,i=1/(e.fps||1),r=0,a=n.length;r!==a;++r)t.push(my(n[r]).scale(i));var o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}},{key:"toJSON",value:function(e){for(var t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode},r=0,a=n.length;r!==a;++r)t.push(cy.toJSON(n[r]));return i}},{key:"CreateFromMorphTargetSequence",value:function(e,t,n,i){for(var r=t.length,a=[],o=0;o<r;o++){var s=[],l=[];s.push((o+r-1)%r,o,(o+1)%r),l.push(0,1,0);var c=ty(s);s=ny(s,1,c),l=ny(l,1,c),i||0!==s[0]||(s.push(r),l.push(l[0])),a.push(new dy(".morphTargetInfluences["+t[o].name+"]",s,l).scale(1/n))}return new this(e,-1,a)}},{key:"findByName",value:function(e,t){var n=e;if(!Array.isArray(e)){var i=e;n=i.geometry&&i.geometry.animations||i.animations}for(var r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null}},{key:"CreateClipsFromMorphTargetSequences",value:function(e,t,n){for(var i={},r=/^([\w-]*?)([\d]+)$/,a=0,o=e.length;a<o;a++){var s=e[a],l=s.name.match(r);if(l&&l.length>1){var c=l[1],u=i[c];u||(i[c]=u=[]),u.push(s)}}var g=[];for(var d in i)g.push(this.CreateFromMorphTargetSequence(d,i[d],t,n));return g}},{key:"parseAnimation",value:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,i,r){if(0!==n.length){var a=[],o=[];iy(n,a,o,i),0!==a.length&&r.push(new e(t,a,o))}},i=[],r=e.name||"default",a=e.fps||30,o=e.blendMode,s=e.length||-1,l=e.hierarchy||[],c=0;c<l.length;c++){var u=l[c].keys;if(u&&0!==u.length)if(u[0].morphTargets){var g={},d=void 0;for(d=0;d<u.length;d++)if(u[d].morphTargets)for(var h=0;h<u[d].morphTargets.length;h++)g[u[d].morphTargets[h]]=-1;for(var f in g){for(var p=[],I=[],C=0;C!==u[d].morphTargets.length;++C){var m=u[d];p.push(m.time),I.push(m.morphTarget===f?1:0)}i.push(new dy(".morphTargetInfluence["+f+"]",p,I))}s=g.length*a}else{var v=".bones["+t[c].name+"]";n(Iy,v+".position",u,"pos",i),n(fy,v+".quaternion",u,"rot",i),n(Iy,v+".scale",u,"scl",i)}}return 0===i.length?null:new this(r,s,i,o)}}]),e}();function my(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return dy;case"vector":case"vector2":case"vector3":case"vector4":return Iy;case"color":return gy;case"quaternion":return fy;case"bool":case"boolean":return uy;case"string":return py}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){var n=[],i=[];iy(e.keys,n,i,"value"),e.times=n,e.values=i}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}var vy,Ay={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},by=Xe((function e(t,n,i){ka(this,e);var r=this,a=!1,o=0,s=0,l=void 0,c=[];this.onStart=void 0,this.onLoad=t,this.onProgress=n,this.onError=i,this.itemStart=function(e){s++,!1===a&&void 0!==r.onStart&&r.onStart(e,o,s),a=!0},this.itemEnd=function(e){o++,void 0!==r.onProgress&&r.onProgress(e,o,s),o===s&&(a=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return l?l(e):e},this.setURLModifier=function(e){return l=e,this},this.addHandler=function(e,t){return c.push(e,t),this},this.removeHandler=function(e){var t=c.indexOf(e);return-1!==t&&c.splice(t,2),this},this.getHandler=function(e){for(var t=0,n=c.length;t<n;t+=2){var i=c[t],r=c[t+1];if(i.global&&(i.lastIndex=0),i.test(e))return r}return null}})),yy=new by,Gy=function(){function e(t){ka(this,e),this.manager=void 0!==t?t:yy,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}return Xe(e,[{key:"load",value:function(){}},{key:"loadAsync",value:function(e,t){var n=this;return new Promise((function(i,r){n.load(e,i,t,r)}))}},{key:"parse",value:function(){}},{key:"setCrossOrigin",value:function(e){return this.crossOrigin=e,this}},{key:"setWithCredentials",value:function(e){return this.withCredentials=e,this}},{key:"setPath",value:function(e){return this.path=e,this}},{key:"setResourcePath",value:function(e){return this.resourcePath=e,this}},{key:"setRequestHeader",value:function(e){return this.requestHeader=e,this}}]),e}(),wy={},By=function(e){kc(n,e);var t=Vc(n);function n(e,i){var r;return ka(this,n),(r=t.call(this,e)).response=i,r}return Xe(n)}(Hc(Error)),xy=function(e){kc(n,e);var t=Vc(n);function n(e){return ka(this,n),t.call(this,e)}return Xe(n,[{key:"load",value:function(e,t,n,i){var r=this;void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var a=Ay.get(e);if(void 0!==a)return this.manager.itemStart(e),setTimeout((function(){t&&t(a),r.manager.itemEnd(e)}),0),a;if(void 0===wy[e]){wy[e]=[],wy[e].push({onLoad:t,onProgress:n,onError:i});var o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),s=this.mimeType,l=this.responseType;fetch(o).then((function(t){if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"===typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;var n=wy[e],i=t.body.getReader(),r=t.headers.get("Content-Length")||t.headers.get("X-File-Size"),a=r?parseInt(r):0,o=0!==a,s=0,l=new ReadableStream({start:function(e){!function t(){i.read().then((function(i){var r=i.done,l=i.value;if(r)e.close();else{s+=l.byteLength;for(var c=new ProgressEvent("progress",{lengthComputable:o,loaded:s,total:a}),u=0,g=n.length;u<g;u++){var d=n[u];d.onProgress&&d.onProgress(c)}e.enqueue(l),t()}}))}()}});return new Response(l)}throw new By('fetch for "'.concat(t.url,'" responded with ').concat(t.status,": ").concat(t.statusText),t)})).then((function(e){switch(l){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then((function(e){return(new DOMParser).parseFromString(e,s)}));case"json":return e.json();default:if(void 0===s)return e.text();var t=/charset="?([^;"\s]*)"?/i.exec(s),n=t&&t[1]?t[1].toLowerCase():void 0,i=new TextDecoder(n);return e.arrayBuffer().then((function(e){return i.decode(e)}))}})).then((function(t){Ay.add(e,t);var n=wy[e];delete wy[e];for(var i=0,r=n.length;i<r;i++){var a=n[i];a.onLoad&&a.onLoad(t)}})).catch((function(t){var n=wy[e];if(void 0===n)throw r.manager.itemError(e),t;delete wy[e];for(var i=0,a=n.length;i<a;i++){var o=n[i];o.onError&&o.onError(t)}r.manager.itemError(e)})).finally((function(){r.manager.itemEnd(e)})),this.manager.itemStart(e)}else wy[e].push({onLoad:t,onProgress:n,onError:i})}},{key:"setResponseType",value:function(e){return this.responseType=e,this}},{key:"setMimeType",value:function(e){return this.mimeType=e,this}}]),n}(Gy),Sy=function(e){kc(n,e);var t=Vc(n);function n(e){return ka(this,n),t.call(this,e)}return Xe(n,[{key:"load",value:function(e,t,n,i){var r=this,a=new xy(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){try{t(r.parse(JSON.parse(n)))}catch(a){i?i(a):console.error(a),r.manager.itemError(e)}}),n,i)}},{key:"parse",value:function(e){for(var t=[],n=0;n<e.length;n++){var i=Cy.parse(e[n]);t.push(i)}return t}}]),n}(Gy),Zy=function(e){kc(n,e);var t=Vc(n);function n(e){return ka(this,n),t.call(this,e)}return Xe(n,[{key:"load",value:function(e,t,n,i){var r=this,a=[],o=new IA,s=new xy(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(r.withCredentials);var l=0;function c(c){s.load(e[c],(function(e){var n=r.parse(e,!0);a[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(l+=1)&&(1===n.mipmapCount&&(o.minFilter=tg),o.image=a,o.format=n.format,o.needsUpdate=!0,t&&t(o))}),n,i)}if(Array.isArray(e))for(var u=0,g=e.length;u<g;++u)c(u);else s.load(e,(function(e){var n=r.parse(e,!0);if(n.isCubemap){for(var i=n.mipmaps.length/n.mipmapCount,s=0;s<i;s++){a[s]={mipmaps:[]};for(var l=0;l<n.mipmapCount;l++)a[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+l]),a[s].format=n.format,a[s].width=n.width,a[s].height=n.height}o.image=a}else o.image.width=n.width,o.image.height=n.height,o.mipmaps=n.mipmaps;1===n.mipmapCount&&(o.minFilter=tg),o.format=n.format,o.needsUpdate=!0,t&&t(o)}),n,i);return o}}]),n}(Gy),ky=function(e){kc(n,e);var t=Vc(n);function n(e){return ka(this,n),t.call(this,e)}return Xe(n,[{key:"load",value:function(e,t,n,i){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var r=this,a=Ay.get(e);if(void 0!==a)return r.manager.itemStart(e),setTimeout((function(){t&&t(a),r.manager.itemEnd(e)}),0),a;var o=Gh("img");function s(){c(),Ay.add(e,this),t&&t(this),r.manager.itemEnd(e)}function l(t){c(),i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)}function c(){o.removeEventListener("load",s,!1),o.removeEventListener("error",l,!1)}return o.addEventListener("load",s,!1),o.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),r.manager.itemStart(e),o.src=e,o}}]),n}(Gy),Ry=function(e){kc(n,e);var t=Vc(n);function n(e){return ka(this,n),t.call(this,e)}return Xe(n,[{key:"load",value:function(e,t,n,i){var r=new II,a=new ky(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);var o=0;function s(n){a.load(e[n],(function(e){r.images[n]=e,6===++o&&(r.needsUpdate=!0,t&&t(r))}),void 0,i)}for(var l=0;l<e.length;++l)s(l);return r}}]),n}(Gy),Wy=function(e){kc(n,e);var t=Vc(n);function n(e){return ka(this,n),t.call(this,e)}return Xe(n,[{key:"load",value:function(e,t,n,i){var r=this,a=new Tv,o=new xy(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(r.withCredentials),o.load(e,(function(e){var n=r.parse(e);n&&(void 0!==n.image?a.image=n.image:void 0!==n.data&&(a.image.width=n.width,a.image.height=n.height,a.image.data=n.data),a.wrapS=void 0!==n.wrapS?n.wrapS:Uu,a.wrapT=void 0!==n.wrapT?n.wrapT:Uu,a.magFilter=void 0!==n.magFilter?n.magFilter:tg,a.minFilter=void 0!==n.minFilter?n.minFilter:tg,a.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.encoding&&(a.encoding=n.encoding),void 0!==n.flipY&&(a.flipY=n.flipY),void 0!==n.format&&(a.format=n.format),void 0!==n.type&&(a.type=n.type),void 0!==n.mipmaps&&(a.mipmaps=n.mipmaps,a.minFilter=rg),1===n.mipmapCount&&(a.minFilter=tg),void 0!==n.generateMipmaps&&(a.generateMipmaps=n.generateMipmaps),a.needsUpdate=!0,t&&t(a,n))}),n,i),a}}]),n}(Gy),My=function(e){kc(n,e);var t=Vc(n);function n(e){return ka(this,n),t.call(this,e)}return Xe(n,[{key:"load",value:function(e,t,n,i){var r=new Hh,a=new ky(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,(function(e){r.image=e,r.needsUpdate=!0,void 0!==t&&t(r)}),n,i),r}}]),n}(Gy),Vy=function(e){kc(n,e);var t=Vc(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return ka(this,n),(i=t.call(this)).isLight=!0,i.type="Light",i.color=new dp(e),i.intensity=r,i}return Xe(n,[{key:"dispose",value:function(){}},{key:"copy",value:function(e,t){return Yc(Rc(n.prototype),"copy",this).call(this,e,t),this.color.copy(e.color),this.intensity=e.intensity,this}},{key:"toJSON",value:function(e){var t=Yc(Rc(n.prototype),"toJSON",this).call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}]),n}(Of),Fy=function(e){kc(n,e);var t=Vc(n);function n(e,i,r){var a;return ka(this,n),(a=t.call(this,e,r)).isHemisphereLight=!0,a.type="HemisphereLight",a.position.copy(Of.DEFAULT_UP),a.updateMatrix(),a.groundColor=new dp(i),a}return Xe(n,[{key:"copy",value:function(e,t){return Yc(Rc(n.prototype),"copy",this).call(this,e,t),this.groundColor.copy(e.groundColor),this}}]),n}(Vy),Ny=new yf,Hy=new Ph,Ty=new Ph,Xy=function(){function e(t){ka(this,e),this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ch(512,512),this.map=null,this.mapPass=null,this.matrix=new yf,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new wI,this._frameExtents=new Ch(1,1),this._viewportCount=1,this._viewports=[new Th(0,0,1,1)]}return Xe(e,[{key:"getViewportCount",value:function(){return this._viewportCount}},{key:"getFrustum",value:function(){return this._frustum}},{key:"updateMatrices",value:function(e){var t=this.camera,n=this.matrix;Hy.setFromMatrixPosition(e.matrixWorld),t.position.copy(Hy),Ty.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Ty),t.updateMatrixWorld(),Ny.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Ny),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(Ny)}},{key:"getViewport",value:function(e){return this._viewports[e]}},{key:"getFrameExtents",value:function(){return this._frameExtents}},{key:"dispose",value:function(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}},{key:"copy",value:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}]),e}(),Yy=function(e){kc(n,e);var t=Vc(n);function n(){var e;return ka(this,n),(e=t.call(this,new hI(50,1,.5,500))).isSpotLightShadow=!0,e.focus=1,e}return Xe(n,[{key:"updateMatrices",value:function(e){var t=this.camera,i=2*oh*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,a=e.distance||t.far;i===t.fov&&r===t.aspect&&a===t.far||(t.fov=i,t.aspect=r,t.far=a,t.updateProjectionMatrix()),Yc(Rc(n.prototype),"updateMatrices",this).call(this,e)}},{key:"copy",value:function(e){return Yc(Rc(n.prototype),"copy",this).call(this,e),this.focus=e.focus,this}}]),n}(Xy),Ey=function(e){kc(n,e);var t=Vc(n);function n(e,i){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2;return ka(this,n),(r=t.call(this,e,i)).isSpotLight=!0,r.type="SpotLight",r.position.copy(Of.DEFAULT_UP),r.updateMatrix(),r.target=new Of,r.distance=a,r.angle=o,r.penumbra=s,r.decay=l,r.map=null,r.shadow=new Yy,r}return Xe(n,[{key:"power",get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e,t){return Yc(Rc(n.prototype),"copy",this).call(this,e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]),n}(Vy),zy=new yf,Ly=new Ph,Ky=new Ph,_y=function(e){kc(n,e);var t=Vc(n);function n(){var e;return ka(this,n),(e=t.call(this,new hI(90,1,.5,500))).isPointLightShadow=!0,e._frameExtents=new Ch(4,2),e._viewportCount=6,e._viewports=[new Th(2,1,1,1),new Th(0,1,1,1),new Th(3,1,1,1),new Th(1,1,1,1),new Th(3,0,1,1),new Th(1,0,1,1)],e._cubeDirections=[new Ph(1,0,0),new Ph(-1,0,0),new Ph(0,0,1),new Ph(0,0,-1),new Ph(0,1,0),new Ph(0,-1,0)],e._cubeUps=[new Ph(0,1,0),new Ph(0,1,0),new Ph(0,1,0),new Ph(0,1,0),new Ph(0,0,1),new Ph(0,0,-1)],e}return Xe(n,[{key:"updateMatrices",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.camera,i=this.matrix,r=e.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),Ly.setFromMatrixPosition(e.matrixWorld),n.position.copy(Ly),Ky.copy(n.position),Ky.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(Ky),n.updateMatrixWorld(),i.makeTranslation(-Ly.x,-Ly.y,-Ly.z),zy.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(zy)}}]),n}(Xy),Py=function(e){kc(n,e);var t=Vc(n);function n(e,i){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;return ka(this,n),(r=t.call(this,e,i)).isPointLight=!0,r.type="PointLight",r.distance=a,r.decay=o,r.shadow=new _y,r}return Xe(n,[{key:"power",get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e,t){return Yc(Rc(n.prototype),"copy",this).call(this,e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}]),n}(Vy),Dy=function(e){kc(n,e);var t=Vc(n);function n(){var e;return ka(this,n),(e=t.call(this,new XI(-5,5,5,-5,.5,500))).isDirectionalLightShadow=!0,e}return Xe(n)}(Xy),Oy=function(e){kc(n,e);var t=Vc(n);function n(e,i){var r;return ka(this,n),(r=t.call(this,e,i)).isDirectionalLight=!0,r.type="DirectionalLight",r.position.copy(Of.DEFAULT_UP),r.updateMatrix(),r.target=new Of,r.shadow=new Dy,r}return Xe(n,[{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e){return Yc(Rc(n.prototype),"copy",this).call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]),n}(Vy),Uy=function(e){kc(n,e);var t=Vc(n);function n(e,i){var r;return ka(this,n),(r=t.call(this,e,i)).isAmbientLight=!0,r.type="AmbientLight",r}return Xe(n)}(Vy),jy=function(e){kc(n,e);var t=Vc(n);function n(e,i){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;return ka(this,n),(r=t.call(this,e,i)).isRectAreaLight=!0,r.type="RectAreaLight",r.width=a,r.height=o,r}return Xe(n,[{key:"power",get:function(){return this.intensity*this.width*this.height*Math.PI},set:function(e){this.intensity=e/(this.width*this.height*Math.PI)}},{key:"copy",value:function(e){return Yc(Rc(n.prototype),"copy",this).call(this,e),this.width=e.width,this.height=e.height,this}},{key:"toJSON",value:function(e){var t=Yc(Rc(n.prototype),"toJSON",this).call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}]),n}(Vy),Jy=function(){function e(){ka(this,e),this.isSphericalHarmonics3=!0,this.coefficients=[];for(var t=0;t<9;t++)this.coefficients.push(new Ph)}return Xe(e,[{key:"set",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}},{key:"zero",value:function(){for(var e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}},{key:"getAt",value:function(e,t){var n=e.x,i=e.y,r=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*i),t.addScaledVector(a[2],.488603*r),t.addScaledVector(a[3],.488603*n),t.addScaledVector(a[4],n*i*1.092548),t.addScaledVector(a[5],i*r*1.092548),t.addScaledVector(a[6],.315392*(3*r*r-1)),t.addScaledVector(a[7],n*r*1.092548),t.addScaledVector(a[8],.546274*(n*n-i*i)),t}},{key:"getIrradianceAt",value:function(e,t){var n=e.x,i=e.y,r=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],1.023328*i),t.addScaledVector(a[2],1.023328*r),t.addScaledVector(a[3],1.023328*n),t.addScaledVector(a[4],.858086*n*i),t.addScaledVector(a[5],.858086*i*r),t.addScaledVector(a[6],.743125*r*r-.247708),t.addScaledVector(a[7],.858086*n*r),t.addScaledVector(a[8],.429043*(n*n-i*i)),t}},{key:"add",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}},{key:"addScaledSH",value:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}},{key:"scale",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}},{key:"lerp",value:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}},{key:"equals",value:function(e){for(var t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}},{key:"copy",value:function(e){return this.set(e.coefficients)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,i=0;i<9;i++)n[i].fromArray(e,t+3*i);return this}},{key:"toArray",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,i=0;i<9;i++)n[i].toArray(e,t+3*i);return e}}],[{key:"getBasisAt",value:function(e,t){var n=e.x,i=e.y,r=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*r,t[3]=.488603*n,t[4]=1.092548*n*i,t[5]=1.092548*i*r,t[6]=.315392*(3*r*r-1),t[7]=1.092548*n*r,t[8]=.546274*(n*n-i*i)}}]),e}(),Qy=function(e){kc(n,e);var t=Vc(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Jy,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return ka(this,n),(e=t.call(this,void 0,r)).isLightProbe=!0,e.sh=i,e}return Xe(n,[{key:"copy",value:function(e){return Yc(Rc(n.prototype),"copy",this).call(this,e),this.sh.copy(e.sh),this}},{key:"fromJSON",value:function(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}},{key:"toJSON",value:function(e){var t=Yc(Rc(n.prototype),"toJSON",this).call(this,e);return t.object.sh=this.sh.toArray(),t}}]),n}(Vy),qy=function(e){kc(n,e);var t=Vc(n);function n(e){var i;return ka(this,n),(i=t.call(this,e)).textures={},i}return Xe(n,[{key:"load",value:function(e,t,n,i){var r=this,a=new xy(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(e,(function(n){try{t(r.parse(JSON.parse(n)))}catch(a){i?i(a):console.error(a),r.manager.itemError(e)}}),n,i)}},{key:"parse",value:function(e){var t=this.textures;function i(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var r=n.createMaterialFromType(e.type);if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&void 0!==r.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.sheen&&(r.sheen=e.sheen),void 0!==e.sheenColor&&(r.sheenColor=(new dp).setHex(e.sheenColor)),void 0!==e.sheenRoughness&&(r.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==r.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==r.specular&&r.specular.setHex(e.specular),void 0!==e.specularIntensity&&(r.specularIntensity=e.specularIntensity),void 0!==e.specularColor&&void 0!==r.specularColor&&r.specularColor.setHex(e.specularColor),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearcoat&&(r.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(r.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.iridescence&&(r.iridescence=e.iridescence),void 0!==e.iridescenceIOR&&(r.iridescenceIOR=e.iridescenceIOR),void 0!==e.iridescenceThicknessRange&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),void 0!==e.transmission&&(r.transmission=e.transmission),void 0!==e.thickness&&(r.thickness=e.thickness),void 0!==e.attenuationDistance&&(r.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==r.attenuationColor&&r.attenuationColor.setHex(e.attenuationColor),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.combine&&(r.combine=e.combine),void 0!==e.side&&(r.side=e.side),void 0!==e.shadowSide&&(r.shadowSide=e.shadowSide),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(r.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(r.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(r.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(r.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(r.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(r.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(r.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(r.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),1!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.alphaToCoverage&&(r.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(r.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.forceSinglePass&&(r.forceSinglePass=e.forceSinglePass),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.toneMapped&&(r.toneMapped=e.toneMapped),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.vertexColors&&("number"===typeof e.vertexColors?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),void 0!==e.uniforms)for(var a in e.uniforms){var o=e.uniforms[a];switch(r.uniforms[a]={},o.type){case"t":r.uniforms[a].value=i(o.value);break;case"c":r.uniforms[a].value=(new dp).setHex(o.value);break;case"v2":r.uniforms[a].value=(new Ch).fromArray(o.value);break;case"v3":r.uniforms[a].value=(new Ph).fromArray(o.value);break;case"v4":r.uniforms[a].value=(new Th).fromArray(o.value);break;case"m3":r.uniforms[a].value=(new mh).fromArray(o.value);break;case"m4":r.uniforms[a].value=(new yf).fromArray(o.value);break;default:r.uniforms[a].value=o.value}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.glslVersion&&(r.glslVersion=e.glslVersion),void 0!==e.extensions)for(var s in e.extensions)r.extensions[s]=e.extensions[s];if(void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=i(e.map)),void 0!==e.matcap&&(r.matcap=i(e.matcap)),void 0!==e.alphaMap&&(r.alphaMap=i(e.alphaMap)),void 0!==e.bumpMap&&(r.bumpMap=i(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=i(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){var l=e.normalScale;!1===Array.isArray(l)&&(l=[l,l]),r.normalScale=(new Ch).fromArray(l)}return void 0!==e.displacementMap&&(r.displacementMap=i(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=i(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=i(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=i(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=i(e.specularMap)),void 0!==e.specularIntensityMap&&(r.specularIntensityMap=i(e.specularIntensityMap)),void 0!==e.specularColorMap&&(r.specularColorMap=i(e.specularColorMap)),void 0!==e.envMap&&(r.envMap=i(e.envMap)),void 0!==e.envMapIntensity&&(r.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(r.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(r.lightMap=i(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=i(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=i(e.gradientMap)),void 0!==e.clearcoatMap&&(r.clearcoatMap=i(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(r.clearcoatNormalScale=(new Ch).fromArray(e.clearcoatNormalScale)),void 0!==e.iridescenceMap&&(r.iridescenceMap=i(e.iridescenceMap)),void 0!==e.iridescenceThicknessMap&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),void 0!==e.transmissionMap&&(r.transmissionMap=i(e.transmissionMap)),void 0!==e.thicknessMap&&(r.thicknessMap=i(e.thicknessMap)),void 0!==e.sheenColorMap&&(r.sheenColorMap=i(e.sheenColorMap)),void 0!==e.sheenRoughnessMap&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}},{key:"setTextures",value:function(e){return this.textures=e,this}}],[{key:"createMaterialFromType",value:function(e){return new{ShadowMaterial:Lb,SpriteMaterial:gv,RawShaderMaterial:Kb,ShaderMaterial:gI,PointsMaterial:sA,MeshPhysicalMaterial:Pb,MeshStandardMaterial:_b,MeshPhongMaterial:Db,MeshToonMaterial:Ob,MeshNormalMaterial:Ub,MeshLambertMaterial:jb,MeshDepthMaterial:Lm,MeshDistanceMaterial:Km,MeshBasicMaterial:fp,MeshMatcapMaterial:Jb,LineDashedMaterial:Qb,LineBasicMaterial:Jv,Material:sp}[e]}}]),n}(Gy),$y=function(){function e(){ka(this,e)}return Xe(e,null,[{key:"decodeText",value:function(e){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",n=0,i=e.length;n<i;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(r){return t}}},{key:"extractUrlBase",value:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}},{key:"resolveURL",value:function(e,t){return"string"!==typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}]),e}(),eG=function(e){kc(n,e);var t=Vc(n);function n(){var e;return ka(this,n),(e=t.call(this)).isInstancedBufferGeometry=!0,e.type="InstancedBufferGeometry",e.instanceCount=1/0,e}return Xe(n,[{key:"copy",value:function(e){return Yc(Rc(n.prototype),"copy",this).call(this,e),this.instanceCount=e.instanceCount,this}},{key:"toJSON",value:function(){var e=Yc(Rc(n.prototype),"toJSON",this).call(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}]),n}(Ep),tG=function(e){kc(n,e);var t=Vc(n);function n(e){return ka(this,n),t.call(this,e)}return Xe(n,[{key:"load",value:function(e,t,n,i){var r=this,a=new xy(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(e,(function(n){try{t(r.parse(JSON.parse(n)))}catch(a){i?i(a):console.error(a),r.manager.itemError(e)}}),n,i)}},{key:"parse",value:function(e){var t={},n={};function i(e,i){if(void 0!==t[i])return t[i];var r=e.interleavedBuffers[i],a=function(e,t){if(void 0!==n[t])return n[t];var i=e.arrayBuffers,r=i[t],a=new Uint32Array(r).buffer;return n[t]=a,a}(e,r.buffer),o=yh(r.type,a),s=new lv(o,r.stride);return s.uuid=r.uuid,t[i]=s,s}var r=e.isInstancedBufferGeometry?new eG:new Ep,a=e.data.index;if(void 0!==a){var o=yh(a.type,a.array);r.setIndex(new yp(o,1))}var s=e.data.attributes;for(var l in s){var c=s[l],u=void 0;if(c.isInterleavedBufferAttribute){var g=i(e.data,c.data);u=new uv(g,c.itemSize,c.offset,c.normalized)}else{var d=yh(c.type,c.array);u=new(c.isInstancedBufferAttribute?zv:yp)(d,c.itemSize,c.normalized)}void 0!==c.name&&(u.name=c.name),void 0!==c.usage&&u.setUsage(c.usage),void 0!==c.updateRange&&(u.updateRange.offset=c.updateRange.offset,u.updateRange.count=c.updateRange.count),r.setAttribute(l,u)}var h=e.data.morphAttributes;if(h)for(var f in h){for(var p=h[f],I=[],C=0,m=p.length;C<m;C++){var v=p[C],A=void 0;if(v.isInterleavedBufferAttribute){var b=i(e.data,v.data);A=new uv(b,v.itemSize,v.offset,v.normalized)}else{var y=yh(v.type,v.array);A=new yp(y,v.itemSize,v.normalized)}void 0!==v.name&&(A.name=v.name),I.push(A)}r.morphAttributes[f]=I}e.data.morphTargetsRelative&&(r.morphTargetsRelative=!0);var G=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==G)for(var w=0,B=G.length;w!==B;++w){var x=G[w];r.addGroup(x.start,x.count,x.materialIndex)}var S=e.data.boundingSphere;if(void 0!==S){var Z=new Ph;void 0!==S.center&&Z.fromArray(S.center),r.boundingSphere=new hf(Z,S.radius)}return e.name&&(r.name=e.name),e.userData&&(r.userData=e.userData),r}}]),n}(Gy),nG=function(e){kc(n,e);var t=Vc(n);function n(e){return ka(this,n),t.call(this,e)}return Xe(n,[{key:"load",value:function(e,t,n,i){var r=this,a=""===this.path?$y.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;var o=new xy(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){var a=null;try{a=JSON.parse(n)}catch(s){return void 0!==i&&i(s),void console.error("THREE:ObjectLoader: Can't parse "+e+".",s.message)}var o=a.metadata;if(void 0===o||void 0===o.type||"geometry"===o.type.toLowerCase())return void 0!==i&&i(new Error("THREE.ObjectLoader: Can't load "+e)),void console.error("THREE.ObjectLoader: Can't load "+e);r.parse(a,t)}),n,i)}},{key:"loadAsync",value:function(){var e=Xc(Ec().mark((function e(t,n){var i,r,a,o,s,l;return Ec().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this,r=""===this.path?$y.extractUrlBase(t):this.path,this.resourcePath=this.resourcePath||r,(a=new xy(this.manager)).setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),e.next=9,a.loadAsync(t,n);case 9:if(o=e.sent,s=JSON.parse(o),void 0!==(l=s.metadata)&&void 0!==l.type&&"geometry"!==l.type.toLowerCase()){e.next=14;break}throw new Error("THREE.ObjectLoader: Can't load "+t);case 14:return e.next=16,i.parseAsync(s);case 16:return e.abrupt("return",e.sent);case 17:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"parse",value:function(e,t){var n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),a=this.parseImages(e.images,(function(){void 0!==t&&t(l)})),o=this.parseTextures(e.textures,a),s=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,s,o,n),c=this.parseSkeletons(e.skeletons,l);if(this.bindSkeletons(l,c),void 0!==t){var u=!1;for(var g in a)if(a[g].data instanceof HTMLImageElement){u=!0;break}!1===u&&t(l)}return l}},{key:"parseAsync",value:function(){var e=Xc(Ec().mark((function e(t){var n,i,r,a,o,s,l,c;return Ec().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.parseAnimations(t.animations),i=this.parseShapes(t.shapes),r=this.parseGeometries(t.geometries,i),e.next=5,this.parseImagesAsync(t.images);case 5:return a=e.sent,o=this.parseTextures(t.textures,a),s=this.parseMaterials(t.materials,o),l=this.parseObject(t.object,r,s,o,n),c=this.parseSkeletons(t.skeletons,l),this.bindSkeletons(l,c),e.abrupt("return",l);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseShapes",value:function(e){var t={};if(void 0!==e)for(var n=0,i=e.length;n<i;n++){var r=(new $A).fromJSON(e[n]);t[r.uuid]=r}return t}},{key:"parseSkeletons",value:function(e,t){var n={},i={};if(t.traverse((function(e){e.isBone&&(i[e.uuid]=e)})),void 0!==e)for(var r=0,a=e.length;r<a;r++){var o=(new Ev).fromJSON(e[r],i);n[o.uuid]=o}return n}},{key:"parseGeometries",value:function(e,t){var n={};if(void 0!==e)for(var i=new tG,r=0,a=e.length;r<a;r++){var o=void 0,s=e[r];switch(s.type){case"BufferGeometry":case"InstancedBufferGeometry":o=i.parse(s);break;default:s.type in zb?o=zb[s.type].fromJSON(s,t):console.warn('THREE.ObjectLoader: Unsupported geometry type "'.concat(s.type,'"'))}o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),void 0!==s.userData&&(o.userData=s.userData),n[s.uuid]=o}return n}},{key:"parseMaterials",value:function(e,t){var n={},i={};if(void 0!==e){var r=new qy;r.setTextures(t);for(var a=0,o=e.length;a<o;a++){var s=e[a];void 0===n[s.uuid]&&(n[s.uuid]=r.parse(s)),i[s.uuid]=n[s.uuid]}}return i}},{key:"parseAnimations",value:function(e){var t={};if(void 0!==e)for(var n=0;n<e.length;n++){var i=e[n],r=Cy.parse(i);t[r.uuid]=r}return t}},{key:"parseImages",value:function(e,t){var n,i=this,r={};function a(e){if("string"===typeof e){var t=e;return function(e){return i.manager.itemStart(e),n.load(e,(function(){i.manager.itemEnd(e)}),void 0,(function(){i.manager.itemError(e),i.manager.itemEnd(e)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:i.resourcePath+t)}return e.data?{data:yh(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){var o=new by(t);(n=new ky(o)).setCrossOrigin(this.crossOrigin);for(var s=0,l=e.length;s<l;s++){var c=e[s],u=c.url;if(Array.isArray(u)){for(var g=[],d=0,h=u.length;d<h;d++){var f=a(u[d]);null!==f&&(f instanceof HTMLImageElement?g.push(f):g.push(new Tv(f.data,f.width,f.height)))}r[c.uuid]=new Vh(g)}else{var p=a(c.url);r[c.uuid]=new Vh(p)}}}return r}},{key:"parseImagesAsync",value:function(){var e=Xc(Ec().mark((function e(t){var n,i,r,a,o,s,l,c,u,g,d,h,f,p,I;return Ec().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=function(){return o=Xc(Ec().mark((function e(t){var i,a;return Ec().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof t){e.next=8;break}return a=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(i=t)?i:n.resourcePath+i,e.next=5,r.loadAsync(a);case 5:return e.abrupt("return",e.sent);case 8:if(!t.data){e.next=12;break}return e.abrupt("return",{data:yh(t.type,t.data),width:t.width,height:t.height});case 12:return e.abrupt("return",null);case 13:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)},a=function(e){return o.apply(this,arguments)},n=this,i={},!(void 0!==t&&t.length>0)){e.next=33;break}(r=new ky(this.manager)).setCrossOrigin(this.crossOrigin),s=0,l=t.length;case 8:if(!(s<l)){e.next=33;break}if(c=t[s],u=c.url,!Array.isArray(u)){e.next=26;break}g=[],d=0,h=u.length;case 14:if(!(d<h)){e.next=23;break}return f=u[d],e.next=18,a(f);case 18:null!==(p=e.sent)&&(p instanceof HTMLImageElement?g.push(p):g.push(new Tv(p.data,p.width,p.height)));case 20:d++,e.next=14;break;case 23:i[c.uuid]=new Vh(g),e.next=30;break;case 26:return e.next=28,a(c.url);case 28:I=e.sent,i[c.uuid]=new Vh(I);case 30:s++,e.next=8;break;case 33:return e.abrupt("return",i);case 34:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTextures",value:function(e,t){function n(e,t){return"number"===typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var i={};if(void 0!==e)for(var r=0,a=e.length;r<a;r++){var o=e[r];void 0===o.image&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),void 0===t[o.image]&&console.warn("THREE.ObjectLoader: Undefined image",o.image);var s=t[o.image],l=s.data,c=void 0;Array.isArray(l)?(c=new II,6===l.length&&(c.needsUpdate=!0)):(c=l&&l.data?new Tv:new Hh,l&&(c.needsUpdate=!0)),c.source=s,c.uuid=o.uuid,void 0!==o.name&&(c.name=o.name),void 0!==o.mapping&&(c.mapping=n(o.mapping,iG)),void 0!==o.channel&&(c.channel=o.channel),void 0!==o.offset&&c.offset.fromArray(o.offset),void 0!==o.repeat&&c.repeat.fromArray(o.repeat),void 0!==o.center&&c.center.fromArray(o.center),void 0!==o.rotation&&(c.rotation=o.rotation),void 0!==o.wrap&&(c.wrapS=n(o.wrap[0],rG),c.wrapT=n(o.wrap[1],rG)),void 0!==o.format&&(c.format=o.format),void 0!==o.internalFormat&&(c.internalFormat=o.internalFormat),void 0!==o.type&&(c.type=o.type),void 0!==o.encoding&&(c.encoding=o.encoding),void 0!==o.minFilter&&(c.minFilter=n(o.minFilter,aG)),void 0!==o.magFilter&&(c.magFilter=n(o.magFilter,aG)),void 0!==o.anisotropy&&(c.anisotropy=o.anisotropy),void 0!==o.flipY&&(c.flipY=o.flipY),void 0!==o.generateMipmaps&&(c.generateMipmaps=o.generateMipmaps),void 0!==o.premultiplyAlpha&&(c.premultiplyAlpha=o.premultiplyAlpha),void 0!==o.unpackAlignment&&(c.unpackAlignment=o.unpackAlignment),void 0!==o.userData&&(c.userData=o.userData),i[o.uuid]=c}return i}},{key:"parseObject",value:function(e,t,n,i,r){var a,o,s;function l(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function c(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],i=0,r=e.length;i<r;i++){var a=e[i];void 0===n[a]&&console.warn("THREE.ObjectLoader: Undefined material",a),t.push(n[a])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}function u(e){return void 0===i[e]&&console.warn("THREE.ObjectLoader: Undefined texture",e),i[e]}switch(e.type){case"Scene":a=new sv,void 0!==e.background&&(Number.isInteger(e.background)?a.background=new dp(e.background):a.background=u(e.background)),void 0!==e.environment&&(a.environment=u(e.environment)),void 0!==e.fog&&("Fog"===e.fog.type?a.fog=new ov(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(a.fog=new av(e.fog.color,e.fog.density))),void 0!==e.backgroundBlurriness&&(a.backgroundBlurriness=e.backgroundBlurriness),void 0!==e.backgroundIntensity&&(a.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":a=new hI(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(a.focus=e.focus),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.filmGauge&&(a.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(a.filmOffset=e.filmOffset),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new XI(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new Uy(e.color,e.intensity);break;case"DirectionalLight":a=new Oy(e.color,e.intensity);break;case"PointLight":a=new Py(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new jy(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new Ey(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":a=new Fy(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=(new Qy).fromJSON(e);break;case"SkinnedMesh":o=l(e.geometry),s=c(e.material),a=new Nv(o,s),void 0!==e.bindMode&&(a.bindMode=e.bindMode),void 0!==e.bindMatrix&&a.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(a.skeleton=e.skeleton);break;case"Mesh":o=l(e.geometry),s=c(e.material),a=new rI(o,s);break;case"InstancedMesh":o=l(e.geometry),s=c(e.material);var g=e.count,d=e.instanceMatrix,h=e.instanceColor;(a=new jv(o,s,g)).instanceMatrix=new zv(new Float32Array(d.array),16),void 0!==h&&(a.instanceColor=new zv(new Float32Array(h.array),h.itemSize));break;case"LOD":a=new Zv;break;case"Line":a=new nA(l(e.geometry),c(e.material));break;case"LineLoop":a=new oA(l(e.geometry),c(e.material));break;case"LineSegments":a=new aA(l(e.geometry),c(e.material));break;case"PointCloud":case"Points":a=new dA(l(e.geometry),c(e.material));break;case"Sprite":a=new wv(c(e.material));break;case"Group":a=new jm;break;case"Bone":a=new Hv;break;default:a=new Of}if(a.uuid=e.uuid,void 0!==e.name&&(a.name=e.name),void 0!==e.matrix?(a.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(void 0!==e.position&&a.position.fromArray(e.position),void 0!==e.rotation&&a.rotation.fromArray(e.rotation),void 0!==e.quaternion&&a.quaternion.fromArray(e.quaternion),void 0!==e.scale&&a.scale.fromArray(e.scale)),void 0!==e.up&&a.up.fromArray(e.up),void 0!==e.castShadow&&(a.castShadow=e.castShadow),void 0!==e.receiveShadow&&(a.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(a.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(a.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(a.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&a.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(a.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(a.visible=e.visible),void 0!==e.frustumCulled&&(a.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(a.renderOrder=e.renderOrder),void 0!==e.userData&&(a.userData=e.userData),void 0!==e.layers&&(a.layers.mask=e.layers),void 0!==e.children)for(var f=e.children,p=0;p<f.length;p++)a.add(this.parseObject(f[p],t,n,i,r));if(void 0!==e.animations)for(var I=e.animations,C=0;C<I.length;C++){var m=I[C];a.animations.push(r[m])}if("LOD"===e.type){void 0!==e.autoUpdate&&(a.autoUpdate=e.autoUpdate);for(var v=e.levels,A=0;A<v.length;A++){var b=v[A],y=a.getObjectByProperty("uuid",b.object);void 0!==y&&a.addLevel(y,b.distance,b.hysteresis)}}return a}},{key:"bindSkeletons",value:function(e,t){0!==Object.keys(t).length&&e.traverse((function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){var n=t[e.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(n,e.bindMatrix)}}))}}]),n}(Gy),iG={UVMapping:zu,CubeReflectionMapping:Lu,CubeRefractionMapping:Ku,EquirectangularReflectionMapping:_u,EquirectangularRefractionMapping:Pu,CubeUVReflectionMapping:Du},rG={RepeatWrapping:Ou,ClampToEdgeWrapping:Uu,MirroredRepeatWrapping:ju},aG={NearestFilter:Ju,NearestMipmapNearestFilter:Qu,NearestMipmapLinearFilter:$u,LinearFilter:tg,LinearMipmapNearestFilter:ng,LinearMipmapLinearFilter:rg},oG=function(e){kc(n,e);var t=Vc(n);function n(e){var i;return ka(this,n),(i=t.call(this,e)).isImageBitmapLoader=!0,"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),i.options={premultiplyAlpha:"none"},i}return Xe(n,[{key:"setOptions",value:function(e){return this.options=e,this}},{key:"load",value:function(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var r=this,a=Ay.get(e);if(void 0!==a)return r.manager.itemStart(e),setTimeout((function(){t&&t(a),r.manager.itemEnd(e)}),0),a;var o={};o.credentials="anonymous"===this.crossOrigin?"same-origin":"include",o.headers=this.requestHeader,fetch(e,o).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(r.options,{colorSpaceConversion:"none"}))})).then((function(n){Ay.add(e,n),t&&t(n),r.manager.itemEnd(e)})).catch((function(t){i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)})),r.manager.itemStart(e)}}]),n}(Gy),sG=function(){function e(){ka(this,e)}return Xe(e,null,[{key:"getContext",value:function(){return void 0===vy&&(vy=new(window.AudioContext||window.webkitAudioContext)),vy}},{key:"setContext",value:function(e){vy=e}}]),e}(),lG=function(e){kc(n,e);var t=Vc(n);function n(e){return ka(this,n),t.call(this,e)}return Xe(n,[{key:"load",value:function(e,t,n,i){var r=this,a=new xy(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){try{var a=n.slice(0);sG.getContext().decodeAudioData(a,(function(e){t(e)}))}catch(o){i?i(o):console.error(o),r.manager.itemError(e)}}),n,i)}}]),n}(Gy),cG=function(e){kc(n,e);var t=Vc(n);function n(e,i){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;ka(this,n),(r=t.call(this,void 0,a)).isHemisphereLightProbe=!0;var o=(new dp).set(e),s=(new dp).set(i),l=new Ph(o.r,o.g,o.b),c=new Ph(s.r,s.g,s.b),u=Math.sqrt(Math.PI),g=u*Math.sqrt(.75);return r.sh.coefficients[0].copy(l).add(c).multiplyScalar(u),r.sh.coefficients[1].copy(l).sub(c).multiplyScalar(g),r}return Xe(n)}(Qy),uG=function(e){kc(n,e);var t=Vc(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;ka(this,n),(i=t.call(this,void 0,r)).isAmbientLightProbe=!0;var a=(new dp).set(e);return i.sh.coefficients[0].set(a.r,a.g,a.b).multiplyScalar(2*Math.sqrt(Math.PI)),i}return Xe(n)}(Qy),gG=new yf,dG=new yf,hG=new yf,fG=function(){function e(){ka(this,e),this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new hI,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new hI,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}return Xe(e,[{key:"update",value:function(e){var t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,hG.copy(e.projectionMatrix);var n,i,r=t.eyeSep/2,a=r*t.near/t.focus,o=t.near*Math.tan(ah*t.fov*.5)/t.zoom;dG.elements[12]=-r,gG.elements[12]=r,n=-o*t.aspect+a,i=o*t.aspect+a,hG.elements[0]=2*t.near/(i-n),hG.elements[8]=(i+n)/(i-n),this.cameraL.projectionMatrix.copy(hG),n=-o*t.aspect-a,i=o*t.aspect-a,hG.elements[0]=2*t.near/(i-n),hG.elements[8]=(i+n)/(i-n),this.cameraR.projectionMatrix.copy(hG)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(dG),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(gG)}}]),e}(),pG=function(){function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];ka(this,e),this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}return Xe(e,[{key:"start",value:function(){this.startTime=IG(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=IG();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}]),e}();function IG(){return("undefined"===typeof performance?Date:performance).now()}var CG=new Ph,mG=new _h,vG=new Ph,AG=new Ph,bG=function(e){kc(n,e);var t=Vc(n);function n(){var e;return ka(this,n),(e=t.call(this)).type="AudioListener",e.context=sG.getContext(),e.gain=e.context.createGain(),e.gain.connect(e.context.destination),e.filter=null,e.timeDelta=0,e._clock=new pG,e}return Xe(n,[{key:"getInput",value:function(){return this.gain}},{key:"removeFilter",value:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}},{key:"getFilter",value:function(){return this.filter}},{key:"setFilter",value:function(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}},{key:"getMasterVolume",value:function(){return this.gain.gain.value}},{key:"setMasterVolume",value:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}},{key:"updateMatrixWorld",value:function(e){Yc(Rc(n.prototype),"updateMatrixWorld",this).call(this,e);var t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(CG,mG,vG),AG.set(0,0,-1).applyQuaternion(mG),t.positionX){var r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(CG.x,r),t.positionY.linearRampToValueAtTime(CG.y,r),t.positionZ.linearRampToValueAtTime(CG.z,r),t.forwardX.linearRampToValueAtTime(AG.x,r),t.forwardY.linearRampToValueAtTime(AG.y,r),t.forwardZ.linearRampToValueAtTime(AG.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(CG.x,CG.y,CG.z),t.setOrientation(AG.x,AG.y,AG.z,i.x,i.y,i.z)}}]),n}(Of),yG=function(e){kc(n,e);var t=Vc(n);function n(e){var i;return ka(this,n),(i=t.call(this)).type="Audio",i.listener=e,i.context=e.context,i.gain=i.context.createGain(),i.gain.connect(e.getInput()),i.autoplay=!1,i.buffer=null,i.detune=0,i.loop=!1,i.loopStart=0,i.loopEnd=0,i.offset=0,i.duration=void 0,i.playbackRate=1,i.isPlaying=!1,i.hasPlaybackControl=!0,i.source=null,i.sourceType="empty",i._startedAt=0,i._progress=0,i._connected=!1,i.filters=[],i}return Xe(n,[{key:"getOutput",value:function(){return this.gain}},{key:"setNodeSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}},{key:"setMediaElementSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}},{key:"setMediaStreamSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}},{key:"setBuffer",value:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}},{key:"play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){this._startedAt=this.context.currentTime+e;var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")}},{key:"pause",value:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"stop",value:function(){if(!1!==this.hasPlaybackControl)return this._progress=0,null!==this.source&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"connect",value:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}},{key:"disconnect",value:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}},{key:"getFilters",value:function(){return this.filters}},{key:"setFilters",value:function(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}},{key:"setDetune",value:function(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}},{key:"getDetune",value:function(){return this.detune}},{key:"getFilter",value:function(){return this.getFilters()[0]}},{key:"setFilter",value:function(e){return this.setFilters(e?[e]:[])}},{key:"setPlaybackRate",value:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"onEnded",value:function(){this.isPlaying=!1}},{key:"getLoop",value:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}},{key:"setLoop",value:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"setLoopStart",value:function(e){return this.loopStart=e,this}},{key:"setLoopEnd",value:function(e){return this.loopEnd=e,this}},{key:"getVolume",value:function(){return this.gain.gain.value}},{key:"setVolume",value:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}]),n}(Of),GG=new Ph,wG=new _h,BG=new Ph,xG=new Ph,SG=function(e){kc(n,e);var t=Vc(n);function n(e){var i;return ka(this,n),(i=t.call(this,e)).panner=i.context.createPanner(),i.panner.panningModel="HRTF",i.panner.connect(i.gain),i}return Xe(n,[{key:"disconnect",value:function(){Yc(Rc(n.prototype),"disconnect",this).call(this),this.panner.disconnect(this.gain)}},{key:"getOutput",value:function(){return this.panner}},{key:"getRefDistance",value:function(){return this.panner.refDistance}},{key:"setRefDistance",value:function(e){return this.panner.refDistance=e,this}},{key:"getRolloffFactor",value:function(){return this.panner.rolloffFactor}},{key:"setRolloffFactor",value:function(e){return this.panner.rolloffFactor=e,this}},{key:"getDistanceModel",value:function(){return this.panner.distanceModel}},{key:"setDistanceModel",value:function(e){return this.panner.distanceModel=e,this}},{key:"getMaxDistance",value:function(){return this.panner.maxDistance}},{key:"setMaxDistance",value:function(e){return this.panner.maxDistance=e,this}},{key:"setDirectionalCone",value:function(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}},{key:"updateMatrixWorld",value:function(e){if(Yc(Rc(n.prototype),"updateMatrixWorld",this).call(this,e),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose(GG,wG,BG),xG.set(0,0,1).applyQuaternion(wG);var t=this.panner;if(t.positionX){var i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(GG.x,i),t.positionY.linearRampToValueAtTime(GG.y,i),t.positionZ.linearRampToValueAtTime(GG.z,i),t.orientationX.linearRampToValueAtTime(xG.x,i),t.orientationY.linearRampToValueAtTime(xG.y,i),t.orientationZ.linearRampToValueAtTime(xG.z,i)}else t.setPosition(GG.x,GG.y,GG.z),t.setOrientation(xG.x,xG.y,xG.z)}}}]),n}(yG),ZG=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048;ka(this,e),this.analyser=t.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}return Xe(e,[{key:"getFrequencyData",value:function(){return this.analyser.getByteFrequencyData(this.data),this.data}},{key:"getAverageFrequency",value:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}]),e}(),kG=function(){function e(t,n,i){var r,a,o;switch(ka(this,e),this.binding=t,this.valueSize=i,n){case"quaternion":r=this._slerp,a=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*i),this._workIndex=5;break;case"string":case"bool":r=this._select,a=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*i);break;default:r=this._lerp,a=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*i)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=a,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}return Xe(e,[{key:"accumulate",value:function(e,t){var n=this.buffer,i=this.valueSize,r=e*i+i,a=this.cumulativeWeight;if(0===a){for(var o=0;o!==i;++o)n[r+o]=n[o];a=t}else{var s=t/(a+=t);this._mixBufferRegion(n,r,0,s,i)}this.cumulativeWeight=a}},{key:"accumulateAdditive",value:function(e){var t=this.buffer,n=this.valueSize,i=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e}},{key:"apply",value:function(e){var t=this.valueSize,n=this.buffer,i=e*t+t,r=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){var s=t*this._origIndex;this._mixBufferRegion(n,i,s,1-r,t)}a>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(var l=t,c=t+t;l!==c;++l)if(n[l]!==n[l+t]){o.setValue(n,i);break}}},{key:"saveOriginalState",value:function(){var e=this.binding,t=this.buffer,n=this.valueSize,i=n*this._origIndex;e.getValue(t,i);for(var r=n,a=i;r!==a;++r)t[r]=t[i+r%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}},{key:"restoreOriginalState",value:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)}},{key:"_setAdditiveIdentityNumeric",value:function(){for(var e=this._addIndex*this.valueSize,t=e+this.valueSize,n=e;n<t;n++)this.buffer[n]=0}},{key:"_setAdditiveIdentityQuaternion",value:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}},{key:"_setAdditiveIdentityOther",value:function(){for(var e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize,n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}},{key:"_select",value:function(e,t,n,i,r){if(i>=.5)for(var a=0;a!==r;++a)e[t+a]=e[n+a]}},{key:"_slerp",value:function(e,t,n,i){_h.slerpFlat(e,t,e,t,e,n,i)}},{key:"_slerpAdditive",value:function(e,t,n,i,r){var a=this._workIndex*r;_h.multiplyQuaternionsFlat(e,a,e,t,e,n),_h.slerpFlat(e,t,e,t,e,a,i)}},{key:"_lerp",value:function(e,t,n,i,r){for(var a=1-i,o=0;o!==r;++o){var s=t+o;e[s]=e[s]*a+e[n+o]*i}}},{key:"_lerpAdditive",value:function(e,t,n,i,r){for(var a=0;a!==r;++a){var o=t+a;e[o]=e[o]+e[n+a]*i}}}]),e}(),RG="\\[\\]\\.:\\/",WG=new RegExp("["+RG+"]","g"),MG="[^"+RG+"]",VG="[^"+RG.replace("\\.","")+"]",FG=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",MG)+/(WCOD+)?/.source.replace("WCOD",VG)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",MG)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",MG)+"$"),NG=["material","materials","bones","map"],HG=function(){function e(t,n,i){ka(this,e);var r=i||TG.parseTrackName(n);this._targetGroup=t,this._bindings=t.subscribe_(n,r)}return Xe(e,[{key:"getValue",value:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(e,t)}},{key:"setValue",value:function(e,t){for(var n=this._bindings,i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(e,t)}},{key:"bind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}},{key:"unbind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}]),e}(),TG=function(){function e(t,n,i){ka(this,e),this.path=n,this.parsedPath=i||e.parseTrackName(n),this.node=e.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}return Xe(e,[{key:"_getValue_unavailable",value:function(){}},{key:"_setValue_unavailable",value:function(){}},{key:"_getValue_direct",value:function(e,t){e[t]=this.targetObject[this.propertyName]}},{key:"_getValue_array",value:function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)e[t++]=n[i]}},{key:"_getValue_arrayElement",value:function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}},{key:"_getValue_toArray",value:function(e,t){this.resolvedProperty.toArray(e,t)}},{key:"_setValue_direct",value:function(e,t){this.targetObject[this.propertyName]=e[t]}},{key:"_setValue_direct_setNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_direct_setMatrixWorldNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_array",value:function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++]}},{key:"_setValue_array_setNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0}},{key:"_setValue_array_setMatrixWorldNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_arrayElement",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}},{key:"_setValue_arrayElement_setNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_arrayElement_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_fromArray",value:function(e,t){this.resolvedProperty.fromArray(e,t)}},{key:"_setValue_fromArray_setNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}},{key:"_setValue_fromArray_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_getValue_unbound",value:function(e,t){this.bind(),this.getValue(e,t)}},{key:"_setValue_unbound",value:function(e,t){this.bind(),this.setValue(e,t)}},{key:"bind",value:function(){var t=this.node,n=this.parsedPath,i=n.objectName,r=n.propertyName,a=n.propertyIndex;if(t||(t=e.findNode(this.rootNode,n.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(i){var o=n.objectIndex;switch(i){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var s=0;s<t.length;s++)if(t[s].name===o){o=s;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[i])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[i]}if(void 0!==o){if(void 0===t[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[o]}}var l=t[r];if(void 0!==l){var c=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?c=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(c=this.Versioning.MatrixWorldNeedsUpdate);var u=this.BindingType.Direct;if(void 0!==a){if("morphTargetInfluences"===r){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[a]&&(a=t.morphTargetDictionary[a])}u=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=a}else void 0!==l.fromArray&&void 0!==l.toArray?(u=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(u=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=r;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][c]}else{var g=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+g+"."+r+" but it wasn't found.",t)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")}},{key:"unbind",value:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}],[{key:"create",value:function(t,n,i){return t&&t.isAnimationObjectGroup?new e.Composite(t,n,i):new e(t,n,i)}},{key:"sanitizeNodeName",value:function(e){return e.replace(/\s/g,"_").replace(WG,"")}},{key:"parseTrackName",value:function(e){var t=FG.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){var r=n.nodeName.substring(i+1);-1!==NG.indexOf(r)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=r)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}},{key:"findNode",value:function(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var i=function e(n){for(var i=0;i<n.length;i++){var r=n[i];if(r.name===t||r.uuid===t)return r;var a=e(r.children);if(a)return a}return null}(e.children);if(i)return i}return null}}]),e}();TG.Composite=HG,TG.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},TG.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},TG.prototype.GetterByBindingType=[TG.prototype._getValue_direct,TG.prototype._getValue_array,TG.prototype._getValue_arrayElement,TG.prototype._getValue_toArray],TG.prototype.SetterByBindingTypeAndVersioning=[[TG.prototype._setValue_direct,TG.prototype._setValue_direct_setNeedsUpdate,TG.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[TG.prototype._setValue_array,TG.prototype._setValue_array_setNeedsUpdate,TG.prototype._setValue_array_setMatrixWorldNeedsUpdate],[TG.prototype._setValue_arrayElement,TG.prototype._setValue_arrayElement_setNeedsUpdate,TG.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[TG.prototype._setValue_fromArray,TG.prototype._setValue_fromArray_setNeedsUpdate,TG.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var XG=function(){function e(){ka(this,e),this.isAnimationObjectGroup=!0,this.uuid=sh(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var n=0,i=arguments.length;n!==i;++n)t[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var r=this;this.stats={objects:{get total(){return r._objects.length},get inUse(){return this.total-r.nCachedObjects_}},get bindingsPerObject(){return r._bindings.length}}}return Xe(e,[{key:"add",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._paths,i=this._parsedPaths,r=this._bindings,a=r.length,o=void 0,s=e.length,l=this.nCachedObjects_,c=0,u=arguments.length;c!==u;++c){var g=arguments[c],d=g.uuid,h=t[d];if(void 0===h){h=s++,t[d]=h,e.push(g);for(var f=0,p=a;f!==p;++f)r[f].push(new TG(g,n[f],i[f]))}else if(h<l){o=e[h];var I=--l,C=e[I];t[C.uuid]=h,e[h]=C,t[d]=I,e[I]=g;for(var m=0,v=a;m!==v;++m){var A=r[m],b=A[I],y=A[h];A[h]=b,void 0===y&&(y=new TG(g,n[m],i[m])),A[I]=y}}else e[h]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}},{key:"remove",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length,r=this.nCachedObjects_,a=0,o=arguments.length;a!==o;++a){var s=arguments[a],l=s.uuid,c=t[l];if(void 0!==c&&c>=r){var u=r++,g=e[u];t[g.uuid]=c,e[c]=g,t[l]=u,e[u]=s;for(var d=0,h=i;d!==h;++d){var f=n[d],p=f[u],I=f[c];f[c]=p,f[u]=I}}}this.nCachedObjects_=r}},{key:"uncache",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length,r=this.nCachedObjects_,a=e.length,o=0,s=arguments.length;o!==s;++o){var l=arguments[o].uuid,c=t[l];if(void 0!==c)if(delete t[l],c<r){var u=--r,g=e[u],d=--a,h=e[d];t[g.uuid]=c,e[c]=g,t[h.uuid]=u,e[u]=h,e.pop();for(var f=0,p=i;f!==p;++f){var I=n[f],C=I[u],m=I[d];I[c]=C,I[u]=m,I.pop()}}else{var v=--a,A=e[v];v>0&&(t[A.uuid]=c),e[c]=A,e.pop();for(var b=0,y=i;b!==y;++b){var G=n[b];G[c]=G[v],G.pop()}}}this.nCachedObjects_=r}},{key:"subscribe_",value:function(e,t){var n=this._bindingsIndicesByPath,i=n[e],r=this._bindings;if(void 0!==i)return r[i];var a=this._paths,o=this._parsedPaths,s=this._objects,l=s.length,c=this.nCachedObjects_,u=new Array(l);i=r.length,n[e]=i,a.push(e),o.push(t),r.push(u);for(var g=c,d=s.length;g!==d;++g){var h=s[g];u[g]=new TG(h,e,t)}return u}},{key:"unsubscribe_",value:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var i=this._paths,r=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o];t[e[o]]=n,a[n]=s,a.pop(),r[n]=r[o],r.pop(),i[n]=i[o],i.pop()}}}]),e}(),YG=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.blendMode;ka(this,e),this._mixer=t,this._clip=n,this._localRoot=i,this.blendMode=r;for(var a=n.tracks,o=a.length,s=new Array(o),l={endingStart:ud,endingEnd:ud},c=0;c!==o;++c){var u=a[c].createInterpolant(null);s[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=s,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=ad,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}return Xe(e,[{key:"play",value:function(){return this._mixer._activateAction(this),this}},{key:"stop",value:function(){return this._mixer._deactivateAction(this),this.reset()}},{key:"reset",value:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}},{key:"isRunning",value:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}},{key:"isScheduled",value:function(){return this._mixer._isActiveAction(this)}},{key:"startAt",value:function(e){return this._startTime=e,this}},{key:"setLoop",value:function(e,t){return this.loop=e,this.repetitions=t,this}},{key:"setEffectiveWeight",value:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}},{key:"getEffectiveWeight",value:function(){return this._effectiveWeight}},{key:"fadeIn",value:function(e){return this._scheduleFading(e,0,1)}},{key:"fadeOut",value:function(e){return this._scheduleFading(e,1,0)}},{key:"crossFadeFrom",value:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var i=this._clip.duration,r=e._clip.duration,a=r/i,o=i/r;e.warp(1,a,t),this.warp(o,1,t)}return this}},{key:"crossFadeTo",value:function(e,t,n){return e.crossFadeFrom(this,t,n)}},{key:"stopFading",value:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"setEffectiveTimeScale",value:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}},{key:"getEffectiveTimeScale",value:function(){return this._effectiveTimeScale}},{key:"setDuration",value:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}},{key:"syncWith",value:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}},{key:"halt",value:function(e){return this.warp(this._effectiveTimeScale,0,e)}},{key:"warp",value:function(e,t,n){var i=this._mixer,r=i.time,a=this.timeScale,o=this._timeScaleInterpolant;null===o&&(o=i._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,l=o.sampleValues;return s[0]=r,s[1]=r+n,l[0]=e/a,l[1]=t/a,this}},{key:"stopWarping",value:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"getMixer",value:function(){return this._mixer}},{key:"getClip",value:function(){return this._clip}},{key:"getRoot",value:function(){return this._localRoot||this._mixer._root}},{key:"_update",value:function(e,t,n,i){if(this.enabled){var r=this._startTime;if(null!==r){var a=(e-r)*n;a<0||0===n?t=0:(this._startTime=null,t=n*a)}t*=this._updateTimeScale(e);var o=this._updateTime(t),s=this._updateWeight(e);if(s>0){var l=this._interpolants,c=this._propertyBindings;if(this.blendMode===fd)for(var u=0,g=l.length;u!==g;++u)l[u].evaluate(o),c[u].accumulateAdditive(s);else for(var d=0,h=l.length;d!==h;++d)l[d].evaluate(o),c[d].accumulate(i,s)}}else this._updateWeight(e)}},{key:"_updateWeight",value:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=t,t}},{key:"_updateTimeScale",value:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n)t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}return this._effectiveTimeScale=t,t}},{key:"_updateTime",value:function(e){var t=this._clip.duration,n=this.loop,i=this.time+e,r=this._loopCount,a=n===od;if(0===e)return-1===r?i:a&&1===(1&r)?t-i:i;if(n===rd){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else{if(!(i<0)){this.time=i;break e}i=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===r&&(e>=0?(r=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),i>=t||i<0){var o=Math.floor(i/t);i-=t*o,r+=Math.abs(o);var s=this.repetitions-r;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){var l=e<0;this._setEndings(l,!l,a)}else this._setEndings(!1,!1,a);this._loopCount=r,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=i;if(a&&1===(1&r))return t-i}return i}},{key:"_setEndings",value:function(e,t,n){var i=this._interpolantSettings;n?(i.endingStart=gd,i.endingEnd=gd):(i.endingStart=e?this.zeroSlopeAtStart?gd:ud:dd,i.endingEnd=t?this.zeroSlopeAtEnd?gd:ud:dd)}},{key:"_scheduleFading",value:function(e,t,n){var i=this._mixer,r=i.time,a=this._weightInterpolant;null===a&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);var o=a.parameterPositions,s=a.sampleValues;return o[0]=r,s[0]=t,o[1]=r+e,s[1]=n,this}}]),e}(),EG=new Float32Array(1),zG=function(e){kc(n,e);var t=Vc(n);function n(e){var i;return ka(this,n),(i=t.call(this))._root=e,i._initMemoryManager(),i._accuIndex=0,i.time=0,i.timeScale=1,i}return Xe(n,[{key:"_bindAction",value:function(e,t){var n=e._localRoot||this._root,i=e._clip.tracks,r=i.length,a=e._propertyBindings,o=e._interpolants,s=n.uuid,l=this._bindingsByRootAndName,c=l[s];void 0===c&&(c={},l[s]=c);for(var u=0;u!==r;++u){var g=i[u],d=g.name,h=c[d];if(void 0!==h)++h.referenceCount,a[u]=h;else{if(void 0!==(h=a[u])){null===h._cacheIndex&&(++h.referenceCount,this._addInactiveBinding(h,s,d));continue}var f=t&&t._propertyBindings[u].binding.parsedPath;++(h=new kG(TG.create(n,d,f),g.ValueTypeName,g.getValueSize())).referenceCount,this._addInactiveBinding(h,s,d),a[u]=h}o[u].resultBuffer=h.buffer}}},{key:"_activateAction",value:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,i=this._actionsByClip[n];this._bindAction(e,i&&i.knownActions[0]),this._addInactiveAction(e,n,t)}for(var r=e._propertyBindings,a=0,o=r.length;a!==o;++a){var s=r[a];0===s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}},{key:"_deactivateAction",value:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,i=t.length;n!==i;++n){var r=t[n];0===--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(e)}}},{key:"_initMemoryManager",value:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}},{key:"_isActiveAction",value:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions}},{key:"_addInactiveAction",value:function(e,t,n){var i=this._actions,r=this._actionsByClip,a=r[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=a;else{var o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=i.length,i.push(e),a.actionByRoot[n]=e}},{key:"_removeInactiveAction",value:function(e){var t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;var r=e._clip.uuid,a=this._actionsByClip,o=a[r],s=o.knownActions,l=s[s.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,s[c]=l,s.pop(),e._byClipCacheIndex=null,delete o.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete a[r],this._removeInactiveBindingsForAction(e)}},{key:"_removeInactiveBindingsForAction",value:function(e){for(var t=e._propertyBindings,n=0,i=t.length;n!==i;++n){var r=t[n];0===--r.referenceCount&&this._removeInactiveBinding(r)}}},{key:"_lendAction",value:function(e){var t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}},{key:"_takeBackAction",value:function(e){var t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}},{key:"_addInactiveBinding",value:function(e,t,n){var i=this._bindingsByRootAndName,r=this._bindings,a=i[t];void 0===a&&(a={},i[t]=a),a[n]=e,e._cacheIndex=r.length,r.push(e)}},{key:"_removeInactiveBinding",value:function(e){var t=this._bindings,n=e.binding,i=n.rootNode.uuid,r=n.path,a=this._bindingsByRootAndName,o=a[i],s=t[t.length-1],l=e._cacheIndex;s._cacheIndex=l,t[l]=s,t.pop(),delete o[r],0===Object.keys(o).length&&delete a[i]}},{key:"_lendBinding",value:function(e){var t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}},{key:"_takeBackBinding",value:function(e){var t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}},{key:"_lendControlInterpolant",value:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&((n=new sy(new Float32Array(2),new Float32Array(2),1,EG)).__cacheIndex=t,e[t]=n),n}},{key:"_takeBackControlInterpolant",value:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,r=t[i];e.__cacheIndex=i,t[i]=e,r.__cacheIndex=n,t[n]=r}},{key:"clipAction",value:function(e,t,n){var i=t||this._root,r=i.uuid,a="string"===typeof e?Cy.findByName(i,e):e,o=null!==a?a.uuid:e,s=this._actionsByClip[o],l=null;if(void 0===n&&(n=null!==a?a.blendMode:hd),void 0!==s){var c=s.actionByRoot[r];if(void 0!==c&&c.blendMode===n)return c;l=s.knownActions[0],null===a&&(a=l._clip)}if(null===a)return null;var u=new YG(this,a,t,n);return this._bindAction(u,l),this._addInactiveAction(u,o,r),u}},{key:"existingAction",value:function(e,t){var n=t||this._root,i=n.uuid,r="string"===typeof e?Cy.findByName(n,e):e,a=r?r.uuid:e,o=this._actionsByClip[a];return void 0!==o&&o.actionByRoot[i]||null}},{key:"stopAllAction",value:function(){for(var e=this._actions,t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}},{key:"update",value:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,i=this.time+=e,r=Math.sign(e),a=this._accuIndex^=1,o=0;o!==n;++o){t[o]._update(i,e,r,a)}for(var s=this._bindings,l=this._nActiveBindings,c=0;c!==l;++c)s[c].apply(a);return this}},{key:"setTime",value:function(e){this.time=0;for(var t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}},{key:"getRoot",value:function(){return this._root}},{key:"uncacheClip",value:function(e){var t=this._actions,n=e.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){for(var a=r.knownActions,o=0,s=a.length;o!==s;++o){var l=a[o];this._deactivateAction(l);var c=l._cacheIndex,u=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,u._cacheIndex=c,t[c]=u,t.pop(),this._removeInactiveBindingsForAction(l)}delete i[n]}}},{key:"uncacheRoot",value:function(e){var t=e.uuid,n=this._actionsByClip;for(var i in n){var r=n[i].actionByRoot[t];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}var a=this._bindingsByRootAndName[t];if(void 0!==a)for(var o in a){var s=a[o];s.restoreOriginalState(),this._removeInactiveBinding(s)}}},{key:"uncacheAction",value:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}]),n}(nh),LG=function(){function e(t){ka(this,e),this.value=t}return Xe(e,[{key:"clone",value:function(){return new e(void 0===this.value.clone?this.value:this.value.clone())}}]),e}(),KG=0,_G=function(e){kc(n,e);var t=Vc(n);function n(){var e;return ka(this,n),(e=t.call(this)).isUniformsGroup=!0,Object.defineProperty(Ye(e),"id",{value:KG++}),e.name="",e.usage=_d,e.uniforms=[],e}return Xe(n,[{key:"add",value:function(e){return this.uniforms.push(e),this}},{key:"remove",value:function(e){var t=this.uniforms.indexOf(e);return-1!==t&&this.uniforms.splice(t,1),this}},{key:"setName",value:function(e){return this.name=e,this}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"dispose",value:function(){return this.dispatchEvent({type:"dispose"}),this}},{key:"copy",value:function(e){this.name=e.name,this.usage=e.usage;var t=e.uniforms;this.uniforms.length=0;for(var n=0,i=t.length;n<i;n++)this.uniforms.push(t[n].clone());return this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}(nh),PG=function(e){kc(n,e);var t=Vc(n);function n(e,i){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return ka(this,n),(r=t.call(this,e,i)).isInstancedInterleavedBuffer=!0,r.meshPerAttribute=a,r}return Xe(n,[{key:"copy",value:function(e){return Yc(Rc(n.prototype),"copy",this).call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"clone",value:function(e){var t=Yc(Rc(n.prototype),"clone",this).call(this,e);return t.meshPerAttribute=this.meshPerAttribute,t}},{key:"toJSON",value:function(e){var t=Yc(Rc(n.prototype),"toJSON",this).call(this,e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}]),n}(lv),DG=function(){function e(t,n,i,r,a){ka(this,e),this.isGLBufferAttribute=!0,this.name="",this.buffer=t,this.type=n,this.itemSize=i,this.elementSize=r,this.count=a,this.version=0}return Xe(e,[{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setBuffer",value:function(e){return this.buffer=e,this}},{key:"setType",value:function(e,t){return this.type=e,this.elementSize=t,this}},{key:"setItemSize",value:function(e){return this.itemSize=e,this}},{key:"setCount",value:function(e){return this.count=e,this}}]),e}(),OG=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;ka(this,e),this.ray=new bf(t,n),this.near=i,this.far=r,this.camera=null,this.layers=new Vf,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}return Xe(e,[{key:"set",value:function(e,t){this.ray.set(e,t)}},{key:"setFromCamera",value:function(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}},{key:"intersectObject",value:function(e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return jG(e,this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1]),t.sort(UG),t}},{key:"intersectObjects",value:function(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=0,r=e.length;i<r;i++)jG(e[i],this,n,t);return n.sort(UG),n}}]),e}();function UG(e,t){return e.distance-t.distance}function jG(e,t,n,i){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===i)for(var r=e.children,a=0,o=r.length;a<o;a++)jG(r[a],t,n,!0)}var JG=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return ka(this,e),this.radius=t,this.phi=n,this.theta=i,this}return Xe(e,[{key:"set",value:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}},{key:"copy",value:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}},{key:"makeSafe",value:function(){var e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(lh(t/this.radius,-1,1))),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),QG=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return ka(this,e),this.radius=t,this.theta=n,this.y=i,this}return Xe(e,[{key:"set",value:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}},{key:"copy",value:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),qG=new Ch,$G=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ch(1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ch(-1/0,-1/0);ka(this,e),this.isBox2=!0,this.min=t,this.max=n}return Xe(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=qG.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y}},{key:"getCenter",value:function(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}},{key:"getParameter",value:function(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}},{key:"clampPoint",value:function(e,t){return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return this.clampPoint(e,qG).distanceTo(e)}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}(),ew=new Ph,tw=new Ph,nw=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ph,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ph;ka(this,e),this.start=t,this.end=n}return Xe(e,[{key:"set",value:function(e,t){return this.start.copy(e),this.end.copy(t),this}},{key:"copy",value:function(e){return this.start.copy(e.start),this.end.copy(e.end),this}},{key:"getCenter",value:function(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}},{key:"delta",value:function(e){return e.subVectors(this.end,this.start)}},{key:"distanceSq",value:function(){return this.start.distanceToSquared(this.end)}},{key:"distance",value:function(){return this.start.distanceTo(this.end)}},{key:"at",value:function(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}},{key:"closestPointToPointParameter",value:function(e,t){ew.subVectors(e,this.start),tw.subVectors(this.end,this.start);var n=tw.dot(tw),i=tw.dot(ew)/n;return t&&(i=lh(i,0,1)),i}},{key:"closestPointToPoint",value:function(e,t,n){var i=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(i).add(this.start)}},{key:"applyMatrix4",value:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}},{key:"equals",value:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),iw=new Ph,rw=function(e){kc(n,e);var t=Vc(n);function n(e,i){var r;ka(this,n),(r=t.call(this)).light=e,r.matrix=e.matrixWorld,r.matrixAutoUpdate=!1,r.color=i,r.type="SpotLightHelper";for(var a=new Ep,o=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],s=0,l=1;s<32;s++,l++){var c=s/32*Math.PI*2,u=l/32*Math.PI*2;o.push(Math.cos(c),Math.sin(c),1,Math.cos(u),Math.sin(u),1)}a.setAttribute("position",new Wp(o,3));var g=new Jv({fog:!1,toneMapped:!1});return r.cone=new aA(a,g),r.add(r.cone),r.update(),r}return Xe(n,[{key:"dispose",value:function(){this.cone.geometry.dispose(),this.cone.material.dispose()}},{key:"update",value:function(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);var e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),iw.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(iw),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}]),n}(Of),aw=new Ph,ow=new yf,sw=new yf,lw=function(e){kc(n,e);var t=Vc(n);function n(e){var i;ka(this,n);for(var r=cw(e),a=new Ep,o=[],s=[],l=new dp(0,0,1),c=new dp(0,1,0),u=0;u<r.length;u++){var g=r[u];g.parent&&g.parent.isBone&&(o.push(0,0,0),o.push(0,0,0),s.push(l.r,l.g,l.b),s.push(c.r,c.g,c.b))}a.setAttribute("position",new Wp(o,3)),a.setAttribute("color",new Wp(s,3));var d=new Jv({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});return(i=t.call(this,a,d)).isSkeletonHelper=!0,i.type="SkeletonHelper",i.root=e,i.bones=r,i.matrix=e.matrixWorld,i.matrixAutoUpdate=!1,i}return Xe(n,[{key:"updateMatrixWorld",value:function(e){var t=this.bones,i=this.geometry,r=i.getAttribute("position");sw.copy(this.root.matrixWorld).invert();for(var a=0,o=0;a<t.length;a++){var s=t[a];s.parent&&s.parent.isBone&&(ow.multiplyMatrices(sw,s.matrixWorld),aw.setFromMatrixPosition(ow),r.setXYZ(o,aw.x,aw.y,aw.z),ow.multiplyMatrices(sw,s.parent.matrixWorld),aw.setFromMatrixPosition(ow),r.setXYZ(o+1,aw.x,aw.y,aw.z),o+=2)}i.getAttribute("position").needsUpdate=!0,Yc(Rc(n.prototype),"updateMatrixWorld",this).call(this,e)}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(aA);function cw(e){var t=[];!0===e.isBone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,cw(e.children[n]));return t}var uw=function(e){kc(n,e);var t=Vc(n);function n(e,i,r){var a;ka(this,n);var o=new Fb(i,4,2),s=new fp({wireframe:!0,fog:!1,toneMapped:!1});return(a=t.call(this,o,s)).light=e,a.color=r,a.type="PointLightHelper",a.matrix=a.light.matrixWorld,a.matrixAutoUpdate=!1,a.update(),a}return Xe(n,[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}},{key:"update",value:function(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}]),n}(rI),gw=new Ph,dw=new dp,hw=new dp,fw=function(e){kc(n,e);var t=Vc(n);function n(e,i,r){var a;ka(this,n),(a=t.call(this)).light=e,a.matrix=e.matrixWorld,a.matrixAutoUpdate=!1,a.color=r,a.type="HemisphereLightHelper";var o=new Wb(i);o.rotateY(.5*Math.PI),a.material=new fp({wireframe:!0,fog:!1,toneMapped:!1}),void 0===a.color&&(a.material.vertexColors=!0);var s=o.getAttribute("position"),l=new Float32Array(3*s.count);return o.setAttribute("color",new yp(l,3)),a.add(new rI(o,a.material)),a.update(),a}return Xe(n,[{key:"dispose",value:function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}},{key:"update",value:function(){var e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var t=e.geometry.getAttribute("color");dw.copy(this.light.color),hw.copy(this.light.groundColor);for(var n=0,i=t.count;n<i;n++){var r=n<i/2?dw:hw;t.setXYZ(n,r.r,r.g,r.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(gw.setFromMatrixPosition(this.light.matrixWorld).negate())}}]),n}(Of),pw=function(e){kc(n,e);var t=Vc(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;ka(this,n),a=new dp(a),o=new dp(o);for(var s=r/2,l=i/r,c=i/2,u=[],g=[],d=0,h=0,f=-c;d<=r;d++,f+=l){u.push(-c,0,f,c,0,f),u.push(f,0,-c,f,0,c);var p=d===s?a:o;p.toArray(g,h),h+=3,p.toArray(g,h),h+=3,p.toArray(g,h),h+=3,p.toArray(g,h),h+=3}var I=new Ep;I.setAttribute("position",new Wp(u,3)),I.setAttribute("color",new Wp(g,3));var C=new Jv({vertexColors:!0,toneMapped:!1});return(e=t.call(this,I,C)).type="GridHelper",e}return Xe(n,[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(aA),Iw=function(e){kc(n,e);var t=Vc(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4473924,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:8947848;ka(this,n),s=new dp(s),l=new dp(l);var c=[],u=[];if(r>1)for(var g=0;g<r;g++){var d=g/r*(2*Math.PI),h=Math.sin(d)*i,f=Math.cos(d)*i;c.push(0,0,0),c.push(h,0,f);var p=1&g?s:l;u.push(p.r,p.g,p.b),u.push(p.r,p.g,p.b)}for(var I=0;I<a;I++)for(var C=1&I?s:l,m=i-i/a*I,v=0;v<o;v++){var A=v/o*(2*Math.PI),b=Math.sin(A)*m,y=Math.cos(A)*m;c.push(b,0,y),u.push(C.r,C.g,C.b),A=(v+1)/o*(2*Math.PI),b=Math.sin(A)*m,y=Math.cos(A)*m,c.push(b,0,y),u.push(C.r,C.g,C.b)}var G=new Ep;G.setAttribute("position",new Wp(c,3)),G.setAttribute("color",new Wp(u,3));var w=new Jv({vertexColors:!0,toneMapped:!1});return(e=t.call(this,G,w)).type="PolarGridHelper",e}return Xe(n,[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(aA),Cw=new Ph,mw=new Ph,vw=new Ph,Aw=function(e){kc(n,e);var t=Vc(n);function n(e,i,r){var a;ka(this,n),(a=t.call(this)).light=e,a.matrix=e.matrixWorld,a.matrixAutoUpdate=!1,a.color=r,a.type="DirectionalLightHelper",void 0===i&&(i=1);var o=new Ep;o.setAttribute("position",new Wp([-i,i,0,i,i,0,i,-i,0,-i,-i,0,-i,i,0],3));var s=new Jv({fog:!1,toneMapped:!1});return a.lightPlane=new nA(o,s),a.add(a.lightPlane),(o=new Ep).setAttribute("position",new Wp([0,0,0,0,0,1],3)),a.targetLine=new nA(o,s),a.add(a.targetLine),a.update(),a}return Xe(n,[{key:"dispose",value:function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}},{key:"update",value:function(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),Cw.setFromMatrixPosition(this.light.matrixWorld),mw.setFromMatrixPosition(this.light.target.matrixWorld),vw.subVectors(mw,Cw),this.lightPlane.lookAt(mw),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(mw),this.targetLine.scale.z=vw.length()}}]),n}(Of),bw=new Ph,yw=new dI,Gw=function(e){kc(n,e);var t=Vc(n);function n(e){var i;ka(this,n);var r=new Ep,a=new Jv({color:16777215,vertexColors:!0,toneMapped:!1}),o=[],s=[],l={};function c(e,t){u(e),u(t)}function u(e){o.push(0,0,0),s.push(0,0,0),void 0===l[e]&&(l[e]=[]),l[e].push(o.length/3-1)}c("n1","n2"),c("n2","n4"),c("n4","n3"),c("n3","n1"),c("f1","f2"),c("f2","f4"),c("f4","f3"),c("f3","f1"),c("n1","f1"),c("n2","f2"),c("n3","f3"),c("n4","f4"),c("p","n1"),c("p","n2"),c("p","n3"),c("p","n4"),c("u1","u2"),c("u2","u3"),c("u3","u1"),c("c","t"),c("p","c"),c("cn1","cn2"),c("cn3","cn4"),c("cf1","cf2"),c("cf3","cf4"),r.setAttribute("position",new Wp(o,3)),r.setAttribute("color",new Wp(s,3)),(i=t.call(this,r,a)).type="CameraHelper",i.camera=e,i.camera.updateProjectionMatrix&&i.camera.updateProjectionMatrix(),i.matrix=e.matrixWorld,i.matrixAutoUpdate=!1,i.pointMap=l,i.update();var g=new dp(16755200),d=new dp(16711680),h=new dp(43775),f=new dp(16777215),p=new dp(3355443);return i.setColors(g,d,h,f,p),i}return Xe(n,[{key:"setColors",value:function(e,t,n,i,r){var a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,n.r,n.g,n.b),a.setXYZ(33,n.r,n.g,n.b),a.setXYZ(34,n.r,n.g,n.b),a.setXYZ(35,n.r,n.g,n.b),a.setXYZ(36,n.r,n.g,n.b),a.setXYZ(37,n.r,n.g,n.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,r.r,r.g,r.b),a.setXYZ(41,r.r,r.g,r.b),a.setXYZ(42,r.r,r.g,r.b),a.setXYZ(43,r.r,r.g,r.b),a.setXYZ(44,r.r,r.g,r.b),a.setXYZ(45,r.r,r.g,r.b),a.setXYZ(46,r.r,r.g,r.b),a.setXYZ(47,r.r,r.g,r.b),a.setXYZ(48,r.r,r.g,r.b),a.setXYZ(49,r.r,r.g,r.b),a.needsUpdate=!0}},{key:"update",value:function(){var e=this.geometry,t=this.pointMap;yw.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),ww("c",t,e,yw,0,0,-1),ww("t",t,e,yw,0,0,1),ww("n1",t,e,yw,-1,-1,-1),ww("n2",t,e,yw,1,-1,-1),ww("n3",t,e,yw,-1,1,-1),ww("n4",t,e,yw,1,1,-1),ww("f1",t,e,yw,-1,-1,1),ww("f2",t,e,yw,1,-1,1),ww("f3",t,e,yw,-1,1,1),ww("f4",t,e,yw,1,1,1),ww("u1",t,e,yw,.7,1.1,-1),ww("u2",t,e,yw,-.7,1.1,-1),ww("u3",t,e,yw,0,2,-1),ww("cf1",t,e,yw,-1,0,1),ww("cf2",t,e,yw,1,0,1),ww("cf3",t,e,yw,0,-1,1),ww("cf4",t,e,yw,0,1,1),ww("cn1",t,e,yw,-1,0,-1),ww("cn2",t,e,yw,1,0,-1),ww("cn3",t,e,yw,0,-1,-1),ww("cn4",t,e,yw,0,1,-1),e.getAttribute("position").needsUpdate=!0}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(aA);function ww(e,t,n,i,r,a,o){bw.set(r,a,o).unproject(i);var s=t[e];if(void 0!==s)for(var l=n.getAttribute("position"),c=0,u=s.length;c<u;c++)l.setXYZ(s[c],bw.x,bw.y,bw.z)}var Bw,xw,Sw=new Uh,Zw=function(e){kc(n,e);var t=Vc(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;ka(this,n);var a=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),o=new Float32Array(24),s=new Ep;return s.setIndex(new yp(a,1)),s.setAttribute("position",new yp(o,3)),(i=t.call(this,s,new Jv({color:r,toneMapped:!1}))).object=e,i.type="BoxHelper",i.matrixAutoUpdate=!1,i.update(),i}return Xe(n,[{key:"update",value:function(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&Sw.setFromObject(this.object),!Sw.isEmpty()){var t=Sw.min,n=Sw.max,i=this.geometry.attributes.position,r=i.array;r[0]=n.x,r[1]=n.y,r[2]=n.z,r[3]=t.x,r[4]=n.y,r[5]=n.z,r[6]=t.x,r[7]=t.y,r[8]=n.z,r[9]=n.x,r[10]=t.y,r[11]=n.z,r[12]=n.x,r[13]=n.y,r[14]=t.z,r[15]=t.x,r[16]=n.y,r[17]=t.z,r[18]=t.x,r[19]=t.y,r[20]=t.z,r[21]=n.x,r[22]=t.y,r[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}}},{key:"setFromObject",value:function(e){return this.object=e,this.update(),this}},{key:"copy",value:function(e,t){return Yc(Rc(n.prototype),"copy",this).call(this,e,t),this.object=e.object,this}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(aA),kw=function(e){kc(n,e);var t=Vc(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;ka(this,n);var a=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),o=new Ep;return o.setIndex(new yp(a,1)),o.setAttribute("position",new Wp([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),(i=t.call(this,o,new Jv({color:r,toneMapped:!1}))).box=e,i.type="Box3Helper",i.geometry.computeBoundingSphere(),i}return Xe(n,[{key:"updateMatrixWorld",value:function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),Yc(Rc(n.prototype),"updateMatrixWorld",this).call(this,e))}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(aA),Rw=function(e){kc(n,e);var t=Vc(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16776960;ka(this,n);var o=a,s=new Ep;s.setAttribute("position",new Wp([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),s.computeBoundingSphere(),(i=t.call(this,s,new Jv({color:o,toneMapped:!1}))).type="PlaneHelper",i.plane=e,i.size=r;var l=new Ep;return l.setAttribute("position",new Wp([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),l.computeBoundingSphere(),i.add(new rI(l,new fp({color:o,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1}))),i}return Xe(n,[{key:"updateMatrixWorld",value:function(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),Yc(Rc(n.prototype),"updateMatrixWorld",this).call(this,e)}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}]),n}(nA),Ww=new Ph,Mw=function(e){kc(n,e);var t=Vc(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ph(0,0,1),r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ph(0,0,0),a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16776960,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.2*a,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.2*s;return ka(this,n),(e=t.call(this)).type="ArrowHelper",void 0===Bw&&((Bw=new Ep).setAttribute("position",new Wp([0,0,0,0,1,0],3)),(xw=new _A(0,.5,1,5,1)).translate(0,-.5,0)),e.position.copy(r),e.line=new nA(Bw,new Jv({color:o,toneMapped:!1})),e.line.matrixAutoUpdate=!1,e.add(e.line),e.cone=new rI(xw,new fp({color:o,toneMapped:!1})),e.cone.matrixAutoUpdate=!1,e.add(e.cone),e.setDirection(i),e.setLength(a,s,l),e}return Xe(n,[{key:"setDirection",value:function(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{Ww.set(e.z,0,-e.x).normalize();var t=Math.acos(e.y);this.quaternion.setFromAxisAngle(Ww,t)}}},{key:"setLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2*e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.2*t;this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}},{key:"setColor",value:function(e){this.line.material.color.set(e),this.cone.material.color.set(e)}},{key:"copy",value:function(e){return Yc(Rc(n.prototype),"copy",this).call(this,e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}},{key:"dispose",value:function(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}]),n}(Of),Vw=function(e){kc(n,e);var t=Vc(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;ka(this,n);var r=[0,0,0,i,0,0,0,0,0,0,i,0,0,0,0,0,0,i],a=new Ep;a.setAttribute("position",new Wp(r,3)),a.setAttribute("color",new Wp([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var o=new Jv({vertexColors:!0,toneMapped:!1});return(e=t.call(this,a,o)).type="AxesHelper",e}return Xe(n,[{key:"setColors",value:function(e,t,n){var i=new dp,r=this.geometry.attributes.color.array;return i.set(e),i.toArray(r,0),i.toArray(r,3),i.set(t),i.toArray(r,6),i.toArray(r,9),i.set(n),i.toArray(r,12),i.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(aA),Fw=function(){function e(){ka(this,e),this.type="ShapePath",this.color=new dp,this.subPaths=[],this.currentPath=null}return Xe(e,[{key:"moveTo",value:function(e,t){return this.currentPath=new EA,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}},{key:"lineTo",value:function(e,t){return this.currentPath.lineTo(e,t),this}},{key:"quadraticCurveTo",value:function(e,t,n,i){return this.currentPath.quadraticCurveTo(e,t,n,i),this}},{key:"bezierCurveTo",value:function(e,t,n,i,r,a){return this.currentPath.bezierCurveTo(e,t,n,i,r,a),this}},{key:"splineThru",value:function(e){return this.currentPath.splineThru(e),this}},{key:"toShapes",value:function(e){function t(e,t){for(var n=t.length,i=!1,r=n-1,a=0;a<n;r=a++){var o=t[r],s=t[a],l=s.x-o.x,c=s.y-o.y;if(Math.abs(c)>Number.EPSILON){if(c<0&&(o=t[a],l=-l,s=t[r],c=-c),e.y<o.y||e.y>s.y)continue;if(e.y===o.y){if(e.x===o.x)return!0}else{var u=c*(e.x-o.x)-l*(e.y-o.y);if(0===u)return!0;if(u<0)continue;i=!i}}else{if(e.y!==o.y)continue;if(s.x<=e.x&&e.x<=o.x||o.x<=e.x&&e.x<=s.x)return!0}}return i}var n,i,r,a=Bb.isClockWise,o=this.subPaths;if(0===o.length)return[];var s=[];if(1===o.length)return i=o[0],(r=new $A).curves=i.curves,s.push(r),s;var l=!a(o[0].getPoints());l=e?!l:l;var c,u,g=[],d=[],h=[],f=0;d[f]=void 0,h[f]=[];for(var p=0,I=o.length;p<I;p++)n=a(c=(i=o[p]).getPoints()),(n=e?!n:n)?(!l&&d[f]&&f++,d[f]={s:new $A,p:c},d[f].s.curves=i.curves,l&&f++,h[f]=[]):h[f].push({h:i,p:c[0]});if(!d[0])return function(e){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n],a=new $A;a.curves=r.curves,t.push(a)}return t}(o);if(d.length>1){for(var C=!1,m=0,v=0,A=d.length;v<A;v++)g[v]=[];for(var b=0,y=d.length;b<y;b++)for(var G=h[b],w=0;w<G.length;w++){for(var B=G[w],x=!0,S=0;S<d.length;S++)t(B.p,d[S].p)&&(b!==S&&m++,x?(x=!1,g[S].push(B)):C=!0);x&&g[b].push(B)}m>0&&!1===C&&(h=g)}for(var Z=0,k=d.length;Z<k;Z++){r=d[Z].s,s.push(r);for(var R=0,W=(u=h[Z]).length;R<W;R++)r.holes.push(u[R].h)}return s}}]),e}(),Nw=function(e){kc(n,e);var t=Vc(n);function n(e,i,r,a,o,s){return ka(this,n),console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),t.call(this,e,i,r,a,o,s)}return Xe(n)}(oI),Hw=function(e){kc(n,e);var t=Vc(n);function n(e,i,r,a){return ka(this,n),console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),t.call(this,e,i,r,a)}return Xe(n)}(LA),Tw=function(e){kc(n,e);var t=Vc(n);function n(e,i,r,a){return ka(this,n),console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),t.call(this,e,i,r,a)}return Xe(n)}(KA),Xw=function(e){kc(n,e);var t=Vc(n);function n(e,i,r,a,o,s,l){return ka(this,n),console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),t.call(this,e,i,r,a,o,s,l)}return Xe(n)}(PA),Yw=function(e){kc(n,e);var t=Vc(n);function n(e,i,r,a,o,s,l,c){return ka(this,n),console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),t.call(this,e,i,r,a,o,s,l,c)}return Xe(n)}(_A),Ew=function(e){kc(n,e);var t=Vc(n);function n(e,i){return ka(this,n),console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),t.call(this,e,i)}return Xe(n)}(OA),zw=function(e){kc(n,e);var t=Vc(n);function n(e,i){return ka(this,n),console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),t.call(this,e,i)}return Xe(n)}(Zb),Lw=function(e){kc(n,e);var t=Vc(n);function n(e,i){return ka(this,n),console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),t.call(this,e,i)}return Xe(n)}(Rb),Kw=function(e){kc(n,e);var t=Vc(n);function n(e,i,r,a){return ka(this,n),console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),t.call(this,e,i,r,a)}return Xe(n)}(zA),_w=function(e){kc(n,e);var t=Vc(n);function n(e,i){return ka(this,n),console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),t.call(this,e,i)}return Xe(n)}(Wb),Pw=function(e){kc(n,e);var t=Vc(n);function n(e,i,r,a){return ka(this,n),console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),t.call(this,e,i,r,a)}return Xe(n)}(SI),Dw=function(e){kc(n,e);var t=Vc(n);function n(e,i,r,a){return ka(this,n),console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),t.call(this,e,i,r,a)}return Xe(n)}(DA),Ow=function(e){kc(n,e);var t=Vc(n);function n(e,i,r,a,o,s){return ka(this,n),console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),t.call(this,e,i,r,a,o,s)}return Xe(n)}(Mb),Uw=function(e){kc(n,e);var t=Vc(n);function n(e,i){return ka(this,n),console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),t.call(this,e,i)}return Xe(n)}(Vb),jw=function(e){kc(n,e);var t=Vc(n);function n(e,i,r,a,o,s,l){return ka(this,n),console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),t.call(this,e,i,r,a,o,s,l)}return Xe(n)}(Fb),Jw=function(e){kc(n,e);var t=Vc(n);function n(e,i){return ka(this,n),console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),t.call(this,e,i)}return Xe(n)}(Nb),Qw=function(e){kc(n,e);var t=Vc(n);function n(e,i,r,a,o){return ka(this,n),console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),t.call(this,e,i,r,a,o)}return Xe(n)}(Hb),qw=function(e){kc(n,e);var t=Vc(n);function n(e,i,r,a,o,s){return ka(this,n),console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),t.call(this,e,i,r,a,o,s)}return Xe(n)}(Tb),$w=function(e){kc(n,e);var t=Vc(n);function n(e,i,r,a,o){return ka(this,n),console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),t.call(this,e,i,r,a,o)}return Xe(n)}(Xb);"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:zc}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=zc);var eB=n(4585);function tB(e){var t,n=new Set,i=function(e,i){var r="function"===typeof e?e(t):e;if(r!==t){var a=t;t=i?r:Object.assign({},t,r),n.forEach((function(e){return e(t,a)}))}},r=function(){return t},a={setState:i,getState:r,subscribe:function(e,i,a){return i||a?function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.is;console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");var o=i(t);function s(){var n=i(t);if(!a(o,n)){var r=o;e(o=n,r)}}return n.add(s),function(){return n.delete(s)}}(e,i,a):(n.add(e),function(){return n.delete(e)})},destroy:function(){return n.clear()}};return t=e(i,r,a),a}var nB="undefined"===typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?t.useEffect:t.useLayoutEffect;function iB(e){var n="function"===typeof e?tB(e):e,i=function(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.getState,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.is,a=c((0,t.useReducer)((function(e){return e+1}),0),2)[1],o=n.getState(),s=(0,t.useRef)(o),l=(0,t.useRef)(i),u=(0,t.useRef)(r),g=(0,t.useRef)(!1),d=(0,t.useRef)();void 0===d.current&&(d.current=i(o));var h=!1;(s.current!==o||l.current!==i||u.current!==r||g.current)&&(e=i(o),h=!r(d.current,e)),nB((function(){h&&(d.current=e),s.current=o,l.current=i,u.current=r,g.current=!1}));var f=(0,t.useRef)(o);nB((function(){var e=function(){try{var e=n.getState(),t=l.current(e);u.current(d.current,t)||(s.current=e,d.current=t,a())}catch(i){g.current=!0,a()}},t=n.subscribe(e);return n.getState()!==f.current&&e(),t}),[]);var p=h?e:d.current;return(0,t.useDebugValue)(p),p};return Object.assign(i,n),i[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");var e=[i,n];return{next:function(){var t=e.length<=0;return{value:e.shift(),done:t}}}},i}var rB=n(258),aB=n.n(rB),oB=n(5296),sB=[];function lB(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e,t){return e===t};if(e===t)return!0;if(!e||!t)return!1;var i=e.length;if(t.length!==i)return!1;for(var r=0;r<i;r++)if(!n(e[r],t[r]))return!1;return!0}function cB(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};null===t&&(t=[e]);for(var r=0,a=sB;r<a.length;r++){var o=a[r];if(lB(t,o.keys,o.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(o,"error"))throw o.error;if(Object.prototype.hasOwnProperty.call(o,"response"))return i.lifespan&&i.lifespan>0&&(o.timeout&&clearTimeout(o.timeout),o.timeout=setTimeout(o.remove,i.lifespan)),o.response;if(!n)throw o.promise}}var s,l={keys:t,equal:i.equal,remove:function(){var e=sB.indexOf(l);-1!==e&&sB.splice(e,1)},promise:(s=e,"object"===typeof s&&"function"===typeof s.then?e:e.apply(void 0,We(t))).then((function(e){l.response=e,i.lifespan&&i.lifespan>0&&(l.timeout=setTimeout(l.remove,i.lifespan))})).catch((function(e){return l.error=e}))};if(sB.push(l),!n)throw l.promise}var uB,gB,dB=function(e,t,n){return cB(e,t,!1,n)},hB=["args","attach"],fB=["args","children"],pB=["args","children"],IB=["children","key","ref"],CB=["children","key","ref"],mB=["params"],vB={};var AB=function(e){return"colorSpace"in e||"outputColorSpace"in e},bB=function(){var e;return null!=(e=vB.ColorManagement)?e:null},yB=function(e){return e&&e.isOrthographicCamera},GB="undefined"!==typeof window&&(null!=(uB=window.document)&&uB.createElement||"ReactNative"===(null==(gB=window.navigator)?void 0:gB.product))?t.useLayoutEffect:t.useEffect;function wB(e){var n=t.useRef(e);return GB((function(){n.current=e}),[e]),n}function BB(e){var t=e.set;return GB((function(){return t(new Promise((function(){return null}))),function(){return t(!1)}}),[t]),null}var xB=function(e){kc(n,e);var t=Vc(n);function n(){var e;ka(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={error:!1},e}return Xe(n,[{key:"componentDidCatch",value:function(e){this.props.set(e)}},{key:"render",value:function(){return this.state.error?null:this.props.children}}]),n}(t.Component);xB.getDerivedStateFromError=function(){return{error:!0}};var SB="__default",ZB=new Map,kB=function(e){return e&&!!e.memoized&&!!e.changes};function RB(e){var t,n="undefined"!==typeof window?null!=(t=window.devicePixelRatio)?t:2:1;return Array.isArray(e)?Math.min(Math.max(e[0],n),e[1]):e}var WB=function(e){var t;return null==(t=e.__r3f)?void 0:t.root.getState()},MB={obj:function(e){return e===Object(e)&&!MB.arr(e)&&"function"!==typeof e},fun:function(e){return"function"===typeof e},str:function(e){return"string"===typeof e},num:function(e){return"number"===typeof e},boo:function(e){return"boolean"===typeof e},und:function(e){return void 0===e},arr:function(e){return Array.isArray(e)},equ:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.arrays,r=void 0===i?"shallow":i,a=n.objects,o=void 0===a?"reference":a,s=n.strict,l=void 0===s||s;if(typeof e!==typeof t||!!e!==!!t)return!1;if(MB.str(e)||MB.num(e))return e===t;var c=MB.obj(e);if(c&&"reference"===o)return e===t;var u,g=MB.arr(e);if(g&&"reference"===r)return e===t;if((g||c)&&e===t)return!0;for(u in e)if(!(u in t))return!1;if(c&&"shallow"===r&&"shallow"===o){for(u in l?t:e)if(!MB.equ(e[u],t[u],{strict:l,objects:"reference"}))return!1}else for(u in l?t:e)if(e[u]!==t[u])return!1;if(MB.und(u)){if(g&&0===e.length&&0===t.length)return!0;if(c&&0===Object.keys(e).length&&0===Object.keys(t).length)return!0;if(e!==t)return!1}return!0}};function VB(e){var t={nodes:{},materials:{}};return e&&e.traverse((function(e){e.name&&(t.nodes[e.name]=e),e.material&&!t.materials[e.material.name]&&(t.materials[e.material.name]=e.material)})),t}function FB(e,t){var n=e;return(null!=t&&t.primitive||!n.__r3f)&&(n.__r3f=Ve({type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null},t)),e}function NB(e,t){var n=e;if(t.includes("-")){var i=t.split("-"),r=i.pop();return n=i.reduce((function(e,t){return e[t]}),e),{target:n,key:r}}return{target:n,key:t}}var HB=/-\d+$/;function TB(e,t,n){if(MB.str(n)){if(HB.test(n)){var i=NB(e,n.replace(HB,"")),r=i.target,a=i.key;Array.isArray(r[a])||(r[a]=[])}var o=NB(e,n),s=o.target,l=o.key;t.__r3f.previousAttach=s[l],s[l]=t}else t.__r3f.previousAttach=n(e,t)}function XB(e,t,n){var i,r;if(MB.str(n)){var a=NB(e,n),o=a.target,s=a.key,l=t.__r3f.previousAttach;void 0===l?delete o[s]:o[s]=l}else null==(i=t.__r3f)||null==i.previousAttach||i.previousAttach(e,t);null==(r=t.__r3f)||delete r.previousAttach}function YB(e,t){t.children,t.key,t.ref;var n,i=Fe(t,IB),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=(r.children,r.key,r.ref,Fe(r,CB)),o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=null!=(n=null==e?void 0:e.__r3f)?n:{},l=Object.entries(i),u=[];if(o)for(var g=Object.keys(a),d=0;d<g.length;d++)i.hasOwnProperty(g[d])||l.unshift([g[d],SB+"remove"]);l.forEach((function(t){var n,r=c(t,2),o=r[0],s=r[1];if((null==(n=e.__r3f)||!n.primitive||"object"!==o)&&!MB.equ(s,a[o])){if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(o))return u.push([o,s,!0,[]]);var l=[];for(var g in o.includes("-")&&(l=o.split("-")),u.push([o,s,!1,l]),i){var d=i[g];g.startsWith("".concat(o,"-"))&&u.push([g,d,!1,g.split("-")])}}}));var h=Ve({},i);return s.memoizedProps&&s.memoizedProps.args&&(h.args=s.memoizedProps.args),s.memoizedProps&&s.memoizedProps.attach&&(h.attach=s.memoizedProps.attach),{memoized:h,changes:u}}function EB(e,t){var n,i,r,a=null!=(n=e.__r3f)?n:{},o=a.root,s=null!=(i=null==o||null==o.getState?void 0:o.getState())?i:{},l=kB(t)?t:YB(e,t),u=l.memoized,g=l.changes,d=a.eventCount;e.__r3f&&(e.__r3f.memoizedProps=u);for(var h=0;h<g.length;h++){var f=c(g[h],4),p=f[0],I=f[1],C=f[2],m=f[3];if(AB(e)){var v="srgb",A="srgb-linear";"encoding"===p?(p="colorSpace",I=3001===I?v:A):"outputEncoding"===p&&(p="outputColorSpace",I=3001===I?v:A)}var b=e,y=b[p];if(m.length&&(y=m.reduce((function(e,t){return e[t]}),e),!y||!y.set)){var G=Zc(m.reverse()),w=G[0];b=G.slice(1).reverse().reduce((function(e,t){return e[t]}),e),p=w}if(I===SB+"remove")if(b.constructor){var B=ZB.get(b.constructor);B||(B=new b.constructor,ZB.set(b.constructor,B)),I=B[p]}else I=0;if(C)I?a.handlers[p]=I:delete a.handlers[p],a.eventCount=Object.keys(a.handlers).length;else if(y&&y.set&&(y.copy||y instanceof Vf)){var x;if(Array.isArray(I))y.fromArray?y.fromArray(I):(x=y).set.apply(x,We(I));else if(y.copy&&I&&I.constructor&&y.constructor===I.constructor)y.copy(I);else if(void 0!==I){var S=y instanceof dp;!S&&y.setScalar?y.setScalar(I):y instanceof Vf&&I instanceof Vf?y.mask=I.mask:y.set(I),bB()||s.linear||!S||y.convertSRGBToLinear()}}else if(b[p]=I,b[p]instanceof Hh&&b[p].format===mg&&b[p].type===og){var Z=b[p];AB(Z)&&AB(s.gl)?Z.colorSpace=s.gl.outputColorSpace:Z.encoding=s.gl.outputEncoding}zB(e)}if(a.parent&&s.internal&&e.raycast&&d!==a.eventCount){var k=s.internal.interaction.indexOf(e);k>-1&&s.internal.interaction.splice(k,1),a.eventCount&&s.internal.interaction.push(e)}return!(1===g.length&&"onUpdate"===g[0][0])&&g.length&&null!=(r=e.__r3f)&&r.parent&&LB(e),e}function zB(e){var t,n,i=null==(t=e.__r3f)||null==(n=t.root)||null==n.getState?void 0:n.getState();i&&0===i.internal.frames&&i.invalidate()}function LB(e){null==e.onUpdate||e.onUpdate(e)}function KB(e,t){e.manual||(yB(e)?(e.left=t.width/-2,e.right=t.width/2,e.top=t.height/2,e.bottom=t.height/-2):e.aspect=t.width/t.height,e.updateProjectionMatrix(),e.updateMatrixWorld())}function _B(e){return(e.eventObject||e.object).uuid+"/"+e.index+e.instanceId}function PB(e,t,n,i){var r=n.get(t);r&&(n.delete(t),0===n.size&&(e.delete(i),r.target.releasePointerCapture(i)))}function DB(e){function t(e){return e.filter((function(e){return["Move","Over","Enter","Out","Leave"].some((function(t){var n;return null==(n=e.__r3f)?void 0:n.handlers["onPointer"+t]}))}))}function n(t){var n,i=e.getState().internal,r=Fc(i.hovered.values());try{var a=function(){var e=n.value;if(!t.length||!t.find((function(t){return t.object===e.object&&t.index===e.index&&t.instanceId===e.instanceId}))){var r=e.eventObject.__r3f,a=null==r?void 0:r.handlers;if(i.hovered.delete(_B(e)),null!=r&&r.eventCount){var o=Ve(Ve({},e),{},{intersections:t});null==a.onPointerOut||a.onPointerOut(o),null==a.onPointerLeave||a.onPointerLeave(o)}}};for(r.s();!(n=r.n()).done;)a()}catch(o){r.e(o)}finally{r.f()}}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n].__r3f;null==i||null==i.handlers.onPointerMissed||i.handlers.onPointerMissed(e)}}return{handlePointer:function(r){switch(r){case"onPointerLeave":case"onPointerCancel":return function(){return n([])};case"onLostPointerCapture":return function(t){var i=e.getState().internal;"pointerId"in t&&i.capturedMap.has(t.pointerId)&&requestAnimationFrame((function(){i.capturedMap.has(t.pointerId)&&(i.capturedMap.delete(t.pointerId),n([]))}))}}return function(a){var o=e.getState(),s=o.onPointerMissed,l=o.internal;l.lastEvent.current=a;var c="onPointerMove"===r,u="onClick"===r||"onContextMenu"===r||"onDoubleClick"===r,g=function(t,n){for(var i=e.getState(),r=new Set,a=[],o=n?n(i.internal.interaction):i.internal.interaction,s=0;s<o.length;s++){var l=WB(o[s]);l&&(l.raycaster.camera=void 0)}i.previousRoot||null==i.events.compute||i.events.compute(t,i);var c=o.flatMap((function(e){var n,i=WB(e);return i&&i.events.enabled&&null!==i.raycaster.camera?(void 0===i.raycaster.camera&&(null==i.events.compute||i.events.compute(t,i,null==(n=i.previousRoot)?void 0:n.getState()),void 0===i.raycaster.camera&&(i.raycaster.camera=null)),i.raycaster.camera?i.raycaster.intersectObject(e,!0):[]):[]})).sort((function(e,t){var n=WB(e.object),i=WB(t.object);return n&&i&&i.events.priority-n.events.priority||e.distance-t.distance})).filter((function(e){var t=_B(e);return!r.has(t)&&(r.add(t),!0)}));i.events.filter&&(c=i.events.filter(c,i));var u,g=Fc(c);try{for(g.s();!(u=g.n()).done;)for(var d=u.value,h=d.object;h;){var f;null!=(f=h.__r3f)&&f.eventCount&&a.push(Ve(Ve({},d),{},{eventObject:h})),h=h.parent}}catch(m){g.e(m)}finally{g.f()}if("pointerId"in t&&i.internal.capturedMap.has(t.pointerId)){var p,I=Fc(i.internal.capturedMap.get(t.pointerId).values());try{for(I.s();!(p=I.n()).done;){var C=p.value;r.has(_B(C.intersection))||a.push(C.intersection)}}catch(m){I.e(m)}finally{I.f()}}return a}(a,c?t:void 0),d=u?function(t){var n=e.getState().internal,i=t.offsetX-n.initialClick[0],r=t.offsetY-n.initialClick[1];return Math.round(Math.sqrt(i*i+r*r))}(a):0;"onPointerDown"===r&&(l.initialClick=[a.offsetX,a.offsetY],l.initialHits=g.map((function(e){return e.eventObject}))),u&&!g.length&&d<=2&&(i(a,l.interaction),s&&s(a)),c&&n(g),function(t,i,r,a){var o=e.getState();if(t.length){var s,l={stopped:!1},c=Fc(t);try{var u=function(){var e=s.value,c=WB(e.object)||o,u=c.raycaster,g=c.pointer,d=c.camera,h=c.internal,f=new Ph(g.x,g.y,0).unproject(d),p=function(t){var n,i;return null!=(n=null==(i=h.capturedMap.get(t))?void 0:i.has(e.eventObject))&&n},I=function(t){var n={intersection:e,target:i.target};h.capturedMap.has(t)?h.capturedMap.get(t).set(e.eventObject,n):h.capturedMap.set(t,new Map([[e.eventObject,n]])),i.target.setPointerCapture(t)},C=function(t){var n=h.capturedMap.get(t);n&&PB(h.capturedMap,e.eventObject,n,t)},m={};for(var v in i){var A=i[v];"function"!==typeof A&&(m[v]=A)}var b=Ve(Ve(Ve({},e),m),{},{pointer:g,intersections:t,stopped:l.stopped,delta:r,unprojectedPoint:f,ray:u.ray,camera:d,stopPropagation:function(){var r="pointerId"in i&&h.capturedMap.get(i.pointerId);if((!r||r.has(e.eventObject))&&(b.stopped=l.stopped=!0,h.hovered.size&&Array.from(h.hovered.values()).find((function(t){return t.eventObject===e.eventObject})))){var a=t.slice(0,t.indexOf(e));n([].concat(We(a),[e]))}},target:{hasPointerCapture:p,setPointerCapture:I,releasePointerCapture:C},currentTarget:{hasPointerCapture:p,setPointerCapture:I,releasePointerCapture:C},nativeEvent:i});if(a(b),!0===l.stopped)return"break"};for(c.s();!(s=c.n()).done&&"break"!==u(););}catch(g){c.e(g)}finally{c.f()}}}(g,a,d,(function(e){var t=e.eventObject,n=t.__r3f,o=null==n?void 0:n.handlers;if(null!=n&&n.eventCount)if(c){if(o.onPointerOver||o.onPointerEnter||o.onPointerOut||o.onPointerLeave){var s=_B(e),g=l.hovered.get(s);g?g.stopped&&e.stopPropagation():(l.hovered.set(s,e),null==o.onPointerOver||o.onPointerOver(e),null==o.onPointerEnter||o.onPointerEnter(e))}null==o.onPointerMove||o.onPointerMove(e)}else{var d=o[r];d?u&&!l.initialHits.includes(t)||(i(a,l.interaction.filter((function(e){return!l.initialHits.includes(e)}))),d(e)):u&&l.initialHits.includes(t)&&i(a,l.interaction.filter((function(e){return!l.initialHits.includes(e)})))}}))}}}}var OB,UB=function(e){return!(null==e||!e.render)},jB=t.createContext(null),JB=function(e,n){var i=iB((function(i,r){var a=new Ph,o=new Ph,s=new Ph;function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r().camera,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r().size,i=n.width,l=n.height,c=n.top,u=n.left,g=i/l;t instanceof Ph?s.copy(t):s.set.apply(s,We(t));var d=e.getWorldPosition(a).distanceTo(s);if(yB(e))return{width:i/e.zoom,height:l/e.zoom,top:c,left:u,factor:1,distance:d,aspect:g};var h=e.fov*Math.PI/180,f=2*Math.tan(h/2)*d,p=f*(i/l);return{width:p,height:f,top:c,left:u,factor:i/p,distance:d,aspect:g}}var c=void 0,u=function(e){return i((function(t){return{performance:Ve(Ve({},t.performance),{},{current:e})}}))},g=new Ch,d={set:i,get:r,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return e(r(),t)},advance:function(e,t){return n(e,t,r())},legacy:!1,linear:!1,flat:!1,controls:null,clock:new pG,pointer:g,mouse:g,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:function(){var e=r();c&&clearTimeout(c),e.performance.current!==e.performance.min&&u(e.performance.min),c=setTimeout((function(){return u(r().performance.max)}),e.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:l},setEvents:function(e){return i((function(t){return Ve(Ve({},t),{},{events:Ve(Ve({},t.events),e)})}))},setSize:function(e,t,n,a,s){var c=r().camera,u={width:e,height:t,top:a||0,left:s||0,updateStyle:n};i((function(e){return{size:u,viewport:Ve(Ve({},e.viewport),l(c,o,u))}}))},setDpr:function(e){return i((function(t){var n=RB(e);return{viewport:Ve(Ve({},t.viewport),{},{dpr:n,initialDpr:t.viewport.initialDpr||n})}}))},setFrameloop:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"always",t=r().clock;t.stop(),t.elapsedTime=0,"never"!==e&&(t.start(),t.elapsedTime=0),i((function(){return{frameloop:e}}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:t.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:function(e,t,n){var i=r().internal;return i.priority=i.priority+(t>0?1:0),i.subscribers.push({ref:e,priority:t,store:n}),i.subscribers=i.subscribers.sort((function(e,t){return e.priority-t.priority})),function(){var n=r().internal;null!=n&&n.subscribers&&(n.priority=n.priority-(t>0?1:0),n.subscribers=n.subscribers.filter((function(t){return t.ref!==e})))}}}};return d})),r=i.getState(),a=r.size,o=r.viewport.dpr,s=r.camera;return i.subscribe((function(){var e=i.getState(),t=e.camera,n=e.size,r=e.viewport,l=e.gl,c=e.set;if(n!==a||r.dpr!==o){var u;a=n,o=r.dpr,KB(t,n),l.setPixelRatio(r.dpr);var g=null!=(u=n.updateStyle)?u:"undefined"!==typeof HTMLCanvasElement&&l.domElement instanceof HTMLCanvasElement;l.setSize(n.width,n.height,g)}t!==s&&(s=t,c((function(e){return{viewport:Ve(Ve({},e.viewport),e.viewport.getCurrentViewport(t))}})))})),i.subscribe((function(t){return e(t)})),i};var QB,qB,$B=new Set,ex=new Set,tx=new Set;function nx(e,t){if(e.size){var n,i=Fc(e.values());try{for(i.s();!(n=i.n()).done;){(0,n.value.callback)(t)}}catch(r){i.e(r)}finally{i.f()}}}function ix(e,t){switch(e){case"before":return nx($B,t);case"after":return nx(ex,t);case"tail":return nx(tx,t)}}function rx(e,t,n){var i=t.clock.getDelta();for("never"===t.frameloop&&"number"===typeof e&&(i=e-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=e),QB=t.internal.subscribers,OB=0;OB<QB.length;OB++)(qB=QB[OB]).ref.current(qB.store.getState(),i,n);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),"always"===t.frameloop?1:t.internal.frames}function ax(){var e=t.useContext(jB);if(!e)throw new Error("R3F: Hooks can only be used within the Canvas component!");return e}function ox(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e},t=arguments.length>1?arguments[1]:void 0;return ax()(e,t)}function sx(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=ax(),i=n.getState().internal.subscribe,r=wB(e);return GB((function(){return i(r,t,n)}),[t,i,n]),null}function lx(e,t){return function(n){var i=new n;e&&e(i);for(var r=arguments.length,a=new Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];return Promise.all(a.map((function(e){return new Promise((function(n,r){return i.load(e,(function(e){e.scene&&Object.assign(e,VB(e.scene)),n(e)}),t,(function(t){return r(new Error("Could not load ".concat(e,": ").concat(t.message,")")))}))}))})))}}function cx(e,t,n,i){var r=Array.isArray(t)?t:[t],a=dB(lx(n,i),[e].concat(We(r)),{equal:MB.equ});return Array.isArray(t)?a:a[0]}cx.preload=function(e,t,n){var i=Array.isArray(t)?t:[t];return function(e,t,n){cB(e,t,!0,n)}(lx(n),[e].concat(We(i)))},cx.clear=function(e,t){var n=Array.isArray(t)?t:[t];return function(e){if(void 0===e||0===e.length)sB.splice(0,sB.length);else{var t=sB.find((function(t){return lB(e,t.keys,t.equal)}));t&&t.remove()}}([e].concat(We(n)))};var ux=new Map,gx=function(e){var t,n,i,r=!1;function a(o){n=requestAnimationFrame(a),r=!0,t=0,ix("before",o);var s,l=Fc(e.values());try{for(l.s();!(s=l.n()).done;){var c,u=s.value;!(i=u.store.getState()).internal.active||!("always"===i.frameloop||i.internal.frames>0)||null!=(c=i.gl.xr)&&c.isPresenting||(t+=rx(o,i))}}catch(g){l.e(g)}finally{l.f()}if(ix("after",o),0===t)return ix("tail",o),r=!1,cancelAnimationFrame(n)}return{loop:a,invalidate:function t(n){var i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!n)return e.forEach((function(e){return t(e.store.getState())}),o);null!=(i=n.gl.xr)&&i.isPresenting||!n.internal.active||"never"===n.frameloop||(n.internal.frames=Math.min(60,n.internal.frames+o),r||(r=!0,requestAnimationFrame(a)))},advance:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(n&&ix("before",t),i)rx(t,i,r);else{var a,o=Fc(e.values());try{for(o.s();!(a=o.n()).done;){rx(t,a.value.store.getState())}}catch(s){o.e(s)}finally{o.f()}}n&&ix("after",t)}}}(ux),dx=gx.invalidate,hx=gx.advance,fx=function(e,t){function n(e,t,n){var i,r=t.args,a=void 0===r?[]:r,o=t.attach,s=Fe(t,hB),l="".concat(e[0].toUpperCase()).concat(e.slice(1));if("primitive"===e){if(void 0===s.object)throw new Error("R3F: Primitives without 'object' are invalid!");i=FB(s.object,{type:e,root:n,attach:o,primitive:!0})}else{var c=vB[l];if(!c)throw new Error("R3F: ".concat(l," is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively"));if(!Array.isArray(a))throw new Error("R3F: The args prop must be an array!");i=FB(Nc(c,We(a)),{type:e,root:n,attach:o,memoizedProps:{args:a}})}return void 0===i.__r3f.attach&&(i instanceof Ep?i.__r3f.attach="geometry":i instanceof sp&&(i.__r3f.attach="material")),"inject"!==l&&EB(i,s),i}function i(e,t){var n,i,r=!1;t&&(null!=(n=t.__r3f)&&n.attach?TB(e,t,t.__r3f.attach):t.isObject3D&&e.isObject3D&&(e.add(t),r=!0),r||null==(i=e.__r3f)||i.objects.push(t),t.__r3f||FB(t,{}),t.__r3f.parent=e,LB(t),zB(t))}function r(e,t,n){var i=!1;if(t){var r,a;if(null!=(r=t.__r3f)&&r.attach)TB(e,t,t.__r3f.attach);else if(t.isObject3D&&e.isObject3D){t.parent=e,t.dispatchEvent({type:"added"});var o=e.children.filter((function(e){return e!==t})),s=o.indexOf(n);e.children=[].concat(We(o.slice(0,s)),[t],We(o.slice(s))),i=!0}i||null==(a=e.__r3f)||a.objects.push(t),t.__r3f||FB(t,{}),t.__r3f.parent=e,LB(t),zB(t)}}function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e&&We(e).forEach((function(e){return o(t,e,n)}))}function o(e,t,n){if(t){var i,r,o;if(t.__r3f&&(t.__r3f.parent=null),null!=(i=e.__r3f)&&i.objects&&(e.__r3f.objects=e.__r3f.objects.filter((function(e){return e!==t}))),null!=(r=t.__r3f)&&r.attach)XB(e,t,t.__r3f.attach);else if(t.isObject3D&&e.isObject3D){var s;e.remove(t),null!=(s=t.__r3f)&&s.root&&function(e,t){var n=e.getState(),i=n.internal;i.interaction=i.interaction.filter((function(e){return e!==t})),i.initialHits=i.initialHits.filter((function(e){return e!==t})),i.hovered.forEach((function(e,n){e.eventObject!==t&&e.object!==t||i.hovered.delete(n)})),i.capturedMap.forEach((function(e,n){PB(i.capturedMap,t,e,n)}))}(t.__r3f.root,t)}var l,c=null==(o=t.__r3f)?void 0:o.primitive,u=void 0===n?null!==t.dispose&&!c:n;if(!c)a(null==(l=t.__r3f)?void 0:l.objects,t,u),a(t.children,t,u);delete t.__r3f,u&&t.dispose&&"Scene"!==t.type&&(0,oB.unstable_scheduleCallback)(oB.unstable_IdlePriority,(function(){try{t.dispose()}catch(e){}})),zB(e)}}var s=function(){return console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.")},l=aB()({createInstance:n,removeChild:o,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:function(e,t){if(t){var n=e.getState().scene;n.__r3f&&(n.__r3f.root=e,i(n,t))}},removeChildFromContainer:function(e,t){t&&o(e.getState().scene,t)},insertInContainerBefore:function(e,t,n){if(t&&n){var i=e.getState().scene;i.__r3f&&r(i,t,n)}},getRootHostContext:function(){return null},getChildHostContext:function(e){return e},finalizeInitialChildren:function(e){var t,n=null!=(t=null==e?void 0:e.__r3f)?t:{};return Boolean(n.handlers)},prepareUpdate:function(e,t,n,i){if(e.__r3f.primitive&&i.object&&i.object!==e)return[!0];var r=i.args,a=void 0===r?[]:r,o=(i.children,Fe(i,fB)),s=n.args,l=void 0===s?[]:s,c=(n.children,Fe(n,pB));if(!Array.isArray(a))throw new Error("R3F: the args prop must be an array!");if(a.some((function(e,t){return e!==l[t]})))return[!0];var u=YB(e,o,c,!0);return u.changes.length?[!1,u]:null},commitUpdate:function(e,t,r,a,s,l){var u=c(t,2),g=u[0],d=u[1];g?function(e,t,r,a){var s,l=null==(s=e.__r3f)?void 0:s.parent;if(l){var c=n(t,r,e.__r3f.root);if(e.children){var u,g=Fc(e.children);try{for(g.s();!(u=g.n()).done;){var d=u.value;d.__r3f&&i(c,d)}}catch(h){g.e(h)}finally{g.f()}e.children=e.children.filter((function(e){return!e.__r3f}))}e.__r3f.objects.forEach((function(e){return i(c,e)})),e.__r3f.objects=[],e.__r3f.autoRemovedBeforeAppend||o(l,e),c.parent&&(c.__r3f.autoRemovedBeforeAppend=!0),i(l,c),c.raycast&&c.__r3f.eventCount&&c.__r3f.root.getState().internal.interaction.push(c),[a,a.alternate].forEach((function(e){null!==e&&(e.stateNode=c,e.ref&&("function"===typeof e.ref?e.ref(c):e.ref.current=c))}))}}(e,r,s,l):EB(e,d)},commitMount:function(e,t,n,i){var r,a=null!=(r=e.__r3f)?r:{};e.raycast&&a.handlers&&a.eventCount&&e.__r3f.root.getState().internal.interaction.push(e)},getPublicInstance:function(e){return e},prepareForCommit:function(){return null},preparePortalMount:function(e){return FB(e.getState().scene)},resetAfterCommit:function(){},shouldSetTextContent:function(){return!1},clearContainer:function(){return!1},hideInstance:function(e){var t,n=null!=(t=e.__r3f)?t:{},i=n.attach,r=n.parent;i&&r&&XB(r,e,i),e.isObject3D&&(e.visible=!1),zB(e)},unhideInstance:function(e,t){var n,i=null!=(n=e.__r3f)?n:{},r=i.attach,a=i.parent;r&&a&&TB(a,e,r),(e.isObject3D&&null==t.visible||t.visible)&&(e.visible=!0),zB(e)},createTextInstance:s,hideTextInstance:s,unhideTextInstance:s,getCurrentEventPriority:function(){return t?t():eB.DefaultEventPriority},beforeActiveInstanceBlur:function(){},afterActiveInstanceBlur:function(){},detachDeletedInstance:function(){},now:"undefined"!==typeof performance&&MB.fun(performance.now)?performance.now:MB.fun(Date.now)?Date.now:function(){return 0},scheduleTimeout:MB.fun(setTimeout)?setTimeout:void 0,cancelTimeout:MB.fun(clearTimeout)?clearTimeout:void 0});return{reconciler:l,applyProps:EB}}(0,(function(){var e,t="undefined"!==typeof self&&self||"undefined"!==typeof window&&window;if(!t)return eB.DefaultEventPriority;switch(null==(e=t.event)?void 0:e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return eB.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return eB.ContinuousEventPriority;default:return eB.DefaultEventPriority}})),px=fx.reconciler,Ix=fx.applyProps,Cx={objects:"shallow",strict:!1},mx=function(e,t){var n="function"===typeof e?e(t):e;return UB(n)?n:new nv(Ve({powerPreference:"high-performance",canvas:t,antialias:!0,alpha:!0},e))};function vx(e){var n=ux.get(e),i=null==n?void 0:n.fiber,r=null==n?void 0:n.store;n&&console.warn("R3F.createRoot should only be called once!");var a,o="function"===typeof reportError?reportError:console.error,s=r||JB(dx,hx),l=i||px.createContainer(s,eB.ConcurrentRoot,null,!1,null,"",o,null);n||ux.set(e,{fiber:l,store:s});var c,u=!1;return{configure:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.gl,i=t.size,r=t.scene,o=t.events,l=t.onCreated,g=t.shadows,d=void 0!==g&&g,h=t.linear,f=void 0!==h&&h,p=t.flat,I=void 0!==p&&p,C=t.legacy,m=void 0!==C&&C,v=t.orthographic,A=void 0!==v&&v,b=t.frameloop,y=void 0===b?"always":b,G=t.dpr,w=void 0===G?[1,2]:G,B=t.performance,x=t.raycaster,S=t.camera,Z=t.onPointerMissed,k=s.getState(),R=k.gl;k.gl||k.set({gl:R=mx(n,e)});var W=k.raycaster;W||k.set({raycaster:W=new OG});var M,V=x||{},F=V.params,N=Fe(V,mB);if(MB.equ(N,W,Cx)||Ix(W,Ve({},N)),MB.equ(F,W.params,Cx)||Ix(W,{params:Ve(Ve({},W.params),F)}),!k.camera||k.camera===c&&!MB.equ(c,S,Cx)){c=S;var H=S instanceof dI,T=H?S:A?new XI(0,0,0,0,.1,1e3):new hI(75,0,.1,1e3);H||(T.position.z=5,S&&Ix(T,S),k.camera||null!=S&&S.rotation||T.lookAt(0,0,0)),k.set({camera:T})}k.scene||(r instanceof sv?M=r:(M=new sv,r&&Ix(M,r)),k.set({scene:FB(M)}));if(!k.xr){var X=function(e,t){var n=s.getState();"never"!==n.frameloop&&hx(e,!0,n,t)},Y=function(){var e=s.getState();e.gl.xr.enabled=e.gl.xr.isPresenting,e.gl.xr.setAnimationLoop(e.gl.xr.isPresenting?X:null),e.gl.xr.isPresenting||dx(e)},E={connect:function(){var e=s.getState().gl;e.xr.addEventListener("sessionstart",Y),e.xr.addEventListener("sessionend",Y)},disconnect:function(){var e=s.getState().gl;e.xr.removeEventListener("sessionstart",Y),e.xr.removeEventListener("sessionend",Y)}};R.xr&&E.connect(),k.set({xr:E})}if(R.shadowMap){var z=R.shadowMap.enabled,L=R.shadowMap.type;if(R.shadowMap.enabled=!!d,MB.boo(d))R.shadowMap.type=Jc;else if(MB.str(d)){var K,_={basic:Uc,percentage:jc,soft:Jc,variance:Qc};R.shadowMap.type=null!=(K=_[d])?K:Jc}else MB.obj(d)&&Object.assign(R.shadowMap,d);z===R.shadowMap.enabled&&L===R.shadowMap.type||(R.shadowMap.needsUpdate=!0)}var P=bB();P&&("enabled"in P?P.enabled=!m:"legacyMode"in P&&(P.legacyMode=m));Ix(R,{outputEncoding:f?3e3:3001,toneMapping:I?Nu:Yu}),k.legacy!==m&&k.set((function(){return{legacy:m}})),k.linear!==f&&k.set((function(){return{linear:f}})),k.flat!==I&&k.set((function(){return{flat:I}})),!n||MB.fun(n)||UB(n)||MB.equ(n,R,Cx)||Ix(R,n),o&&!k.events.handlers&&k.set({events:o(s)});var D=function(e,t){if(t)return t;if("undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement&&e.parentElement){var n=e.parentElement.getBoundingClientRect();return{width:n.width,height:n.height,top:n.top,left:n.left}}return"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?{width:e.width,height:e.height,top:0,left:0}:{width:0,height:0,top:0,left:0}}(e,i);return MB.equ(D,k.size,Cx)||k.setSize(D.width,D.height,D.updateStyle,D.top,D.left),w&&k.viewport.dpr!==RB(w)&&k.setDpr(w),k.frameloop!==y&&k.setFrameloop(y),k.onPointerMissed||k.set({onPointerMissed:Z}),B&&!MB.equ(B,k.performance,Cx)&&k.set((function(e){return{performance:Ve(Ve({},e.performance),B)}})),a=l,u=!0,this},render:function(n){return u||this.configure(),px.updateContainer(t.createElement(Ax,{store:s,children:n,onCreated:a,rootElement:e}),l,null,(function(){})),s},unmount:function(){bx(e)}}}function Ax(e){var n=e.store,i=e.children,r=e.onCreated,a=e.rootElement;return GB((function(){var e=n.getState();e.set((function(e){return{internal:Ve(Ve({},e.internal),{},{active:!0})}})),r&&r(e),n.getState().events.connected||null==e.events.connect||e.events.connect(a)}),[]),t.createElement(jB.Provider,{value:n},i)}function bx(e,t){var n=ux.get(e),i=null==n?void 0:n.fiber;if(i){var r=null==n?void 0:n.store.getState();r&&(r.internal.active=!1),px.updateContainer(null,i,null,(function(){r&&setTimeout((function(){try{var n,i,a,o;null==r.events.disconnect||r.events.disconnect(),null==(n=r.gl)||null==(i=n.renderLists)||null==i.dispose||i.dispose(),null==(a=r.gl)||null==a.forceContextLoss||a.forceContextLoss(),null!=(o=r.gl)&&o.xr&&r.xr.disconnect(),function(e){for(var t in e.dispose&&"Scene"!==e.type&&e.dispose(),e)null==t.dispose||t.dispose(),delete e[t]}(r),ux.delete(e),t&&t(e)}catch(s){}}),500)}))}}px.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:t.version});t.unstable_act;var yx=n(7494),Gx=n.n(yx);function wx(e){var n=void 0===e?{debounce:0,scroll:!1,offsetSize:!1}:e,i=n.debounce,r=n.scroll,a=n.polyfill,o=n.offsetSize,s=a||("undefined"===typeof window?Xe((function e(){ka(this,e)})):window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");var l=c((0,t.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),2),u=l[0],g=l[1],d=(0,t.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:u}),h=i?"number"===typeof i?i:i.scroll:null,f=i?"number"===typeof i?i:i.resize:null,p=(0,t.useRef)(!1);(0,t.useEffect)((function(){return p.current=!0,function(){p.current=!1}}));var I=(0,t.useMemo)((function(){var e=function(){if(d.current.element){var e=d.current.element.getBoundingClientRect(),t={left:e.left,top:e.top,width:e.width,height:e.height,bottom:e.bottom,right:e.right,x:e.x,y:e.y};d.current.element instanceof HTMLElement&&o&&(t.height=d.current.element.offsetHeight,t.width=d.current.element.offsetWidth),Object.freeze(t),p.current&&!Sx(d.current.lastBounds,t)&&g(d.current.lastBounds=t)}};return[e,f?Gx()(e,f):e,h?Gx()(e,h):e]}),[g,o,h,f]),C=c(I,3),m=C[0],v=C[1],A=C[2];function b(){d.current.scrollContainers&&(d.current.scrollContainers.forEach((function(e){return e.removeEventListener("scroll",A,!0)})),d.current.scrollContainers=null),d.current.resizeObserver&&(d.current.resizeObserver.disconnect(),d.current.resizeObserver=null)}function y(){d.current.element&&(d.current.resizeObserver=new s(A),d.current.resizeObserver.observe(d.current.element),r&&d.current.scrollContainers&&d.current.scrollContainers.forEach((function(e){return e.addEventListener("scroll",A,{capture:!0,passive:!0})})))}var G;return function(e,n){(0,t.useEffect)((function(){if(n){var t=e;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),function(){window.removeEventListener("scroll",t,!0)}}}),[e,n])}(A,Boolean(r)),G=v,(0,t.useEffect)((function(){var e=G;return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[G]),(0,t.useEffect)((function(){b(),y()}),[r,A,v]),(0,t.useEffect)((function(){return b}),[]),[function(e){e&&e!==d.current.element&&(b(),d.current.element=e,d.current.scrollContainers=Bx(e),y())},u,m]}function Bx(e){var t=[];if(!e||e===document.body)return t;var n=window.getComputedStyle(e);return[n.overflow,n.overflowX,n.overflowY].some((function(e){return"auto"===e||"scroll"===e}))&&t.push(e),[].concat(t,We(Bx(e.parentElement)))}var xx=["x","y","top","bottom","left","right","width","height"],Sx=function(e,t){return xx.every((function(n){return e[n]===t[n]}))},Zx=Object.defineProperty,kx=Object.defineProperties,Rx=Object.getOwnPropertyDescriptors,Wx=Object.getOwnPropertySymbols,Mx=Object.prototype.hasOwnProperty,Vx=Object.prototype.propertyIsEnumerable,Fx=function(e,t,n){return t in e?Zx(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Nx=function(e,t){for(var n in t||(t={}))Mx.call(t,n)&&Fx(e,n,t[n]);if(Wx){var i,r=Fc(Wx(t));try{for(r.s();!(i=r.n()).done;){n=i.value;Vx.call(t,n)&&Fx(e,n,t[n])}}catch(a){r.e(a)}finally{r.f()}}return e};function Hx(e,t,n){if(e){if(!0===n(e))return e;for(var i=t?e.return:e.child;i;){var r=Hx(i,t,n);if(r)return r;i=t?null:i.sibling}}}function Tx(e){try{return Object.defineProperties(e,{_currentRenderer:{get:function(){return null},set:function(){}},_currentRenderer2:{get:function(){return null},set:function(){}}})}catch(t){return e}}var Xx=Tx(t.createContext(null)),Yx=function(e){kc(i,e);var n=Vc(i);function i(){return ka(this,i),n.apply(this,arguments)}return Xe(i,[{key:"render",value:function(){return t.createElement(Xx.Provider,{value:this._reactInternals},this.props.children)}}]),i}(t.Component),Ex=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,zx=Ex.ReactCurrentOwner,Lx=Ex.ReactCurrentDispatcher;function Kx(){var e=t.useContext(Xx);if(null===e)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");var n=t.useId();return t.useMemo((function(){for(var t=0,i=[null==zx?void 0:zx.current,e,null==e?void 0:e.alternate];t<i.length;t++){var r=i[t];if(r){var a=Hx(r,!1,(function(e){for(var t=e.memoizedState;t;){if(t.memoizedState===n)return!0;t=t.next}}));if(a)return a}}}),[e,n])}function _x(){var e=function(){var e,n,i=Kx(),r=c(t.useState((function(){return new Map})),1)[0];r.clear();for(var a=i;a;){var o=null==(e=a.type)?void 0:e._context;o&&o!==Xx&&!r.has(o)&&r.set(o,null==(n=null==Lx?void 0:Lx.current)?void 0:n.readContext(Tx(o))),a=a.return}return r}();return t.useMemo((function(){return Array.from(e.keys()).reduce((function(n,i){return function(r){return t.createElement(n,null,t.createElement(i.Provider,function(e,t){return kx(e,Rx(t))}(Nx({},r),{value:e.get(i)})))}}),(function(e){return t.createElement(Yx,Nx({},e))}))}),[e])}var Px=["children","fallback","resize","style","gl","events","eventSource","eventPrefix","shadows","linear","flat","legacy","orthographic","frameloop","dpr","performance","raycaster","camera","onPointerMissed","onCreated"],Dx={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Ox(e){var t=DB(e).handlePointer;return{priority:1,enabled:!0,compute:function(e,t,n){t.pointer.set(e.offsetX/t.size.width*2-1,-e.offsetY/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)},connected:void 0,handlers:Object.keys(Dx).reduce((function(e,n){return Ve(Ve({},e),{},ke({},n,t(n)))}),{}),update:function(){var t,n=e.getState(),i=n.events,r=n.internal;null!=(t=r.lastEvent)&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:function(t){var n,i=e.getState(),r=i.set,a=i.events;null==a.disconnect||a.disconnect(),r((function(e){return{events:Ve(Ve({},e.events),{},{connected:t})}})),Object.entries(null!=(n=a.handlers)?n:[]).forEach((function(e){var n=c(e,2),i=n[0],r=n[1],a=c(Dx[i],2),o=a[0],s=a[1];t.addEventListener(o,r,{passive:s})}))},disconnect:function(){var t,n=e.getState(),i=n.set,r=n.events;r.connected&&(Object.entries(null!=(t=r.handlers)?t:[]).forEach((function(e){var t=c(e,2),n=t[0],i=t[1];if(r&&r.connected instanceof HTMLElement){var a=c(Dx[n],1)[0];r.connected.removeEventListener(a,i)}})),i((function(e){return{events:Ve(Ve({},e.events),{},{connected:void 0})}})))}}}var Ux=t.forwardRef((function(n,i){var r=n.children,a=n.fallback,o=n.resize,s=n.style,l=n.gl,u=n.events,g=void 0===u?Ox:u,d=n.eventSource,h=n.eventPrefix,f=n.shadows,p=n.linear,I=n.flat,C=n.legacy,m=n.orthographic,A=n.frameloop,b=n.dpr,y=n.performance,G=n.raycaster,w=n.camera,B=n.onPointerMissed,x=n.onCreated,S=Fe(n,Px);t.useMemo((function(){return t=e,void Object.assign(vB,t);var t}),[]);var Z=_x(),k=c(wx(Ve({scroll:!0,debounce:{scroll:50,resize:0}},o)),2),R=k[0],W=k[1],M=t.useRef(null),V=t.useRef(null);t.useImperativeHandle(i,(function(){return M.current}));var F=wB(B),N=c(t.useState(!1),2),H=N[0],T=N[1],X=c(t.useState(!1),2),Y=X[0],E=X[1];if(H)throw H;if(Y)throw Y;var z=t.useRef(null);GB((function(){var e=M.current;W.width>0&&W.height>0&&e&&(z.current||(z.current=vx(e)),z.current.configure({gl:l,events:g,shadows:f,linear:p,flat:I,legacy:C,orthographic:m,frameloop:A,dpr:b,performance:y,raycaster:G,camera:w,size:W,onPointerMissed:function(){return null==F.current?void 0:F.current.apply(F,arguments)},onCreated:function(e){var t;null==e.events.connect||e.events.connect(d?(t=d)&&t.hasOwnProperty("current")?d.current:d:V.current),h&&e.setEvents({compute:function(e,t){var n=e[h+"X"],i=e[h+"Y"];t.pointer.set(n/t.size.width*2-1,-i/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)}}),null==x||x(e)}}),z.current.render(t.createElement(Z,null,t.createElement(xB,{set:E},t.createElement(t.Suspense,{fallback:t.createElement(BB,{set:T})},r)))))})),t.useEffect((function(){var e=M.current;if(e)return function(){return bx(e)}}),[]);var L=d?"none":"auto";return t.createElement("div",v({ref:V,style:Ve({position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:L},s)},S),t.createElement("div",{ref:R,style:{width:"100%",height:"100%"}},t.createElement("canvas",{ref:M,style:{display:"block"}},a)))})),jx=t.forwardRef((function(e,n){return t.createElement(Yx,null,t.createElement(Ux,v({},e,{ref:n})))})),Jx=0,Qx=iB((function(e){return yy.onStart=function(t,n,i){e({active:!0,item:t,loaded:n,total:i,progress:(n-Jx)/(i-Jx)*100})},yy.onLoad=function(){e({active:!1})},yy.onError=function(t){return e((function(e){return{errors:[].concat(We(e.errors),[t])}}))},yy.onProgress=function(t,n,i){n===i&&(Jx=i),e({active:!0,item:t,loaded:n,total:i,progress:(n-Jx)/(i-Jx)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0}})),qx=n(1250),$x=["children","eps","style","className","prepend","center","fullscreen","portal","distanceFactor","sprite","transform","occlude","onOcclude","castShadow","receiveShadow","material","geometry","zIndexRange","calculatePosition","as","wrapperClass","pointerEvents"],eS=new Ph,tS=new Ph,nS=new Ph;function iS(e,t,n){var i=eS.setFromMatrixPosition(e.matrixWorld);i.project(t);var r=n.width/2,a=n.height/2;return[i.x*r+r,-i.y*a+a]}var rS=function(e){return Math.abs(e)<1e-10?0:e};function aS(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i="matrix3d(",r=0;16!==r;r++)i+=rS(t[r]*e.elements[r])+(15!==r?",":")");return n+i}var oS,sS=(oS=[1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1],function(e){return aS(e,oS)}),lS=function(e,t){return aS(e,function(e){return[1/e,1/e,1/e,1,-1/e,-1/e,-1/e,-1,1/e,1/e,1/e,1,1,1,1,1]}(t),"translate(-50%,-50%)")};var cS=t.forwardRef((function(e,n){var i=e.children,r=e.eps,a=void 0===r?.001:r,o=e.style,s=e.className,l=e.prepend,u=e.center,g=e.fullscreen,d=e.portal,h=e.distanceFactor,f=e.sprite,p=void 0!==f&&f,I=e.transform,C=void 0!==I&&I,m=e.occlude,A=e.onOcclude,b=e.castShadow,y=e.receiveShadow,G=e.material,w=e.geometry,B=e.zIndexRange,x=void 0===B?[16777271,0]:B,S=e.calculatePosition,Z=void 0===S?iS:S,k=e.as,R=void 0===k?"div":k,W=e.wrapperClass,M=e.pointerEvents,V=void 0===M?"auto":M,F=Fe(e,$x),N=ox(),H=N.gl,T=N.camera,X=N.scene,Y=N.size,E=N.raycaster,z=N.events,L=N.viewport,K=c(t.useState((function(){return document.createElement(R)})),1)[0],_=t.useRef(),P=t.useRef(null),D=t.useRef(0),O=t.useRef([0,0]),U=t.useRef(null),j=t.useRef(null),J=(null==d?void 0:d.current)||z.connected||H.domElement.parentNode,Q=t.useRef(null),q=t.useRef(!1),$=t.useMemo((function(){return m&&"blending"!==m||Array.isArray(m)&&m.length&&function(e){return e&&"object"===typeof e&&"current"in e}(m[0])}),[m]);t.useLayoutEffect((function(){var e=H.domElement;m&&"blending"===m?(e.style.zIndex="".concat(Math.floor(x[0]/2)),e.style.position="absolute",e.style.pointerEvents="none"):(e.style.zIndex=null,e.style.position=null,e.style.pointerEvents=null)}),[m]),t.useLayoutEffect((function(){if(P.current){var e=_.current=qx.s(K);if(X.updateMatrixWorld(),C)K.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{var t=Z(P.current,T,Y);K.style.cssText="position:absolute;top:0;left:0;transform:translate3d(".concat(t[0],"px,").concat(t[1],"px,0);transform-origin:0 0;")}return J&&(l?J.prepend(K):J.appendChild(K)),function(){J&&J.removeChild(K),e.unmount()}}}),[J,C]),t.useLayoutEffect((function(){W&&(K.className=W)}),[W]);var ee=t.useMemo((function(){return C?{position:"absolute",top:0,left:0,width:Y.width,height:Y.height,transformStyle:"preserve-3d",pointerEvents:"none"}:Ve(Ve({position:"absolute",transform:u?"translate3d(-50%,-50%,0)":"none"},g&&{top:-Y.height/2,left:-Y.width/2,width:Y.width,height:Y.height}),o)}),[o,u,g,Y,C]),te=t.useMemo((function(){return{position:"absolute",pointerEvents:V}}),[V]);t.useLayoutEffect((function(){var e,r;(q.current=!1,C)?null==(e=_.current)||e.render(t.createElement("div",{ref:U,style:ee},t.createElement("div",{ref:j,style:te},t.createElement("div",{ref:n,className:s,style:o,children:i})))):null==(r=_.current)||r.render(t.createElement("div",{ref:n,style:ee,className:s,children:i}))}));var ne=t.useRef(!0);sx((function(e){if(P.current){T.updateMatrixWorld(),P.current.updateWorldMatrix(!0,!1);var t=C?O.current:Z(P.current,T,Y);if(C||Math.abs(D.current-T.zoom)>a||Math.abs(O.current[0]-t[0])>a||Math.abs(O.current[1]-t[1])>a){var n=function(e,t){var n=eS.setFromMatrixPosition(e.matrixWorld),i=tS.setFromMatrixPosition(t.matrixWorld),r=n.sub(i),a=t.getWorldDirection(nS);return r.angleTo(a)>Math.PI/2}(P.current,T),i=!1;$&&("blending"!==m?i=[X]:Array.isArray(m)&&(i=m.map((function(e){return e.current}))));var r=ne.current;if(i){var o=function(e,t,n,i){var r=eS.setFromMatrixPosition(e.matrixWorld),a=r.clone();a.project(t),n.setFromCamera(a,t);var o=n.intersectObjects(i,!0);if(o.length){var s=o[0].distance;return r.distanceTo(n.ray.origin)<s}return!0}(P.current,T,E,i);ne.current=o&&!n}else ne.current=!n;r!==ne.current&&(A?A(!ne.current):K.style.display=ne.current?"block":"none");var s=Math.floor(x[0]/2),l=m?$?[x[0],s]:[s-1,0]:x;if(K.style.zIndex="".concat(function(e,t,n){if(t instanceof hI||t instanceof XI){var i=eS.setFromMatrixPosition(e.matrixWorld),r=tS.setFromMatrixPosition(t.matrixWorld),a=i.distanceTo(r),o=(n[1]-n[0])/(t.far-t.near),s=n[1]-o*t.far;return Math.round(o*a+s)}}(P.current,T,l)),C){var c=Y.width/2,u=Y.height/2,g=T.projectionMatrix.elements[5]*u,d=T.isOrthographicCamera,f=T.top,I=T.left,v=T.bottom,b=T.right,y=sS(T.matrixWorldInverse),G=d?"scale(".concat(g,")translate(").concat(rS(-(b+I)/2),"px,").concat(rS((f+v)/2),"px)"):"translateZ(".concat(g,"px)"),B=P.current.matrixWorld;p&&((B=T.matrixWorldInverse.clone().transpose().copyPosition(B).scale(P.current.scale)).elements[3]=B.elements[7]=B.elements[11]=0,B.elements[15]=1),K.style.width=Y.width+"px",K.style.height=Y.height+"px",K.style.perspective=d?"":"".concat(g,"px"),U.current&&j.current&&(U.current.style.transform="".concat(G).concat(y,"translate(").concat(c,"px,").concat(u,"px)"),j.current.style.transform=lS(B,1/((h||10)/400)))}else{var S=void 0===h?1:function(e,t){if(t instanceof XI)return t.zoom;if(t instanceof hI){var n=eS.setFromMatrixPosition(e.matrixWorld),i=tS.setFromMatrixPosition(t.matrixWorld),r=t.fov*Math.PI/180,a=n.distanceTo(i);return 1/(2*Math.tan(r/2)*a)}return 1}(P.current,T)*h;K.style.transform="translate3d(".concat(t[0],"px,").concat(t[1],"px,0) scale(").concat(S,")")}O.current=t,D.current=T.zoom}}if(!$&&Q.current&&!q.current)if(C){if(U.current){var k=U.current.children[0];if(null!=k&&k.clientWidth&&null!=k&&k.clientHeight){if(T.isOrthographicCamera||w)F.scale&&(Array.isArray(F.scale)?F.scale instanceof Ph?Q.current.scale.copy(F.scale.clone().divideScalar(1)):Q.current.scale.set(1/F.scale[0],1/F.scale[1],1/F.scale[2]):Q.current.scale.setScalar(1/F.scale));else{var R=(h||10)/400,W=k.clientWidth*R,M=k.clientHeight*R;Q.current.scale.set(W,M,1)}q.current=!0}}}else{var V=K.children[0];if(null!=V&&V.clientWidth&&null!=V&&V.clientHeight){var N=1/L.factor,H=V.clientWidth*N,z=V.clientHeight*N;Q.current.scale.set(H,z,1),q.current=!0}Q.current.lookAt(e.camera.position)}}));var ie=t.useMemo((function(){return{vertexShader:C?void 0:'\n          /*\n            This shader is from the THREE\'s SpriteMaterial.\n            We need to turn the backing plane into a Sprite\n            (make it always face the camera) if "transfrom" \n            is false. \n          */\n          #include <common>\n\n          void main() {\n            vec2 center = vec2(0., 1.);\n            float rotation = 0.0;\n            \n            // This is somewhat arbitrary, but it seems to work well\n            // Need to figure out how to derive this dynamically if it even matters\n            float size = 0.03;\n\n            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n            vec2 scale;\n            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\n            bool isPerspective = isPerspectiveMatrix( projectionMatrix );\n            if ( isPerspective ) scale *= - mvPosition.z;\n\n            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;\n            vec2 rotatedPosition;\n            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n            mvPosition.xy += rotatedPosition;\n\n            gl_Position = projectionMatrix * mvPosition;\n          }\n      ',fragmentShader:"\n        void main() {\n          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n        }\n      "}}),[C]);return t.createElement("group",v({},F,{ref:P}),m&&!$&&t.createElement("mesh",{castShadow:b,receiveShadow:y,ref:Q},w||t.createElement("planeGeometry",null),G||t.createElement("shaderMaterial",{side:eu,vertexShader:ie.vertexShader,fragmentShader:ie.fragmentShader})))})),uS=Object.defineProperty,gS=function(e,t,n){return function(e,t,n){t in e?uS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!==typeof t?t+"":t,n),n},dS=function(e,t){return(e%t+t)%t},hS=function(e){kc(n,e);var t=Vc(n);function n(e,i){var r;ka(this,n),r=t.call(this),gS(Ye(r),"object"),gS(Ye(r),"domElement"),gS(Ye(r),"enabled",!0),gS(Ye(r),"target",new Ph),gS(Ye(r),"minDistance",0),gS(Ye(r),"maxDistance",1/0),gS(Ye(r),"minZoom",0),gS(Ye(r),"maxZoom",1/0),gS(Ye(r),"minPolarAngle",0),gS(Ye(r),"maxPolarAngle",Math.PI),gS(Ye(r),"minAzimuthAngle",-1/0),gS(Ye(r),"maxAzimuthAngle",1/0),gS(Ye(r),"enableDamping",!1),gS(Ye(r),"dampingFactor",.05),gS(Ye(r),"enableZoom",!0),gS(Ye(r),"zoomSpeed",1),gS(Ye(r),"enableRotate",!0),gS(Ye(r),"rotateSpeed",1),gS(Ye(r),"enablePan",!0),gS(Ye(r),"panSpeed",1),gS(Ye(r),"screenSpacePanning",!0),gS(Ye(r),"keyPanSpeed",7),gS(Ye(r),"autoRotate",!1),gS(Ye(r),"autoRotateSpeed",2),gS(Ye(r),"reverseOrbit",!1),gS(Ye(r),"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),gS(Ye(r),"mouseButtons",{LEFT:Lc.ROTATE,MIDDLE:Lc.DOLLY,RIGHT:Lc.PAN}),gS(Ye(r),"touches",{ONE:Kc.ROTATE,TWO:Kc.DOLLY_PAN}),gS(Ye(r),"target0"),gS(Ye(r),"position0"),gS(Ye(r),"zoom0"),gS(Ye(r),"_domElementKeyEvents",null),gS(Ye(r),"getPolarAngle"),gS(Ye(r),"getAzimuthalAngle"),gS(Ye(r),"setPolarAngle"),gS(Ye(r),"setAzimuthalAngle"),gS(Ye(r),"getDistance"),gS(Ye(r),"listenToKeyEvents"),gS(Ye(r),"saveState"),gS(Ye(r),"reset"),gS(Ye(r),"update"),gS(Ye(r),"connect"),gS(Ye(r),"dispose"),r.object=e,r.domElement=i,r.target0=r.target.clone(),r.position0=r.object.position.clone(),r.zoom0=r.object.zoom,r.getPolarAngle=function(){return d.phi},r.getAzimuthalAngle=function(){return d.theta},r.setPolarAngle=function(e){var t=dS(e,2*Math.PI),n=d.phi;n<0&&(n+=2*Math.PI),t<0&&(t+=2*Math.PI);var i=Math.abs(t-n);2*Math.PI-i<i&&(t<n?t+=2*Math.PI:n+=2*Math.PI),h.phi=t-n,a.update()},r.setAzimuthalAngle=function(e){var t=dS(e,2*Math.PI),n=d.theta;n<0&&(n+=2*Math.PI),t<0&&(t+=2*Math.PI);var i=Math.abs(t-n);2*Math.PI-i<i&&(t<n?t+=2*Math.PI:n+=2*Math.PI),h.theta=t-n,a.update()},r.getDistance=function(){return a.object.position.distanceTo(a.target)},r.listenToKeyEvents=function(e){e.addEventListener("keydown",j),r._domElementKeyEvents=e},r.saveState=function(){a.target0.copy(a.target),a.position0.copy(a.object.position),a.zoom0=a.object.zoom},r.reset=function(){a.target.copy(a.target0),a.object.position.copy(a.position0),a.object.zoom=a.zoom0,a.object.updateProjectionMatrix(),a.dispatchEvent(o),a.update(),u=c.NONE},r.update=function(){var t=new Ph,n=(new _h).setFromUnitVectors(e.up,new Ph(0,1,0)),i=n.clone().invert(),r=new Ph,s=new _h,l=2*Math.PI;return function(){var e=a.object.position;t.copy(e).sub(a.target),t.applyQuaternion(n),d.setFromVector3(t),a.autoRotate&&u===c.NONE&&k(2*Math.PI/60/60*a.autoRotateSpeed),a.enableDamping?(d.theta+=h.theta*a.dampingFactor,d.phi+=h.phi*a.dampingFactor):(d.theta+=h.theta,d.phi+=h.phi);var C=a.minAzimuthAngle,m=a.maxAzimuthAngle;return isFinite(C)&&isFinite(m)&&(C<-Math.PI?C+=l:C>Math.PI&&(C-=l),m<-Math.PI?m+=l:m>Math.PI&&(m-=l),d.theta=C<=m?Math.max(C,Math.min(m,d.theta)):d.theta>(C+m)/2?Math.max(C,d.theta):Math.min(m,d.theta)),d.phi=Math.max(a.minPolarAngle,Math.min(a.maxPolarAngle,d.phi)),d.makeSafe(),d.radius*=f,d.radius=Math.max(a.minDistance,Math.min(a.maxDistance,d.radius)),!0===a.enableDamping?a.target.addScaledVector(p,a.dampingFactor):a.target.add(p),t.setFromSpherical(d),t.applyQuaternion(i),e.copy(a.target).add(t),a.object.lookAt(a.target),!0===a.enableDamping?(h.theta*=1-a.dampingFactor,h.phi*=1-a.dampingFactor,p.multiplyScalar(1-a.dampingFactor)):(h.set(0,0,0),p.set(0,0,0)),f=1,!!(I||r.distanceToSquared(a.object.position)>g||8*(1-s.dot(a.object.quaternion))>g)&&(a.dispatchEvent(o),r.copy(a.object.position),s.copy(a.object.quaternion),I=!1,!0)}}(),r.connect=function(e){e===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),a.domElement=e,a.domElement.style.touchAction="none",a.domElement.addEventListener("contextmenu",J),a.domElement.addEventListener("pointerdown",_),a.domElement.addEventListener("pointercancel",O),a.domElement.addEventListener("wheel",U)},r.dispose=function(){var e,t,n,i,r,o;null==(e=a.domElement)||e.removeEventListener("contextmenu",J),null==(t=a.domElement)||t.removeEventListener("pointerdown",_),null==(n=a.domElement)||n.removeEventListener("pointercancel",O),null==(i=a.domElement)||i.removeEventListener("wheel",U),null==(r=a.domElement)||r.ownerDocument.removeEventListener("pointermove",P),null==(o=a.domElement)||o.ownerDocument.removeEventListener("pointerup",D),null!==a._domElementKeyEvents&&a._domElementKeyEvents.removeEventListener("keydown",j)};var a=Ye(r),o={type:"change"},s={type:"start"},l={type:"end"},c={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},u=c.NONE,g=1e-6,d=new JG,h=new JG,f=1,p=new Ph,I=!1,C=new Ch,m=new Ch,v=new Ch,A=new Ch,b=new Ch,y=new Ch,G=new Ch,w=new Ch,B=new Ch,x=[],S={};function Z(){return Math.pow(.95,a.zoomSpeed)}function k(e){a.reverseOrbit?h.theta+=e:h.theta-=e}function R(e){a.reverseOrbit?h.phi+=e:h.phi-=e}var W=function(){var e=new Ph;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),p.add(e)}}(),M=function(){var e=new Ph;return function(t,n){!0===a.screenSpacePanning?e.setFromMatrixColumn(n,1):(e.setFromMatrixColumn(n,0),e.crossVectors(a.object.up,e)),e.multiplyScalar(t),p.add(e)}}(),V=function(){var e=new Ph;return function(t,n){var i=a.domElement;if(i&&a.object instanceof hI&&a.object.isPerspectiveCamera){var r=a.object.position;e.copy(r).sub(a.target);var o=e.length();o*=Math.tan(a.object.fov/2*Math.PI/180),W(2*t*o/i.clientHeight,a.object.matrix),M(2*n*o/i.clientHeight,a.object.matrix)}else i&&a.object instanceof XI&&a.object.isOrthographicCamera?(W(t*(a.object.right-a.object.left)/a.object.zoom/i.clientWidth,a.object.matrix),M(n*(a.object.top-a.object.bottom)/a.object.zoom/i.clientHeight,a.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),a.enablePan=!1)}}();function F(e){a.object instanceof hI&&a.object.isPerspectiveCamera?f/=e:a.object instanceof XI&&a.object.isOrthographicCamera?(a.object.zoom=Math.max(a.minZoom,Math.min(a.maxZoom,a.object.zoom*e)),a.object.updateProjectionMatrix(),I=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),a.enableZoom=!1)}function N(e){a.object instanceof hI&&a.object.isPerspectiveCamera?f*=e:a.object instanceof XI&&a.object.isOrthographicCamera?(a.object.zoom=Math.max(a.minZoom,Math.min(a.maxZoom,a.object.zoom/e)),a.object.updateProjectionMatrix(),I=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),a.enableZoom=!1)}function H(e){C.set(e.clientX,e.clientY)}function T(e){A.set(e.clientX,e.clientY)}function X(){if(1==x.length)C.set(x[0].pageX,x[0].pageY);else{var e=.5*(x[0].pageX+x[1].pageX),t=.5*(x[0].pageY+x[1].pageY);C.set(e,t)}}function Y(){if(1==x.length)A.set(x[0].pageX,x[0].pageY);else{var e=.5*(x[0].pageX+x[1].pageX),t=.5*(x[0].pageY+x[1].pageY);A.set(e,t)}}function E(){var e=x[0].pageX-x[1].pageX,t=x[0].pageY-x[1].pageY,n=Math.sqrt(e*e+t*t);G.set(0,n)}function z(e){if(1==x.length)m.set(e.pageX,e.pageY);else{var t=$(e),n=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);m.set(n,i)}v.subVectors(m,C).multiplyScalar(a.rotateSpeed);var r=a.domElement;r&&(k(2*Math.PI*v.x/r.clientHeight),R(2*Math.PI*v.y/r.clientHeight)),C.copy(m)}function L(e){if(1==x.length)b.set(e.pageX,e.pageY);else{var t=$(e),n=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);b.set(n,i)}y.subVectors(b,A).multiplyScalar(a.panSpeed),V(y.x,y.y),A.copy(b)}function K(e){var t=$(e),n=e.pageX-t.x,i=e.pageY-t.y,r=Math.sqrt(n*n+i*i);w.set(0,r),B.set(0,Math.pow(w.y/G.y,a.zoomSpeed)),F(B.y),G.copy(w)}function _(e){var t,n;!1!==a.enabled&&(0===x.length&&(null==(t=a.domElement)||t.ownerDocument.addEventListener("pointermove",P),null==(n=a.domElement)||n.ownerDocument.addEventListener("pointerup",D)),function(e){x.push(e)}(e),"touch"===e.pointerType?function(e){switch(q(e),x.length){case 1:switch(a.touches.ONE){case Kc.ROTATE:if(!1===a.enableRotate)return;X(),u=c.TOUCH_ROTATE;break;case Kc.PAN:if(!1===a.enablePan)return;Y(),u=c.TOUCH_PAN;break;default:u=c.NONE}break;case 2:switch(a.touches.TWO){case Kc.DOLLY_PAN:if(!1===a.enableZoom&&!1===a.enablePan)return;a.enableZoom&&E(),a.enablePan&&Y(),u=c.TOUCH_DOLLY_PAN;break;case Kc.DOLLY_ROTATE:if(!1===a.enableZoom&&!1===a.enableRotate)return;a.enableZoom&&E(),a.enableRotate&&X(),u=c.TOUCH_DOLLY_ROTATE;break;default:u=c.NONE}break;default:u=c.NONE}u!==c.NONE&&a.dispatchEvent(s)}(e):function(e){var t;switch(e.button){case 0:t=a.mouseButtons.LEFT;break;case 1:t=a.mouseButtons.MIDDLE;break;case 2:t=a.mouseButtons.RIGHT;break;default:t=-1}switch(t){case Lc.DOLLY:if(!1===a.enableZoom)return;!function(e){G.set(e.clientX,e.clientY)}(e),u=c.DOLLY;break;case Lc.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===a.enablePan)return;T(e),u=c.PAN}else{if(!1===a.enableRotate)return;H(e),u=c.ROTATE}break;case Lc.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===a.enableRotate)return;H(e),u=c.ROTATE}else{if(!1===a.enablePan)return;T(e),u=c.PAN}break;default:u=c.NONE}u!==c.NONE&&a.dispatchEvent(s)}(e))}function P(e){!1!==a.enabled&&("touch"===e.pointerType?function(e){switch(q(e),u){case c.TOUCH_ROTATE:if(!1===a.enableRotate)return;z(e),a.update();break;case c.TOUCH_PAN:if(!1===a.enablePan)return;L(e),a.update();break;case c.TOUCH_DOLLY_PAN:if(!1===a.enableZoom&&!1===a.enablePan)return;!function(e){a.enableZoom&&K(e),a.enablePan&&L(e)}(e),a.update();break;case c.TOUCH_DOLLY_ROTATE:if(!1===a.enableZoom&&!1===a.enableRotate)return;!function(e){a.enableZoom&&K(e),a.enableRotate&&z(e)}(e),a.update();break;default:u=c.NONE}}(e):function(e){if(!1===a.enabled)return;switch(u){case c.ROTATE:if(!1===a.enableRotate)return;!function(e){m.set(e.clientX,e.clientY),v.subVectors(m,C).multiplyScalar(a.rotateSpeed);var t=a.domElement;t&&(k(2*Math.PI*v.x/t.clientHeight),R(2*Math.PI*v.y/t.clientHeight)),C.copy(m),a.update()}(e);break;case c.DOLLY:if(!1===a.enableZoom)return;!function(e){w.set(e.clientX,e.clientY),B.subVectors(w,G),B.y>0?F(Z()):B.y<0&&N(Z()),G.copy(w),a.update()}(e);break;case c.PAN:if(!1===a.enablePan)return;!function(e){b.set(e.clientX,e.clientY),y.subVectors(b,A).multiplyScalar(a.panSpeed),V(y.x,y.y),A.copy(b),a.update()}(e)}}(e))}function D(e){var t,n,i;Q(e),0===x.length&&(null==(t=a.domElement)||t.releasePointerCapture(e.pointerId),null==(n=a.domElement)||n.ownerDocument.removeEventListener("pointermove",P),null==(i=a.domElement)||i.ownerDocument.removeEventListener("pointerup",D)),a.dispatchEvent(l),u=c.NONE}function O(e){Q(e)}function U(e){!1===a.enabled||!1===a.enableZoom||u!==c.NONE&&u!==c.ROTATE||(e.preventDefault(),a.dispatchEvent(s),function(e){e.deltaY<0?N(Z()):e.deltaY>0&&F(Z()),a.update()}(e),a.dispatchEvent(l))}function j(e){!1!==a.enabled&&!1!==a.enablePan&&function(e){var t=!1;switch(e.code){case a.keys.UP:V(0,a.keyPanSpeed),t=!0;break;case a.keys.BOTTOM:V(0,-a.keyPanSpeed),t=!0;break;case a.keys.LEFT:V(a.keyPanSpeed,0),t=!0;break;case a.keys.RIGHT:V(-a.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),a.update())}(e)}function J(e){!1!==a.enabled&&e.preventDefault()}function Q(e){delete S[e.pointerId];for(var t=0;t<x.length;t++)if(x[t].pointerId==e.pointerId)return void x.splice(t,1)}function q(e){var t=S[e.pointerId];void 0===t&&(t=new Ch,S[e.pointerId]=t),t.set(e.pageX,e.pageY)}function $(e){var t=e.pointerId===x[0].pointerId?x[1]:x[0];return S[t.pointerId]}return void 0!==i&&r.connect(i),r.update(),r}return Xe(n)}(nh),fS=["makeDefault","camera","regress","domElement","enableDamping","keyEvents","onChange","onStart","onEnd"],pS=t.forwardRef((function(e,n){var i=e.makeDefault,r=e.camera,a=e.regress,o=e.domElement,s=e.enableDamping,l=void 0===s||s,c=e.keyEvents,u=void 0!==c&&c,g=e.onChange,d=e.onStart,h=e.onEnd,f=Fe(e,fS),p=ox((function(e){return e.invalidate})),I=ox((function(e){return e.camera})),C=ox((function(e){return e.gl})),m=ox((function(e){return e.events})),A=ox((function(e){return e.setEvents})),b=ox((function(e){return e.set})),y=ox((function(e){return e.get})),G=ox((function(e){return e.performance})),w=r||I,B=o||m.connected||C.domElement,x=t.useMemo((function(){return new hS(w)}),[w]);return sx((function(){x.enabled&&x.update()}),-1),t.useEffect((function(){return u&&x.connect(!0===u?B:u),x.connect(B),function(){x.dispose()}}),[u,B,a,x,p]),t.useEffect((function(){var e=function(e){p(),a&&G.regress(),g&&g(e)},t=function(e){d&&d(e)},n=function(e){h&&h(e)};return x.addEventListener("change",e),x.addEventListener("start",t),x.addEventListener("end",n),function(){x.removeEventListener("start",t),x.removeEventListener("end",n),x.removeEventListener("change",e)}}),[g,d,h,x,p,A]),t.useEffect((function(){if(i){var e=y().controls;return b({controls:x}),function(){return b({controls:e})}}}),[i,x]),t.createElement("primitive",v({ref:n,object:x,enableDamping:l},f))}));function IS(e){if(null==e)throw new TypeError("Cannot destructure "+e)}var CS,mS=new WeakMap,vS=function(e){kc(n,e);var t=Vc(n);function n(e){var i;return ka(this,n),(i=t.call(this,e)).decoderPath="",i.decoderConfig={},i.decoderBinary=null,i.decoderPending=null,i.workerLimit=4,i.workerPool=[],i.workerNextTaskID=1,i.workerSourceURL="",i.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},i.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"},i}return Xe(n,[{key:"setDecoderPath",value:function(e){return this.decoderPath=e,this}},{key:"setDecoderConfig",value:function(e){return this.decoderConfig=e,this}},{key:"setWorkerLimit",value:function(e){return this.workerLimit=e,this}},{key:"load",value:function(e,t,n,i){var r=this,a=new xy(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(e){var n={attributeIDs:r.defaultAttributeIDs,attributeTypes:r.defaultAttributeTypes,useUniqueIDs:!1};r.decodeGeometry(e,n).then(t).catch(i)}),n,i)}},{key:"decodeDracoFile",value:function(e,t,n,i){var r={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,r).then(t)}},{key:"decodeGeometry",value:function(e,t){var n=this;for(var i in t.attributeTypes){var r=t.attributeTypes[i];void 0!==r.BYTES_PER_ELEMENT&&(t.attributeTypes[i]=r.name)}var a,o=JSON.stringify(t);if(mS.has(e)){var s=mS.get(e);if(s.key===o)return s.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}var l=this.workerNextTaskID++,c=e.byteLength,u=this._getWorker(l,c).then((function(n){return a=n,new Promise((function(n,i){a._callbacks[l]={resolve:n,reject:i},a.postMessage({type:"decode",id:l,taskConfig:t,buffer:e},[e])}))})).then((function(e){return n._createGeometry(e.geometry)}));return u.catch((function(){return!0})).then((function(){a&&l&&n._releaseTask(a,l)})),mS.set(e,{key:o,promise:u}),u}},{key:"_createGeometry",value:function(e){var t=new Ep;e.index&&t.setIndex(new yp(e.index.array,1));for(var n=0;n<e.attributes.length;n++){var i=e.attributes[n],r=i.name,a=i.array,o=i.itemSize;t.setAttribute(r,new yp(a,o))}return t}},{key:"_loadLibrary",value:function(e,t){var n=new xy(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((function(t,i){n.load(e,t,void 0,i)}))}},{key:"preload",value:function(){return this._initDecoder(),this}},{key:"_initDecoder",value:function(){var e=this;if(this.decoderPending)return this.decoderPending;var t="object"!==typeof WebAssembly||"js"===this.decoderConfig.type,n=[];return t?n.push(this._loadLibrary("draco_decoder.js","text")):(n.push(this._loadLibrary("draco_wasm_wrapper.js","text")),n.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(n).then((function(n){var i=n[0];t||(e.decoderConfig.wasmBinary=n[1]);var r=AS.toString(),a=["/* draco decoder */",i,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join("\n");e.workerSourceURL=URL.createObjectURL(new Blob([a]))})),this.decoderPending}},{key:"_getWorker",value:function(e,t){var n=this;return this._initDecoder().then((function(){if(n.workerPool.length<n.workerLimit){var i=new Worker(n.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:n.decoderConfig}),i.onmessage=function(e){var t=e.data;switch(t.type){case"decode":i._callbacks[t.id].resolve(t);break;case"error":i._callbacks[t.id].reject(t);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+t.type+'"')}},n.workerPool.push(i)}else n.workerPool.sort((function(e,t){return e._taskLoad>t._taskLoad?-1:1}));var r=n.workerPool[n.workerPool.length-1];return r._taskCosts[e]=t,r._taskLoad+=t,r}))}},{key:"_releaseTask",value:function(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}},{key:"debug",value:function(){console.log("Task load: ",this.workerPool.map((function(e){return e._taskLoad})))}},{key:"dispose",value:function(){for(var e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}]),n}(Gy);function AS(){var e,t;function n(e,t,n,i,r,a){var o=a.num_components(),s=n.num_points()*o,l=s*r.BYTES_PER_ELEMENT,c=function(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}(e,r),u=e._malloc(l);t.GetAttributeDataArrayForAllPoints(n,a,c,l,u);var g=new r(e.HEAPF32.buffer,u,s).slice();return e._free(u),{name:i,array:g,itemSize:o}}onmessage=function(i){var r=i.data;switch(r.type){case"init":e=r.decoderConfig,t=new Promise((function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)}));break;case"decode":var a=r.buffer,o=r.taskConfig;t.then((function(e){var t=e.draco,i=new t.Decoder,s=new t.DecoderBuffer;s.Init(new Int8Array(a),a.byteLength);try{var l=function(e,t,i,r){var a,o,s=r.attributeIDs,l=r.attributeTypes,c=t.GetEncodedGeometryType(i);if(c===e.TRIANGULAR_MESH)a=new e.Mesh,o=t.DecodeBufferToMesh(i,a);else{if(c!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");a=new e.PointCloud,o=t.DecodeBufferToPointCloud(i,a)}if(!o.ok()||0===a.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+o.error_msg());var u={index:null,attributes:[]};for(var g in s){var d=self[l[g]],h=void 0,f=void 0;if(r.useUniqueIDs)f=s[g],h=t.GetAttributeByUniqueId(a,f);else{if(-1===(f=t.GetAttributeId(a,e[s[g]])))continue;h=t.GetAttribute(a,f)}u.attributes.push(n(e,t,a,g,d,h))}c===e.TRIANGULAR_MESH&&(u.index=function(e,t,n){var i=n.num_faces(),r=3*i,a=4*r,o=e._malloc(a);t.GetTrianglesUInt32Array(n,a,o);var s=new Uint32Array(e.HEAPF32.buffer,o,r).slice();return e._free(o),{array:s,itemSize:1}}(e,t,a));return e.destroy(a),u}(t,i,s,o),c=l.attributes.map((function(e){return e.array.buffer}));l.index&&c.push(l.index.array.buffer),self.postMessage({type:"decode",id:r.id,geometry:l},c)}catch(u){console.error(u),self.postMessage({type:"error",id:r.id,error:u.message})}finally{t.destroy(s),t.destroy(i)}}))}}}var bS=function(){if(CS)return CS;var e=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),t=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if("object"!==typeof WebAssembly)return{supported:!1};var n,i="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB";WebAssembly.validate(e)&&(i="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB");var r=WebAssembly.instantiate(function(e){for(var n=new Uint8Array(e.length),i=0;i<e.length;++i){var r=e.charCodeAt(i);n[i]=r>96?r-71:r>64?r-65:r>47?r+4:r>46?63:62}for(var a=0,o=0;o<e.length;++o)n[a++]=n[o]<60?t[n[o]]:64*(n[o]-60)+n[++o];return n.buffer.slice(0,a)}(i),{}).then((function(e){(n=e.instance).exports.__wasm_call_ctors()}));function a(e,t,i,r,a,o){var s=n.exports.sbrk,l=i+3&-4,c=s(l*r),u=s(a.length),g=new Uint8Array(n.exports.memory.buffer);g.set(a,u);var d=e(c,i,r,u,a.length);if(0===d&&o&&o(c,l,r),t.set(g.subarray(c,c+i*r)),s(c-s(0)),0!==d)throw new Error("Malformed buffer data: ".concat(d))}var o={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},s={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return CS={ready:r,supported:!0,decodeVertexBuffer:function(e,t,i,r,s){a(n.exports.meshopt_decodeVertexBuffer,e,t,i,r,n.exports[o[s]])},decodeIndexBuffer:function(e,t,i,r){a(n.exports.meshopt_decodeIndexBuffer,e,t,i,r)},decodeIndexSequence:function(e,t,i,r){a(n.exports.meshopt_decodeIndexSequence,e,t,i,r)},decodeGltfBuffer:function(e,t,i,r,l,c){a(n.exports[s[l]],e,t,i,r,n.exports[o[c]])}},CS};function yS(e,t){if(t===pd)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(t===Cd||t===Id){var n=e.getIndex();if(null===n){var i=[],r=e.getAttribute("position");if(void 0===r)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(var a=0;a<r.count;a++)i.push(a);e.setIndex(i),n=e.getIndex()}var o=n.count-2,s=[];if(n)if(t===Cd)for(var l=1;l<=o;l++)s.push(n.getX(0)),s.push(n.getX(l)),s.push(n.getX(l+1));else for(var c=0;c<o;c++)c%2===0?(s.push(n.getX(c)),s.push(n.getX(c+1)),s.push(n.getX(c+2))):(s.push(n.getX(c+2)),s.push(n.getX(c+1)),s.push(n.getX(c)));s.length/3!==o&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var u=e.clone();return u.setIndex(s),u.clearGroups(),u}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e}var GS=function(e){kc(n,e);var t=Vc(n);function n(e){var i;return ka(this,n),(i=t.call(this,e)).dracoLoader=null,i.ktx2Loader=null,i.meshoptDecoder=null,i.pluginCallbacks=[],i.register((function(e){return new kS(e)})),i.register((function(e){return new TS(e)})),i.register((function(e){return new XS(e)})),i.register((function(e){return new YS(e)})),i.register((function(e){return new WS(e)})),i.register((function(e){return new MS(e)})),i.register((function(e){return new VS(e)})),i.register((function(e){return new FS(e)})),i.register((function(e){return new ZS(e)})),i.register((function(e){return new NS(e)})),i.register((function(e){return new RS(e)})),i.register((function(e){return new HS(e)})),i.register((function(e){return new xS(e)})),i.register((function(e){return new ES(e)})),i.register((function(e){return new zS(e)})),i}return Xe(n,[{key:"load",value:function(e,t,n,i){var r,a=this;r=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:$y.extractUrlBase(e),this.manager.itemStart(e);var o=function(t){i?i(t):console.error(t),a.manager.itemError(e),a.manager.itemEnd(e)},s=new xy(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,(function(n){try{a.parse(n,r,(function(n){t(n),a.manager.itemEnd(e)}),o)}catch(i){o(i)}}),n,o)}},{key:"setDRACOLoader",value:function(e){return this.dracoLoader=e,this}},{key:"setDDSLoader",value:function(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}},{key:"setKTX2Loader",value:function(e){return this.ktx2Loader=e,this}},{key:"setMeshoptDecoder",value:function(e){return this.meshoptDecoder=e,this}},{key:"register",value:function(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}},{key:"unregister",value:function(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}},{key:"parse",value:function(e,t,n,i){var r,a={},o={};if("string"===typeof e)r=JSON.parse(e);else if(e instanceof ArrayBuffer){if($y.decodeText(new Uint8Array(e.slice(0,4)))===LS){try{a[BS.KHR_BINARY_GLTF]=new PS(e)}catch(h){return void(i&&i(h))}r=JSON.parse(a[BS.KHR_BINARY_GLTF].content)}else r=JSON.parse($y.decodeText(new Uint8Array(e)))}else r=e;if(void 0===r.asset||r.asset.version[0]<2)i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{var s=new CZ(r,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});s.fileLoader.setRequestHeader(this.requestHeader);for(var l=0;l<this.pluginCallbacks.length;l++){var c=this.pluginCallbacks[l](s);o[c.name]=c,a[c.name]=!0}if(r.extensionsUsed)for(var u=0;u<r.extensionsUsed.length;++u){var g=r.extensionsUsed[u],d=r.extensionsRequired||[];switch(g){case BS.KHR_MATERIALS_UNLIT:a[g]=new SS;break;case BS.KHR_DRACO_MESH_COMPRESSION:a[g]=new DS(r,this.dracoLoader);break;case BS.KHR_TEXTURE_TRANSFORM:a[g]=new OS;break;case BS.KHR_MESH_QUANTIZATION:a[g]=new US;break;default:d.indexOf(g)>=0&&void 0===o[g]&&console.warn('THREE.GLTFLoader: Unknown extension "'+g+'".')}}s.setExtensions(a),s.setPlugins(o),s.parse(n,i)}}},{key:"parseAsync",value:function(e,t){var n=this;return new Promise((function(i,r){n.parse(e,t,i,r)}))}}]),n}(Gy);function wS(){var e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}var BS={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"},xS=function(){function e(t){ka(this,e),this.parser=t,this.name=BS.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}return Xe(e,[{key:"_markDefs",value:function(){for(var e=this.parser,t=this.parser.json.nodes||[],n=0,i=t.length;n<i;n++){var r=t[n];r.extensions&&r.extensions[this.name]&&void 0!==r.extensions[this.name].light&&e._addNodeRef(this.cache,r.extensions[this.name].light)}}},{key:"_loadLight",value:function(e){var t=this.parser,n="light:"+e,i=t.cache.get(n);if(i)return i;var r,a=t.json,o=((a.extensions&&a.extensions[this.name]||{}).lights||[])[e],s=new dp(16777215);void 0!==o.color&&s.fromArray(o.color);var l=void 0!==o.range?o.range:0;switch(o.type){case"directional":(r=new Oy(s)).target.position.set(0,0,-1),r.add(r.target);break;case"point":(r=new Py(s)).distance=l;break;case"spot":(r=new Ey(s)).distance=l,o.spot=o.spot||{},o.spot.innerConeAngle=void 0!==o.spot.innerConeAngle?o.spot.innerConeAngle:0,o.spot.outerConeAngle=void 0!==o.spot.outerConeAngle?o.spot.outerConeAngle:Math.PI/4,r.angle=o.spot.outerConeAngle,r.penumbra=1-o.spot.innerConeAngle/o.spot.outerConeAngle,r.target.position.set(0,0,-1),r.add(r.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+o.type)}return r.position.set(0,0,0),r.decay=2,gZ(r,o),void 0!==o.intensity&&(r.intensity=o.intensity),r.name=t.createUniqueName(o.name||"light_"+e),i=Promise.resolve(r),t.cache.add(n,i),i}},{key:"getDependency",value:function(e,t){if("light"===e)return this._loadLight(t)}},{key:"createNodeAttachment",value:function(e){var t=this,n=this.parser,i=n.json.nodes[e],r=(i.extensions&&i.extensions[this.name]||{}).light;return void 0===r?null:this._loadLight(r).then((function(e){return n._getNodeRef(t.cache,r,e)}))}}]),e}(),SS=function(){function e(){ka(this,e),this.name=BS.KHR_MATERIALS_UNLIT}return Xe(e,[{key:"getMaterialType",value:function(){return fp}},{key:"extendParams",value:function(e,t,n){var i=[];e.color=new dp(1,1,1),e.opacity=1;var r=t.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){var a=r.baseColorFactor;e.color.fromArray(a),e.opacity=a[3]}void 0!==r.baseColorTexture&&i.push(n.assignTexture(e,"map",r.baseColorTexture,3001))}return Promise.all(i)}}]),e}(),ZS=function(){function e(t){ka(this,e),this.parser=t,this.name=BS.KHR_MATERIALS_EMISSIVE_STRENGTH}return Xe(e,[{key:"extendMaterialParams",value:function(e,t){var n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();var i=n.extensions[this.name].emissiveStrength;return void 0!==i&&(t.emissiveIntensity=i),Promise.resolve()}}]),e}(),kS=function(){function e(t){ka(this,e),this.parser=t,this.name=BS.KHR_MATERIALS_CLEARCOAT}return Xe(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Pb:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();var r=[],a=i.extensions[this.name];if(void 0!==a.clearcoatFactor&&(t.clearcoat=a.clearcoatFactor),void 0!==a.clearcoatTexture&&r.push(n.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),void 0!==a.clearcoatRoughnessFactor&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),void 0!==a.clearcoatRoughnessTexture&&r.push(n.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),void 0!==a.clearcoatNormalTexture&&(r.push(n.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),void 0!==a.clearcoatNormalTexture.scale)){var o=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Ch(o,o)}return Promise.all(r)}}]),e}(),RS=function(){function e(t){ka(this,e),this.parser=t,this.name=BS.KHR_MATERIALS_IRIDESCENCE}return Xe(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Pb:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();var r=[],a=i.extensions[this.name];return void 0!==a.iridescenceFactor&&(t.iridescence=a.iridescenceFactor),void 0!==a.iridescenceTexture&&r.push(n.assignTexture(t,"iridescenceMap",a.iridescenceTexture)),void 0!==a.iridescenceIor&&(t.iridescenceIOR=a.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==a.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),void 0!==a.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),void 0!==a.iridescenceThicknessTexture&&r.push(n.assignTexture(t,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(r)}}]),e}(),WS=function(){function e(t){ka(this,e),this.parser=t,this.name=BS.KHR_MATERIALS_SHEEN}return Xe(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Pb:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();var r=[];t.sheenColor=new dp(0,0,0),t.sheenRoughness=0,t.sheen=1;var a=i.extensions[this.name];return void 0!==a.sheenColorFactor&&t.sheenColor.fromArray(a.sheenColorFactor),void 0!==a.sheenRoughnessFactor&&(t.sheenRoughness=a.sheenRoughnessFactor),void 0!==a.sheenColorTexture&&r.push(n.assignTexture(t,"sheenColorMap",a.sheenColorTexture,3001)),void 0!==a.sheenRoughnessTexture&&r.push(n.assignTexture(t,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(r)}}]),e}(),MS=function(){function e(t){ka(this,e),this.parser=t,this.name=BS.KHR_MATERIALS_TRANSMISSION}return Xe(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Pb:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();var r=[],a=i.extensions[this.name];return void 0!==a.transmissionFactor&&(t.transmission=a.transmissionFactor),void 0!==a.transmissionTexture&&r.push(n.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(r)}}]),e}(),VS=function(){function e(t){ka(this,e),this.parser=t,this.name=BS.KHR_MATERIALS_VOLUME}return Xe(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Pb:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();var r=[],a=i.extensions[this.name];t.thickness=void 0!==a.thicknessFactor?a.thicknessFactor:0,void 0!==a.thicknessTexture&&r.push(n.assignTexture(t,"thicknessMap",a.thicknessTexture)),t.attenuationDistance=a.attenuationDistance||1/0;var o=a.attenuationColor||[1,1,1];return t.attenuationColor=new dp(o[0],o[1],o[2]),Promise.all(r)}}]),e}(),FS=function(){function e(t){ka(this,e),this.parser=t,this.name=BS.KHR_MATERIALS_IOR}return Xe(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Pb:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();var i=n.extensions[this.name];return t.ior=void 0!==i.ior?i.ior:1.5,Promise.resolve()}}]),e}(),NS=function(){function e(t){ka(this,e),this.parser=t,this.name=BS.KHR_MATERIALS_SPECULAR}return Xe(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Pb:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();var r=[],a=i.extensions[this.name];t.specularIntensity=void 0!==a.specularFactor?a.specularFactor:1,void 0!==a.specularTexture&&r.push(n.assignTexture(t,"specularIntensityMap",a.specularTexture));var o=a.specularColorFactor||[1,1,1];return t.specularColor=new dp(o[0],o[1],o[2]),void 0!==a.specularColorTexture&&r.push(n.assignTexture(t,"specularColorMap",a.specularColorTexture,3001)),Promise.all(r)}}]),e}(),HS=function(){function e(t){ka(this,e),this.parser=t,this.name=BS.KHR_MATERIALS_ANISOTROPY}return Xe(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Pb:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();var r=[],a=i.extensions[this.name];return void 0!==a.anisotropyStrength&&(t.anisotropy=a.anisotropyStrength),void 0!==a.anisotropyRotation&&(t.anisotropyRotation=a.anisotropyRotation),void 0!==a.anisotropyTexture&&r.push(n.assignTexture(t,"anisotropyMap",a.anisotropyTexture)),Promise.all(r)}}]),e}(),TS=function(){function e(t){ka(this,e),this.parser=t,this.name=BS.KHR_TEXTURE_BASISU}return Xe(e,[{key:"loadTexture",value:function(e){var t=this.parser,n=t.json,i=n.textures[e];if(!i.extensions||!i.extensions[this.name])return null;var r=i.extensions[this.name],a=t.options.ktx2Loader;if(!a){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,r.source,a)}}]),e}(),XS=function(){function e(t){ka(this,e),this.parser=t,this.name=BS.EXT_TEXTURE_WEBP,this.isSupported=null}return Xe(e,[{key:"loadTexture",value:function(e){var t=this.name,n=this.parser,i=n.json,r=i.textures[e];if(!r.extensions||!r.extensions[t])return null;var a=r.extensions[t],o=i.images[a.source],s=n.textureLoader;if(o.uri){var l=n.options.manager.getHandler(o.uri);null!==l&&(s=l)}return this.detectSupport().then((function(r){if(r)return n.loadTextureImage(e,a.source,s);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)}))}},{key:"detectSupport",value:function(){return this.isSupported||(this.isSupported=new Promise((function(e){var t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}]),e}(),YS=function(){function e(t){ka(this,e),this.parser=t,this.name=BS.EXT_TEXTURE_AVIF,this.isSupported=null}return Xe(e,[{key:"loadTexture",value:function(e){var t=this.name,n=this.parser,i=n.json,r=i.textures[e];if(!r.extensions||!r.extensions[t])return null;var a=r.extensions[t],o=i.images[a.source],s=n.textureLoader;if(o.uri){var l=n.options.manager.getHandler(o.uri);null!==l&&(s=l)}return this.detectSupport().then((function(r){if(r)return n.loadTextureImage(e,a.source,s);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)}))}},{key:"detectSupport",value:function(){return this.isSupported||(this.isSupported=new Promise((function(e){var t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}]),e}(),ES=function(){function e(t){ka(this,e),this.name=BS.EXT_MESHOPT_COMPRESSION,this.parser=t}return Xe(e,[{key:"loadBufferView",value:function(e){var t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){var i=n.extensions[this.name],r=this.parser.getDependency("buffer",i.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return r.then((function(e){var t=i.byteOffset||0,n=i.byteLength||0,r=i.count,o=i.byteStride,s=new Uint8Array(e,t,n);return a.decodeGltfBufferAsync?a.decodeGltfBufferAsync(r,o,s,i.mode,i.filter).then((function(e){return e.buffer})):a.ready.then((function(){var e=new ArrayBuffer(r*o);return a.decodeGltfBuffer(new Uint8Array(e),r,o,s,i.mode,i.filter),e}))}))}return null}}]),e}(),zS=function(){function e(t){ka(this,e),this.name=BS.EXT_MESH_GPU_INSTANCING,this.parser=t}return Xe(e,[{key:"createNodeMesh",value:function(e){var t=this,n=this.parser.json,i=n.nodes[e];if(!i.extensions||!i.extensions[this.name]||void 0===i.mesh)return null;var r,a=Fc(n.meshes[i.mesh].primitives);try{for(a.s();!(r=a.n()).done;){var o=r.value;if(o.mode!==qS.TRIANGLES&&o.mode!==qS.TRIANGLE_STRIP&&o.mode!==qS.TRIANGLE_FAN&&void 0!==o.mode)return null}}catch(d){a.e(d)}finally{a.f()}var s=i.extensions[this.name].attributes,l=[],c={},u=function(e){l.push(t.parser.getDependency("accessor",s[e]).then((function(t){return c[e]=t,c[e]})))};for(var g in s)u(g);return l.length<1?null:(l.push(this.parser.createNodeMesh(e)),Promise.all(l).then((function(e){var n,i=e.pop(),r=i.isGroup?i.children:[i],a=e[0].count,o=[],s=Fc(r);try{for(s.s();!(n=s.n()).done;){for(var l=n.value,u=new yf,g=new Ph,h=new _h,f=new Ph(1,1,1),p=new jv(l.geometry,l.material,a),I=0;I<a;I++)c.TRANSLATION&&g.fromBufferAttribute(c.TRANSLATION,I),c.ROTATION&&h.fromBufferAttribute(c.ROTATION,I),c.SCALE&&f.fromBufferAttribute(c.SCALE,I),p.setMatrixAt(I,u.compose(g,h,f));for(var C in c)"TRANSLATION"!==C&&"ROTATION"!==C&&"SCALE"!==C&&l.geometry.setAttribute(C,c[C]);Of.prototype.copy.call(p,l),t.parser.assignFinalMaterial(p),o.push(p)}}catch(d){s.e(d)}finally{s.f()}return i.isGroup?(i.clear(),i.add.apply(i,o),i):o[0]})))}}]),e}(),LS="glTF",KS=1313821514,_S=5130562,PS=Xe((function e(t){ka(this,e),this.name=BS.KHR_BINARY_GLTF,this.content=null,this.body=null;var n=new DataView(t,0,12);if(this.header={magic:$y.decodeText(new Uint8Array(t.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==LS)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var i=this.header.length-12,r=new DataView(t,12),a=0;a<i;){var o=r.getUint32(a,!0);a+=4;var s=r.getUint32(a,!0);if(a+=4,s===KS){var l=new Uint8Array(t,12+a,o);this.content=$y.decodeText(l)}else if(s===_S){var c=12+a;this.body=t.slice(c,c+o)}a+=o}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")})),DS=function(){function e(t,n){if(ka(this,e),!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=BS.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=n,this.dracoLoader.preload()}return Xe(e,[{key:"decodePrimitive",value:function(e,t){var n=this.json,i=this.dracoLoader,r=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,o={},s={},l={};for(var c in a){var u=iZ[c]||c.toLowerCase();o[u]=a[c]}for(var g in e.attributes){var d=iZ[g]||g.toLowerCase();if(void 0!==a[g]){var h=n.accessors[e.attributes[g]],f=$S[h.componentType];l[d]=f.name,s[d]=!0===h.normalized}}return t.getDependency("bufferView",r).then((function(e){return new Promise((function(t){i.decodeDracoFile(e,(function(e){for(var n in e.attributes){var i=e.attributes[n],r=s[n];void 0!==r&&(i.normalized=r)}t(e)}),o,l)}))}))}}]),e}(),OS=function(){function e(){ka(this,e),this.name=BS.KHR_TEXTURE_TRANSFORM}return Xe(e,[{key:"extendTexture",value:function(e,t){return void 0!==t.texCoord&&t.texCoord!==e.channel||void 0!==t.offset||void 0!==t.rotation||void 0!==t.scale?(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0,e):e}}]),e}(),US=Xe((function e(){ka(this,e),this.name=BS.KHR_MESH_QUANTIZATION})),jS=function(e){kc(n,e);var t=Vc(n);function n(e,i,r,a){return ka(this,n),t.call(this,e,i,r,a)}return Xe(n,[{key:"copySampleValue_",value:function(e){for(var t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i*3+i,a=0;a!==i;a++)t[a]=n[r+a];return t}},{key:"interpolate_",value:function(e,t,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=2*o,l=3*o,c=i-t,u=(n-t)/c,g=u*u,d=g*u,h=e*l,f=h-l,p=-2*d+3*g,I=d-g,C=1-p,m=I-g+u,v=0;v!==o;v++){var A=a[f+v+o],b=a[f+v+s]*c,y=a[h+v+o],G=a[h+v]*c;r[v]=C*A+m*b+p*y+I*G}return r}}]),n}(ay),JS=new _h,QS=function(e){kc(n,e);var t=Vc(n);function n(){return ka(this,n),t.apply(this,arguments)}return Xe(n,[{key:"interpolate_",value:function(e,t,i,r){var a=Yc(Rc(n.prototype),"interpolate_",this).call(this,e,t,i,r);return JS.fromArray(a).normalize().toArray(a),a}}]),n}(jS),qS={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},$S={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},eZ={9728:Ju,9729:tg,9984:Qu,9985:ng,9986:$u,9987:rg},tZ={33071:Uu,33648:ju,10497:Ou},nZ={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},iZ=Ve(Ve({POSITION:"position",NORMAL:"normal",TANGENT:"tangent"},zc.replace(/\D+/g,"")>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"}),{},{COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"}),rZ={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},aZ={CUBICSPLINE:void 0,LINEAR:ld,STEP:sd},oZ="OPAQUE",sZ="MASK",lZ="BLEND";function cZ(e){return void 0===e.DefaultMaterial&&(e.DefaultMaterial=new _b({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:qc})),e.DefaultMaterial}function uZ(e,t,n){for(var i in n.extensions)void 0===e[i]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[i]=n.extensions[i])}function gZ(e,t){void 0!==t.extras&&("object"===typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function dZ(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var n=0,i=t.weights.length;n<i;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){var r=t.extras.targetNames;if(e.morphTargetInfluences.length===r.length){e.morphTargetDictionary={};for(var a=0,o=r.length;a<o;a++)e.morphTargetDictionary[r[a]]=a}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function hZ(e){var t,n=e.extensions&&e.extensions[BS.KHR_DRACO_MESH_COMPRESSION];if(t=n?"draco:"+n.bufferView+":"+n.indices+":"+fZ(n.attributes):e.indices+":"+fZ(e.attributes)+":"+e.mode,void 0!==e.targets)for(var i=0,r=e.targets.length;i<r;i++)t+=":"+fZ(e.targets[i]);return t}function fZ(e){for(var t="",n=Object.keys(e).sort(),i=0,r=n.length;i<r;i++)t+=n[i]+":"+e[n[i]]+";";return t}function pZ(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}var IZ=new yf,CZ=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ka(this,e),this.json=t,this.extensions={},this.plugins={},this.options=n,this.cache=new wS,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};var i=!1,r=!1,a=-1;"undefined"!==typeof navigator&&(i=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),a=(r=navigator.userAgent.indexOf("Firefox")>-1)?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),"undefined"===typeof createImageBitmap||i||r&&a<98?this.textureLoader=new My(this.options.manager):this.textureLoader=new oG(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new xy(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}return Xe(e,[{key:"setExtensions",value:function(e){this.extensions=e}},{key:"setPlugins",value:function(e){this.plugins=e}},{key:"parse",value:function(e,t){var n=this,i=this.json,r=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(t){var a={scene:t[0][i.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:i.asset,parser:n,userData:{}};uZ(r,a,i),gZ(a,i),Promise.all(n._invokeAll((function(e){return e.afterRoot&&e.afterRoot(a)}))).then((function(){e(a)}))})).catch(t)}},{key:"_markDefs",value:function(){for(var e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[],i=0,r=t.length;i<r;i++)for(var a=t[i].joints,o=0,s=a.length;o<s;o++)e[a[o]].isBone=!0;for(var l=0,c=e.length;l<c;l++){var u=e[l];void 0!==u.mesh&&(this._addNodeRef(this.meshCache,u.mesh),void 0!==u.skin&&(n[u.mesh].isSkinnedMesh=!0)),void 0!==u.camera&&this._addNodeRef(this.cameraCache,u.camera)}}},{key:"_addNodeRef",value:function(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}},{key:"_getNodeRef",value:function(e,t,n){var i=this;if(e.refs[t]<=1)return n;var r=n.clone();return function e(t,n){var r=i.associations.get(t);null!=r&&i.associations.set(n,r);var a,o=Fc(t.children.entries());try{for(o.s();!(a=o.n()).done;){var s=c(a.value,2),l=s[0];e(s[1],n.children[l])}}catch(u){o.e(u)}finally{o.f()}}(n,r),r.name+="_instance_"+e.uses[t]++,r}},{key:"_invokeOne",value:function(e){var t=Object.values(this.plugins);t.push(this);for(var n=0;n<t.length;n++){var i=e(t[n]);if(i)return i}return null}},{key:"_invokeAll",value:function(e){var t=Object.values(this.plugins);t.unshift(this);for(var n=[],i=0;i<t.length;i++){var r=e(t[i]);r&&n.push(r)}return n}},{key:"getDependency",value:function(e,t){var n=e+":"+t,i=this.cache.get(n);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this._invokeOne((function(e){return e.loadNode&&e.loadNode(t)}));break;case"mesh":i=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":i=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne((function(e){return e.loadAnimation&&e.loadAnimation(t)}));break;case"camera":i=this.loadCamera(t);break;default:if(!(i=this._invokeOne((function(n){return n!=this&&n.getDependency&&n.getDependency(e,t)}))))throw new Error("Unknown type: "+e)}this.cache.add(n,i)}return i}},{key:"getDependencies",value:function(e){var t=this.cache.get(e);if(!t){var n=this,i=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(i.map((function(t,i){return n.getDependency(e,i)}))),this.cache.add(e,t)}return t}},{key:"loadBuffer",value:function(e){var t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[BS.KHR_BINARY_GLTF].body);var i=this.options;return new Promise((function(e,r){n.load($y.resolveURL(t.uri,i.path),e,void 0,(function(){r(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))}},{key:"loadBufferView",value:function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){var n=t.byteLength||0,i=t.byteOffset||0;return e.slice(i,i+n)}))}},{key:"loadAccessor",value:function(e){var t=this,n=this.json,i=this.json.accessors[e];if(void 0===i.bufferView&&void 0===i.sparse){var r=nZ[i.type],a=$S[i.componentType],o=!0===i.normalized,s=new a(i.count*r);return Promise.resolve(new yp(s,r,o))}var l=[];return void 0!==i.bufferView?l.push(this.getDependency("bufferView",i.bufferView)):l.push(null),void 0!==i.sparse&&(l.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),l.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(l).then((function(e){var r,a,o=e[0],s=nZ[i.type],l=$S[i.componentType],c=l.BYTES_PER_ELEMENT,u=c*s,g=i.byteOffset||0,d=void 0!==i.bufferView?n.bufferViews[i.bufferView].byteStride:void 0,h=!0===i.normalized;if(d&&d!==u){var f=Math.floor(g/d),p="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+f+":"+i.count,I=t.cache.get(p);I||(r=new l(o,f*d,i.count*d/c),I=new lv(r,d/c),t.cache.add(p,I)),a=new uv(I,s,g%d/c,h)}else r=null===o?new l(i.count*s):new l(o,g,i.count*s),a=new yp(r,s,h);if(void 0!==i.sparse){var C=nZ.SCALAR,m=$S[i.sparse.indices.componentType],v=i.sparse.indices.byteOffset||0,A=i.sparse.values.byteOffset||0,b=new m(e[1],v,i.sparse.count*C),y=new l(e[2],A,i.sparse.count*s);null!==o&&(a=new yp(a.array.slice(),a.itemSize,a.normalized));for(var G=0,w=b.length;G<w;G++){var B=b[G];if(a.setX(B,y[G*s]),s>=2&&a.setY(B,y[G*s+1]),s>=3&&a.setZ(B,y[G*s+2]),s>=4&&a.setW(B,y[G*s+3]),s>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return a}))}},{key:"loadTexture",value:function(e){var t=this.json,n=this.options,i=t.textures[e].source,r=t.images[i],a=this.textureLoader;if(r.uri){var o=n.manager.getHandler(r.uri);null!==o&&(a=o)}return this.loadTextureImage(e,i,a)}},{key:"loadTextureImage",value:function(e,t,n){var i=this,r=this.json,a=r.textures[e],o=r.images[t],s=(o.uri||o.bufferView)+":"+a.sampler;if(this.textureCache[s])return this.textureCache[s];var l=this.loadImageSource(t,n).then((function(t){t.flipY=!1,t.name=a.name||o.name||"",""===t.name&&"string"===typeof o.uri&&!1===o.uri.startsWith("data:image/")&&(t.name=o.uri);var n=(r.samplers||{})[a.sampler]||{};return t.magFilter=eZ[n.magFilter]||tg,t.minFilter=eZ[n.minFilter]||rg,t.wrapS=tZ[n.wrapS]||Ou,t.wrapT=tZ[n.wrapT]||Ou,i.associations.set(t,{textures:e}),t})).catch((function(){return null}));return this.textureCache[s]=l,l}},{key:"loadImageSource",value:function(e,t){var n=this.json,i=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then((function(e){return e.clone()}));var r=n.images[e],a=self.URL||self.webkitURL,o=r.uri||"",s=!1;if(void 0!==r.bufferView)o=this.getDependency("bufferView",r.bufferView).then((function(e){s=!0;var t=new Blob([e],{type:r.mimeType});return o=a.createObjectURL(t)}));else if(void 0===r.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");var l=Promise.resolve(o).then((function(e){return new Promise((function(n,r){var a=n;!0===t.isImageBitmapLoader&&(a=function(e){var t=new Hh(e);t.needsUpdate=!0,n(t)}),t.load($y.resolveURL(e,i.path),a,void 0,r)}))})).then((function(e){var t;return!0===s&&a.revokeObjectURL(o),e.userData.mimeType=r.mimeType||((t=r.uri).search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/)?"image/jpeg":t.search(/\.webp($|\?)/i)>0||0===t.search(/^data\:image\/webp/)?"image/webp":"image/png"),e})).catch((function(e){throw console.error("THREE.GLTFLoader: Couldn't load texture",o),e}));return this.sourceCache[e]=l,l}},{key:"assignTexture",value:function(e,t,n,i){var r=this;return this.getDependency("texture",n.index).then((function(a){if(!a)return null;if(void 0!==n.texCoord&&n.texCoord>0&&((a=a.clone()).channel=n.texCoord),r.extensions[BS.KHR_TEXTURE_TRANSFORM]){var o=void 0!==n.extensions?n.extensions[BS.KHR_TEXTURE_TRANSFORM]:void 0;if(o){var s=r.associations.get(a);a=r.extensions[BS.KHR_TEXTURE_TRANSFORM].extendTexture(a,o),r.associations.set(a,s)}}return void 0!==i&&("colorSpace"in a?a.colorSpace=3001===i?"srgb":"srgb-linear":a.encoding=i),e[t]=a,a}))}},{key:"assignFinalMaterial",value:function(e){var t=e.geometry,n=e.material,i=void 0===t.attributes.tangent,r=void 0!==t.attributes.color,a=void 0===t.attributes.normal;if(e.isPoints){var o="PointsMaterial:"+n.uuid,s=this.cache.get(o);s||(s=new sA,sp.prototype.copy.call(s,n),s.color.copy(n.color),s.map=n.map,s.sizeAttenuation=!1,this.cache.add(o,s)),n=s}else if(e.isLine){var l="LineBasicMaterial:"+n.uuid,c=this.cache.get(l);c||(c=new Jv,sp.prototype.copy.call(c,n),c.color.copy(n.color),c.map=n.map,this.cache.add(l,c)),n=c}if(i||r||a){var u="ClonedMaterial:"+n.uuid+":";i&&(u+="derivative-tangents:"),r&&(u+="vertex-colors:"),a&&(u+="flat-shading:");var g=this.cache.get(u);g||(g=n.clone(),r&&(g.vertexColors=!0),a&&(g.flatShading=!0),i&&(g.normalScale&&(g.normalScale.y*=-1),g.clearcoatNormalScale&&(g.clearcoatNormalScale.y*=-1)),this.cache.add(u,g),this.associations.set(g,this.associations.get(n))),n=g}e.material=n}},{key:"getMaterialType",value:function(){return _b}},{key:"loadMaterial",value:function(e){var t,n=this,i=this.json,r=this.extensions,a=i.materials[e],o={},s=[];if((a.extensions||{})[BS.KHR_MATERIALS_UNLIT]){var l=r[BS.KHR_MATERIALS_UNLIT];t=l.getMaterialType(),s.push(l.extendParams(o,a,n))}else{var c=a.pbrMetallicRoughness||{};if(o.color=new dp(1,1,1),o.opacity=1,Array.isArray(c.baseColorFactor)){var u=c.baseColorFactor;o.color.fromArray(u),o.opacity=u[3]}void 0!==c.baseColorTexture&&s.push(n.assignTexture(o,"map",c.baseColorTexture,3001)),o.metalness=void 0!==c.metallicFactor?c.metallicFactor:1,o.roughness=void 0!==c.roughnessFactor?c.roughnessFactor:1,void 0!==c.metallicRoughnessTexture&&(s.push(n.assignTexture(o,"metalnessMap",c.metallicRoughnessTexture)),s.push(n.assignTexture(o,"roughnessMap",c.metallicRoughnessTexture))),t=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),s.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,o)}))))}!0===a.doubleSided&&(o.side=eu);var g=a.alphaMode||oZ;if(g===lZ?(o.transparent=!0,o.depthWrite=!1):(o.transparent=!1,g===sZ&&(o.alphaTest=void 0!==a.alphaCutoff?a.alphaCutoff:.5)),void 0!==a.normalTexture&&t!==fp&&(s.push(n.assignTexture(o,"normalMap",a.normalTexture)),o.normalScale=new Ch(1,1),void 0!==a.normalTexture.scale)){var d=a.normalTexture.scale;o.normalScale.set(d,d)}return void 0!==a.occlusionTexture&&t!==fp&&(s.push(n.assignTexture(o,"aoMap",a.occlusionTexture)),void 0!==a.occlusionTexture.strength&&(o.aoMapIntensity=a.occlusionTexture.strength)),void 0!==a.emissiveFactor&&t!==fp&&(o.emissive=(new dp).fromArray(a.emissiveFactor)),void 0!==a.emissiveTexture&&t!==fp&&s.push(n.assignTexture(o,"emissiveMap",a.emissiveTexture,3001)),Promise.all(s).then((function(){var i=new t(o);return a.name&&(i.name=a.name),gZ(i,a),n.associations.set(i,{materials:e}),a.extensions&&uZ(r,i,a),i}))}},{key:"createUniqueName",value:function(e){var t=TG.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}},{key:"loadGeometries",value:function(e){var t=this,n=this.extensions,i=this.primitiveCache;function r(e){return n[BS.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(n){return mZ(n,e,t)}))}for(var a=[],o=0,s=e.length;o<s;o++){var l=e[o],c=hZ(l),u=i[c];if(u)a.push(u.promise);else{var g=void 0;g=l.extensions&&l.extensions[BS.KHR_DRACO_MESH_COMPRESSION]?r(l):mZ(new Ep,l,t),i[c]={primitive:l,promise:g},a.push(g)}}return Promise.all(a)}},{key:"loadMesh",value:function(e){for(var t=this,n=this.json,i=this.extensions,r=n.meshes[e],a=r.primitives,o=[],s=0,l=a.length;s<l;s++){var c=void 0===a[s].material?cZ(this.cache):this.getDependency("material",a[s].material);o.push(c)}return o.push(t.loadGeometries(a)),Promise.all(o).then((function(n){for(var o=n.slice(0,n.length-1),s=n[n.length-1],l=[],c=0,u=s.length;c<u;c++){var g=s[c],d=a[c],h=void 0,f=o[c];if(d.mode===qS.TRIANGLES||d.mode===qS.TRIANGLE_STRIP||d.mode===qS.TRIANGLE_FAN||void 0===d.mode)!0===(h=!0===r.isSkinnedMesh?new Nv(g,f):new rI(g,f)).isSkinnedMesh&&h.normalizeSkinWeights(),d.mode===qS.TRIANGLE_STRIP?h.geometry=yS(h.geometry,Id):d.mode===qS.TRIANGLE_FAN&&(h.geometry=yS(h.geometry,Cd));else if(d.mode===qS.LINES)h=new aA(g,f);else if(d.mode===qS.LINE_STRIP)h=new nA(g,f);else if(d.mode===qS.LINE_LOOP)h=new oA(g,f);else{if(d.mode!==qS.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+d.mode);h=new dA(g,f)}Object.keys(h.geometry.morphAttributes).length>0&&dZ(h,r),h.name=t.createUniqueName(r.name||"mesh_"+e),gZ(h,r),d.extensions&&uZ(i,h,d),t.assignFinalMaterial(h),l.push(h)}for(var p=0,I=l.length;p<I;p++)t.associations.set(l[p],{meshes:e,primitives:p});if(1===l.length)return r.extensions&&uZ(i,l[0],r),l[0];var C=new jm;r.extensions&&uZ(i,C,r),t.associations.set(C,{meshes:e});for(var m=0,v=l.length;m<v;m++)C.add(l[m]);return C}))}},{key:"loadCamera",value:function(e){var t,n=this.json.cameras[e],i=n[n.type];if(i)return"perspective"===n.type?t=new hI(Ih.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):"orthographic"===n.type&&(t=new XI(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),gZ(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}},{key:"loadSkin",value:function(e){for(var t=this.json.skins[e],n=[],i=0,r=t.joints.length;i<r;i++)n.push(this._loadNodeShallow(t.joints[i]));return void 0!==t.inverseBindMatrices?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then((function(e){for(var n=e.pop(),i=e,r=[],a=[],o=0,s=i.length;o<s;o++){var l=i[o];if(l){r.push(l);var c=new yf;null!==n&&c.fromArray(n.array,16*o),a.push(c)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[o])}return new Ev(r,a)}))}},{key:"loadAnimation",value:function(e){for(var t=this.json.animations[e],n=t.name?t.name:"animation_"+e,i=[],r=[],a=[],o=[],s=[],l=0,c=t.channels.length;l<c;l++){var u=t.channels[l],g=t.samplers[u.sampler],d=u.target,h=d.node,f=void 0!==t.parameters?t.parameters[g.input]:g.input,p=void 0!==t.parameters?t.parameters[g.output]:g.output;void 0!==d.node&&(i.push(this.getDependency("node",h)),r.push(this.getDependency("accessor",f)),a.push(this.getDependency("accessor",p)),o.push(g),s.push(d))}return Promise.all([Promise.all(i),Promise.all(r),Promise.all(a),Promise.all(o),Promise.all(s)]).then((function(e){for(var t=e[0],i=e[1],r=e[2],a=e[3],o=e[4],s=[],l=function(){var e,n=t[c],l=i[c],u=r[c],g=a[c],d=o[c];if(void 0===n)return"continue";switch(n.updateMatrix(),rZ[d.path]){case rZ.weights:e=dy;break;case rZ.rotation:e=fy;break;default:e=Iy}var h=n.name?n.name:n.uuid,f=void 0!==g.interpolation?aZ[g.interpolation]:ld,p=[];rZ[d.path]===rZ.weights?n.traverse((function(e){e.morphTargetInfluences&&p.push(e.name?e.name:e.uuid)})):p.push(h);var I=u.array;if(u.normalized){for(var C=pZ(I.constructor),m=new Float32Array(I.length),v=0,A=I.length;v<A;v++)m[v]=I[v]*C;I=m}for(var b=0,y=p.length;b<y;b++){var G=new e(p[b]+"."+rZ[d.path],l.array,I,f);"CUBICSPLINE"===g.interpolation&&(G.createInterpolant=function(e){return new(this instanceof fy?QS:jS)(this.times,this.values,this.getValueSize()/3,e)},G.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),s.push(G)}},c=0,u=t.length;c<u;c++)l();return new Cy(n,void 0,s)}))}},{key:"createNodeMesh",value:function(e){var t=this.json,n=this,i=t.nodes[e];return void 0===i.mesh?null:n.getDependency("mesh",i.mesh).then((function(e){var t=n._getNodeRef(n.meshCache,i.mesh,e);return void 0!==i.weights&&t.traverse((function(e){if(e.isMesh)for(var t=0,n=i.weights.length;t<n;t++)e.morphTargetInfluences[t]=i.weights[t]})),t}))}},{key:"loadNode",value:function(e){for(var t=this,n=this.json.nodes[e],i=t._loadNodeShallow(e),r=[],a=n.children||[],o=0,s=a.length;o<s;o++)r.push(t.getDependency("node",a[o]));var l=void 0===n.skin?Promise.resolve(null):t.getDependency("skin",n.skin);return Promise.all([i,Promise.all(r),l]).then((function(e){var t=e[0],n=e[1],i=e[2];null!==i&&t.traverse((function(e){e.isSkinnedMesh&&e.bind(i,IZ)}));for(var r=0,a=n.length;r<a;r++)t.add(n[r]);return t}))}},{key:"_loadNodeShallow",value:function(e){var t=this.json,n=this.extensions,i=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];var r=t.nodes[e],a=r.name?i.createUniqueName(r.name):"",o=[],s=i._invokeOne((function(t){return t.createNodeMesh&&t.createNodeMesh(e)}));return s&&o.push(s),void 0!==r.camera&&o.push(i.getDependency("camera",r.camera).then((function(e){return i._getNodeRef(i.cameraCache,r.camera,e)}))),i._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){o.push(e)})),this.nodeCache[e]=Promise.all(o).then((function(t){var o;if((o=!0===r.isBone?new Hv:t.length>1?new jm:1===t.length?t[0]:new Of)!==t[0])for(var s=0,l=t.length;s<l;s++)o.add(t[s]);if(r.name&&(o.userData.name=r.name,o.name=a),gZ(o,r),r.extensions&&uZ(n,o,r),void 0!==r.matrix){var c=new yf;c.fromArray(r.matrix),o.applyMatrix4(c)}else void 0!==r.translation&&o.position.fromArray(r.translation),void 0!==r.rotation&&o.quaternion.fromArray(r.rotation),void 0!==r.scale&&o.scale.fromArray(r.scale);return i.associations.has(o)||i.associations.set(o,{}),i.associations.get(o).nodes=e,o})),this.nodeCache[e]}},{key:"loadScene",value:function(e){var t=this.extensions,n=this.json.scenes[e],i=this,r=new jm;n.name&&(r.name=i.createUniqueName(n.name)),gZ(r,n),n.extensions&&uZ(t,r,n);for(var a=n.nodes||[],o=[],s=0,l=a.length;s<l;s++)o.push(i.getDependency("node",a[s]));return Promise.all(o).then((function(e){for(var t=0,n=e.length;t<n;t++)r.add(e[t]);return i.associations=function(e){var t,n=new Map,r=Fc(i.associations);try{for(r.s();!(t=r.n()).done;){var a=c(t.value,2),o=a[0],s=a[1];(o instanceof sp||o instanceof Hh)&&n.set(o,s)}}catch(l){r.e(l)}finally{r.f()}return e.traverse((function(e){var t=i.associations.get(e);null!=t&&n.set(e,t)})),n}(r),r}))}}]),e}();function mZ(e,t,n){var i=t.attributes,r=[];function a(t,i){return n.getDependency("accessor",t).then((function(t){e.setAttribute(i,t)}))}for(var o in i){var s=iZ[o]||o.toLowerCase();s in e.attributes||r.push(a(i[o],s))}if(void 0!==t.indices&&!e.index){var l=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));r.push(l)}return gZ(e,t),function(e,t,n){var i=t.attributes,r=new Uh;if(void 0!==i.POSITION){var a=n.json.accessors[i.POSITION],o=a.min,s=a.max;if(void 0!==o&&void 0!==s){if(r.set(new Ph(o[0],o[1],o[2]),new Ph(s[0],s[1],s[2])),a.normalized){var l=pZ($S[a.componentType]);r.min.multiplyScalar(l),r.max.multiplyScalar(l)}var c=t.targets;if(void 0!==c){for(var u=new Ph,g=new Ph,d=0,h=c.length;d<h;d++){var f=c[d];if(void 0!==f.POSITION){var p=n.json.accessors[f.POSITION],I=p.min,C=p.max;if(void 0!==I&&void 0!==C){if(g.setX(Math.max(Math.abs(I[0]),Math.abs(C[0]))),g.setY(Math.max(Math.abs(I[1]),Math.abs(C[1]))),g.setZ(Math.max(Math.abs(I[2]),Math.abs(C[2]))),p.normalized){var m=pZ($S[p.componentType]);g.multiplyScalar(m)}u.max(g)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(u)}e.boundingBox=r;var v=new hf;r.getCenter(v.center),v.radius=r.min.distanceTo(r.max)/2,e.boundingSphere=v}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}(e,t,n),Promise.all(r).then((function(){return void 0!==t.targets?function(e,t,n){for(var i=!1,r=!1,a=!1,o=0,s=t.length;o<s;o++){var l=t[o];if(void 0!==l.POSITION&&(i=!0),void 0!==l.NORMAL&&(r=!0),void 0!==l.COLOR_0&&(a=!0),i&&r&&a)break}if(!i&&!r&&!a)return Promise.resolve(e);for(var c=[],u=[],g=[],d=0,h=t.length;d<h;d++){var f=t[d];if(i){var p=void 0!==f.POSITION?n.getDependency("accessor",f.POSITION):e.attributes.position;c.push(p)}if(r){var I=void 0!==f.NORMAL?n.getDependency("accessor",f.NORMAL):e.attributes.normal;u.push(I)}if(a){var C=void 0!==f.COLOR_0?n.getDependency("accessor",f.COLOR_0):e.attributes.color;g.push(C)}}return Promise.all([Promise.all(c),Promise.all(u),Promise.all(g)]).then((function(t){var n=t[0],o=t[1],s=t[2];return i&&(e.morphAttributes.position=n),r&&(e.morphAttributes.normal=o),a&&(e.morphAttributes.color=s),e.morphTargetsRelative=!0,e}))}(e,t.targets,n):e}))}var vZ=null;function AZ(e,t,n){return function(i){n&&n(i),e&&(vZ||(vZ=new vS),vZ.setDecoderPath("string"===typeof e?e:"https://www.gstatic.com/draco/versioned/decoders/1.5.5/"),i.setDRACOLoader(vZ)),t&&i.setMeshoptDecoder("function"===typeof bS?bS():bS)}}function bZ(e){return cx(GS,e,AZ(!(arguments.length>1&&void 0!==arguments[1])||arguments[1],!(arguments.length>2&&void 0!==arguments[2])||arguments[2],arguments.length>3?arguments[3]:void 0))}function yZ(e,n){var i=t.useRef(),r=c(t.useState((function(){return n?n instanceof Of?{current:n}:n:i})),1)[0],a=c(t.useState((function(){return new zG(void 0)})),1)[0];t.useLayoutEffect((function(){a._root=r.current}),[a,n]);var o=t.useRef({}),s=c(t.useState((function(){var t={};return e.forEach((function(e){return Object.defineProperty(t,e.name,{enumerable:!0,get:function(){if(r.current)return o.current[e.name]||(o.current[e.name]=a.clipAction(e,r.current))},configurable:!0})})),{ref:r,clips:e,actions:t,names:e.map((function(e){return e.name})),mixer:a}})),1)[0];return sx((function(e,t){return a.update(t)})),t.useEffect((function(){var e=r.current;return function(){o.current={},Object.values(s.actions).forEach((function(t){e&&a.uncacheAction(t,e)}))}}),[e]),t.useEffect((function(){return function(){a.stopAllAction()}}),[a]),s}function GZ(e){var n=Object.assign({},(IS(e),e)),i=(0,t.useRef)(),r=c((0,t.useState)(!1),2),a=(r[0],r[1],c((0,t.useState)(!1),2)),o=a[0],s=a[1];sx((function(){o&&(i.current.rotation.y+=.005)}));var l=bZ("/tk_cocuk_web_ds/models/ece.glb"),g=l.nodes,d=l.materials,h=yZ(l.animations,i).actions;return(0,t.useEffect)((function(){h.idle.play()})),(0,u.jsx)("group",Ve(Ve({ref:i},n),{},{dispose:null,children:(0,u.jsx)("group",{name:"Scene",onPointerOver:function(){s(!0)},onPointerOut:function(){s(!1)},children:(0,u.jsxs)("group",{name:"Armature",rotation:[Math.PI/2,0,-Math.PI],scale:.01,children:[(0,u.jsx)("primitive",{object:g.mixamorigHips}),(0,u.jsx)("skinnedMesh",{geometry:g.ece_gozler.geometry,material:d.ece_goz,skeleton:g.ece_gozler.skeleton}),(0,u.jsx)("skinnedMesh",{geometry:g.ece_ayak.geometry,material:d.ece_ayakkabi,skeleton:g.ece_ayak.skeleton}),(0,u.jsx)("skinnedMesh",{geometry:g.ece_tshirt.geometry,material:d.ece_tshirt,skeleton:g.ece_tshirt.skeleton}),(0,u.jsx)("skinnedMesh",{geometry:g.ece_pnt.geometry,material:d.ece_pnt,skeleton:g.ece_pnt.skeleton}),(0,u.jsx)("skinnedMesh",{geometry:g.ece_eller.geometry,material:d.ece_kol,skeleton:g.ece_eller.skeleton}),(0,u.jsx)("skinnedMesh",{geometry:g.ece_sac.geometry,material:d.ece_sac,skeleton:g.ece_sac.skeleton}),(0,u.jsx)("skinnedMesh",{geometry:g.ece_kafa.geometry,material:d.ece_kafa,skeleton:g.ece_kafa.skeleton})]})})}))}function wZ(e){var n=Object.assign({},(IS(e),e)),i=(0,t.useRef)(),r=c((0,t.useState)(!1),2),a=(r[0],r[1],c((0,t.useState)(!1),2)),o=a[0],s=a[1];sx((function(){o&&(i.current.rotation.y+=.005)}));var l=bZ("/tk_cocuk_web_ds/models/ege.glb"),g=l.nodes,d=l.materials,h=yZ(l.animations,i).actions;return(0,t.useEffect)((function(){h.idle.play()})),(0,u.jsx)("group",Ve(Ve({ref:i},n),{},{dispose:null,children:(0,u.jsx)("group",{name:"Scene",onPointerOver:function(){s(!0)},onPointerOut:function(){s(!1)},children:(0,u.jsxs)("group",{name:"Armature",rotation:[Math.PI/2,0,-Math.PI/.8],scale:.01,children:[(0,u.jsx)("primitive",{object:g.mixamorigHips}),(0,u.jsx)("skinnedMesh",{geometry:g.ege_bacak.geometry,material:d.ege_pnt,skeleton:g.ege_bacak.skeleton}),(0,u.jsx)("skinnedMesh",{geometry:g.ege_gozler.geometry,material:d.ege_goz,skeleton:g.ege_gozler.skeleton}),(0,u.jsx)("skinnedMesh",{geometry:g.ege_ayakkabi.geometry,material:d.ege_ayakkabi,skeleton:g.ege_ayakkabi.skeleton}),(0,u.jsx)("skinnedMesh",{geometry:g.ege_govde.geometry,material:d.ege_tshirt,skeleton:g.ege_govde.skeleton}),(0,u.jsx)("skinnedMesh",{geometry:g.ege_kafa.geometry,material:d.ege_kafa,skeleton:g.ege_kafa.skeleton}),(0,u.jsx)("skinnedMesh",{geometry:g.ege_kol.geometry,material:d.ege_kol,skeleton:g.ege_kol.skeleton}),(0,u.jsx)("skinnedMesh",{geometry:g.ege_sac.geometry,material:d.ege_sac,skeleton:g.ege_sac.skeleton})]})})}))}bZ.preload=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3?arguments[3]:void 0;return cx.preload(GS,e,AZ(t,n,i))},bZ.clear=function(e){return cx.clear(GS,e)},bZ.preload("/tk_cocuk_web_ds/models/ece.glb"),bZ.preload("/tk_cocuk_web_ds/models/ege.glb");var BZ=n.p+"static/media/tkc_kuslar1_edit.e83b8fcf1a505682d67a.png",xZ=n.p+"static/media/tkc_kuslar2_edit.76b830f4228cdbfd8a0a.png",SZ=n.p+"static/media/tkc_footer_bg.1e93bf6ef23f2a36c9b8.png";function ZZ(){var e=Qx().progress;return(0,u.jsxs)(cS,{center:!0,children:[" ",(0,u.jsxs)("div",{style:{fontSize:20,color:"black"},children:[Math.round(e)," % y\xfckleniyor"]})]})}var kZ=Vr((function(e){var t,n,i,r;return{root:(t={display:"flex",flexDirection:"column",marginTop:"-8rem"},ke(t,e.breakpoints.up("md"),{flexDirection:"row"}),ke(t,"alignItems","center"),ke(t,"justifyContent","center"),ke(t,"minHeight","100vh"),ke(t,"padding","1rem"),ke(t,"transform","scale(0.8)"),t),left:(n={width:"100%"},ke(n,e.breakpoints.up("md"),{width:"256px",marginRight:"1rem",marginBottom:"0"}),ke(n,"cursor","pointer"),n),right:(i={width:"100%"},ke(i,e.breakpoints.up("md"),{width:"256px",marginLeft:"1rem"}),ke(i,"cursor","pointer"),i),formWrapper:(r={width:"100%"},ke(r,e.breakpoints.up("md"),{width:"30%"}),ke(r,"display","flex"),ke(r,"flexDirection","column"),ke(r,"alignItems","center"),ke(r,"justifyContent","center"),ke(r,"fontSize","12pt"),r),formTitle:{marginBottom:"1rem",fontSize:"14pt"}}})),RZ=function(){var e,n,i=kZ(),r=pe(te),a=c((0,t.useState)(null),2),o=(a[0],a[1]),s=c((0,t.useState)(!1),2),l=s[0],g=s[1],d=(0,t.useRef)(null),h=c(t.useState(!1),2),f=h[0],p=h[1],I=c(t.useState(!1),2),C=(I[0],I[1]);(0,t.useEffect)((function(){var e=navigator.userAgent.toLowerCase();p(!!e.match(/(ipad|iphone|ipod)/i)),C(!!e.match(/android|webos|iphone|ipad|ipod|blackberry|windows phone/i));var t=d.current,n=function(){g(!1)};if(t)return t.addEventListener("ended",n),function(){t.removeEventListener("ended",n)}}),[]);var m=c((0,t.useState)(""),2),v=m[0],A=m[1];return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(Sc,{}),l&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("video",{ref:d,autoPlay:!0,muted:!0,onLoadedData:function(){var e=d.current;e&&e.play()},onEnded:function(){return g(!1)},onStalled:function(){return g(!1)},style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",objectFit:"cover",zIndex:1},children:(0,u.jsx)("source",{src:hc,type:"video/mp4"})}),f&&(null===(e=d.current)||void 0===e||!e.duration)||null!==(n=d.current)&&void 0!==n&&n.paused?(0,u.jsx)("button",{className:"button i-button",onClick:function(){var e=d.current;e&&e.play()},style:{position:"absolute",top:"5%",left:"50%",transform:"translate(-50%, -50%)",zIndex:2},children:"Oynat"}):null]}),!l&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:i.root,children:[(0,u.jsx)("div",{className:"blur",style:{background:"#ffe6ff",top:"5rem",width:"31rem",height:"41rem"}}),(0,u.jsx)("div",{style:{backgroundImage:"url(".concat(BZ,")"),backgroundRepeat:"no-repeat",backgroundSize:"cover",width:"32rem",height:"32rem",display:"flex",justifyContent:"space-between",alignItems:"center",marginLeft:"-8rem",marginTop:"-4rem"},children:(0,u.jsxs)(jx,{camera:{position:[0,0,4.25],fov:15},style:{width:"30vh",height:"60vh",minWidth:"20vw",minHeight:"30vh",marginLeft:"18rem",cursor:"pointer",border:"erkek"===v?"1px solid blue":"kiz"===v?"1px solid pink":"none"},children:[(0,u.jsx)("ambientLight",{intensity:1.25}),(0,u.jsx)("directionalLight",{intensity:.4}),(0,u.jsx)(t.Suspense,{fallback:(0,u.jsx)(ZZ,{}),children:(0,u.jsx)(wZ,{position:[0,-1.2,-3],rotation:[0,-60,0]})}),(0,u.jsx)(pS,{enableZoom:!1,enablePan:!1,rotateSpeed:.5,maxPolarAngle:1.45,minPolarAngle:1.44,maxAzimuthAngle:.1,minAzimuthAngle:-.1})]})}),(0,u.jsxs)("div",{className:i.formWrapper,children:[(0,u.jsx)("h2",{className:i.formTitle,children:"T\xdc\u0130K \xc7ocuk Platformu Giri\u015f"}),(0,u.jsx)("h1",{className:i.formTitle,children:"Bilgileri Doldur ve Karakterini Se\xe7"}),(0,u.jsx)(dc,{onGenderChange:function(e){A(e),console.log("erkek")},onSubmit:function(e){console.log(e),o(e),r.push({pathname:"/main",state:{userInfo:e}})}})]}),(0,u.jsx)("div",{style:{backgroundImage:"url(".concat(xZ,")"),backgroundRepeat:"no-repeat",backgroundSize:"cover",width:"32rem",height:"32rem",display:"flex",justifyContent:"space-between",alignItems:"center",marginLeft:"-2rem",marginTop:"-4rem"},children:(0,u.jsxs)(jx,{camera:{position:[0,0,4.25],fov:15},style:{width:"30vh",height:"60vh",minWidth:"20vw",minHeight:"30vh",cursor:"pointer"},children:[(0,u.jsx)("ambientLight",{intensity:1.25}),(0,u.jsx)("directionalLight",{intensity:.4}),(0,u.jsx)(t.Suspense,{fallback:(0,u.jsx)(ZZ,{}),children:(0,u.jsx)(GZ,{position:[0,-1.2,-3],rotation:[0,-60,0]})}),(0,u.jsx)(pS,{enableZoom:!1,enablePan:!1,rotateSpeed:.5,maxPolarAngle:1.45,minPolarAngle:1.44,maxAzimuthAngle:.1,minAzimuthAngle:-.1})]})})]}),(0,u.jsx)("div",{className:"blur",style:{background:"#e6ffff",top:"5rem",width:"31rem",height:"41rem"}}),(0,u.jsx)("div",{className:"footer",style:{position:"fixed",bottom:0,left:0,right:0,width:"120%",height:"250px",zIndex:-1},children:(0,u.jsx)("img",{src:SZ,alt:"",style:{width:"100%",marginTop:"4rem"}})})]})]})},WZ=n.p+"static/media/tkc_anasayfa.641c030267417782842a.png",MZ=n.p+"static/media/tkc_istatistik.0142d2e7db05660eb5ba.png",VZ=n.p+"static/media/tkc_video.9061614bb8f08fd4df83.png",FZ=n.p+"static/media/tkc_tuik.267d98c2aec79d0e9a0c.png",NZ=function(e){var t=e.img,n=e.onClick;return(0,u.jsx)("div",{className:"floatingDivForMenuAlt",onClick:n,children:(0,u.jsx)("img",{src:t,alt:""})})},HZ=n.p+"static/media/tkc_kuslar1.8e481f5ed9120bc0f1ba.png",TZ=n.p+"static/media/tkc_kuslar2.762348f52d5a39a071c0.png",XZ=function(){var e=c((0,t.useState)(!1),2),n=e[0],i=e[1],r=(0,t.useRef)(null);return(0,t.useEffect)((function(){var e=function(e){r.current&&!r.current.contains(e.target)&&i(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[]),(0,u.jsxs)("nav",{className:"navigation",children:[(0,u.jsxs)("div",{className:"n-left",children:[(0,u.jsx)("div",{className:"navkuslar2",style:{backgroundImage:"url(".concat(TZ,")")},children:" "}),(0,u.jsx)(wc.rU,{to:"Intro",smooth:!0,spy:!0,children:(0,u.jsx)(xc,{img:Bc})}),(0,u.jsx)("div",{className:"navkuslar1",style:{backgroundImage:"url(".concat(HZ,")")}})]}),(0,u.jsx)("button",{className:"hamburger",onClick:function(){i(!n)},children:(0,u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"white",children:(0,u.jsx)("path",{fillRule:"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM9 15a1 1 0 011-1h6a1 1 0 110 2h-6a1 1 0 01-1-1z",clipRule:"evenodd"})})}),(0,u.jsxs)("div",{className:n?"navigation-menu expanded":"navigation-menu",ref:r,children:[(0,u.jsx)("div",{className:"n-right",children:(0,u.jsx)("div",{className:"n-list",children:(0,u.jsxs)("ul",{style:{listStyleType:"none"},className:"n-list",children:[(0,u.jsx)("li",{className:"n-list",children:(0,u.jsx)(wc.rU,{to:"Intro",spy:!0,smooth:!0,onClick:function(){setTimeout((function(){return i(!1)}),300)},children:(0,u.jsx)(NZ,{img:WZ})})}),(0,u.jsx)("li",{className:"n-list",children:(0,u.jsx)(wc.rU,{to:"istatistik",spy:!0,smooth:!0,onClick:function(){setTimeout((function(){return i(!1)}),300)},children:(0,u.jsx)(NZ,{img:MZ})})}),(0,u.jsx)("li",{className:"n-list",children:(0,u.jsx)(wc.rU,{to:"works",spy:!0,smooth:!0,onClick:function(){setTimeout((function(){return i(!1)}),300)},children:(0,u.jsx)(NZ,{img:VZ})})}),(0,u.jsx)("li",{className:"n-list",children:(0,u.jsx)(wc.rU,{to:"tuik",spy:!0,smooth:!0,onClick:function(){setTimeout((function(){return i(!1)}),300)},children:(0,u.jsx)(NZ,{img:FZ})})})]})})}),(0,u.jsx)(Gc,{})]})]})},YZ=(n.p,n.p+"static/media/g1.6a03d23c20464e70075b.png"),EZ=(n.p,n.p+"static/media/g3.8e4be998d605515a61e7.png"),zZ=(n.p,function(e,t){return zZ=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},zZ(e,t)});function LZ(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}zZ(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var KZ=function(){return KZ=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},KZ.apply(this,arguments)};function _Z(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}function PZ(e,t,n,i){return new(n||(n=Promise))((function(r,a){function o(e){try{l(i.next(e))}catch(t){a(t)}}function s(e){try{l(i.throw(e))}catch(t){a(t)}}function l(e){e.done?r(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,s)}l((i=i.apply(e,t||[])).next())}))}function DZ(e,t){var n,i,r,a,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(l){s=[6,l],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}Object.create;function OZ(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=a.next()).done;)o.push(i.value)}catch(s){r={error:s}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return o}function UZ(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(OZ(arguments[t]));return e}function jZ(e,t,n){if(n||2===arguments.length)for(var i,r=0,a=t.length;r<a;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}Object.create;var JZ="production",QZ=function(e){return{isEnabled:function(t){return e.some((function(e){return!!t[e]}))}}},qZ={measureLayout:QZ(["layout","layoutId","drag"]),animation:QZ(["animate","exit","variants","whileHover","whileTap","whileFocus","whileDrag","whileInView"]),exit:QZ(["exit"]),drag:QZ(["drag","dragControls"]),focus:QZ(["whileFocus"]),hover:QZ(["whileHover","onHoverStart","onHoverEnd"]),tap:QZ(["whileTap","onTap","onTapStart","onTapCancel"]),pan:QZ(["onPan","onPanStart","onPanSessionStart","onPanEnd"]),inView:QZ(["whileInView","onViewportEnter","onViewportLeave"])};var $Z=function(){},ek=function(){};var tk=(0,t.createContext)({strict:!1}),nk=Object.keys(qZ),ik=nk.length;var rk=(0,t.createContext)({transformPagePoint:function(e){return e},isStatic:!1,reducedMotion:"never"}),ak=(0,t.createContext)({});var ok=(0,t.createContext)(null),sk="undefined"!==typeof document,lk=sk?t.useLayoutEffect:t.useEffect,ck={current:null},uk=!1;function gk(){return!uk&&function(){if(uk=!0,sk)if(window.matchMedia){var e=window.matchMedia("(prefers-reduced-motion)"),t=function(){return ck.current=e.matches};e.addListener(t),t()}else ck.current=!1}(),OZ((0,t.useState)(ck.current),1)[0]}function dk(e,n,i,r){var a=(0,t.useContext)(tk),o=(0,t.useContext)(ak).visualElement,s=(0,t.useContext)(ok),l=function(){var e=gk(),n=(0,t.useContext)(rk).reducedMotion;return"never"!==n&&("always"===n||e)}(),c=(0,t.useRef)(void 0);r||(r=a.renderer),!c.current&&r&&(c.current=r(e,{visualState:n,parent:o,props:i,presenceId:null===s||void 0===s?void 0:s.id,blockInitialAnimation:!1===(null===s||void 0===s?void 0:s.initial),shouldReduceMotion:l}));var u=c.current;return lk((function(){null===u||void 0===u||u.syncRender()})),(0,t.useEffect)((function(){var e;null===(e=null===u||void 0===u?void 0:u.animationState)||void 0===e||e.animateChanges()})),lk((function(){return function(){return null===u||void 0===u?void 0:u.notifyUnmount()}}),[]),u}function hk(e){return"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function fk(e){return Array.isArray(e)}function pk(e){return"string"===typeof e||fk(e)}function Ik(e,t,n,i,r){var a;return void 0===i&&(i={}),void 0===r&&(r={}),"function"===typeof t&&(t=t(null!==n&&void 0!==n?n:e.custom,i,r)),"string"===typeof t&&(t=null===(a=e.variants)||void 0===a?void 0:a[t]),"function"===typeof t&&(t=t(null!==n&&void 0!==n?n:e.custom,i,r)),t}function Ck(e,t,n){var i=e.getProps();return Ik(i,t,null!==n&&void 0!==n?n:i.custom,function(e){var t={};return e.forEachValue((function(e,n){return t[n]=e.get()})),t}(e),function(e){var t={};return e.forEachValue((function(e,n){return t[n]=e.getVelocity()})),t}(e))}function mk(e){var t;return"function"===typeof(null===(t=e.animate)||void 0===t?void 0:t.start)||pk(e.initial)||pk(e.animate)||pk(e.whileHover)||pk(e.whileDrag)||pk(e.whileTap)||pk(e.whileFocus)||pk(e.exit)}function vk(e){return Boolean(mk(e)||e.variants)}function Ak(e){var n=function(e,t){if(mk(e)){var n=e.initial,i=e.animate;return{initial:!1===n||pk(n)?n:void 0,animate:pk(i)?i:void 0}}return!1!==e.inherit?t:{}}(e,(0,t.useContext)(ak)),i=n.initial,r=n.animate;return(0,t.useMemo)((function(){return{initial:i,animate:r}}),[bk(i),bk(r)])}function bk(e){return Array.isArray(e)?e.join(" "):e}function yk(e){var n=(0,t.useRef)(null);return null===n.current&&(n.current=e()),n.current}var Gk={hasAnimatedSinceResize:!0,hasEverUpdated:!1},wk=1;var Bk=(0,t.createContext)({}),xk=(0,t.createContext)({});var Sk=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return LZ(t,e),t.prototype.getSnapshotBeforeUpdate=function(){return this.updateProps(),null},t.prototype.componentDidUpdate=function(){},t.prototype.updateProps=function(){var e=this.props,t=e.visualElement,n=e.props;t&&t.setProps(n)},t.prototype.render=function(){return this.props.children},t}(t.Component);function Zk(e){var n=e.preloadedFeatures,i=e.createVisualElement,r=e.projectionNodeConstructor,a=e.useRender,o=e.useVisualState,s=e.Component;return n&&function(e){for(var t in e)null!==e[t]&&("projectionNodeConstructor"===t?qZ.projectionNodeConstructor=e[t]:qZ[t].Component=e[t])}(n),(0,t.forwardRef)((function(e,l){var c=function(e){var n,i=e.layoutId,r=null===(n=(0,t.useContext)(Bk))||void 0===n?void 0:n.id;return r&&void 0!==i?r+"-"+i:i}(e);e=KZ(KZ({},e),{layoutId:c});var u=(0,t.useContext)(rk),g=null,d=Ak(e),h=u.isStatic?void 0:yk((function(){if(Gk.hasEverUpdated)return wk++})),f=o(e,u.isStatic);return!u.isStatic&&sk&&(d.visualElement=dk(s,f,KZ(KZ({},u),e),i),function(e,n,i,r){var a,o=n.layoutId,s=n.layout,l=n.drag,c=n.dragConstraints,u=n.layoutScroll,g=(0,t.useContext)(xk);r&&i&&!(null===i||void 0===i?void 0:i.projection)&&(i.projection=new r(e,i.getLatestValues(),null===(a=i.parent)||void 0===a?void 0:a.projection),i.projection.setOptions({layoutId:o,layout:s,alwaysMeasureLayout:Boolean(l)||c&&hk(c),visualElement:i,scheduleRender:function(){return i.scheduleRender()},animationType:"string"===typeof s?s:"both",initialPromotionConfig:g,layoutScroll:u}))}(h,e,d.visualElement,r||qZ.projectionNodeConstructor),g=function(e,n,i){var r=[],a=(0,t.useContext)(tk);if(!n)return null;"production"!==JZ&&i&&a.strict&&ek(!1,"You have rendered a `motion` component within a `LazyMotion` component. This will break tree shaking. Import and render a `m` component instead.");for(var o=0;o<ik;o++){var s=nk[o],l=qZ[s],c=l.isEnabled,u=l.Component;c(e)&&u&&r.push(t.createElement(u,KZ({key:s},e,{visualElement:n})))}return r}(e,d.visualElement,n)),t.createElement(Sk,{visualElement:d.visualElement,props:KZ(KZ({},u),e)},g,t.createElement(ak.Provider,{value:d},a(s,e,h,function(e,n,i){return(0,t.useCallback)((function(t){var r;t&&(null===(r=e.mount)||void 0===r||r.call(e,t)),n&&(t?n.mount(t):n.unmount()),i&&("function"===typeof i?i(t):hk(i)&&(i.current=t))}),[n])}(f,d.visualElement,l),f,u.isStatic,d.visualElement)))}))}function kk(e){function t(t,n){return void 0===n&&(n={}),Zk(e(t,n))}if("undefined"===typeof Proxy)return t;var n=new Map;return new Proxy(t,{get:function(e,i){return n.has(i)||n.set(i,t(i)),n.get(i)}})}var Rk=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","svg","switch","symbol","text","tspan","use","view"];function Wk(e){return"string"===typeof e&&!e.includes("-")&&!!(Rk.indexOf(e)>-1||/[A-Z]/.test(e))}var Mk={};var Vk=["","X","Y","Z"],Fk=["transformPerspective","x","y","z"];function Nk(e,t){return Fk.indexOf(e)-Fk.indexOf(t)}["translate","scale","rotate","skew"].forEach((function(e){return Vk.forEach((function(t){return Fk.push(e+t)}))}));var Hk=new Set(Fk);function Tk(e){return Hk.has(e)}var Xk=new Set(["originX","originY","originZ"]);function Yk(e){return Xk.has(e)}function Ek(e,t){var n=t.layout,i=t.layoutId;return Tk(e)||Yk(e)||(n||void 0!==i)&&(!!Mk[e]||"opacity"===e)}var zk=function(e){return Boolean(null!==e&&"object"===typeof e&&e.getVelocity)},Lk={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"};function Kk(e){return e.startsWith("--")}var _k=function(e,t){return t&&"number"===typeof e?t.transform(e):e},Pk=function(e,t){return function(n){return Math.max(Math.min(n,t),e)}},Dk=function(e){return e%1?Number(e.toFixed(5)):e},Ok=/(-)?([\d]*\.?[\d])+/g,Uk=/(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))/gi,jk=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))$/i;function Jk(e){return"string"===typeof e}var Qk=function(e){return{test:function(t){return Jk(t)&&t.endsWith(e)&&1===t.split(" ").length},parse:parseFloat,transform:function(t){return"".concat(t).concat(e)}}},qk=Qk("deg"),$k=Qk("%"),eR=Qk("px"),tR=Qk("vh"),nR=Qk("vw"),iR=Object.assign(Object.assign({},$k),{parse:function(e){return $k.parse(e)/100},transform:function(e){return $k.transform(100*e)}}),rR={test:function(e){return"number"===typeof e},parse:parseFloat,transform:function(e){return e}},aR=Object.assign(Object.assign({},rR),{transform:Pk(0,1)}),oR=Object.assign(Object.assign({},rR),{default:1}),sR=KZ(KZ({},rR),{transform:Math.round}),lR={borderWidth:eR,borderTopWidth:eR,borderRightWidth:eR,borderBottomWidth:eR,borderLeftWidth:eR,borderRadius:eR,radius:eR,borderTopLeftRadius:eR,borderTopRightRadius:eR,borderBottomRightRadius:eR,borderBottomLeftRadius:eR,width:eR,maxWidth:eR,height:eR,maxHeight:eR,size:eR,top:eR,right:eR,bottom:eR,left:eR,padding:eR,paddingTop:eR,paddingRight:eR,paddingBottom:eR,paddingLeft:eR,margin:eR,marginTop:eR,marginRight:eR,marginBottom:eR,marginLeft:eR,rotate:qk,rotateX:qk,rotateY:qk,rotateZ:qk,scale:oR,scaleX:oR,scaleY:oR,scaleZ:oR,skew:qk,skewX:qk,skewY:qk,distance:eR,translateX:eR,translateY:eR,translateZ:eR,x:eR,y:eR,z:eR,perspective:eR,transformPerspective:eR,opacity:aR,originX:iR,originY:iR,originZ:eR,zIndex:sR,fillOpacity:aR,strokeOpacity:aR,numOctaves:sR};function cR(e,t,n,i){var r,a=e.style,o=e.vars,s=e.transform,l=e.transformKeys,c=e.transformOrigin;l.length=0;var u=!1,g=!1,d=!0;for(var h in t){var f=t[h];if(Kk(h))o[h]=f;else{var p=lR[h],I=_k(f,p);if(Tk(h)){if(u=!0,s[h]=I,l.push(h),!d)continue;f!==(null!==(r=p.default)&&void 0!==r?r:0)&&(d=!1)}else Yk(h)?(c[h]=I,g=!0):a[h]=I}}u?a.transform=function(e,t,n,i){var r=e.transform,a=e.transformKeys,o=t.enableHardwareAcceleration,s=void 0===o||o,l=t.allowTransformNone,c=void 0===l||l,u="";a.sort(Nk);for(var g=!1,d=a.length,h=0;h<d;h++){var f=a[h];u+="".concat(Lk[f]||f,"(").concat(r[f],") "),"z"===f&&(g=!0)}return!g&&s?u+="translateZ(0)":u=u.trim(),i?u=i(r,n?"":u):c&&n&&(u="none"),u}(e,n,d,i):i?a.transform=i({},""):!t.transform&&a.transform&&(a.transform="none"),g&&(a.transformOrigin=function(e){var t=e.originX,n=void 0===t?"50%":t,i=e.originY,r=void 0===i?"50%":i,a=e.originZ,o=void 0===a?0:a;return"".concat(n," ").concat(r," ").concat(o)}(c))}var uR=function(){return{style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}}};function gR(e,t,n){for(var i in t)zk(t[i])||Ek(i,n)||(e[i]=t[i])}function dR(e,n,i){var r={};return gR(r,e.style||{},e),Object.assign(r,function(e,n,i){var r=e.transformTemplate;return(0,t.useMemo)((function(){var e=uR();cR(e,n,{enableHardwareAcceleration:!i},r);var t=e.vars,a=e.style;return KZ(KZ({},t),a)}),[n])}(e,n,i)),e.transformValues&&(r=e.transformValues(r)),r}function hR(e,t,n){var i={},r=dR(e,t,n);return Boolean(e.drag)&&!1!==e.dragListener&&(i.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=!0===e.drag?"none":"pan-".concat("x"===e.drag?"y":"x")),i.style=r,i}var fR=new Set(["initial","animate","exit","style","variants","transition","transformTemplate","transformValues","custom","inherit","layout","layoutId","layoutDependency","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","drag","dragControls","dragListener","dragConstraints","dragDirectionLock","dragSnapToOrigin","_dragX","_dragY","dragElastic","dragMomentum","dragPropagation","dragTransition","whileDrag","onPan","onPanStart","onPanEnd","onPanSessionStart","onTap","onTapStart","onTapCancel","onHoverStart","onHoverEnd","whileFocus","whileTap","whileHover","whileInView","onViewportEnter","onViewportLeave","viewport","layoutScroll"]);function pR(e){return fR.has(e)}var IR,CR=function(e){return!pR(e)};try{(IR=require("@emotion/is-prop-valid").default)&&(CR=function(e){return e.startsWith("on")?!pR(e):IR(e)})}catch(J4){}function mR(e,t,n){return"string"===typeof e?e:eR.transform(t+n*e)}var vR={offset:"stroke-dashoffset",array:"stroke-dasharray"},AR={offset:"strokeDashoffset",array:"strokeDasharray"};function bR(e,t,n,i){var r=t.attrX,a=t.attrY,o=t.originX,s=t.originY,l=t.pathLength,c=t.pathSpacing,u=void 0===c?1:c,g=t.pathOffset,d=void 0===g?0:g;cR(e,_Z(t,["attrX","attrY","originX","originY","pathLength","pathSpacing","pathOffset"]),n,i),e.attrs=e.style,e.style={};var h=e.attrs,f=e.style,p=e.dimensions;h.transform&&(p&&(f.transform=h.transform),delete h.transform),p&&(void 0!==o||void 0!==s||f.transform)&&(f.transformOrigin=function(e,t,n){var i=mR(t,e.x,e.width),r=mR(n,e.y,e.height);return"".concat(i," ").concat(r)}(p,void 0!==o?o:.5,void 0!==s?s:.5)),void 0!==r&&(h.x=r),void 0!==a&&(h.y=a),void 0!==l&&function(e,t,n,i,r){void 0===n&&(n=1),void 0===i&&(i=0),void 0===r&&(r=!0),e.pathLength=1;var a=r?vR:AR;e[a.offset]=eR.transform(-i);var o=eR.transform(t),s=eR.transform(n);e[a.array]="".concat(o," ").concat(s)}(h,l,u,d,!1)}var yR=function(){return KZ(KZ({},uR()),{attrs:{}})};function GR(e,n){var i=(0,t.useMemo)((function(){var t=yR();return bR(t,n,{enableHardwareAcceleration:!1},e.transformTemplate),KZ(KZ({},t.attrs),{style:KZ({},t.style)})}),[n]);if(e.style){var r={};gR(r,e.style,e),i.style=KZ(KZ({},r),i.style)}return i}function wR(e){void 0===e&&(e=!1);return function(n,i,r,a,o,s){var l=o.latestValues,c=(Wk(n)?GR:hR)(i,l,s),u=function(e,t,n){var i={};for(var r in e)(CR(r)||!0===n&&pR(r)||!t&&!pR(r)||e.draggable&&r.startsWith("onDrag"))&&(i[r]=e[r]);return i}(i,"string"===typeof n,e),g=KZ(KZ(KZ({},u),c),{ref:a});return r&&(g["data-projection-id"]=r),(0,t.createElement)(n,g)}}var BR=/([a-z])([A-Z])/g,xR=function(e){return e.replace(BR,"$1-$2").toLowerCase()};function SR(e,t,n,i){var r=t.style,a=t.vars;for(var o in Object.assign(e.style,r,i&&i.getProjectionStyles(n)),a)e.style.setProperty(o,a[o])}var ZR=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength"]);function kR(e,t,n,i){for(var r in SR(e,t,void 0,i),t.attrs)e.setAttribute(ZR.has(r)?r:xR(r),t.attrs[r])}function RR(e){var t=e.style,n={};for(var i in t)(zk(t[i])||Ek(i,e))&&(n[i]=t[i]);return n}function WR(e){var t=RR(e);for(var n in e){if(zk(e[n]))t["x"===n||"y"===n?"attr"+n.toUpperCase():n]=e[n]}return t}function MR(e){return"object"===typeof e&&"function"===typeof e.start}var VR=function(e){return Array.isArray(e)},FR=function(e){return Boolean(e&&"object"===typeof e&&e.mix&&e.toValue)},NR=function(e){return VR(e)?e[e.length-1]||0:e};function HR(e){var t=zk(e)?e.get():e;return FR(t)?t.toValue():t}function TR(e,t,n,i){var r=e.scrapeMotionValuesFromProps,a=e.createRenderState,o=e.onMount,s={latestValues:YR(t,n,i,r),renderState:a()};return o&&(s.mount=function(e){return o(t,e,s)}),s}var XR=function(e){return function(n,i){var r=(0,t.useContext)(ak),a=(0,t.useContext)(ok);return i?TR(e,n,r,a):yk((function(){return TR(e,n,r,a)}))}};function YR(e,t,n,i){var r={},a=!1===(null===n||void 0===n?void 0:n.initial),o=i(e);for(var s in o)r[s]=HR(o[s]);var l=e.initial,c=e.animate,u=mk(e),g=vk(e);t&&g&&!u&&!1!==e.inherit&&(null!==l&&void 0!==l||(l=t.initial),null!==c&&void 0!==c||(c=t.animate));var d=a||!1===l,h=d?c:l;h&&"boolean"!==typeof h&&!MR(h)&&(Array.isArray(h)?h:[h]).forEach((function(t){var n=Ik(e,t);if(n){var i=n.transitionEnd;n.transition;var a=_Z(n,["transitionEnd","transition"]);for(var o in a){var s=a[o];if(Array.isArray(s))s=s[d?s.length-1:0];null!==s&&(r[o]=s)}for(var o in i)r[o]=i[o]}}));return r}var ER,zR={useVisualState:XR({scrapeMotionValuesFromProps:WR,createRenderState:yR,onMount:function(e,t,n){var i=n.renderState,r=n.latestValues;try{i.dimensions="function"===typeof t.getBBox?t.getBBox():t.getBoundingClientRect()}catch(a){i.dimensions={x:0,y:0,width:0,height:0}}bR(i,r,{enableHardwareAcceleration:!1},e.transformTemplate),kR(t,i)}})},LR={useVisualState:XR({scrapeMotionValuesFromProps:RR,createRenderState:uR})};function KR(e,t,n,i){return void 0===i&&(i={passive:!0}),e.addEventListener(t,n,i),function(){return e.removeEventListener(t,n)}}function _R(e,n,i,r){(0,t.useEffect)((function(){var t=e.current;if(i&&t)return KR(t,n,i,r)}),[e,n,i,r])}function PR(e){return"undefined"!==typeof PointerEvent&&e instanceof PointerEvent?!("mouse"!==e.pointerType):e instanceof MouseEvent}function DR(e){return!!e.touches}!function(e){e.Animate="animate",e.Hover="whileHover",e.Tap="whileTap",e.Drag="whileDrag",e.Focus="whileFocus",e.InView="whileInView",e.Exit="exit"}(ER||(ER={}));var OR={pageX:0,pageY:0};function UR(e,t){void 0===t&&(t="page");var n=e.touches[0]||e.changedTouches[0]||OR;return{x:n[t+"X"],y:n[t+"Y"]}}function jR(e,t){return void 0===t&&(t="page"),{x:e[t+"X"],y:e[t+"Y"]}}function JR(e,t){return void 0===t&&(t="page"),{point:DR(e)?UR(e,t):jR(e,t)}}var QR=function(e,t){void 0===t&&(t=!1);var n,i=function(t){return e(t,JR(t))};return t?(n=i,function(e){var t=e instanceof MouseEvent;(!t||t&&0===e.button)&&n(e)}):i},qR=function(){return sk&&null===window.onpointerdown},$R=function(){return sk&&null===window.ontouchstart},eW=function(){return sk&&null===window.onmousedown},tW={pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointercancel:"mousecancel",pointerover:"mouseover",pointerout:"mouseout",pointerenter:"mouseenter",pointerleave:"mouseleave"},nW={pointerdown:"touchstart",pointermove:"touchmove",pointerup:"touchend",pointercancel:"touchcancel"};function iW(e){return qR()?e:$R()?nW[e]:eW()?tW[e]:e}function rW(e,t,n,i){return KR(e,iW(t),QR(n,"pointerdown"===t),i)}function aW(e,t,n,i){return _R(e,iW(t),n&&QR(n,"pointerdown"===t),i)}function oW(e){var t=null;return function(){return null===t&&(t=e,function(){t=null})}}var sW=oW("dragHorizontal"),lW=oW("dragVertical");function cW(e){var t=!1;if("y"===e)t=lW();else if("x"===e)t=sW();else{var n=sW(),i=lW();n&&i?t=function(){n(),i()}:(n&&n(),i&&i())}return t}function uW(){var e=cW(!0);return!e||(e(),!1)}function gW(e,t,n){return function(i,r){var a;PR(i)&&!uW()&&(null===(a=e.animationState)||void 0===a||a.setActive(ER.Hover,t),null===n||void 0===n||n(i,r))}}var dW=function e(t,n){return!!n&&(t===n||e(t,n.parentElement))};function hW(e){return(0,t.useEffect)((function(){return function(){return e()}}),[])}var fW=function(e,t){return function(n){return t(e(n))}},pW=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(fW)};var IW=new Set;var CW=new WeakMap,mW=new WeakMap,vW=function(e){var t;null===(t=CW.get(e.target))||void 0===t||t(e)},AW=function(e){e.forEach(vW)};function bW(e,t,n){var i=function(e){var t=e.root,n=_Z(e,["root"]),i=t||document;mW.has(i)||mW.set(i,{});var r=mW.get(i),a=JSON.stringify(n);return r[a]||(r[a]=new IntersectionObserver(AW,KZ({root:t},n))),r[a]}(t);return CW.set(e,n),i.observe(e),function(){CW.delete(e),i.unobserve(e)}}var yW={some:0,all:1};function GW(e,n,i,r){var a=r.root,o=r.margin,s=r.amount,l=void 0===s?"some":s,c=r.once;(0,t.useEffect)((function(){if(e){var t={root:null===a||void 0===a?void 0:a.current,rootMargin:o,threshold:"number"===typeof l?l:yW[l]};return bW(i.getInstance(),t,(function(e){var t,r=e.isIntersecting;if(n.isInView!==r&&(n.isInView=r,!c||r||!n.hasEnteredView)){r&&(n.hasEnteredView=!0),null===(t=i.animationState)||void 0===t||t.setActive(ER.InView,r);var a=i.getProps(),o=r?a.onViewportEnter:a.onViewportLeave;null===o||void 0===o||o(e)}}))}}),[e,a,o,l])}function wW(e,n,i,r){var a=r.fallback,o=void 0===a||a;(0,t.useEffect)((function(){var t,r;e&&o&&("production"!==JZ&&(t="IntersectionObserver not available on this device. whileInView animations will trigger on mount.",!1||IW.has(t)||(console.warn(t),r&&console.warn(r),IW.add(t))),requestAnimationFrame((function(){var e;n.hasEnteredView=!0;var t=i.getProps().onViewportEnter;null===t||void 0===t||t(null),null===(e=i.animationState)||void 0===e||e.setActive(ER.InView,!0)})))}),[e])}var BW=function(e){return function(t){return e(t),null}},xW={inView:BW((function(e){var n=e.visualElement,i=e.whileInView,r=e.onViewportEnter,a=e.onViewportLeave,o=e.viewport,s=void 0===o?{}:o,l=(0,t.useRef)({hasEnteredView:!1,isInView:!1}),c=Boolean(i||r||a);s.once&&l.current.hasEnteredView&&(c=!1),("undefined"===typeof IntersectionObserver?wW:GW)(c,l.current,n,s)})),tap:BW((function(e){var n=e.onTap,i=e.onTapStart,r=e.onTapCancel,a=e.whileTap,o=e.visualElement,s=n||i||r||a,l=(0,t.useRef)(!1),c=(0,t.useRef)(null),u={passive:!(i||n||r||p)};function g(){var e;null===(e=c.current)||void 0===e||e.call(c),c.current=null}function d(){var e;return g(),l.current=!1,null===(e=o.animationState)||void 0===e||e.setActive(ER.Tap,!1),!uW()}function h(e,t){d()&&(dW(o.getInstance(),e.target)?null===n||void 0===n||n(e,t):null===r||void 0===r||r(e,t))}function f(e,t){d()&&(null===r||void 0===r||r(e,t))}function p(e,t){var n;g(),l.current||(l.current=!0,c.current=pW(rW(window,"pointerup",h,u),rW(window,"pointercancel",f,u)),null===(n=o.animationState)||void 0===n||n.setActive(ER.Tap,!0),null===i||void 0===i||i(e,t))}aW(o,"pointerdown",s?p:void 0,u),hW(g)})),focus:BW((function(e){var t=e.whileFocus,n=e.visualElement;_R(n,"focus",t?function(){var e;null===(e=n.animationState)||void 0===e||e.setActive(ER.Focus,!0)}:void 0),_R(n,"blur",t?function(){var e;null===(e=n.animationState)||void 0===e||e.setActive(ER.Focus,!1)}:void 0)})),hover:BW((function(e){var t=e.onHoverStart,n=e.onHoverEnd,i=e.whileHover,r=e.visualElement;aW(r,"pointerenter",t||i?gW(r,!0,t):void 0,{passive:!t}),aW(r,"pointerleave",n||i?gW(r,!1,n):void 0,{passive:!n})}))},SW=0,ZW=function(){return SW++},kW=function(){return yk(ZW)};function RW(){var e=(0,t.useContext)(ok);if(null===e)return[!0,null];var n=e.isPresent,i=e.onExitComplete,r=e.register,a=kW();(0,t.useEffect)((function(){return r(a)}),[]);return!n&&i?[!1,function(){return null===i||void 0===i?void 0:i(a)}]:[!0]}function WW(e,t){if(!Array.isArray(t))return!1;var n=t.length;if(n!==e.length)return!1;for(var i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}var MW=function(e,t,n){return Math.min(Math.max(n,e),t)},VW=.001,FW=.01,NW=10,HW=.05,TW=1;function XW(e){var t,n,i=e.duration,r=void 0===i?800:i,a=e.bounce,o=void 0===a?.25:a,s=e.velocity,l=void 0===s?0:s,c=e.mass,u=void 0===c?1:c;$Z(r<=1e3*NW,"Spring duration must be 10 seconds or less");var g=1-o;g=MW(HW,TW,g),r=MW(FW,NW,r/1e3),g<1?(t=function(e){var t=e*g,n=t*r,i=t-l,a=EW(e,g),o=Math.exp(-n);return VW-i/a*o},n=function(e){var n=e*g*r,i=n*l+l,a=Math.pow(g,2)*Math.pow(e,2)*r,o=Math.exp(-n),s=EW(Math.pow(e,2),g);return(-t(e)+VW>0?-1:1)*((i-a)*o)/s}):(t=function(e){return Math.exp(-e*r)*((e-l)*r+1)-VW},n=function(e){return Math.exp(-e*r)*(r*r*(l-e))});var d=function(e,t,n){for(var i=n,r=1;r<YW;r++)i-=e(i)/t(i);return i}(t,n,5/r);if(r*=1e3,isNaN(d))return{stiffness:100,damping:10,duration:r};var h=Math.pow(d,2)*u;return{stiffness:h,damping:2*g*Math.sqrt(u*h),duration:r}}var YW=12;function EW(e,t){return e*Math.sqrt(1-t*t)}var zW=["duration","bounce"],LW=["stiffness","damping","mass"];function KW(e,t){return t.some((function(t){return void 0!==e[t]}))}function _W(e){var t=e.from,n=void 0===t?0:t,i=e.to,r=void 0===i?1:i,a=e.restSpeed,o=void 0===a?2:a,s=e.restDelta,l=_Z(e,["from","to","restSpeed","restDelta"]),c={done:!1,value:n},u=function(e){var t=Object.assign({velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1},e);if(!KW(e,LW)&&KW(e,zW)){var n=XW(e);(t=Object.assign(Object.assign(Object.assign({},t),n),{velocity:0,mass:1})).isResolvedFromDuration=!0}return t}(l),g=u.stiffness,d=u.damping,h=u.mass,f=u.velocity,p=u.duration,I=u.isResolvedFromDuration,C=PW,m=PW;function v(){var e=f?-f/1e3:0,t=r-n,i=d/(2*Math.sqrt(g*h)),a=Math.sqrt(g/h)/1e3;if(void 0===s&&(s=Math.min(Math.abs(r-n)/100,.4)),i<1){var o=EW(a,i);C=function(n){var s=Math.exp(-i*a*n);return r-s*((e+i*a*t)/o*Math.sin(o*n)+t*Math.cos(o*n))},m=function(n){var r=Math.exp(-i*a*n);return i*a*r*(Math.sin(o*n)*(e+i*a*t)/o+t*Math.cos(o*n))-r*(Math.cos(o*n)*(e+i*a*t)-o*t*Math.sin(o*n))}}else if(1===i)C=function(n){return r-Math.exp(-a*n)*(t+(e+a*t)*n)};else{var l=a*Math.sqrt(i*i-1);C=function(n){var o=Math.exp(-i*a*n),s=Math.min(l*n,300);return r-o*((e+i*a*t)*Math.sinh(s)+l*t*Math.cosh(s))/l}}}return v(),{next:function(e){var t=C(e);if(I)c.done=e>=p;else{var n=1e3*m(e),i=Math.abs(n)<=o,a=Math.abs(r-t)<=s;c.done=i&&a}return c.value=c.done?r:t,c},flipTarget:function(){f=-f;var e=[r,n];n=e[0],r=e[1],v()}}}_W.needsInterpolation=function(e,t){return"string"===typeof e||"string"===typeof t};var PW=function(e){return 0},DW=function(e,t,n){var i=t-e;return 0===i?1:(n-e)/i},OW=function(e,t,n){return-n*e+n*t+e},UW=function(e,t){return function(n){return Boolean(Jk(n)&&jk.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t))}},jW=function(e,t,n){return function(i){var r;if(!Jk(i))return i;var a=c(i.match(Ok),4),o=a[0],s=a[1],l=a[2],u=a[3];return ke(r={},e,parseFloat(o)),ke(r,t,parseFloat(s)),ke(r,n,parseFloat(l)),ke(r,"alpha",void 0!==u?parseFloat(u):1),r}},JW=Pk(0,255),QW=Object.assign(Object.assign({},rR),{transform:function(e){return Math.round(JW(e))}}),qW={test:UW("rgb","red"),parse:jW("red","green","blue"),transform:function(e){var t=e.red,n=e.green,i=e.blue,r=e.alpha,a=void 0===r?1:r;return"rgba("+QW.transform(t)+", "+QW.transform(n)+", "+QW.transform(i)+", "+Dk(aR.transform(a))+")"}};var $W={test:UW("#"),parse:function(e){var t="",n="",i="",r="";return e.length>5?(t=e.substr(1,2),n=e.substr(3,2),i=e.substr(5,2),r=e.substr(7,2)):(t=e.substr(1,1),n=e.substr(2,1),i=e.substr(3,1),r=e.substr(4,1),t+=t,n+=n,i+=i,r+=r),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}},transform:qW.transform},eM={test:UW("hsl","hue"),parse:jW("hue","saturation","lightness"),transform:function(e){var t=e.hue,n=e.saturation,i=e.lightness,r=e.alpha,a=void 0===r?1:r;return"hsla("+Math.round(t)+", "+$k.transform(Dk(n))+", "+$k.transform(Dk(i))+", "+Dk(aR.transform(a))+")"}};function tM(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function nM(e){var t=e.hue,n=e.saturation,i=e.lightness,r=e.alpha;t/=360,i/=100;var a=0,o=0,s=0;if(n/=100){var l=i<.5?i*(1+n):i+n-i*n,c=2*i-l;a=tM(c,l,t+1/3),o=tM(c,l,t),s=tM(c,l,t-1/3)}else a=o=s=i;return{red:Math.round(255*a),green:Math.round(255*o),blue:Math.round(255*s),alpha:r}}var iM=function(e,t,n){var i=e*e,r=t*t;return Math.sqrt(Math.max(0,n*(r-i)+i))},rM=[$W,qW,eM],aM=function(e){return rM.find((function(t){return t.test(e)}))},oM=function(e){return"'".concat(e,"' is not an animatable color. Use the equivalent color code instead.")},sM=function(e,t){var n=aM(e),i=aM(t);ek(!!n,oM(e)),ek(!!i,oM(t));var r=n.parse(e),a=i.parse(t);n===eM&&(r=nM(r),n=qW),i===eM&&(a=nM(a),i=qW);var o=Object.assign({},r);return function(e){for(var t in o)"alpha"!==t&&(o[t]=iM(r[t],a[t],e));return o.alpha=OW(r.alpha,a.alpha,e),n.transform(o)}},lM={test:function(e){return qW.test(e)||$W.test(e)||eM.test(e)},parse:function(e){return qW.test(e)?qW.parse(e):eM.test(e)?eM.parse(e):$W.parse(e)},transform:function(e){return Jk(e)?e:e.hasOwnProperty("red")?qW.transform(e):eM.transform(e)}},cM="${c}",uM="${n}";function gM(e){"number"===typeof e&&(e="".concat(e));var t=[],n=0,i=e.match(Uk);i&&(n=i.length,e=e.replace(Uk,cM),t.push.apply(t,We(i.map(lM.parse))));var r=e.match(Ok);return r&&(e=e.replace(Ok,uM),t.push.apply(t,We(r.map(rR.parse)))),{values:t,numColors:n,tokenised:e}}function dM(e){return gM(e).values}function hM(e){var t=gM(e),n=t.values,i=t.numColors,r=t.tokenised,a=n.length;return function(e){for(var t=r,n=0;n<a;n++)t=t.replace(n<i?cM:uM,n<i?lM.transform(e[n]):Dk(e[n]));return t}}var fM=function(e){return"number"===typeof e?0:e};var pM={test:function(e){var t,n,i,r;return isNaN(e)&&Jk(e)&&(null!==(n=null===(t=e.match(Ok))||void 0===t?void 0:t.length)&&void 0!==n?n:0)+(null!==(r=null===(i=e.match(Uk))||void 0===i?void 0:i.length)&&void 0!==r?r:0)>0},parse:dM,createTransformer:hM,getAnimatableNone:function(e){var t=dM(e);return hM(e)(t.map(fM))}},IM=function(e){return"number"===typeof e};function CM(e,t){return IM(e)?function(n){return OW(e,t,n)}:lM.test(e)?sM(e,t):bM(e,t)}var mM=function(e,t){var n=We(e),i=n.length,r=e.map((function(e,n){return CM(e,t[n])}));return function(e){for(var t=0;t<i;t++)n[t]=r[t](e);return n}},vM=function(e,t){var n=Object.assign(Object.assign({},e),t),i={};for(var r in n)void 0!==e[r]&&void 0!==t[r]&&(i[r]=CM(e[r],t[r]));return function(e){for(var t in i)n[t]=i[t](e);return n}};function AM(e){for(var t=pM.parse(e),n=t.length,i=0,r=0,a=0,o=0;o<n;o++)i||"number"===typeof t[o]?i++:void 0!==t[o].hue?a++:r++;return{parsed:t,numNumbers:i,numRGB:r,numHSL:a}}var bM=function(e,t){var n=pM.createTransformer(t),i=AM(e),r=AM(t);return i.numHSL===r.numHSL&&i.numRGB===r.numRGB&&i.numNumbers>=r.numNumbers?pW(mM(i.parsed,r.parsed),n):($Z(!0,"Complex values '".concat(e,"' and '").concat(t,"' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.")),function(n){return"".concat(n>0?t:e)})},yM=function(e,t){return function(n){return OW(e,t,n)}};function GM(e,t,n){for(var i=[],r=n||function(e){return"number"===typeof e?yM:"string"===typeof e?lM.test(e)?sM:bM:Array.isArray(e)?mM:"object"===typeof e?vM:void 0}(e[0]),a=e.length-1,o=0;o<a;o++){var s=r(e[o],e[o+1]);if(t){var l=Array.isArray(t)?t[o]:t;s=pW(l,s)}i.push(s)}return i}function wM(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.clamp,r=void 0===i||i,a=n.ease,o=n.mixer,s=e.length;ek(s===t.length,"Both input and output ranges must be the same length"),ek(!a||!Array.isArray(a)||a.length===s-1,"Array of easing functions must be of length `input.length - 1`, as it applies to the transitions **between** the defined values."),e[0]>e[s-1]&&(e=[].concat(e),t=[].concat(t),e.reverse(),t.reverse());var l=GM(t,a,o),u=2===s?function(e,t){var n=c(e,2),i=n[0],r=n[1],a=c(t,1)[0];return function(e){return a(DW(i,r,e))}}(e,l):function(e,t){var n=e.length,i=n-1;return function(r){var a=0,o=!1;if(r<=e[0]?o=!0:r>=e[i]&&(a=i-1,o=!0),!o){for(var s=1;s<n&&!(e[s]>r||s===i);s++);a=s-1}var l=DW(e[a],e[a+1],r);return t[a](l)}}(e,l);return r?function(t){return u(MW(e[0],e[s-1],t))}:u}var BM,xM=function(e){return function(t){return 1-e(1-t)}},SM=function(e){return function(t){return t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2}},ZM=function(e){return function(t){return t*t*((e+1)*t-e)}},kM=function(e){return e},RM=(BM=2,function(e){return Math.pow(e,BM)}),WM=xM(RM),MM=SM(RM),VM=function(e){return 1-Math.sin(Math.acos(e))},FM=xM(VM),NM=SM(FM),HM=ZM(1.525),TM=xM(HM),XM=SM(HM),YM=function(e){var t=ZM(e);return function(e){return(e*=2)<1?.5*t(e):.5*(2-Math.pow(2,-10*(e-1)))}}(1.525),EM=function(e){if(1===e||0===e)return e;var t=e*e;return e<.36363636363636365?7.5625*t:e<.7272727272727273?9.075*t-9.9*e+3.4:e<.9?12.066481994459833*t-19.63545706371191*e+8.898060941828255:10.8*e*e-20.52*e+10.72},zM=xM(EM);function LM(e,t){return e.map((function(){return t||MM})).splice(0,e.length-1)}function KM(e){var t=e.from,n=void 0===t?0:t,i=e.to,r=void 0===i?1:i,a=e.ease,o=e.offset,s=e.duration,l=void 0===s?300:s,c={done:!1,value:n},u=Array.isArray(r)?r:[n,r],g=function(e,t){return e.map((function(e){return e*t}))}(o&&o.length===u.length?o:function(e){var t=e.length;return e.map((function(e,n){return 0!==n?n/(t-1):0}))}(u),l);function d(){return wM(g,u,{ease:Array.isArray(a)?a:LM(u,a)})}var h=d();return{next:function(e){return c.value=h(e),c.done=e>=l,c},flipTarget:function(){u.reverse(),h=d()}}}var _M={keyframes:KM,spring:_W,decay:function(e){var t=e.velocity,n=void 0===t?0:t,i=e.from,r=void 0===i?0:i,a=e.power,o=void 0===a?.8:a,s=e.timeConstant,l=void 0===s?350:s,c=e.restDelta,u=void 0===c?.5:c,g=e.modifyTarget,d={done:!1,value:r},h=o*n,f=r+h,p=void 0===g?f:g(f);return p!==f&&(h=p-r),{next:function(e){var t=-h*Math.exp(-e/l);return d.done=!(t>u||t<-u),d.value=d.done?p:p+t,d},flipTarget:function(){}}}};var PM=1/60*1e3,DM="undefined"!==typeof performance?function(){return performance.now()}:function(){return Date.now()},OM="undefined"!==typeof window?function(e){return window.requestAnimationFrame(e)}:function(e){return setTimeout((function(){return e(DM())}),PM)};var UM=!0,jM=!1,JM=!1,QM={delta:0,timestamp:0},qM=["read","update","preRender","render","postRender"],$M=qM.reduce((function(e,t){return e[t]=function(e){var t=[],n=[],i=0,r=!1,a=!1,o=new WeakSet,s={schedule:function(e){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&r,s=a?t:n;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&o.add(e),-1===s.indexOf(e)&&(s.push(e),a&&r&&(i=t.length)),e},cancel:function(e){var t=n.indexOf(e);-1!==t&&n.splice(t,1),o.delete(e)},process:function(l){if(r)a=!0;else{r=!0;var c=[n,t];if(t=c[0],(n=c[1]).length=0,i=t.length)for(var u=0;u<i;u++){var g=t[u];g(l),o.has(g)&&(s.schedule(g),e())}r=!1,a&&(a=!1,s.process(l))}}};return s}((function(){return jM=!0})),e}),{}),eV=qM.reduce((function(e,t){var n=$M[t];return e[t]=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return jM||aV(),n.schedule(e,t,i)},e}),{}),tV=qM.reduce((function(e,t){return e[t]=$M[t].cancel,e}),{}),nV=qM.reduce((function(e,t){return e[t]=function(){return $M[t].process(QM)},e}),{}),iV=function(e){return $M[e].process(QM)},rV=function e(t){jM=!1,QM.delta=UM?PM:Math.max(Math.min(t-QM.timestamp,40),1),QM.timestamp=t,JM=!0,qM.forEach(iV),JM=!1,jM&&(UM=!1,OM(e))},aV=function(){jM=!0,UM=!0,JM||OM(rV)},oV=function(){return QM},sV=eV;function lV(e,t){return e-t-(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0)}var cV=function(e){var t=function(t){var n=t.delta;return e(n)};return{start:function(){return sV.update(t,!0)},stop:function(){return tV.update(t)}}};function uV(e){var t,n,i,r,a,o=e.from,s=e.autoplay,l=void 0===s||s,c=e.driver,u=void 0===c?cV:c,g=e.elapsed,d=void 0===g?0:g,h=e.repeat,f=void 0===h?0:h,p=e.repeatType,I=void 0===p?"loop":p,C=e.repeatDelay,m=void 0===C?0:C,v=e.onPlay,A=e.onStop,b=e.onComplete,y=e.onRepeat,G=e.onUpdate,w=_Z(e,["from","autoplay","driver","elapsed","repeat","repeatType","repeatDelay","onPlay","onStop","onComplete","onRepeat","onUpdate"]),B=w.to,x=0,S=w.duration,Z=!1,k=!0,R=function(e){if(Array.isArray(e.to))return KM;if(_M[e.type])return _M[e.type];var t=new Set(Object.keys(e));return t.has("ease")||t.has("duration")&&!t.has("dampingRatio")?KM:t.has("dampingRatio")||t.has("stiffness")||t.has("mass")||t.has("damping")||t.has("restSpeed")||t.has("restDelta")?_W:KM}(w);(null===(n=(t=R).needsInterpolation)||void 0===n?void 0:n.call(t,o,B))&&(a=wM([0,100],[o,B],{clamp:!1}),o=0,B=100);var W=R(Object.assign(Object.assign({},w),{from:o,to:B}));function M(){x++,"reverse"===I?d=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return arguments.length>3&&void 0!==arguments[3]&&!arguments[3]?t-(e-t)+n:lV(t+-e,t,n)}(d,S,m,k=x%2===0):(d=lV(d,S,m),"mirror"===I&&W.flipTarget()),Z=!1,y&&y()}function V(e){if(k||(e=-e),d+=e,!Z){var t=W.next(Math.max(0,d));r=t.value,a&&(r=a(r)),Z=k?t.done:d<=0}null===G||void 0===G||G(r),Z&&(0===x&&(null!==S&&void 0!==S||(S=d)),x<f?function(e,t,n,i){return i?e>=t+n:e<=-n}(d,S,m,k)&&M():(i.stop(),b&&b()))}return l&&(null===v||void 0===v||v(),(i=u(V)).start()),{stop:function(){null===A||void 0===A||A(),i.stop()}}}function gV(e,t){return t?e*(1e3/t):0}var dV=function(e){return 1e3*e},hV=function(e,t){return 1-3*t+3*e},fV=function(e,t){return 3*t-6*e},pV=function(e){return 3*e},IV=function(e,t,n){return((hV(t,n)*e+fV(t,n))*e+pV(t))*e},CV=function(e,t,n){return 3*hV(t,n)*e*e+2*fV(t,n)*e+pV(t)},mV=1e-7,vV=10;var AV=8;var bV=.1;function yV(e,t,n,i){if(e===t&&n===i)return kM;for(var r=new Float32Array(11),a=0;a<11;++a)r[a]=IV(a*bV,e,n);function o(t){for(var i=0,a=1;10!==a&&r[a]<=t;++a)i+=bV;--a;var o=i+(t-r[a])/(r[a+1]-r[a])*bV,s=CV(o,e,n);return s>=.001?function(e,t,n,i){for(var r=0;r<AV;++r){var a=CV(t,n,i);if(0===a)return t;t-=(IV(t,n,i)-e)/a}return t}(t,o,e,n):0===s?o:function(e,t,n,i,r){var a,o,s=0;do{(a=IV(o=t+(n-t)/2,i,r)-e)>0?n=o:t=o}while(Math.abs(a)>mV&&++s<vV);return o}(t,i,i+bV,e,n)}return function(e){return 0===e||1===e?e:IV(o(e),t,i)}}var GV={linear:kM,easeIn:RM,easeInOut:MM,easeOut:WM,circIn:VM,circInOut:NM,circOut:FM,backIn:HM,backInOut:XM,backOut:TM,anticipate:YM,bounceIn:zM,bounceInOut:function(e){return e<.5?.5*(1-EM(1-2*e)):.5*EM(2*e-1)+.5},bounceOut:EM},wV=function(e){if(Array.isArray(e)){ek(4===e.length,"Cubic bezier arrays must contain four numerical values.");var t=OZ(e,4);return yV(t[0],t[1],t[2],t[3])}return"string"===typeof e?(ek(void 0!==GV[e],"Invalid easing type '".concat(e,"'")),GV[e]):e},BV=function(e){return Array.isArray(e)&&"number"!==typeof e[0]},xV=function(e,t){return"zIndex"!==e&&(!("number"!==typeof t&&!Array.isArray(t))||!("string"!==typeof t||!pM.test(t)||t.startsWith("url(")))},SV=function(){return{type:"spring",stiffness:500,damping:25,restSpeed:10}},ZV=function(e){return{type:"spring",stiffness:550,damping:0===e?2*Math.sqrt(550):30,restSpeed:10}},kV=function(){return{type:"keyframes",ease:"linear",duration:.3}},RV=function(e){return{type:"keyframes",duration:.8,values:e}},WV={x:SV,y:SV,z:SV,rotate:SV,rotateX:SV,rotateY:SV,rotateZ:SV,scaleX:ZV,scaleY:ZV,scale:ZV,opacity:kV,backgroundColor:kV,color:kV,default:ZV},MV=function(e,t){var n;return n=VR(t)?RV:WV[e]||WV.default,KZ({to:t},n(t))},VV=new Set(["brightness","contrast","saturate","opacity"]);function FV(e){var t=c(e.slice(0,-1).split("("),2),n=t[0],i=t[1];if("drop-shadow"===n)return e;var r=c(i.match(Ok)||[],1)[0];if(!r)return e;var a=i.replace(r,""),o=VV.has(n)?1:0;return r!==i&&(o*=100),n+"("+o+a+")"}var NV=/([a-z-]*)\(.*?\)/g,HV=Object.assign(Object.assign({},pM),{getAnimatableNone:function(e){var t=e.match(NV);return t?t.map(FV).join(" "):e}}),TV=KZ(KZ({},lR),{color:lM,backgroundColor:lM,outlineColor:lM,fill:lM,stroke:lM,borderColor:lM,borderTopColor:lM,borderRightColor:lM,borderBottomColor:lM,borderLeftColor:lM,filter:HV,WebkitFilter:HV}),XV=function(e){return TV[e]};function YV(e,t){var n,i=XV(e);return i!==HV&&(i=pM),null===(n=i.getAnimatableNone)||void 0===n?void 0:n.call(i,t)}var EV={current:!1};var zV=!1;function LV(e,t,n){var i;return Array.isArray(t.to)&&(null!==(i=e.duration)&&void 0!==i||(e.duration=.8)),function(e){Array.isArray(e.to)&&null===e.to[0]&&(e.to=jZ([],OZ(e.to),!1),e.to[0]=e.from)}(t),function(e){e.when,e.delay,e.delayChildren,e.staggerChildren,e.staggerDirection,e.repeat,e.repeatType,e.repeatDelay,e.from;var t=_Z(e,["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from"]);return!!Object.keys(t).length}(e)||(e=KZ(KZ({},e),MV(n,t.to))),KZ(KZ({},t),function(e){var t=e.ease,n=e.times,i=e.yoyo,r=e.flip,a=e.loop,o=_Z(e,["ease","times","yoyo","flip","loop"]),s=KZ({},o);return n&&(s.offset=n),o.duration&&(s.duration=dV(o.duration)),o.repeatDelay&&(s.repeatDelay=dV(o.repeatDelay)),t&&(s.ease=BV(t)?t.map(wV):wV(t)),"tween"===o.type&&(s.type="keyframes"),(i||a||r)&&($Z(!zV,"yoyo, loop and flip have been removed from the API. Replace with repeat and repeatType options."),zV=!0,i?s.repeatType="reverse":a?s.repeatType="loop":r&&(s.repeatType="mirror"),s.repeat=a||i||r||o.repeat),"spring"!==o.type&&(s.type="keyframes"),s}(e))}function KV(e,t,n,i,r){var a,o=DV(i,e),s=null!==(a=o.from)&&void 0!==a?a:t.get(),l=xV(e,n);"none"===s&&l&&"string"===typeof n?s=YV(e,n):_V(s)&&"string"===typeof n?s=PV(n):!Array.isArray(n)&&_V(n)&&"string"===typeof s&&(n=PV(s));var c=xV(e,s);return $Z(c===l,"You are trying to animate ".concat(e,' from "').concat(s,'" to "').concat(n,'". ').concat(s," is not an animatable value - to enable this animation set ").concat(s," to a value animatable to ").concat(n," via the `style` property.")),c&&l&&!1!==o.type?function(){var i={from:s,to:n,velocity:t.getVelocity(),onComplete:r,onUpdate:function(e){return t.set(e)}};return"inertia"===o.type||"decay"===o.type?function(e){var t,n=e.from,i=void 0===n?0:n,r=e.velocity,a=void 0===r?0:r,o=e.min,s=e.max,l=e.power,c=void 0===l?.8:l,u=e.timeConstant,g=void 0===u?750:u,d=e.bounceStiffness,h=void 0===d?500:d,f=e.bounceDamping,p=void 0===f?10:f,I=e.restDelta,C=void 0===I?1:I,m=e.modifyTarget,v=e.driver,A=e.onUpdate,b=e.onComplete,y=e.onStop;function G(e){return void 0!==o&&e<o||void 0!==s&&e>s}function w(e){return void 0===o?s:void 0===s||Math.abs(o-e)<Math.abs(s-e)?o:s}function B(e){null===t||void 0===t||t.stop(),t=uV(Object.assign(Object.assign({},e),{driver:v,onUpdate:function(t){var n;null===A||void 0===A||A(t),null===(n=e.onUpdate)||void 0===n||n.call(e,t)},onComplete:b,onStop:y}))}function x(e){B(Object.assign({type:"spring",stiffness:h,damping:p,restDelta:C},e))}if(G(i))x({from:i,velocity:a,to:w(i)});else{var S=c*a+i;"undefined"!==typeof m&&(S=m(S));var Z,k,R=w(S),W=R===o?-1:1;B({type:"decay",from:i,velocity:a,timeConstant:g,power:c,restDelta:C,modifyTarget:m,onUpdate:G(S)?function(e){Z=k,k=e,a=gV(e-Z,oV().delta),(1===W&&e>R||-1===W&&e<R)&&x({from:e,to:R,velocity:a})}:void 0})}return{stop:function(){return null===t||void 0===t?void 0:t.stop()}}}(KZ(KZ({},i),o)):uV(KZ(KZ({},LV(o,i,e)),{onUpdate:function(e){var t;i.onUpdate(e),null===(t=o.onUpdate)||void 0===t||t.call(o,e)},onComplete:function(){var e;i.onComplete(),null===(e=o.onComplete)||void 0===e||e.call(o)}}))}:function(){var e,i,a=NR(n);return t.set(a),r(),null===(e=null===o||void 0===o?void 0:o.onUpdate)||void 0===e||e.call(o,a),null===(i=null===o||void 0===o?void 0:o.onComplete)||void 0===i||i.call(o),{stop:function(){}}}}function _V(e){return 0===e||"string"===typeof e&&0===parseFloat(e)&&-1===e.indexOf(" ")}function PV(e){return"number"===typeof e?0:YV("",e)}function DV(e,t){return e[t]||e.default||e}function OV(e,t,n,i){return void 0===i&&(i={}),EV.current&&(i={type:!1}),t.start((function(r){var a,o,s=KV(e,t,n,i,r),l=function(e,t){var n,i;return null!==(i=null!==(n=(DV(e,t)||{}).delay)&&void 0!==n?n:e.delay)&&void 0!==i?i:0}(i,e),c=function(){return o=s()};return l?a=window.setTimeout(c,dV(l)):c(),function(){clearTimeout(a),null===o||void 0===o||o.stop()}}))}var UV=function(e){return/^\-?\d*\.?\d+$/.test(e)},jV=function(e){return/^0[^.\s]+$/.test(e)};function JV(e,t){-1===e.indexOf(t)&&e.push(t)}function QV(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}var qV=function(){function e(){this.subscriptions=[]}return e.prototype.add=function(e){var t=this;return JV(this.subscriptions,e),function(){return QV(t.subscriptions,e)}},e.prototype.notify=function(e,t,n){var i=this.subscriptions.length;if(i)if(1===i)this.subscriptions[0](e,t,n);else for(var r=0;r<i;r++){var a=this.subscriptions[r];a&&a(e,t,n)}},e.prototype.getSize=function(){return this.subscriptions.length},e.prototype.clear=function(){this.subscriptions.length=0},e}(),$V=function(){function e(e){var t=this;this.version="6.5.1",this.timeDelta=0,this.lastUpdated=0,this.updateSubscribers=new qV,this.velocityUpdateSubscribers=new qV,this.renderSubscribers=new qV,this.canTrackVelocity=!1,this.updateAndNotify=function(e,n){void 0===n&&(n=!0),t.prev=t.current,t.current=e;var i=oV(),r=i.delta,a=i.timestamp;t.lastUpdated!==a&&(t.timeDelta=r,t.lastUpdated=a,sV.postRender(t.scheduleVelocityCheck)),t.prev!==t.current&&t.updateSubscribers.notify(t.current),t.velocityUpdateSubscribers.getSize()&&t.velocityUpdateSubscribers.notify(t.getVelocity()),n&&t.renderSubscribers.notify(t.current)},this.scheduleVelocityCheck=function(){return sV.postRender(t.velocityCheck)},this.velocityCheck=function(e){e.timestamp!==t.lastUpdated&&(t.prev=t.current,t.velocityUpdateSubscribers.notify(t.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=function(e){return!isNaN(parseFloat(e))}(this.current)}return e.prototype.onChange=function(e){return this.updateSubscribers.add(e)},e.prototype.clearListeners=function(){this.updateSubscribers.clear()},e.prototype.onRenderRequest=function(e){return e(this.get()),this.renderSubscribers.add(e)},e.prototype.attach=function(e){this.passiveEffect=e},e.prototype.set=function(e,t){void 0===t&&(t=!0),t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)},e.prototype.get=function(){return this.current},e.prototype.getPrevious=function(){return this.prev},e.prototype.getVelocity=function(){return this.canTrackVelocity?gV(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0},e.prototype.start=function(e){var t=this;return this.stop(),new Promise((function(n){t.hasAnimated=!0,t.stopAnimation=e(n)})).then((function(){return t.clearAnimation()}))},e.prototype.stop=function(){this.stopAnimation&&this.stopAnimation(),this.clearAnimation()},e.prototype.isAnimating=function(){return!!this.stopAnimation},e.prototype.clearAnimation=function(){this.stopAnimation=null},e.prototype.destroy=function(){this.updateSubscribers.clear(),this.renderSubscribers.clear(),this.stop()},e}();function eF(e){return new $V(e)}var tF=function(e){return function(t){return t.test(e)}},nF=[rR,eR,$k,qk,nR,tR,{test:function(e){return"auto"===e},parse:function(e){return e}}],iF=function(e){return nF.find(tF(e))},rF=jZ(jZ([],OZ(nF),!1),[lM,pM],!1),aF=function(e){return rF.find(tF(e))};function oF(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,eF(n))}function sF(e,t){var n=Ck(e,t),i=n?e.makeTargetAnimatable(n,!1):{},r=i.transitionEnd,a=void 0===r?{}:r;i.transition;var o=_Z(i,["transitionEnd","transition"]);for(var s in o=KZ(KZ({},o),a)){oF(e,s,NR(o[s]))}}function lF(e,t){if(t)return(t[e]||t.default||t).from}function cF(e,t,n){var i;void 0===n&&(n={});var r=Ck(e,t,n.custom),a=(r||{}).transition,o=void 0===a?e.getDefaultTransition()||{}:a;n.transitionOverride&&(o=n.transitionOverride);var s=r?function(){return uF(e,r,n)}:function(){return Promise.resolve()},l=(null===(i=e.variantChildren)||void 0===i?void 0:i.size)?function(i){void 0===i&&(i=0);var r=o.delayChildren,a=void 0===r?0:r,s=o.staggerChildren,l=o.staggerDirection;return function(e,t,n,i,r,a){void 0===n&&(n=0);void 0===i&&(i=0);void 0===r&&(r=1);var o=[],s=(e.variantChildren.size-1)*i,l=1===r?function(e){return void 0===e&&(e=0),e*i}:function(e){return void 0===e&&(e=0),s-e*i};return Array.from(e.variantChildren).sort(gF).forEach((function(e,i){o.push(cF(e,t,KZ(KZ({},a),{delay:n+l(i)})).then((function(){return e.notifyAnimationComplete(t)})))})),Promise.all(o)}(e,t,a+i,s,l,n)}:function(){return Promise.resolve()},c=o.when;if(c){var u=OZ("beforeChildren"===c?[s,l]:[l,s],2),g=u[0],d=u[1];return g().then(d)}return Promise.all([s(),l(n.delay)])}function uF(e,t,n){var i,r=void 0===n?{}:n,a=r.delay,o=void 0===a?0:a,s=r.transitionOverride,l=r.type,c=e.makeTargetAnimatable(t),u=c.transition,g=void 0===u?e.getDefaultTransition():u,d=c.transitionEnd,h=_Z(c,["transition","transitionEnd"]);s&&(g=s);var f=[],p=l&&(null===(i=e.animationState)||void 0===i?void 0:i.getState()[l]);for(var I in h){var C=e.getValue(I),m=h[I];if(!(!C||void 0===m||p&&dF(p,I))){var v=KZ({delay:o},g);e.shouldReduceMotion&&Tk(I)&&(v=KZ(KZ({},v),{type:!1,delay:0}));var A=OV(I,C,m,v);f.push(A)}}return Promise.all(f).then((function(){d&&sF(e,d)}))}function gF(e,t){return e.sortNodePosition(t)}function dF(e,t){var n=e.protectedKeys,i=e.needsAnimating,r=n.hasOwnProperty(t)&&!0!==i[t];return i[t]=!1,r}var hF=[ER.Animate,ER.InView,ER.Focus,ER.Hover,ER.Tap,ER.Drag,ER.Exit],fF=jZ([],OZ(hF),!1).reverse(),pF=hF.length;function IF(e){return function(t){return Promise.all(t.map((function(t){var n=t.animation,i=t.options;return function(e,t,n){var i;if(void 0===n&&(n={}),e.notifyAnimationStart(t),Array.isArray(t)){var r=t.map((function(t){return cF(e,t,n)}));i=Promise.all(r)}else if("string"===typeof t)i=cF(e,t,n);else{var a="function"===typeof t?Ck(e,t,n.custom):t;i=uF(e,a,n)}return i.then((function(){return e.notifyAnimationComplete(t)}))}(e,n,i)})))}}function CF(e){var t=IF(e),n=function(){var e;return(e={})[ER.Animate]=mF(!0),e[ER.InView]=mF(),e[ER.Hover]=mF(),e[ER.Tap]=mF(),e[ER.Drag]=mF(),e[ER.Focus]=mF(),e[ER.Exit]=mF(),e}(),i={},r=!0,a=function(t,n){var i=Ck(e,n);if(i){i.transition;var r=i.transitionEnd,a=_Z(i,["transition","transitionEnd"]);t=KZ(KZ(KZ({},t),a),r)}return t};function o(o,s){for(var l,c=e.getProps(),u=e.getVariantContext(!0)||{},g=[],d=new Set,h={},f=1/0,p=function(t){var i=fF[t],p=n[i],I=null!==(l=c[i])&&void 0!==l?l:u[i],C=pk(I),m=i===s?p.isActive:null;!1===m&&(f=t);var v=I===u[i]&&I!==c[i]&&C;if(v&&r&&e.manuallyAnimateOnMount&&(v=!1),p.protectedKeys=KZ({},h),!p.isActive&&null===m||!I&&!p.prevProp||MR(I)||"boolean"===typeof I)return"continue";var A=function(e,t){if("string"===typeof t)return t!==e;if(fk(t))return!WW(t,e);return!1}(p.prevProp,I),b=A||i===s&&p.isActive&&!v&&C||t>f&&C,y=Array.isArray(I)?I:[I],G=y.reduce(a,{});!1===m&&(G={});var w=p.prevResolvedValues,B=void 0===w?{}:w,x=KZ(KZ({},B),G),S=function(e){b=!0,d.delete(e),p.needsAnimating[e]=!0};for(var Z in x){var k=G[Z],R=B[Z];h.hasOwnProperty(Z)||(k!==R?VR(k)&&VR(R)?!WW(k,R)||A?S(Z):p.protectedKeys[Z]=!0:void 0!==k?S(Z):d.add(Z):void 0!==k&&d.has(Z)?S(Z):p.protectedKeys[Z]=!0)}p.prevProp=I,p.prevResolvedValues=G,p.isActive&&(h=KZ(KZ({},h),G)),r&&e.blockInitialAnimation&&(b=!1),b&&!v&&g.push.apply(g,jZ([],OZ(y.map((function(e){return{animation:e,options:KZ({type:i},o)}}))),!1))},I=0;I<pF;I++)p(I);if(i=KZ({},h),d.size){var C={};d.forEach((function(t){var n=e.getBaseTarget(t);void 0!==n&&(C[t]=n)})),g.push({animation:C})}var m=Boolean(g.length);return r&&!1===c.initial&&!e.manuallyAnimateOnMount&&(m=!1),r=!1,m?t(g):Promise.resolve()}return{isAnimated:function(e){return void 0!==i[e]},animateChanges:o,setActive:function(t,i,r){var a;if(n[t].isActive===i)return Promise.resolve();null===(a=e.variantChildren)||void 0===a||a.forEach((function(e){var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(t,i)})),n[t].isActive=i;var s=o(r,t);for(var l in n)n[l].protectedKeys={};return s},setAnimateFunction:function(n){t=n(e)},getState:function(){return n}}}function mF(e){return void 0===e&&(e=!1),{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}var vF={animation:BW((function(e){var n=e.visualElement,i=e.animate;n.animationState||(n.animationState=CF(n)),MR(i)&&(0,t.useEffect)((function(){return i.subscribe(n)}),[i])})),exit:BW((function(e){var n=e.custom,i=e.visualElement,r=OZ(RW(),2),a=r[0],o=r[1],s=(0,t.useContext)(ok);(0,t.useEffect)((function(){var e,t;i.isPresent=a;var r=null===(e=i.animationState)||void 0===e?void 0:e.setActive(ER.Exit,!a,{custom:null!==(t=null===s||void 0===s?void 0:s.custom)&&void 0!==t?t:n});!a&&(null===r||void 0===r||r.then(o))}),[a])}))},AF=function(e){return e.hasOwnProperty("x")&&e.hasOwnProperty("y")},bF=function(e){return AF(e)&&e.hasOwnProperty("z")},yF=function(e,t){return Math.abs(e-t)};function GF(e,t){if(IM(e)&&IM(t))return yF(e,t);if(AF(e)&&AF(t)){var n=yF(e.x,t.x),i=yF(e.y,t.y),r=bF(e)&&bF(t)?yF(e.z,t.z):0;return Math.sqrt(Math.pow(n,2)+Math.pow(i,2)+Math.pow(r,2))}}var wF=function(){function e(e,t,n){var i=this,r=(void 0===n?{}:n).transformPagePoint;if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=function(){if(i.lastMoveEvent&&i.lastMoveEventInfo){var e=SF(i.lastMoveEventInfo,i.history),t=null!==i.startEvent,n=GF(e.offset,{x:0,y:0})>=3;if(t||n){var r=e.point,a=oV().timestamp;i.history.push(KZ(KZ({},r),{timestamp:a}));var o=i.handlers,s=o.onStart,l=o.onMove;t||(s&&s(i.lastMoveEvent,e),i.startEvent=i.lastMoveEvent),l&&l(i.lastMoveEvent,e)}}},this.handlePointerMove=function(e,t){i.lastMoveEvent=e,i.lastMoveEventInfo=BF(t,i.transformPagePoint),PR(e)&&0===e.buttons?i.handlePointerUp(e,t):sV.update(i.updatePoint,!0)},this.handlePointerUp=function(e,t){i.end();var n=i.handlers,r=n.onEnd,a=n.onSessionEnd,o=SF(BF(t,i.transformPagePoint),i.history);i.startEvent&&r&&r(e,o),a&&a(e,o)},!(DR(e)&&e.touches.length>1)){this.handlers=t,this.transformPagePoint=r;var a=BF(JR(e),this.transformPagePoint),o=a.point,s=oV().timestamp;this.history=[KZ(KZ({},o),{timestamp:s})];var l=t.onSessionStart;l&&l(e,SF(a,this.history)),this.removeListeners=pW(rW(window,"pointermove",this.handlePointerMove),rW(window,"pointerup",this.handlePointerUp),rW(window,"pointercancel",this.handlePointerUp))}}return e.prototype.updateHandlers=function(e){this.handlers=e},e.prototype.end=function(){this.removeListeners&&this.removeListeners(),tV.update(this.updatePoint)},e}();function BF(e,t){return t?{point:t(e.point)}:e}function xF(e,t){return{x:e.x-t.x,y:e.y-t.y}}function SF(e,t){var n=e.point;return{point:n,delta:xF(n,kF(t)),offset:xF(n,ZF(t)),velocity:RF(t,.1)}}function ZF(e){return e[0]}function kF(e){return e[e.length-1]}function RF(e,t){if(e.length<2)return{x:0,y:0};for(var n=e.length-1,i=null,r=kF(e);n>=0&&(i=e[n],!(r.timestamp-i.timestamp>dV(t)));)n--;if(!i)return{x:0,y:0};var a=(r.timestamp-i.timestamp)/1e3;if(0===a)return{x:0,y:0};var o={x:(r.x-i.x)/a,y:(r.y-i.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function WF(e){return e.max-e.min}function MF(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=.01),GF(e,t)<n}function VF(e,t,n,i){void 0===i&&(i=.5),e.origin=i,e.originPoint=OW(t.min,t.max,e.origin),e.scale=WF(n)/WF(t),(MF(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=OW(n.min,n.max,e.origin)-e.originPoint,(MF(e.translate)||isNaN(e.translate))&&(e.translate=0)}function FF(e,t,n,i){VF(e.x,t.x,n.x,null===i||void 0===i?void 0:i.originX),VF(e.y,t.y,n.y,null===i||void 0===i?void 0:i.originY)}function NF(e,t,n){e.min=n.min+t.min,e.max=e.min+WF(t)}function HF(e,t,n){e.min=t.min-n.min,e.max=e.min+WF(t)}function TF(e,t,n){HF(e.x,t.x,n.x),HF(e.y,t.y,n.y)}function XF(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function YF(e,t){var n,i=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&(i=(n=OZ([r,i],2))[0],r=n[1]),{min:i,max:r}}var EF=.35;function zF(e,t,n){return{min:LF(e,t),max:LF(e,n)}}function LF(e,t){var n;return"number"===typeof e?e:null!==(n=e[t])&&void 0!==n?n:0}var KF=function(){return{x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}},_F=function(){return{x:{min:0,max:0},y:{min:0,max:0}}};function PF(e){return[e("x"),e("y")]}function DF(e){var t=e.top;return{x:{min:e.left,max:e.right},y:{min:t,max:e.bottom}}}function OF(e){return void 0===e||1===e}function UF(e){var t=e.scale,n=e.scaleX,i=e.scaleY;return!OF(t)||!OF(n)||!OF(i)}function jF(e){return UF(e)||JF(e.x)||JF(e.y)||e.z||e.rotate||e.rotateX||e.rotateY}function JF(e){return e&&"0%"!==e}function QF(e,t,n){return n+t*(e-n)}function qF(e,t,n,i,r){return void 0!==r&&(e=QF(e,r,i)),QF(e,n,i)+t}function $F(e,t,n,i,r){void 0===t&&(t=0),void 0===n&&(n=1),e.min=qF(e.min,t,n,i,r),e.max=qF(e.max,t,n,i,r)}function eN(e,t){var n=t.x,i=t.y;$F(e.x,n.translate,n.scale,n.originPoint),$F(e.y,i.translate,i.scale,i.originPoint)}function tN(e,t){e.min=e.min+t,e.max=e.max+t}function nN(e,t,n){var i=OZ(n,3),r=i[0],a=i[1],o=i[2],s=void 0!==t[o]?t[o]:.5,l=OW(e.min,e.max,s);$F(e,t[r],t[a],l,t.scale)}var iN=["x","scaleX","originX"],rN=["y","scaleY","originY"];function aN(e,t){nN(e.x,t,iN),nN(e.y,t,rN)}function oN(e,t){return DF(function(e,t){if(!t)return e;var n=t({x:e.left,y:e.top}),i=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}(e.getBoundingClientRect(),t))}var sN=new WeakMap,lN=function(){function e(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=_F(),this.visualElement=e}return e.prototype.start=function(e,t){var n=this,i=(void 0===t?{}:t).snapToCursor,r=void 0!==i&&i;if(!1!==this.visualElement.isPresent){this.panSession=new wF(e,{onSessionStart:function(e){n.stopAnimation(),r&&n.snapToCursor(JR(e,"page").point)},onStart:function(e,t){var i,r=n.getProps(),a=r.drag,o=r.dragPropagation,s=r.onDragStart;(!a||o||(n.openGlobalLock&&n.openGlobalLock(),n.openGlobalLock=cW(a),n.openGlobalLock))&&(n.isDragging=!0,n.currentDirection=null,n.resolveConstraints(),n.visualElement.projection&&(n.visualElement.projection.isAnimationBlocked=!0,n.visualElement.projection.target=void 0),PF((function(e){var t,i,r=n.getAxisMotionValue(e).get()||0;if($k.test(r)){var a=null===(i=null===(t=n.visualElement.projection)||void 0===t?void 0:t.layout)||void 0===i?void 0:i.actual[e];if(a)r=WF(a)*(parseFloat(r)/100)}n.originPoint[e]=r})),null===s||void 0===s||s(e,t),null===(i=n.visualElement.animationState)||void 0===i||i.setActive(ER.Drag,!0))},onMove:function(e,t){var i=n.getProps(),r=i.dragPropagation,a=i.dragDirectionLock,o=i.onDirectionLock,s=i.onDrag;if(r||n.openGlobalLock){var l=t.offset;if(a&&null===n.currentDirection)return n.currentDirection=function(e,t){void 0===t&&(t=10);var n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(l),void(null!==n.currentDirection&&(null===o||void 0===o||o(n.currentDirection)));n.updateAxis("x",t.point,l),n.updateAxis("y",t.point,l),n.visualElement.syncRender(),null===s||void 0===s||s(e,t)}},onSessionEnd:function(e,t){return n.stop(e,t)}},{transformPagePoint:this.visualElement.getTransformPagePoint()})}},e.prototype.stop=function(e,t){var n=this.isDragging;if(this.cancel(),n){var i=t.velocity;this.startAnimation(i);var r=this.getProps().onDragEnd;null===r||void 0===r||r(e,t)}},e.prototype.cancel=function(){var e,t;this.isDragging=!1,this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!1),null===(e=this.panSession)||void 0===e||e.end(),this.panSession=void 0,!this.getProps().dragPropagation&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),null===(t=this.visualElement.animationState)||void 0===t||t.setActive(ER.Drag,!1)},e.prototype.updateAxis=function(e,t,n){var i=this.getProps().drag;if(n&&cN(e,i,this.currentDirection)){var r=this.getAxisMotionValue(e),a=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(a=function(e,t,n){var i=t.min,r=t.max;return void 0!==i&&e<i?e=n?OW(i,e,n.min):Math.max(e,i):void 0!==r&&e>r&&(e=n?OW(r,e,n.max):Math.min(e,r)),e}(a,this.constraints[e],this.elastic[e])),r.set(a)}},e.prototype.resolveConstraints=function(){var e=this,t=this.getProps(),n=t.dragConstraints,i=t.dragElastic,r=(this.visualElement.projection||{}).layout,a=this.constraints;n&&hk(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!n||!r)&&function(e,t){var n=t.top,i=t.left,r=t.bottom,a=t.right;return{x:XF(e.x,i,a),y:XF(e.y,n,r)}}(r.actual,n),this.elastic=function(e){return void 0===e&&(e=EF),!1===e?e=0:!0===e&&(e=EF),{x:zF(e,"left","right"),y:zF(e,"top","bottom")}}(i),a!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&PF((function(t){e.getAxisMotionValue(t)&&(e.constraints[t]=function(e,t){var n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(r.actual[t],e.constraints[t]))}))},e.prototype.resolveRefConstraints=function(){var e=this.getProps(),t=e.dragConstraints,n=e.onMeasureDragConstraints;if(!t||!hk(t))return!1;var i=t.current;ek(null!==i,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");var r=this.visualElement.projection;if(!r||!r.layout)return!1;var a=function(e,t,n){var i=oN(e,n),r=t.scroll;return r&&(tN(i.x,r.x),tN(i.y,r.y)),i}(i,r.root,this.visualElement.getTransformPagePoint()),o=function(e,t){return{x:YF(e.x,t.x),y:YF(e.y,t.y)}}(r.layout.actual,a);if(n){var s=n(function(e){var t=e.x,n=e.y;return{top:n.min,right:t.max,bottom:n.max,left:t.min}}(o));this.hasMutatedConstraints=!!s,s&&(o=DF(s))}return o},e.prototype.startAnimation=function(e){var t=this,n=this.getProps(),i=n.drag,r=n.dragMomentum,a=n.dragElastic,o=n.dragTransition,s=n.dragSnapToOrigin,l=n.onDragTransitionEnd,c=this.constraints||{},u=PF((function(n){var l;if(cN(n,i,t.currentDirection)){var u=null!==(l=null===c||void 0===c?void 0:c[n])&&void 0!==l?l:{};s&&(u={min:0,max:0});var g=a?200:1e6,d=a?40:1e7,h=KZ(KZ({type:"inertia",velocity:r?e[n]:0,bounceStiffness:g,bounceDamping:d,timeConstant:750,restDelta:1,restSpeed:10},o),u);return t.startAxisValueAnimation(n,h)}}));return Promise.all(u).then(l)},e.prototype.startAxisValueAnimation=function(e,t){return OV(e,this.getAxisMotionValue(e),0,t)},e.prototype.stopAnimation=function(){var e=this;PF((function(t){return e.getAxisMotionValue(t).stop()}))},e.prototype.getAxisMotionValue=function(e){var t,n,i="_drag"+e.toUpperCase(),r=this.visualElement.getProps()[i];return r||this.visualElement.getValue(e,null!==(n=null===(t=this.visualElement.getProps().initial)||void 0===t?void 0:t[e])&&void 0!==n?n:0)},e.prototype.snapToCursor=function(e){var t=this;PF((function(n){if(cN(n,t.getProps().drag,t.currentDirection)){var i=t.visualElement.projection,r=t.getAxisMotionValue(n);if(i&&i.layout){var a=i.layout.actual[n],o=a.min,s=a.max;r.set(e[n]-OW(o,s,.5))}}}))},e.prototype.scalePositionWithinConstraints=function(){var e,t=this,n=this.getProps(),i=n.drag,r=n.dragConstraints,a=this.visualElement.projection;if(hk(r)&&a&&this.constraints){this.stopAnimation();var o={x:0,y:0};PF((function(e){var n=t.getAxisMotionValue(e);if(n){var i=n.get();o[e]=function(e,t){var n=.5,i=WF(e),r=WF(t);return r>i?n=DW(t.min,t.max-i,e.min):i>r&&(n=DW(e.min,e.max-r,t.min)),MW(0,1,n)}({min:i,max:i},t.constraints[e])}}));var s=this.visualElement.getProps().transformTemplate;this.visualElement.getInstance().style.transform=s?s({},""):"none",null===(e=a.root)||void 0===e||e.updateScroll(),a.updateLayout(),this.resolveConstraints(),PF((function(e){if(cN(e,i,null)){var n=t.getAxisMotionValue(e),r=t.constraints[e],a=r.min,s=r.max;n.set(OW(a,s,o[e]))}}))}},e.prototype.addListeners=function(){var e,t=this;sN.set(this.visualElement,this);var n=rW(this.visualElement.getInstance(),"pointerdown",(function(e){var n=t.getProps(),i=n.drag,r=n.dragListener;i&&(void 0===r||r)&&t.start(e)})),i=function(){hk(t.getProps().dragConstraints)&&(t.constraints=t.resolveRefConstraints())},r=this.visualElement.projection,a=r.addEventListener("measure",i);r&&!r.layout&&(null===(e=r.root)||void 0===e||e.updateScroll(),r.updateLayout()),i();var o=KR(window,"resize",(function(){return t.scalePositionWithinConstraints()}));return r.addEventListener("didUpdate",(function(e){var n=e.delta,i=e.hasLayoutChanged;t.isDragging&&i&&(PF((function(e){var i=t.getAxisMotionValue(e);i&&(t.originPoint[e]+=n[e].translate,i.set(i.get()+n[e].translate))})),t.visualElement.syncRender())})),function(){o(),n(),a()}},e.prototype.getProps=function(){var e=this.visualElement.getProps(),t=e.drag,n=void 0!==t&&t,i=e.dragDirectionLock,r=void 0!==i&&i,a=e.dragPropagation,o=void 0!==a&&a,s=e.dragConstraints,l=void 0!==s&&s,c=e.dragElastic,u=void 0===c?EF:c,g=e.dragMomentum,d=void 0===g||g;return KZ(KZ({},e),{drag:n,dragDirectionLock:r,dragPropagation:o,dragConstraints:l,dragElastic:u,dragMomentum:d})},e}();function cN(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}var uN={pan:BW((function(e){var n=e.onPan,i=e.onPanStart,r=e.onPanEnd,a=e.onPanSessionStart,o=e.visualElement,s=n||i||r||a,l=(0,t.useRef)(null),c=(0,t.useContext)(rk).transformPagePoint,u={onSessionStart:a,onStart:i,onMove:n,onEnd:function(e,t){l.current=null,r&&r(e,t)}};(0,t.useEffect)((function(){null!==l.current&&l.current.updateHandlers(u)})),aW(o,"pointerdown",s&&function(e){l.current=new wF(e,u,{transformPagePoint:c})}),hW((function(){return l.current&&l.current.end()}))})),drag:BW((function(e){var n=e.dragControls,i=e.visualElement,r=yk((function(){return new lN(i)}));(0,t.useEffect)((function(){return n&&n.subscribe(r)}),[r,n]),(0,t.useEffect)((function(){return r.addListeners()}),[r])}))},gN=["LayoutMeasure","BeforeLayoutMeasure","LayoutUpdate","ViewportBoxUpdate","Update","Render","AnimationComplete","LayoutAnimationComplete","AnimationStart","LayoutAnimationStart","SetAxisTarget","Unmount"];var dN=function(e){var t=e.treeType,n=void 0===t?"":t,i=e.build,r=e.getBaseTarget,a=e.makeTargetAnimatable,o=e.measureViewportBox,s=e.render,l=e.readValueFromInstance,c=e.removeValueFromRenderState,u=e.sortNodePosition,g=e.scrapeMotionValuesFromProps;return function(e,t){var d=e.parent,h=e.props,f=e.presenceId,p=e.blockInitialAnimation,I=e.visualState,C=e.shouldReduceMotion;void 0===t&&(t={});var m,v,A=!1,b=I.latestValues,y=I.renderState,G=function(){var e=gN.map((function(){return new qV})),t={},n={clearAllListeners:function(){return e.forEach((function(e){return e.clear()}))},updatePropListeners:function(e){gN.forEach((function(i){var r,a="on"+i,o=e[a];null===(r=t[i])||void 0===r||r.call(t),o&&(t[i]=n[a](o))}))}};return e.forEach((function(e,t){n["on"+gN[t]]=function(t){return e.add(t)},n["notify"+gN[t]]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.notify.apply(e,jZ([],OZ(t),!1))}})),n}(),w=new Map,B=new Map,x={},S=KZ({},b);function Z(){m&&A&&(k(),s(m,y,h.style,T.projection))}function k(){i(T,y,b,t,h)}function R(){G.notifyUpdate(b)}function W(e,t){var n=t.onChange((function(t){b[e]=t,h.onUpdate&&sV.update(R,!1,!0)})),i=t.onRenderRequest(T.scheduleRender);B.set(e,(function(){n(),i()}))}var M=g(h);for(var V in M){var F=M[V];void 0!==b[V]&&zk(F)&&F.set(b[V],!1)}var N=mk(h),H=vk(h),T=KZ(KZ({treeType:n,current:null,depth:d?d.depth+1:0,parent:d,children:new Set,presenceId:f,shouldReduceMotion:C,variantChildren:H?new Set:void 0,isVisible:void 0,manuallyAnimateOnMount:Boolean(null===d||void 0===d?void 0:d.isMounted()),blockInitialAnimation:p,isMounted:function(){return Boolean(m)},mount:function(e){A=!0,m=T.current=e,T.projection&&T.projection.mount(e),H&&d&&!N&&(v=null===d||void 0===d?void 0:d.addVariantChild(T)),w.forEach((function(e,t){return W(t,e)})),null===d||void 0===d||d.children.add(T),T.setProps(h)},unmount:function(){var e;null===(e=T.projection)||void 0===e||e.unmount(),tV.update(R),tV.render(Z),B.forEach((function(e){return e()})),null===v||void 0===v||v(),null===d||void 0===d||d.children.delete(T),G.clearAllListeners(),m=void 0,A=!1},addVariantChild:function(e){var t,n=T.getClosestVariantNode();if(n)return null===(t=n.variantChildren)||void 0===t||t.add(e),function(){return n.variantChildren.delete(e)}},sortNodePosition:function(e){return u&&n===e.treeType?u(T.getInstance(),e.getInstance()):0},getClosestVariantNode:function(){return H?T:null===d||void 0===d?void 0:d.getClosestVariantNode()},getLayoutId:function(){return h.layoutId},getInstance:function(){return m},getStaticValue:function(e){return b[e]},setStaticValue:function(e,t){return b[e]=t},getLatestValues:function(){return b},setVisibility:function(e){T.isVisible!==e&&(T.isVisible=e,T.scheduleRender())},makeTargetAnimatable:function(e,t){return void 0===t&&(t=!0),a(T,e,h,t)},measureViewportBox:function(){return o(m,h)},addValue:function(e,t){T.hasValue(e)&&T.removeValue(e),w.set(e,t),b[e]=t.get(),W(e,t)},removeValue:function(e){var t;w.delete(e),null===(t=B.get(e))||void 0===t||t(),B.delete(e),delete b[e],c(e,y)},hasValue:function(e){return w.has(e)},getValue:function(e,t){var n=w.get(e);return void 0===n&&void 0!==t&&(n=eF(t),T.addValue(e,n)),n},forEachValue:function(e){return w.forEach(e)},readValue:function(e){var n;return null!==(n=b[e])&&void 0!==n?n:l(m,e,t)},setBaseTarget:function(e,t){S[e]=t},getBaseTarget:function(e){if(r){var t=r(h,e);if(void 0!==t&&!zk(t))return t}return S[e]}},G),{build:function(){return k(),y},scheduleRender:function(){sV.render(Z,!1,!0)},syncRender:Z,setProps:function(e){(e.transformTemplate||h.transformTemplate)&&T.scheduleRender(),h=e,G.updatePropListeners(e),x=function(e,t,n){var i;for(var r in t){var a=t[r],o=n[r];if(zk(a))e.addValue(r,a);else if(zk(o))e.addValue(r,eF(a));else if(o!==a)if(e.hasValue(r)){var s=e.getValue(r);!s.hasAnimated&&s.set(a)}else e.addValue(r,eF(null!==(i=e.getStaticValue(r))&&void 0!==i?i:a))}for(var r in n)void 0===t[r]&&e.removeValue(r);return t}(T,g(h),x)},getProps:function(){return h},getVariant:function(e){var t;return null===(t=h.variants)||void 0===t?void 0:t[e]},getDefaultTransition:function(){return h.transition},getTransformPagePoint:function(){return h.transformPagePoint},getVariantContext:function(e){if(void 0===e&&(e=!1),e)return null===d||void 0===d?void 0:d.getVariantContext();if(!N){var t=(null===d||void 0===d?void 0:d.getVariantContext())||{};return void 0!==h.initial&&(t.initial=h.initial),t}for(var n={},i=0;i<fN;i++){var r=hN[i],a=h[r];(pk(a)||!1===a)&&(n[r]=a)}return n}});return T}},hN=jZ(["initial"],OZ(hF),!1),fN=hN.length;function pN(e){return"string"===typeof e&&e.startsWith("var(--")}var IN=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;var CN=4;function mN(e,t,n){void 0===n&&(n=1),ek(n<=CN,'Max CSS variable fallback depth detected in property "'.concat(e,'". This may indicate a circular fallback dependency.'));var i=OZ(function(e){var t=IN.exec(e);if(!t)return[,];var n=OZ(t,3);return[n[1],n[2]]}(e),2),r=i[0],a=i[1];if(r){var o=window.getComputedStyle(t).getPropertyValue(r);return o?o.trim():pN(a)?mN(a,t,n+1):a}}var vN,AN=new Set(["width","height","top","left","right","bottom","x","y"]),bN=function(e){return AN.has(e)},yN=function(e,t){e.set(t,!1),e.set(t)},GN=function(e){return e===rR||e===eR};!function(e){e.width="width",e.height="height",e.left="left",e.right="right",e.top="top",e.bottom="bottom"}(vN||(vN={}));var wN=function(e,t){return parseFloat(e.split(", ")[t])},BN=function(e,t){return function(n,i){var r=i.transform;if("none"===r||!r)return 0;var a=r.match(/^matrix3d\((.+)\)$/);if(a)return wN(a[1],t);var o=r.match(/^matrix\((.+)\)$/);return o?wN(o[1],e):0}},xN=new Set(["x","y","z"]),SN=Fk.filter((function(e){return!xN.has(e)}));var ZN={width:function(e,t){var n=e.x,i=t.paddingLeft,r=void 0===i?"0":i,a=t.paddingRight,o=void 0===a?"0":a;return n.max-n.min-parseFloat(r)-parseFloat(o)},height:function(e,t){var n=e.y,i=t.paddingTop,r=void 0===i?"0":i,a=t.paddingBottom,o=void 0===a?"0":a;return n.max-n.min-parseFloat(r)-parseFloat(o)},top:function(e,t){var n=t.top;return parseFloat(n)},left:function(e,t){var n=t.left;return parseFloat(n)},bottom:function(e,t){var n=e.y,i=t.top;return parseFloat(i)+(n.max-n.min)},right:function(e,t){var n=e.x,i=t.left;return parseFloat(i)+(n.max-n.min)},x:BN(4,13),y:BN(5,14)},kN=function(e,t,n,i){void 0===n&&(n={}),void 0===i&&(i={}),t=KZ({},t),i=KZ({},i);var r=Object.keys(t).filter(bN),a=[],o=!1,s=[];if(r.forEach((function(r){var l=e.getValue(r);if(e.hasValue(r)){var c,u=n[r],g=iF(u),d=t[r];if(VR(d)){var h=d.length,f=null===d[0]?1:0;u=d[f],g=iF(u);for(var p=f;p<h;p++)c?ek(iF(d[p])===c,"All keyframes must be of the same type"):(c=iF(d[p]),ek(c===g||GN(g)&&GN(c),"Keyframes must be of the same dimension as the current value"))}else c=iF(d);if(g!==c)if(GN(g)&&GN(c)){var I=l.get();"string"===typeof I&&l.set(parseFloat(I)),"string"===typeof d?t[r]=parseFloat(d):Array.isArray(d)&&c===eR&&(t[r]=d.map(parseFloat))}else(null===g||void 0===g?void 0:g.transform)&&(null===c||void 0===c?void 0:c.transform)&&(0===u||0===d)?0===u?l.set(c.transform(u)):t[r]=g.transform(d):(o||(a=function(e){var t=[];return SN.forEach((function(n){var i=e.getValue(n);void 0!==i&&(t.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))})),t.length&&e.syncRender(),t}(e),o=!0),s.push(r),i[r]=void 0!==i[r]?i[r]:t[r],yN(l,d))}})),s.length){var l=s.indexOf("height")>=0?window.pageYOffset:null,c=function(e,t,n){var i=t.measureViewportBox(),r=t.getInstance(),a=getComputedStyle(r),o=a.display,s={};"none"===o&&t.setStaticValue("display",e.display||"block"),n.forEach((function(e){s[e]=ZN[e](i,a)})),t.syncRender();var l=t.measureViewportBox();return n.forEach((function(n){var i=t.getValue(n);yN(i,s[n]),e[n]=ZN[n](l,a)})),e}(t,e,s);return a.length&&a.forEach((function(t){var n=OZ(t,2),i=n[0],r=n[1];e.getValue(i).set(r)})),e.syncRender(),null!==l&&window.scrollTo({top:l}),{target:c,transitionEnd:i}}return{target:t,transitionEnd:i}};function RN(e,t,n,i){return function(e){return Object.keys(e).some(bN)}(t)?kN(e,t,n,i):{target:t,transitionEnd:i}}var WN=function(e,t,n,i){var r=function(e,t,n){var i,r=_Z(t,[]),a=e.getInstance();if(!(a instanceof Element))return{target:r,transitionEnd:n};for(var o in n&&(n=KZ({},n)),e.forEachValue((function(e){var t=e.get();if(pN(t)){var n=mN(t,a);n&&e.set(n)}})),r){var s=r[o];if(pN(s)){var l=mN(s,a);l&&(r[o]=l,n&&(null!==(i=n[o])&&void 0!==i||(n[o]=s)))}}return{target:r,transitionEnd:n}}(e,t,i);return RN(e,t=r.target,n,i=r.transitionEnd)};var MN={treeType:"dom",readValueFromInstance:function(e,t){if(Tk(t)){var n=XV(t);return n&&n.default||0}var i,r=(i=e,window.getComputedStyle(i));return(Kk(t)?r.getPropertyValue(t):r[t])||0},sortNodePosition:function(e,t){return 2&e.compareDocumentPosition(t)?1:-1},getBaseTarget:function(e,t){var n;return null===(n=e.style)||void 0===n?void 0:n[t]},measureViewportBox:function(e,t){return oN(e,t.transformPagePoint)},resetTransform:function(e,t,n){var i=n.transformTemplate;t.style.transform=i?i({},""):"none",e.scheduleRender()},restoreTransform:function(e,t){e.style.transform=t.style.transform},removeValueFromRenderState:function(e,t){var n=t.vars,i=t.style;delete n[e],delete i[e]},makeTargetAnimatable:function(e,t,n,i){var r=n.transformValues;void 0===i&&(i=!0);var a=t.transition,o=t.transitionEnd,s=_Z(t,["transition","transitionEnd"]),l=function(e,t,n){var i,r,a={};for(var o in e)a[o]=null!==(i=lF(o,t))&&void 0!==i?i:null===(r=n.getValue(o))||void 0===r?void 0:r.get();return a}(s,a||{},e);if(r&&(o&&(o=r(o)),s&&(s=r(s)),l&&(l=r(l))),i){!function(e,t,n){var i,r,a,o,s=Object.keys(t).filter((function(t){return!e.hasValue(t)})),l=s.length;if(l)for(var c=0;c<l;c++){var u=s[c],g=t[u],d=null;Array.isArray(g)&&(d=g[0]),null===d&&(d=null!==(r=null!==(i=n[u])&&void 0!==i?i:e.readValue(u))&&void 0!==r?r:t[u]),void 0!==d&&null!==d&&("string"===typeof d&&(UV(d)||jV(d))?d=parseFloat(d):!aF(d)&&pM.test(g)&&(d=YV(u,g)),e.addValue(u,eF(d)),null!==(a=(o=n)[u])&&void 0!==a||(o[u]=d),e.setBaseTarget(u,d))}}(e,s,l);var c=WN(e,s,l,o);o=c.transitionEnd,s=c.target}return KZ({transition:a,transitionEnd:o},s)},scrapeMotionValuesFromProps:RR,build:function(e,t,n,i,r){void 0!==e.isVisible&&(t.style.visibility=e.isVisible?"visible":"hidden"),cR(t,n,i,r.transformTemplate)},render:SR},VN=dN(MN),FN=dN(KZ(KZ({},MN),{getBaseTarget:function(e,t){return e[t]},readValueFromInstance:function(e,t){var n;return Tk(t)?(null===(n=XV(t))||void 0===n?void 0:n.default)||0:(t=ZR.has(t)?t:xR(t),e.getAttribute(t))},scrapeMotionValuesFromProps:WR,build:function(e,t,n,i,r){bR(t,n,i,r.transformTemplate)},render:kR})),NN=function(e,t){return Wk(e)?FN(t,{enableHardwareAcceleration:!1}):VN(t,{enableHardwareAcceleration:!0})};function HN(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}var TN={correct:function(e,t){if(!t.target)return e;if("string"===typeof e){if(!eR.test(e))return e;e=parseFloat(e)}var n=HN(e,t.target.x),i=HN(e,t.target.y);return"".concat(n,"% ").concat(i,"%")}},XN="_$css",YN={correct:function(e,t){var n=t.treeScale,i=t.projectionDelta,r=e,a=e.includes("var("),o=[];a&&(e=e.replace(IN,(function(e){return o.push(e),XN})));var s=pM.parse(e);if(s.length>5)return r;var l=pM.createTransformer(e),c="number"!==typeof s[0]?1:0,u=i.x.scale*n.x,g=i.y.scale*n.y;s[0+c]/=u,s[1+c]/=g;var d=OW(u,g,.5);"number"===typeof s[2+c]&&(s[2+c]/=d),"number"===typeof s[3+c]&&(s[3+c]/=d);var h=l(s);if(a){var f=0;h=h.replace(XN,(function(){var e=o[f];return f++,e}))}return h}},EN=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return LZ(t,e),t.prototype.componentDidMount=function(){var e,t=this,n=this.props,i=n.visualElement,r=n.layoutGroup,a=n.switchLayoutGroup,o=n.layoutId,s=i.projection;e=zN,Object.assign(Mk,e),s&&((null===r||void 0===r?void 0:r.group)&&r.group.add(s),(null===a||void 0===a?void 0:a.register)&&o&&a.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",(function(){t.safeToRemove()})),s.setOptions(KZ(KZ({},s.options),{onExitComplete:function(){return t.safeToRemove()}}))),Gk.hasEverUpdated=!0},t.prototype.getSnapshotBeforeUpdate=function(e){var t=this,n=this.props,i=n.layoutDependency,r=n.visualElement,a=n.drag,o=n.isPresent,s=r.projection;return s?(s.isPresent=o,a||e.layoutDependency!==i||void 0===i?s.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?s.promote():s.relegate()||sV.postRender((function(){var e;(null===(e=s.getStack())||void 0===e?void 0:e.members.length)||t.safeToRemove()}))),null):null},t.prototype.componentDidUpdate=function(){var e=this.props.visualElement.projection;e&&(e.root.didUpdate(),!e.currentAnimation&&e.isLead()&&this.safeToRemove())},t.prototype.componentWillUnmount=function(){var e=this.props,t=e.visualElement,n=e.layoutGroup,i=e.switchLayoutGroup,r=t.projection;r&&(r.scheduleCheckAfterUnmount(),(null===n||void 0===n?void 0:n.group)&&n.group.remove(r),(null===i||void 0===i?void 0:i.deregister)&&i.deregister(r))},t.prototype.safeToRemove=function(){var e=this.props.safeToRemove;null===e||void 0===e||e()},t.prototype.render=function(){return null},t}(t.Component);var zN={borderRadius:KZ(KZ({},TN),{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:TN,borderTopRightRadius:TN,borderBottomLeftRadius:TN,borderBottomRightRadius:TN,boxShadow:YN},LN={measureLayout:function(e){var n=OZ(RW(),2),i=n[0],r=n[1],a=(0,t.useContext)(Bk);return t.createElement(EN,KZ({},e,{layoutGroup:a,switchLayoutGroup:(0,t.useContext)(xk),isPresent:i,safeToRemove:r}))}};var KN=["TopLeft","TopRight","BottomLeft","BottomRight"],_N=KN.length,PN=function(e){return"string"===typeof e?parseFloat(e):e},DN=function(e){return"number"===typeof e||eR.test(e)};function ON(e,t){var n;return null!==(n=e[t])&&void 0!==n?n:e.borderRadius}var UN=JN(0,.5,FM),jN=JN(.5,.95,kM);function JN(e,t,n){return function(i){return i<e?0:i>t?1:n(DW(e,t,i))}}function QN(e,t){e.min=t.min,e.max=t.max}function qN(e,t){QN(e.x,t.x),QN(e.y,t.y)}function $N(e,t,n,i,r){return e=QF(e-=t,1/n,i),void 0!==r&&(e=QF(e,1/r,i)),e}function eH(e,t,n,i,r){var a=OZ(n,3),o=a[0],s=a[1],l=a[2];!function(e,t,n,i,r,a,o){if(void 0===t&&(t=0),void 0===n&&(n=1),void 0===i&&(i=.5),void 0===a&&(a=e),void 0===o&&(o=e),$k.test(t)&&(t=parseFloat(t),t=OW(o.min,o.max,t/100)-o.min),"number"===typeof t){var s=OW(a.min,a.max,i);e===a&&(s-=t),e.min=$N(e.min,t,n,s,r),e.max=$N(e.max,t,n,s,r)}}(e,t[o],t[s],t[l],t.scale,i,r)}var tH=["x","scaleX","originX"],nH=["y","scaleY","originY"];function iH(e,t,n,i){eH(e.x,t,tH,null===n||void 0===n?void 0:n.x,null===i||void 0===i?void 0:i.x),eH(e.y,t,nH,null===n||void 0===n?void 0:n.y,null===i||void 0===i?void 0:i.y)}function rH(e){return 0===e.translate&&1===e.scale}function aH(e){return rH(e.x)&&rH(e.y)}function oH(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}var sH=function(){function e(){this.members=[]}return e.prototype.add=function(e){JV(this.members,e),e.scheduleRender()},e.prototype.remove=function(e){if(QV(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){var t=this.members[this.members.length-1];t&&this.promote(t)}},e.prototype.relegate=function(e){var t,n=this.members.findIndex((function(t){return e===t}));if(0===n)return!1;for(var i=n;i>=0;i--){var r=this.members[i];if(!1!==r.isPresent){t=r;break}}return!!t&&(this.promote(t),!0)},e.prototype.promote=function(e,t){var n,i=this.lead;e!==i&&(this.prevLead=i,this.lead=e,e.show(),i&&(i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues,e.snapshot.isShared=!0),(null===(n=e.root)||void 0===n?void 0:n.isUpdating)&&(e.isLayoutDirty=!0),!1===e.options.crossfade&&i.hide()))},e.prototype.exitAnimationComplete=function(){this.members.forEach((function(e){var t,n,i,r,a;null===(n=(t=e.options).onExitComplete)||void 0===n||n.call(t),null===(a=null===(i=e.resumingFrom)||void 0===i?void 0:(r=i.options).onExitComplete)||void 0===a||a.call(r)}))},e.prototype.scheduleRender=function(){this.members.forEach((function(e){e.instance&&e.scheduleRender(!1)}))},e.prototype.removeLeadSnapshot=function(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)},e}(),lH="translate3d(0px, 0px, 0) scale(1, 1) scale(1, 1)";function cH(e,t,n){var i=e.x.translate/t.x,r=e.y.translate/t.y,a="translate3d(".concat(i,"px, ").concat(r,"px, 0) ");if(a+="scale(".concat(1/t.x,", ").concat(1/t.y,") "),n){var o=n.rotate,s=n.rotateX,l=n.rotateY;o&&(a+="rotate(".concat(o,"deg) ")),s&&(a+="rotateX(".concat(s,"deg) ")),l&&(a+="rotateY(".concat(l,"deg) "))}var c=e.x.scale*t.x,u=e.y.scale*t.y;return(a+="scale(".concat(c,", ").concat(u,")"))===lH?"none":a}var uH=function(e,t){return e.depth-t.depth},gH=function(){function e(){this.children=[],this.isDirty=!1}return e.prototype.add=function(e){JV(this.children,e),this.isDirty=!0},e.prototype.remove=function(e){QV(this.children,e),this.isDirty=!0},e.prototype.forEach=function(e){this.isDirty&&this.children.sort(uH),this.isDirty=!1,this.children.forEach(e)},e}();function dH(e){var t=e.attachResizeListener,n=e.defaultParent,i=e.measureScroll,r=e.checkIsScrollRoot,a=e.resetTransform;return function(){function e(e,t,i){var r=this;void 0===t&&(t={}),void 0===i&&(i=null===n||void 0===n?void 0:n()),this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.potentialNodes=new Map,this.checkUpdateFailed=function(){r.isUpdating&&(r.isUpdating=!1,r.clearAllSnapshots())},this.updateProjection=function(){r.nodes.forEach(vH),r.nodes.forEach(AH)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.id=e,this.latestValues=t,this.root=i?i.root||i:this,this.path=i?jZ(jZ([],OZ(i.path),!1),[i],!1):[],this.parent=i,this.depth=i?i.depth+1:0,e&&this.root.registerPotentialNode(e,this);for(var a=0;a<this.path.length;a++)this.path[a].shouldResetTransform=!0;this.root===this&&(this.nodes=new gH)}return e.prototype.addEventListener=function(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new qV),this.eventHandlers.get(e).add(t)},e.prototype.notifyListeners=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=this.eventHandlers.get(e);null===i||void 0===i||i.notify.apply(i,jZ([],OZ(t),!1))},e.prototype.hasListeners=function(e){return this.eventHandlers.has(e)},e.prototype.registerPotentialNode=function(e,t){this.potentialNodes.set(e,t)},e.prototype.mount=function(e,n){var i,r=this;if(void 0===n&&(n=!1),!this.instance){this.isSVG=e instanceof SVGElement&&"svg"!==e.tagName,this.instance=e;var a=this.options,o=a.layoutId,s=a.layout,l=a.visualElement;if(l&&!l.getInstance()&&l.mount(e),this.root.nodes.add(this),null===(i=this.parent)||void 0===i||i.children.add(this),this.id&&this.root.potentialNodes.delete(this.id),n&&(s||o)&&(this.isLayoutDirty=!0),t){var c,u=function(){return r.root.updateBlockedByResize=!1};t(e,(function(){r.root.updateBlockedByResize=!0,clearTimeout(c),c=window.setTimeout(u,250),Gk.hasAnimatedSinceResize&&(Gk.hasAnimatedSinceResize=!1,r.nodes.forEach(mH))}))}o&&this.root.registerSharedNode(o,this),!1!==this.options.animate&&l&&(o||s)&&this.addEventListener("didUpdate",(function(e){var t,n,i,a,o,s=e.delta,c=e.hasLayoutChanged,u=e.hasRelativeTargetChanged,g=e.layout;if(r.isTreeAnimationBlocked())return r.target=void 0,void(r.relativeTarget=void 0);var d=null!==(n=null!==(t=r.options.transition)&&void 0!==t?t:l.getDefaultTransition())&&void 0!==n?n:xH,h=l.getProps(),f=h.onLayoutAnimationStart,p=h.onLayoutAnimationComplete,I=!r.targetLayout||!oH(r.targetLayout,g)||u,C=!c&&u;if((null===(i=r.resumeFrom)||void 0===i?void 0:i.instance)||C||c&&(I||!r.currentAnimation)){r.resumeFrom&&(r.resumingFrom=r.resumeFrom,r.resumingFrom.resumingFrom=void 0),r.setAnimationOrigin(s,C);var m=KZ(KZ({},DV(d,"layout")),{onPlay:f,onComplete:p});l.shouldReduceMotion&&(m.delay=0,m.type=!1),r.startAnimation(m)}else c||0!==r.animationProgress||r.finishAnimation(),r.isLead()&&(null===(o=(a=r.options).onExitComplete)||void 0===o||o.call(a));r.targetLayout=g}))}},e.prototype.unmount=function(){var e,t;this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this),null===(e=this.getStack())||void 0===e||e.remove(this),null===(t=this.parent)||void 0===t||t.children.delete(this),this.instance=void 0,tV.preRender(this.updateProjection)},e.prototype.blockUpdate=function(){this.updateManuallyBlocked=!0},e.prototype.unblockUpdate=function(){this.updateManuallyBlocked=!1},e.prototype.isUpdateBlocked=function(){return this.updateManuallyBlocked||this.updateBlockedByResize},e.prototype.isTreeAnimationBlocked=function(){var e;return this.isAnimationBlocked||(null===(e=this.parent)||void 0===e?void 0:e.isTreeAnimationBlocked())||!1},e.prototype.startUpdate=function(){var e;this.isUpdateBlocked()||(this.isUpdating=!0,null===(e=this.nodes)||void 0===e||e.forEach(bH))},e.prototype.willUpdate=function(e){var t,n,i;if(void 0===e&&(e=!0),this.root.isUpdateBlocked())null===(n=(t=this.options).onExitComplete)||void 0===n||n.call(t);else if(!this.root.isUpdating&&this.root.startUpdate(),!this.isLayoutDirty){this.isLayoutDirty=!0;for(var r=0;r<this.path.length;r++){var a=this.path[r];a.shouldResetTransform=!0,a.updateScroll()}var o=this.options,s=o.layoutId,l=o.layout;if(void 0!==s||l){var c=null===(i=this.options.visualElement)||void 0===i?void 0:i.getProps().transformTemplate;this.prevTransformTemplateValue=null===c||void 0===c?void 0:c(this.latestValues,""),this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}}},e.prototype.didUpdate=function(){if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(IH);this.isUpdating&&(this.isUpdating=!1,this.potentialNodes.size&&(this.potentialNodes.forEach(SH),this.potentialNodes.clear()),this.nodes.forEach(CH),this.nodes.forEach(hH),this.nodes.forEach(fH),this.clearAllSnapshots(),nV.update(),nV.preRender(),nV.render())},e.prototype.clearAllSnapshots=function(){this.nodes.forEach(pH),this.sharedNodes.forEach(yH)},e.prototype.scheduleUpdateProjection=function(){sV.preRender(this.updateProjection,!1,!0)},e.prototype.scheduleCheckAfterUnmount=function(){var e=this;sV.postRender((function(){e.isLayoutDirty?e.root.didUpdate():e.root.checkUpdateFailed()}))},e.prototype.updateSnapshot=function(){if(!this.snapshot&&this.instance){var e=this.measure(),t=this.removeTransform(this.removeElementScroll(e));kH(t),this.snapshot={measured:e,layout:t,latestValues:{}}}},e.prototype.updateLayout=function(){var e;if(this.instance&&(this.updateScroll(),this.options.alwaysMeasureLayout&&this.isLead()||this.isLayoutDirty)){if(this.resumeFrom&&!this.resumeFrom.instance)for(var t=0;t<this.path.length;t++){this.path[t].updateScroll()}var n=this.measure();kH(n);var i=this.layout;this.layout={measured:n,actual:this.removeElementScroll(n)},this.layoutCorrected=_F(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.actual),null===(e=this.options.visualElement)||void 0===e||e.notifyLayoutMeasure(this.layout.actual,null===i||void 0===i?void 0:i.actual)}},e.prototype.updateScroll=function(){this.options.layoutScroll&&this.instance&&(this.isScrollRoot=r(this.instance),this.scroll=i(this.instance))},e.prototype.resetTransform=function(){var e;if(a){var t=this.isLayoutDirty||this.shouldResetTransform,n=this.projectionDelta&&!aH(this.projectionDelta),i=null===(e=this.options.visualElement)||void 0===e?void 0:e.getProps().transformTemplate,r=null===i||void 0===i?void 0:i(this.latestValues,""),o=r!==this.prevTransformTemplateValue;t&&(n||jF(this.latestValues)||o)&&(a(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}},e.prototype.measure=function(){var e=this.options.visualElement;if(!e)return _F();var t=e.measureViewportBox(),n=this.root.scroll;return n&&(tN(t.x,n.x),tN(t.y,n.y)),t},e.prototype.removeElementScroll=function(e){var t=_F();qN(t,e);for(var n=0;n<this.path.length;n++){var i=this.path[n],r=i.scroll,a=i.options,o=i.isScrollRoot;if(i!==this.root&&r&&a.layoutScroll){if(o){qN(t,e);var s=this.root.scroll;s&&(tN(t.x,-s.x),tN(t.y,-s.y))}tN(t.x,r.x),tN(t.y,r.y)}}return t},e.prototype.applyTransform=function(e,t){void 0===t&&(t=!1);var n=_F();qN(n,e);for(var i=0;i<this.path.length;i++){var r=this.path[i];!t&&r.options.layoutScroll&&r.scroll&&r!==r.root&&aN(n,{x:-r.scroll.x,y:-r.scroll.y}),jF(r.latestValues)&&aN(n,r.latestValues)}return jF(this.latestValues)&&aN(n,this.latestValues),n},e.prototype.removeTransform=function(e){var t,n=_F();qN(n,e);for(var i=0;i<this.path.length;i++){var r=this.path[i];if(r.instance&&jF(r.latestValues)){UF(r.latestValues)&&r.updateSnapshot();var a=_F();qN(a,r.measure()),iH(n,r.latestValues,null===(t=r.snapshot)||void 0===t?void 0:t.layout,a)}}return jF(this.latestValues)&&iH(n,this.latestValues),n},e.prototype.setTargetDelta=function(e){this.targetDelta=e,this.root.scheduleUpdateProjection()},e.prototype.setOptions=function(e){var t;this.options=KZ(KZ(KZ({},this.options),e),{crossfade:null===(t=e.crossfade)||void 0===t||t})},e.prototype.clearMeasurements=function(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1},e.prototype.resolveTargetDelta=function(){var e,t,n,i,r=this.options,a=r.layout,o=r.layoutId;this.layout&&(a||o)&&(this.targetDelta||this.relativeTarget||(this.relativeParent=this.getClosestProjectingParent(),this.relativeParent&&this.relativeParent.layout&&(this.relativeTarget=_F(),this.relativeTargetOrigin=_F(),TF(this.relativeTargetOrigin,this.layout.actual,this.relativeParent.layout.actual),qN(this.relativeTarget,this.relativeTargetOrigin))),(this.relativeTarget||this.targetDelta)&&(this.target||(this.target=_F(),this.targetWithTransforms=_F()),this.relativeTarget&&this.relativeTargetOrigin&&(null===(e=this.relativeParent)||void 0===e?void 0:e.target)?(t=this.target,n=this.relativeTarget,i=this.relativeParent.target,NF(t.x,n.x,i.x),NF(t.y,n.y,i.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.actual):qN(this.target,this.layout.actual),eN(this.target,this.targetDelta)):qN(this.target,this.layout.actual),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,this.relativeParent=this.getClosestProjectingParent(),this.relativeParent&&Boolean(this.relativeParent.resumingFrom)===Boolean(this.resumingFrom)&&!this.relativeParent.options.layoutScroll&&this.relativeParent.target&&(this.relativeTarget=_F(),this.relativeTargetOrigin=_F(),TF(this.relativeTargetOrigin,this.target,this.relativeParent.target),qN(this.relativeTarget,this.relativeTargetOrigin)))))},e.prototype.getClosestProjectingParent=function(){if(this.parent&&!jF(this.parent.latestValues))return(this.parent.relativeTarget||this.parent.targetDelta)&&this.parent.layout?this.parent:this.parent.getClosestProjectingParent()},e.prototype.calcProjection=function(){var e,t=this.options,n=t.layout,i=t.layoutId;if(this.isTreeAnimating=Boolean((null===(e=this.parent)||void 0===e?void 0:e.isTreeAnimating)||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),this.layout&&(n||i)){var r=this.getLead();qN(this.layoutCorrected,this.layout.actual),function(e,t,n,i){var r,a;void 0===i&&(i=!1);var o=n.length;if(o){var s,l;t.x=t.y=1;for(var c=0;c<o;c++)l=(s=n[c]).projectionDelta,"contents"!==(null===(a=null===(r=s.instance)||void 0===r?void 0:r.style)||void 0===a?void 0:a.display)&&(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&aN(e,{x:-s.scroll.x,y:-s.scroll.y}),l&&(t.x*=l.x.scale,t.y*=l.y.scale,eN(e,l)),i&&jF(s.latestValues)&&aN(e,s.latestValues))}}(this.layoutCorrected,this.treeScale,this.path,Boolean(this.resumingFrom)||this!==r);var a=r.target;if(a){this.projectionDelta||(this.projectionDelta=KF(),this.projectionDeltaWithTransform=KF());var o=this.treeScale.x,s=this.treeScale.y,l=this.projectionTransform;FF(this.projectionDelta,this.layoutCorrected,a,this.latestValues),this.projectionTransform=cH(this.projectionDelta,this.treeScale),this.projectionTransform===l&&this.treeScale.x===o&&this.treeScale.y===s||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",a))}}},e.prototype.hide=function(){this.isVisible=!1},e.prototype.show=function(){this.isVisible=!0},e.prototype.scheduleRender=function(e){var t,n,i;void 0===e&&(e=!0),null===(n=(t=this.options).scheduleRender)||void 0===n||n.call(t),e&&(null===(i=this.getStack())||void 0===i||i.scheduleRender()),this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)},e.prototype.setAnimationOrigin=function(e,t){var n,i=this;void 0===t&&(t=!1);var r=this.snapshot,a=(null===r||void 0===r?void 0:r.latestValues)||{},o=KZ({},this.latestValues),s=KF();this.relativeTarget=this.relativeTargetOrigin=void 0,this.attemptToResolveRelativeTarget=!t;var l=_F(),c=null===r||void 0===r?void 0:r.isShared,u=((null===(n=this.getStack())||void 0===n?void 0:n.members.length)||0)<=1,g=Boolean(c&&!u&&!0===this.options.crossfade&&!this.path.some(BH));this.animationProgress=0,this.mixTargetDelta=function(t){var n,r=t/1e3;GH(s.x,e.x,r),GH(s.y,e.y,r),i.setTargetDelta(s),i.relativeTarget&&i.relativeTargetOrigin&&i.layout&&(null===(n=i.relativeParent)||void 0===n?void 0:n.layout)&&(TF(l,i.layout.actual,i.relativeParent.layout.actual),function(e,t,n,i){wH(e.x,t.x,n.x,i),wH(e.y,t.y,n.y,i)}(i.relativeTarget,i.relativeTargetOrigin,l,r)),c&&(i.animationValues=o,function(e,t,n,i,r,a){var o,s,l,c;r?(e.opacity=OW(0,null!==(o=n.opacity)&&void 0!==o?o:1,UN(i)),e.opacityExit=OW(null!==(s=t.opacity)&&void 0!==s?s:1,0,jN(i))):a&&(e.opacity=OW(null!==(l=t.opacity)&&void 0!==l?l:1,null!==(c=n.opacity)&&void 0!==c?c:1,i));for(var u=0;u<_N;u++){var g="border".concat(KN[u],"Radius"),d=ON(t,g),h=ON(n,g);void 0===d&&void 0===h||(d||(d=0),h||(h=0),0===d||0===h||DN(d)===DN(h)?(e[g]=Math.max(OW(PN(d),PN(h),i),0),($k.test(h)||$k.test(d))&&(e[g]+="%")):e[g]=h)}(t.rotate||n.rotate)&&(e.rotate=OW(t.rotate||0,n.rotate||0,i))}(o,a,i.latestValues,r,g,u)),i.root.scheduleUpdateProjection(),i.scheduleRender(),i.animationProgress=r},this.mixTargetDelta(0)},e.prototype.startAnimation=function(e){var t,n,i=this;this.notifyListeners("animationStart"),null===(t=this.currentAnimation)||void 0===t||t.stop(),this.resumingFrom&&(null===(n=this.resumingFrom.currentAnimation)||void 0===n||n.stop()),this.pendingAnimation&&(tV.update(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=sV.update((function(){Gk.hasAnimatedSinceResize=!0,i.currentAnimation=function(e,t,n){void 0===n&&(n={});var i=zk(e)?e:eF(e);return OV("",i,t,n),{stop:function(){return i.stop()},isAnimating:function(){return i.isAnimating()}}}(0,1e3,KZ(KZ({},e),{onUpdate:function(t){var n;i.mixTargetDelta(t),null===(n=e.onUpdate)||void 0===n||n.call(e,t)},onComplete:function(){var t;null===(t=e.onComplete)||void 0===t||t.call(e),i.completeAnimation()}})),i.resumingFrom&&(i.resumingFrom.currentAnimation=i.currentAnimation),i.pendingAnimation=void 0}))},e.prototype.completeAnimation=function(){var e;this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0),null===(e=this.getStack())||void 0===e||e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")},e.prototype.finishAnimation=function(){var e;this.currentAnimation&&(null===(e=this.mixTargetDelta)||void 0===e||e.call(this,1e3),this.currentAnimation.stop()),this.completeAnimation()},e.prototype.applyTransformsToTarget=function(){var e=this.getLead(),t=e.targetWithTransforms,n=e.target,i=e.layout,r=e.latestValues;t&&n&&i&&(qN(t,n),aN(t,r),FF(this.projectionDeltaWithTransform,this.layoutCorrected,t,r))},e.prototype.registerSharedNode=function(e,t){var n,i,r;this.sharedNodes.has(e)||this.sharedNodes.set(e,new sH),this.sharedNodes.get(e).add(t),t.promote({transition:null===(n=t.options.initialPromotionConfig)||void 0===n?void 0:n.transition,preserveFollowOpacity:null===(r=null===(i=t.options.initialPromotionConfig)||void 0===i?void 0:i.shouldPreserveFollowOpacity)||void 0===r?void 0:r.call(i,t)})},e.prototype.isLead=function(){var e=this.getStack();return!e||e.lead===this},e.prototype.getLead=function(){var e;return this.options.layoutId&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this},e.prototype.getPrevLead=function(){var e;return this.options.layoutId?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0},e.prototype.getStack=function(){var e=this.options.layoutId;if(e)return this.root.sharedNodes.get(e)},e.prototype.promote=function(e){var t=void 0===e?{}:e,n=t.needsReset,i=t.transition,r=t.preserveFollowOpacity,a=this.getStack();a&&a.promote(this,r),n&&(this.projectionDelta=void 0,this.needsReset=!0),i&&this.setOptions({transition:i})},e.prototype.relegate=function(){var e=this.getStack();return!!e&&e.relegate(this)},e.prototype.resetRotation=function(){var e=this.options.visualElement;if(e){for(var t=!1,n={},i=0;i<Vk.length;i++){var r="rotate"+Vk[i];e.getStaticValue(r)&&(t=!0,n[r]=e.getStaticValue(r),e.setStaticValue(r,0))}if(t){for(var r in null===e||void 0===e||e.syncRender(),n)e.setStaticValue(r,n[r]);e.scheduleRender()}}},e.prototype.getProjectionStyles=function(e){var t,n,i,r,a,o;void 0===e&&(e={});var s={};if(!this.instance||this.isSVG)return s;if(!this.isVisible)return{visibility:"hidden"};s.visibility="";var l=null===(t=this.options.visualElement)||void 0===t?void 0:t.getProps().transformTemplate;if(this.needsReset)return this.needsReset=!1,s.opacity="",s.pointerEvents=HR(e.pointerEvents)||"",s.transform=l?l(this.latestValues,""):"none",s;var c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){var u={};return this.options.layoutId&&(u.opacity=null!==(n=this.latestValues.opacity)&&void 0!==n?n:1,u.pointerEvents=HR(e.pointerEvents)||""),this.hasProjected&&!jF(this.latestValues)&&(u.transform=l?l({},""):"none",this.hasProjected=!1),u}var g=c.animationValues||c.latestValues;this.applyTransformsToTarget(),s.transform=cH(this.projectionDeltaWithTransform,this.treeScale,g),l&&(s.transform=l(g,s.transform));var d=this.projectionDelta,h=d.x,f=d.y;for(var p in s.transformOrigin="".concat(100*h.origin,"% ").concat(100*f.origin,"% 0"),c.animationValues?s.opacity=c===this?null!==(r=null!==(i=g.opacity)&&void 0!==i?i:this.latestValues.opacity)&&void 0!==r?r:1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:s.opacity=c===this?null!==(a=g.opacity)&&void 0!==a?a:"":null!==(o=g.opacityExit)&&void 0!==o?o:0,Mk)if(void 0!==g[p]){var I=Mk[p],C=I.correct,m=I.applyTo,v=C(g[p],c);if(m)for(var A=m.length,b=0;b<A;b++)s[m[b]]=v;else s[p]=v}return this.options.layoutId&&(s.pointerEvents=c===this?HR(e.pointerEvents)||"":"none"),s},e.prototype.clearSnapshot=function(){this.resumeFrom=this.snapshot=void 0},e.prototype.resetTree=function(){this.root.nodes.forEach((function(e){var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()})),this.root.nodes.forEach(IH),this.root.sharedNodes.clear()},e}()}function hH(e){e.updateLayout()}function fH(e){var t,n,i,r,a=null!==(n=null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)&&void 0!==n?n:e.snapshot;if(e.isLead()&&e.layout&&a&&e.hasListeners("didUpdate")){var o=e.layout,s=o.actual,l=o.measured;"size"===e.options.animationType?PF((function(e){var t=a.isShared?a.measured[e]:a.layout[e],n=WF(t);t.min=s[e].min,t.max=t.min+n})):"position"===e.options.animationType&&PF((function(e){var t=a.isShared?a.measured[e]:a.layout[e],n=WF(s[e]);t.max=t.min+n}));var c=KF();FF(c,s,a.layout);var u=KF();a.isShared?FF(u,e.applyTransform(l,!0),a.measured):FF(u,s,a.layout);var g=!aH(c),d=!1;if(!e.resumeFrom&&(e.relativeParent=e.getClosestProjectingParent(),e.relativeParent&&!e.relativeParent.resumeFrom)){var h=e.relativeParent,f=h.snapshot,p=h.layout;if(f&&p){var I=_F();TF(I,a.layout,f.layout);var C=_F();TF(C,s,p.actual),oH(I,C)||(d=!0)}}e.notifyListeners("didUpdate",{layout:s,snapshot:a,delta:u,layoutDelta:c,hasLayoutChanged:g,hasRelativeTargetChanged:d})}else e.isLead()&&(null===(r=(i=e.options).onExitComplete)||void 0===r||r.call(i));e.options.transition=void 0}function pH(e){e.clearSnapshot()}function IH(e){e.clearMeasurements()}function CH(e){var t=e.options.visualElement;(null===t||void 0===t?void 0:t.getProps().onBeforeLayoutMeasure)&&t.notifyBeforeLayoutMeasure(),e.resetTransform()}function mH(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0}function vH(e){e.resolveTargetDelta()}function AH(e){e.calcProjection()}function bH(e){e.resetRotation()}function yH(e){e.removeLeadSnapshot()}function GH(e,t,n){e.translate=OW(t.translate,0,n),e.scale=OW(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function wH(e,t,n,i){e.min=OW(t.min,n.min,i),e.max=OW(t.max,n.max,i)}function BH(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}var xH={duration:.45,ease:[.4,0,.1,1]};function SH(e,t){for(var n=e.root,i=e.path.length-1;i>=0;i--)if(Boolean(e.path[i].instance)){n=e.path[i];break}var r=(n&&n!==e.root?n.instance:document).querySelector('[data-projection-id="'.concat(t,'"]'));r&&e.mount(r,!0)}function ZH(e){e.min=Math.round(e.min),e.max=Math.round(e.max)}function kH(e){ZH(e.x),ZH(e.y)}var RH=dH({attachResizeListener:function(e,t){return KR(e,"resize",t)},measureScroll:function(){return{x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}},checkIsScrollRoot:function(){return!0}}),WH={current:void 0},MH=dH({measureScroll:function(e){return{x:e.scrollLeft,y:e.scrollTop}},defaultParent:function(){if(!WH.current){var e=new RH(0,{});e.mount(window),e.setOptions({layoutScroll:!0}),WH.current=e}return WH.current},resetTransform:function(e,t){e.style.transform=null!==t&&void 0!==t?t:"none"},checkIsScrollRoot:function(e){return Boolean("fixed"===window.getComputedStyle(e).position)}}),VH=KZ(KZ(KZ(KZ({},vF),xW),uN),LN),FH=kk((function(e,t){return function(e,t,n,i,r){var a=t.forwardMotionProps,o=void 0!==a&&a,s=Wk(e)?zR:LR;return KZ(KZ({},s),{preloadedFeatures:n,useRender:wR(o),createVisualElement:i,projectionNodeConstructor:r,Component:e})}(e,t,VH,NN,MH)}));function NH(){var e=Qx().progress;return(0,u.jsxs)(cS,{center:!0,children:[" ",(0,u.jsxs)("div",{style:{fontSize:"12pt",color:"black"},children:[Math.round(e)," % y\xfckleniyor"]})]})}bZ.preload("/tk_cocuk_web_ds/models/lab.glb");var HH=function(e){var n,i,r="1"===e.cinsiyet,a="",o="number"===typeof(null===e||void 0===e?void 0:e.boyOrtancaDeger)?Math.abs(null!==(n=Number(null===e||void 0===e?void 0:e.boyOrtancaDeger))&&void 0!==n?n:0):0;"number"===typeof(null===e||void 0===e?void 0:e.boyOrtancaDeger)&&(a=(null===e||void 0===e?void 0:e.boyOrtancaDeger)<0?"alt\u0131nda.":"\xfcst\xfcnde.");var s="",l="number"===typeof(null===e||void 0===e?void 0:e.kiloOrtancaDeger)?Math.abs(null!==(i=Number(null===e||void 0===e?void 0:e.kiloOrtancaDeger))&&void 0!==i?i:0):0;return"number"===typeof(null===e||void 0===e?void 0:e.kiloOrtancaDeger)&&(s=(null===e||void 0===e?void 0:e.kiloOrtancaDeger)<0?"alt\u0131nda.":"\xfcst\xfcnde."),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"i-left-canvas",style:{zIndex:"1",marginLeft:"20rem",width:"160px",height:"355px"},children:(0,u.jsxs)(jx,{camera:{position:[0,0,10.15],fov:15},style:{cursor:"pointer",marginLeft:"3.5rem"},children:[(0,u.jsx)("ambientLight",{intensity:1.25}),(0,u.jsx)("directionalLight",{intensity:.4}),(0,u.jsx)(t.Suspense,{fallback:(0,u.jsx)(NH,{}),children:r?(0,u.jsx)(wZ,{position:[-.1,-.9,1],rotation:[0,-60,0]}):(0,u.jsx)(GZ,{position:[-.1,-.9,1],rotation:[0,-60,0]})}),(0,u.jsx)(pS,{enableZoom:!1,enablePan:!1,rotateSpeed:.5,maxPolarAngle:1.45,minPolarAngle:1.44,maxAzimuthAngle:.05,minAzimuthAngle:-.05})]})}),(0,u.jsx)("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",position:"absolute",zIndex:"0"},children:(0,u.jsxs)("div",{style:{width:"%80",fontSize:"1rem",lineHeight:"1",marginTop:"4rem",paddingLeft:"2rem",paddingRight:"20rem",minWidth:"65%"},children:[" ",(0,u.jsxs)("span",{className:"introleft-text",children:["Bug\xfcn itibar\u0131yla ",e.yilYas," y\u0131l ",e.ayYas," ay ",e.gunYas," ","g\xfcnl\xfcks\xfcn. ",(0,u.jsx)("br",{}),(0,u.jsx)("br",{}),"Senin isminde ",e.il," ilinde ",e.ayniIsimdeIlSayi,",",(0,u.jsx)("br",{}),"T\xfcrkiye\u2019de ",e.ayniIsimdeTurkiyeSayi," ki\u015fi var.",(0,u.jsx)("br",{})," ",(0,u.jsx)("br",{}),e.il," ilinde seninle ayn\u0131 tarihte do\u011fan"," ",e.ayniTarihDoganIlSayi,", T\xfcrkiye\u2019de"," ",e.ayniTarihDoganTurkiyeSayi," ki\u015fi var. ",(0,u.jsx)("br",{}),(0,u.jsx)("br",{}),"Senin ya\u015f ve cinsiyetine g\xf6re boyun, ortanca de\u011ferin ",o," ","cm ",a," ",(0,u.jsx)("br",{}),(0,u.jsx)("br",{}),"Senin ya\u015f ve cinsiyetine g\xf6re kilon, ortanca de\u011ferin ",l," ","kg ",s]})]})}),(0,u.jsxs)("div",{style:{display:"flex",flexDirection:"column",zIndex:"0"},children:[(0,u.jsx)("div",{style:{marginRight:"6.4rem",paddingBottom:"9.9rem",marginBottom:"-3rem"},children:(0,u.jsxs)("span",{children:[" ",(0,u.jsxs)("span",{style:{fontSize:"12pt"},children:[" ","-",e.boy," cm"]})]})}),(0,u.jsx)("div",{style:{paddingTop:"8.5rem"},children:(0,u.jsxs)("span",{style:{marginLeft:"-15rem",paddingLeft:"6rem",color:"green"},children:[" ",(0,u.jsxs)("span",{style:{fontSize:"12pt"},children:[" ",e.kilo," kg"]})]})})]})]})},TH=(n.p,n.p+"static/media/left_frame_bg.003d86acf1bc6cf581fb.png"),XH={entering:{opacity:1},entered:{opacity:1}},YH={enter:Sr.enteringScreen,exit:Sr.leavingScreen},EH=t.forwardRef((function(e,n){var i=e.children,r=e.disableStrictModeCompat,a=void 0!==r&&r,o=e.in,s=e.onEnter,l=e.onEntered,u=e.onEntering,g=e.onExit,d=e.onExited,h=e.onExiting,f=e.style,p=e.TransitionComponent,I=void 0===p?eo:p,C=e.timeout,m=void 0===C?YH:C,A=Fe(e,["children","disableStrictModeCompat","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","TransitionComponent","timeout"]),b=oa(),y=b.unstable_strictMode&&!a,G=t.useRef(null),w=_r(i.ref,n),B=_r(y?G:void 0,w),x=function(e){return function(t,n){if(e){var i=c(y?[G.current,t]:[t,n],2),r=i[0],a=i[1];void 0===a?e(r):e(r,a)}}},S=x(u),Z=x((function(e,t){to(e);var n=no({style:f,timeout:m},{mode:"enter"});e.style.webkitTransition=b.transitions.create("opacity",n),e.style.transition=b.transitions.create("opacity",n),s&&s(e,t)})),k=x(l),R=x(h),W=x((function(e){var t=no({style:f,timeout:m},{mode:"exit"});e.style.webkitTransition=b.transitions.create("opacity",t),e.style.transition=b.transitions.create("opacity",t),g&&g(e)})),M=x(d);return t.createElement(I,v({appear:!0,in:o,nodeRef:y?G:void 0,onEnter:Z,onEntered:k,onEntering:S,onExit:W,onExited:M,onExiting:R,timeout:m},A),(function(e,n){return t.cloneElement(i,v({style:v({opacity:0,visibility:"exited"!==e||o?void 0:"hidden"},XH[e],f,i.props.style),ref:B},n))}))})),zH=EH,LH=t.forwardRef((function(e,n){var i=e.children,r=e.classes,a=e.className,o=e.invisible,s=void 0!==o&&o,l=e.open,c=e.transitionDuration,u=e.TransitionComponent,g=void 0===u?zH:u,d=Fe(e,["children","classes","className","invisible","open","transitionDuration","TransitionComponent"]);return t.createElement(g,v({in:l,timeout:c},d),t.createElement("div",{className:Nr(r.root,a,s&&r.invisible),"aria-hidden":!0,ref:n},i))})),KH=zr({root:{zIndex:-1,position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},invisible:{backgroundColor:"transparent"}},{name:"MuiBackdrop"})(LH),_H=n(3050),PH=Vr((function(e){return{rootOfCanvas:{position:"relative",width:"100%",height:"100%"},canvas:{border:"1px solid black",width:"100%",height:"100%"}}})),DH=function(e){var n=e.text,i=e.fullText,r=e.imageUrl,a=e.fontColor,o=e.text1Left,s=e.text1Top,l=e.text2Left,g=e.text2Top,d=e.text3Left,h=e.text3Top,f=e.text3Width,p=e.text4Left,I=e.text4Top,C=e.fontFamily,m=c((0,t.useState)(null),2),v=m[0],A=m[1],b=c((0,t.useState)(!1),2),y=b[0],G=b[1];console.log("fullText: ",i);var w=PH();(0,t.useEffect)((function(){var e=new Image,t=(new Date).toLocaleDateString("tr",{year:"numeric",month:"long",day:"numeric"});y||(e.onload=function(){var r=new _H.fabric.Canvas("canvas");r.setWidth(e.naturalWidth),r.setHeight(e.naturalHeight);var c=new _H.fabric.Image(e,{selectable:!1});r.add(c);var u=new _H.fabric.Text("Sevgili",{selectable:!0,left:o,top:s,fontSize:18,fontFamily:C,fontStyle:"italic",fill:"grey"});r.add(u);var m=new _H.fabric.Text(n,{selectable:!0,left:l,top:g,fontSize:38,fontFamily:C,fontStyle:"italic",fill:a,textAlign:"center",originX:"center",originY:"center"});r.add(m);var v=new _H.fabric.Textbox(i,{selectable:!0,left:d,top:h,fontSize:12,fontFamily:C,fontStyle:"italic",fill:"grey",width:f,lineHeight:1.2});r.add(v);var b=new _H.fabric.Text("Tarih: "+t,{selectable:!0,left:p,top:I,fontSize:14,fontFamily:C,fontStyle:"italic",fill:"grey"});r.add(b),A(r),G(!0)}),e.src=r}),[r,a,C,n,i,o,s,l,g,d,h,f,p,I]);return(0,u.jsxs)("div",{className:w.rootOfCanvas,children:[(0,u.jsx)("canvas",{className:w.canvas,id:"canvas"}),v&&(0,u.jsx)("button",{className:"button i-button",style:{position:"absolute",bottom:"20px",left:"50%",transform:"translateX(-50%)"},onClick:function(){var e=v.toDataURL({format:"png"}),t=document.createElement("a");t.download=n+"-tuik-cocuk-sertifika.png",t.href=e,document.body.appendChild(t),t.click(),document.body.removeChild(t)},children:"\u0130ndir"})]})},OH=n.p+"static/media/sertifika1.414d6a8c2a3b077adc5e.png",UH=n.p+"static/media/sertifika1_thumb.07fcfd8625cc87991461.png",jH=n.p+"static/media/sertifika2.c57b15100f29805f5ee2.png",JH=n.p+"static/media/sertifika2_thumb.5ddeb17191aaddea3352.png",QH=n.p+"static/media/sertifika3.5fb8fc8baf033009a318.png",qH=n.p+"static/media/sertifika3_thumb.c0e87468ff6d4e92af63.png",$H=n.p+"static/media/sertifika4.6395c62386a306015c5e.png",eT=n.p+"static/media/sertifika4_thumb.6ce501743526708a6f40.png",tT=n.p+"static/media/sertifika5.7fc4dc4e33774393f38a.png",nT=n.p+"static/media/sertifika5_thumb.f684b07786e4171069d2.png",iT=n.p+"static/media/sertifika6.a6793543a1c11c5b6e03.png",rT=n.p+"static/media/sertifika6_thumb.0ea0671a63e4d0c23fa5.png",aT=n.p+"static/media/sertifika7.e595a48a9b31fad15fbd.png",oT=n.p+"static/media/sertifika7_thumb.c8b3073ad98108460295.png",sT=n.p+"static/media/sertifika8.bc833912efb8ea806d67.png",lT=n.p+"static/media/sertifika8_thumb.91e9f8447a49e84a5e34.png",cT=n.p+"static/media/sertifika9.922e48144366f06a7d62.png",uT=n.p+"static/media/sertifika9_thumb.0ba81966409780d62eb8.png",gT=n.p+"static/media/sertifika10.77adc1b192415bc58220.png",dT=n.p+"static/media/sertifika10_thumb.7967c3831a813fe1f615.png",hT=n.p+"static/media/sertifika11.ce7d4bc9fced68cb4980.png",fT=n.p+"static/media/sertifika11_thumb.ee737c8782ab94a7d739.png",pT=n.p+"static/media/tkc_sertifika.7b39adee4b39a23188e9.png",IT=Vr((function(e){return{modal:ke({display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",padding:e.spacing(2),margin:e.spacing(2)},e.breakpoints.down("sm"),{padding:e.spacing(2),margin:e.spacing(1),width:"85%"}),paper:ke({backgroundColor:e.palette.background.paper,border:"2px solid lightblue",borderRadius:"6px",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)},e.breakpoints.down("sm"),{width:"85%",maxWidth:"400px"})}}));function CT(e){var n,i,r="1"===e.cinsiyet,a="",o="number"===typeof(null===e||void 0===e?void 0:e.boyOrtancaDeger)?Math.abs(null!==(n=Number(null===e||void 0===e?void 0:e.boyOrtancaDeger))&&void 0!==n?n:0):0;a="number"===typeof(null===e||void 0===e?void 0:e.boyOrtancaDeger)?(null===e||void 0===e?void 0:e.boyOrtancaDeger)<0?"alt\u0131nda.":"\xfcst\xfcnde.":"tam ortanca de\u011ferde.";var s="",l="number"===typeof(null===e||void 0===e?void 0:e.kiloOrtancaDeger)?Math.abs(null!==(i=Number(null===e||void 0===e?void 0:e.kiloOrtancaDeger))&&void 0!==i?i:0):0;s="number"===typeof(null===e||void 0===e?void 0:e.kiloOrtancaDeger)?(null===e||void 0===e?void 0:e.kiloOrtancaDeger)<0?"alt\u0131nda.":"\xfcst\xfcnde.":"tam ortanca de\u011ferde.";var g="Bug\xfcn itibar\u0131yla "+e.yilYas+" y\u0131l "+e.ayYas+" ay "+e.gunYas+" g\xfcnl\xfcks\xfcn.\n\nSenin isminde "+e.il+" ilinde "+e.ayniIsimdeIlSayi+", T\xfcrkiye\u2019de  "+e.ayniIsimdeTurkiyeSayi+" ki\u015fi var. \n\n"+e.il+" ilinde seninle ayn\u0131 tarihte do\u011fan "+e.ayniTarihDoganIlSayi+", T\xfcrkiye\u2019de "+e.ayniTarihDoganTurkiyeSayi+" ki\u015fi var.\n\nSenin ya\u015f ve cinsiyetine g\xf6re boyun, ortanca de\u011ferin "+o+" cm "+a+"\n\nSenin ya\u015f ve cinsiyetine g\xf6re kilon, ortanca de\u011ferin "+l+" kg "+s;console.log("fulltext: ",g);for(var d=c((0,t.useState)({text1Left:160,text1Top:90,text2Left:320,text2Top:120,text3Left:210,text3Top:160,text3Width:280,text4Left:500,text4Top:420}),2),h=d[0],f=d[1],p=IT(),I=c(t.useState(!1),2),C=I[0],m=I[1],v=e.ad.split(" "),A=0;A<v.length;A++)v[A]=v[A].charAt(0).toUpperCase()+v[A].slice(1);var b=v.join(" "),y=c((0,t.useState)(OH),2),G=y[0],w=y[1],B=function(e){w(e),console.log("selected Image is: ",e),e===OH?f({text1Left:160,text1Top:90,text2Left:320,text2Top:120,text3Left:210,text3Top:160,text3Width:280,text4Left:500,text4Top:420}):e===jH?f({text1Left:280,text1Top:60,text2Left:360,text2Top:130,text3Left:220,text3Top:160,text3Width:320,text4Left:80,text4Top:460}):e===QH||e===$H?f({text1Left:200,text1Top:170,text2Left:320,text2Top:220,text3Left:180,text3Top:260,text3Width:420,text4Left:450,text4Top:440}):e===tT||e===iT?f({text1Left:200,text1Top:150,text2Left:320,text2Top:200,text3Left:180,text3Top:240,text3Width:420,text4Left:410,text4Top:420}):e===aT?f({text1Left:200,text1Top:125,text2Left:320,text2Top:175,text3Left:180,text3Top:215,text3Width:420,text4Left:410,text4Top:420}):e===sT?f({text1Left:60,text1Top:55,text2Left:170,text2Top:105,text3Left:60,text3Top:145,text3Width:420,text4Left:150,text4Top:320}):e===cT?f({text1Left:200,text1Top:125,text2Left:320,text2Top:175,text3Left:180,text3Top:215,text3Width:420,text4Left:490,text4Top:400}):e===gT?f({text1Left:200,text1Top:125,text2Left:320,text2Top:175,text3Left:180,text3Top:215,text3Width:420,text4Left:200,text4Top:400}):e===hT&&f({text1Left:200,text1Top:125,text2Left:320,text2Top:175,text3Left:180,text3Top:215,text3Width:420,text4Left:200,text4Top:380})},x=function(e){return e===G};return(0,u.jsxs)("div",{children:[(0,u.jsx)(NZ,{img:pT,onClick:function(){m(!0)}}),(0,u.jsx)(Ka,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:p.modal,open:C,onClose:function(){m(!1)},closeAfterTransition:!0,BackdropComponent:KH,BackdropProps:{timeout:500},children:(0,u.jsx)(zH,{in:C,children:(0,u.jsxs)("div",{className:p.paper,children:[(0,u.jsx)("h2",{style:{textAlign:"center",fontSize:"10pt"},children:"Sertifikalar"}),(0,u.jsxs)("div",{children:[(0,u.jsx)("button",{onClick:function(){return B(OH)},style:{boxShadow:x(OH)?"0 0 8px rgba(0, 255, 0, 0.8) inset":""},children:(0,u.jsx)("img",{src:UH,alt:"Thumb 1"})}),(0,u.jsx)("button",{onClick:function(){return B(jH)},style:{boxShadow:x(jH)?"0 0 8px rgba(0, 255, 0, 0.8) inset":""},children:(0,u.jsx)("img",{src:JH,alt:"Thumb 2"})}),(0,u.jsx)("button",{onClick:function(){return B(QH)},style:{boxShadow:x(QH)?"0 0 8px rgba(0, 255, 0, 0.8) inset":""},children:(0,u.jsx)("img",{src:qH,alt:"Thumb 3"})}),(0,u.jsx)("button",{onClick:function(){return B($H)},style:{boxShadow:x($H)?"0 0 8px rgba(0, 255, 0, 0.8) inset":""},children:(0,u.jsx)("img",{src:eT,alt:"Thumb 3"})}),(0,u.jsx)("button",{onClick:function(){return B(tT)},style:{boxShadow:x(tT)?"0 0 8px rgba(0, 255, 0, 0.8) inset":""},children:(0,u.jsx)("img",{src:nT,alt:"Thumb 3"})}),(0,u.jsx)("button",{onClick:function(){return B(iT)},style:{boxShadow:x(iT)?"0 0 8px rgba(0, 255, 0, 0.8) inset":""},children:(0,u.jsx)("img",{src:rT,alt:"Thumb 3"})})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("button",{onClick:function(){return B(aT)},style:{boxShadow:x(aT)?"0 0 8px rgba(0, 255, 0, 0.8) inset":""},children:(0,u.jsx)("img",{src:oT,alt:"Thumb 3"})}),(0,u.jsx)("button",{onClick:function(){return B(sT)},style:{boxShadow:x(sT)?"0 0 8px rgba(0, 255, 0, 0.8) inset":""},children:(0,u.jsx)("img",{src:lT,alt:"Thumb 3"})}),(0,u.jsx)("button",{onClick:function(){return B(cT)},style:{boxShadow:x(cT)?"0 0 8px rgba(0, 255, 0, 0.8) inset":""},children:(0,u.jsx)("img",{src:uT,alt:"Thumb 3"})}),(0,u.jsx)("button",{onClick:function(){return B(gT)},style:{boxShadow:x(gT)?"0 0 8px rgba(0, 255, 0, 0.8) inset":""},children:(0,u.jsx)("img",{src:dT,alt:"Thumb 3"})}),(0,u.jsx)("button",{onClick:function(){return B(hT)},style:{boxShadow:x(hT)?"0 0 8px rgba(0, 255, 0, 0.8) inset":""},children:(0,u.jsx)("img",{src:fT,alt:"Thumb 3"})})]}),(0,u.jsx)("p",{style:{fontSize:"10pt"},children:"Sertifika yaz\u0131lar\u0131n\u0131 b\xfcy\xfclt\xfcp k\xfc\xe7\xfcltebilir ve yerlerini d\xfczenleyebilirsin."}),(0,u.jsx)("div",{className:"imageWithTex",children:(0,u.jsx)(DH,{imageUrl:G,text:b,fullText:g,fontColor:r?"#0099ff":"#ff0080",fontFamily:"Bradley Hand, cursive, sans-serif",text1Left:h.text1Left,text1Top:h.text1Top,text2Left:h.text2Left,text2Top:h.text2Top,text3Left:h.text3Left,text3Top:h.text3Top,text3Width:h.text3Width,text4Left:h.text4Left,text4Top:h.text4Top},G)})]})})})]})}var mT,vT=["onCollide","onCollideBegin","onCollideEnd"],AT=["bi","bj"],bT=["body","contact","target"],yT=["uuid"],GT=["body","ray"],wT={exports:{}},BT="object"===typeof Reflect?Reflect:null,xT=BT&&"function"===typeof BT.apply?BT.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};mT=BT&&"function"===typeof BT.ownKeys?BT.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var ST=Number.isNaN||function(e){return e!==e};function ZT(){ZT.init.call(this)}wT.exports=ZT,wT.exports.once=function(e,t){return new Promise((function(n,i){function r(n){e.removeListener(t,a),i(n)}function a(){"function"===typeof e.removeListener&&e.removeListener("error",r),n([].slice.call(arguments))}XT(e,t,a,{once:!0}),"error"!==t&&function(e,t,n){"function"===typeof e.on&&XT(e,"error",t,n)}(e,r,{once:!0})}))},ZT.EventEmitter=ZT,ZT.prototype._events=void 0,ZT.prototype._eventsCount=0,ZT.prototype._maxListeners=void 0;var kT=10;function RT(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function WT(e){return void 0===e._maxListeners?ZT.defaultMaxListeners:e._maxListeners}function MT(e,t,n,i){var r,a,o;if(RT(n),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),o=a[t]),void 0===o)o=a[t]=n,++e._eventsCount;else if("function"===typeof o?o=a[t]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n),(r=WT(e))>0&&o.length>r&&!o.warned){o.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=o.length,function(e){console&&console.warn&&console.warn(e)}(s)}return e}function VT(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function FT(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},r=VT.bind(i);return r.listener=n,i.wrapFn=r,r}function NT(e,t,n){var i=e._events;if(void 0===i)return[];var r=i[t];return void 0===r?[]:"function"===typeof r?n?[r.listener||r]:[r]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(r):TT(r,r.length)}function HT(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"===typeof n)return 1;if(void 0!==n)return n.length}return 0}function TT(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function XT(e,t,n,i){if("function"===typeof e.on)i.once?e.once(t,n):e.on(t,n);else{if("function"!==typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function r(a){i.once&&e.removeEventListener(t,r),n(a)}))}}Object.defineProperty(ZT,"defaultMaxListeners",{enumerable:!0,get:function(){return kT},set:function(e){if("number"!==typeof e||e<0||ST(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");kT=e}}),ZT.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},ZT.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||ST(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},ZT.prototype.getMaxListeners=function(){return WT(this)},ZT.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,r=this._events;if(void 0!==r)i=i&&void 0===r.error;else if(!i)return!1;if(i){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var o=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw o.context=a,o}var s=r[e];if(void 0===s)return!1;if("function"===typeof s)xT(s,this,t);else{var l=s.length,c=TT(s,l);for(n=0;n<l;++n)xT(c[n],this,t)}return!0},ZT.prototype.addListener=function(e,t){return MT(this,e,t,!1)},ZT.prototype.on=ZT.prototype.addListener,ZT.prototype.prependListener=function(e,t){return MT(this,e,t,!0)},ZT.prototype.once=function(e,t){return RT(t),this.on(e,FT(this,e,t)),this},ZT.prototype.prependOnceListener=function(e,t){return RT(t),this.prependListener(e,FT(this,e,t)),this},ZT.prototype.removeListener=function(e,t){var n,i,r,a,o;if(RT(t),void 0===(i=this._events))return this;if(void 0===(n=i[e]))return this;if(n===t||n.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!==typeof n){for(r=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){o=n[a].listener,r=a;break}if(r<0)return this;0===r?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,r),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,o||t)}return this},ZT.prototype.off=ZT.prototype.removeListener,ZT.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var r,a=Object.keys(n);for(i=0;i<a.length;++i)"removeListener"!==(r=a[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},ZT.prototype.listeners=function(e){return NT(this,e,!0)},ZT.prototype.rawListeners=function(e){return NT(this,e,!1)},ZT.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):HT.call(e,t)},ZT.prototype.listenerCount=HT,ZT.prototype.eventNames=function(){return this._eventsCount>0?mT(this._events):[]};var YT=wT.exports;function ET(e,t,n){var i=void 0===t?null:t,r=function(e,t){var n=atob(e);if(t){for(var i=new Uint8Array(n.length),r=0,a=n.length;r<a;++r)i[r]=n.charCodeAt(r);return String.fromCharCode.apply(null,new Uint16Array(i.buffer))}return n}(e,void 0!==n&&n),a=r.indexOf("\n",10)+1,o=r.substring(a)+(i?"//# sourceMappingURL="+i:""),s=new Blob([o],{type:"application/javascript"});return URL.createObjectURL(s)}var zT=function(e,t,n){var i;return function(r){return i=i||ET(e,t,n),new Worker(i,r)}}("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICd1c2Ugc3RyaWN0JzsKCiAgLyoqCiAgICogUmVjb3JkcyB3aGF0IG9iamVjdHMgYXJlIGNvbGxpZGluZyB3aXRoIGVhY2ggb3RoZXIKICAgKi8KCiAgLyoqCiAgICogQSAzeDMgbWF0cml4LgogICAqIEF1dGhvcmVkIGJ5IHtAbGluayBodHRwOi8vZ2l0aHViLmNvbS9zY2h0ZXBwZS8gc2NodGVwcGV9CiAgICovCiAgY2xhc3MgTWF0MyB7CiAgICAvKioKICAgICAqIEEgdmVjdG9yIG9mIGxlbmd0aCA5LCBjb250YWluaW5nIGFsbCBtYXRyaXggZWxlbWVudHMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIEBwYXJhbSBlbGVtZW50cyBBIHZlY3RvciBvZiBsZW5ndGggOSwgY29udGFpbmluZyBhbGwgbWF0cml4IGVsZW1lbnRzLgogICAgICovCiAgICBjb25zdHJ1Y3RvcihlbGVtZW50cykgewogICAgICBpZiAoZWxlbWVudHMgPT09IHZvaWQgMCkgewogICAgICAgIGVsZW1lbnRzID0gWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdOwogICAgICB9CgogICAgICB0aGlzLmVsZW1lbnRzID0gZWxlbWVudHM7CiAgICB9CiAgICAvKioKICAgICAqIFNldHMgdGhlIG1hdHJpeCB0byBpZGVudGl0eQogICAgICogQHRvZG8gU2hvdWxkIHBlcmhhcHMgYmUgcmVuYW1lZCB0byBgc2V0SWRlbnRpdHkoKWAgdG8gYmUgbW9yZSBjbGVhci4KICAgICAqIEB0b2RvIENyZWF0ZSBhbm90aGVyIGZ1bmN0aW9uIHRoYXQgaW1tZWRpYXRlbHkgY3JlYXRlcyBhbiBpZGVudGl0eSBtYXRyaXggZWcuIGBleWUoKWAKICAgICAqLwoKCiAgICBpZGVudGl0eSgpIHsKICAgICAgY29uc3QgZSA9IHRoaXMuZWxlbWVudHM7CiAgICAgIGVbMF0gPSAxOwogICAgICBlWzFdID0gMDsKICAgICAgZVsyXSA9IDA7CiAgICAgIGVbM10gPSAwOwogICAgICBlWzRdID0gMTsKICAgICAgZVs1XSA9IDA7CiAgICAgIGVbNl0gPSAwOwogICAgICBlWzddID0gMDsKICAgICAgZVs4XSA9IDE7CiAgICB9CiAgICAvKioKICAgICAqIFNldCBhbGwgZWxlbWVudHMgdG8gemVybwogICAgICovCgoKICAgIHNldFplcm8oKSB7CiAgICAgIGNvbnN0IGUgPSB0aGlzLmVsZW1lbnRzOwogICAgICBlWzBdID0gMDsKICAgICAgZVsxXSA9IDA7CiAgICAgIGVbMl0gPSAwOwogICAgICBlWzNdID0gMDsKICAgICAgZVs0XSA9IDA7CiAgICAgIGVbNV0gPSAwOwogICAgICBlWzZdID0gMDsKICAgICAgZVs3XSA9IDA7CiAgICAgIGVbOF0gPSAwOwogICAgfQogICAgLyoqCiAgICAgKiBTZXRzIHRoZSBtYXRyaXggZGlhZ29uYWwgZWxlbWVudHMgZnJvbSBhIFZlYzMKICAgICAqLwoKCiAgICBzZXRUcmFjZSh2ZWN0b3IpIHsKICAgICAgY29uc3QgZSA9IHRoaXMuZWxlbWVudHM7CiAgICAgIGVbMF0gPSB2ZWN0b3IueDsKICAgICAgZVs0XSA9IHZlY3Rvci55OwogICAgICBlWzhdID0gdmVjdG9yLno7CiAgICB9CiAgICAvKioKICAgICAqIEdldHMgdGhlIG1hdHJpeCBkaWFnb25hbCBlbGVtZW50cwogICAgICovCgoKICAgIGdldFRyYWNlKHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBjb25zdCBlID0gdGhpcy5lbGVtZW50czsKICAgICAgdGFyZ2V0LnggPSBlWzBdOwogICAgICB0YXJnZXQueSA9IGVbNF07CiAgICAgIHRhcmdldC56ID0gZVs4XTsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogTWF0cml4LVZlY3RvciBtdWx0aXBsaWNhdGlvbgogICAgICogQHBhcmFtIHYgVGhlIHZlY3RvciB0byBtdWx0aXBseSB3aXRoCiAgICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsLCB0YXJnZXQgdG8gc2F2ZSB0aGUgcmVzdWx0IGluLgogICAgICovCgoKICAgIHZtdWx0KHYsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBjb25zdCBlID0gdGhpcy5lbGVtZW50czsKICAgICAgY29uc3QgeCA9IHYueDsKICAgICAgY29uc3QgeSA9IHYueTsKICAgICAgY29uc3QgeiA9IHYuejsKICAgICAgdGFyZ2V0LnggPSBlWzBdICogeCArIGVbMV0gKiB5ICsgZVsyXSAqIHo7CiAgICAgIHRhcmdldC55ID0gZVszXSAqIHggKyBlWzRdICogeSArIGVbNV0gKiB6OwogICAgICB0YXJnZXQueiA9IGVbNl0gKiB4ICsgZVs3XSAqIHkgKyBlWzhdICogejsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogTWF0cml4LXNjYWxhciBtdWx0aXBsaWNhdGlvbgogICAgICovCgoKICAgIHNtdWx0KHMpIHsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGhpcy5lbGVtZW50c1tpXSAqPSBzOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIE1hdHJpeCBtdWx0aXBsaWNhdGlvbgogICAgICogQHBhcmFtIG1hdHJpeCBNYXRyaXggdG8gbXVsdGlwbHkgd2l0aCBmcm9tIGxlZnQgc2lkZS4KICAgICAqLwoKCiAgICBtbXVsdChtYXRyaXgsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgTWF0MygpOwogICAgICB9CgogICAgICBjb25zdCBBID0gdGhpcy5lbGVtZW50czsKICAgICAgY29uc3QgQiA9IG1hdHJpeC5lbGVtZW50czsKICAgICAgY29uc3QgVCA9IHRhcmdldC5lbGVtZW50czsKICAgICAgY29uc3QgYTExID0gQVswXSwKICAgICAgICAgICAgYTEyID0gQVsxXSwKICAgICAgICAgICAgYTEzID0gQVsyXSwKICAgICAgICAgICAgYTIxID0gQVszXSwKICAgICAgICAgICAgYTIyID0gQVs0XSwKICAgICAgICAgICAgYTIzID0gQVs1XSwKICAgICAgICAgICAgYTMxID0gQVs2XSwKICAgICAgICAgICAgYTMyID0gQVs3XSwKICAgICAgICAgICAgYTMzID0gQVs4XTsKICAgICAgY29uc3QgYjExID0gQlswXSwKICAgICAgICAgICAgYjEyID0gQlsxXSwKICAgICAgICAgICAgYjEzID0gQlsyXSwKICAgICAgICAgICAgYjIxID0gQlszXSwKICAgICAgICAgICAgYjIyID0gQls0XSwKICAgICAgICAgICAgYjIzID0gQls1XSwKICAgICAgICAgICAgYjMxID0gQls2XSwKICAgICAgICAgICAgYjMyID0gQls3XSwKICAgICAgICAgICAgYjMzID0gQls4XTsKICAgICAgVFswXSA9IGExMSAqIGIxMSArIGExMiAqIGIyMSArIGExMyAqIGIzMTsKICAgICAgVFsxXSA9IGExMSAqIGIxMiArIGExMiAqIGIyMiArIGExMyAqIGIzMjsKICAgICAgVFsyXSA9IGExMSAqIGIxMyArIGExMiAqIGIyMyArIGExMyAqIGIzMzsKICAgICAgVFszXSA9IGEyMSAqIGIxMSArIGEyMiAqIGIyMSArIGEyMyAqIGIzMTsKICAgICAgVFs0XSA9IGEyMSAqIGIxMiArIGEyMiAqIGIyMiArIGEyMyAqIGIzMjsKICAgICAgVFs1XSA9IGEyMSAqIGIxMyArIGEyMiAqIGIyMyArIGEyMyAqIGIzMzsKICAgICAgVFs2XSA9IGEzMSAqIGIxMSArIGEzMiAqIGIyMSArIGEzMyAqIGIzMTsKICAgICAgVFs3XSA9IGEzMSAqIGIxMiArIGEzMiAqIGIyMiArIGEzMyAqIGIzMjsKICAgICAgVFs4XSA9IGEzMSAqIGIxMyArIGEzMiAqIGIyMyArIGEzMyAqIGIzMzsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogU2NhbGUgZWFjaCBjb2x1bW4gb2YgdGhlIG1hdHJpeAogICAgICovCgoKICAgIHNjYWxlKHZlY3RvciwgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBNYXQzKCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IGUgPSB0aGlzLmVsZW1lbnRzOwogICAgICBjb25zdCB0ID0gdGFyZ2V0LmVsZW1lbnRzOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IDM7IGkrKykgewogICAgICAgIHRbMyAqIGkgKyAwXSA9IHZlY3Rvci54ICogZVszICogaSArIDBdOwogICAgICAgIHRbMyAqIGkgKyAxXSA9IHZlY3Rvci55ICogZVszICogaSArIDFdOwogICAgICAgIHRbMyAqIGkgKyAyXSA9IHZlY3Rvci56ICogZVszICogaSArIDJdOwogICAgICB9CgogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBTb2x2ZSBBeD1iCiAgICAgKiBAcGFyYW0gYiBUaGUgcmlnaHQgaGFuZCBzaWRlCiAgICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsLiBUYXJnZXQgdmVjdG9yIHRvIHNhdmUgaW4uCiAgICAgKiBAcmV0dXJuIFRoZSBzb2x1dGlvbiB4CiAgICAgKiBAdG9kbyBzaG91bGQgcmV1c2UgYXJyYXlzCiAgICAgKi8KCgogICAgc29sdmUoYiwgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIC8vIENvbnN0cnVjdCBlcXVhdGlvbnMKICAgICAgY29uc3QgbnIgPSAzOyAvLyBudW0gcm93cwoKICAgICAgY29uc3QgbmMgPSA0OyAvLyBudW0gY29scwoKICAgICAgY29uc3QgZXFucyA9IFtdOwogICAgICBsZXQgaTsKICAgICAgbGV0IGo7CgogICAgICBmb3IgKGkgPSAwOyBpIDwgbnIgKiBuYzsgaSsrKSB7CiAgICAgICAgZXFucy5wdXNoKDApOwogICAgICB9CgogICAgICBmb3IgKGkgPSAwOyBpIDwgMzsgaSsrKSB7CiAgICAgICAgZm9yIChqID0gMDsgaiA8IDM7IGorKykgewogICAgICAgICAgZXFuc1tpICsgbmMgKiBqXSA9IHRoaXMuZWxlbWVudHNbaSArIDMgKiBqXTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGVxbnNbMyArIDQgKiAwXSA9IGIueDsKICAgICAgZXFuc1szICsgNCAqIDFdID0gYi55OwogICAgICBlcW5zWzMgKyA0ICogMl0gPSBiLno7IC8vIENvbXB1dGUgcmlnaHQgdXBwZXIgdHJpYW5ndWxhciB2ZXJzaW9uIG9mIHRoZSBtYXRyaXggLSBHYXVzcyBlbGltaW5hdGlvbgoKICAgICAgbGV0IG4gPSAzOwogICAgICBjb25zdCBrID0gbjsKICAgICAgbGV0IG5wOwogICAgICBjb25zdCBrcCA9IDQ7IC8vIG51bSByb3dzCgogICAgICBsZXQgcDsKCiAgICAgIGRvIHsKICAgICAgICBpID0gayAtIG47CgogICAgICAgIGlmIChlcW5zW2kgKyBuYyAqIGldID09PSAwKSB7CiAgICAgICAgICAvLyB0aGUgcGl2b3QgaXMgbnVsbCwgc3dhcCBsaW5lcwogICAgICAgICAgZm9yIChqID0gaSArIDE7IGogPCBrOyBqKyspIHsKICAgICAgICAgICAgaWYgKGVxbnNbaSArIG5jICogal0gIT09IDApIHsKICAgICAgICAgICAgICBucCA9IGtwOwoKICAgICAgICAgICAgICBkbyB7CiAgICAgICAgICAgICAgICAvLyBkbyBsaWduZSggaSApID0gbGlnbmUoIGkgKSArIGxpZ25lKCBrICkKICAgICAgICAgICAgICAgIHAgPSBrcCAtIG5wOwogICAgICAgICAgICAgICAgZXFuc1twICsgbmMgKiBpXSArPSBlcW5zW3AgKyBuYyAqIGpdOwogICAgICAgICAgICAgIH0gd2hpbGUgKC0tbnApOwoKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKGVxbnNbaSArIG5jICogaV0gIT09IDApIHsKICAgICAgICAgIGZvciAoaiA9IGkgKyAxOyBqIDwgazsgaisrKSB7CiAgICAgICAgICAgIGNvbnN0IG11bHRpcGxpZXIgPSBlcW5zW2kgKyBuYyAqIGpdIC8gZXFuc1tpICsgbmMgKiBpXTsKICAgICAgICAgICAgbnAgPSBrcDsKCiAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICAvLyBkbyBsaWduZSggayApID0gbGlnbmUoIGsgKSAtIG11bHRpcGxpZXIgKiBsaWduZSggaSApCiAgICAgICAgICAgICAgcCA9IGtwIC0gbnA7CiAgICAgICAgICAgICAgZXFuc1twICsgbmMgKiBqXSA9IHAgPD0gaSA/IDAgOiBlcW5zW3AgKyBuYyAqIGpdIC0gZXFuc1twICsgbmMgKiBpXSAqIG11bHRpcGxpZXI7CiAgICAgICAgICAgIH0gd2hpbGUgKC0tbnApOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSB3aGlsZSAoLS1uKTsgLy8gR2V0IHRoZSBzb2x1dGlvbgoKCiAgICAgIHRhcmdldC56ID0gZXFuc1syICogbmMgKyAzXSAvIGVxbnNbMiAqIG5jICsgMl07CiAgICAgIHRhcmdldC55ID0gKGVxbnNbMSAqIG5jICsgM10gLSBlcW5zWzEgKiBuYyArIDJdICogdGFyZ2V0LnopIC8gZXFuc1sxICogbmMgKyAxXTsKICAgICAgdGFyZ2V0LnggPSAoZXFuc1swICogbmMgKyAzXSAtIGVxbnNbMCAqIG5jICsgMl0gKiB0YXJnZXQueiAtIGVxbnNbMCAqIG5jICsgMV0gKiB0YXJnZXQueSkgLyBlcW5zWzAgKiBuYyArIDBdOwoKICAgICAgaWYgKGlzTmFOKHRhcmdldC54KSB8fCBpc05hTih0YXJnZXQueSkgfHwgaXNOYU4odGFyZ2V0LnopIHx8IHRhcmdldC54ID09PSBJbmZpbml0eSB8fCB0YXJnZXQueSA9PT0gSW5maW5pdHkgfHwgdGFyZ2V0LnogPT09IEluZmluaXR5KSB7CiAgICAgICAgdGhyb3cgYENvdWxkIG5vdCBzb2x2ZSBlcXVhdGlvbiEgR290IHg9WyR7dGFyZ2V0LnRvU3RyaW5nKCl9XSwgYj1bJHtiLnRvU3RyaW5nKCl9XSwgQT1bJHt0aGlzLnRvU3RyaW5nKCl9XWA7CiAgICAgIH0KCiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbiBlbGVtZW50IGluIHRoZSBtYXRyaXggYnkgaW5kZXguIEluZGV4IHN0YXJ0cyBhdCAwLCBub3QgMSEhIQogICAgICogQHBhcmFtIHZhbHVlIElmIHByb3ZpZGVkLCB0aGUgbWF0cml4IGVsZW1lbnQgd2lsbCBiZSBzZXQgdG8gdGhpcyB2YWx1ZS4KICAgICAqLwoKCiAgICBlKHJvdywgY29sdW1uLCB2YWx1ZSkgewogICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkgewogICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRzW2NvbHVtbiArIDMgKiByb3ddOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIFNldCB2YWx1ZQogICAgICAgIHRoaXMuZWxlbWVudHNbY29sdW1uICsgMyAqIHJvd10gPSB2YWx1ZTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBDb3B5IGFub3RoZXIgbWF0cml4IGludG8gdGhpcyBtYXRyaXggb2JqZWN0LgogICAgICovCgoKICAgIGNvcHkobWF0cml4KSB7CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWF0cml4LmVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGhpcy5lbGVtZW50c1tpXSA9IG1hdHJpeC5lbGVtZW50c1tpXTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIG1hdHJpeC4KICAgICAqLwoKCiAgICB0b1N0cmluZygpIHsKICAgICAgbGV0IHIgPSAnJzsKICAgICAgY29uc3Qgc2VwID0gJywnOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA5OyBpKyspIHsKICAgICAgICByICs9IHRoaXMuZWxlbWVudHNbaV0gKyBzZXA7CiAgICAgIH0KCiAgICAgIHJldHVybiByOwogICAgfQogICAgLyoqCiAgICAgKiByZXZlcnNlIHRoZSBtYXRyaXgKICAgICAqIEBwYXJhbSB0YXJnZXQgVGFyZ2V0IG1hdHJpeCB0byBzYXZlIGluLgogICAgICogQHJldHVybiBUaGUgc29sdXRpb24geAogICAgICovCgoKICAgIHJldmVyc2UodGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBNYXQzKCk7CiAgICAgIH0KCiAgICAgIC8vIENvbnN0cnVjdCBlcXVhdGlvbnMKICAgICAgY29uc3QgbnIgPSAzOyAvLyBudW0gcm93cwoKICAgICAgY29uc3QgbmMgPSA2OyAvLyBudW0gY29scwoKICAgICAgY29uc3QgZXFucyA9IHJldmVyc2VfZXFuczsKICAgICAgbGV0IGk7CiAgICAgIGxldCBqOwoKICAgICAgZm9yIChpID0gMDsgaSA8IDM7IGkrKykgewogICAgICAgIGZvciAoaiA9IDA7IGogPCAzOyBqKyspIHsKICAgICAgICAgIGVxbnNbaSArIG5jICogal0gPSB0aGlzLmVsZW1lbnRzW2kgKyAzICogal07CiAgICAgICAgfQogICAgICB9CgogICAgICBlcW5zWzMgKyA2ICogMF0gPSAxOwogICAgICBlcW5zWzMgKyA2ICogMV0gPSAwOwogICAgICBlcW5zWzMgKyA2ICogMl0gPSAwOwogICAgICBlcW5zWzQgKyA2ICogMF0gPSAwOwogICAgICBlcW5zWzQgKyA2ICogMV0gPSAxOwogICAgICBlcW5zWzQgKyA2ICogMl0gPSAwOwogICAgICBlcW5zWzUgKyA2ICogMF0gPSAwOwogICAgICBlcW5zWzUgKyA2ICogMV0gPSAwOwogICAgICBlcW5zWzUgKyA2ICogMl0gPSAxOyAvLyBDb21wdXRlIHJpZ2h0IHVwcGVyIHRyaWFuZ3VsYXIgdmVyc2lvbiBvZiB0aGUgbWF0cml4IC0gR2F1c3MgZWxpbWluYXRpb24KCiAgICAgIGxldCBuID0gMzsKICAgICAgY29uc3QgayA9IG47CiAgICAgIGxldCBucDsKICAgICAgY29uc3Qga3AgPSBuYzsgLy8gbnVtIHJvd3MKCiAgICAgIGxldCBwOwoKICAgICAgZG8gewogICAgICAgIGkgPSBrIC0gbjsKCiAgICAgICAgaWYgKGVxbnNbaSArIG5jICogaV0gPT09IDApIHsKICAgICAgICAgIC8vIHRoZSBwaXZvdCBpcyBudWxsLCBzd2FwIGxpbmVzCiAgICAgICAgICBmb3IgKGogPSBpICsgMTsgaiA8IGs7IGorKykgewogICAgICAgICAgICBpZiAoZXFuc1tpICsgbmMgKiBqXSAhPT0gMCkgewogICAgICAgICAgICAgIG5wID0ga3A7CgogICAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICAgIC8vIGRvIGxpbmUoIGkgKSA9IGxpbmUoIGkgKSArIGxpbmUoIGsgKQogICAgICAgICAgICAgICAgcCA9IGtwIC0gbnA7CiAgICAgICAgICAgICAgICBlcW5zW3AgKyBuYyAqIGldICs9IGVxbnNbcCArIG5jICogal07CiAgICAgICAgICAgICAgfSB3aGlsZSAoLS1ucCk7CgogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoZXFuc1tpICsgbmMgKiBpXSAhPT0gMCkgewogICAgICAgICAgZm9yIChqID0gaSArIDE7IGogPCBrOyBqKyspIHsKICAgICAgICAgICAgY29uc3QgbXVsdGlwbGllciA9IGVxbnNbaSArIG5jICogal0gLyBlcW5zW2kgKyBuYyAqIGldOwogICAgICAgICAgICBucCA9IGtwOwoKICAgICAgICAgICAgZG8gewogICAgICAgICAgICAgIC8vIGRvIGxpbmUoIGsgKSA9IGxpbmUoIGsgKSAtIG11bHRpcGxpZXIgKiBsaW5lKCBpICkKICAgICAgICAgICAgICBwID0ga3AgLSBucDsKICAgICAgICAgICAgICBlcW5zW3AgKyBuYyAqIGpdID0gcCA8PSBpID8gMCA6IGVxbnNbcCArIG5jICogal0gLSBlcW5zW3AgKyBuYyAqIGldICogbXVsdGlwbGllcjsKICAgICAgICAgICAgfSB3aGlsZSAoLS1ucCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IHdoaWxlICgtLW4pOyAvLyBlbGltaW5hdGUgdGhlIHVwcGVyIGxlZnQgdHJpYW5nbGUgb2YgdGhlIG1hdHJpeAoKCiAgICAgIGkgPSAyOwoKICAgICAgZG8gewogICAgICAgIGogPSBpIC0gMTsKCiAgICAgICAgZG8gewogICAgICAgICAgY29uc3QgbXVsdGlwbGllciA9IGVxbnNbaSArIG5jICogal0gLyBlcW5zW2kgKyBuYyAqIGldOwogICAgICAgICAgbnAgPSBuYzsKCiAgICAgICAgICBkbyB7CiAgICAgICAgICAgIHAgPSBuYyAtIG5wOwogICAgICAgICAgICBlcW5zW3AgKyBuYyAqIGpdID0gZXFuc1twICsgbmMgKiBqXSAtIGVxbnNbcCArIG5jICogaV0gKiBtdWx0aXBsaWVyOwogICAgICAgICAgfSB3aGlsZSAoLS1ucCk7CiAgICAgICAgfSB3aGlsZSAoai0tKTsKICAgICAgfSB3aGlsZSAoLS1pKTsgLy8gb3BlcmF0aW9ucyBvbiB0aGUgZGlhZ29uYWwKCgogICAgICBpID0gMjsKCiAgICAgIGRvIHsKICAgICAgICBjb25zdCBtdWx0aXBsaWVyID0gMSAvIGVxbnNbaSArIG5jICogaV07CiAgICAgICAgbnAgPSBuYzsKCiAgICAgICAgZG8gewogICAgICAgICAgcCA9IG5jIC0gbnA7CiAgICAgICAgICBlcW5zW3AgKyBuYyAqIGldID0gZXFuc1twICsgbmMgKiBpXSAqIG11bHRpcGxpZXI7CiAgICAgICAgfSB3aGlsZSAoLS1ucCk7CiAgICAgIH0gd2hpbGUgKGktLSk7CgogICAgICBpID0gMjsKCiAgICAgIGRvIHsKICAgICAgICBqID0gMjsKCiAgICAgICAgZG8gewogICAgICAgICAgcCA9IGVxbnNbbnIgKyBqICsgbmMgKiBpXTsKCiAgICAgICAgICBpZiAoaXNOYU4ocCkgfHwgcCA9PT0gSW5maW5pdHkpIHsKICAgICAgICAgICAgdGhyb3cgYENvdWxkIG5vdCByZXZlcnNlISBBPVske3RoaXMudG9TdHJpbmcoKX1dYDsKICAgICAgICAgIH0KCiAgICAgICAgICB0YXJnZXQuZShpLCBqLCBwKTsKICAgICAgICB9IHdoaWxlIChqLS0pOwogICAgICB9IHdoaWxlIChpLS0pOwoKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogU2V0IHRoZSBtYXRyaXggZnJvbSBhIHF1YXRlcmlvbgogICAgICovCgoKICAgIHNldFJvdGF0aW9uRnJvbVF1YXRlcm5pb24ocSkgewogICAgICBjb25zdCB4ID0gcS54OwogICAgICBjb25zdCB5ID0gcS55OwogICAgICBjb25zdCB6ID0gcS56OwogICAgICBjb25zdCB3ID0gcS53OwogICAgICBjb25zdCB4MiA9IHggKyB4OwogICAgICBjb25zdCB5MiA9IHkgKyB5OwogICAgICBjb25zdCB6MiA9IHogKyB6OwogICAgICBjb25zdCB4eCA9IHggKiB4MjsKICAgICAgY29uc3QgeHkgPSB4ICogeTI7CiAgICAgIGNvbnN0IHh6ID0geCAqIHoyOwogICAgICBjb25zdCB5eSA9IHkgKiB5MjsKICAgICAgY29uc3QgeXogPSB5ICogejI7CiAgICAgIGNvbnN0IHp6ID0geiAqIHoyOwogICAgICBjb25zdCB3eCA9IHcgKiB4MjsKICAgICAgY29uc3Qgd3kgPSB3ICogeTI7CiAgICAgIGNvbnN0IHd6ID0gdyAqIHoyOwogICAgICBjb25zdCBlID0gdGhpcy5lbGVtZW50czsKICAgICAgZVszICogMCArIDBdID0gMSAtICh5eSArIHp6KTsKICAgICAgZVszICogMCArIDFdID0geHkgLSB3ejsKICAgICAgZVszICogMCArIDJdID0geHogKyB3eTsKICAgICAgZVszICogMSArIDBdID0geHkgKyB3ejsKICAgICAgZVszICogMSArIDFdID0gMSAtICh4eCArIHp6KTsKICAgICAgZVszICogMSArIDJdID0geXogLSB3eDsKICAgICAgZVszICogMiArIDBdID0geHogLSB3eTsKICAgICAgZVszICogMiArIDFdID0geXogKyB3eDsKICAgICAgZVszICogMiArIDJdID0gMSAtICh4eCArIHl5KTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIFRyYW5zcG9zZSB0aGUgbWF0cml4CiAgICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsLiBXaGVyZSB0byBzdG9yZSB0aGUgcmVzdWx0LgogICAgICogQHJldHVybiBUaGUgdGFyZ2V0IE1hdDMsIG9yIGEgbmV3IE1hdDMgaWYgdGFyZ2V0IHdhcyBvbWl0dGVkLgogICAgICovCgoKICAgIHRyYW5zcG9zZSh0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IE1hdDMoKTsKICAgICAgfQoKICAgICAgY29uc3QgTSA9IHRoaXMuZWxlbWVudHM7CiAgICAgIGNvbnN0IFQgPSB0YXJnZXQuZWxlbWVudHM7CiAgICAgIGxldCB0bXA7IC8vU2V0IGRpYWdvbmFscwoKICAgICAgVFswXSA9IE1bMF07CiAgICAgIFRbNF0gPSBNWzRdOwogICAgICBUWzhdID0gTVs4XTsKICAgICAgdG1wID0gTVsxXTsKICAgICAgVFsxXSA9IE1bM107CiAgICAgIFRbM10gPSB0bXA7CiAgICAgIHRtcCA9IE1bMl07CiAgICAgIFRbMl0gPSBNWzZdOwogICAgICBUWzZdID0gdG1wOwogICAgICB0bXAgPSBNWzVdOwogICAgICBUWzVdID0gTVs3XTsKICAgICAgVFs3XSA9IHRtcDsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KCiAgfQogIGNvbnN0IHJldmVyc2VfZXFucyA9IFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXTsKCiAgLyoqCiAgICogMy1kaW1lbnNpb25hbCB2ZWN0b3IKICAgKiBAZXhhbXBsZQogICAqICAgICBjb25zdCB2ID0gbmV3IFZlYzMoMSwgMiwgMykKICAgKiAgICAgY29uc29sZS5sb2coJ3g9JyArIHYueCkgLy8geD0xCiAgICovCgogIGNsYXNzIFZlYzMgewogICAgY29uc3RydWN0b3IoeCwgeSwgeikgewogICAgICBpZiAoeCA9PT0gdm9pZCAwKSB7CiAgICAgICAgeCA9IDAuMDsKICAgICAgfQoKICAgICAgaWYgKHkgPT09IHZvaWQgMCkgewogICAgICAgIHkgPSAwLjA7CiAgICAgIH0KCiAgICAgIGlmICh6ID09PSB2b2lkIDApIHsKICAgICAgICB6ID0gMC4wOwogICAgICB9CgogICAgICB0aGlzLnggPSB4OwogICAgICB0aGlzLnkgPSB5OwogICAgICB0aGlzLnogPSB6OwogICAgfQogICAgLyoqCiAgICAgKiBWZWN0b3IgY3Jvc3MgcHJvZHVjdAogICAgICogQHBhcmFtIHRhcmdldCBPcHRpb25hbCB0YXJnZXQgdG8gc2F2ZSBpbi4KICAgICAqLwoKCiAgICBjcm9zcyh2ZWN0b3IsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBjb25zdCB2eCA9IHZlY3Rvci54OwogICAgICBjb25zdCB2eSA9IHZlY3Rvci55OwogICAgICBjb25zdCB2eiA9IHZlY3Rvci56OwogICAgICBjb25zdCB4ID0gdGhpcy54OwogICAgICBjb25zdCB5ID0gdGhpcy55OwogICAgICBjb25zdCB6ID0gdGhpcy56OwogICAgICB0YXJnZXQueCA9IHkgKiB2eiAtIHogKiB2eTsKICAgICAgdGFyZ2V0LnkgPSB6ICogdnggLSB4ICogdno7CiAgICAgIHRhcmdldC56ID0geCAqIHZ5IC0geSAqIHZ4OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBTZXQgdGhlIHZlY3RvcnMnIDMgZWxlbWVudHMKICAgICAqLwoKCiAgICBzZXQoeCwgeSwgeikgewogICAgICB0aGlzLnggPSB4OwogICAgICB0aGlzLnkgPSB5OwogICAgICB0aGlzLnogPSB6OwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogU2V0IGFsbCBjb21wb25lbnRzIG9mIHRoZSB2ZWN0b3IgdG8gemVyby4KICAgICAqLwoKCiAgICBzZXRaZXJvKCkgewogICAgICB0aGlzLnggPSB0aGlzLnkgPSB0aGlzLnogPSAwOwogICAgfQogICAgLyoqCiAgICAgKiBWZWN0b3IgYWRkaXRpb24KICAgICAqLwoKCiAgICB2YWRkKHZlY3RvciwgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQpIHsKICAgICAgICB0YXJnZXQueCA9IHZlY3Rvci54ICsgdGhpcy54OwogICAgICAgIHRhcmdldC55ID0gdmVjdG9yLnkgKyB0aGlzLnk7CiAgICAgICAgdGFyZ2V0LnogPSB2ZWN0b3IueiArIHRoaXMuejsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gbmV3IFZlYzModGhpcy54ICsgdmVjdG9yLngsIHRoaXMueSArIHZlY3Rvci55LCB0aGlzLnogKyB2ZWN0b3Iueik7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogVmVjdG9yIHN1YnRyYWN0aW9uCiAgICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsIHRhcmdldCB0byBzYXZlIGluLgogICAgICovCgoKICAgIHZzdWIodmVjdG9yLCB0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCkgewogICAgICAgIHRhcmdldC54ID0gdGhpcy54IC0gdmVjdG9yLng7CiAgICAgICAgdGFyZ2V0LnkgPSB0aGlzLnkgLSB2ZWN0b3IueTsKICAgICAgICB0YXJnZXQueiA9IHRoaXMueiAtIHZlY3Rvci56OwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBuZXcgVmVjMyh0aGlzLnggLSB2ZWN0b3IueCwgdGhpcy55IC0gdmVjdG9yLnksIHRoaXMueiAtIHZlY3Rvci56KTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIGNyb3NzIHByb2R1Y3QgbWF0cml4IGFfY3Jvc3MgZnJvbSBhIHZlY3Rvciwgc3VjaCB0aGF0IGEgeCBiID0gYV9jcm9zcyAqIGIgPSBjCiAgICAgKgogICAgICogU2VlIHtAbGluayBodHRwczovL3d3dzguY3MudW11LnNlL2t1cnNlci9UREJEMjQvVlQwNi9sZWN0dXJlcy9MZWN0dXJlNi5wZGYgVW1lw6UgVW5pdmVyc2l0eSBMZWN0dXJlfQogICAgICovCgoKICAgIGNyb3NzbWF0KCkgewogICAgICByZXR1cm4gbmV3IE1hdDMoWzAsIC10aGlzLnosIHRoaXMueSwgdGhpcy56LCAwLCAtdGhpcy54LCAtdGhpcy55LCB0aGlzLngsIDBdKTsKICAgIH0KICAgIC8qKgogICAgICogTm9ybWFsaXplIHRoZSB2ZWN0b3IuIE5vdGUgdGhhdCB0aGlzIGNoYW5nZXMgdGhlIHZhbHVlcyBpbiB0aGUgdmVjdG9yLgogICAgICAqIEByZXR1cm4gUmV0dXJucyB0aGUgbm9ybSBvZiB0aGUgdmVjdG9yCiAgICAgKi8KCgogICAgbm9ybWFsaXplKCkgewogICAgICBjb25zdCB4ID0gdGhpcy54OwogICAgICBjb25zdCB5ID0gdGhpcy55OwogICAgICBjb25zdCB6ID0gdGhpcy56OwogICAgICBjb25zdCBuID0gTWF0aC5zcXJ0KHggKiB4ICsgeSAqIHkgKyB6ICogeik7CgogICAgICBpZiAobiA+IDAuMCkgewogICAgICAgIGNvbnN0IGludk4gPSAxIC8gbjsKICAgICAgICB0aGlzLnggKj0gaW52TjsKICAgICAgICB0aGlzLnkgKj0gaW52TjsKICAgICAgICB0aGlzLnogKj0gaW52TjsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBNYWtlIHNvbWV0aGluZyB1cAogICAgICAgIHRoaXMueCA9IDA7CiAgICAgICAgdGhpcy55ID0gMDsKICAgICAgICB0aGlzLnogPSAwOwogICAgICB9CgogICAgICByZXR1cm4gbjsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSB2ZXJzaW9uIG9mIHRoaXMgdmVjdG9yIHRoYXQgaXMgb2YgbGVuZ3RoIDEuCiAgICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsIHRhcmdldCB0byBzYXZlIGluCiAgICAgKiBAcmV0dXJuIFJldHVybnMgdGhlIHVuaXQgdmVjdG9yCiAgICAgKi8KCgogICAgdW5pdCh0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgY29uc3QgeCA9IHRoaXMueDsKICAgICAgY29uc3QgeSA9IHRoaXMueTsKICAgICAgY29uc3QgeiA9IHRoaXMuejsKICAgICAgbGV0IG5pbnYgPSBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSArIHogKiB6KTsKCiAgICAgIGlmIChuaW52ID4gMC4wKSB7CiAgICAgICAgbmludiA9IDEuMCAvIG5pbnY7CiAgICAgICAgdGFyZ2V0LnggPSB4ICogbmludjsKICAgICAgICB0YXJnZXQueSA9IHkgKiBuaW52OwogICAgICAgIHRhcmdldC56ID0geiAqIG5pbnY7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGFyZ2V0LnggPSAxOwogICAgICAgIHRhcmdldC55ID0gMDsKICAgICAgICB0YXJnZXQueiA9IDA7CiAgICAgIH0KCiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgbGVuZ3RoIG9mIHRoZSB2ZWN0b3IKICAgICAqLwoKCiAgICBsZW5ndGgoKSB7CiAgICAgIGNvbnN0IHggPSB0aGlzLng7CiAgICAgIGNvbnN0IHkgPSB0aGlzLnk7CiAgICAgIGNvbnN0IHogPSB0aGlzLno7CiAgICAgIHJldHVybiBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSArIHogKiB6KTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSBzcXVhcmVkIGxlbmd0aCBvZiB0aGUgdmVjdG9yLgogICAgICovCgoKICAgIGxlbmd0aFNxdWFyZWQoKSB7CiAgICAgIHJldHVybiB0aGlzLmRvdCh0aGlzKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IGRpc3RhbmNlIGZyb20gdGhpcyBwb2ludCB0byBhbm90aGVyIHBvaW50CiAgICAgKi8KCgogICAgZGlzdGFuY2VUbyhwKSB7CiAgICAgIGNvbnN0IHggPSB0aGlzLng7CiAgICAgIGNvbnN0IHkgPSB0aGlzLnk7CiAgICAgIGNvbnN0IHogPSB0aGlzLno7CiAgICAgIGNvbnN0IHB4ID0gcC54OwogICAgICBjb25zdCBweSA9IHAueTsKICAgICAgY29uc3QgcHogPSBwLno7CiAgICAgIHJldHVybiBNYXRoLnNxcnQoKHB4IC0geCkgKiAocHggLSB4KSArIChweSAtIHkpICogKHB5IC0geSkgKyAocHogLSB6KSAqIChweiAtIHopKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHNxdWFyZWQgZGlzdGFuY2UgZnJvbSB0aGlzIHBvaW50IHRvIGFub3RoZXIgcG9pbnQKICAgICAqLwoKCiAgICBkaXN0YW5jZVNxdWFyZWQocCkgewogICAgICBjb25zdCB4ID0gdGhpcy54OwogICAgICBjb25zdCB5ID0gdGhpcy55OwogICAgICBjb25zdCB6ID0gdGhpcy56OwogICAgICBjb25zdCBweCA9IHAueDsKICAgICAgY29uc3QgcHkgPSBwLnk7CiAgICAgIGNvbnN0IHB6ID0gcC56OwogICAgICByZXR1cm4gKHB4IC0geCkgKiAocHggLSB4KSArIChweSAtIHkpICogKHB5IC0geSkgKyAocHogLSB6KSAqIChweiAtIHopOwogICAgfQogICAgLyoqCiAgICAgKiBNdWx0aXBseSBhbGwgdGhlIGNvbXBvbmVudHMgb2YgdGhlIHZlY3RvciB3aXRoIGEgc2NhbGFyLgogICAgICogQHBhcmFtIHRhcmdldCBUaGUgdmVjdG9yIHRvIHNhdmUgdGhlIHJlc3VsdCBpbi4KICAgICAqLwoKCiAgICBzY2FsZShzY2FsYXIsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBjb25zdCB4ID0gdGhpcy54OwogICAgICBjb25zdCB5ID0gdGhpcy55OwogICAgICBjb25zdCB6ID0gdGhpcy56OwogICAgICB0YXJnZXQueCA9IHNjYWxhciAqIHg7CiAgICAgIHRhcmdldC55ID0gc2NhbGFyICogeTsKICAgICAgdGFyZ2V0LnogPSBzY2FsYXIgKiB6OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBNdWx0aXBseSB0aGUgdmVjdG9yIHdpdGggYW4gb3RoZXIgdmVjdG9yLCBjb21wb25lbnQtd2lzZS4KICAgICAqIEBwYXJhbSB0YXJnZXQgVGhlIHZlY3RvciB0byBzYXZlIHRoZSByZXN1bHQgaW4uCiAgICAgKi8KCgogICAgdm11bCh2ZWN0b3IsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICB0YXJnZXQueCA9IHZlY3Rvci54ICogdGhpcy54OwogICAgICB0YXJnZXQueSA9IHZlY3Rvci55ICogdGhpcy55OwogICAgICB0YXJnZXQueiA9IHZlY3Rvci56ICogdGhpcy56OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBTY2FsZSBhIHZlY3RvciBhbmQgYWRkIGl0IHRvIHRoaXMgdmVjdG9yLiBTYXZlIHRoZSByZXN1bHQgaW4gInRhcmdldCIuICh0YXJnZXQgPSB0aGlzICsgdmVjdG9yICogc2NhbGFyKQogICAgICogQHBhcmFtIHRhcmdldCBUaGUgdmVjdG9yIHRvIHNhdmUgdGhlIHJlc3VsdCBpbi4KICAgICAqLwoKCiAgICBhZGRTY2FsZWRWZWN0b3Ioc2NhbGFyLCB2ZWN0b3IsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICB0YXJnZXQueCA9IHRoaXMueCArIHNjYWxhciAqIHZlY3Rvci54OwogICAgICB0YXJnZXQueSA9IHRoaXMueSArIHNjYWxhciAqIHZlY3Rvci55OwogICAgICB0YXJnZXQueiA9IHRoaXMueiArIHNjYWxhciAqIHZlY3Rvci56OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBDYWxjdWxhdGUgZG90IHByb2R1Y3QKICAgICAqIEBwYXJhbSB2ZWN0b3IKICAgICAqLwoKCiAgICBkb3QodmVjdG9yKSB7CiAgICAgIHJldHVybiB0aGlzLnggKiB2ZWN0b3IueCArIHRoaXMueSAqIHZlY3Rvci55ICsgdGhpcy56ICogdmVjdG9yLno7CiAgICB9CgogICAgaXNaZXJvKCkgewogICAgICByZXR1cm4gdGhpcy54ID09PSAwICYmIHRoaXMueSA9PT0gMCAmJiB0aGlzLnogPT09IDA7CiAgICB9CiAgICAvKioKICAgICAqIE1ha2UgdGhlIHZlY3RvciBwb2ludCBpbiB0aGUgb3Bwb3NpdGUgZGlyZWN0aW9uLgogICAgICogQHBhcmFtIHRhcmdldCBPcHRpb25hbCB0YXJnZXQgdG8gc2F2ZSBpbgogICAgICovCgoKICAgIG5lZ2F0ZSh0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgdGFyZ2V0LnggPSAtdGhpcy54OwogICAgICB0YXJnZXQueSA9IC10aGlzLnk7CiAgICAgIHRhcmdldC56ID0gLXRoaXMuejsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZSB0d28gYXJ0aWZpY2lhbCB0YW5nZW50cyB0byB0aGUgdmVjdG9yCiAgICAgKiBAcGFyYW0gdDEgVmVjdG9yIG9iamVjdCB0byBzYXZlIHRoZSBmaXJzdCB0YW5nZW50IGluCiAgICAgKiBAcGFyYW0gdDIgVmVjdG9yIG9iamVjdCB0byBzYXZlIHRoZSBzZWNvbmQgdGFuZ2VudCBpbgogICAgICovCgoKICAgIHRhbmdlbnRzKHQxLCB0MikgewogICAgICBjb25zdCBub3JtID0gdGhpcy5sZW5ndGgoKTsKCiAgICAgIGlmIChub3JtID4gMC4wKSB7CiAgICAgICAgY29uc3QgbiA9IFZlYzNfdGFuZ2VudHNfbjsKICAgICAgICBjb25zdCBpbm9ybSA9IDEgLyBub3JtOwogICAgICAgIG4uc2V0KHRoaXMueCAqIGlub3JtLCB0aGlzLnkgKiBpbm9ybSwgdGhpcy56ICogaW5vcm0pOwogICAgICAgIGNvbnN0IHJhbmRWZWMgPSBWZWMzX3RhbmdlbnRzX3JhbmRWZWM7CgogICAgICAgIGlmIChNYXRoLmFicyhuLngpIDwgMC45KSB7CiAgICAgICAgICByYW5kVmVjLnNldCgxLCAwLCAwKTsKICAgICAgICAgIG4uY3Jvc3MocmFuZFZlYywgdDEpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByYW5kVmVjLnNldCgwLCAxLCAwKTsKICAgICAgICAgIG4uY3Jvc3MocmFuZFZlYywgdDEpOwogICAgICAgIH0KCiAgICAgICAgbi5jcm9zcyh0MSwgdDIpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIFRoZSBub3JtYWwgbGVuZ3RoIGlzIHplcm8sIG1ha2Ugc29tZXRoaW5nIHVwCiAgICAgICAgdDEuc2V0KDEsIDAsIDApOwogICAgICAgIHQyLnNldCgwLCAxLCAwKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBDb252ZXJ0cyB0byBhIG1vcmUgcmVhZGFibGUgZm9ybWF0CiAgICAgKi8KCgogICAgdG9TdHJpbmcoKSB7CiAgICAgIHJldHVybiBgJHt0aGlzLnh9LCR7dGhpcy55fSwke3RoaXMuen1gOwogICAgfQogICAgLyoqCiAgICAgKiBDb252ZXJ0cyB0byBhbiBhcnJheQogICAgICovCgoKICAgIHRvQXJyYXkoKSB7CiAgICAgIHJldHVybiBbdGhpcy54LCB0aGlzLnksIHRoaXMuel07CiAgICB9CiAgICAvKioKICAgICAqIENvcGllcyB2YWx1ZSBvZiBzb3VyY2UgdG8gdGhpcyB2ZWN0b3IuCiAgICAgKi8KCgogICAgY29weSh2ZWN0b3IpIHsKICAgICAgdGhpcy54ID0gdmVjdG9yLng7CiAgICAgIHRoaXMueSA9IHZlY3Rvci55OwogICAgICB0aGlzLnogPSB2ZWN0b3IuejsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIERvIGEgbGluZWFyIGludGVycG9sYXRpb24gYmV0d2VlbiB0d28gdmVjdG9ycwogICAgICogQHBhcmFtIHQgQSBudW1iZXIgYmV0d2VlbiAwIGFuZCAxLiAwIHdpbGwgbWFrZSB0aGlzIGZ1bmN0aW9uIHJldHVybiB1LCBhbmQgMSB3aWxsIG1ha2UgaXQgcmV0dXJuIHYuIE51bWJlcnMgaW4gYmV0d2VlbiB3aWxsIGdlbmVyYXRlIGEgdmVjdG9yIGluIGJldHdlZW4gdGhlbS4KICAgICAqLwoKCiAgICBsZXJwKHZlY3RvciwgdCwgdGFyZ2V0KSB7CiAgICAgIGNvbnN0IHggPSB0aGlzLng7CiAgICAgIGNvbnN0IHkgPSB0aGlzLnk7CiAgICAgIGNvbnN0IHogPSB0aGlzLno7CiAgICAgIHRhcmdldC54ID0geCArICh2ZWN0b3IueCAtIHgpICogdDsKICAgICAgdGFyZ2V0LnkgPSB5ICsgKHZlY3Rvci55IC0geSkgKiB0OwogICAgICB0YXJnZXQueiA9IHogKyAodmVjdG9yLnogLSB6KSAqIHQ7CiAgICB9CiAgICAvKioKICAgICAqIENoZWNrIGlmIGEgdmVjdG9yIGVxdWFscyBpcyBhbG1vc3QgZXF1YWwgdG8gYW5vdGhlciBvbmUuCiAgICAgKi8KCgogICAgYWxtb3N0RXF1YWxzKHZlY3RvciwgcHJlY2lzaW9uKSB7CiAgICAgIGlmIChwcmVjaXNpb24gPT09IHZvaWQgMCkgewogICAgICAgIHByZWNpc2lvbiA9IDFlLTY7CiAgICAgIH0KCiAgICAgIGlmIChNYXRoLmFicyh0aGlzLnggLSB2ZWN0b3IueCkgPiBwcmVjaXNpb24gfHwgTWF0aC5hYnModGhpcy55IC0gdmVjdG9yLnkpID4gcHJlY2lzaW9uIHx8IE1hdGguYWJzKHRoaXMueiAtIHZlY3Rvci56KSA+IHByZWNpc2lvbikgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAvKioKICAgICAqIENoZWNrIGlmIGEgdmVjdG9yIGlzIGFsbW9zdCB6ZXJvCiAgICAgKi8KCgogICAgYWxtb3N0WmVybyhwcmVjaXNpb24pIHsKICAgICAgaWYgKHByZWNpc2lvbiA9PT0gdm9pZCAwKSB7CiAgICAgICAgcHJlY2lzaW9uID0gMWUtNjsKICAgICAgfQoKICAgICAgaWYgKE1hdGguYWJzKHRoaXMueCkgPiBwcmVjaXNpb24gfHwgTWF0aC5hYnModGhpcy55KSA+IHByZWNpc2lvbiB8fCBNYXRoLmFicyh0aGlzLnopID4gcHJlY2lzaW9uKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIC8qKgogICAgICogQ2hlY2sgaWYgdGhlIHZlY3RvciBpcyBhbnRpLXBhcmFsbGVsIHRvIGFub3RoZXIgdmVjdG9yLgogICAgICogQHBhcmFtIHByZWNpc2lvbiBTZXQgdG8gemVybyBmb3IgZXhhY3QgY29tcGFyaXNvbnMKICAgICAqLwoKCiAgICBpc0FudGlwYXJhbGxlbFRvKHZlY3RvciwgcHJlY2lzaW9uKSB7CiAgICAgIHRoaXMubmVnYXRlKGFudGlwX25lZyk7CiAgICAgIHJldHVybiBhbnRpcF9uZWcuYWxtb3N0RXF1YWxzKHZlY3RvciwgcHJlY2lzaW9uKTsKICAgIH0KICAgIC8qKgogICAgICogQ2xvbmUgdGhlIHZlY3RvcgogICAgICovCgoKICAgIGNsb25lKCkgewogICAgICByZXR1cm4gbmV3IFZlYzModGhpcy54LCB0aGlzLnksIHRoaXMueik7CiAgICB9CgogIH0KICBWZWMzLlpFUk8gPSBuZXcgVmVjMygwLCAwLCAwKTsKICBWZWMzLlVOSVRfWCA9IG5ldyBWZWMzKDEsIDAsIDApOwogIFZlYzMuVU5JVF9ZID0gbmV3IFZlYzMoMCwgMSwgMCk7CiAgVmVjMy5VTklUX1ogPSBuZXcgVmVjMygwLCAwLCAxKTsKICBjb25zdCBWZWMzX3RhbmdlbnRzX24gPSBuZXcgVmVjMygpOwogIGNvbnN0IFZlYzNfdGFuZ2VudHNfcmFuZFZlYyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYW50aXBfbmVnID0gbmV3IFZlYzMoKTsKCiAgLyoqCiAgICogQXhpcyBhbGlnbmVkIGJvdW5kaW5nIGJveCBjbGFzcy4KICAgKi8KICBjbGFzcyBBQUJCIHsKICAgIC8qKgogICAgICogVGhlIGxvd2VyIGJvdW5kIG9mIHRoZSBib3VuZGluZyBib3gKICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIHVwcGVyIGJvdW5kIG9mIHRoZSBib3VuZGluZyBib3gKICAgICAqLwogICAgY29uc3RydWN0b3Iob3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICB0aGlzLmxvd2VyQm91bmQgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnVwcGVyQm91bmQgPSBuZXcgVmVjMygpOwoKICAgICAgaWYgKG9wdGlvbnMubG93ZXJCb3VuZCkgewogICAgICAgIHRoaXMubG93ZXJCb3VuZC5jb3B5KG9wdGlvbnMubG93ZXJCb3VuZCk7CiAgICAgIH0KCiAgICAgIGlmIChvcHRpb25zLnVwcGVyQm91bmQpIHsKICAgICAgICB0aGlzLnVwcGVyQm91bmQuY29weShvcHRpb25zLnVwcGVyQm91bmQpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgQUFCQiBib3VuZHMgZnJvbSBhIHNldCBvZiBwb2ludHMuCiAgICAgKiBAcGFyYW0gcG9pbnRzIEFuIGFycmF5IG9mIFZlYzMncy4KICAgICAqIEByZXR1cm4gVGhlIHNlbGYgb2JqZWN0CiAgICAgKi8KCgogICAgc2V0RnJvbVBvaW50cyhwb2ludHMsIHBvc2l0aW9uLCBxdWF0ZXJuaW9uLCBza2luU2l6ZSkgewogICAgICBjb25zdCBsID0gdGhpcy5sb3dlckJvdW5kOwogICAgICBjb25zdCB1ID0gdGhpcy51cHBlckJvdW5kOwogICAgICBjb25zdCBxID0gcXVhdGVybmlvbjsgLy8gU2V0IHRvIHRoZSBmaXJzdCBwb2ludAoKICAgICAgbC5jb3B5KHBvaW50c1swXSk7CgogICAgICBpZiAocSkgewogICAgICAgIHEudm11bHQobCwgbCk7CiAgICAgIH0KCiAgICAgIHUuY29weShsKTsKCiAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgcG9pbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgbGV0IHAgPSBwb2ludHNbaV07CgogICAgICAgIGlmIChxKSB7CiAgICAgICAgICBxLnZtdWx0KHAsIHRtcCQxKTsKICAgICAgICAgIHAgPSB0bXAkMTsKICAgICAgICB9CgogICAgICAgIGlmIChwLnggPiB1LngpIHsKICAgICAgICAgIHUueCA9IHAueDsKICAgICAgICB9CgogICAgICAgIGlmIChwLnggPCBsLngpIHsKICAgICAgICAgIGwueCA9IHAueDsKICAgICAgICB9CgogICAgICAgIGlmIChwLnkgPiB1LnkpIHsKICAgICAgICAgIHUueSA9IHAueTsKICAgICAgICB9CgogICAgICAgIGlmIChwLnkgPCBsLnkpIHsKICAgICAgICAgIGwueSA9IHAueTsKICAgICAgICB9CgogICAgICAgIGlmIChwLnogPiB1LnopIHsKICAgICAgICAgIHUueiA9IHAuejsKICAgICAgICB9CgogICAgICAgIGlmIChwLnogPCBsLnopIHsKICAgICAgICAgIGwueiA9IHAuejsKICAgICAgICB9CiAgICAgIH0gLy8gQWRkIG9mZnNldAoKCiAgICAgIGlmIChwb3NpdGlvbikgewogICAgICAgIHBvc2l0aW9uLnZhZGQobCwgbCk7CiAgICAgICAgcG9zaXRpb24udmFkZCh1LCB1KTsKICAgICAgfQoKICAgICAgaWYgKHNraW5TaXplKSB7CiAgICAgICAgbC54IC09IHNraW5TaXplOwogICAgICAgIGwueSAtPSBza2luU2l6ZTsKICAgICAgICBsLnogLT0gc2tpblNpemU7CiAgICAgICAgdS54ICs9IHNraW5TaXplOwogICAgICAgIHUueSArPSBza2luU2l6ZTsKICAgICAgICB1LnogKz0gc2tpblNpemU7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzOwogICAgfQogICAgLyoqCiAgICAgKiBDb3B5IGJvdW5kcyBmcm9tIGFuIEFBQkIgdG8gdGhpcyBBQUJCCiAgICAgKiBAcGFyYW0gYWFiYiBTb3VyY2UgdG8gY29weSBmcm9tCiAgICAgKiBAcmV0dXJuIFRoZSB0aGlzIG9iamVjdCwgZm9yIGNoYWluYWJpbGl0eQogICAgICovCgoKICAgIGNvcHkoYWFiYikgewogICAgICB0aGlzLmxvd2VyQm91bmQuY29weShhYWJiLmxvd2VyQm91bmQpOwogICAgICB0aGlzLnVwcGVyQm91bmQuY29weShhYWJiLnVwcGVyQm91bmQpOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogQ2xvbmUgYW4gQUFCQgogICAgICovCgoKICAgIGNsb25lKCkgewogICAgICByZXR1cm4gbmV3IEFBQkIoKS5jb3B5KHRoaXMpOwogICAgfQogICAgLyoqCiAgICAgKiBFeHRlbmQgdGhpcyBBQUJCIHNvIHRoYXQgaXQgY292ZXJzIHRoZSBnaXZlbiBBQUJCIHRvby4KICAgICAqLwoKCiAgICBleHRlbmQoYWFiYikgewogICAgICB0aGlzLmxvd2VyQm91bmQueCA9IE1hdGgubWluKHRoaXMubG93ZXJCb3VuZC54LCBhYWJiLmxvd2VyQm91bmQueCk7CiAgICAgIHRoaXMudXBwZXJCb3VuZC54ID0gTWF0aC5tYXgodGhpcy51cHBlckJvdW5kLngsIGFhYmIudXBwZXJCb3VuZC54KTsKICAgICAgdGhpcy5sb3dlckJvdW5kLnkgPSBNYXRoLm1pbih0aGlzLmxvd2VyQm91bmQueSwgYWFiYi5sb3dlckJvdW5kLnkpOwogICAgICB0aGlzLnVwcGVyQm91bmQueSA9IE1hdGgubWF4KHRoaXMudXBwZXJCb3VuZC55LCBhYWJiLnVwcGVyQm91bmQueSk7CiAgICAgIHRoaXMubG93ZXJCb3VuZC56ID0gTWF0aC5taW4odGhpcy5sb3dlckJvdW5kLnosIGFhYmIubG93ZXJCb3VuZC56KTsKICAgICAgdGhpcy51cHBlckJvdW5kLnogPSBNYXRoLm1heCh0aGlzLnVwcGVyQm91bmQueiwgYWFiYi51cHBlckJvdW5kLnopOwogICAgfQogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIEFBQkIgb3ZlcmxhcHMgdGhpcyBBQUJCLgogICAgICovCgoKICAgIG92ZXJsYXBzKGFhYmIpIHsKICAgICAgY29uc3QgbDEgPSB0aGlzLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUxID0gdGhpcy51cHBlckJvdW5kOwogICAgICBjb25zdCBsMiA9IGFhYmIubG93ZXJCb3VuZDsKICAgICAgY29uc3QgdTIgPSBhYWJiLnVwcGVyQm91bmQ7IC8vICAgICAgbDIgICAgICAgIHUyCiAgICAgIC8vICAgICAgfC0tLS0tLS0tLXwKICAgICAgLy8gfC0tLS0tLS0tfAogICAgICAvLyBsMSAgICAgICB1MQoKICAgICAgY29uc3Qgb3ZlcmxhcHNYID0gbDIueCA8PSB1MS54ICYmIHUxLnggPD0gdTIueCB8fCBsMS54IDw9IHUyLnggJiYgdTIueCA8PSB1MS54OwogICAgICBjb25zdCBvdmVybGFwc1kgPSBsMi55IDw9IHUxLnkgJiYgdTEueSA8PSB1Mi55IHx8IGwxLnkgPD0gdTIueSAmJiB1Mi55IDw9IHUxLnk7CiAgICAgIGNvbnN0IG92ZXJsYXBzWiA9IGwyLnogPD0gdTEueiAmJiB1MS56IDw9IHUyLnogfHwgbDEueiA8PSB1Mi56ICYmIHUyLnogPD0gdTEuejsKICAgICAgcmV0dXJuIG92ZXJsYXBzWCAmJiBvdmVybGFwc1kgJiYgb3ZlcmxhcHNaOwogICAgfSAvLyBNb3N0bHkgZm9yIGRlYnVnZ2luZwoKCiAgICB2b2x1bWUoKSB7CiAgICAgIGNvbnN0IGwgPSB0aGlzLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUgPSB0aGlzLnVwcGVyQm91bmQ7CiAgICAgIHJldHVybiAodS54IC0gbC54KSAqICh1LnkgLSBsLnkpICogKHUueiAtIGwueik7CiAgICB9CiAgICAvKioKICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gQUFCQiBpcyBmdWxseSBjb250YWluZWQgaW4gdGhpcyBBQUJCLgogICAgICovCgoKICAgIGNvbnRhaW5zKGFhYmIpIHsKICAgICAgY29uc3QgbDEgPSB0aGlzLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUxID0gdGhpcy51cHBlckJvdW5kOwogICAgICBjb25zdCBsMiA9IGFhYmIubG93ZXJCb3VuZDsKICAgICAgY29uc3QgdTIgPSBhYWJiLnVwcGVyQm91bmQ7IC8vICAgICAgbDIgICAgICAgIHUyCiAgICAgIC8vICAgICAgfC0tLS0tLS0tLXwKICAgICAgLy8gfC0tLS0tLS0tLS0tLS0tLXwKICAgICAgLy8gbDEgICAgICAgICAgICAgIHUxCgogICAgICByZXR1cm4gbDEueCA8PSBsMi54ICYmIHUxLnggPj0gdTIueCAmJiBsMS55IDw9IGwyLnkgJiYgdTEueSA+PSB1Mi55ICYmIGwxLnogPD0gbDIueiAmJiB1MS56ID49IHUyLno7CiAgICB9CgogICAgZ2V0Q29ybmVycyhhLCBiLCBjLCBkLCBlLCBmLCBnLCBoKSB7CiAgICAgIGNvbnN0IGwgPSB0aGlzLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUgPSB0aGlzLnVwcGVyQm91bmQ7CiAgICAgIGEuY29weShsKTsKICAgICAgYi5zZXQodS54LCBsLnksIGwueik7CiAgICAgIGMuc2V0KHUueCwgdS55LCBsLnopOwogICAgICBkLnNldChsLngsIHUueSwgdS56KTsKICAgICAgZS5zZXQodS54LCBsLnksIHUueik7CiAgICAgIGYuc2V0KGwueCwgdS55LCBsLnopOwogICAgICBnLnNldChsLngsIGwueSwgdS56KTsKICAgICAgaC5jb3B5KHUpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIHJlcHJlc2VudGF0aW9uIG9mIGFuIEFBQkIgaW4gYW5vdGhlciBmcmFtZS4KICAgICAqIEByZXR1cm4gVGhlICJ0YXJnZXQiIEFBQkIgb2JqZWN0LgogICAgICovCgoKICAgIHRvTG9jYWxGcmFtZShmcmFtZSwgdGFyZ2V0KSB7CiAgICAgIGNvbnN0IGNvcm5lcnMgPSB0cmFuc2Zvcm1JbnRvRnJhbWVfY29ybmVyczsKICAgICAgY29uc3QgYSA9IGNvcm5lcnNbMF07CiAgICAgIGNvbnN0IGIgPSBjb3JuZXJzWzFdOwogICAgICBjb25zdCBjID0gY29ybmVyc1syXTsKICAgICAgY29uc3QgZCA9IGNvcm5lcnNbM107CiAgICAgIGNvbnN0IGUgPSBjb3JuZXJzWzRdOwogICAgICBjb25zdCBmID0gY29ybmVyc1s1XTsKICAgICAgY29uc3QgZyA9IGNvcm5lcnNbNl07CiAgICAgIGNvbnN0IGggPSBjb3JuZXJzWzddOyAvLyBHZXQgY29ybmVycyBpbiBjdXJyZW50IGZyYW1lCgogICAgICB0aGlzLmdldENvcm5lcnMoYSwgYiwgYywgZCwgZSwgZiwgZywgaCk7IC8vIFRyYW5zZm9ybSB0aGVtIHRvIG5ldyBsb2NhbCBmcmFtZQoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IDg7IGkrKykgewogICAgICAgIGNvbnN0IGNvcm5lciA9IGNvcm5lcnNbaV07CiAgICAgICAgZnJhbWUucG9pbnRUb0xvY2FsKGNvcm5lciwgY29ybmVyKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRhcmdldC5zZXRGcm9tUG9pbnRzKGNvcm5lcnMpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIHJlcHJlc2VudGF0aW9uIG9mIGFuIEFBQkIgaW4gdGhlIGdsb2JhbCBmcmFtZS4KICAgICAqIEByZXR1cm4gVGhlICJ0YXJnZXQiIEFBQkIgb2JqZWN0LgogICAgICovCgoKICAgIHRvV29ybGRGcmFtZShmcmFtZSwgdGFyZ2V0KSB7CiAgICAgIGNvbnN0IGNvcm5lcnMgPSB0cmFuc2Zvcm1JbnRvRnJhbWVfY29ybmVyczsKICAgICAgY29uc3QgYSA9IGNvcm5lcnNbMF07CiAgICAgIGNvbnN0IGIgPSBjb3JuZXJzWzFdOwogICAgICBjb25zdCBjID0gY29ybmVyc1syXTsKICAgICAgY29uc3QgZCA9IGNvcm5lcnNbM107CiAgICAgIGNvbnN0IGUgPSBjb3JuZXJzWzRdOwogICAgICBjb25zdCBmID0gY29ybmVyc1s1XTsKICAgICAgY29uc3QgZyA9IGNvcm5lcnNbNl07CiAgICAgIGNvbnN0IGggPSBjb3JuZXJzWzddOyAvLyBHZXQgY29ybmVycyBpbiBjdXJyZW50IGZyYW1lCgogICAgICB0aGlzLmdldENvcm5lcnMoYSwgYiwgYywgZCwgZSwgZiwgZywgaCk7IC8vIFRyYW5zZm9ybSB0aGVtIHRvIG5ldyBsb2NhbCBmcmFtZQoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IDg7IGkrKykgewogICAgICAgIGNvbnN0IGNvcm5lciA9IGNvcm5lcnNbaV07CiAgICAgICAgZnJhbWUucG9pbnRUb1dvcmxkKGNvcm5lciwgY29ybmVyKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRhcmdldC5zZXRGcm9tUG9pbnRzKGNvcm5lcnMpOwogICAgfQogICAgLyoqCiAgICAgKiBDaGVjayBpZiB0aGUgQUFCQiBpcyBoaXQgYnkgYSByYXkuCiAgICAgKi8KCgogICAgb3ZlcmxhcHNSYXkocmF5KSB7CiAgICAgIGNvbnN0IHsKICAgICAgICBkaXJlY3Rpb24sCiAgICAgICAgZnJvbQogICAgICB9ID0gcmF5OyAvLyBjb25zdCB0ID0gMAogICAgICAvLyByYXkuZGlyZWN0aW9uIGlzIHVuaXQgZGlyZWN0aW9uIHZlY3RvciBvZiByYXkKCiAgICAgIGNvbnN0IGRpckZyYWNYID0gMSAvIGRpcmVjdGlvbi54OwogICAgICBjb25zdCBkaXJGcmFjWSA9IDEgLyBkaXJlY3Rpb24ueTsKICAgICAgY29uc3QgZGlyRnJhY1ogPSAxIC8gZGlyZWN0aW9uLno7IC8vIHRoaXMubG93ZXJCb3VuZCBpcyB0aGUgY29ybmVyIG9mIEFBQkIgd2l0aCBtaW5pbWFsIGNvb3JkaW5hdGVzIC0gbGVmdCBib3R0b20sIHJ0IGlzIG1heGltYWwgY29ybmVyCgogICAgICBjb25zdCB0MSA9ICh0aGlzLmxvd2VyQm91bmQueCAtIGZyb20ueCkgKiBkaXJGcmFjWDsKICAgICAgY29uc3QgdDIgPSAodGhpcy51cHBlckJvdW5kLnggLSBmcm9tLngpICogZGlyRnJhY1g7CiAgICAgIGNvbnN0IHQzID0gKHRoaXMubG93ZXJCb3VuZC55IC0gZnJvbS55KSAqIGRpckZyYWNZOwogICAgICBjb25zdCB0NCA9ICh0aGlzLnVwcGVyQm91bmQueSAtIGZyb20ueSkgKiBkaXJGcmFjWTsKICAgICAgY29uc3QgdDUgPSAodGhpcy5sb3dlckJvdW5kLnogLSBmcm9tLnopICogZGlyRnJhY1o7CiAgICAgIGNvbnN0IHQ2ID0gKHRoaXMudXBwZXJCb3VuZC56IC0gZnJvbS56KSAqIGRpckZyYWNaOyAvLyBjb25zdCB0bWluID0gTWF0aC5tYXgoTWF0aC5tYXgoTWF0aC5taW4odDEsIHQyKSwgTWF0aC5taW4odDMsIHQ0KSkpOwogICAgICAvLyBjb25zdCB0bWF4ID0gTWF0aC5taW4oTWF0aC5taW4oTWF0aC5tYXgodDEsIHQyKSwgTWF0aC5tYXgodDMsIHQ0KSkpOwoKICAgICAgY29uc3QgdG1pbiA9IE1hdGgubWF4KE1hdGgubWF4KE1hdGgubWluKHQxLCB0MiksIE1hdGgubWluKHQzLCB0NCkpLCBNYXRoLm1pbih0NSwgdDYpKTsKICAgICAgY29uc3QgdG1heCA9IE1hdGgubWluKE1hdGgubWluKE1hdGgubWF4KHQxLCB0MiksIE1hdGgubWF4KHQzLCB0NCkpLCBNYXRoLm1heCh0NSwgdDYpKTsgLy8gaWYgdG1heCA8IDAsIHJheSAobGluZSkgaXMgaW50ZXJzZWN0aW5nIEFBQkIsIGJ1dCB3aG9sZSBBQUJCIGlzIGJlaGluZyB1cwoKICAgICAgaWYgKHRtYXggPCAwKSB7CiAgICAgICAgLy90ID0gdG1heDsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0gLy8gaWYgdG1pbiA+IHRtYXgsIHJheSBkb2Vzbid0IGludGVyc2VjdCBBQUJCCgoKICAgICAgaWYgKHRtaW4gPiB0bWF4KSB7CiAgICAgICAgLy90ID0gdG1heDsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICB9CiAgY29uc3QgdG1wJDEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHRyYW5zZm9ybUludG9GcmFtZV9jb3JuZXJzID0gW25ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCldOwoKICAvKioKICAgKiBDb2xsaXNpb24gIm1hdHJpeCIuCiAgICogSXQncyBhY3R1YWxseSBhIHRyaWFuZ3VsYXItc2hhcGVkIGFycmF5IG9mIHdoZXRoZXIgdHdvIGJvZGllcyBhcmUgdG91Y2hpbmcgdGhpcyBzdGVwLCBmb3IgcmVmZXJlbmNlIG5leHQgc3RlcAogICAqLwogIGNsYXNzIEFycmF5Q29sbGlzaW9uTWF0cml4IHsKICAgIC8qKgogICAgICogVGhlIG1hdHJpeCBzdG9yYWdlLgogICAgICovCiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgdGhpcy5tYXRyaXggPSBbXTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IGFuIGVsZW1lbnQKICAgICAqLwoKCiAgICBnZXQoYmksIGJqKSB7CiAgICAgIGxldCB7CiAgICAgICAgaW5kZXg6IGkKICAgICAgfSA9IGJpOwogICAgICBsZXQgewogICAgICAgIGluZGV4OiBqCiAgICAgIH0gPSBiajsKCiAgICAgIGlmIChqID4gaSkgewogICAgICAgIGNvbnN0IHRlbXAgPSBqOwogICAgICAgIGogPSBpOwogICAgICAgIGkgPSB0ZW1wOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5tYXRyaXhbKGkgKiAoaSArIDEpID4+IDEpICsgaiAtIDFdOwogICAgfQogICAgLyoqCiAgICAgKiBTZXQgYW4gZWxlbWVudAogICAgICovCgoKICAgIHNldChiaSwgYmosIHZhbHVlKSB7CiAgICAgIGxldCB7CiAgICAgICAgaW5kZXg6IGkKICAgICAgfSA9IGJpOwogICAgICBsZXQgewogICAgICAgIGluZGV4OiBqCiAgICAgIH0gPSBiajsKCiAgICAgIGlmIChqID4gaSkgewogICAgICAgIGNvbnN0IHRlbXAgPSBqOwogICAgICAgIGogPSBpOwogICAgICAgIGkgPSB0ZW1wOwogICAgICB9CgogICAgICB0aGlzLm1hdHJpeFsoaSAqIChpICsgMSkgPj4gMSkgKyBqIC0gMV0gPSB2YWx1ZSA/IDEgOiAwOwogICAgfQogICAgLyoqCiAgICAgKiBTZXRzIGFsbCBlbGVtZW50cyB0byB6ZXJvCiAgICAgKi8KCgogICAgcmVzZXQoKSB7CiAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gdGhpcy5tYXRyaXgubGVuZ3RoOyBpICE9PSBsOyBpKyspIHsKICAgICAgICB0aGlzLm1hdHJpeFtpXSA9IDA7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogU2V0cyB0aGUgbWF4IG51bWJlciBvZiBvYmplY3RzCiAgICAgKi8KCgogICAgc2V0TnVtT2JqZWN0cyhuKSB7CiAgICAgIHRoaXMubWF0cml4Lmxlbmd0aCA9IG4gKiAobiAtIDEpID4+IDE7CiAgICB9CgogIH0KCiAgLyoqCiAgICogQmFzZSBjbGFzcyBmb3Igb2JqZWN0cyB0aGF0IGRpc3BhdGNoZXMgZXZlbnRzLgogICAqLwogIGNsYXNzIEV2ZW50VGFyZ2V0IHsKICAgIC8qKgogICAgICogQWRkIGFuIGV2ZW50IGxpc3RlbmVyCiAgICAgKiBAcmV0dXJuIFRoZSBzZWxmIG9iamVjdCwgZm9yIGNoYWluYWJpbGl0eS4KICAgICAqLwogICAgYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikgewogICAgICBpZiAodGhpcy5fbGlzdGVuZXJzID09PSB1bmRlZmluZWQpIHsKICAgICAgICB0aGlzLl9saXN0ZW5lcnMgPSB7fTsKICAgICAgfQoKICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzOwoKICAgICAgaWYgKGxpc3RlbmVyc1t0eXBlXSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgbGlzdGVuZXJzW3R5cGVdID0gW107CiAgICAgIH0KCiAgICAgIGlmICghbGlzdGVuZXJzW3R5cGVdLmluY2x1ZGVzKGxpc3RlbmVyKSkgewogICAgICAgIGxpc3RlbmVyc1t0eXBlXS5wdXNoKGxpc3RlbmVyKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIENoZWNrIGlmIGFuIGV2ZW50IGxpc3RlbmVyIGlzIGFkZGVkCiAgICAgKi8KCgogICAgaGFzRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikgewogICAgICBpZiAodGhpcy5fbGlzdGVuZXJzID09PSB1bmRlZmluZWQpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVyczsKCiAgICAgIGlmIChsaXN0ZW5lcnNbdHlwZV0gIT09IHVuZGVmaW5lZCAmJiBsaXN0ZW5lcnNbdHlwZV0uaW5jbHVkZXMobGlzdGVuZXIpKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KCiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIC8qKgogICAgICogQ2hlY2sgaWYgYW55IGV2ZW50IGxpc3RlbmVyIG9mIHRoZSBnaXZlbiB0eXBlIGlzIGFkZGVkCiAgICAgKi8KCgogICAgaGFzQW55RXZlbnRMaXN0ZW5lcih0eXBlKSB7CiAgICAgIGlmICh0aGlzLl9saXN0ZW5lcnMgPT09IHVuZGVmaW5lZCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzOwogICAgICByZXR1cm4gbGlzdGVuZXJzW3R5cGVdICE9PSB1bmRlZmluZWQ7CiAgICB9CiAgICAvKioKICAgICAqIFJlbW92ZSBhbiBldmVudCBsaXN0ZW5lcgogICAgICogQHJldHVybiBUaGUgc2VsZiBvYmplY3QsIGZvciBjaGFpbmFiaWxpdHkuCiAgICAgKi8KCgogICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikgewogICAgICBpZiAodGhpcy5fbGlzdGVuZXJzID09PSB1bmRlZmluZWQpIHsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfQoKICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzOwoKICAgICAgaWYgKGxpc3RlbmVyc1t0eXBlXSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0KCiAgICAgIGNvbnN0IGluZGV4ID0gbGlzdGVuZXJzW3R5cGVdLmluZGV4T2YobGlzdGVuZXIpOwoKICAgICAgaWYgKGluZGV4ICE9PSAtMSkgewogICAgICAgIGxpc3RlbmVyc1t0eXBlXS5zcGxpY2UoaW5kZXgsIDEpOwogICAgICB9CgogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogRW1pdCBhbiBldmVudC4KICAgICAqIEByZXR1cm4gVGhlIHNlbGYgb2JqZWN0LCBmb3IgY2hhaW5hYmlsaXR5LgogICAgICovCgoKICAgIGRpc3BhdGNoRXZlbnQoZXZlbnQpIHsKICAgICAgaWYgKHRoaXMuX2xpc3RlbmVycyA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0KCiAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVyczsKICAgICAgY29uc3QgbGlzdGVuZXJBcnJheSA9IGxpc3RlbmVyc1tldmVudC50eXBlXTsKCiAgICAgIGlmIChsaXN0ZW5lckFycmF5ICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBldmVudC50YXJnZXQgPSB0aGlzOwoKICAgICAgICBmb3IgKGxldCBpID0gMCwgbCA9IGxpc3RlbmVyQXJyYXkubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgICAgICBsaXN0ZW5lckFycmF5W2ldLmNhbGwodGhpcywgZXZlbnQpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CgogIH0KCiAgLyoqCiAgICogQSBRdWF0ZXJuaW9uIGRlc2NyaWJlcyBhIHJvdGF0aW9uIGluIDNEIHNwYWNlLiBUaGUgUXVhdGVybmlvbiBpcyBtYXRoZW1hdGljYWxseSBkZWZpbmVkIGFzIFEgPSB4KmkgKyB5KmogKyB6KmsgKyB3LCB3aGVyZSAoaSxqLGspIGFyZSBpbWFnaW5hcnkgYmFzaXMgdmVjdG9ycy4gKHgseSx6KSBjYW4gYmUgc2VlbiBhcyBhIHZlY3RvciByZWxhdGVkIHRvIHRoZSBheGlzIG9mIHJvdGF0aW9uLCB3aGlsZSB0aGUgcmVhbCBtdWx0aXBsaWVyLCB3LCBpcyByZWxhdGVkIHRvIHRoZSBhbW91bnQgb2Ygcm90YXRpb24uCiAgICogQHBhcmFtIHggTXVsdGlwbGllciBvZiB0aGUgaW1hZ2luYXJ5IGJhc2lzIHZlY3RvciBpLgogICAqIEBwYXJhbSB5IE11bHRpcGxpZXIgb2YgdGhlIGltYWdpbmFyeSBiYXNpcyB2ZWN0b3Igai4KICAgKiBAcGFyYW0geiBNdWx0aXBsaWVyIG9mIHRoZSBpbWFnaW5hcnkgYmFzaXMgdmVjdG9yIGsuCiAgICogQHBhcmFtIHcgTXVsdGlwbGllciBvZiB0aGUgcmVhbCBwYXJ0LgogICAqIEBzZWUgaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9RdWF0ZXJuaW9uCiAgICovCgogIGNsYXNzIFF1YXRlcm5pb24gewogICAgY29uc3RydWN0b3IoeCwgeSwgeiwgdykgewogICAgICBpZiAoeCA9PT0gdm9pZCAwKSB7CiAgICAgICAgeCA9IDA7CiAgICAgIH0KCiAgICAgIGlmICh5ID09PSB2b2lkIDApIHsKICAgICAgICB5ID0gMDsKICAgICAgfQoKICAgICAgaWYgKHogPT09IHZvaWQgMCkgewogICAgICAgIHogPSAwOwogICAgICB9CgogICAgICBpZiAodyA9PT0gdm9pZCAwKSB7CiAgICAgICAgdyA9IDE7CiAgICAgIH0KCiAgICAgIHRoaXMueCA9IHg7CiAgICAgIHRoaXMueSA9IHk7CiAgICAgIHRoaXMueiA9IHo7CiAgICAgIHRoaXMudyA9IHc7CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgdmFsdWUgb2YgdGhlIHF1YXRlcm5pb24uCiAgICAgKi8KCgogICAgc2V0KHgsIHksIHosIHcpIHsKICAgICAgdGhpcy54ID0geDsKICAgICAgdGhpcy55ID0geTsKICAgICAgdGhpcy56ID0gejsKICAgICAgdGhpcy53ID0gdzsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIENvbnZlcnQgdG8gYSByZWFkYWJsZSBmb3JtYXQKICAgICAqIEByZXR1cm4gIngseSx6LHciCiAgICAgKi8KCgogICAgdG9TdHJpbmcoKSB7CiAgICAgIHJldHVybiBgJHt0aGlzLnh9LCR7dGhpcy55fSwke3RoaXMuen0sJHt0aGlzLnd9YDsKICAgIH0KICAgIC8qKgogICAgICogQ29udmVydCB0byBhbiBBcnJheQogICAgICogQHJldHVybiBbeCwgeSwgeiwgd10KICAgICAqLwoKCiAgICB0b0FycmF5KCkgewogICAgICByZXR1cm4gW3RoaXMueCwgdGhpcy55LCB0aGlzLnosIHRoaXMud107CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgcXVhdGVybmlvbiBjb21wb25lbnRzIGdpdmVuIGFuIGF4aXMgYW5kIGFuIGFuZ2xlIGluIHJhZGlhbnMuCiAgICAgKi8KCgogICAgc2V0RnJvbUF4aXNBbmdsZSh2ZWN0b3IsIGFuZ2xlKSB7CiAgICAgIGNvbnN0IHMgPSBNYXRoLnNpbihhbmdsZSAqIDAuNSk7CiAgICAgIHRoaXMueCA9IHZlY3Rvci54ICogczsKICAgICAgdGhpcy55ID0gdmVjdG9yLnkgKiBzOwogICAgICB0aGlzLnogPSB2ZWN0b3IueiAqIHM7CiAgICAgIHRoaXMudyA9IE1hdGguY29zKGFuZ2xlICogMC41KTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIENvbnZlcnRzIHRoZSBxdWF0ZXJuaW9uIHRvIFsgYXhpcywgYW5nbGUgXSByZXByZXNlbnRhdGlvbi4KICAgICAqIEBwYXJhbSB0YXJnZXRBeGlzIEEgdmVjdG9yIG9iamVjdCB0byByZXVzZSBmb3Igc3RvcmluZyB0aGUgYXhpcy4KICAgICAqIEByZXR1cm4gQW4gYXJyYXksIGZpcnN0IGVsZW1lbnQgaXMgdGhlIGF4aXMgYW5kIHRoZSBzZWNvbmQgaXMgdGhlIGFuZ2xlIGluIHJhZGlhbnMuCiAgICAgKi8KCgogICAgdG9BeGlzQW5nbGUodGFyZ2V0QXhpcykgewogICAgICBpZiAodGFyZ2V0QXhpcyA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0QXhpcyA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIHRoaXMubm9ybWFsaXplKCk7IC8vIGlmIHc+MSBhY29zIGFuZCBzcXJ0IHdpbGwgcHJvZHVjZSBlcnJvcnMsIHRoaXMgY2FudCBoYXBwZW4gaWYgcXVhdGVybmlvbiBpcyBub3JtYWxpc2VkCgogICAgICBjb25zdCBhbmdsZSA9IDIgKiBNYXRoLmFjb3ModGhpcy53KTsKICAgICAgY29uc3QgcyA9IE1hdGguc3FydCgxIC0gdGhpcy53ICogdGhpcy53KTsgLy8gYXNzdW1pbmcgcXVhdGVybmlvbiBub3JtYWxpc2VkIHRoZW4gdyBpcyBsZXNzIHRoYW4gMSwgc28gdGVybSBhbHdheXMgcG9zaXRpdmUuCgogICAgICBpZiAocyA8IDAuMDAxKSB7CiAgICAgICAgLy8gdGVzdCB0byBhdm9pZCBkaXZpZGUgYnkgemVybywgcyBpcyBhbHdheXMgcG9zaXRpdmUgZHVlIHRvIHNxcnQKICAgICAgICAvLyBpZiBzIGNsb3NlIHRvIHplcm8gdGhlbiBkaXJlY3Rpb24gb2YgYXhpcyBub3QgaW1wb3J0YW50CiAgICAgICAgdGFyZ2V0QXhpcy54ID0gdGhpcy54OyAvLyBpZiBpdCBpcyBpbXBvcnRhbnQgdGhhdCBheGlzIGlzIG5vcm1hbGlzZWQgdGhlbiByZXBsYWNlIHdpdGggeD0xOyB5PXo9MDsKCiAgICAgICAgdGFyZ2V0QXhpcy55ID0gdGhpcy55OwogICAgICAgIHRhcmdldEF4aXMueiA9IHRoaXMuejsKICAgICAgfSBlbHNlIHsKICAgICAgICB0YXJnZXRBeGlzLnggPSB0aGlzLnggLyBzOyAvLyBub3JtYWxpc2UgYXhpcwoKICAgICAgICB0YXJnZXRBeGlzLnkgPSB0aGlzLnkgLyBzOwogICAgICAgIHRhcmdldEF4aXMueiA9IHRoaXMueiAvIHM7CiAgICAgIH0KCiAgICAgIHJldHVybiBbdGFyZ2V0QXhpcywgYW5nbGVdOwogICAgfQogICAgLyoqCiAgICAgKiBTZXQgdGhlIHF1YXRlcm5pb24gdmFsdWUgZ2l2ZW4gdHdvIHZlY3RvcnMuIFRoZSByZXN1bHRpbmcgcm90YXRpb24gd2lsbCBiZSB0aGUgbmVlZGVkIHJvdGF0aW9uIHRvIHJvdGF0ZSB1IHRvIHYuCiAgICAgKi8KCgogICAgc2V0RnJvbVZlY3RvcnModSwgdikgewogICAgICBpZiAodS5pc0FudGlwYXJhbGxlbFRvKHYpKSB7CiAgICAgICAgY29uc3QgdDEgPSBzZnZfdDE7CiAgICAgICAgY29uc3QgdDIgPSBzZnZfdDI7CiAgICAgICAgdS50YW5nZW50cyh0MSwgdDIpOwogICAgICAgIHRoaXMuc2V0RnJvbUF4aXNBbmdsZSh0MSwgTWF0aC5QSSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc3QgYSA9IHUuY3Jvc3Modik7CiAgICAgICAgdGhpcy54ID0gYS54OwogICAgICAgIHRoaXMueSA9IGEueTsKICAgICAgICB0aGlzLnogPSBhLno7CiAgICAgICAgdGhpcy53ID0gTWF0aC5zcXJ0KHUubGVuZ3RoKCkgKiogMiAqIHYubGVuZ3RoKCkgKiogMikgKyB1LmRvdCh2KTsKICAgICAgICB0aGlzLm5vcm1hbGl6ZSgpOwogICAgICB9CgogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogTXVsdGlwbHkgdGhlIHF1YXRlcm5pb24gd2l0aCBhbiBvdGhlciBxdWF0ZXJuaW9uLgogICAgICovCgoKICAgIG11bHQocXVhdCwgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IGF4ID0gdGhpcy54OwogICAgICBjb25zdCBheSA9IHRoaXMueTsKICAgICAgY29uc3QgYXogPSB0aGlzLno7CiAgICAgIGNvbnN0IGF3ID0gdGhpcy53OwogICAgICBjb25zdCBieCA9IHF1YXQueDsKICAgICAgY29uc3QgYnkgPSBxdWF0Lnk7CiAgICAgIGNvbnN0IGJ6ID0gcXVhdC56OwogICAgICBjb25zdCBidyA9IHF1YXQudzsKICAgICAgdGFyZ2V0LnggPSBheCAqIGJ3ICsgYXcgKiBieCArIGF5ICogYnogLSBheiAqIGJ5OwogICAgICB0YXJnZXQueSA9IGF5ICogYncgKyBhdyAqIGJ5ICsgYXogKiBieCAtIGF4ICogYno7CiAgICAgIHRhcmdldC56ID0gYXogKiBidyArIGF3ICogYnogKyBheCAqIGJ5IC0gYXkgKiBieDsKICAgICAgdGFyZ2V0LncgPSBhdyAqIGJ3IC0gYXggKiBieCAtIGF5ICogYnkgLSBheiAqIGJ6OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIGludmVyc2UgcXVhdGVybmlvbiByb3RhdGlvbi4KICAgICAqLwoKCiAgICBpbnZlcnNlKHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgUXVhdGVybmlvbigpOwogICAgICB9CgogICAgICBjb25zdCB4ID0gdGhpcy54OwogICAgICBjb25zdCB5ID0gdGhpcy55OwogICAgICBjb25zdCB6ID0gdGhpcy56OwogICAgICBjb25zdCB3ID0gdGhpcy53OwogICAgICB0aGlzLmNvbmp1Z2F0ZSh0YXJnZXQpOwogICAgICBjb25zdCBpbm9ybTIgPSAxIC8gKHggKiB4ICsgeSAqIHkgKyB6ICogeiArIHcgKiB3KTsKICAgICAgdGFyZ2V0LnggKj0gaW5vcm0yOwogICAgICB0YXJnZXQueSAqPSBpbm9ybTI7CiAgICAgIHRhcmdldC56ICo9IGlub3JtMjsKICAgICAgdGFyZ2V0LncgKj0gaW5vcm0yOwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIHF1YXRlcm5pb24gY29uanVnYXRlCiAgICAgKi8KCgogICAgY29uanVnYXRlKHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgUXVhdGVybmlvbigpOwogICAgICB9CgogICAgICB0YXJnZXQueCA9IC10aGlzLng7CiAgICAgIHRhcmdldC55ID0gLXRoaXMueTsKICAgICAgdGFyZ2V0LnogPSAtdGhpcy56OwogICAgICB0YXJnZXQudyA9IHRoaXMudzsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogTm9ybWFsaXplIHRoZSBxdWF0ZXJuaW9uLiBOb3RlIHRoYXQgdGhpcyBjaGFuZ2VzIHRoZSB2YWx1ZXMgb2YgdGhlIHF1YXRlcm5pb24uCiAgICAgKi8KCgogICAgbm9ybWFsaXplKCkgewogICAgICBsZXQgbCA9IE1hdGguc3FydCh0aGlzLnggKiB0aGlzLnggKyB0aGlzLnkgKiB0aGlzLnkgKyB0aGlzLnogKiB0aGlzLnogKyB0aGlzLncgKiB0aGlzLncpOwoKICAgICAgaWYgKGwgPT09IDApIHsKICAgICAgICB0aGlzLnggPSAwOwogICAgICAgIHRoaXMueSA9IDA7CiAgICAgICAgdGhpcy56ID0gMDsKICAgICAgICB0aGlzLncgPSAwOwogICAgICB9IGVsc2UgewogICAgICAgIGwgPSAxIC8gbDsKICAgICAgICB0aGlzLnggKj0gbDsKICAgICAgICB0aGlzLnkgKj0gbDsKICAgICAgICB0aGlzLnogKj0gbDsKICAgICAgICB0aGlzLncgKj0gbDsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIEFwcHJveGltYXRpb24gb2YgcXVhdGVybmlvbiBub3JtYWxpemF0aW9uLiBXb3JrcyBiZXN0IHdoZW4gcXVhdCBpcyBhbHJlYWR5IGFsbW9zdC1ub3JtYWxpemVkLgogICAgICogQGF1dGhvciB1bnBoYXNlZCwgaHR0cHM6Ly9naXRodWIuY29tL3VucGhhc2VkCiAgICAgKi8KCgogICAgbm9ybWFsaXplRmFzdCgpIHsKICAgICAgY29uc3QgZiA9ICgzLjAgLSAodGhpcy54ICogdGhpcy54ICsgdGhpcy55ICogdGhpcy55ICsgdGhpcy56ICogdGhpcy56ICsgdGhpcy53ICogdGhpcy53KSkgLyAyLjA7CgogICAgICBpZiAoZiA9PT0gMCkgewogICAgICAgIHRoaXMueCA9IDA7CiAgICAgICAgdGhpcy55ID0gMDsKICAgICAgICB0aGlzLnogPSAwOwogICAgICAgIHRoaXMudyA9IDA7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy54ICo9IGY7CiAgICAgICAgdGhpcy55ICo9IGY7CiAgICAgICAgdGhpcy56ICo9IGY7CiAgICAgICAgdGhpcy53ICo9IGY7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzOwogICAgfQogICAgLyoqCiAgICAgKiBNdWx0aXBseSB0aGUgcXVhdGVybmlvbiBieSBhIHZlY3RvcgogICAgICovCgoKICAgIHZtdWx0KHYsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBjb25zdCB4ID0gdi54OwogICAgICBjb25zdCB5ID0gdi55OwogICAgICBjb25zdCB6ID0gdi56OwogICAgICBjb25zdCBxeCA9IHRoaXMueDsKICAgICAgY29uc3QgcXkgPSB0aGlzLnk7CiAgICAgIGNvbnN0IHF6ID0gdGhpcy56OwogICAgICBjb25zdCBxdyA9IHRoaXMudzsgLy8gcSp2CgogICAgICBjb25zdCBpeCA9IHF3ICogeCArIHF5ICogeiAtIHF6ICogeTsKICAgICAgY29uc3QgaXkgPSBxdyAqIHkgKyBxeiAqIHggLSBxeCAqIHo7CiAgICAgIGNvbnN0IGl6ID0gcXcgKiB6ICsgcXggKiB5IC0gcXkgKiB4OwogICAgICBjb25zdCBpdyA9IC1xeCAqIHggLSBxeSAqIHkgLSBxeiAqIHo7CiAgICAgIHRhcmdldC54ID0gaXggKiBxdyArIGl3ICogLXF4ICsgaXkgKiAtcXogLSBpeiAqIC1xeTsKICAgICAgdGFyZ2V0LnkgPSBpeSAqIHF3ICsgaXcgKiAtcXkgKyBpeiAqIC1xeCAtIGl4ICogLXF6OwogICAgICB0YXJnZXQueiA9IGl6ICogcXcgKyBpdyAqIC1xeiArIGl4ICogLXF5IC0gaXkgKiAtcXg7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIENvcGllcyB2YWx1ZSBvZiBzb3VyY2UgdG8gdGhpcyBxdWF0ZXJuaW9uLgogICAgICogQHJldHVybiB0aGlzCiAgICAgKi8KCgogICAgY29weShxdWF0KSB7CiAgICAgIHRoaXMueCA9IHF1YXQueDsKICAgICAgdGhpcy55ID0gcXVhdC55OwogICAgICB0aGlzLnogPSBxdWF0Lno7CiAgICAgIHRoaXMudyA9IHF1YXQudzsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIENvbnZlcnQgdGhlIHF1YXRlcm5pb24gdG8gZXVsZXIgYW5nbGUgcmVwcmVzZW50YXRpb24uIE9yZGVyOiBZWlgsIGFzIHRoaXMgcGFnZSBkZXNjcmliZXM6IGh0dHBzOi8vd3d3LmV1Y2xpZGVhbnNwYWNlLmNvbS9tYXRocy9zdGFuZGFyZHMvaW5kZXguaHRtCiAgICAgKiBAcGFyYW0gb3JkZXIgVGhyZWUtY2hhcmFjdGVyIHN0cmluZywgZGVmYXVsdHMgdG8gIllaWCIKICAgICAqLwoKCiAgICB0b0V1bGVyKHRhcmdldCwgb3JkZXIpIHsKICAgICAgaWYgKG9yZGVyID09PSB2b2lkIDApIHsKICAgICAgICBvcmRlciA9ICdZWlgnOwogICAgICB9CgogICAgICBsZXQgaGVhZGluZzsKICAgICAgbGV0IGF0dGl0dWRlOwogICAgICBsZXQgYmFuazsKICAgICAgY29uc3QgeCA9IHRoaXMueDsKICAgICAgY29uc3QgeSA9IHRoaXMueTsKICAgICAgY29uc3QgeiA9IHRoaXMuejsKICAgICAgY29uc3QgdyA9IHRoaXMudzsKCiAgICAgIHN3aXRjaCAob3JkZXIpIHsKICAgICAgICBjYXNlICdZWlgnOgogICAgICAgICAgY29uc3QgdGVzdCA9IHggKiB5ICsgeiAqIHc7CgogICAgICAgICAgaWYgKHRlc3QgPiAwLjQ5OSkgewogICAgICAgICAgICAvLyBzaW5ndWxhcml0eSBhdCBub3J0aCBwb2xlCiAgICAgICAgICAgIGhlYWRpbmcgPSAyICogTWF0aC5hdGFuMih4LCB3KTsKICAgICAgICAgICAgYXR0aXR1ZGUgPSBNYXRoLlBJIC8gMjsKICAgICAgICAgICAgYmFuayA9IDA7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHRlc3QgPCAtMC40OTkpIHsKICAgICAgICAgICAgLy8gc2luZ3VsYXJpdHkgYXQgc291dGggcG9sZQogICAgICAgICAgICBoZWFkaW5nID0gLTIgKiBNYXRoLmF0YW4yKHgsIHcpOwogICAgICAgICAgICBhdHRpdHVkZSA9IC1NYXRoLlBJIC8gMjsKICAgICAgICAgICAgYmFuayA9IDA7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGhlYWRpbmcgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICBjb25zdCBzcXggPSB4ICogeDsKICAgICAgICAgICAgY29uc3Qgc3F5ID0geSAqIHk7CiAgICAgICAgICAgIGNvbnN0IHNxeiA9IHogKiB6OwogICAgICAgICAgICBoZWFkaW5nID0gTWF0aC5hdGFuMigyICogeSAqIHcgLSAyICogeCAqIHosIDEgLSAyICogc3F5IC0gMiAqIHNxeik7IC8vIEhlYWRpbmcKCiAgICAgICAgICAgIGF0dGl0dWRlID0gTWF0aC5hc2luKDIgKiB0ZXN0KTsgLy8gYXR0aXR1ZGUKCiAgICAgICAgICAgIGJhbmsgPSBNYXRoLmF0YW4yKDIgKiB4ICogdyAtIDIgKiB5ICogeiwgMSAtIDIgKiBzcXggLSAyICogc3F6KTsgLy8gYmFuawogICAgICAgICAgfQoKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFdWxlciBvcmRlciAke29yZGVyfSBub3Qgc3VwcG9ydGVkIHlldC5gKTsKICAgICAgfQoKICAgICAgdGFyZ2V0LnkgPSBoZWFkaW5nOwogICAgICB0YXJnZXQueiA9IGF0dGl0dWRlOwogICAgICB0YXJnZXQueCA9IGJhbms7CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgcXVhdGVybmlvbiBjb21wb25lbnRzIGdpdmVuIEV1bGVyIGFuZ2xlIHJlcHJlc2VudGF0aW9uLgogICAgICoKICAgICAqIEBwYXJhbSBvcmRlciBUaGUgb3JkZXIgdG8gYXBwbHkgYW5nbGVzOiAnWFlaJyBvciAnWVhaJyBvciBhbnkgb3RoZXIgY29tYmluYXRpb24uCiAgICAgKgogICAgICogU2VlIHtAbGluayBodHRwczovL3d3dy5tYXRod29ya3MuY29tL21hdGxhYmNlbnRyYWwvZmlsZWV4Y2hhbmdlLzIwNjk2LWZ1bmN0aW9uLXRvLWNvbnZlcnQtYmV0d2Vlbi1kY20tZXVsZXItYW5nbGVzLXF1YXRlcm5pb25zLWFuZC1ldWxlci12ZWN0b3JzIE1hdGhXb3Jrc30gcmVmZXJlbmNlCiAgICAgKi8KCgogICAgc2V0RnJvbUV1bGVyKHgsIHksIHosIG9yZGVyKSB7CiAgICAgIGlmIChvcmRlciA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3JkZXIgPSAnWFlaJzsKICAgICAgfQoKICAgICAgY29uc3QgYzEgPSBNYXRoLmNvcyh4IC8gMik7CiAgICAgIGNvbnN0IGMyID0gTWF0aC5jb3MoeSAvIDIpOwogICAgICBjb25zdCBjMyA9IE1hdGguY29zKHogLyAyKTsKICAgICAgY29uc3QgczEgPSBNYXRoLnNpbih4IC8gMik7CiAgICAgIGNvbnN0IHMyID0gTWF0aC5zaW4oeSAvIDIpOwogICAgICBjb25zdCBzMyA9IE1hdGguc2luKHogLyAyKTsKCiAgICAgIGlmIChvcmRlciA9PT0gJ1hZWicpIHsKICAgICAgICB0aGlzLnggPSBzMSAqIGMyICogYzMgKyBjMSAqIHMyICogczM7CiAgICAgICAgdGhpcy55ID0gYzEgKiBzMiAqIGMzIC0gczEgKiBjMiAqIHMzOwogICAgICAgIHRoaXMueiA9IGMxICogYzIgKiBzMyArIHMxICogczIgKiBjMzsKICAgICAgICB0aGlzLncgPSBjMSAqIGMyICogYzMgLSBzMSAqIHMyICogczM7CiAgICAgIH0gZWxzZSBpZiAob3JkZXIgPT09ICdZWFonKSB7CiAgICAgICAgdGhpcy54ID0gczEgKiBjMiAqIGMzICsgYzEgKiBzMiAqIHMzOwogICAgICAgIHRoaXMueSA9IGMxICogczIgKiBjMyAtIHMxICogYzIgKiBzMzsKICAgICAgICB0aGlzLnogPSBjMSAqIGMyICogczMgLSBzMSAqIHMyICogYzM7CiAgICAgICAgdGhpcy53ID0gYzEgKiBjMiAqIGMzICsgczEgKiBzMiAqIHMzOwogICAgICB9IGVsc2UgaWYgKG9yZGVyID09PSAnWlhZJykgewogICAgICAgIHRoaXMueCA9IHMxICogYzIgKiBjMyAtIGMxICogczIgKiBzMzsKICAgICAgICB0aGlzLnkgPSBjMSAqIHMyICogYzMgKyBzMSAqIGMyICogczM7CiAgICAgICAgdGhpcy56ID0gYzEgKiBjMiAqIHMzICsgczEgKiBzMiAqIGMzOwogICAgICAgIHRoaXMudyA9IGMxICogYzIgKiBjMyAtIHMxICogczIgKiBzMzsKICAgICAgfSBlbHNlIGlmIChvcmRlciA9PT0gJ1pZWCcpIHsKICAgICAgICB0aGlzLnggPSBzMSAqIGMyICogYzMgLSBjMSAqIHMyICogczM7CiAgICAgICAgdGhpcy55ID0gYzEgKiBzMiAqIGMzICsgczEgKiBjMiAqIHMzOwogICAgICAgIHRoaXMueiA9IGMxICogYzIgKiBzMyAtIHMxICogczIgKiBjMzsKICAgICAgICB0aGlzLncgPSBjMSAqIGMyICogYzMgKyBzMSAqIHMyICogczM7CiAgICAgIH0gZWxzZSBpZiAob3JkZXIgPT09ICdZWlgnKSB7CiAgICAgICAgdGhpcy54ID0gczEgKiBjMiAqIGMzICsgYzEgKiBzMiAqIHMzOwogICAgICAgIHRoaXMueSA9IGMxICogczIgKiBjMyArIHMxICogYzIgKiBzMzsKICAgICAgICB0aGlzLnogPSBjMSAqIGMyICogczMgLSBzMSAqIHMyICogYzM7CiAgICAgICAgdGhpcy53ID0gYzEgKiBjMiAqIGMzIC0gczEgKiBzMiAqIHMzOwogICAgICB9IGVsc2UgaWYgKG9yZGVyID09PSAnWFpZJykgewogICAgICAgIHRoaXMueCA9IHMxICogYzIgKiBjMyAtIGMxICogczIgKiBzMzsKICAgICAgICB0aGlzLnkgPSBjMSAqIHMyICogYzMgLSBzMSAqIGMyICogczM7CiAgICAgICAgdGhpcy56ID0gYzEgKiBjMiAqIHMzICsgczEgKiBzMiAqIGMzOwogICAgICAgIHRoaXMudyA9IGMxICogYzIgKiBjMyArIHMxICogczIgKiBzMzsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CgogICAgY2xvbmUoKSB7CiAgICAgIHJldHVybiBuZXcgUXVhdGVybmlvbih0aGlzLngsIHRoaXMueSwgdGhpcy56LCB0aGlzLncpOwogICAgfQogICAgLyoqCiAgICAgKiBQZXJmb3JtcyBhIHNwaGVyaWNhbCBsaW5lYXIgaW50ZXJwb2xhdGlvbiBiZXR3ZWVuIHR3byBxdWF0CiAgICAgKgogICAgICogQHBhcmFtIHRvUXVhdCBzZWNvbmQgb3BlcmFuZAogICAgICogQHBhcmFtIHQgaW50ZXJwb2xhdGlvbiBhbW91bnQgYmV0d2VlbiB0aGUgc2VsZiBxdWF0ZXJuaW9uIGFuZCB0b1F1YXQKICAgICAqIEBwYXJhbSB0YXJnZXQgQSBxdWF0ZXJuaW9uIHRvIHN0b3JlIHRoZSByZXN1bHQgaW4uIElmIG5vdCBwcm92aWRlZCwgYSBuZXcgb25lIHdpbGwgYmUgY3JlYXRlZC4KICAgICAqIEByZXR1cm5zIHtRdWF0ZXJuaW9ufSBUaGUgInRhcmdldCIgb2JqZWN0CiAgICAgKi8KCgogICAgc2xlcnAodG9RdWF0LCB0LCB0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFF1YXRlcm5pb24oKTsKICAgICAgfQoKICAgICAgY29uc3QgYXggPSB0aGlzLng7CiAgICAgIGNvbnN0IGF5ID0gdGhpcy55OwogICAgICBjb25zdCBheiA9IHRoaXMuejsKICAgICAgY29uc3QgYXcgPSB0aGlzLnc7CiAgICAgIGxldCBieCA9IHRvUXVhdC54OwogICAgICBsZXQgYnkgPSB0b1F1YXQueTsKICAgICAgbGV0IGJ6ID0gdG9RdWF0Lno7CiAgICAgIGxldCBidyA9IHRvUXVhdC53OwogICAgICBsZXQgb21lZ2E7CiAgICAgIGxldCBjb3NvbTsKICAgICAgbGV0IHNpbm9tOwogICAgICBsZXQgc2NhbGUwOwogICAgICBsZXQgc2NhbGUxOyAvLyBjYWxjIGNvc2luZQoKICAgICAgY29zb20gPSBheCAqIGJ4ICsgYXkgKiBieSArIGF6ICogYnogKyBhdyAqIGJ3OyAvLyBhZGp1c3Qgc2lnbnMgKGlmIG5lY2Vzc2FyeSkKCiAgICAgIGlmIChjb3NvbSA8IDAuMCkgewogICAgICAgIGNvc29tID0gLWNvc29tOwogICAgICAgIGJ4ID0gLWJ4OwogICAgICAgIGJ5ID0gLWJ5OwogICAgICAgIGJ6ID0gLWJ6OwogICAgICAgIGJ3ID0gLWJ3OwogICAgICB9IC8vIGNhbGN1bGF0ZSBjb2VmZmljaWVudHMKCgogICAgICBpZiAoMS4wIC0gY29zb20gPiAwLjAwMDAwMSkgewogICAgICAgIC8vIHN0YW5kYXJkIGNhc2UgKHNsZXJwKQogICAgICAgIG9tZWdhID0gTWF0aC5hY29zKGNvc29tKTsKICAgICAgICBzaW5vbSA9IE1hdGguc2luKG9tZWdhKTsKICAgICAgICBzY2FsZTAgPSBNYXRoLnNpbigoMS4wIC0gdCkgKiBvbWVnYSkgLyBzaW5vbTsKICAgICAgICBzY2FsZTEgPSBNYXRoLnNpbih0ICogb21lZ2EpIC8gc2lub207CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gImZyb20iIGFuZCAidG8iIHF1YXRlcm5pb25zIGFyZSB2ZXJ5IGNsb3NlCiAgICAgICAgLy8gIC4uLiBzbyB3ZSBjYW4gZG8gYSBsaW5lYXIgaW50ZXJwb2xhdGlvbgogICAgICAgIHNjYWxlMCA9IDEuMCAtIHQ7CiAgICAgICAgc2NhbGUxID0gdDsKICAgICAgfSAvLyBjYWxjdWxhdGUgZmluYWwgdmFsdWVzCgoKICAgICAgdGFyZ2V0LnggPSBzY2FsZTAgKiBheCArIHNjYWxlMSAqIGJ4OwogICAgICB0YXJnZXQueSA9IHNjYWxlMCAqIGF5ICsgc2NhbGUxICogYnk7CiAgICAgIHRhcmdldC56ID0gc2NhbGUwICogYXogKyBzY2FsZTEgKiBiejsKICAgICAgdGFyZ2V0LncgPSBzY2FsZTAgKiBhdyArIHNjYWxlMSAqIGJ3OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBSb3RhdGUgYW4gYWJzb2x1dGUgb3JpZW50YXRpb24gcXVhdGVybmlvbiBnaXZlbiBhbiBhbmd1bGFyIHZlbG9jaXR5IGFuZCBhIHRpbWUgc3RlcC4KICAgICAqLwoKCiAgICBpbnRlZ3JhdGUoYW5ndWxhclZlbG9jaXR5LCBkdCwgYW5ndWxhckZhY3RvciwgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IGF4ID0gYW5ndWxhclZlbG9jaXR5LnggKiBhbmd1bGFyRmFjdG9yLngsCiAgICAgICAgICAgIGF5ID0gYW5ndWxhclZlbG9jaXR5LnkgKiBhbmd1bGFyRmFjdG9yLnksCiAgICAgICAgICAgIGF6ID0gYW5ndWxhclZlbG9jaXR5LnogKiBhbmd1bGFyRmFjdG9yLnosCiAgICAgICAgICAgIGJ4ID0gdGhpcy54LAogICAgICAgICAgICBieSA9IHRoaXMueSwKICAgICAgICAgICAgYnogPSB0aGlzLnosCiAgICAgICAgICAgIGJ3ID0gdGhpcy53OwogICAgICBjb25zdCBoYWxmX2R0ID0gZHQgKiAwLjU7CiAgICAgIHRhcmdldC54ICs9IGhhbGZfZHQgKiAoYXggKiBidyArIGF5ICogYnogLSBheiAqIGJ5KTsKICAgICAgdGFyZ2V0LnkgKz0gaGFsZl9kdCAqIChheSAqIGJ3ICsgYXogKiBieCAtIGF4ICogYnopOwogICAgICB0YXJnZXQueiArPSBoYWxmX2R0ICogKGF6ICogYncgKyBheCAqIGJ5IC0gYXkgKiBieCk7CiAgICAgIHRhcmdldC53ICs9IGhhbGZfZHQgKiAoLWF4ICogYnggLSBheSAqIGJ5IC0gYXogKiBieik7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CgogIH0KICBjb25zdCBzZnZfdDEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNmdl90MiA9IG5ldyBWZWMzKCk7CgogIC8qKgogICAqIFRoZSBhdmFpbGFibGUgc2hhcGUgdHlwZXMuCiAgICovCiAgY29uc3QgU0hBUEVfVFlQRVMgPSB7CiAgICAvKiogU1BIRVJFICovCiAgICBTUEhFUkU6IDEsCgogICAgLyoqIFBMQU5FICovCiAgICBQTEFORTogMiwKCiAgICAvKiogQk9YICovCiAgICBCT1g6IDQsCgogICAgLyoqIENPTVBPVU5EICovCiAgICBDT01QT1VORDogOCwKCiAgICAvKiogQ09OVkVYUE9MWUhFRFJPTiAqLwogICAgQ09OVkVYUE9MWUhFRFJPTjogMTYsCgogICAgLyoqIEhFSUdIVEZJRUxEICovCiAgICBIRUlHSFRGSUVMRDogMzIsCgogICAgLyoqIFBBUlRJQ0xFICovCiAgICBQQVJUSUNMRTogNjQsCgogICAgLyoqIENZTElOREVSICovCiAgICBDWUxJTkRFUjogMTI4LAoKICAgIC8qKiBUUklNRVNIICovCiAgICBUUklNRVNIOiAyNTYKICB9OwogIC8qKgogICAqIFNoYXBlVHlwZQogICAqLwoKICAvKioKICAgKiBCYXNlIGNsYXNzIGZvciBzaGFwZXMKICAgKi8KICBjbGFzcyBTaGFwZSB7CiAgICAvKioKICAgICAqIElkZW50aWZpZXIgb2YgdGhlIFNoYXBlLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgdHlwZSBvZiB0aGlzIHNoYXBlLiBNdXN0IGJlIHNldCB0byBhbiBpbnQgPiAwIGJ5IHN1YmNsYXNzZXMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBsb2NhbCBib3VuZGluZyBzcGhlcmUgcmFkaXVzIG9mIHRoaXMgc2hhcGUuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFdoZXRoZXIgdG8gcHJvZHVjZSBjb250YWN0IGZvcmNlcyB3aGVuIGluIGNvbnRhY3Qgd2l0aCBvdGhlciBib2RpZXMuIE5vdGUgdGhhdCBjb250YWN0cyB3aWxsIGJlIGdlbmVyYXRlZCwgYnV0IHRoZXkgd2lsbCBiZSBkaXNhYmxlZC4KICAgICAqIEBkZWZhdWx0IHRydWUKICAgICAqLwoKICAgIC8qKgogICAgICogQGRlZmF1bHQgMQogICAgICovCgogICAgLyoqCiAgICAgKiBAZGVmYXVsdCAtMQogICAgICovCgogICAgLyoqCiAgICAgKiBPcHRpb25hbCBtYXRlcmlhbCBvZiB0aGUgc2hhcGUgdGhhdCByZWd1bGF0ZXMgY29udGFjdCBwcm9wZXJ0aWVzLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgYm9keSB0byB3aGljaCB0aGUgc2hhcGUgaXMgYWRkZWQgdG8uCiAgICAgKi8KCiAgICAvKioKICAgICAqIEFsbCB0aGUgU2hhcGUgdHlwZXMuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgdGhpcy5pZCA9IFNoYXBlLmlkQ291bnRlcisrOwogICAgICB0aGlzLnR5cGUgPSBvcHRpb25zLnR5cGUgfHwgMDsKICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IDA7CiAgICAgIHRoaXMuY29sbGlzaW9uUmVzcG9uc2UgPSBvcHRpb25zLmNvbGxpc2lvblJlc3BvbnNlID8gb3B0aW9ucy5jb2xsaXNpb25SZXNwb25zZSA6IHRydWU7CiAgICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyR3JvdXAgPSBvcHRpb25zLmNvbGxpc2lvbkZpbHRlckdyb3VwICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNvbGxpc2lvbkZpbHRlckdyb3VwIDogMTsKICAgICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJNYXNrID0gb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJNYXNrICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNvbGxpc2lvbkZpbHRlck1hc2sgOiAtMTsKICAgICAgdGhpcy5tYXRlcmlhbCA9IG9wdGlvbnMubWF0ZXJpYWwgPyBvcHRpb25zLm1hdGVyaWFsIDogbnVsbDsKICAgICAgdGhpcy5ib2R5ID0gbnVsbDsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZXMgdGhlIGJvdW5kaW5nIHNwaGVyZSByYWRpdXMuCiAgICAgKiBUaGUgcmVzdWx0IGlzIHN0b3JlZCBpbiB0aGUgcHJvcGVydHkgYC5ib3VuZGluZ1NwaGVyZVJhZGl1c2AKICAgICAqLwoKCiAgICB1cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpIHsKICAgICAgdGhyb3cgYGNvbXB1dGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpIG5vdCBpbXBsZW1lbnRlZCBmb3Igc2hhcGUgdHlwZSAke3RoaXMudHlwZX1gOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIHZvbHVtZSBvZiB0aGlzIHNoYXBlCiAgICAgKi8KCgogICAgdm9sdW1lKCkgewogICAgICB0aHJvdyBgdm9sdW1lKCkgbm90IGltcGxlbWVudGVkIGZvciBzaGFwZSB0eXBlICR7dGhpcy50eXBlfWA7CiAgICB9CiAgICAvKioKICAgICAqIENhbGN1bGF0ZXMgdGhlIGluZXJ0aWEgaW4gdGhlIGxvY2FsIGZyYW1lIGZvciB0aGlzIHNoYXBlLgogICAgICogQHNlZSBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0xpc3Rfb2ZfbW9tZW50c19vZl9pbmVydGlhCiAgICAgKi8KCgogICAgY2FsY3VsYXRlTG9jYWxJbmVydGlhKG1hc3MsIHRhcmdldCkgewogICAgICB0aHJvdyBgY2FsY3VsYXRlTG9jYWxJbmVydGlhKCkgbm90IGltcGxlbWVudGVkIGZvciBzaGFwZSB0eXBlICR7dGhpcy50eXBlfWA7CiAgICB9CiAgICAvKioKICAgICAqIEB0b2RvIHVzZSBhYnN0cmFjdCBmb3IgdGhlc2Uga2luZCBvZiBtZXRob2RzCiAgICAgKi8KCgogICAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHsKICAgICAgdGhyb3cgYGNhbGN1bGF0ZVdvcmxkQUFCQigpIG5vdCBpbXBsZW1lbnRlZCBmb3Igc2hhcGUgdHlwZSAke3RoaXMudHlwZX1gOwogICAgfQoKICB9CiAgU2hhcGUuaWRDb3VudGVyID0gMDsKICBTaGFwZS50eXBlcyA9IFNIQVBFX1RZUEVTOwoKICAvKioKICAgKiBUcmFuc2Zvcm1hdGlvbiB1dGlsaXRpZXMuCiAgICovCiAgY2xhc3MgVHJhbnNmb3JtIHsKICAgIC8qKgogICAgICogcG9zaXRpb24KICAgICAqLwoKICAgIC8qKgogICAgICogcXVhdGVybmlvbgogICAgICovCiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIHRoaXMucG9zaXRpb24gPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnF1YXRlcm5pb24gPSBuZXcgUXVhdGVybmlvbigpOwoKICAgICAgaWYgKG9wdGlvbnMucG9zaXRpb24pIHsKICAgICAgICB0aGlzLnBvc2l0aW9uLmNvcHkob3B0aW9ucy5wb3NpdGlvbik7CiAgICAgIH0KCiAgICAgIGlmIChvcHRpb25zLnF1YXRlcm5pb24pIHsKICAgICAgICB0aGlzLnF1YXRlcm5pb24uY29weShvcHRpb25zLnF1YXRlcm5pb24pOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhIGdsb2JhbCBwb2ludCBpbiBsb2NhbCB0cmFuc2Zvcm0gY29vcmRpbmF0ZXMuCiAgICAgKi8KCgogICAgcG9pbnRUb0xvY2FsKHdvcmxkUG9pbnQsIHJlc3VsdCkgewogICAgICByZXR1cm4gVHJhbnNmb3JtLnBvaW50VG9Mb2NhbEZyYW1lKHRoaXMucG9zaXRpb24sIHRoaXMucXVhdGVybmlvbiwgd29ybGRQb2ludCwgcmVzdWx0KTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IGEgbG9jYWwgcG9pbnQgaW4gZ2xvYmFsIHRyYW5zZm9ybSBjb29yZGluYXRlcy4KICAgICAqLwoKCiAgICBwb2ludFRvV29ybGQobG9jYWxQb2ludCwgcmVzdWx0KSB7CiAgICAgIHJldHVybiBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUodGhpcy5wb3NpdGlvbiwgdGhpcy5xdWF0ZXJuaW9uLCBsb2NhbFBvaW50LCByZXN1bHQpOwogICAgfQogICAgLyoqCiAgICAgKiB2ZWN0b3JUb1dvcmxkRnJhbWUKICAgICAqLwoKCiAgICB2ZWN0b3JUb1dvcmxkRnJhbWUobG9jYWxWZWN0b3IsIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIHsKICAgICAgICByZXN1bHQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICB0aGlzLnF1YXRlcm5pb24udm11bHQobG9jYWxWZWN0b3IsIHJlc3VsdCk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIHBvaW50VG9Mb2NhbEZyYW1lCiAgICAgKi8KCgogICAgc3RhdGljIHBvaW50VG9Mb2NhbEZyYW1lKHBvc2l0aW9uLCBxdWF0ZXJuaW9uLCB3b3JsZFBvaW50LCByZXN1bHQpIHsKICAgICAgaWYgKHJlc3VsdCA9PT0gdm9pZCAwKSB7CiAgICAgICAgcmVzdWx0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgd29ybGRQb2ludC52c3ViKHBvc2l0aW9uLCByZXN1bHQpOwogICAgICBxdWF0ZXJuaW9uLmNvbmp1Z2F0ZSh0bXBRdWF0JDEpOwogICAgICB0bXBRdWF0JDEudm11bHQocmVzdWx0LCByZXN1bHQpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiBwb2ludFRvV29ybGRGcmFtZQogICAgICovCgoKICAgIHN0YXRpYyBwb2ludFRvV29ybGRGcmFtZShwb3NpdGlvbiwgcXVhdGVybmlvbiwgbG9jYWxQb2ludCwgcmVzdWx0KSB7CiAgICAgIGlmIChyZXN1bHQgPT09IHZvaWQgMCkgewogICAgICAgIHJlc3VsdCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIHF1YXRlcm5pb24udm11bHQobG9jYWxQb2ludCwgcmVzdWx0KTsKICAgICAgcmVzdWx0LnZhZGQocG9zaXRpb24sIHJlc3VsdCk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIHZlY3RvclRvV29ybGRGcmFtZQogICAgICovCgoKICAgIHN0YXRpYyB2ZWN0b3JUb1dvcmxkRnJhbWUocXVhdGVybmlvbiwgbG9jYWxWZWN0b3IsIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIHsKICAgICAgICByZXN1bHQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBxdWF0ZXJuaW9uLnZtdWx0KGxvY2FsVmVjdG9yLCByZXN1bHQpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiB2ZWN0b3JUb0xvY2FsRnJhbWUKICAgICAqLwoKCiAgICBzdGF0aWMgdmVjdG9yVG9Mb2NhbEZyYW1lKHBvc2l0aW9uLCBxdWF0ZXJuaW9uLCB3b3JsZFZlY3RvciwgcmVzdWx0KSB7CiAgICAgIGlmIChyZXN1bHQgPT09IHZvaWQgMCkgewogICAgICAgIHJlc3VsdCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIHF1YXRlcm5pb24udyAqPSAtMTsKICAgICAgcXVhdGVybmlvbi52bXVsdCh3b3JsZFZlY3RvciwgcmVzdWx0KTsKICAgICAgcXVhdGVybmlvbi53ICo9IC0xOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQoKICB9CiAgY29uc3QgdG1wUXVhdCQxID0gbmV3IFF1YXRlcm5pb24oKTsKCiAgLyoqCiAgICogQSBzZXQgb2YgcG9seWdvbnMgZGVzY3JpYmluZyBhIGNvbnZleCBzaGFwZS4KICAgKgogICAqIFRoZSBzaGFwZSBNVVNUIGJlIGNvbnZleCBmb3IgdGhlIGNvZGUgdG8gd29yayBwcm9wZXJseS4gTm8gcG9seWdvbnMgbWF5IGJlIGNvcGxhbmFyIChjb250YWluZWQKICAgKiBpbiB0aGUgc2FtZSAzRCBwbGFuZSksIGluc3RlYWQgdGhlc2Ugc2hvdWxkIGJlIG1lcmdlZCBpbnRvIG9uZSBwb2x5Z29uLgogICAqCiAgICogQGF1dGhvciBxaWFvIC8gaHR0cHM6Ly9naXRodWIuY29tL3FpYW8gKG9yaWdpbmFsIGF1dGhvciwgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9xaWFvL3RocmVlLmpzL2NvbW1pdC84NTAyNmYwYzc2OWU0MDAwMTQ4YTY3ZDQ1YTllOWI5YzUxMDg4MzZmKQogICAqIEBhdXRob3Igc2NodGVwcGUgLyBodHRwczovL2dpdGh1Yi5jb20vc2NodGVwcGUKICAgKiBAc2VlIGh0dHBzOi8vd3d3LmFsdGRldmJsb2dhZGF5LmNvbS8yMDExLzA1LzEzL2NvbnRhY3QtZ2VuZXJhdGlvbi1iZXR3ZWVuLTNkLWNvbnZleC1tZXNoZXMvCiAgICoKICAgKiBAdG9kbyBNb3ZlIHRoZSBjbGlwcGluZyBmdW5jdGlvbnMgdG8gQ29udGFjdEdlbmVyYXRvcj8KICAgKiBAdG9kbyBBdXRvbWF0aWNhbGx5IG1lcmdlIGNvcGxhbmFyIHBvbHlnb25zIGluIGNvbnN0cnVjdG9yLgogICAqIEBleGFtcGxlCiAgICogICAgIGNvbnN0IGNvbnZleFNoYXBlID0gbmV3IENBTk5PTi5Db252ZXhQb2x5aGVkcm9uKHsgdmVydGljZXMsIGZhY2VzIH0pCiAgICogICAgIGNvbnN0IGNvbnZleEJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoeyBtYXNzOiAxLCBzaGFwZTogY29udmV4U2hhcGUgfSkKICAgKiAgICAgd29ybGQuYWRkQm9keShjb252ZXhCb2R5KQogICAqLwogIGNsYXNzIENvbnZleFBvbHloZWRyb24gZXh0ZW5kcyBTaGFwZSB7CiAgICAvKiogdmVydGljZXMgKi8KCiAgICAvKioKICAgICAqIEFycmF5IG9mIGludGVnZXIgYXJyYXlzLCBpbmRpY2F0aW5nIHdoaWNoIHZlcnRpY2VzIGVhY2ggZmFjZSBjb25zaXN0cyBvZgogICAgICovCgogICAgLyoqIGZhY2VOb3JtYWxzICovCgogICAgLyoqIHdvcmxkVmVydGljZXMgKi8KCiAgICAvKiogd29ybGRWZXJ0aWNlc05lZWRzVXBkYXRlICovCgogICAgLyoqIHdvcmxkRmFjZU5vcm1hbHMgKi8KCiAgICAvKiogd29ybGRGYWNlTm9ybWFsc05lZWRzVXBkYXRlICovCgogICAgLyoqCiAgICAgKiBJZiBnaXZlbiwgdGhlc2UgbG9jYWxseSBkZWZpbmVkLCBub3JtYWxpemVkIGF4ZXMgYXJlIHRoZSBvbmx5IG9uZXMgYmVpbmcgY2hlY2tlZCB3aGVuIGRvaW5nIHNlcGFyYXRpbmcgYXhpcyBjaGVjay4KICAgICAqLwoKICAgIC8qKiB1bmlxdWVFZGdlcyAqLwoKICAgIC8qKgogICAgICogQHBhcmFtIHZlcnRpY2VzIEFuIGFycmF5IG9mIFZlYzMncwogICAgICogQHBhcmFtIGZhY2VzIEFycmF5IG9mIGludGVnZXIgYXJyYXlzLCBkZXNjcmliaW5nIHdoaWNoIHZlcnRpY2VzIHRoYXQgaXMgaW5jbHVkZWQgaW4gZWFjaCBmYWNlLgogICAgICovCiAgICBjb25zdHJ1Y3Rvcihwcm9wcykgewogICAgICBpZiAocHJvcHMgPT09IHZvaWQgMCkgewogICAgICAgIHByb3BzID0ge307CiAgICAgIH0KCiAgICAgIGNvbnN0IHsKICAgICAgICB2ZXJ0aWNlcyA9IFtdLAogICAgICAgIGZhY2VzID0gW10sCiAgICAgICAgbm9ybWFscyA9IFtdLAogICAgICAgIGF4ZXMsCiAgICAgICAgYm91bmRpbmdTcGhlcmVSYWRpdXMKICAgICAgfSA9IHByb3BzOwogICAgICBzdXBlcih7CiAgICAgICAgdHlwZTogU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTgogICAgICB9KTsKICAgICAgdGhpcy52ZXJ0aWNlcyA9IHZlcnRpY2VzOwogICAgICB0aGlzLmZhY2VzID0gZmFjZXM7CiAgICAgIHRoaXMuZmFjZU5vcm1hbHMgPSBub3JtYWxzOwoKICAgICAgaWYgKHRoaXMuZmFjZU5vcm1hbHMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgdGhpcy5jb21wdXRlTm9ybWFscygpOwogICAgICB9CgogICAgICBpZiAoIWJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7CiAgICAgICAgdGhpcy51cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgPSBib3VuZGluZ1NwaGVyZVJhZGl1czsKICAgICAgfQoKICAgICAgdGhpcy53b3JsZFZlcnRpY2VzID0gW107IC8vIFdvcmxkIHRyYW5zZm9ybWVkIHZlcnNpb24gb2YgLnZlcnRpY2VzCgogICAgICB0aGlzLndvcmxkVmVydGljZXNOZWVkc1VwZGF0ZSA9IHRydWU7CiAgICAgIHRoaXMud29ybGRGYWNlTm9ybWFscyA9IFtdOyAvLyBXb3JsZCB0cmFuc2Zvcm1lZCB2ZXJzaW9uIG9mIC5mYWNlTm9ybWFscwoKICAgICAgdGhpcy53b3JsZEZhY2VOb3JtYWxzTmVlZHNVcGRhdGUgPSB0cnVlOwogICAgICB0aGlzLnVuaXF1ZUF4ZXMgPSBheGVzID8gYXhlcy5zbGljZSgpIDogbnVsbDsKICAgICAgdGhpcy51bmlxdWVFZGdlcyA9IFtdOwogICAgICB0aGlzLmNvbXB1dGVFZGdlcygpOwogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlcyB1bmlxdWVFZGdlcwogICAgICovCgoKICAgIGNvbXB1dGVFZGdlcygpIHsKICAgICAgY29uc3QgZmFjZXMgPSB0aGlzLmZhY2VzOwogICAgICBjb25zdCB2ZXJ0aWNlcyA9IHRoaXMudmVydGljZXM7CiAgICAgIGNvbnN0IGVkZ2VzID0gdGhpcy51bmlxdWVFZGdlczsKICAgICAgZWRnZXMubGVuZ3RoID0gMDsKICAgICAgY29uc3QgZWRnZSA9IG5ldyBWZWMzKCk7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gZmFjZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBmYWNlID0gZmFjZXNbaV07CiAgICAgICAgY29uc3QgbnVtVmVydGljZXMgPSBmYWNlLmxlbmd0aDsKCiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogIT09IG51bVZlcnRpY2VzOyBqKyspIHsKICAgICAgICAgIGNvbnN0IGsgPSAoaiArIDEpICUgbnVtVmVydGljZXM7CiAgICAgICAgICB2ZXJ0aWNlc1tmYWNlW2pdXS52c3ViKHZlcnRpY2VzW2ZhY2Vba11dLCBlZGdlKTsKICAgICAgICAgIGVkZ2Uubm9ybWFsaXplKCk7CiAgICAgICAgICBsZXQgZm91bmQgPSBmYWxzZTsKCiAgICAgICAgICBmb3IgKGxldCBwID0gMDsgcCAhPT0gZWRnZXMubGVuZ3RoOyBwKyspIHsKICAgICAgICAgICAgaWYgKGVkZ2VzW3BdLmFsbW9zdEVxdWFscyhlZGdlKSB8fCBlZGdlc1twXS5hbG1vc3RFcXVhbHMoZWRnZSkpIHsKICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoIWZvdW5kKSB7CiAgICAgICAgICAgIGVkZ2VzLnB1c2goZWRnZS5jbG9uZSgpKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZSB0aGUgbm9ybWFscyBvZiB0aGUgZmFjZXMuCiAgICAgKiBXaWxsIHJldXNlIGV4aXN0aW5nIFZlYzMgb2JqZWN0cyBpbiB0aGUgYGZhY2VOb3JtYWxzYCBhcnJheSBpZiB0aGV5IGV4aXN0LgogICAgICovCgoKICAgIGNvbXB1dGVOb3JtYWxzKCkgewogICAgICB0aGlzLmZhY2VOb3JtYWxzLmxlbmd0aCA9IHRoaXMuZmFjZXMubGVuZ3RoOyAvLyBHZW5lcmF0ZSBub3JtYWxzCgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZmFjZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAvLyBDaGVjayBzbyBhbGwgdmVydGljZXMgZXhpc3RzIGZvciB0aGlzIGZhY2UKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMuZmFjZXNbaV0ubGVuZ3RoOyBqKyspIHsKICAgICAgICAgIGlmICghdGhpcy52ZXJ0aWNlc1t0aGlzLmZhY2VzW2ldW2pdXSkgewogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFZlcnRleCAke3RoaXMuZmFjZXNbaV1bal19IG5vdCBmb3VuZCFgKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGNvbnN0IG4gPSB0aGlzLmZhY2VOb3JtYWxzW2ldIHx8IG5ldyBWZWMzKCk7CiAgICAgICAgdGhpcy5nZXRGYWNlTm9ybWFsKGksIG4pOwogICAgICAgIG4ubmVnYXRlKG4pOwogICAgICAgIHRoaXMuZmFjZU5vcm1hbHNbaV0gPSBuOwogICAgICAgIGNvbnN0IHZlcnRleCA9IHRoaXMudmVydGljZXNbdGhpcy5mYWNlc1tpXVswXV07CgogICAgICAgIGlmIChuLmRvdCh2ZXJ0ZXgpIDwgMCkgewogICAgICAgICAgY29uc29sZS5lcnJvcihgLmZhY2VOb3JtYWxzWyR7aX1dID0gVmVjMygke24udG9TdHJpbmcoKX0pIGxvb2tzIGxpa2UgaXQgcG9pbnRzIGludG8gdGhlIHNoYXBlPyBUaGUgdmVydGljZXMgZm9sbG93LiBNYWtlIHN1cmUgdGhleSBhcmUgb3JkZXJlZCBDQ1cgYXJvdW5kIHRoZSBub3JtYWwsIHVzaW5nIHRoZSByaWdodCBoYW5kIHJ1bGUuYCk7CgogICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLmZhY2VzW2ldLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgIGNvbnNvbGUud2FybihgLnZlcnRpY2VzWyR7dGhpcy5mYWNlc1tpXVtqXX1dID0gVmVjMygke3RoaXMudmVydGljZXNbdGhpcy5mYWNlc1tpXVtqXV0udG9TdHJpbmcoKX0pYCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIENvbXB1dGUgdGhlIG5vcm1hbCBvZiBhIGZhY2UgZnJvbSBpdHMgdmVydGljZXMKICAgICAqLwoKCiAgICBnZXRGYWNlTm9ybWFsKGksIHRhcmdldCkgewogICAgICBjb25zdCBmID0gdGhpcy5mYWNlc1tpXTsKICAgICAgY29uc3QgdmEgPSB0aGlzLnZlcnRpY2VzW2ZbMF1dOwogICAgICBjb25zdCB2YiA9IHRoaXMudmVydGljZXNbZlsxXV07CiAgICAgIGNvbnN0IHZjID0gdGhpcy52ZXJ0aWNlc1tmWzJdXTsKICAgICAgQ29udmV4UG9seWhlZHJvbi5jb21wdXRlTm9ybWFsKHZhLCB2YiwgdmMsIHRhcmdldCk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBmYWNlIG5vcm1hbCBnaXZlbiAzIHZlcnRpY2VzCiAgICAgKi8KCgogICAgc3RhdGljIGNvbXB1dGVOb3JtYWwodmEsIHZiLCB2YywgdGFyZ2V0KSB7CiAgICAgIGNvbnN0IGNiID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgYWIgPSBuZXcgVmVjMygpOwogICAgICB2Yi52c3ViKHZhLCBhYik7CiAgICAgIHZjLnZzdWIodmIsIGNiKTsKICAgICAgY2IuY3Jvc3MoYWIsIHRhcmdldCk7CgogICAgICBpZiAoIXRhcmdldC5pc1plcm8oKSkgewogICAgICAgIHRhcmdldC5ub3JtYWxpemUoKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBAcGFyYW0gbWluRGlzdCBDbGFtcCBkaXN0YW5jZQogICAgICogQHBhcmFtIHJlc3VsdCBUaGUgYW4gYXJyYXkgb2YgY29udGFjdCBwb2ludCBvYmplY3RzLCBzZWUgY2xpcEZhY2VBZ2FpbnN0SHVsbAogICAgICovCgoKICAgIGNsaXBBZ2FpbnN0SHVsbChwb3NBLCBxdWF0QSwgaHVsbEIsIHBvc0IsIHF1YXRCLCBzZXBhcmF0aW5nTm9ybWFsLCBtaW5EaXN0LCBtYXhEaXN0LCByZXN1bHQpIHsKICAgICAgY29uc3QgV29ybGROb3JtYWwgPSBuZXcgVmVjMygpOwogICAgICBsZXQgY2xvc2VzdEZhY2VCID0gLTE7CiAgICAgIGxldCBkbWF4ID0gLU51bWJlci5NQVhfVkFMVUU7CgogICAgICBmb3IgKGxldCBmYWNlID0gMDsgZmFjZSA8IGh1bGxCLmZhY2VzLmxlbmd0aDsgZmFjZSsrKSB7CiAgICAgICAgV29ybGROb3JtYWwuY29weShodWxsQi5mYWNlTm9ybWFsc1tmYWNlXSk7CiAgICAgICAgcXVhdEIudm11bHQoV29ybGROb3JtYWwsIFdvcmxkTm9ybWFsKTsKICAgICAgICBjb25zdCBkID0gV29ybGROb3JtYWwuZG90KHNlcGFyYXRpbmdOb3JtYWwpOwoKICAgICAgICBpZiAoZCA+IGRtYXgpIHsKICAgICAgICAgIGRtYXggPSBkOwogICAgICAgICAgY2xvc2VzdEZhY2VCID0gZmFjZTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGNvbnN0IHdvcmxkVmVydHNCMSA9IFtdOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBodWxsQi5mYWNlc1tjbG9zZXN0RmFjZUJdLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3QgYiA9IGh1bGxCLnZlcnRpY2VzW2h1bGxCLmZhY2VzW2Nsb3Nlc3RGYWNlQl1baV1dOwogICAgICAgIGNvbnN0IHdvcmxkYiA9IG5ldyBWZWMzKCk7CiAgICAgICAgd29ybGRiLmNvcHkoYik7CiAgICAgICAgcXVhdEIudm11bHQod29ybGRiLCB3b3JsZGIpOwogICAgICAgIHBvc0IudmFkZCh3b3JsZGIsIHdvcmxkYik7CiAgICAgICAgd29ybGRWZXJ0c0IxLnB1c2god29ybGRiKTsKICAgICAgfQoKICAgICAgaWYgKGNsb3Nlc3RGYWNlQiA+PSAwKSB7CiAgICAgICAgdGhpcy5jbGlwRmFjZUFnYWluc3RIdWxsKHNlcGFyYXRpbmdOb3JtYWwsIHBvc0EsIHF1YXRBLCB3b3JsZFZlcnRzQjEsIG1pbkRpc3QsIG1heERpc3QsIHJlc3VsdCk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogRmluZCB0aGUgc2VwYXJhdGluZyBheGlzIGJldHdlZW4gdGhpcyBodWxsIGFuZCBhbm90aGVyCiAgICAgKiBAcGFyYW0gdGFyZ2V0IFRoZSB0YXJnZXQgdmVjdG9yIHRvIHNhdmUgdGhlIGF4aXMgaW4KICAgICAqIEByZXR1cm4gUmV0dXJucyBmYWxzZSBpZiBhIHNlcGFyYXRpb24gaXMgZm91bmQsIGVsc2UgdHJ1ZQogICAgICovCgoKICAgIGZpbmRTZXBhcmF0aW5nQXhpcyhodWxsQiwgcG9zQSwgcXVhdEEsIHBvc0IsIHF1YXRCLCB0YXJnZXQsIGZhY2VMaXN0QSwgZmFjZUxpc3RCKSB7CiAgICAgIGNvbnN0IGZhY2VBTm9ybWFsV1MzID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgV29ybGRub3JtYWwxID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgZGVsdGFDID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3Qgd29ybGRFZGdlMCA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHdvcmxkRWRnZTEgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBDcm9zcyA9IG5ldyBWZWMzKCk7CiAgICAgIGxldCBkbWluID0gTnVtYmVyLk1BWF9WQUxVRTsKICAgICAgY29uc3QgaHVsbEEgPSB0aGlzOwoKICAgICAgaWYgKCFodWxsQS51bmlxdWVBeGVzKSB7CiAgICAgICAgY29uc3QgbnVtRmFjZXNBID0gZmFjZUxpc3RBID8gZmFjZUxpc3RBLmxlbmd0aCA6IGh1bGxBLmZhY2VzLmxlbmd0aDsgLy8gVGVzdCBmYWNlIG5vcm1hbHMgZnJvbSBodWxsQQoKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bUZhY2VzQTsgaSsrKSB7CiAgICAgICAgICBjb25zdCBmaSA9IGZhY2VMaXN0QSA/IGZhY2VMaXN0QVtpXSA6IGk7IC8vIEdldCB3b3JsZCBmYWNlIG5vcm1hbAoKICAgICAgICAgIGZhY2VBTm9ybWFsV1MzLmNvcHkoaHVsbEEuZmFjZU5vcm1hbHNbZmldKTsKICAgICAgICAgIHF1YXRBLnZtdWx0KGZhY2VBTm9ybWFsV1MzLCBmYWNlQU5vcm1hbFdTMyk7CiAgICAgICAgICBjb25zdCBkID0gaHVsbEEudGVzdFNlcEF4aXMoZmFjZUFOb3JtYWxXUzMsIGh1bGxCLCBwb3NBLCBxdWF0QSwgcG9zQiwgcXVhdEIpOwoKICAgICAgICAgIGlmIChkID09PSBmYWxzZSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGQgPCBkbWluKSB7CiAgICAgICAgICAgIGRtaW4gPSBkOwogICAgICAgICAgICB0YXJnZXQuY29weShmYWNlQU5vcm1hbFdTMyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIC8vIFRlc3QgdW5pcXVlIGF4ZXMKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gaHVsbEEudW5pcXVlQXhlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgLy8gR2V0IHdvcmxkIGF4aXMKICAgICAgICAgIHF1YXRBLnZtdWx0KGh1bGxBLnVuaXF1ZUF4ZXNbaV0sIGZhY2VBTm9ybWFsV1MzKTsKICAgICAgICAgIGNvbnN0IGQgPSBodWxsQS50ZXN0U2VwQXhpcyhmYWNlQU5vcm1hbFdTMywgaHVsbEIsIHBvc0EsIHF1YXRBLCBwb3NCLCBxdWF0Qik7CgogICAgICAgICAgaWYgKGQgPT09IGZhbHNlKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoZCA8IGRtaW4pIHsKICAgICAgICAgICAgZG1pbiA9IGQ7CiAgICAgICAgICAgIHRhcmdldC5jb3B5KGZhY2VBTm9ybWFsV1MzKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICghaHVsbEIudW5pcXVlQXhlcykgewogICAgICAgIC8vIFRlc3QgZmFjZSBub3JtYWxzIGZyb20gaHVsbEIKICAgICAgICBjb25zdCBudW1GYWNlc0IgPSBmYWNlTGlzdEIgPyBmYWNlTGlzdEIubGVuZ3RoIDogaHVsbEIuZmFjZXMubGVuZ3RoOwoKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bUZhY2VzQjsgaSsrKSB7CiAgICAgICAgICBjb25zdCBmaSA9IGZhY2VMaXN0QiA/IGZhY2VMaXN0QltpXSA6IGk7CiAgICAgICAgICBXb3JsZG5vcm1hbDEuY29weShodWxsQi5mYWNlTm9ybWFsc1tmaV0pOwogICAgICAgICAgcXVhdEIudm11bHQoV29ybGRub3JtYWwxLCBXb3JsZG5vcm1hbDEpOwogICAgICAgICAgY29uc3QgZCA9IGh1bGxBLnRlc3RTZXBBeGlzKFdvcmxkbm9ybWFsMSwgaHVsbEIsIHBvc0EsIHF1YXRBLCBwb3NCLCBxdWF0Qik7CgogICAgICAgICAgaWYgKGQgPT09IGZhbHNlKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoZCA8IGRtaW4pIHsKICAgICAgICAgICAgZG1pbiA9IGQ7CiAgICAgICAgICAgIHRhcmdldC5jb3B5KFdvcmxkbm9ybWFsMSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIC8vIFRlc3QgdW5pcXVlIGF4ZXMgaW4gQgogICAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBodWxsQi51bmlxdWVBeGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBxdWF0Qi52bXVsdChodWxsQi51bmlxdWVBeGVzW2ldLCBXb3JsZG5vcm1hbDEpOwogICAgICAgICAgY29uc3QgZCA9IGh1bGxBLnRlc3RTZXBBeGlzKFdvcmxkbm9ybWFsMSwgaHVsbEIsIHBvc0EsIHF1YXRBLCBwb3NCLCBxdWF0Qik7CgogICAgICAgICAgaWYgKGQgPT09IGZhbHNlKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoZCA8IGRtaW4pIHsKICAgICAgICAgICAgZG1pbiA9IGQ7CiAgICAgICAgICAgIHRhcmdldC5jb3B5KFdvcmxkbm9ybWFsMSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IC8vIFRlc3QgZWRnZXMKCgogICAgICBmb3IgKGxldCBlMCA9IDA7IGUwICE9PSBodWxsQS51bmlxdWVFZGdlcy5sZW5ndGg7IGUwKyspIHsKICAgICAgICAvLyBHZXQgd29ybGQgZWRnZQogICAgICAgIHF1YXRBLnZtdWx0KGh1bGxBLnVuaXF1ZUVkZ2VzW2UwXSwgd29ybGRFZGdlMCk7CgogICAgICAgIGZvciAobGV0IGUxID0gMDsgZTEgIT09IGh1bGxCLnVuaXF1ZUVkZ2VzLmxlbmd0aDsgZTErKykgewogICAgICAgICAgLy8gR2V0IHdvcmxkIGVkZ2UgMgogICAgICAgICAgcXVhdEIudm11bHQoaHVsbEIudW5pcXVlRWRnZXNbZTFdLCB3b3JsZEVkZ2UxKTsKICAgICAgICAgIHdvcmxkRWRnZTAuY3Jvc3Mod29ybGRFZGdlMSwgQ3Jvc3MpOwoKICAgICAgICAgIGlmICghQ3Jvc3MuYWxtb3N0WmVybygpKSB7CiAgICAgICAgICAgIENyb3NzLm5vcm1hbGl6ZSgpOwogICAgICAgICAgICBjb25zdCBkaXN0ID0gaHVsbEEudGVzdFNlcEF4aXMoQ3Jvc3MsIGh1bGxCLCBwb3NBLCBxdWF0QSwgcG9zQiwgcXVhdEIpOwoKICAgICAgICAgICAgaWYgKGRpc3QgPT09IGZhbHNlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoZGlzdCA8IGRtaW4pIHsKICAgICAgICAgICAgICBkbWluID0gZGlzdDsKICAgICAgICAgICAgICB0YXJnZXQuY29weShDcm9zcyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHBvc0IudnN1Yihwb3NBLCBkZWx0YUMpOwoKICAgICAgaWYgKGRlbHRhQy5kb3QodGFyZ2V0KSA+IDAuMCkgewogICAgICAgIHRhcmdldC5uZWdhdGUodGFyZ2V0KTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAvKioKICAgICAqIFRlc3Qgc2VwYXJhdGluZyBheGlzIGFnYWluc3QgdHdvIGh1bGxzLiBCb3RoIGh1bGxzIGFyZSBwcm9qZWN0ZWQgb250byB0aGUgYXhpcyBhbmQgdGhlIG92ZXJsYXAgc2l6ZSBpcyByZXR1cm5lZCBpZiB0aGVyZSBpcyBvbmUuCiAgICAgKiBAcmV0dXJuIFRoZSBvdmVybGFwIGRlcHRoLCBvciBGQUxTRSBpZiBubyBwZW5ldHJhdGlvbi4KICAgICAqLwoKCiAgICB0ZXN0U2VwQXhpcyhheGlzLCBodWxsQiwgcG9zQSwgcXVhdEEsIHBvc0IsIHF1YXRCKSB7CiAgICAgIGNvbnN0IGh1bGxBID0gdGhpczsKICAgICAgQ29udmV4UG9seWhlZHJvbi5wcm9qZWN0KGh1bGxBLCBheGlzLCBwb3NBLCBxdWF0QSwgbWF4bWluQSk7CiAgICAgIENvbnZleFBvbHloZWRyb24ucHJvamVjdChodWxsQiwgYXhpcywgcG9zQiwgcXVhdEIsIG1heG1pbkIpOwogICAgICBjb25zdCBtYXhBID0gbWF4bWluQVswXTsKICAgICAgY29uc3QgbWluQSA9IG1heG1pbkFbMV07CiAgICAgIGNvbnN0IG1heEIgPSBtYXhtaW5CWzBdOwogICAgICBjb25zdCBtaW5CID0gbWF4bWluQlsxXTsKCiAgICAgIGlmIChtYXhBIDwgbWluQiB8fCBtYXhCIDwgbWluQSkgewogICAgICAgIHJldHVybiBmYWxzZTsgLy8gU2VwYXJhdGVkCiAgICAgIH0KCiAgICAgIGNvbnN0IGQwID0gbWF4QSAtIG1pbkI7CiAgICAgIGNvbnN0IGQxID0gbWF4QiAtIG1pbkE7CiAgICAgIGNvbnN0IGRlcHRoID0gZDAgPCBkMSA/IGQwIDogZDE7CiAgICAgIHJldHVybiBkZXB0aDsKICAgIH0KICAgIC8qKgogICAgICogY2FsY3VsYXRlTG9jYWxJbmVydGlhCiAgICAgKi8KCgogICAgY2FsY3VsYXRlTG9jYWxJbmVydGlhKG1hc3MsIHRhcmdldCkgewogICAgICAvLyBBcHByb3hpbWF0ZSB3aXRoIGJveCBpbmVydGlhCiAgICAgIC8vIEV4YWN0IGluZXJ0aWEgY2FsY3VsYXRpb24gaXMgb3ZlcmtpbGwsIGJ1dCBzZWUgaHR0cDovL2dlb21ldHJpY3Rvb2xzLmNvbS9Eb2N1bWVudGF0aW9uL1BvbHloZWRyYWxNYXNzUHJvcGVydGllcy5wZGYgZm9yIHRoZSBjb3JyZWN0IHdheSB0byBkbyBpdAogICAgICBjb25zdCBhYWJibWF4ID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgYWFiYm1pbiA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuY29tcHV0ZUxvY2FsQUFCQihhYWJibWluLCBhYWJibWF4KTsKICAgICAgY29uc3QgeCA9IGFhYmJtYXgueCAtIGFhYmJtaW4ueDsKICAgICAgY29uc3QgeSA9IGFhYmJtYXgueSAtIGFhYmJtaW4ueTsKICAgICAgY29uc3QgeiA9IGFhYmJtYXgueiAtIGFhYmJtaW4uejsKICAgICAgdGFyZ2V0LnggPSAxLjAgLyAxMi4wICogbWFzcyAqICgyICogeSAqIDIgKiB5ICsgMiAqIHogKiAyICogeik7CiAgICAgIHRhcmdldC55ID0gMS4wIC8gMTIuMCAqIG1hc3MgKiAoMiAqIHggKiAyICogeCArIDIgKiB6ICogMiAqIHopOwogICAgICB0YXJnZXQueiA9IDEuMCAvIDEyLjAgKiBtYXNzICogKDIgKiB5ICogMiAqIHkgKyAyICogeCAqIDIgKiB4KTsKICAgIH0KICAgIC8qKgogICAgICogQHBhcmFtIGZhY2VfaSBJbmRleCBvZiB0aGUgZmFjZQogICAgICovCgoKICAgIGdldFBsYW5lQ29uc3RhbnRPZkZhY2UoZmFjZV9pKSB7CiAgICAgIGNvbnN0IGYgPSB0aGlzLmZhY2VzW2ZhY2VfaV07CiAgICAgIGNvbnN0IG4gPSB0aGlzLmZhY2VOb3JtYWxzW2ZhY2VfaV07CiAgICAgIGNvbnN0IHYgPSB0aGlzLnZlcnRpY2VzW2ZbMF1dOwogICAgICBjb25zdCBjID0gLW4uZG90KHYpOwogICAgICByZXR1cm4gYzsKICAgIH0KICAgIC8qKgogICAgICogQ2xpcCBhIGZhY2UgYWdhaW5zdCBhIGh1bGwuCiAgICAgKiBAcGFyYW0gd29ybGRWZXJ0c0IxIEFuIGFycmF5IG9mIFZlYzMgd2l0aCB2ZXJ0aWNlcyBpbiB0aGUgd29ybGQgZnJhbWUuCiAgICAgKiBAcGFyYW0gbWluRGlzdCBEaXN0YW5jZSBjbGFtcGluZwogICAgICogQHBhcmFtIEFycmF5IHJlc3VsdCBBcnJheSB0byBzdG9yZSByZXN1bHRpbmcgY29udGFjdCBwb2ludHMgaW4uIFdpbGwgYmUgb2JqZWN0cyB3aXRoIHByb3BlcnRpZXM6IHBvaW50LCBkZXB0aCwgbm9ybWFsLiBUaGVzZSBhcmUgcmVwcmVzZW50ZWQgaW4gd29ybGQgY29vcmRpbmF0ZXMuCiAgICAgKi8KCgogICAgY2xpcEZhY2VBZ2FpbnN0SHVsbChzZXBhcmF0aW5nTm9ybWFsLCBwb3NBLCBxdWF0QSwgd29ybGRWZXJ0c0IxLCBtaW5EaXN0LCBtYXhEaXN0LCByZXN1bHQpIHsKICAgICAgY29uc3QgZmFjZUFOb3JtYWxXUyA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IGVkZ2UwID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgV29ybGRFZGdlMCA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHdvcmxkUGxhbmVBbm9ybWFsMSA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHBsYW5lTm9ybWFsV1MxID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3Qgd29ybGRBMSA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IGxvY2FsUGxhbmVOb3JtYWwgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBwbGFuZU5vcm1hbFdTID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgaHVsbEEgPSB0aGlzOwogICAgICBjb25zdCB3b3JsZFZlcnRzQjIgPSBbXTsKICAgICAgY29uc3QgcFZ0eEluID0gd29ybGRWZXJ0c0IxOwogICAgICBjb25zdCBwVnR4T3V0ID0gd29ybGRWZXJ0c0IyOwogICAgICBsZXQgY2xvc2VzdEZhY2VBID0gLTE7CiAgICAgIGxldCBkbWluID0gTnVtYmVyLk1BWF9WQUxVRTsgLy8gRmluZCB0aGUgZmFjZSB3aXRoIG5vcm1hbCBjbG9zZXN0IHRvIHRoZSBzZXBhcmF0aW5nIGF4aXMKCiAgICAgIGZvciAobGV0IGZhY2UgPSAwOyBmYWNlIDwgaHVsbEEuZmFjZXMubGVuZ3RoOyBmYWNlKyspIHsKICAgICAgICBmYWNlQU5vcm1hbFdTLmNvcHkoaHVsbEEuZmFjZU5vcm1hbHNbZmFjZV0pOwogICAgICAgIHF1YXRBLnZtdWx0KGZhY2VBTm9ybWFsV1MsIGZhY2VBTm9ybWFsV1MpOwogICAgICAgIGNvbnN0IGQgPSBmYWNlQU5vcm1hbFdTLmRvdChzZXBhcmF0aW5nTm9ybWFsKTsKCiAgICAgICAgaWYgKGQgPCBkbWluKSB7CiAgICAgICAgICBkbWluID0gZDsKICAgICAgICAgIGNsb3Nlc3RGYWNlQSA9IGZhY2U7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoY2xvc2VzdEZhY2VBIDwgMCkgewogICAgICAgIHJldHVybjsKICAgICAgfSAvLyBHZXQgdGhlIGZhY2UgYW5kIGNvbnN0cnVjdCBjb25uZWN0ZWQgZmFjZXMKCgogICAgICBjb25zdCBwb2x5QSA9IGh1bGxBLmZhY2VzW2Nsb3Nlc3RGYWNlQV07CiAgICAgIHBvbHlBLmNvbm5lY3RlZEZhY2VzID0gW107CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGh1bGxBLmZhY2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBodWxsQS5mYWNlc1tpXS5sZW5ndGg7IGorKykgewogICAgICAgICAgaWYgKAogICAgICAgICAgLyogU2hhcmluZyBhIHZlcnRleCovCiAgICAgICAgICBwb2x5QS5pbmRleE9mKGh1bGxBLmZhY2VzW2ldW2pdKSAhPT0gLTEgJiYKICAgICAgICAgIC8qIE5vdCB0aGUgb25lIHdlIGFyZSBsb29raW5nIGZvciBjb25uZWN0aW9ucyBmcm9tICovCiAgICAgICAgICBpICE9PSBjbG9zZXN0RmFjZUEgJiYKICAgICAgICAgIC8qIE5vdCBhbHJlYWR5IGFkZGVkICovCiAgICAgICAgICBwb2x5QS5jb25uZWN0ZWRGYWNlcy5pbmRleE9mKGkpID09PSAtMSkgewogICAgICAgICAgICBwb2x5QS5jb25uZWN0ZWRGYWNlcy5wdXNoKGkpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSAvLyBDbGlwIHRoZSBwb2x5Z29uIHRvIHRoZSBiYWNrIG9mIHRoZSBwbGFuZXMgb2YgYWxsIGZhY2VzIG9mIGh1bGwgQSwKICAgICAgLy8gdGhhdCBhcmUgYWRqYWNlbnQgdG8gdGhlIHdpdG5lc3MgZmFjZQoKCiAgICAgIGNvbnN0IG51bVZlcnRpY2VzQSA9IHBvbHlBLmxlbmd0aDsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtVmVydGljZXNBOyBpKyspIHsKICAgICAgICBjb25zdCBhID0gaHVsbEEudmVydGljZXNbcG9seUFbaV1dOwogICAgICAgIGNvbnN0IGIgPSBodWxsQS52ZXJ0aWNlc1twb2x5QVsoaSArIDEpICUgbnVtVmVydGljZXNBXV07CiAgICAgICAgYS52c3ViKGIsIGVkZ2UwKTsKICAgICAgICBXb3JsZEVkZ2UwLmNvcHkoZWRnZTApOwogICAgICAgIHF1YXRBLnZtdWx0KFdvcmxkRWRnZTAsIFdvcmxkRWRnZTApOwogICAgICAgIHBvc0EudmFkZChXb3JsZEVkZ2UwLCBXb3JsZEVkZ2UwKTsKICAgICAgICB3b3JsZFBsYW5lQW5vcm1hbDEuY29weSh0aGlzLmZhY2VOb3JtYWxzW2Nsb3Nlc3RGYWNlQV0pOwogICAgICAgIHF1YXRBLnZtdWx0KHdvcmxkUGxhbmVBbm9ybWFsMSwgd29ybGRQbGFuZUFub3JtYWwxKTsKICAgICAgICBwb3NBLnZhZGQod29ybGRQbGFuZUFub3JtYWwxLCB3b3JsZFBsYW5lQW5vcm1hbDEpOwogICAgICAgIFdvcmxkRWRnZTAuY3Jvc3Mod29ybGRQbGFuZUFub3JtYWwxLCBwbGFuZU5vcm1hbFdTMSk7CiAgICAgICAgcGxhbmVOb3JtYWxXUzEubmVnYXRlKHBsYW5lTm9ybWFsV1MxKTsKICAgICAgICB3b3JsZEExLmNvcHkoYSk7CiAgICAgICAgcXVhdEEudm11bHQod29ybGRBMSwgd29ybGRBMSk7CiAgICAgICAgcG9zQS52YWRkKHdvcmxkQTEsIHdvcmxkQTEpOwogICAgICAgIGNvbnN0IG90aGVyRmFjZSA9IHBvbHlBLmNvbm5lY3RlZEZhY2VzW2ldOwogICAgICAgIGxvY2FsUGxhbmVOb3JtYWwuY29weSh0aGlzLmZhY2VOb3JtYWxzW290aGVyRmFjZV0pOwogICAgICAgIGNvbnN0IGxvY2FsUGxhbmVFcSA9IHRoaXMuZ2V0UGxhbmVDb25zdGFudE9mRmFjZShvdGhlckZhY2UpOwogICAgICAgIHBsYW5lTm9ybWFsV1MuY29weShsb2NhbFBsYW5lTm9ybWFsKTsKICAgICAgICBxdWF0QS52bXVsdChwbGFuZU5vcm1hbFdTLCBwbGFuZU5vcm1hbFdTKTsKICAgICAgICBjb25zdCBwbGFuZUVxV1MgPSBsb2NhbFBsYW5lRXEgLSBwbGFuZU5vcm1hbFdTLmRvdChwb3NBKTsgLy8gQ2xpcCBmYWNlIGFnYWluc3Qgb3VyIGNvbnN0cnVjdGVkIHBsYW5lCgogICAgICAgIHRoaXMuY2xpcEZhY2VBZ2FpbnN0UGxhbmUocFZ0eEluLCBwVnR4T3V0LCBwbGFuZU5vcm1hbFdTLCBwbGFuZUVxV1MpOyAvLyBUaHJvdyBhd2F5IGFsbCBjbGlwcGVkIHBvaW50cywgYnV0IHNhdmUgdGhlIHJlbWFpbmluZyB1bnRpbCBuZXh0IGNsaXAKCiAgICAgICAgd2hpbGUgKHBWdHhJbi5sZW5ndGgpIHsKICAgICAgICAgIHBWdHhJbi5zaGlmdCgpOwogICAgICAgIH0KCiAgICAgICAgd2hpbGUgKHBWdHhPdXQubGVuZ3RoKSB7CiAgICAgICAgICBwVnR4SW4ucHVzaChwVnR4T3V0LnNoaWZ0KCkpOwogICAgICAgIH0KICAgICAgfSAvLyBvbmx5IGtlZXAgY29udGFjdCBwb2ludHMgdGhhdCBhcmUgYmVoaW5kIHRoZSB3aXRuZXNzIGZhY2UKCgogICAgICBsb2NhbFBsYW5lTm9ybWFsLmNvcHkodGhpcy5mYWNlTm9ybWFsc1tjbG9zZXN0RmFjZUFdKTsKICAgICAgY29uc3QgbG9jYWxQbGFuZUVxID0gdGhpcy5nZXRQbGFuZUNvbnN0YW50T2ZGYWNlKGNsb3Nlc3RGYWNlQSk7CiAgICAgIHBsYW5lTm9ybWFsV1MuY29weShsb2NhbFBsYW5lTm9ybWFsKTsKICAgICAgcXVhdEEudm11bHQocGxhbmVOb3JtYWxXUywgcGxhbmVOb3JtYWxXUyk7CiAgICAgIGNvbnN0IHBsYW5lRXFXUyA9IGxvY2FsUGxhbmVFcSAtIHBsYW5lTm9ybWFsV1MuZG90KHBvc0EpOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwVnR4SW4ubGVuZ3RoOyBpKyspIHsKICAgICAgICBsZXQgZGVwdGggPSBwbGFuZU5vcm1hbFdTLmRvdChwVnR4SW5baV0pICsgcGxhbmVFcVdTOyAvLyA/Pz8KCiAgICAgICAgaWYgKGRlcHRoIDw9IG1pbkRpc3QpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGBjbGFtcGVkOiBkZXB0aD0ke2RlcHRofSB0byBtaW5EaXN0PSR7bWluRGlzdH1gKTsKICAgICAgICAgIGRlcHRoID0gbWluRGlzdDsKICAgICAgICB9CgogICAgICAgIGlmIChkZXB0aCA8PSBtYXhEaXN0KSB7CiAgICAgICAgICBjb25zdCBwb2ludCA9IHBWdHhJbltpXTsKCiAgICAgICAgICBpZiAoZGVwdGggPD0gMWUtNikgewogICAgICAgICAgICBjb25zdCBwID0gewogICAgICAgICAgICAgIHBvaW50LAogICAgICAgICAgICAgIG5vcm1hbDogcGxhbmVOb3JtYWxXUywKICAgICAgICAgICAgICBkZXB0aAogICAgICAgICAgICB9OwogICAgICAgICAgICByZXN1bHQucHVzaChwKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ2xpcCBhIGZhY2UgaW4gYSBodWxsIGFnYWluc3QgdGhlIGJhY2sgb2YgYSBwbGFuZS4KICAgICAqIEBwYXJhbSBwbGFuZUNvbnN0YW50IFRoZSBjb25zdGFudCBpbiB0aGUgbWF0aGVtYXRpY2FsIHBsYW5lIGVxdWF0aW9uCiAgICAgKi8KCgogICAgY2xpcEZhY2VBZ2FpbnN0UGxhbmUoaW5WZXJ0aWNlcywgb3V0VmVydGljZXMsIHBsYW5lTm9ybWFsLCBwbGFuZUNvbnN0YW50KSB7CiAgICAgIGxldCBuX2RvdF9maXJzdDsKICAgICAgbGV0IG5fZG90X2xhc3Q7CiAgICAgIGNvbnN0IG51bVZlcnRzID0gaW5WZXJ0aWNlcy5sZW5ndGg7CgogICAgICBpZiAobnVtVmVydHMgPCAyKSB7CiAgICAgICAgcmV0dXJuIG91dFZlcnRpY2VzOwogICAgICB9CgogICAgICBsZXQgZmlyc3RWZXJ0ZXggPSBpblZlcnRpY2VzW2luVmVydGljZXMubGVuZ3RoIC0gMV07CiAgICAgIGxldCBsYXN0VmVydGV4ID0gaW5WZXJ0aWNlc1swXTsKICAgICAgbl9kb3RfZmlyc3QgPSBwbGFuZU5vcm1hbC5kb3QoZmlyc3RWZXJ0ZXgpICsgcGxhbmVDb25zdGFudDsKCiAgICAgIGZvciAobGV0IHZpID0gMDsgdmkgPCBudW1WZXJ0czsgdmkrKykgewogICAgICAgIGxhc3RWZXJ0ZXggPSBpblZlcnRpY2VzW3ZpXTsKICAgICAgICBuX2RvdF9sYXN0ID0gcGxhbmVOb3JtYWwuZG90KGxhc3RWZXJ0ZXgpICsgcGxhbmVDb25zdGFudDsKCiAgICAgICAgaWYgKG5fZG90X2ZpcnN0IDwgMCkgewogICAgICAgICAgaWYgKG5fZG90X2xhc3QgPCAwKSB7CiAgICAgICAgICAgIC8vIFN0YXJ0IDwgMCwgZW5kIDwgMCwgc28gb3V0cHV0IGxhc3RWZXJ0ZXgKICAgICAgICAgICAgY29uc3QgbmV3diA9IG5ldyBWZWMzKCk7CiAgICAgICAgICAgIG5ld3YuY29weShsYXN0VmVydGV4KTsKICAgICAgICAgICAgb3V0VmVydGljZXMucHVzaChuZXd2KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIFN0YXJ0IDwgMCwgZW5kID49IDAsIHNvIG91dHB1dCBpbnRlcnNlY3Rpb24KICAgICAgICAgICAgY29uc3QgbmV3diA9IG5ldyBWZWMzKCk7CiAgICAgICAgICAgIGZpcnN0VmVydGV4LmxlcnAobGFzdFZlcnRleCwgbl9kb3RfZmlyc3QgLyAobl9kb3RfZmlyc3QgLSBuX2RvdF9sYXN0KSwgbmV3dik7CiAgICAgICAgICAgIG91dFZlcnRpY2VzLnB1c2gobmV3dik7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmIChuX2RvdF9sYXN0IDwgMCkgewogICAgICAgICAgICAvLyBTdGFydCA+PSAwLCBlbmQgPCAwIHNvIG91dHB1dCBpbnRlcnNlY3Rpb24gYW5kIGVuZAogICAgICAgICAgICBjb25zdCBuZXd2ID0gbmV3IFZlYzMoKTsKICAgICAgICAgICAgZmlyc3RWZXJ0ZXgubGVycChsYXN0VmVydGV4LCBuX2RvdF9maXJzdCAvIChuX2RvdF9maXJzdCAtIG5fZG90X2xhc3QpLCBuZXd2KTsKICAgICAgICAgICAgb3V0VmVydGljZXMucHVzaChuZXd2KTsKICAgICAgICAgICAgb3V0VmVydGljZXMucHVzaChsYXN0VmVydGV4KTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZpcnN0VmVydGV4ID0gbGFzdFZlcnRleDsKICAgICAgICBuX2RvdF9maXJzdCA9IG5fZG90X2xhc3Q7CiAgICAgIH0KCiAgICAgIHJldHVybiBvdXRWZXJ0aWNlczsKICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlcyBgLndvcmxkVmVydGljZXNgIGFuZCBzZXRzIGAud29ybGRWZXJ0aWNlc05lZWRzVXBkYXRlYCB0byBmYWxzZS4KICAgICAqLwoKCiAgICBjb21wdXRlV29ybGRWZXJ0aWNlcyhwb3NpdGlvbiwgcXVhdCkgewogICAgICB3aGlsZSAodGhpcy53b3JsZFZlcnRpY2VzLmxlbmd0aCA8IHRoaXMudmVydGljZXMubGVuZ3RoKSB7CiAgICAgICAgdGhpcy53b3JsZFZlcnRpY2VzLnB1c2gobmV3IFZlYzMoKSk7CiAgICAgIH0KCiAgICAgIGNvbnN0IHZlcnRzID0gdGhpcy52ZXJ0aWNlczsKICAgICAgY29uc3Qgd29ybGRWZXJ0cyA9IHRoaXMud29ybGRWZXJ0aWNlczsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSB0aGlzLnZlcnRpY2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgcXVhdC52bXVsdCh2ZXJ0c1tpXSwgd29ybGRWZXJ0c1tpXSk7CiAgICAgICAgcG9zaXRpb24udmFkZCh3b3JsZFZlcnRzW2ldLCB3b3JsZFZlcnRzW2ldKTsKICAgICAgfQoKICAgICAgdGhpcy53b3JsZFZlcnRpY2VzTmVlZHNVcGRhdGUgPSBmYWxzZTsKICAgIH0KCiAgICBjb21wdXRlTG9jYWxBQUJCKGFhYmJtaW4sIGFhYmJtYXgpIHsKICAgICAgY29uc3QgdmVydGljZXMgPSB0aGlzLnZlcnRpY2VzOwogICAgICBhYWJibWluLnNldChOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFKTsKICAgICAgYWFiYm1heC5zZXQoLU51bWJlci5NQVhfVkFMVUUsIC1OdW1iZXIuTUFYX1ZBTFVFLCAtTnVtYmVyLk1BWF9WQUxVRSk7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudmVydGljZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCB2ID0gdmVydGljZXNbaV07CgogICAgICAgIGlmICh2LnggPCBhYWJibWluLngpIHsKICAgICAgICAgIGFhYmJtaW4ueCA9IHYueDsKICAgICAgICB9IGVsc2UgaWYgKHYueCA+IGFhYmJtYXgueCkgewogICAgICAgICAgYWFiYm1heC54ID0gdi54OwogICAgICAgIH0KCiAgICAgICAgaWYgKHYueSA8IGFhYmJtaW4ueSkgewogICAgICAgICAgYWFiYm1pbi55ID0gdi55OwogICAgICAgIH0gZWxzZSBpZiAodi55ID4gYWFiYm1heC55KSB7CiAgICAgICAgICBhYWJibWF4LnkgPSB2Lnk7CiAgICAgICAgfQoKICAgICAgICBpZiAodi56IDwgYWFiYm1pbi56KSB7CiAgICAgICAgICBhYWJibWluLnogPSB2Lno7CiAgICAgICAgfSBlbHNlIGlmICh2LnogPiBhYWJibWF4LnopIHsKICAgICAgICAgIGFhYmJtYXgueiA9IHYuejsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlcyBgd29ybGRWZXJ0aWNlc2AgYW5kIHNldHMgYHdvcmxkVmVydGljZXNOZWVkc1VwZGF0ZWAgdG8gZmFsc2UuCiAgICAgKi8KCgogICAgY29tcHV0ZVdvcmxkRmFjZU5vcm1hbHMocXVhdCkgewogICAgICBjb25zdCBOID0gdGhpcy5mYWNlTm9ybWFscy5sZW5ndGg7CgogICAgICB3aGlsZSAodGhpcy53b3JsZEZhY2VOb3JtYWxzLmxlbmd0aCA8IE4pIHsKICAgICAgICB0aGlzLndvcmxkRmFjZU5vcm1hbHMucHVzaChuZXcgVmVjMygpKTsKICAgICAgfQoKICAgICAgY29uc3Qgbm9ybWFscyA9IHRoaXMuZmFjZU5vcm1hbHM7CiAgICAgIGNvbnN0IHdvcmxkTm9ybWFscyA9IHRoaXMud29ybGRGYWNlTm9ybWFsczsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBxdWF0LnZtdWx0KG5vcm1hbHNbaV0sIHdvcmxkTm9ybWFsc1tpXSk7CiAgICAgIH0KCiAgICAgIHRoaXMud29ybGRGYWNlTm9ybWFsc05lZWRzVXBkYXRlID0gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzCiAgICAgKi8KCgogICAgdXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKSB7CiAgICAgIC8vIEFzc3VtZSBwb2ludHMgYXJlIGRpc3RyaWJ1dGVkIHdpdGggbG9jYWwgKDAsMCwwKSBhcyBjZW50ZXIKICAgICAgbGV0IG1heDIgPSAwOwogICAgICBjb25zdCB2ZXJ0cyA9IHRoaXMudmVydGljZXM7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gdmVydHMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBub3JtMiA9IHZlcnRzW2ldLmxlbmd0aFNxdWFyZWQoKTsKCiAgICAgICAgaWYgKG5vcm0yID4gbWF4MikgewogICAgICAgICAgbWF4MiA9IG5vcm0yOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IE1hdGguc3FydChtYXgyKTsKICAgIH0KICAgIC8qKgogICAgICogY2FsY3VsYXRlV29ybGRBQUJCCiAgICAgKi8KCgogICAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHsKICAgICAgY29uc3QgdmVydHMgPSB0aGlzLnZlcnRpY2VzOwogICAgICBsZXQgbWlueDsKICAgICAgbGV0IG1pbnk7CiAgICAgIGxldCBtaW56OwogICAgICBsZXQgbWF4eDsKICAgICAgbGV0IG1heHk7CiAgICAgIGxldCBtYXh6OwogICAgICBsZXQgdGVtcFdvcmxkVmVydGV4ID0gbmV3IFZlYzMoKTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmVydHMubGVuZ3RoOyBpKyspIHsKICAgICAgICB0ZW1wV29ybGRWZXJ0ZXguY29weSh2ZXJ0c1tpXSk7CiAgICAgICAgcXVhdC52bXVsdCh0ZW1wV29ybGRWZXJ0ZXgsIHRlbXBXb3JsZFZlcnRleCk7CiAgICAgICAgcG9zLnZhZGQodGVtcFdvcmxkVmVydGV4LCB0ZW1wV29ybGRWZXJ0ZXgpOwogICAgICAgIGNvbnN0IHYgPSB0ZW1wV29ybGRWZXJ0ZXg7CgogICAgICAgIGlmIChtaW54ID09PSB1bmRlZmluZWQgfHwgdi54IDwgbWlueCkgewogICAgICAgICAgbWlueCA9IHYueDsKICAgICAgICB9CgogICAgICAgIGlmIChtYXh4ID09PSB1bmRlZmluZWQgfHwgdi54ID4gbWF4eCkgewogICAgICAgICAgbWF4eCA9IHYueDsKICAgICAgICB9CgogICAgICAgIGlmIChtaW55ID09PSB1bmRlZmluZWQgfHwgdi55IDwgbWlueSkgewogICAgICAgICAgbWlueSA9IHYueTsKICAgICAgICB9CgogICAgICAgIGlmIChtYXh5ID09PSB1bmRlZmluZWQgfHwgdi55ID4gbWF4eSkgewogICAgICAgICAgbWF4eSA9IHYueTsKICAgICAgICB9CgogICAgICAgIGlmIChtaW56ID09PSB1bmRlZmluZWQgfHwgdi56IDwgbWlueikgewogICAgICAgICAgbWlueiA9IHYuejsKICAgICAgICB9CgogICAgICAgIGlmIChtYXh6ID09PSB1bmRlZmluZWQgfHwgdi56ID4gbWF4eikgewogICAgICAgICAgbWF4eiA9IHYuejsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIG1pbi5zZXQobWlueCwgbWlueSwgbWlueik7CiAgICAgIG1heC5zZXQobWF4eCwgbWF4eSwgbWF4eik7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhcHByb3hpbWF0ZSBjb252ZXggdm9sdW1lCiAgICAgKi8KCgogICAgdm9sdW1lKCkgewogICAgICByZXR1cm4gNC4wICogTWF0aC5QSSAqIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgLyAzLjA7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbiBhdmVyYWdlIG9mIGFsbCB0aGUgdmVydGljZXMgcG9zaXRpb25zCiAgICAgKi8KCgogICAgZ2V0QXZlcmFnZVBvaW50TG9jYWwodGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IHZlcnRzID0gdGhpcy52ZXJ0aWNlczsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmVydHMubGVuZ3RoOyBpKyspIHsKICAgICAgICB0YXJnZXQudmFkZCh2ZXJ0c1tpXSwgdGFyZ2V0KTsKICAgICAgfQoKICAgICAgdGFyZ2V0LnNjYWxlKDEgLyB2ZXJ0cy5sZW5ndGgsIHRhcmdldCk7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIFRyYW5zZm9ybSBhbGwgbG9jYWwgcG9pbnRzLiBXaWxsIGNoYW5nZSB0aGUgLnZlcnRpY2VzCiAgICAgKi8KCgogICAgdHJhbnNmb3JtQWxsUG9pbnRzKG9mZnNldCwgcXVhdCkgewogICAgICBjb25zdCBuID0gdGhpcy52ZXJ0aWNlcy5sZW5ndGg7CiAgICAgIGNvbnN0IHZlcnRzID0gdGhpcy52ZXJ0aWNlczsgLy8gQXBwbHkgcm90YXRpb24KCiAgICAgIGlmIChxdWF0KSB7CiAgICAgICAgLy8gUm90YXRlIHZlcnRpY2VzCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyBpKyspIHsKICAgICAgICAgIGNvbnN0IHYgPSB2ZXJ0c1tpXTsKICAgICAgICAgIHF1YXQudm11bHQodiwgdik7CiAgICAgICAgfSAvLyBSb3RhdGUgZmFjZSBub3JtYWxzCgoKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZmFjZU5vcm1hbHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGNvbnN0IHYgPSB0aGlzLmZhY2VOb3JtYWxzW2ldOwogICAgICAgICAgcXVhdC52bXVsdCh2LCB2KTsKICAgICAgICB9CiAgICAgICAgLyoKICAgICAgICAgICAgICAvLyBSb3RhdGUgZWRnZXMKICAgICAgICAgICAgICBmb3IobGV0IGk9MDsgaTx0aGlzLnVuaXF1ZUVkZ2VzLmxlbmd0aDsgaSsrKXsKICAgICAgICAgICAgICAgICAgY29uc3QgdiA9IHRoaXMudW5pcXVlRWRnZXNbaV07CiAgICAgICAgICAgICAgICAgIHF1YXQudm11bHQodix2KTsKICAgICAgICAgICAgICB9Ki8KCiAgICAgIH0gLy8gQXBwbHkgb2Zmc2V0CgoKICAgICAgaWYgKG9mZnNldCkgewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgICBjb25zdCB2ID0gdmVydHNbaV07CiAgICAgICAgICB2LnZhZGQob2Zmc2V0LCB2KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ2hlY2tzIHdoZXRoZXIgcCBpcyBpbnNpZGUgdGhlIHBvbHloZWRyYS4gTXVzdCBiZSBpbiBsb2NhbCBjb29yZHMuCiAgICAgKiBUaGUgcG9pbnQgbGllcyBvdXRzaWRlIG9mIHRoZSBjb252ZXggaHVsbCBvZiB0aGUgb3RoZXIgcG9pbnRzIGlmIGFuZCBvbmx5IGlmIHRoZSBkaXJlY3Rpb24KICAgICAqIG9mIGFsbCB0aGUgdmVjdG9ycyBmcm9tIGl0IHRvIHRob3NlIG90aGVyIHBvaW50cyBhcmUgb24gbGVzcyB0aGFuIG9uZSBoYWxmIG9mIGEgc3BoZXJlIGFyb3VuZCBpdC4KICAgICAqIEBwYXJhbSBwIEEgcG9pbnQgZ2l2ZW4gaW4gbG9jYWwgY29vcmRpbmF0ZXMKICAgICAqLwoKCiAgICBwb2ludElzSW5zaWRlKHApIHsKICAgICAgY29uc3QgdmVydHMgPSB0aGlzLnZlcnRpY2VzOwogICAgICBjb25zdCBmYWNlcyA9IHRoaXMuZmFjZXM7CiAgICAgIGNvbnN0IG5vcm1hbHMgPSB0aGlzLmZhY2VOb3JtYWxzOwogICAgICBjb25zdCBwb3NpdGl2ZVJlc3VsdCA9IG51bGw7CiAgICAgIGNvbnN0IHBvaW50SW5zaWRlID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5nZXRBdmVyYWdlUG9pbnRMb2NhbChwb2ludEluc2lkZSk7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZmFjZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBsZXQgbiA9IG5vcm1hbHNbaV07CiAgICAgICAgY29uc3QgdiA9IHZlcnRzW2ZhY2VzW2ldWzBdXTsgLy8gV2Ugb25seSBuZWVkIG9uZSBwb2ludCBpbiB0aGUgZmFjZQogICAgICAgIC8vIFRoaXMgZG90IHByb2R1Y3QgZGV0ZXJtaW5lcyB3aGljaCBzaWRlIG9mIHRoZSBlZGdlIHRoZSBwb2ludCBpcwoKICAgICAgICBjb25zdCB2VG9QID0gbmV3IFZlYzMoKTsKICAgICAgICBwLnZzdWIodiwgdlRvUCk7CiAgICAgICAgY29uc3QgcjEgPSBuLmRvdCh2VG9QKTsKICAgICAgICBjb25zdCB2VG9Qb2ludEluc2lkZSA9IG5ldyBWZWMzKCk7CiAgICAgICAgcG9pbnRJbnNpZGUudnN1Yih2LCB2VG9Qb2ludEluc2lkZSk7CiAgICAgICAgY29uc3QgcjIgPSBuLmRvdCh2VG9Qb2ludEluc2lkZSk7CgogICAgICAgIGlmIChyMSA8IDAgJiYgcjIgPiAwIHx8IHIxID4gMCAmJiByMiA8IDApIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsgLy8gRW5jb3VudGVyZWQgc29tZSBvdGhlciBzaWduLiBFeGl0LgogICAgICAgIH0KICAgICAgfSAvLyBJZiB3ZSBnb3QgaGVyZSwgYWxsIGRvdCBwcm9kdWN0cyB3ZXJlIG9mIHRoZSBzYW1lIHNpZ24uCgoKICAgICAgcmV0dXJuIHBvc2l0aXZlUmVzdWx0ID8gMSA6IC0xOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgbWF4IGFuZCBtaW4gZG90IHByb2R1Y3Qgb2YgYSBjb252ZXggaHVsbCBhdCBwb3NpdGlvbiAocG9zLHF1YXQpIHByb2plY3RlZCBvbnRvIGFuIGF4aXMuCiAgICAgKiBSZXN1bHRzIGFyZSBzYXZlZCBpbiB0aGUgYXJyYXkgbWF4bWluLgogICAgICogQHBhcmFtIHJlc3VsdCByZXN1bHRbMF0gYW5kIHJlc3VsdFsxXSB3aWxsIGJlIHNldCB0byBtYXhpbXVtIGFuZCBtaW5pbXVtLCByZXNwZWN0aXZlbHkuCiAgICAgKi8KCgogICAgc3RhdGljIHByb2plY3Qoc2hhcGUsIGF4aXMsIHBvcywgcXVhdCwgcmVzdWx0KSB7CiAgICAgIGNvbnN0IG4gPSBzaGFwZS52ZXJ0aWNlcy5sZW5ndGg7CiAgICAgIGNvbnN0IGxvY2FsQXhpcyA9IHByb2plY3RfbG9jYWxBeGlzOwogICAgICBsZXQgbWF4ID0gMDsKICAgICAgbGV0IG1pbiA9IDA7CiAgICAgIGNvbnN0IGxvY2FsT3JpZ2luID0gcHJvamVjdF9sb2NhbE9yaWdpbjsKICAgICAgY29uc3QgdnMgPSBzaGFwZS52ZXJ0aWNlczsKICAgICAgbG9jYWxPcmlnaW4uc2V0WmVybygpOyAvLyBUcmFuc2Zvcm0gdGhlIGF4aXMgdG8gbG9jYWwKCiAgICAgIFRyYW5zZm9ybS52ZWN0b3JUb0xvY2FsRnJhbWUocG9zLCBxdWF0LCBheGlzLCBsb2NhbEF4aXMpOwogICAgICBUcmFuc2Zvcm0ucG9pbnRUb0xvY2FsRnJhbWUocG9zLCBxdWF0LCBsb2NhbE9yaWdpbiwgbG9jYWxPcmlnaW4pOwogICAgICBjb25zdCBhZGQgPSBsb2NhbE9yaWdpbi5kb3QobG9jYWxBeGlzKTsKICAgICAgbWluID0gbWF4ID0gdnNbMF0uZG90KGxvY2FsQXhpcyk7CgogICAgICBmb3IgKGxldCBpID0gMTsgaSA8IG47IGkrKykgewogICAgICAgIGNvbnN0IHZhbCA9IHZzW2ldLmRvdChsb2NhbEF4aXMpOwoKICAgICAgICBpZiAodmFsID4gbWF4KSB7CiAgICAgICAgICBtYXggPSB2YWw7CiAgICAgICAgfQoKICAgICAgICBpZiAodmFsIDwgbWluKSB7CiAgICAgICAgICBtaW4gPSB2YWw7CiAgICAgICAgfQogICAgICB9CgogICAgICBtaW4gLT0gYWRkOwogICAgICBtYXggLT0gYWRkOwoKICAgICAgaWYgKG1pbiA+IG1heCkgewogICAgICAgIC8vIEluY29uc2lzdGVudCAtIHN3YXAKICAgICAgICBjb25zdCB0ZW1wID0gbWluOwogICAgICAgIG1pbiA9IG1heDsKICAgICAgICBtYXggPSB0ZW1wOwogICAgICB9IC8vIE91dHB1dAoKCiAgICAgIHJlc3VsdFswXSA9IG1heDsKICAgICAgcmVzdWx0WzFdID0gbWluOwogICAgfQoKICB9CiAgY29uc3QgbWF4bWluQSA9IFtdOwogIGNvbnN0IG1heG1pbkIgPSBbXTsKICBuZXcgVmVjMygpOwogIGNvbnN0IHByb2plY3RfbG9jYWxBeGlzID0gbmV3IFZlYzMoKTsKICBjb25zdCBwcm9qZWN0X2xvY2FsT3JpZ2luID0gbmV3IFZlYzMoKTsKCiAgLyoqCiAgICogQSAzZCBib3ggc2hhcGUuCiAgICogQGV4YW1wbGUKICAgKiAgICAgY29uc3Qgc2l6ZSA9IDEKICAgKiAgICAgY29uc3QgaGFsZkV4dGVudHMgPSBuZXcgQ0FOTk9OLlZlYzMoc2l6ZSwgc2l6ZSwgc2l6ZSkKICAgKiAgICAgY29uc3QgYm94U2hhcGUgPSBuZXcgQ0FOTk9OLkJveChoYWxmRXh0ZW50cykKICAgKiAgICAgY29uc3QgYm94Qm9keSA9IG5ldyBDQU5OT04uQm9keSh7IG1hc3M6IDEsIHNoYXBlOiBib3hTaGFwZSB9KQogICAqICAgICB3b3JsZC5hZGRCb2R5KGJveEJvZHkpCiAgICovCiAgY2xhc3MgQm94IGV4dGVuZHMgU2hhcGUgewogICAgLyoqCiAgICAgKiBUaGUgaGFsZiBleHRlbnRzIG9mIHRoZSBib3guCiAgICAgKi8KCiAgICAvKioKICAgICAqIFVzZWQgYnkgdGhlIGNvbnRhY3QgZ2VuZXJhdG9yIHRvIG1ha2UgY29udGFjdHMgd2l0aCBvdGhlciBjb252ZXggcG9seWhlZHJhIGZvciBleGFtcGxlLgogICAgICovCiAgICBjb25zdHJ1Y3RvcihoYWxmRXh0ZW50cykgewogICAgICBzdXBlcih7CiAgICAgICAgdHlwZTogU2hhcGUudHlwZXMuQk9YCiAgICAgIH0pOwogICAgICB0aGlzLmhhbGZFeHRlbnRzID0gaGFsZkV4dGVudHM7CiAgICAgIHRoaXMuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uID0gbnVsbDsKICAgICAgdGhpcy51cGRhdGVDb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24oKTsKICAgICAgdGhpcy51cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpOwogICAgfQogICAgLyoqCiAgICAgKiBVcGRhdGVzIHRoZSBsb2NhbCBjb252ZXggcG9seWhlZHJvbiByZXByZXNlbnRhdGlvbiB1c2VkIGZvciBzb21lIGNvbGxpc2lvbnMuCiAgICAgKi8KCgogICAgdXBkYXRlQ29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uKCkgewogICAgICBjb25zdCBzeCA9IHRoaXMuaGFsZkV4dGVudHMueDsKICAgICAgY29uc3Qgc3kgPSB0aGlzLmhhbGZFeHRlbnRzLnk7CiAgICAgIGNvbnN0IHN6ID0gdGhpcy5oYWxmRXh0ZW50cy56OwogICAgICBjb25zdCBWID0gVmVjMzsKICAgICAgY29uc3QgdmVydGljZXMgPSBbbmV3IFYoLXN4LCAtc3ksIC1zeiksIG5ldyBWKHN4LCAtc3ksIC1zeiksIG5ldyBWKHN4LCBzeSwgLXN6KSwgbmV3IFYoLXN4LCBzeSwgLXN6KSwgbmV3IFYoLXN4LCAtc3ksIHN6KSwgbmV3IFYoc3gsIC1zeSwgc3opLCBuZXcgVihzeCwgc3ksIHN6KSwgbmV3IFYoLXN4LCBzeSwgc3opXTsKICAgICAgY29uc3QgZmFjZXMgPSBbWzMsIDIsIDEsIDBdLCAvLyAtegogICAgICBbNCwgNSwgNiwgN10sIC8vICt6CiAgICAgIFs1LCA0LCAwLCAxXSwgLy8gLXkKICAgICAgWzIsIDMsIDcsIDZdLCAvLyAreQogICAgICBbMCwgNCwgNywgM10sIC8vIC14CiAgICAgIFsxLCAyLCA2LCA1XSAvLyAreAogICAgICBdOwogICAgICBjb25zdCBheGVzID0gW25ldyBWKDAsIDAsIDEpLCBuZXcgVigwLCAxLCAwKSwgbmV3IFYoMSwgMCwgMCldOwogICAgICBjb25zdCBoID0gbmV3IENvbnZleFBvbHloZWRyb24oewogICAgICAgIHZlcnRpY2VzLAogICAgICAgIGZhY2VzLAogICAgICAgIGF4ZXMKICAgICAgfSk7CiAgICAgIHRoaXMuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uID0gaDsKICAgICAgaC5tYXRlcmlhbCA9IHRoaXMubWF0ZXJpYWw7CiAgICB9CiAgICAvKioKICAgICAqIENhbGN1bGF0ZSB0aGUgaW5lcnRpYSBvZiB0aGUgYm94LgogICAgICovCgoKICAgIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYShtYXNzLCB0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgQm94LmNhbGN1bGF0ZUluZXJ0aWEodGhpcy5oYWxmRXh0ZW50cywgbWFzcywgdGFyZ2V0KTsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KCiAgICBzdGF0aWMgY2FsY3VsYXRlSW5lcnRpYShoYWxmRXh0ZW50cywgbWFzcywgdGFyZ2V0KSB7CiAgICAgIGNvbnN0IGUgPSBoYWxmRXh0ZW50czsKICAgICAgdGFyZ2V0LnggPSAxLjAgLyAxMi4wICogbWFzcyAqICgyICogZS55ICogMiAqIGUueSArIDIgKiBlLnogKiAyICogZS56KTsKICAgICAgdGFyZ2V0LnkgPSAxLjAgLyAxMi4wICogbWFzcyAqICgyICogZS54ICogMiAqIGUueCArIDIgKiBlLnogKiAyICogZS56KTsKICAgICAgdGFyZ2V0LnogPSAxLjAgLyAxMi4wICogbWFzcyAqICgyICogZS55ICogMiAqIGUueSArIDIgKiBlLnggKiAyICogZS54KTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSBib3ggNiBzaWRlIG5vcm1hbHMKICAgICAqIEBwYXJhbSBzaXhUYXJnZXRWZWN0b3JzIEFuIGFycmF5IG9mIDYgdmVjdG9ycywgdG8gc3RvcmUgdGhlIHJlc3VsdGluZyBzaWRlIG5vcm1hbHMgaW4uCiAgICAgKiBAcGFyYW0gcXVhdCBPcmllbnRhdGlvbiB0byBhcHBseSB0byB0aGUgbm9ybWFsIHZlY3RvcnMuIElmIG5vdCBwcm92aWRlZCwgdGhlIHZlY3RvcnMgd2lsbCBiZSBpbiByZXNwZWN0IHRvIHRoZSBsb2NhbCBmcmFtZS4KICAgICAqLwoKCiAgICBnZXRTaWRlTm9ybWFscyhzaXhUYXJnZXRWZWN0b3JzLCBxdWF0KSB7CiAgICAgIGNvbnN0IHNpZGVzID0gc2l4VGFyZ2V0VmVjdG9yczsKICAgICAgY29uc3QgZXggPSB0aGlzLmhhbGZFeHRlbnRzOwogICAgICBzaWRlc1swXS5zZXQoZXgueCwgMCwgMCk7CiAgICAgIHNpZGVzWzFdLnNldCgwLCBleC55LCAwKTsKICAgICAgc2lkZXNbMl0uc2V0KDAsIDAsIGV4LnopOwogICAgICBzaWRlc1szXS5zZXQoLWV4LngsIDAsIDApOwogICAgICBzaWRlc1s0XS5zZXQoMCwgLWV4LnksIDApOwogICAgICBzaWRlc1s1XS5zZXQoMCwgMCwgLWV4LnopOwoKICAgICAgaWYgKHF1YXQgIT09IHVuZGVmaW5lZCkgewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBzaWRlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgcXVhdC52bXVsdChzaWRlc1tpXSwgc2lkZXNbaV0pOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHNpZGVzOwogICAgfQogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSB2b2x1bWUgb2YgdGhlIGJveC4KICAgICAqLwoKCiAgICB2b2x1bWUoKSB7CiAgICAgIHJldHVybiA4LjAgKiB0aGlzLmhhbGZFeHRlbnRzLnggKiB0aGlzLmhhbGZFeHRlbnRzLnkgKiB0aGlzLmhhbGZFeHRlbnRzLno7CiAgICB9CiAgICAvKioKICAgICAqIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzCiAgICAgKi8KCgogICAgdXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKSB7CiAgICAgIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgPSB0aGlzLmhhbGZFeHRlbnRzLmxlbmd0aCgpOwogICAgfQogICAgLyoqCiAgICAgKiBmb3JFYWNoV29ybGRDb3JuZXIKICAgICAqLwoKCiAgICBmb3JFYWNoV29ybGRDb3JuZXIocG9zLCBxdWF0LCBjYWxsYmFjaykgewogICAgICBjb25zdCBlID0gdGhpcy5oYWxmRXh0ZW50czsKICAgICAgY29uc3QgY29ybmVycyA9IFtbZS54LCBlLnksIGUuel0sIFstZS54LCBlLnksIGUuel0sIFstZS54LCAtZS55LCBlLnpdLCBbLWUueCwgLWUueSwgLWUuel0sIFtlLngsIC1lLnksIC1lLnpdLCBbZS54LCBlLnksIC1lLnpdLCBbLWUueCwgZS55LCAtZS56XSwgW2UueCwgLWUueSwgZS56XV07CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvcm5lcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICB3b3JsZENvcm5lclRlbXBQb3Muc2V0KGNvcm5lcnNbaV1bMF0sIGNvcm5lcnNbaV1bMV0sIGNvcm5lcnNbaV1bMl0pOwogICAgICAgIHF1YXQudm11bHQod29ybGRDb3JuZXJUZW1wUG9zLCB3b3JsZENvcm5lclRlbXBQb3MpOwogICAgICAgIHBvcy52YWRkKHdvcmxkQ29ybmVyVGVtcFBvcywgd29ybGRDb3JuZXJUZW1wUG9zKTsKICAgICAgICBjYWxsYmFjayh3b3JsZENvcm5lclRlbXBQb3MueCwgd29ybGRDb3JuZXJUZW1wUG9zLnksIHdvcmxkQ29ybmVyVGVtcFBvcy56KTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBjYWxjdWxhdGVXb3JsZEFBQkIKICAgICAqLwoKCiAgICBjYWxjdWxhdGVXb3JsZEFBQkIocG9zLCBxdWF0LCBtaW4sIG1heCkgewogICAgICBjb25zdCBlID0gdGhpcy5oYWxmRXh0ZW50czsKICAgICAgd29ybGRDb3JuZXJzVGVtcFswXS5zZXQoZS54LCBlLnksIGUueik7CiAgICAgIHdvcmxkQ29ybmVyc1RlbXBbMV0uc2V0KC1lLngsIGUueSwgZS56KTsKICAgICAgd29ybGRDb3JuZXJzVGVtcFsyXS5zZXQoLWUueCwgLWUueSwgZS56KTsKICAgICAgd29ybGRDb3JuZXJzVGVtcFszXS5zZXQoLWUueCwgLWUueSwgLWUueik7CiAgICAgIHdvcmxkQ29ybmVyc1RlbXBbNF0uc2V0KGUueCwgLWUueSwgLWUueik7CiAgICAgIHdvcmxkQ29ybmVyc1RlbXBbNV0uc2V0KGUueCwgZS55LCAtZS56KTsKICAgICAgd29ybGRDb3JuZXJzVGVtcFs2XS5zZXQoLWUueCwgZS55LCAtZS56KTsKICAgICAgd29ybGRDb3JuZXJzVGVtcFs3XS5zZXQoZS54LCAtZS55LCBlLnopOwogICAgICBjb25zdCB3YyA9IHdvcmxkQ29ybmVyc1RlbXBbMF07CiAgICAgIHF1YXQudm11bHQod2MsIHdjKTsKICAgICAgcG9zLnZhZGQod2MsIHdjKTsKICAgICAgbWF4LmNvcHkod2MpOwogICAgICBtaW4uY29weSh3Yyk7CgogICAgICBmb3IgKGxldCBpID0gMTsgaSA8IDg7IGkrKykgewogICAgICAgIGNvbnN0IHdjID0gd29ybGRDb3JuZXJzVGVtcFtpXTsKICAgICAgICBxdWF0LnZtdWx0KHdjLCB3Yyk7CiAgICAgICAgcG9zLnZhZGQod2MsIHdjKTsKICAgICAgICBjb25zdCB4ID0gd2MueDsKICAgICAgICBjb25zdCB5ID0gd2MueTsKICAgICAgICBjb25zdCB6ID0gd2MuejsKCiAgICAgICAgaWYgKHggPiBtYXgueCkgewogICAgICAgICAgbWF4LnggPSB4OwogICAgICAgIH0KCiAgICAgICAgaWYgKHkgPiBtYXgueSkgewogICAgICAgICAgbWF4LnkgPSB5OwogICAgICAgIH0KCiAgICAgICAgaWYgKHogPiBtYXgueikgewogICAgICAgICAgbWF4LnogPSB6OwogICAgICAgIH0KCiAgICAgICAgaWYgKHggPCBtaW4ueCkgewogICAgICAgICAgbWluLnggPSB4OwogICAgICAgIH0KCiAgICAgICAgaWYgKHkgPCBtaW4ueSkgewogICAgICAgICAgbWluLnkgPSB5OwogICAgICAgIH0KCiAgICAgICAgaWYgKHogPCBtaW4ueikgewogICAgICAgICAgbWluLnogPSB6OwogICAgICAgIH0KICAgICAgfSAvLyBHZXQgZWFjaCBheGlzIG1heAogICAgICAvLyBtaW4uc2V0KEluZmluaXR5LEluZmluaXR5LEluZmluaXR5KTsKICAgICAgLy8gbWF4LnNldCgtSW5maW5pdHksLUluZmluaXR5LC1JbmZpbml0eSk7CiAgICAgIC8vIHRoaXMuZm9yRWFjaFdvcmxkQ29ybmVyKHBvcyxxdWF0LGZ1bmN0aW9uKHgseSx6KXsKICAgICAgLy8gICAgIGlmKHggPiBtYXgueCl7CiAgICAgIC8vICAgICAgICAgbWF4LnggPSB4OwogICAgICAvLyAgICAgfQogICAgICAvLyAgICAgaWYoeSA+IG1heC55KXsKICAgICAgLy8gICAgICAgICBtYXgueSA9IHk7CiAgICAgIC8vICAgICB9CiAgICAgIC8vICAgICBpZih6ID4gbWF4LnopewogICAgICAvLyAgICAgICAgIG1heC56ID0gejsKICAgICAgLy8gICAgIH0KICAgICAgLy8gICAgIGlmKHggPCBtaW4ueCl7CiAgICAgIC8vICAgICAgICAgbWluLnggPSB4OwogICAgICAvLyAgICAgfQogICAgICAvLyAgICAgaWYoeSA8IG1pbi55KXsKICAgICAgLy8gICAgICAgICBtaW4ueSA9IHk7CiAgICAgIC8vICAgICB9CiAgICAgIC8vICAgICBpZih6IDwgbWluLnopewogICAgICAvLyAgICAgICAgIG1pbi56ID0gejsKICAgICAgLy8gICAgIH0KICAgICAgLy8gfSk7CgogICAgfQoKICB9CiAgY29uc3Qgd29ybGRDb3JuZXJUZW1wUG9zID0gbmV3IFZlYzMoKTsKICBjb25zdCB3b3JsZENvcm5lcnNUZW1wID0gW25ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCldOwoKICAvKioKICAgKiBCT0RZX1RZUEVTCiAgICovCiAgY29uc3QgQk9EWV9UWVBFUyA9IHsKICAgIC8qKiBEWU5BTUlDICovCiAgICBEWU5BTUlDOiAxLAoKICAgIC8qKiBTVEFUSUMgKi8KICAgIFNUQVRJQzogMiwKCiAgICAvKiogS0lORU1BVElDICovCiAgICBLSU5FTUFUSUM6IDQKICB9OwogIC8qKgogICAqIEJvZHlUeXBlCiAgICovCgogIC8qKgogICAqIEJPRFlfU0xFRVBfU1RBVEVTCiAgICovCiAgY29uc3QgQk9EWV9TTEVFUF9TVEFURVMgPSB7CiAgICAvKiogQVdBS0UgKi8KICAgIEFXQUtFOiAwLAoKICAgIC8qKiBTTEVFUFkgKi8KICAgIFNMRUVQWTogMSwKCiAgICAvKiogU0xFRVBJTkcgKi8KICAgIFNMRUVQSU5HOiAyCiAgfTsKICAvKioKICAgKiBCb2R5U2xlZXBTdGF0ZQogICAqLwoKICAvKioKICAgKiBCYXNlIGNsYXNzIGZvciBhbGwgYm9keSB0eXBlcy4KICAgKiBAZXhhbXBsZQogICAqICAgICBjb25zdCBzaGFwZSA9IG5ldyBDQU5OT04uU3BoZXJlKDEpCiAgICogICAgIGNvbnN0IGJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoewogICAqICAgICAgIG1hc3M6IDEsCiAgICogICAgICAgc2hhcGUsCiAgICogICAgIH0pCiAgICogICAgIHdvcmxkLmFkZEJvZHkoYm9keSkKICAgKi8KICBjbGFzcyBCb2R5IGV4dGVuZHMgRXZlbnRUYXJnZXQgewogICAgLyoqCiAgICAgKiBEaXNwYXRjaGVkIGFmdGVyIHR3byBib2RpZXMgY29sbGlkZS4gVGhpcyBldmVudCBpcyBkaXNwYXRjaGVkIG9uIGVhY2gKICAgICAqIG9mIHRoZSB0d28gYm9kaWVzIGludm9sdmVkIGluIHRoZSBjb2xsaXNpb24uCiAgICAgKiBAZXZlbnQgY29sbGlkZQogICAgICogQHBhcmFtIGJvZHkgVGhlIGJvZHkgdGhhdCB3YXMgaW52b2x2ZWQgaW4gdGhlIGNvbGxpc2lvbi4KICAgICAqIEBwYXJhbSBjb250YWN0IFRoZSBkZXRhaWxzIG9mIHRoZSBjb2xsaXNpb24uCiAgICAgKi8KCiAgICAvKioKICAgICAqIEEgZHluYW1pYyBib2R5IGlzIGZ1bGx5IHNpbXVsYXRlZC4gQ2FuIGJlIG1vdmVkIG1hbnVhbGx5IGJ5IHRoZSB1c2VyLCBidXQgbm9ybWFsbHkgdGhleSBtb3ZlIGFjY29yZGluZyB0byBmb3JjZXMuIEEgZHluYW1pYyBib2R5IGNhbiBjb2xsaWRlIHdpdGggYWxsIGJvZHkgdHlwZXMuIEEgZHluYW1pYyBib2R5IGFsd2F5cyBoYXMgZmluaXRlLCBub24temVybyBtYXNzLgogICAgICovCgogICAgLyoqCiAgICAgKiBBIHN0YXRpYyBib2R5IGRvZXMgbm90IG1vdmUgZHVyaW5nIHNpbXVsYXRpb24gYW5kIGJlaGF2ZXMgYXMgaWYgaXQgaGFzIGluZmluaXRlIG1hc3MuIFN0YXRpYyBib2RpZXMgY2FuIGJlIG1vdmVkIG1hbnVhbGx5IGJ5IHNldHRpbmcgdGhlIHBvc2l0aW9uIG9mIHRoZSBib2R5LiBUaGUgdmVsb2NpdHkgb2YgYSBzdGF0aWMgYm9keSBpcyBhbHdheXMgemVyby4gU3RhdGljIGJvZGllcyBkbyBub3QgY29sbGlkZSB3aXRoIG90aGVyIHN0YXRpYyBvciBraW5lbWF0aWMgYm9kaWVzLgogICAgICovCgogICAgLyoqCiAgICAgKiBBIGtpbmVtYXRpYyBib2R5IG1vdmVzIHVuZGVyIHNpbXVsYXRpb24gYWNjb3JkaW5nIHRvIGl0cyB2ZWxvY2l0eS4gVGhleSBkbyBub3QgcmVzcG9uZCB0byBmb3JjZXMuIFRoZXkgY2FuIGJlIG1vdmVkIG1hbnVhbGx5LCBidXQgbm9ybWFsbHkgYSBraW5lbWF0aWMgYm9keSBpcyBtb3ZlZCBieSBzZXR0aW5nIGl0cyB2ZWxvY2l0eS4gQSBraW5lbWF0aWMgYm9keSBiZWhhdmVzIGFzIGlmIGl0IGhhcyBpbmZpbml0ZSBtYXNzLiBLaW5lbWF0aWMgYm9kaWVzIGRvIG5vdCBjb2xsaWRlIHdpdGggb3RoZXIgc3RhdGljIG9yIGtpbmVtYXRpYyBib2RpZXMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIEFXQUtFCiAgICAgKi8KCiAgICAvKioKICAgICAqIFNMRUVQWQogICAgICovCgogICAgLyoqCiAgICAgKiBTTEVFUElORwogICAgICovCgogICAgLyoqCiAgICAgKiBEaXNwYXRjaGVkIGFmdGVyIGEgc2xlZXBpbmcgYm9keSBoYXMgd29rZW4gdXAuCiAgICAgKiBAZXZlbnQgd2FrZXVwCiAgICAgKi8KCiAgICAvKioKICAgICAqIERpc3BhdGNoZWQgYWZ0ZXIgYSBib2R5IGhhcyBnb25lIGluIHRvIHRoZSBzbGVlcHkgc3RhdGUuCiAgICAgKiBAZXZlbnQgc2xlZXB5CiAgICAgKi8KCiAgICAvKioKICAgICAqIERpc3BhdGNoZWQgYWZ0ZXIgYSBib2R5IGhhcyBmYWxsZW4gYXNsZWVwLgogICAgICogQGV2ZW50IHNsZWVwCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgc3VwZXIoKTsKICAgICAgdGhpcy5pZCA9IEJvZHkuaWRDb3VudGVyKys7CiAgICAgIHRoaXMuaW5kZXggPSAtMTsKICAgICAgdGhpcy53b3JsZCA9IG51bGw7CiAgICAgIHRoaXMudmxhbWJkYSA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyR3JvdXAgPSB0eXBlb2Ygb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJHcm91cCA9PT0gJ251bWJlcicgPyBvcHRpb25zLmNvbGxpc2lvbkZpbHRlckdyb3VwIDogMTsKICAgICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJNYXNrID0gdHlwZW9mIG9wdGlvbnMuY29sbGlzaW9uRmlsdGVyTWFzayA9PT0gJ251bWJlcicgPyBvcHRpb25zLmNvbGxpc2lvbkZpbHRlck1hc2sgOiAtMTsKICAgICAgdGhpcy5jb2xsaXNpb25SZXNwb25zZSA9IHR5cGVvZiBvcHRpb25zLmNvbGxpc2lvblJlc3BvbnNlID09PSAnYm9vbGVhbicgPyBvcHRpb25zLmNvbGxpc2lvblJlc3BvbnNlIDogdHJ1ZTsKICAgICAgdGhpcy5wb3NpdGlvbiA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMucHJldmlvdXNQb3NpdGlvbiA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuaW50ZXJwb2xhdGVkUG9zaXRpb24gPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmluaXRQb3NpdGlvbiA9IG5ldyBWZWMzKCk7CgogICAgICBpZiAob3B0aW9ucy5wb3NpdGlvbikgewogICAgICAgIHRoaXMucG9zaXRpb24uY29weShvcHRpb25zLnBvc2l0aW9uKTsKICAgICAgICB0aGlzLnByZXZpb3VzUG9zaXRpb24uY29weShvcHRpb25zLnBvc2l0aW9uKTsKICAgICAgICB0aGlzLmludGVycG9sYXRlZFBvc2l0aW9uLmNvcHkob3B0aW9ucy5wb3NpdGlvbik7CiAgICAgICAgdGhpcy5pbml0UG9zaXRpb24uY29weShvcHRpb25zLnBvc2l0aW9uKTsKICAgICAgfQoKICAgICAgdGhpcy52ZWxvY2l0eSA9IG5ldyBWZWMzKCk7CgogICAgICBpZiAob3B0aW9ucy52ZWxvY2l0eSkgewogICAgICAgIHRoaXMudmVsb2NpdHkuY29weShvcHRpb25zLnZlbG9jaXR5KTsKICAgICAgfQoKICAgICAgdGhpcy5pbml0VmVsb2NpdHkgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmZvcmNlID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgbWFzcyA9IHR5cGVvZiBvcHRpb25zLm1hc3MgPT09ICdudW1iZXInID8gb3B0aW9ucy5tYXNzIDogMDsKICAgICAgdGhpcy5tYXNzID0gbWFzczsKICAgICAgdGhpcy5pbnZNYXNzID0gbWFzcyA+IDAgPyAxLjAgLyBtYXNzIDogMDsKICAgICAgdGhpcy5tYXRlcmlhbCA9IG9wdGlvbnMubWF0ZXJpYWwgfHwgbnVsbDsKICAgICAgdGhpcy5saW5lYXJEYW1waW5nID0gdHlwZW9mIG9wdGlvbnMubGluZWFyRGFtcGluZyA9PT0gJ251bWJlcicgPyBvcHRpb25zLmxpbmVhckRhbXBpbmcgOiAwLjAxOwogICAgICB0aGlzLnR5cGUgPSBtYXNzIDw9IDAuMCA/IEJvZHkuU1RBVElDIDogQm9keS5EWU5BTUlDOwoKICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLnR5cGUgPT09IHR5cGVvZiBCb2R5LlNUQVRJQykgewogICAgICAgIHRoaXMudHlwZSA9IG9wdGlvbnMudHlwZTsKICAgICAgfQoKICAgICAgdGhpcy5hbGxvd1NsZWVwID0gdHlwZW9mIG9wdGlvbnMuYWxsb3dTbGVlcCAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmFsbG93U2xlZXAgOiB0cnVlOwogICAgICB0aGlzLnNsZWVwU3RhdGUgPSBCb2R5LkFXQUtFOwogICAgICB0aGlzLnNsZWVwU3BlZWRMaW1pdCA9IHR5cGVvZiBvcHRpb25zLnNsZWVwU3BlZWRMaW1pdCAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLnNsZWVwU3BlZWRMaW1pdCA6IDAuMTsKICAgICAgdGhpcy5zbGVlcFRpbWVMaW1pdCA9IHR5cGVvZiBvcHRpb25zLnNsZWVwVGltZUxpbWl0ICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuc2xlZXBUaW1lTGltaXQgOiAxOwogICAgICB0aGlzLnRpbWVMYXN0U2xlZXB5ID0gMDsKICAgICAgdGhpcy53YWtlVXBBZnRlck5hcnJvd3BoYXNlID0gZmFsc2U7CiAgICAgIHRoaXMudG9ycXVlID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5xdWF0ZXJuaW9uID0gbmV3IFF1YXRlcm5pb24oKTsKICAgICAgdGhpcy5pbml0UXVhdGVybmlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgICAgIHRoaXMucHJldmlvdXNRdWF0ZXJuaW9uID0gbmV3IFF1YXRlcm5pb24oKTsKICAgICAgdGhpcy5pbnRlcnBvbGF0ZWRRdWF0ZXJuaW9uID0gbmV3IFF1YXRlcm5pb24oKTsKCiAgICAgIGlmIChvcHRpb25zLnF1YXRlcm5pb24pIHsKICAgICAgICB0aGlzLnF1YXRlcm5pb24uY29weShvcHRpb25zLnF1YXRlcm5pb24pOwogICAgICAgIHRoaXMuaW5pdFF1YXRlcm5pb24uY29weShvcHRpb25zLnF1YXRlcm5pb24pOwogICAgICAgIHRoaXMucHJldmlvdXNRdWF0ZXJuaW9uLmNvcHkob3B0aW9ucy5xdWF0ZXJuaW9uKTsKICAgICAgICB0aGlzLmludGVycG9sYXRlZFF1YXRlcm5pb24uY29weShvcHRpb25zLnF1YXRlcm5pb24pOwogICAgICB9CgogICAgICB0aGlzLmFuZ3VsYXJWZWxvY2l0eSA9IG5ldyBWZWMzKCk7CgogICAgICBpZiAob3B0aW9ucy5hbmd1bGFyVmVsb2NpdHkpIHsKICAgICAgICB0aGlzLmFuZ3VsYXJWZWxvY2l0eS5jb3B5KG9wdGlvbnMuYW5ndWxhclZlbG9jaXR5KTsKICAgICAgfQoKICAgICAgdGhpcy5pbml0QW5ndWxhclZlbG9jaXR5ID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5zaGFwZXMgPSBbXTsKICAgICAgdGhpcy5zaGFwZU9mZnNldHMgPSBbXTsKICAgICAgdGhpcy5zaGFwZU9yaWVudGF0aW9ucyA9IFtdOwogICAgICB0aGlzLmluZXJ0aWEgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmludkluZXJ0aWEgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmludkluZXJ0aWFXb3JsZCA9IG5ldyBNYXQzKCk7CiAgICAgIHRoaXMuaW52TWFzc1NvbHZlID0gMDsKICAgICAgdGhpcy5pbnZJbmVydGlhU29sdmUgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmludkluZXJ0aWFXb3JsZFNvbHZlID0gbmV3IE1hdDMoKTsKICAgICAgdGhpcy5maXhlZFJvdGF0aW9uID0gdHlwZW9mIG9wdGlvbnMuZml4ZWRSb3RhdGlvbiAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmZpeGVkUm90YXRpb24gOiBmYWxzZTsKICAgICAgdGhpcy5hbmd1bGFyRGFtcGluZyA9IHR5cGVvZiBvcHRpb25zLmFuZ3VsYXJEYW1waW5nICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuYW5ndWxhckRhbXBpbmcgOiAwLjAxOwogICAgICB0aGlzLmxpbmVhckZhY3RvciA9IG5ldyBWZWMzKDEsIDEsIDEpOwoKICAgICAgaWYgKG9wdGlvbnMubGluZWFyRmFjdG9yKSB7CiAgICAgICAgdGhpcy5saW5lYXJGYWN0b3IuY29weShvcHRpb25zLmxpbmVhckZhY3Rvcik7CiAgICAgIH0KCiAgICAgIHRoaXMuYW5ndWxhckZhY3RvciA9IG5ldyBWZWMzKDEsIDEsIDEpOwoKICAgICAgaWYgKG9wdGlvbnMuYW5ndWxhckZhY3RvcikgewogICAgICAgIHRoaXMuYW5ndWxhckZhY3Rvci5jb3B5KG9wdGlvbnMuYW5ndWxhckZhY3Rvcik7CiAgICAgIH0KCiAgICAgIHRoaXMuYWFiYiA9IG5ldyBBQUJCKCk7CiAgICAgIHRoaXMuYWFiYk5lZWRzVXBkYXRlID0gdHJ1ZTsKICAgICAgdGhpcy5ib3VuZGluZ1JhZGl1cyA9IDA7CiAgICAgIHRoaXMud2xhbWJkYSA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuaXNUcmlnZ2VyID0gQm9vbGVhbihvcHRpb25zLmlzVHJpZ2dlcik7CgogICAgICBpZiAob3B0aW9ucy5zaGFwZSkgewogICAgICAgIHRoaXMuYWRkU2hhcGUob3B0aW9ucy5zaGFwZSk7CiAgICAgIH0KCiAgICAgIHRoaXMudXBkYXRlTWFzc1Byb3BlcnRpZXMoKTsKICAgIH0KICAgIC8qKgogICAgICogV2FrZSB0aGUgYm9keSB1cC4KICAgICAqLwoKCiAgICB3YWtlVXAoKSB7CiAgICAgIGNvbnN0IHByZXZTdGF0ZSA9IHRoaXMuc2xlZXBTdGF0ZTsKICAgICAgdGhpcy5zbGVlcFN0YXRlID0gQm9keS5BV0FLRTsKICAgICAgdGhpcy53YWtlVXBBZnRlck5hcnJvd3BoYXNlID0gZmFsc2U7CgogICAgICBpZiAocHJldlN0YXRlID09PSBCb2R5LlNMRUVQSU5HKSB7CiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KEJvZHkud2FrZXVwRXZlbnQpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEZvcmNlIGJvZHkgc2xlZXAKICAgICAqLwoKCiAgICBzbGVlcCgpIHsKICAgICAgdGhpcy5zbGVlcFN0YXRlID0gQm9keS5TTEVFUElORzsKICAgICAgdGhpcy52ZWxvY2l0eS5zZXQoMCwgMCwgMCk7CiAgICAgIHRoaXMuYW5ndWxhclZlbG9jaXR5LnNldCgwLCAwLCAwKTsKICAgICAgdGhpcy53YWtlVXBBZnRlck5hcnJvd3BoYXNlID0gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIENhbGxlZCBldmVyeSB0aW1lc3RlcCB0byB1cGRhdGUgaW50ZXJuYWwgc2xlZXAgdGltZXIgYW5kIGNoYW5nZSBzbGVlcCBzdGF0ZSBpZiBuZWVkZWQuCiAgICAgKiBAcGFyYW0gdGltZSBUaGUgd29ybGQgdGltZSBpbiBzZWNvbmRzCiAgICAgKi8KCgogICAgc2xlZXBUaWNrKHRpbWUpIHsKICAgICAgaWYgKHRoaXMuYWxsb3dTbGVlcCkgewogICAgICAgIGNvbnN0IHNsZWVwU3RhdGUgPSB0aGlzLnNsZWVwU3RhdGU7CiAgICAgICAgY29uc3Qgc3BlZWRTcXVhcmVkID0gdGhpcy52ZWxvY2l0eS5sZW5ndGhTcXVhcmVkKCkgKyB0aGlzLmFuZ3VsYXJWZWxvY2l0eS5sZW5ndGhTcXVhcmVkKCk7CiAgICAgICAgY29uc3Qgc3BlZWRMaW1pdFNxdWFyZWQgPSB0aGlzLnNsZWVwU3BlZWRMaW1pdCAqKiAyOwoKICAgICAgICBpZiAoc2xlZXBTdGF0ZSA9PT0gQm9keS5BV0FLRSAmJiBzcGVlZFNxdWFyZWQgPCBzcGVlZExpbWl0U3F1YXJlZCkgewogICAgICAgICAgdGhpcy5zbGVlcFN0YXRlID0gQm9keS5TTEVFUFk7IC8vIFNsZWVweQoKICAgICAgICAgIHRoaXMudGltZUxhc3RTbGVlcHkgPSB0aW1lOwogICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KEJvZHkuc2xlZXB5RXZlbnQpOwogICAgICAgIH0gZWxzZSBpZiAoc2xlZXBTdGF0ZSA9PT0gQm9keS5TTEVFUFkgJiYgc3BlZWRTcXVhcmVkID4gc3BlZWRMaW1pdFNxdWFyZWQpIHsKICAgICAgICAgIHRoaXMud2FrZVVwKCk7IC8vIFdha2UgdXAKICAgICAgICB9IGVsc2UgaWYgKHNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBZICYmIHRpbWUgLSB0aGlzLnRpbWVMYXN0U2xlZXB5ID4gdGhpcy5zbGVlcFRpbWVMaW1pdCkgewogICAgICAgICAgdGhpcy5zbGVlcCgpOyAvLyBTbGVlcGluZwoKICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChCb2R5LnNsZWVwRXZlbnQpOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBJZiB0aGUgYm9keSBpcyBzbGVlcGluZywgaXQgc2hvdWxkIGJlIGltbW92YWJsZSAvIGhhdmUgaW5maW5pdGUgbWFzcyBkdXJpbmcgc29sdmUuIFdlIHNvbHZlIGl0IGJ5IGhhdmluZyBhIHNlcGFyYXRlICJzb2x2ZSBtYXNzIi4KICAgICAqLwoKCiAgICB1cGRhdGVTb2x2ZU1hc3NQcm9wZXJ0aWVzKCkgewogICAgICBpZiAodGhpcy5zbGVlcFN0YXRlID09PSBCb2R5LlNMRUVQSU5HIHx8IHRoaXMudHlwZSA9PT0gQm9keS5LSU5FTUFUSUMpIHsKICAgICAgICB0aGlzLmludk1hc3NTb2x2ZSA9IDA7CiAgICAgICAgdGhpcy5pbnZJbmVydGlhU29sdmUuc2V0WmVybygpOwogICAgICAgIHRoaXMuaW52SW5lcnRpYVdvcmxkU29sdmUuc2V0WmVybygpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaW52TWFzc1NvbHZlID0gdGhpcy5pbnZNYXNzOwogICAgICAgIHRoaXMuaW52SW5lcnRpYVNvbHZlLmNvcHkodGhpcy5pbnZJbmVydGlhKTsKICAgICAgICB0aGlzLmludkluZXJ0aWFXb3JsZFNvbHZlLmNvcHkodGhpcy5pbnZJbmVydGlhV29ybGQpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIENvbnZlcnQgYSB3b3JsZCBwb2ludCB0byBsb2NhbCBib2R5IGZyYW1lLgogICAgICovCgoKICAgIHBvaW50VG9Mb2NhbEZyYW1lKHdvcmxkUG9pbnQsIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIHsKICAgICAgICByZXN1bHQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICB3b3JsZFBvaW50LnZzdWIodGhpcy5wb3NpdGlvbiwgcmVzdWx0KTsKICAgICAgdGhpcy5xdWF0ZXJuaW9uLmNvbmp1Z2F0ZSgpLnZtdWx0KHJlc3VsdCwgcmVzdWx0KTsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICAgIC8qKgogICAgICogQ29udmVydCBhIHdvcmxkIHZlY3RvciB0byBsb2NhbCBib2R5IGZyYW1lLgogICAgICovCgoKICAgIHZlY3RvclRvTG9jYWxGcmFtZSh3b3JsZFZlY3RvciwgcmVzdWx0KSB7CiAgICAgIGlmIChyZXN1bHQgPT09IHZvaWQgMCkgewogICAgICAgIHJlc3VsdCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIHRoaXMucXVhdGVybmlvbi5jb25qdWdhdGUoKS52bXVsdCh3b3JsZFZlY3RvciwgcmVzdWx0KTsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICAgIC8qKgogICAgICogQ29udmVydCBhIGxvY2FsIGJvZHkgcG9pbnQgdG8gd29ybGQgZnJhbWUuCiAgICAgKi8KCgogICAgcG9pbnRUb1dvcmxkRnJhbWUobG9jYWxQb2ludCwgcmVzdWx0KSB7CiAgICAgIGlmIChyZXN1bHQgPT09IHZvaWQgMCkgewogICAgICAgIHJlc3VsdCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIHRoaXMucXVhdGVybmlvbi52bXVsdChsb2NhbFBvaW50LCByZXN1bHQpOwogICAgICByZXN1bHQudmFkZCh0aGlzLnBvc2l0aW9uLCByZXN1bHQpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiBDb252ZXJ0IGEgbG9jYWwgYm9keSBwb2ludCB0byB3b3JsZCBmcmFtZS4KICAgICAqLwoKCiAgICB2ZWN0b3JUb1dvcmxkRnJhbWUobG9jYWxWZWN0b3IsIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIHsKICAgICAgICByZXN1bHQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICB0aGlzLnF1YXRlcm5pb24udm11bHQobG9jYWxWZWN0b3IsIHJlc3VsdCk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIEFkZCBhIHNoYXBlIHRvIHRoZSBib2R5IHdpdGggYSBsb2NhbCBvZmZzZXQgYW5kIG9yaWVudGF0aW9uLgogICAgICogQHJldHVybiBUaGUgYm9keSBvYmplY3QsIGZvciBjaGFpbmFiaWxpdHkuCiAgICAgKi8KCgogICAgYWRkU2hhcGUoc2hhcGUsIF9vZmZzZXQsIF9vcmllbnRhdGlvbikgewogICAgICBjb25zdCBvZmZzZXQgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBvcmllbnRhdGlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7CgogICAgICBpZiAoX29mZnNldCkgewogICAgICAgIG9mZnNldC5jb3B5KF9vZmZzZXQpOwogICAgICB9CgogICAgICBpZiAoX29yaWVudGF0aW9uKSB7CiAgICAgICAgb3JpZW50YXRpb24uY29weShfb3JpZW50YXRpb24pOwogICAgICB9CgogICAgICB0aGlzLnNoYXBlcy5wdXNoKHNoYXBlKTsKICAgICAgdGhpcy5zaGFwZU9mZnNldHMucHVzaChvZmZzZXQpOwogICAgICB0aGlzLnNoYXBlT3JpZW50YXRpb25zLnB1c2gob3JpZW50YXRpb24pOwogICAgICB0aGlzLnVwZGF0ZU1hc3NQcm9wZXJ0aWVzKCk7CiAgICAgIHRoaXMudXBkYXRlQm91bmRpbmdSYWRpdXMoKTsKICAgICAgdGhpcy5hYWJiTmVlZHNVcGRhdGUgPSB0cnVlOwogICAgICBzaGFwZS5ib2R5ID0gdGhpczsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIFJlbW92ZSBhIHNoYXBlIGZyb20gdGhlIGJvZHkuCiAgICAgKiBAcmV0dXJuIFRoZSBib2R5IG9iamVjdCwgZm9yIGNoYWluYWJpbGl0eS4KICAgICAqLwoKCiAgICByZW1vdmVTaGFwZShzaGFwZSkgewogICAgICBjb25zdCBpbmRleCA9IHRoaXMuc2hhcGVzLmluZGV4T2Yoc2hhcGUpOwoKICAgICAgaWYgKGluZGV4ID09PSAtMSkgewogICAgICAgIGNvbnNvbGUud2FybignU2hhcGUgZG9lcyBub3QgYmVsb25nIHRvIHRoZSBib2R5Jyk7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0KCiAgICAgIHRoaXMuc2hhcGVzLnNwbGljZShpbmRleCwgMSk7CiAgICAgIHRoaXMuc2hhcGVPZmZzZXRzLnNwbGljZShpbmRleCwgMSk7CiAgICAgIHRoaXMuc2hhcGVPcmllbnRhdGlvbnMuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgdGhpcy51cGRhdGVNYXNzUHJvcGVydGllcygpOwogICAgICB0aGlzLnVwZGF0ZUJvdW5kaW5nUmFkaXVzKCk7CiAgICAgIHRoaXMuYWFiYk5lZWRzVXBkYXRlID0gdHJ1ZTsKICAgICAgc2hhcGUuYm9keSA9IG51bGw7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQogICAgLyoqCiAgICAgKiBVcGRhdGUgdGhlIGJvdW5kaW5nIHJhZGl1cyBvZiB0aGUgYm9keS4gU2hvdWxkIGJlIGRvbmUgaWYgYW55IG9mIHRoZSBzaGFwZXMgYXJlIGNoYW5nZWQuCiAgICAgKi8KCgogICAgdXBkYXRlQm91bmRpbmdSYWRpdXMoKSB7CiAgICAgIGNvbnN0IHNoYXBlcyA9IHRoaXMuc2hhcGVzOwogICAgICBjb25zdCBzaGFwZU9mZnNldHMgPSB0aGlzLnNoYXBlT2Zmc2V0czsKICAgICAgY29uc3QgTiA9IHNoYXBlcy5sZW5ndGg7CiAgICAgIGxldCByYWRpdXMgPSAwOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICAgIGNvbnN0IHNoYXBlID0gc2hhcGVzW2ldOwogICAgICAgIHNoYXBlLnVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCk7CiAgICAgICAgY29uc3Qgb2Zmc2V0ID0gc2hhcGVPZmZzZXRzW2ldLmxlbmd0aCgpOwogICAgICAgIGNvbnN0IHIgPSBzaGFwZS5ib3VuZGluZ1NwaGVyZVJhZGl1czsKCiAgICAgICAgaWYgKG9mZnNldCArIHIgPiByYWRpdXMpIHsKICAgICAgICAgIHJhZGl1cyA9IG9mZnNldCArIHI7CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLmJvdW5kaW5nUmFkaXVzID0gcmFkaXVzOwogICAgfQogICAgLyoqCiAgICAgKiBVcGRhdGVzIHRoZSAuYWFiYgogICAgICovCgoKICAgIHVwZGF0ZUFBQkIoKSB7CiAgICAgIGNvbnN0IHNoYXBlcyA9IHRoaXMuc2hhcGVzOwogICAgICBjb25zdCBzaGFwZU9mZnNldHMgPSB0aGlzLnNoYXBlT2Zmc2V0czsKICAgICAgY29uc3Qgc2hhcGVPcmllbnRhdGlvbnMgPSB0aGlzLnNoYXBlT3JpZW50YXRpb25zOwogICAgICBjb25zdCBOID0gc2hhcGVzLmxlbmd0aDsKICAgICAgY29uc3Qgb2Zmc2V0ID0gdG1wVmVjOwogICAgICBjb25zdCBvcmllbnRhdGlvbiA9IHRtcFF1YXQ7CiAgICAgIGNvbnN0IGJvZHlRdWF0ID0gdGhpcy5xdWF0ZXJuaW9uOwogICAgICBjb25zdCBhYWJiID0gdGhpcy5hYWJiOwogICAgICBjb25zdCBzaGFwZUFBQkIgPSB1cGRhdGVBQUJCX3NoYXBlQUFCQjsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBjb25zdCBzaGFwZSA9IHNoYXBlc1tpXTsgLy8gR2V0IHNoYXBlIHdvcmxkIHBvc2l0aW9uCgogICAgICAgIGJvZHlRdWF0LnZtdWx0KHNoYXBlT2Zmc2V0c1tpXSwgb2Zmc2V0KTsKICAgICAgICBvZmZzZXQudmFkZCh0aGlzLnBvc2l0aW9uLCBvZmZzZXQpOyAvLyBHZXQgc2hhcGUgd29ybGQgcXVhdGVybmlvbgoKICAgICAgICBib2R5UXVhdC5tdWx0KHNoYXBlT3JpZW50YXRpb25zW2ldLCBvcmllbnRhdGlvbik7IC8vIEdldCBzaGFwZSBBQUJCCgogICAgICAgIHNoYXBlLmNhbGN1bGF0ZVdvcmxkQUFCQihvZmZzZXQsIG9yaWVudGF0aW9uLCBzaGFwZUFBQkIubG93ZXJCb3VuZCwgc2hhcGVBQUJCLnVwcGVyQm91bmQpOwoKICAgICAgICBpZiAoaSA9PT0gMCkgewogICAgICAgICAgYWFiYi5jb3B5KHNoYXBlQUFCQik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGFhYmIuZXh0ZW5kKHNoYXBlQUFCQik7CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLmFhYmJOZWVkc1VwZGF0ZSA9IGZhbHNlOwogICAgfQogICAgLyoqCiAgICAgKiBVcGRhdGUgYC5pbmVydGlhV29ybGRgIGFuZCBgLmludkluZXJ0aWFXb3JsZGAKICAgICAqLwoKCiAgICB1cGRhdGVJbmVydGlhV29ybGQoZm9yY2UpIHsKICAgICAgY29uc3QgSSA9IHRoaXMuaW52SW5lcnRpYTsKCiAgICAgIGlmIChJLnggPT09IEkueSAmJiBJLnkgPT09IEkueiAmJiAhZm9yY2UpIDsgZWxzZSB7CiAgICAgICAgY29uc3QgbTEgPSB1aXdfbTE7CiAgICAgICAgY29uc3QgbTIgPSB1aXdfbTI7CiAgICAgICAgbTEuc2V0Um90YXRpb25Gcm9tUXVhdGVybmlvbih0aGlzLnF1YXRlcm5pb24pOwogICAgICAgIG0xLnRyYW5zcG9zZShtMik7CiAgICAgICAgbTEuc2NhbGUoSSwgbTEpOwogICAgICAgIG0xLm1tdWx0KG0yLCB0aGlzLmludkluZXJ0aWFXb3JsZCk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQXBwbHkgZm9yY2UgdG8gYSBwb2ludCBvZiB0aGUgYm9keS4gVGhpcyBjb3VsZCBmb3IgZXhhbXBsZSBiZSBhIHBvaW50IG9uIHRoZSBCb2R5IHN1cmZhY2UuCiAgICAgKiBBcHBseWluZyBmb3JjZSB0aGlzIHdheSB3aWxsIGFkZCB0byBCb2R5LmZvcmNlIGFuZCBCb2R5LnRvcnF1ZS4KICAgICAqIEBwYXJhbSBmb3JjZSBUaGUgYW1vdW50IG9mIGZvcmNlIHRvIGFkZC4KICAgICAqIEBwYXJhbSByZWxhdGl2ZVBvaW50IEEgcG9pbnQgcmVsYXRpdmUgdG8gdGhlIGNlbnRlciBvZiBtYXNzIHRvIGFwcGx5IHRoZSBmb3JjZSBvbi4KICAgICAqLwoKCiAgICBhcHBseUZvcmNlKGZvcmNlLCByZWxhdGl2ZVBvaW50KSB7CiAgICAgIGlmIChyZWxhdGl2ZVBvaW50ID09PSB2b2lkIDApIHsKICAgICAgICByZWxhdGl2ZVBvaW50ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgLy8gTmVlZGVkPwogICAgICBpZiAodGhpcy50eXBlICE9PSBCb2R5LkRZTkFNSUMpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcpIHsKICAgICAgICB0aGlzLndha2VVcCgpOwogICAgICB9IC8vIENvbXB1dGUgcHJvZHVjZWQgcm90YXRpb25hbCBmb3JjZQoKCiAgICAgIGNvbnN0IHJvdEZvcmNlID0gQm9keV9hcHBseUZvcmNlX3JvdEZvcmNlOwogICAgICByZWxhdGl2ZVBvaW50LmNyb3NzKGZvcmNlLCByb3RGb3JjZSk7IC8vIEFkZCBsaW5lYXIgZm9yY2UKCiAgICAgIHRoaXMuZm9yY2UudmFkZChmb3JjZSwgdGhpcy5mb3JjZSk7IC8vIEFkZCByb3RhdGlvbmFsIGZvcmNlCgogICAgICB0aGlzLnRvcnF1ZS52YWRkKHJvdEZvcmNlLCB0aGlzLnRvcnF1ZSk7CiAgICB9CiAgICAvKioKICAgICAqIEFwcGx5IGZvcmNlIHRvIGEgbG9jYWwgcG9pbnQgaW4gdGhlIGJvZHkuCiAgICAgKiBAcGFyYW0gZm9yY2UgVGhlIGZvcmNlIHZlY3RvciB0byBhcHBseSwgZGVmaW5lZCBsb2NhbGx5IGluIHRoZSBib2R5IGZyYW1lLgogICAgICogQHBhcmFtIGxvY2FsUG9pbnQgQSBsb2NhbCBwb2ludCBpbiB0aGUgYm9keSB0byBhcHBseSB0aGUgZm9yY2Ugb24uCiAgICAgKi8KCgogICAgYXBwbHlMb2NhbEZvcmNlKGxvY2FsRm9yY2UsIGxvY2FsUG9pbnQpIHsKICAgICAgaWYgKGxvY2FsUG9pbnQgPT09IHZvaWQgMCkgewogICAgICAgIGxvY2FsUG9pbnQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBpZiAodGhpcy50eXBlICE9PSBCb2R5LkRZTkFNSUMpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnN0IHdvcmxkRm9yY2UgPSBCb2R5X2FwcGx5TG9jYWxGb3JjZV93b3JsZEZvcmNlOwogICAgICBjb25zdCByZWxhdGl2ZVBvaW50V29ybGQgPSBCb2R5X2FwcGx5TG9jYWxGb3JjZV9yZWxhdGl2ZVBvaW50V29ybGQ7IC8vIFRyYW5zZm9ybSB0aGUgZm9yY2UgdmVjdG9yIHRvIHdvcmxkIHNwYWNlCgogICAgICB0aGlzLnZlY3RvclRvV29ybGRGcmFtZShsb2NhbEZvcmNlLCB3b3JsZEZvcmNlKTsKICAgICAgdGhpcy52ZWN0b3JUb1dvcmxkRnJhbWUobG9jYWxQb2ludCwgcmVsYXRpdmVQb2ludFdvcmxkKTsKICAgICAgdGhpcy5hcHBseUZvcmNlKHdvcmxkRm9yY2UsIHJlbGF0aXZlUG9pbnRXb3JsZCk7CiAgICB9CiAgICAvKioKICAgICAqIEFwcGx5IHRvcnF1ZSB0byB0aGUgYm9keS4KICAgICAqIEBwYXJhbSB0b3JxdWUgVGhlIGFtb3VudCBvZiB0b3JxdWUgdG8gYWRkLgogICAgICovCgoKICAgIGFwcGx5VG9ycXVlKHRvcnF1ZSkgewogICAgICBpZiAodGhpcy50eXBlICE9PSBCb2R5LkRZTkFNSUMpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcpIHsKICAgICAgICB0aGlzLndha2VVcCgpOwogICAgICB9IC8vIEFkZCByb3RhdGlvbmFsIGZvcmNlCgoKICAgICAgdGhpcy50b3JxdWUudmFkZCh0b3JxdWUsIHRoaXMudG9ycXVlKTsKICAgIH0KICAgIC8qKgogICAgICogQXBwbHkgaW1wdWxzZSB0byBhIHBvaW50IG9mIHRoZSBib2R5LiBUaGlzIGNvdWxkIGZvciBleGFtcGxlIGJlIGEgcG9pbnQgb24gdGhlIEJvZHkgc3VyZmFjZS4KICAgICAqIEFuIGltcHVsc2UgaXMgYSBmb3JjZSBhZGRlZCB0byBhIGJvZHkgZHVyaW5nIGEgc2hvcnQgcGVyaW9kIG9mIHRpbWUgKGltcHVsc2UgPSBmb3JjZSAqIHRpbWUpLgogICAgICogSW1wdWxzZXMgd2lsbCBiZSBhZGRlZCB0byBCb2R5LnZlbG9jaXR5IGFuZCBCb2R5LmFuZ3VsYXJWZWxvY2l0eS4KICAgICAqIEBwYXJhbSBpbXB1bHNlIFRoZSBhbW91bnQgb2YgaW1wdWxzZSB0byBhZGQuCiAgICAgKiBAcGFyYW0gcmVsYXRpdmVQb2ludCBBIHBvaW50IHJlbGF0aXZlIHRvIHRoZSBjZW50ZXIgb2YgbWFzcyB0byBhcHBseSB0aGUgZm9yY2Ugb24uCiAgICAgKi8KCgogICAgYXBwbHlJbXB1bHNlKGltcHVsc2UsIHJlbGF0aXZlUG9pbnQpIHsKICAgICAgaWYgKHJlbGF0aXZlUG9pbnQgPT09IHZvaWQgMCkgewogICAgICAgIHJlbGF0aXZlUG9pbnQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBpZiAodGhpcy50eXBlICE9PSBCb2R5LkRZTkFNSUMpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcpIHsKICAgICAgICB0aGlzLndha2VVcCgpOwogICAgICB9IC8vIENvbXB1dGUgcG9pbnQgcG9zaXRpb24gcmVsYXRpdmUgdG8gdGhlIGJvZHkgY2VudGVyCgoKICAgICAgY29uc3QgciA9IHJlbGF0aXZlUG9pbnQ7IC8vIENvbXB1dGUgcHJvZHVjZWQgY2VudHJhbCBpbXB1bHNlIHZlbG9jaXR5CgogICAgICBjb25zdCB2ZWxvID0gQm9keV9hcHBseUltcHVsc2VfdmVsbzsKICAgICAgdmVsby5jb3B5KGltcHVsc2UpOwogICAgICB2ZWxvLnNjYWxlKHRoaXMuaW52TWFzcywgdmVsbyk7IC8vIEFkZCBsaW5lYXIgaW1wdWxzZQoKICAgICAgdGhpcy52ZWxvY2l0eS52YWRkKHZlbG8sIHRoaXMudmVsb2NpdHkpOyAvLyBDb21wdXRlIHByb2R1Y2VkIHJvdGF0aW9uYWwgaW1wdWxzZSB2ZWxvY2l0eQoKICAgICAgY29uc3Qgcm90VmVsbyA9IEJvZHlfYXBwbHlJbXB1bHNlX3JvdFZlbG87CiAgICAgIHIuY3Jvc3MoaW1wdWxzZSwgcm90VmVsbyk7CiAgICAgIC8qCiAgICAgICByb3RWZWxvLnggKj0gdGhpcy5pbnZJbmVydGlhLng7CiAgICAgICByb3RWZWxvLnkgKj0gdGhpcy5pbnZJbmVydGlhLnk7CiAgICAgICByb3RWZWxvLnogKj0gdGhpcy5pbnZJbmVydGlhLno7CiAgICAgICAqLwoKICAgICAgdGhpcy5pbnZJbmVydGlhV29ybGQudm11bHQocm90VmVsbywgcm90VmVsbyk7IC8vIEFkZCByb3RhdGlvbmFsIEltcHVsc2UKCiAgICAgIHRoaXMuYW5ndWxhclZlbG9jaXR5LnZhZGQocm90VmVsbywgdGhpcy5hbmd1bGFyVmVsb2NpdHkpOwogICAgfQogICAgLyoqCiAgICAgKiBBcHBseSBsb2NhbGx5LWRlZmluZWQgaW1wdWxzZSB0byBhIGxvY2FsIHBvaW50IGluIHRoZSBib2R5LgogICAgICogQHBhcmFtIGZvcmNlIFRoZSBmb3JjZSB2ZWN0b3IgdG8gYXBwbHksIGRlZmluZWQgbG9jYWxseSBpbiB0aGUgYm9keSBmcmFtZS4KICAgICAqIEBwYXJhbSBsb2NhbFBvaW50IEEgbG9jYWwgcG9pbnQgaW4gdGhlIGJvZHkgdG8gYXBwbHkgdGhlIGZvcmNlIG9uLgogICAgICovCgoKICAgIGFwcGx5TG9jYWxJbXB1bHNlKGxvY2FsSW1wdWxzZSwgbG9jYWxQb2ludCkgewogICAgICBpZiAobG9jYWxQb2ludCA9PT0gdm9pZCAwKSB7CiAgICAgICAgbG9jYWxQb2ludCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnR5cGUgIT09IEJvZHkuRFlOQU1JQykgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgY29uc3Qgd29ybGRJbXB1bHNlID0gQm9keV9hcHBseUxvY2FsSW1wdWxzZV93b3JsZEltcHVsc2U7CiAgICAgIGNvbnN0IHJlbGF0aXZlUG9pbnRXb3JsZCA9IEJvZHlfYXBwbHlMb2NhbEltcHVsc2VfcmVsYXRpdmVQb2ludDsgLy8gVHJhbnNmb3JtIHRoZSBmb3JjZSB2ZWN0b3IgdG8gd29ybGQgc3BhY2UKCiAgICAgIHRoaXMudmVjdG9yVG9Xb3JsZEZyYW1lKGxvY2FsSW1wdWxzZSwgd29ybGRJbXB1bHNlKTsKICAgICAgdGhpcy52ZWN0b3JUb1dvcmxkRnJhbWUobG9jYWxQb2ludCwgcmVsYXRpdmVQb2ludFdvcmxkKTsKICAgICAgdGhpcy5hcHBseUltcHVsc2Uod29ybGRJbXB1bHNlLCByZWxhdGl2ZVBvaW50V29ybGQpOwogICAgfQogICAgLyoqCiAgICAgKiBTaG91bGQgYmUgY2FsbGVkIHdoZW5ldmVyIHlvdSBjaGFuZ2UgdGhlIGJvZHkgc2hhcGUgb3IgbWFzcy4KICAgICAqLwoKCiAgICB1cGRhdGVNYXNzUHJvcGVydGllcygpIHsKICAgICAgY29uc3QgaGFsZkV4dGVudHMgPSBCb2R5X3VwZGF0ZU1hc3NQcm9wZXJ0aWVzX2hhbGZFeHRlbnRzOwogICAgICB0aGlzLmludk1hc3MgPSB0aGlzLm1hc3MgPiAwID8gMS4wIC8gdGhpcy5tYXNzIDogMDsKICAgICAgY29uc3QgSSA9IHRoaXMuaW5lcnRpYTsKICAgICAgY29uc3QgZml4ZWQgPSB0aGlzLmZpeGVkUm90YXRpb247IC8vIEFwcHJveGltYXRlIHdpdGggQUFCQiBib3gKCiAgICAgIHRoaXMudXBkYXRlQUFCQigpOwogICAgICBoYWxmRXh0ZW50cy5zZXQoKHRoaXMuYWFiYi51cHBlckJvdW5kLnggLSB0aGlzLmFhYmIubG93ZXJCb3VuZC54KSAvIDIsICh0aGlzLmFhYmIudXBwZXJCb3VuZC55IC0gdGhpcy5hYWJiLmxvd2VyQm91bmQueSkgLyAyLCAodGhpcy5hYWJiLnVwcGVyQm91bmQueiAtIHRoaXMuYWFiYi5sb3dlckJvdW5kLnopIC8gMik7CiAgICAgIEJveC5jYWxjdWxhdGVJbmVydGlhKGhhbGZFeHRlbnRzLCB0aGlzLm1hc3MsIEkpOwogICAgICB0aGlzLmludkluZXJ0aWEuc2V0KEkueCA+IDAgJiYgIWZpeGVkID8gMS4wIC8gSS54IDogMCwgSS55ID4gMCAmJiAhZml4ZWQgPyAxLjAgLyBJLnkgOiAwLCBJLnogPiAwICYmICFmaXhlZCA/IDEuMCAvIEkueiA6IDApOwogICAgICB0aGlzLnVwZGF0ZUluZXJ0aWFXb3JsZCh0cnVlKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHdvcmxkIHZlbG9jaXR5IG9mIGEgcG9pbnQgaW4gdGhlIGJvZHkuCiAgICAgKiBAcGFyYW0gd29ybGRQb2ludAogICAgICogQHBhcmFtIHJlc3VsdAogICAgICogQHJldHVybiBUaGUgcmVzdWx0IHZlY3Rvci4KICAgICAqLwoKCiAgICBnZXRWZWxvY2l0eUF0V29ybGRQb2ludCh3b3JsZFBvaW50LCByZXN1bHQpIHsKICAgICAgY29uc3QgciA9IG5ldyBWZWMzKCk7CiAgICAgIHdvcmxkUG9pbnQudnN1Yih0aGlzLnBvc2l0aW9uLCByKTsKICAgICAgdGhpcy5hbmd1bGFyVmVsb2NpdHkuY3Jvc3MociwgcmVzdWx0KTsKICAgICAgdGhpcy52ZWxvY2l0eS52YWRkKHJlc3VsdCwgcmVzdWx0KTsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICAgIC8qKgogICAgICogTW92ZSB0aGUgYm9keSBmb3J3YXJkIGluIHRpbWUuCiAgICAgKiBAcGFyYW0gZHQgVGltZSBzdGVwCiAgICAgKiBAcGFyYW0gcXVhdE5vcm1hbGl6ZSBTZXQgdG8gdHJ1ZSB0byBub3JtYWxpemUgdGhlIGJvZHkgcXVhdGVybmlvbgogICAgICogQHBhcmFtIHF1YXROb3JtYWxpemVGYXN0IElmIHRoZSBxdWF0ZXJuaW9uIHNob3VsZCBiZSBub3JtYWxpemVkIHVzaW5nICJmYXN0IiBxdWF0ZXJuaW9uIG5vcm1hbGl6YXRpb24KICAgICAqLwoKCiAgICBpbnRlZ3JhdGUoZHQsIHF1YXROb3JtYWxpemUsIHF1YXROb3JtYWxpemVGYXN0KSB7CiAgICAgIC8vIFNhdmUgcHJldmlvdXMgcG9zaXRpb24KICAgICAgdGhpcy5wcmV2aW91c1Bvc2l0aW9uLmNvcHkodGhpcy5wb3NpdGlvbik7CiAgICAgIHRoaXMucHJldmlvdXNRdWF0ZXJuaW9uLmNvcHkodGhpcy5xdWF0ZXJuaW9uKTsKCiAgICAgIGlmICghKHRoaXMudHlwZSA9PT0gQm9keS5EWU5BTUlDIHx8IHRoaXMudHlwZSA9PT0gQm9keS5LSU5FTUFUSUMpIHx8IHRoaXMuc2xlZXBTdGF0ZSA9PT0gQm9keS5TTEVFUElORykgewogICAgICAgIC8vIE9ubHkgZm9yIGR5bmFtaWMKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnN0IHZlbG8gPSB0aGlzLnZlbG9jaXR5OwogICAgICBjb25zdCBhbmd1bGFyVmVsbyA9IHRoaXMuYW5ndWxhclZlbG9jaXR5OwogICAgICBjb25zdCBwb3MgPSB0aGlzLnBvc2l0aW9uOwogICAgICBjb25zdCBmb3JjZSA9IHRoaXMuZm9yY2U7CiAgICAgIGNvbnN0IHRvcnF1ZSA9IHRoaXMudG9ycXVlOwogICAgICBjb25zdCBxdWF0ID0gdGhpcy5xdWF0ZXJuaW9uOwogICAgICBjb25zdCBpbnZNYXNzID0gdGhpcy5pbnZNYXNzOwogICAgICBjb25zdCBpbnZJbmVydGlhID0gdGhpcy5pbnZJbmVydGlhV29ybGQ7CiAgICAgIGNvbnN0IGxpbmVhckZhY3RvciA9IHRoaXMubGluZWFyRmFjdG9yOwogICAgICBjb25zdCBpTWR0ID0gaW52TWFzcyAqIGR0OwogICAgICB2ZWxvLnggKz0gZm9yY2UueCAqIGlNZHQgKiBsaW5lYXJGYWN0b3IueDsKICAgICAgdmVsby55ICs9IGZvcmNlLnkgKiBpTWR0ICogbGluZWFyRmFjdG9yLnk7CiAgICAgIHZlbG8ueiArPSBmb3JjZS56ICogaU1kdCAqIGxpbmVhckZhY3Rvci56OwogICAgICBjb25zdCBlID0gaW52SW5lcnRpYS5lbGVtZW50czsKICAgICAgY29uc3QgYW5ndWxhckZhY3RvciA9IHRoaXMuYW5ndWxhckZhY3RvcjsKICAgICAgY29uc3QgdHggPSB0b3JxdWUueCAqIGFuZ3VsYXJGYWN0b3IueDsKICAgICAgY29uc3QgdHkgPSB0b3JxdWUueSAqIGFuZ3VsYXJGYWN0b3IueTsKICAgICAgY29uc3QgdHogPSB0b3JxdWUueiAqIGFuZ3VsYXJGYWN0b3IuejsKICAgICAgYW5ndWxhclZlbG8ueCArPSBkdCAqIChlWzBdICogdHggKyBlWzFdICogdHkgKyBlWzJdICogdHopOwogICAgICBhbmd1bGFyVmVsby55ICs9IGR0ICogKGVbM10gKiB0eCArIGVbNF0gKiB0eSArIGVbNV0gKiB0eik7CiAgICAgIGFuZ3VsYXJWZWxvLnogKz0gZHQgKiAoZVs2XSAqIHR4ICsgZVs3XSAqIHR5ICsgZVs4XSAqIHR6KTsgLy8gVXNlIG5ldyB2ZWxvY2l0eSAgLSBsZWFwIGZyb2cKCiAgICAgIHBvcy54ICs9IHZlbG8ueCAqIGR0OwogICAgICBwb3MueSArPSB2ZWxvLnkgKiBkdDsKICAgICAgcG9zLnogKz0gdmVsby56ICogZHQ7CiAgICAgIHF1YXQuaW50ZWdyYXRlKHRoaXMuYW5ndWxhclZlbG9jaXR5LCBkdCwgdGhpcy5hbmd1bGFyRmFjdG9yLCBxdWF0KTsKCiAgICAgIGlmIChxdWF0Tm9ybWFsaXplKSB7CiAgICAgICAgaWYgKHF1YXROb3JtYWxpemVGYXN0KSB7CiAgICAgICAgICBxdWF0Lm5vcm1hbGl6ZUZhc3QoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcXVhdC5ub3JtYWxpemUoKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMuYWFiYk5lZWRzVXBkYXRlID0gdHJ1ZTsgLy8gVXBkYXRlIHdvcmxkIGluZXJ0aWEKCiAgICAgIHRoaXMudXBkYXRlSW5lcnRpYVdvcmxkKCk7CiAgICB9CgogIH0KICBCb2R5LmlkQ291bnRlciA9IDA7CiAgQm9keS5DT0xMSURFX0VWRU5UX05BTUUgPSAnY29sbGlkZSc7CiAgQm9keS5EWU5BTUlDID0gQk9EWV9UWVBFUy5EWU5BTUlDOwogIEJvZHkuU1RBVElDID0gQk9EWV9UWVBFUy5TVEFUSUM7CiAgQm9keS5LSU5FTUFUSUMgPSBCT0RZX1RZUEVTLktJTkVNQVRJQzsKICBCb2R5LkFXQUtFID0gQk9EWV9TTEVFUF9TVEFURVMuQVdBS0U7CiAgQm9keS5TTEVFUFkgPSBCT0RZX1NMRUVQX1NUQVRFUy5TTEVFUFk7CiAgQm9keS5TTEVFUElORyA9IEJPRFlfU0xFRVBfU1RBVEVTLlNMRUVQSU5HOwogIEJvZHkud2FrZXVwRXZlbnQgPSB7CiAgICB0eXBlOiAnd2FrZXVwJwogIH07CiAgQm9keS5zbGVlcHlFdmVudCA9IHsKICAgIHR5cGU6ICdzbGVlcHknCiAgfTsKICBCb2R5LnNsZWVwRXZlbnQgPSB7CiAgICB0eXBlOiAnc2xlZXAnCiAgfTsKICBjb25zdCB0bXBWZWMgPSBuZXcgVmVjMygpOwogIGNvbnN0IHRtcFF1YXQgPSBuZXcgUXVhdGVybmlvbigpOwogIGNvbnN0IHVwZGF0ZUFBQkJfc2hhcGVBQUJCID0gbmV3IEFBQkIoKTsKICBjb25zdCB1aXdfbTEgPSBuZXcgTWF0MygpOwogIGNvbnN0IHVpd19tMiA9IG5ldyBNYXQzKCk7CiAgbmV3IE1hdDMoKTsKICBjb25zdCBCb2R5X2FwcGx5Rm9yY2Vfcm90Rm9yY2UgPSBuZXcgVmVjMygpOwogIGNvbnN0IEJvZHlfYXBwbHlMb2NhbEZvcmNlX3dvcmxkRm9yY2UgPSBuZXcgVmVjMygpOwogIGNvbnN0IEJvZHlfYXBwbHlMb2NhbEZvcmNlX3JlbGF0aXZlUG9pbnRXb3JsZCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgQm9keV9hcHBseUltcHVsc2VfdmVsbyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgQm9keV9hcHBseUltcHVsc2Vfcm90VmVsbyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgQm9keV9hcHBseUxvY2FsSW1wdWxzZV93b3JsZEltcHVsc2UgPSBuZXcgVmVjMygpOwogIGNvbnN0IEJvZHlfYXBwbHlMb2NhbEltcHVsc2VfcmVsYXRpdmVQb2ludCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgQm9keV91cGRhdGVNYXNzUHJvcGVydGllc19oYWxmRXh0ZW50cyA9IG5ldyBWZWMzKCk7CgogIC8qKgogICAqIEJhc2UgY2xhc3MgZm9yIGJyb2FkcGhhc2UgaW1wbGVtZW50YXRpb25zCiAgICogQGF1dGhvciBzY2h0ZXBwZQogICAqLwogIGNsYXNzIEJyb2FkcGhhc2UgewogICAgLyoqCiAgICAgKiBUaGUgd29ybGQgdG8gc2VhcmNoIGZvciBjb2xsaXNpb25zIGluLgogICAgICovCgogICAgLyoqCiAgICAgKiBJZiBzZXQgdG8gdHJ1ZSwgdGhlIGJyb2FkcGhhc2UgdXNlcyBib3VuZGluZyBib3hlcyBmb3IgaW50ZXJzZWN0aW9uIHRlc3RzLCBlbHNlIGl0IHVzZXMgYm91bmRpbmcgc3BoZXJlcy4KICAgICAqLwoKICAgIC8qKgogICAgICogU2V0IHRvIHRydWUgaWYgdGhlIG9iamVjdHMgaW4gdGhlIHdvcmxkIG1vdmVkLgogICAgICovCiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgdGhpcy53b3JsZCA9IG51bGw7CiAgICAgIHRoaXMudXNlQm91bmRpbmdCb3hlcyA9IGZhbHNlOwogICAgICB0aGlzLmRpcnR5ID0gdHJ1ZTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSBjb2xsaXNpb24gcGFpcnMgZnJvbSB0aGUgd29ybGQKICAgICAqIEBwYXJhbSB3b3JsZCBUaGUgd29ybGQgdG8gc2VhcmNoIGluCiAgICAgKiBAcGFyYW0gcDEgRW1wdHkgYXJyYXkgdG8gYmUgZmlsbGVkIHdpdGggYm9keSBvYmplY3RzCiAgICAgKiBAcGFyYW0gcDIgRW1wdHkgYXJyYXkgdG8gYmUgZmlsbGVkIHdpdGggYm9keSBvYmplY3RzCiAgICAgKi8KCgogICAgY29sbGlzaW9uUGFpcnMod29ybGQsIHAxLCBwMikgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvbGxpc2lvblBhaXJzIG5vdCBpbXBsZW1lbnRlZCBmb3IgdGhpcyBCcm9hZFBoYXNlIGNsYXNzIScpOwogICAgfQogICAgLyoqCiAgICAgKiBDaGVjayBpZiBhIGJvZHkgcGFpciBuZWVkcyB0byBiZSBpbnRlcnNlY3Rpb24gdGVzdGVkIGF0IGFsbC4KICAgICAqLwoKCiAgICBuZWVkQnJvYWRwaGFzZUNvbGxpc2lvbihib2R5QSwgYm9keUIpIHsKICAgICAgLy8gQ2hlY2sgY29sbGlzaW9uIGZpbHRlciBtYXNrcwogICAgICBpZiAoKGJvZHlBLmNvbGxpc2lvbkZpbHRlckdyb3VwICYgYm9keUIuY29sbGlzaW9uRmlsdGVyTWFzaykgPT09IDAgfHwgKGJvZHlCLmNvbGxpc2lvbkZpbHRlckdyb3VwICYgYm9keUEuY29sbGlzaW9uRmlsdGVyTWFzaykgPT09IDApIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0gLy8gQ2hlY2sgdHlwZXMKCgogICAgICBpZiAoKChib2R5QS50eXBlICYgQm9keS5TVEFUSUMpICE9PSAwIHx8IGJvZHlBLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcpICYmICgoYm9keUIudHlwZSAmIEJvZHkuU1RBVElDKSAhPT0gMCB8fCBib2R5Qi5zbGVlcFN0YXRlID09PSBCb2R5LlNMRUVQSU5HKSkgewogICAgICAgIC8vIEJvdGggYm9kaWVzIGFyZSBzdGF0aWMgb3Igc2xlZXBpbmcuIFNraXAuCiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIC8qKgogICAgICogQ2hlY2sgaWYgdGhlIGJvdW5kaW5nIHZvbHVtZXMgb2YgdHdvIGJvZGllcyBpbnRlcnNlY3QuCiAgICAgKi8KCgogICAgaW50ZXJzZWN0aW9uVGVzdChib2R5QSwgYm9keUIsIHBhaXJzMSwgcGFpcnMyKSB7CiAgICAgIGlmICh0aGlzLnVzZUJvdW5kaW5nQm94ZXMpIHsKICAgICAgICB0aGlzLmRvQm91bmRpbmdCb3hCcm9hZHBoYXNlKGJvZHlBLCBib2R5QiwgcGFpcnMxLCBwYWlyczIpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZG9Cb3VuZGluZ1NwaGVyZUJyb2FkcGhhc2UoYm9keUEsIGJvZHlCLCBwYWlyczEsIHBhaXJzMik7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ2hlY2sgaWYgdGhlIGJvdW5kaW5nIHNwaGVyZXMgb2YgdHdvIGJvZGllcyBhcmUgaW50ZXJzZWN0aW5nLgogICAgICogQHBhcmFtIHBhaXJzMSBib2R5QSBpcyBhcHBlbmRlZCB0byB0aGlzIGFycmF5IGlmIGludGVyc2VjdGlvbgogICAgICogQHBhcmFtIHBhaXJzMiBib2R5QiBpcyBhcHBlbmRlZCB0byB0aGlzIGFycmF5IGlmIGludGVyc2VjdGlvbgogICAgICovCgoKICAgIGRvQm91bmRpbmdTcGhlcmVCcm9hZHBoYXNlKGJvZHlBLCBib2R5QiwgcGFpcnMxLCBwYWlyczIpIHsKICAgICAgY29uc3QgciA9IEJyb2FkcGhhc2VfY29sbGlzaW9uUGFpcnNfcjsKICAgICAgYm9keUIucG9zaXRpb24udnN1Yihib2R5QS5wb3NpdGlvbiwgcik7CiAgICAgIGNvbnN0IGJvdW5kaW5nUmFkaXVzU3VtMiA9IChib2R5QS5ib3VuZGluZ1JhZGl1cyArIGJvZHlCLmJvdW5kaW5nUmFkaXVzKSAqKiAyOwogICAgICBjb25zdCBub3JtMiA9IHIubGVuZ3RoU3F1YXJlZCgpOwoKICAgICAgaWYgKG5vcm0yIDwgYm91bmRpbmdSYWRpdXNTdW0yKSB7CiAgICAgICAgcGFpcnMxLnB1c2goYm9keUEpOwogICAgICAgIHBhaXJzMi5wdXNoKGJvZHlCKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBDaGVjayBpZiB0aGUgYm91bmRpbmcgYm94ZXMgb2YgdHdvIGJvZGllcyBhcmUgaW50ZXJzZWN0aW5nLgogICAgICovCgoKICAgIGRvQm91bmRpbmdCb3hCcm9hZHBoYXNlKGJvZHlBLCBib2R5QiwgcGFpcnMxLCBwYWlyczIpIHsKICAgICAgaWYgKGJvZHlBLmFhYmJOZWVkc1VwZGF0ZSkgewogICAgICAgIGJvZHlBLnVwZGF0ZUFBQkIoKTsKICAgICAgfQoKICAgICAgaWYgKGJvZHlCLmFhYmJOZWVkc1VwZGF0ZSkgewogICAgICAgIGJvZHlCLnVwZGF0ZUFBQkIoKTsKICAgICAgfSAvLyBDaGVjayBBQUJCIC8gQUFCQgoKCiAgICAgIGlmIChib2R5QS5hYWJiLm92ZXJsYXBzKGJvZHlCLmFhYmIpKSB7CiAgICAgICAgcGFpcnMxLnB1c2goYm9keUEpOwogICAgICAgIHBhaXJzMi5wdXNoKGJvZHlCKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBSZW1vdmVzIGR1cGxpY2F0ZSBwYWlycyBmcm9tIHRoZSBwYWlyIGFycmF5cy4KICAgICAqLwoKCiAgICBtYWtlUGFpcnNVbmlxdWUocGFpcnMxLCBwYWlyczIpIHsKICAgICAgY29uc3QgdCA9IEJyb2FkcGhhc2VfbWFrZVBhaXJzVW5pcXVlX3RlbXA7CiAgICAgIGNvbnN0IHAxID0gQnJvYWRwaGFzZV9tYWtlUGFpcnNVbmlxdWVfcDE7CiAgICAgIGNvbnN0IHAyID0gQnJvYWRwaGFzZV9tYWtlUGFpcnNVbmlxdWVfcDI7CiAgICAgIGNvbnN0IE4gPSBwYWlyczEubGVuZ3RoOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICAgIHAxW2ldID0gcGFpcnMxW2ldOwogICAgICAgIHAyW2ldID0gcGFpcnMyW2ldOwogICAgICB9CgogICAgICBwYWlyczEubGVuZ3RoID0gMDsKICAgICAgcGFpcnMyLmxlbmd0aCA9IDA7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgY29uc3QgaWQxID0gcDFbaV0uaWQ7CiAgICAgICAgY29uc3QgaWQyID0gcDJbaV0uaWQ7CiAgICAgICAgY29uc3Qga2V5ID0gaWQxIDwgaWQyID8gYCR7aWQxfSwke2lkMn1gIDogYCR7aWQyfSwke2lkMX1gOwogICAgICAgIHRba2V5XSA9IGk7CiAgICAgICAgdC5rZXlzLnB1c2goa2V5KTsKICAgICAgfQoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IHQua2V5cy5sZW5ndGg7IGkrKykgewogICAgICAgIGNvbnN0IGtleSA9IHQua2V5cy5wb3AoKTsKICAgICAgICBjb25zdCBwYWlySW5kZXggPSB0W2tleV07CiAgICAgICAgcGFpcnMxLnB1c2gocDFbcGFpckluZGV4XSk7CiAgICAgICAgcGFpcnMyLnB1c2gocDJbcGFpckluZGV4XSk7CiAgICAgICAgZGVsZXRlIHRba2V5XTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBUbyBiZSBpbXBsZW1lbnRlZCBieSBzdWJjYXNzZXMKICAgICAqLwoKCiAgICBzZXRXb3JsZCh3b3JsZCkge30KICAgIC8qKgogICAgICogQ2hlY2sgaWYgdGhlIGJvdW5kaW5nIHNwaGVyZXMgb2YgdHdvIGJvZGllcyBvdmVybGFwLgogICAgICovCgoKICAgIHN0YXRpYyBib3VuZGluZ1NwaGVyZUNoZWNrKGJvZHlBLCBib2R5QikgewogICAgICBjb25zdCBkaXN0ID0gbmV3IFZlYzMoKTsgLy8gYnNjX2Rpc3Q7CgogICAgICBib2R5QS5wb3NpdGlvbi52c3ViKGJvZHlCLnBvc2l0aW9uLCBkaXN0KTsKICAgICAgY29uc3Qgc2EgPSBib2R5QS5zaGFwZXNbMF07CiAgICAgIGNvbnN0IHNiID0gYm9keUIuc2hhcGVzWzBdOwogICAgICByZXR1cm4gTWF0aC5wb3coc2EuYm91bmRpbmdTcGhlcmVSYWRpdXMgKyBzYi5ib3VuZGluZ1NwaGVyZVJhZGl1cywgMikgPiBkaXN0Lmxlbmd0aFNxdWFyZWQoKTsKICAgIH0KICAgIC8qKgogICAgICogUmV0dXJucyBhbGwgdGhlIGJvZGllcyB3aXRoaW4gdGhlIEFBQkIuCiAgICAgKi8KCgogICAgYWFiYlF1ZXJ5KHdvcmxkLCBhYWJiLCByZXN1bHQpIHsKICAgICAgY29uc29sZS53YXJuKCcuYWFiYlF1ZXJ5IGlzIG5vdCBpbXBsZW1lbnRlZCBpbiB0aGlzIEJyb2FkcGhhc2Ugc3ViY2xhc3MuJyk7CiAgICAgIHJldHVybiBbXTsKICAgIH0KCiAgfSAvLyBUZW1wIG9iamVjdHMKCiAgY29uc3QgQnJvYWRwaGFzZV9jb2xsaXNpb25QYWlyc19yID0gbmV3IFZlYzMoKTsKICBuZXcgVmVjMygpOwogIG5ldyBRdWF0ZXJuaW9uKCk7CiAgbmV3IFZlYzMoKTsKICBjb25zdCBCcm9hZHBoYXNlX21ha2VQYWlyc1VuaXF1ZV90ZW1wID0gewogICAga2V5czogW10KICB9OwogIGNvbnN0IEJyb2FkcGhhc2VfbWFrZVBhaXJzVW5pcXVlX3AxID0gW107CiAgY29uc3QgQnJvYWRwaGFzZV9tYWtlUGFpcnNVbmlxdWVfcDIgPSBbXTsKICBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKCiAgLyoqCiAgICogTmFpdmUgYnJvYWRwaGFzZSBpbXBsZW1lbnRhdGlvbiwgdXNlZCBpbiBsYWNrIG9mIGJldHRlciBvbmVzLgogICAqCiAgICogVGhlIG5haXZlIGJyb2FkcGhhc2UgbG9va3MgYXQgYWxsIHBvc3NpYmxlIHBhaXJzIHdpdGhvdXQgcmVzdHJpY3Rpb24sIHRoZXJlZm9yZSBpdCBoYXMgY29tcGxleGl0eSBOXjIgXyh3aGljaCBpcyBiYWQpXwogICAqLwogIGNsYXNzIE5haXZlQnJvYWRwaGFzZSBleHRlbmRzIEJyb2FkcGhhc2UgewogICAgLyoqCiAgICAgKiBAdG9kbyBSZW1vdmUgdXNlbGVzcyBjb25zdHJ1Y3RvcgogICAgICovCiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgc3VwZXIoKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IGFsbCB0aGUgY29sbGlzaW9uIHBhaXJzIGluIHRoZSBwaHlzaWNzIHdvcmxkCiAgICAgKi8KCgogICAgY29sbGlzaW9uUGFpcnMod29ybGQsIHBhaXJzMSwgcGFpcnMyKSB7CiAgICAgIGNvbnN0IGJvZGllcyA9IHdvcmxkLmJvZGllczsKICAgICAgY29uc3QgbiA9IGJvZGllcy5sZW5ndGg7CiAgICAgIGxldCBiaTsKICAgICAgbGV0IGJqOyAvLyBOYWl2ZSBOXjIgZnR3IQoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IG47IGkrKykgewogICAgICAgIGZvciAobGV0IGogPSAwOyBqICE9PSBpOyBqKyspIHsKICAgICAgICAgIGJpID0gYm9kaWVzW2ldOwogICAgICAgICAgYmogPSBib2RpZXNbal07CgogICAgICAgICAgaWYgKCF0aGlzLm5lZWRCcm9hZHBoYXNlQ29sbGlzaW9uKGJpLCBiaikpIHsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9CgogICAgICAgICAgdGhpcy5pbnRlcnNlY3Rpb25UZXN0KGJpLCBiaiwgcGFpcnMxLCBwYWlyczIpOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBSZXR1cm5zIGFsbCB0aGUgYm9kaWVzIHdpdGhpbiBhbiBBQUJCLgogICAgICogQHBhcmFtIHJlc3VsdCBBbiBhcnJheSB0byBzdG9yZSByZXN1bHRpbmcgYm9kaWVzIGluLgogICAgICovCgoKICAgIGFhYmJRdWVyeSh3b3JsZCwgYWFiYiwgcmVzdWx0KSB7CiAgICAgIGlmIChyZXN1bHQgPT09IHZvaWQgMCkgewogICAgICAgIHJlc3VsdCA9IFtdOwogICAgICB9CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdvcmxkLmJvZGllcy5sZW5ndGg7IGkrKykgewogICAgICAgIGNvbnN0IGIgPSB3b3JsZC5ib2RpZXNbaV07CgogICAgICAgIGlmIChiLmFhYmJOZWVkc1VwZGF0ZSkgewogICAgICAgICAgYi51cGRhdGVBQUJCKCk7CiAgICAgICAgfSAvLyBVZ2x5IGhhY2sgdW50aWwgQm9keSBnZXRzIGFhYmIKCgogICAgICAgIGlmIChiLmFhYmIub3ZlcmxhcHMoYWFiYikpIHsKICAgICAgICAgIHJlc3VsdC5wdXNoKGIpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KCiAgfQoKICAvKioKICAgKiBTdG9yYWdlIGZvciBSYXkgY2FzdGluZyBkYXRhCiAgICovCiAgY2xhc3MgUmF5Y2FzdFJlc3VsdCB7CiAgICAvKioKICAgICAqIHJheUZyb21Xb3JsZAogICAgICovCgogICAgLyoqCiAgICAgKiByYXlUb1dvcmxkCiAgICAgKi8KCiAgICAvKioKICAgICAqIGhpdE5vcm1hbFdvcmxkCiAgICAgKi8KCiAgICAvKioKICAgICAqIGhpdFBvaW50V29ybGQKICAgICAqLwoKICAgIC8qKgogICAgICogaGFzSGl0CiAgICAgKi8KCiAgICAvKioKICAgICAqIHNoYXBlCiAgICAgKi8KCiAgICAvKioKICAgICAqIGJvZHkKICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIGluZGV4IG9mIHRoZSBoaXQgdHJpYW5nbGUsIGlmIHRoZSBoaXQgc2hhcGUgd2FzIGEgdHJpbWVzaAogICAgICovCgogICAgLyoqCiAgICAgKiBEaXN0YW5jZSB0byB0aGUgaGl0LiBXaWxsIGJlIHNldCB0byAtMSBpZiB0aGVyZSB3YXMgbm8gaGl0CiAgICAgKi8KCiAgICAvKioKICAgICAqIElmIHRoZSByYXkgc2hvdWxkIHN0b3AgdHJhdmVyc2luZyB0aGUgYm9kaWVzCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKCkgewogICAgICB0aGlzLnJheUZyb21Xb3JsZCA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMucmF5VG9Xb3JsZCA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuaGl0Tm9ybWFsV29ybGQgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmhpdFBvaW50V29ybGQgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmhhc0hpdCA9IGZhbHNlOwogICAgICB0aGlzLnNoYXBlID0gbnVsbDsKICAgICAgdGhpcy5ib2R5ID0gbnVsbDsKICAgICAgdGhpcy5oaXRGYWNlSW5kZXggPSAtMTsKICAgICAgdGhpcy5kaXN0YW5jZSA9IC0xOwogICAgICB0aGlzLnNob3VsZFN0b3AgPSBmYWxzZTsKICAgIH0KICAgIC8qKgogICAgICogUmVzZXQgYWxsIHJlc3VsdCBkYXRhLgogICAgICovCgoKICAgIHJlc2V0KCkgewogICAgICB0aGlzLnJheUZyb21Xb3JsZC5zZXRaZXJvKCk7CiAgICAgIHRoaXMucmF5VG9Xb3JsZC5zZXRaZXJvKCk7CiAgICAgIHRoaXMuaGl0Tm9ybWFsV29ybGQuc2V0WmVybygpOwogICAgICB0aGlzLmhpdFBvaW50V29ybGQuc2V0WmVybygpOwogICAgICB0aGlzLmhhc0hpdCA9IGZhbHNlOwogICAgICB0aGlzLnNoYXBlID0gbnVsbDsKICAgICAgdGhpcy5ib2R5ID0gbnVsbDsKICAgICAgdGhpcy5oaXRGYWNlSW5kZXggPSAtMTsKICAgICAgdGhpcy5kaXN0YW5jZSA9IC0xOwogICAgICB0aGlzLnNob3VsZFN0b3AgPSBmYWxzZTsKICAgIH0KICAgIC8qKgogICAgICogYWJvcnQKICAgICAqLwoKCiAgICBhYm9ydCgpIHsKICAgICAgdGhpcy5zaG91bGRTdG9wID0gdHJ1ZTsKICAgIH0KICAgIC8qKgogICAgICogU2V0IHJlc3VsdCBkYXRhLgogICAgICovCgoKICAgIHNldChyYXlGcm9tV29ybGQsIHJheVRvV29ybGQsIGhpdE5vcm1hbFdvcmxkLCBoaXRQb2ludFdvcmxkLCBzaGFwZSwgYm9keSwgZGlzdGFuY2UpIHsKICAgICAgdGhpcy5yYXlGcm9tV29ybGQuY29weShyYXlGcm9tV29ybGQpOwogICAgICB0aGlzLnJheVRvV29ybGQuY29weShyYXlUb1dvcmxkKTsKICAgICAgdGhpcy5oaXROb3JtYWxXb3JsZC5jb3B5KGhpdE5vcm1hbFdvcmxkKTsKICAgICAgdGhpcy5oaXRQb2ludFdvcmxkLmNvcHkoaGl0UG9pbnRXb3JsZCk7CiAgICAgIHRoaXMuc2hhcGUgPSBzaGFwZTsKICAgICAgdGhpcy5ib2R5ID0gYm9keTsKICAgICAgdGhpcy5kaXN0YW5jZSA9IGRpc3RhbmNlOwogICAgfQoKICB9CgogIGxldCBfU2hhcGUkdHlwZXMkU1BIRVJFLCBfU2hhcGUkdHlwZXMkUExBTkUsIF9TaGFwZSR0eXBlcyRCT1gsIF9TaGFwZSR0eXBlcyRDWUxJTkRFUiwgX1NoYXBlJHR5cGVzJENPTlZFWFBPLCBfU2hhcGUkdHlwZXMkSEVJR0hURkksIF9TaGFwZSR0eXBlcyRUUklNRVNIOwoKICAvKioKICAgKiBSQVlfTU9ERVMKICAgKi8KICBjb25zdCBSQVlfTU9ERVMgPSB7CiAgICAvKiogQ0xPU0VTVCAqLwogICAgQ0xPU0VTVDogMSwKCiAgICAvKiogQU5ZICovCiAgICBBTlk6IDIsCgogICAgLyoqIEFMTCAqLwogICAgQUxMOiA0CiAgfTsKICAvKioKICAgKiBSYXlNb2RlCiAgICovCgogIF9TaGFwZSR0eXBlcyRTUEhFUkUgPSBTaGFwZS50eXBlcy5TUEhFUkU7CiAgX1NoYXBlJHR5cGVzJFBMQU5FID0gU2hhcGUudHlwZXMuUExBTkU7CiAgX1NoYXBlJHR5cGVzJEJPWCA9IFNoYXBlLnR5cGVzLkJPWDsKICBfU2hhcGUkdHlwZXMkQ1lMSU5ERVIgPSBTaGFwZS50eXBlcy5DWUxJTkRFUjsKICBfU2hhcGUkdHlwZXMkQ09OVkVYUE8gPSBTaGFwZS50eXBlcy5DT05WRVhQT0xZSEVEUk9OOwogIF9TaGFwZSR0eXBlcyRIRUlHSFRGSSA9IFNoYXBlLnR5cGVzLkhFSUdIVEZJRUxEOwogIF9TaGFwZSR0eXBlcyRUUklNRVNIID0gU2hhcGUudHlwZXMuVFJJTUVTSDsKCiAgLyoqCiAgICogQSBsaW5lIGluIDNEIHNwYWNlIHRoYXQgaW50ZXJzZWN0cyBib2RpZXMgYW5kIHJldHVybiBwb2ludHMuCiAgICovCiAgY2xhc3MgUmF5IHsKICAgIC8qKgogICAgICogZnJvbQogICAgICovCgogICAgLyoqCiAgICAgKiB0bwogICAgICovCgogICAgLyoqCiAgICAgKiBkaXJlY3Rpb24KICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIHByZWNpc2lvbiBvZiB0aGUgcmF5LiBVc2VkIHdoZW4gY2hlY2tpbmcgcGFyYWxsZWxpdHkgZXRjLgogICAgICogQGRlZmF1bHQgMC4wMDAxCiAgICAgKi8KCiAgICAvKioKICAgICAqIFNldCB0byBgZmFsc2VgIGlmIHlvdSBkb24ndCB3YW50IHRoZSBSYXkgdG8gdGFrZSBgY29sbGlzaW9uUmVzcG9uc2VgIGZsYWdzIGludG8gYWNjb3VudCBvbiBib2RpZXMgYW5kIHNoYXBlcy4KICAgICAqIEBkZWZhdWx0IHRydWUKICAgICAqLwoKICAgIC8qKgogICAgICogSWYgc2V0IHRvIGB0cnVlYCwgdGhlIHJheSBza2lwcyBhbnkgaGl0cyB3aXRoIG5vcm1hbC5kb3QocmF5RGlyZWN0aW9uKSA8IDAuCiAgICAgKiBAZGVmYXVsdCBmYWxzZQogICAgICovCgogICAgLyoqCiAgICAgKiBjb2xsaXNpb25GaWx0ZXJNYXNrCiAgICAgKiBAZGVmYXVsdCAtMQogICAgICovCgogICAgLyoqCiAgICAgKiBjb2xsaXNpb25GaWx0ZXJHcm91cAogICAgICogQGRlZmF1bHQgLTEKICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIGludGVyc2VjdGlvbiBtb2RlLiBTaG91bGQgYmUgUmF5LkFOWSwgUmF5LkFMTCBvciBSYXkuQ0xPU0VTVC4KICAgICAqIEBkZWZhdWx0IFJBWS5BTlkKICAgICAqLwoKICAgIC8qKgogICAgICogQ3VycmVudCByZXN1bHQgb2JqZWN0LgogICAgICovCgogICAgLyoqCiAgICAgKiBXaWxsIGJlIHNldCB0byBgdHJ1ZWAgZHVyaW5nIGludGVyc2VjdFdvcmxkKCkgaWYgdGhlIHJheSBoaXQgYW55dGhpbmcuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFVzZXItcHJvdmlkZWQgcmVzdWx0IGNhbGxiYWNrLiBXaWxsIGJlIHVzZWQgaWYgbW9kZSBpcyBSYXkuQUxMLgogICAgICovCgogICAgLyoqCiAgICAgKiBDTE9TRVNUCiAgICAgKi8KCiAgICAvKioKICAgICAqIEFOWQogICAgICovCgogICAgLyoqCiAgICAgKiBBTEwKICAgICAqLwogICAgZ2V0IFtfU2hhcGUkdHlwZXMkU1BIRVJFXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2ludGVyc2VjdFNwaGVyZTsKICAgIH0KCiAgICBnZXQgW19TaGFwZSR0eXBlcyRQTEFORV0oKSB7CiAgICAgIHJldHVybiB0aGlzLl9pbnRlcnNlY3RQbGFuZTsKICAgIH0KCiAgICBnZXQgW19TaGFwZSR0eXBlcyRCT1hdKCkgewogICAgICByZXR1cm4gdGhpcy5faW50ZXJzZWN0Qm94OwogICAgfQoKICAgIGdldCBbX1NoYXBlJHR5cGVzJENZTElOREVSXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2ludGVyc2VjdENvbnZleDsKICAgIH0KCiAgICBnZXQgW19TaGFwZSR0eXBlcyRDT05WRVhQT10oKSB7CiAgICAgIHJldHVybiB0aGlzLl9pbnRlcnNlY3RDb252ZXg7CiAgICB9CgogICAgZ2V0IFtfU2hhcGUkdHlwZXMkSEVJR0hURkldKCkgewogICAgICByZXR1cm4gdGhpcy5faW50ZXJzZWN0SGVpZ2h0ZmllbGQ7CiAgICB9CgogICAgZ2V0IFtfU2hhcGUkdHlwZXMkVFJJTUVTSF0oKSB7CiAgICAgIHJldHVybiB0aGlzLl9pbnRlcnNlY3RUcmltZXNoOwogICAgfQoKICAgIGNvbnN0cnVjdG9yKGZyb20sIHRvKSB7CiAgICAgIGlmIChmcm9tID09PSB2b2lkIDApIHsKICAgICAgICBmcm9tID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgaWYgKHRvID09PSB2b2lkIDApIHsKICAgICAgICB0byA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIHRoaXMuZnJvbSA9IGZyb20uY2xvbmUoKTsKICAgICAgdGhpcy50byA9IHRvLmNsb25lKCk7CiAgICAgIHRoaXMuZGlyZWN0aW9uID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5wcmVjaXNpb24gPSAwLjAwMDE7CiAgICAgIHRoaXMuY2hlY2tDb2xsaXNpb25SZXNwb25zZSA9IHRydWU7CiAgICAgIHRoaXMuc2tpcEJhY2tmYWNlcyA9IGZhbHNlOwogICAgICB0aGlzLmNvbGxpc2lvbkZpbHRlck1hc2sgPSAtMTsKICAgICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJHcm91cCA9IC0xOwogICAgICB0aGlzLm1vZGUgPSBSYXkuQU5ZOwogICAgICB0aGlzLnJlc3VsdCA9IG5ldyBSYXljYXN0UmVzdWx0KCk7CiAgICAgIHRoaXMuaGFzSGl0ID0gZmFsc2U7CgogICAgICB0aGlzLmNhbGxiYWNrID0gcmVzdWx0ID0+IHt9OwogICAgfQogICAgLyoqCiAgICAgKiBEbyBpdGVyc2VjdGlvbiBhZ2FpbnN0IGFsbCBib2RpZXMgaW4gdGhlIGdpdmVuIFdvcmxkLgogICAgICogQHJldHVybiBUcnVlIGlmIHRoZSByYXkgaGl0IGFueXRoaW5nLCBvdGhlcndpc2UgZmFsc2UuCiAgICAgKi8KCgogICAgaW50ZXJzZWN0V29ybGQod29ybGQsIG9wdGlvbnMpIHsKICAgICAgdGhpcy5tb2RlID0gb3B0aW9ucy5tb2RlIHx8IFJheS5BTlk7CiAgICAgIHRoaXMucmVzdWx0ID0gb3B0aW9ucy5yZXN1bHQgfHwgbmV3IFJheWNhc3RSZXN1bHQoKTsKICAgICAgdGhpcy5za2lwQmFja2ZhY2VzID0gISFvcHRpb25zLnNraXBCYWNrZmFjZXM7CiAgICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyTWFzayA9IHR5cGVvZiBvcHRpb25zLmNvbGxpc2lvbkZpbHRlck1hc2sgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJNYXNrIDogLTE7CiAgICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyR3JvdXAgPSB0eXBlb2Ygb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJHcm91cCAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmNvbGxpc2lvbkZpbHRlckdyb3VwIDogLTE7CiAgICAgIHRoaXMuY2hlY2tDb2xsaXNpb25SZXNwb25zZSA9IHR5cGVvZiBvcHRpb25zLmNoZWNrQ29sbGlzaW9uUmVzcG9uc2UgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5jaGVja0NvbGxpc2lvblJlc3BvbnNlIDogdHJ1ZTsKCiAgICAgIGlmIChvcHRpb25zLmZyb20pIHsKICAgICAgICB0aGlzLmZyb20uY29weShvcHRpb25zLmZyb20pOwogICAgICB9CgogICAgICBpZiAob3B0aW9ucy50bykgewogICAgICAgIHRoaXMudG8uY29weShvcHRpb25zLnRvKTsKICAgICAgfQoKICAgICAgdGhpcy5jYWxsYmFjayA9IG9wdGlvbnMuY2FsbGJhY2sgfHwgKCgpID0+IHt9KTsKCiAgICAgIHRoaXMuaGFzSGl0ID0gZmFsc2U7CiAgICAgIHRoaXMucmVzdWx0LnJlc2V0KCk7CiAgICAgIHRoaXMudXBkYXRlRGlyZWN0aW9uKCk7CiAgICAgIHRoaXMuZ2V0QUFCQih0bXBBQUJCJDEpOwogICAgICB0bXBBcnJheS5sZW5ndGggPSAwOwogICAgICB3b3JsZC5icm9hZHBoYXNlLmFhYmJRdWVyeSh3b3JsZCwgdG1wQUFCQiQxLCB0bXBBcnJheSk7CiAgICAgIHRoaXMuaW50ZXJzZWN0Qm9kaWVzKHRtcEFycmF5KTsKICAgICAgcmV0dXJuIHRoaXMuaGFzSGl0OwogICAgfQogICAgLyoqCiAgICAgKiBTaG9vdCBhIHJheSBhdCBhIGJvZHksIGdldCBiYWNrIGluZm9ybWF0aW9uIGFib3V0IHRoZSBoaXQuCiAgICAgKiBAZGVwcmVjYXRlZCBAcGFyYW0gcmVzdWx0IHNldCB0aGUgcmVzdWx0IHByb3BlcnR5IG9mIHRoZSBSYXkgaW5zdGVhZC4KICAgICAqLwoKCiAgICBpbnRlcnNlY3RCb2R5KGJvZHksIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0KSB7CiAgICAgICAgdGhpcy5yZXN1bHQgPSByZXN1bHQ7CiAgICAgICAgdGhpcy51cGRhdGVEaXJlY3Rpb24oKTsKICAgICAgfQoKICAgICAgY29uc3QgY2hlY2tDb2xsaXNpb25SZXNwb25zZSA9IHRoaXMuY2hlY2tDb2xsaXNpb25SZXNwb25zZTsKCiAgICAgIGlmIChjaGVja0NvbGxpc2lvblJlc3BvbnNlICYmICFib2R5LmNvbGxpc2lvblJlc3BvbnNlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoKHRoaXMuY29sbGlzaW9uRmlsdGVyR3JvdXAgJiBib2R5LmNvbGxpc2lvbkZpbHRlck1hc2spID09PSAwIHx8IChib2R5LmNvbGxpc2lvbkZpbHRlckdyb3VwICYgdGhpcy5jb2xsaXNpb25GaWx0ZXJNYXNrKSA9PT0gMCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgY29uc3QgeGkgPSBpbnRlcnNlY3RCb2R5X3hpOwogICAgICBjb25zdCBxaSA9IGludGVyc2VjdEJvZHlfcWk7CgogICAgICBmb3IgKGxldCBpID0gMCwgTiA9IGJvZHkuc2hhcGVzLmxlbmd0aDsgaSA8IE47IGkrKykgewogICAgICAgIGNvbnN0IHNoYXBlID0gYm9keS5zaGFwZXNbaV07CgogICAgICAgIGlmIChjaGVja0NvbGxpc2lvblJlc3BvbnNlICYmICFzaGFwZS5jb2xsaXNpb25SZXNwb25zZSkgewogICAgICAgICAgY29udGludWU7IC8vIFNraXAKICAgICAgICB9CgogICAgICAgIGJvZHkucXVhdGVybmlvbi5tdWx0KGJvZHkuc2hhcGVPcmllbnRhdGlvbnNbaV0sIHFpKTsKICAgICAgICBib2R5LnF1YXRlcm5pb24udm11bHQoYm9keS5zaGFwZU9mZnNldHNbaV0sIHhpKTsKICAgICAgICB4aS52YWRkKGJvZHkucG9zaXRpb24sIHhpKTsKICAgICAgICB0aGlzLmludGVyc2VjdFNoYXBlKHNoYXBlLCBxaSwgeGksIGJvZHkpOwoKICAgICAgICBpZiAodGhpcy5yZXN1bHQuc2hvdWxkU3RvcCkgewogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIFNob290IGEgcmF5IGF0IGFuIGFycmF5IGJvZGllcywgZ2V0IGJhY2sgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGhpdC4KICAgICAqIEBwYXJhbSBib2RpZXMgQW4gYXJyYXkgb2YgQm9keSBvYmplY3RzLgogICAgICogQGRlcHJlY2F0ZWQgQHBhcmFtIHJlc3VsdCBzZXQgdGhlIHJlc3VsdCBwcm9wZXJ0eSBvZiB0aGUgUmF5IGluc3RlYWQuCiAgICAgKgogICAgICovCgoKICAgIGludGVyc2VjdEJvZGllcyhib2RpZXMsIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0KSB7CiAgICAgICAgdGhpcy5yZXN1bHQgPSByZXN1bHQ7CiAgICAgICAgdGhpcy51cGRhdGVEaXJlY3Rpb24oKTsKICAgICAgfQoKICAgICAgZm9yIChsZXQgaSA9IDAsIGwgPSBib2RpZXMubGVuZ3RoOyAhdGhpcy5yZXN1bHQuc2hvdWxkU3RvcCAmJiBpIDwgbDsgaSsrKSB7CiAgICAgICAgdGhpcy5pbnRlcnNlY3RCb2R5KGJvZGllc1tpXSk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlcyB0aGUgZGlyZWN0aW9uIHZlY3Rvci4KICAgICAqLwoKCiAgICB1cGRhdGVEaXJlY3Rpb24oKSB7CiAgICAgIHRoaXMudG8udnN1Yih0aGlzLmZyb20sIHRoaXMuZGlyZWN0aW9uKTsKICAgICAgdGhpcy5kaXJlY3Rpb24ubm9ybWFsaXplKCk7CiAgICB9CgogICAgaW50ZXJzZWN0U2hhcGUoc2hhcGUsIHF1YXQsIHBvc2l0aW9uLCBib2R5KSB7CiAgICAgIGNvbnN0IGZyb20gPSB0aGlzLmZyb207IC8vIENoZWNraW5nIGJvdW5kaW5nU3BoZXJlCgogICAgICBjb25zdCBkaXN0YW5jZSA9IGRpc3RhbmNlRnJvbUludGVyc2VjdGlvbihmcm9tLCB0aGlzLmRpcmVjdGlvbiwgcG9zaXRpb24pOwoKICAgICAgaWYgKGRpc3RhbmNlID4gc2hhcGUuYm91bmRpbmdTcGhlcmVSYWRpdXMpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnN0IGludGVyc2VjdE1ldGhvZCA9IHRoaXNbc2hhcGUudHlwZV07CgogICAgICBpZiAoaW50ZXJzZWN0TWV0aG9kKSB7CiAgICAgICAgaW50ZXJzZWN0TWV0aG9kLmNhbGwodGhpcywgc2hhcGUsIHF1YXQsIHBvc2l0aW9uLCBib2R5LCBzaGFwZSk7CiAgICAgIH0KICAgIH0KCiAgICBfaW50ZXJzZWN0Qm94KGJveCwgcXVhdCwgcG9zaXRpb24sIGJvZHksIHJlcG9ydGVkU2hhcGUpIHsKICAgICAgcmV0dXJuIHRoaXMuX2ludGVyc2VjdENvbnZleChib3guY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLCBxdWF0LCBwb3NpdGlvbiwgYm9keSwgcmVwb3J0ZWRTaGFwZSk7CiAgICB9CgogICAgX2ludGVyc2VjdFBsYW5lKHNoYXBlLCBxdWF0LCBwb3NpdGlvbiwgYm9keSwgcmVwb3J0ZWRTaGFwZSkgewogICAgICBjb25zdCBmcm9tID0gdGhpcy5mcm9tOwogICAgICBjb25zdCB0byA9IHRoaXMudG87CiAgICAgIGNvbnN0IGRpcmVjdGlvbiA9IHRoaXMuZGlyZWN0aW9uOyAvLyBHZXQgcGxhbmUgbm9ybWFsCgogICAgICBjb25zdCB3b3JsZE5vcm1hbCA9IG5ldyBWZWMzKDAsIDAsIDEpOwogICAgICBxdWF0LnZtdWx0KHdvcmxkTm9ybWFsLCB3b3JsZE5vcm1hbCk7CiAgICAgIGNvbnN0IGxlbiA9IG5ldyBWZWMzKCk7CiAgICAgIGZyb20udnN1Yihwb3NpdGlvbiwgbGVuKTsKICAgICAgY29uc3QgcGxhbmVUb0Zyb20gPSBsZW4uZG90KHdvcmxkTm9ybWFsKTsKICAgICAgdG8udnN1Yihwb3NpdGlvbiwgbGVuKTsKICAgICAgY29uc3QgcGxhbmVUb1RvID0gbGVuLmRvdCh3b3JsZE5vcm1hbCk7CgogICAgICBpZiAocGxhbmVUb0Zyb20gKiBwbGFuZVRvVG8gPiAwKSB7CiAgICAgICAgLy8gImZyb20iIGFuZCAidG8iIGFyZSBvbiB0aGUgc2FtZSBzaWRlIG9mIHRoZSBwbGFuZS4uLiBiYWlsIG91dAogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKGZyb20uZGlzdGFuY2VUbyh0bykgPCBwbGFuZVRvRnJvbSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgY29uc3Qgbl9kb3RfZGlyID0gd29ybGROb3JtYWwuZG90KGRpcmVjdGlvbik7CgogICAgICBpZiAoTWF0aC5hYnMobl9kb3RfZGlyKSA8IHRoaXMucHJlY2lzaW9uKSB7CiAgICAgICAgLy8gTm8gaW50ZXJzZWN0aW9uCiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjb25zdCBwbGFuZVBvaW50VG9Gcm9tID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgZGlyX3NjYWxlZF93aXRoX3QgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBoaXRQb2ludFdvcmxkID0gbmV3IFZlYzMoKTsKICAgICAgZnJvbS52c3ViKHBvc2l0aW9uLCBwbGFuZVBvaW50VG9Gcm9tKTsKICAgICAgY29uc3QgdCA9IC13b3JsZE5vcm1hbC5kb3QocGxhbmVQb2ludFRvRnJvbSkgLyBuX2RvdF9kaXI7CiAgICAgIGRpcmVjdGlvbi5zY2FsZSh0LCBkaXJfc2NhbGVkX3dpdGhfdCk7CiAgICAgIGZyb20udmFkZChkaXJfc2NhbGVkX3dpdGhfdCwgaGl0UG9pbnRXb3JsZCk7CiAgICAgIHRoaXMucmVwb3J0SW50ZXJzZWN0aW9uKHdvcmxkTm9ybWFsLCBoaXRQb2ludFdvcmxkLCByZXBvcnRlZFNoYXBlLCBib2R5LCAtMSk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgd29ybGQgQUFCQiBvZiB0aGUgcmF5LgogICAgICovCgoKICAgIGdldEFBQkIoYWFiYikgewogICAgICBjb25zdCB7CiAgICAgICAgbG93ZXJCb3VuZCwKICAgICAgICB1cHBlckJvdW5kCiAgICAgIH0gPSBhYWJiOwogICAgICBjb25zdCB0byA9IHRoaXMudG87CiAgICAgIGNvbnN0IGZyb20gPSB0aGlzLmZyb207CiAgICAgIGxvd2VyQm91bmQueCA9IE1hdGgubWluKHRvLngsIGZyb20ueCk7CiAgICAgIGxvd2VyQm91bmQueSA9IE1hdGgubWluKHRvLnksIGZyb20ueSk7CiAgICAgIGxvd2VyQm91bmQueiA9IE1hdGgubWluKHRvLnosIGZyb20ueik7CiAgICAgIHVwcGVyQm91bmQueCA9IE1hdGgubWF4KHRvLngsIGZyb20ueCk7CiAgICAgIHVwcGVyQm91bmQueSA9IE1hdGgubWF4KHRvLnksIGZyb20ueSk7CiAgICAgIHVwcGVyQm91bmQueiA9IE1hdGgubWF4KHRvLnosIGZyb20ueik7CiAgICB9CgogICAgX2ludGVyc2VjdEhlaWdodGZpZWxkKHNoYXBlLCBxdWF0LCBwb3NpdGlvbiwgYm9keSwgcmVwb3J0ZWRTaGFwZSkgewogICAgICBzaGFwZS5kYXRhOwogICAgICBzaGFwZS5lbGVtZW50U2l6ZTsgLy8gQ29udmVydCB0aGUgcmF5IHRvIGxvY2FsIGhlaWdodGZpZWxkIGNvb3JkaW5hdGVzCgogICAgICBjb25zdCBsb2NhbFJheSA9IGludGVyc2VjdEhlaWdodGZpZWxkX2xvY2FsUmF5OyAvL25ldyBSYXkodGhpcy5mcm9tLCB0aGlzLnRvKTsKCiAgICAgIGxvY2FsUmF5LmZyb20uY29weSh0aGlzLmZyb20pOwogICAgICBsb2NhbFJheS50by5jb3B5KHRoaXMudG8pOwogICAgICBUcmFuc2Zvcm0ucG9pbnRUb0xvY2FsRnJhbWUocG9zaXRpb24sIHF1YXQsIGxvY2FsUmF5LmZyb20sIGxvY2FsUmF5LmZyb20pOwogICAgICBUcmFuc2Zvcm0ucG9pbnRUb0xvY2FsRnJhbWUocG9zaXRpb24sIHF1YXQsIGxvY2FsUmF5LnRvLCBsb2NhbFJheS50byk7CiAgICAgIGxvY2FsUmF5LnVwZGF0ZURpcmVjdGlvbigpOyAvLyBHZXQgdGhlIGluZGV4IG9mIHRoZSBkYXRhIHBvaW50cyB0byB0ZXN0IGFnYWluc3QKCiAgICAgIGNvbnN0IGluZGV4ID0gaW50ZXJzZWN0SGVpZ2h0ZmllbGRfaW5kZXg7CiAgICAgIGxldCBpTWluWDsKICAgICAgbGV0IGlNaW5ZOwogICAgICBsZXQgaU1heFg7CiAgICAgIGxldCBpTWF4WTsgLy8gU2V0IHRvIG1heAoKICAgICAgaU1pblggPSBpTWluWSA9IDA7CiAgICAgIGlNYXhYID0gaU1heFkgPSBzaGFwZS5kYXRhLmxlbmd0aCAtIDE7CiAgICAgIGNvbnN0IGFhYmIgPSBuZXcgQUFCQigpOwogICAgICBsb2NhbFJheS5nZXRBQUJCKGFhYmIpOwogICAgICBzaGFwZS5nZXRJbmRleE9mUG9zaXRpb24oYWFiYi5sb3dlckJvdW5kLngsIGFhYmIubG93ZXJCb3VuZC55LCBpbmRleCwgdHJ1ZSk7CiAgICAgIGlNaW5YID0gTWF0aC5tYXgoaU1pblgsIGluZGV4WzBdKTsKICAgICAgaU1pblkgPSBNYXRoLm1heChpTWluWSwgaW5kZXhbMV0pOwogICAgICBzaGFwZS5nZXRJbmRleE9mUG9zaXRpb24oYWFiYi51cHBlckJvdW5kLngsIGFhYmIudXBwZXJCb3VuZC55LCBpbmRleCwgdHJ1ZSk7CiAgICAgIGlNYXhYID0gTWF0aC5taW4oaU1heFgsIGluZGV4WzBdICsgMSk7CiAgICAgIGlNYXhZID0gTWF0aC5taW4oaU1heFksIGluZGV4WzFdICsgMSk7CgogICAgICBmb3IgKGxldCBpID0gaU1pblg7IGkgPCBpTWF4WDsgaSsrKSB7CiAgICAgICAgZm9yIChsZXQgaiA9IGlNaW5ZOyBqIDwgaU1heFk7IGorKykgewogICAgICAgICAgaWYgKHRoaXMucmVzdWx0LnNob3VsZFN0b3ApIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIHNoYXBlLmdldEFhYmJBdEluZGV4KGksIGosIGFhYmIpOwoKICAgICAgICAgIGlmICghYWFiYi5vdmVybGFwc1JheShsb2NhbFJheSkpIHsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9IC8vIExvd2VyIHRyaWFuZ2xlCgoKICAgICAgICAgIHNoYXBlLmdldENvbnZleFRyaWFuZ2xlUGlsbGFyKGksIGosIGZhbHNlKTsKICAgICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZShwb3NpdGlvbiwgcXVhdCwgc2hhcGUucGlsbGFyT2Zmc2V0LCB3b3JsZFBpbGxhck9mZnNldCk7CgogICAgICAgICAgdGhpcy5faW50ZXJzZWN0Q29udmV4KHNoYXBlLnBpbGxhckNvbnZleCwgcXVhdCwgd29ybGRQaWxsYXJPZmZzZXQsIGJvZHksIHJlcG9ydGVkU2hhcGUsIGludGVyc2VjdENvbnZleE9wdGlvbnMpOwoKICAgICAgICAgIGlmICh0aGlzLnJlc3VsdC5zaG91bGRTdG9wKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0gLy8gVXBwZXIgdHJpYW5nbGUKCgogICAgICAgICAgc2hhcGUuZ2V0Q29udmV4VHJpYW5nbGVQaWxsYXIoaSwgaiwgdHJ1ZSk7CiAgICAgICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUocG9zaXRpb24sIHF1YXQsIHNoYXBlLnBpbGxhck9mZnNldCwgd29ybGRQaWxsYXJPZmZzZXQpOwoKICAgICAgICAgIHRoaXMuX2ludGVyc2VjdENvbnZleChzaGFwZS5waWxsYXJDb252ZXgsIHF1YXQsIHdvcmxkUGlsbGFyT2Zmc2V0LCBib2R5LCByZXBvcnRlZFNoYXBlLCBpbnRlcnNlY3RDb252ZXhPcHRpb25zKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBfaW50ZXJzZWN0U3BoZXJlKHNwaGVyZSwgcXVhdCwgcG9zaXRpb24sIGJvZHksIHJlcG9ydGVkU2hhcGUpIHsKICAgICAgY29uc3QgZnJvbSA9IHRoaXMuZnJvbTsKICAgICAgY29uc3QgdG8gPSB0aGlzLnRvOwogICAgICBjb25zdCByID0gc3BoZXJlLnJhZGl1czsKICAgICAgY29uc3QgYSA9ICh0by54IC0gZnJvbS54KSAqKiAyICsgKHRvLnkgLSBmcm9tLnkpICoqIDIgKyAodG8ueiAtIGZyb20ueikgKiogMjsKICAgICAgY29uc3QgYiA9IDIgKiAoKHRvLnggLSBmcm9tLngpICogKGZyb20ueCAtIHBvc2l0aW9uLngpICsgKHRvLnkgLSBmcm9tLnkpICogKGZyb20ueSAtIHBvc2l0aW9uLnkpICsgKHRvLnogLSBmcm9tLnopICogKGZyb20ueiAtIHBvc2l0aW9uLnopKTsKICAgICAgY29uc3QgYyA9IChmcm9tLnggLSBwb3NpdGlvbi54KSAqKiAyICsgKGZyb20ueSAtIHBvc2l0aW9uLnkpICoqIDIgKyAoZnJvbS56IC0gcG9zaXRpb24ueikgKiogMiAtIHIgKiogMjsKICAgICAgY29uc3QgZGVsdGEgPSBiICoqIDIgLSA0ICogYSAqIGM7CiAgICAgIGNvbnN0IGludGVyc2VjdGlvblBvaW50ID0gUmF5X2ludGVyc2VjdFNwaGVyZV9pbnRlcnNlY3Rpb25Qb2ludDsKICAgICAgY29uc3Qgbm9ybWFsID0gUmF5X2ludGVyc2VjdFNwaGVyZV9ub3JtYWw7CgogICAgICBpZiAoZGVsdGEgPCAwKSB7CiAgICAgICAgLy8gTm8gaW50ZXJzZWN0aW9uCiAgICAgICAgcmV0dXJuOwogICAgICB9IGVsc2UgaWYgKGRlbHRhID09PSAwKSB7CiAgICAgICAgLy8gc2luZ2xlIGludGVyc2VjdGlvbiBwb2ludAogICAgICAgIGZyb20ubGVycCh0bywgZGVsdGEsIGludGVyc2VjdGlvblBvaW50KTsKICAgICAgICBpbnRlcnNlY3Rpb25Qb2ludC52c3ViKHBvc2l0aW9uLCBub3JtYWwpOwogICAgICAgIG5vcm1hbC5ub3JtYWxpemUoKTsKICAgICAgICB0aGlzLnJlcG9ydEludGVyc2VjdGlvbihub3JtYWwsIGludGVyc2VjdGlvblBvaW50LCByZXBvcnRlZFNoYXBlLCBib2R5LCAtMSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc3QgZDEgPSAoLWIgLSBNYXRoLnNxcnQoZGVsdGEpKSAvICgyICogYSk7CiAgICAgICAgY29uc3QgZDIgPSAoLWIgKyBNYXRoLnNxcnQoZGVsdGEpKSAvICgyICogYSk7CgogICAgICAgIGlmIChkMSA+PSAwICYmIGQxIDw9IDEpIHsKICAgICAgICAgIGZyb20ubGVycCh0bywgZDEsIGludGVyc2VjdGlvblBvaW50KTsKICAgICAgICAgIGludGVyc2VjdGlvblBvaW50LnZzdWIocG9zaXRpb24sIG5vcm1hbCk7CiAgICAgICAgICBub3JtYWwubm9ybWFsaXplKCk7CiAgICAgICAgICB0aGlzLnJlcG9ydEludGVyc2VjdGlvbihub3JtYWwsIGludGVyc2VjdGlvblBvaW50LCByZXBvcnRlZFNoYXBlLCBib2R5LCAtMSk7CiAgICAgICAgfQoKICAgICAgICBpZiAodGhpcy5yZXN1bHQuc2hvdWxkU3RvcCkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaWYgKGQyID49IDAgJiYgZDIgPD0gMSkgewogICAgICAgICAgZnJvbS5sZXJwKHRvLCBkMiwgaW50ZXJzZWN0aW9uUG9pbnQpOwogICAgICAgICAgaW50ZXJzZWN0aW9uUG9pbnQudnN1Yihwb3NpdGlvbiwgbm9ybWFsKTsKICAgICAgICAgIG5vcm1hbC5ub3JtYWxpemUoKTsKICAgICAgICAgIHRoaXMucmVwb3J0SW50ZXJzZWN0aW9uKG5vcm1hbCwgaW50ZXJzZWN0aW9uUG9pbnQsIHJlcG9ydGVkU2hhcGUsIGJvZHksIC0xKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBfaW50ZXJzZWN0Q29udmV4KHNoYXBlLCBxdWF0LCBwb3NpdGlvbiwgYm9keSwgcmVwb3J0ZWRTaGFwZSwgb3B0aW9ucykgewogICAgICBjb25zdCBub3JtYWwgPSBpbnRlcnNlY3RDb252ZXhfbm9ybWFsOwogICAgICBjb25zdCB2ZWN0b3IgPSBpbnRlcnNlY3RDb252ZXhfdmVjdG9yOwogICAgICBjb25zdCBmYWNlTGlzdCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5mYWNlTGlzdCB8fCBudWxsOyAvLyBDaGVja2luZyBmYWNlcwoKICAgICAgY29uc3QgZmFjZXMgPSBzaGFwZS5mYWNlczsKICAgICAgY29uc3QgdmVydGljZXMgPSBzaGFwZS52ZXJ0aWNlczsKICAgICAgY29uc3Qgbm9ybWFscyA9IHNoYXBlLmZhY2VOb3JtYWxzOwogICAgICBjb25zdCBkaXJlY3Rpb24gPSB0aGlzLmRpcmVjdGlvbjsKICAgICAgY29uc3QgZnJvbSA9IHRoaXMuZnJvbTsKICAgICAgY29uc3QgdG8gPSB0aGlzLnRvOwogICAgICBjb25zdCBmcm9tVG9EaXN0YW5jZSA9IGZyb20uZGlzdGFuY2VUbyh0byk7CiAgICAgIGNvbnN0IE5mYWNlcyA9IGZhY2VMaXN0ID8gZmFjZUxpc3QubGVuZ3RoIDogZmFjZXMubGVuZ3RoOwogICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnJlc3VsdDsKCiAgICAgIGZvciAobGV0IGogPSAwOyAhcmVzdWx0LnNob3VsZFN0b3AgJiYgaiA8IE5mYWNlczsgaisrKSB7CiAgICAgICAgY29uc3QgZmkgPSBmYWNlTGlzdCA/IGZhY2VMaXN0W2pdIDogajsKICAgICAgICBjb25zdCBmYWNlID0gZmFjZXNbZmldOwogICAgICAgIGNvbnN0IGZhY2VOb3JtYWwgPSBub3JtYWxzW2ZpXTsKICAgICAgICBjb25zdCBxID0gcXVhdDsKICAgICAgICBjb25zdCB4ID0gcG9zaXRpb247IC8vIGRldGVybWluZSBpZiByYXkgaW50ZXJzZWN0cyB0aGUgcGxhbmUgb2YgdGhlIGZhY2UKICAgICAgICAvLyBub3RlOiB0aGlzIHdvcmtzIHJlZ2FyZGxlc3Mgb2YgdGhlIGRpcmVjdGlvbiBvZiB0aGUgZmFjZSBub3JtYWwKICAgICAgICAvLyBHZXQgcGxhbmUgcG9pbnQgaW4gd29ybGQgY29vcmRpbmF0ZXMuLi4KCiAgICAgICAgdmVjdG9yLmNvcHkodmVydGljZXNbZmFjZVswXV0pOwogICAgICAgIHEudm11bHQodmVjdG9yLCB2ZWN0b3IpOwogICAgICAgIHZlY3Rvci52YWRkKHgsIHZlY3Rvcik7IC8vIC4uLmJ1dCBtYWtlIGl0IHJlbGF0aXZlIHRvIHRoZSByYXkgZnJvbS4gV2UnbGwgZml4IHRoaXMgbGF0ZXIuCgogICAgICAgIHZlY3Rvci52c3ViKGZyb20sIHZlY3Rvcik7IC8vIEdldCBwbGFuZSBub3JtYWwKCiAgICAgICAgcS52bXVsdChmYWNlTm9ybWFsLCBub3JtYWwpOyAvLyBJZiB0aGlzIGRvdCBwcm9kdWN0IGlzIG5lZ2F0aXZlLCB3ZSBoYXZlIHNvbWV0aGluZyBpbnRlcmVzdGluZwoKICAgICAgICBjb25zdCBkb3QgPSBkaXJlY3Rpb24uZG90KG5vcm1hbCk7IC8vIEJhaWwgb3V0IGlmIHJheSBhbmQgcGxhbmUgYXJlIHBhcmFsbGVsCgogICAgICAgIGlmIChNYXRoLmFicyhkb3QpIDwgdGhpcy5wcmVjaXNpb24pIHsKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0gLy8gY2FsYyBkaXN0YW5jZSB0byBwbGFuZQoKCiAgICAgICAgY29uc3Qgc2NhbGFyID0gbm9ybWFsLmRvdCh2ZWN0b3IpIC8gZG90OyAvLyBpZiBuZWdhdGl2ZSBkaXN0YW5jZSwgdGhlbiBwbGFuZSBpcyBiZWhpbmQgcmF5CgogICAgICAgIGlmIChzY2FsYXIgPCAwKSB7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9IC8vIGlmIChkb3QgPCAwKSB7CiAgICAgICAgLy8gSW50ZXJzZWN0aW9uIHBvaW50IGlzIGZyb20gKyBkaXJlY3Rpb24gKiBzY2FsYXIKCgogICAgICAgIGRpcmVjdGlvbi5zY2FsZShzY2FsYXIsIGludGVyc2VjdFBvaW50KTsKICAgICAgICBpbnRlcnNlY3RQb2ludC52YWRkKGZyb20sIGludGVyc2VjdFBvaW50KTsgLy8gYSBpcyB0aGUgcG9pbnQgd2UgY29tcGFyZSBwb2ludHMgYiBhbmQgYyB3aXRoLgoKICAgICAgICBhLmNvcHkodmVydGljZXNbZmFjZVswXV0pOwogICAgICAgIHEudm11bHQoYSwgYSk7CiAgICAgICAgeC52YWRkKGEsIGEpOwoKICAgICAgICBmb3IgKGxldCBpID0gMTsgIXJlc3VsdC5zaG91bGRTdG9wICYmIGkgPCBmYWNlLmxlbmd0aCAtIDE7IGkrKykgewogICAgICAgICAgLy8gVHJhbnNmb3JtIDMgdmVydGljZXMgdG8gd29ybGQgY29vcmRzCiAgICAgICAgICBiLmNvcHkodmVydGljZXNbZmFjZVtpXV0pOwogICAgICAgICAgYy5jb3B5KHZlcnRpY2VzW2ZhY2VbaSArIDFdXSk7CiAgICAgICAgICBxLnZtdWx0KGIsIGIpOwogICAgICAgICAgcS52bXVsdChjLCBjKTsKICAgICAgICAgIHgudmFkZChiLCBiKTsKICAgICAgICAgIHgudmFkZChjLCBjKTsKICAgICAgICAgIGNvbnN0IGRpc3RhbmNlID0gaW50ZXJzZWN0UG9pbnQuZGlzdGFuY2VUbyhmcm9tKTsKCiAgICAgICAgICBpZiAoIShSYXkucG9pbnRJblRyaWFuZ2xlKGludGVyc2VjdFBvaW50LCBhLCBiLCBjKSB8fCBSYXkucG9pbnRJblRyaWFuZ2xlKGludGVyc2VjdFBvaW50LCBiLCBhLCBjKSkgfHwgZGlzdGFuY2UgPiBmcm9tVG9EaXN0YW5jZSkgewogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0KCiAgICAgICAgICB0aGlzLnJlcG9ydEludGVyc2VjdGlvbihub3JtYWwsIGludGVyc2VjdFBvaW50LCByZXBvcnRlZFNoYXBlLCBib2R5LCBmaSk7CiAgICAgICAgfSAvLyB9CgogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEB0b2RvIE9wdGltaXplIGJ5IHRyYW5zZm9ybWluZyB0aGUgd29ybGQgdG8gbG9jYWwgc3BhY2UgZmlyc3QuCiAgICAgKiBAdG9kbyBVc2UgT2N0cmVlIGxvb2t1cAogICAgICovCgoKICAgIF9pbnRlcnNlY3RUcmltZXNoKG1lc2gsIHF1YXQsIHBvc2l0aW9uLCBib2R5LCByZXBvcnRlZFNoYXBlLCBvcHRpb25zKSB7CiAgICAgIGNvbnN0IG5vcm1hbCA9IGludGVyc2VjdFRyaW1lc2hfbm9ybWFsOwogICAgICBjb25zdCB0cmlhbmdsZXMgPSBpbnRlcnNlY3RUcmltZXNoX3RyaWFuZ2xlczsKICAgICAgY29uc3QgdHJlZVRyYW5zZm9ybSA9IGludGVyc2VjdFRyaW1lc2hfdHJlZVRyYW5zZm9ybTsKICAgICAgY29uc3QgdmVjdG9yID0gaW50ZXJzZWN0Q29udmV4X3ZlY3RvcjsKICAgICAgY29uc3QgbG9jYWxEaXJlY3Rpb24gPSBpbnRlcnNlY3RUcmltZXNoX2xvY2FsRGlyZWN0aW9uOwogICAgICBjb25zdCBsb2NhbEZyb20gPSBpbnRlcnNlY3RUcmltZXNoX2xvY2FsRnJvbTsKICAgICAgY29uc3QgbG9jYWxUbyA9IGludGVyc2VjdFRyaW1lc2hfbG9jYWxUbzsKICAgICAgY29uc3Qgd29ybGRJbnRlcnNlY3RQb2ludCA9IGludGVyc2VjdFRyaW1lc2hfd29ybGRJbnRlcnNlY3RQb2ludDsKICAgICAgY29uc3Qgd29ybGROb3JtYWwgPSBpbnRlcnNlY3RUcmltZXNoX3dvcmxkTm9ybWFsOyAvLyBDaGVja2luZyBmYWNlcwoKICAgICAgY29uc3QgaW5kaWNlcyA9IG1lc2guaW5kaWNlczsKICAgICAgbWVzaC52ZXJ0aWNlczsgLy8gY29uc3Qgbm9ybWFscyA9IG1lc2guZmFjZU5vcm1hbHMKCiAgICAgIGNvbnN0IGZyb20gPSB0aGlzLmZyb207CiAgICAgIGNvbnN0IHRvID0gdGhpcy50bzsKICAgICAgY29uc3QgZGlyZWN0aW9uID0gdGhpcy5kaXJlY3Rpb247CiAgICAgIHRyZWVUcmFuc2Zvcm0ucG9zaXRpb24uY29weShwb3NpdGlvbik7CiAgICAgIHRyZWVUcmFuc2Zvcm0ucXVhdGVybmlvbi5jb3B5KHF1YXQpOyAvLyBUcmFuc2Zvcm0gcmF5IHRvIGxvY2FsIHNwYWNlIQoKICAgICAgVHJhbnNmb3JtLnZlY3RvclRvTG9jYWxGcmFtZShwb3NpdGlvbiwgcXVhdCwgZGlyZWN0aW9uLCBsb2NhbERpcmVjdGlvbik7CiAgICAgIFRyYW5zZm9ybS5wb2ludFRvTG9jYWxGcmFtZShwb3NpdGlvbiwgcXVhdCwgZnJvbSwgbG9jYWxGcm9tKTsKICAgICAgVHJhbnNmb3JtLnBvaW50VG9Mb2NhbEZyYW1lKHBvc2l0aW9uLCBxdWF0LCB0bywgbG9jYWxUbyk7CiAgICAgIGxvY2FsVG8ueCAqPSBtZXNoLnNjYWxlLng7CiAgICAgIGxvY2FsVG8ueSAqPSBtZXNoLnNjYWxlLnk7CiAgICAgIGxvY2FsVG8ueiAqPSBtZXNoLnNjYWxlLno7CiAgICAgIGxvY2FsRnJvbS54ICo9IG1lc2guc2NhbGUueDsKICAgICAgbG9jYWxGcm9tLnkgKj0gbWVzaC5zY2FsZS55OwogICAgICBsb2NhbEZyb20ueiAqPSBtZXNoLnNjYWxlLno7CiAgICAgIGxvY2FsVG8udnN1Yihsb2NhbEZyb20sIGxvY2FsRGlyZWN0aW9uKTsKICAgICAgbG9jYWxEaXJlY3Rpb24ubm9ybWFsaXplKCk7CiAgICAgIGNvbnN0IGZyb21Ub0Rpc3RhbmNlU3F1YXJlZCA9IGxvY2FsRnJvbS5kaXN0YW5jZVNxdWFyZWQobG9jYWxUbyk7CiAgICAgIG1lc2gudHJlZS5yYXlRdWVyeSh0aGlzLCB0cmVlVHJhbnNmb3JtLCB0cmlhbmdsZXMpOwoKICAgICAgZm9yIChsZXQgaSA9IDAsIE4gPSB0cmlhbmdsZXMubGVuZ3RoOyAhdGhpcy5yZXN1bHQuc2hvdWxkU3RvcCAmJiBpICE9PSBOOyBpKyspIHsKICAgICAgICBjb25zdCB0cmlhbmdsZXNJbmRleCA9IHRyaWFuZ2xlc1tpXTsKICAgICAgICBtZXNoLmdldE5vcm1hbCh0cmlhbmdsZXNJbmRleCwgbm9ybWFsKTsgLy8gZGV0ZXJtaW5lIGlmIHJheSBpbnRlcnNlY3RzIHRoZSBwbGFuZSBvZiB0aGUgZmFjZQogICAgICAgIC8vIG5vdGU6IHRoaXMgd29ya3MgcmVnYXJkbGVzcyBvZiB0aGUgZGlyZWN0aW9uIG9mIHRoZSBmYWNlIG5vcm1hbAogICAgICAgIC8vIEdldCBwbGFuZSBwb2ludCBpbiB3b3JsZCBjb29yZGluYXRlcy4uLgoKICAgICAgICBtZXNoLmdldFZlcnRleChpbmRpY2VzW3RyaWFuZ2xlc0luZGV4ICogM10sIGEpOyAvLyAuLi5idXQgbWFrZSBpdCByZWxhdGl2ZSB0byB0aGUgcmF5IGZyb20uIFdlJ2xsIGZpeCB0aGlzIGxhdGVyLgoKICAgICAgICBhLnZzdWIobG9jYWxGcm9tLCB2ZWN0b3IpOyAvLyBJZiB0aGlzIGRvdCBwcm9kdWN0IGlzIG5lZ2F0aXZlLCB3ZSBoYXZlIHNvbWV0aGluZyBpbnRlcmVzdGluZwoKICAgICAgICBjb25zdCBkb3QgPSBsb2NhbERpcmVjdGlvbi5kb3Qobm9ybWFsKTsgLy8gQmFpbCBvdXQgaWYgcmF5IGFuZCBwbGFuZSBhcmUgcGFyYWxsZWwKICAgICAgICAvLyBpZiAoTWF0aC5hYnMoIGRvdCApIDwgdGhpcy5wcmVjaXNpb24pewogICAgICAgIC8vICAgICBjb250aW51ZTsKICAgICAgICAvLyB9CiAgICAgICAgLy8gY2FsYyBkaXN0YW5jZSB0byBwbGFuZQoKICAgICAgICBjb25zdCBzY2FsYXIgPSBub3JtYWwuZG90KHZlY3RvcikgLyBkb3Q7IC8vIGlmIG5lZ2F0aXZlIGRpc3RhbmNlLCB0aGVuIHBsYW5lIGlzIGJlaGluZCByYXkKCiAgICAgICAgaWYgKHNjYWxhciA8IDApIHsKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0gLy8gSW50ZXJzZWN0aW9uIHBvaW50IGlzIGZyb20gKyBkaXJlY3Rpb24gKiBzY2FsYXIKCgogICAgICAgIGxvY2FsRGlyZWN0aW9uLnNjYWxlKHNjYWxhciwgaW50ZXJzZWN0UG9pbnQpOwogICAgICAgIGludGVyc2VjdFBvaW50LnZhZGQobG9jYWxGcm9tLCBpbnRlcnNlY3RQb2ludCk7IC8vIEdldCB0cmlhbmdsZSB2ZXJ0aWNlcwoKICAgICAgICBtZXNoLmdldFZlcnRleChpbmRpY2VzW3RyaWFuZ2xlc0luZGV4ICogMyArIDFdLCBiKTsKICAgICAgICBtZXNoLmdldFZlcnRleChpbmRpY2VzW3RyaWFuZ2xlc0luZGV4ICogMyArIDJdLCBjKTsKICAgICAgICBjb25zdCBzcXVhcmVkRGlzdGFuY2UgPSBpbnRlcnNlY3RQb2ludC5kaXN0YW5jZVNxdWFyZWQobG9jYWxGcm9tKTsKCiAgICAgICAgaWYgKCEoUmF5LnBvaW50SW5UcmlhbmdsZShpbnRlcnNlY3RQb2ludCwgYiwgYSwgYykgfHwgUmF5LnBvaW50SW5UcmlhbmdsZShpbnRlcnNlY3RQb2ludCwgYSwgYiwgYykpIHx8IHNxdWFyZWREaXN0YW5jZSA+IGZyb21Ub0Rpc3RhbmNlU3F1YXJlZCkgewogICAgICAgICAgY29udGludWU7CiAgICAgICAgfSAvLyB0cmFuc2Zvcm0gaW50ZXJzZWN0cG9pbnQgYW5kIG5vcm1hbCB0byB3b3JsZAoKCiAgICAgICAgVHJhbnNmb3JtLnZlY3RvclRvV29ybGRGcmFtZShxdWF0LCBub3JtYWwsIHdvcmxkTm9ybWFsKTsKICAgICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUocG9zaXRpb24sIHF1YXQsIGludGVyc2VjdFBvaW50LCB3b3JsZEludGVyc2VjdFBvaW50KTsKICAgICAgICB0aGlzLnJlcG9ydEludGVyc2VjdGlvbih3b3JsZE5vcm1hbCwgd29ybGRJbnRlcnNlY3RQb2ludCwgcmVwb3J0ZWRTaGFwZSwgYm9keSwgdHJpYW5nbGVzSW5kZXgpOwogICAgICB9CgogICAgICB0cmlhbmdsZXMubGVuZ3RoID0gMDsKICAgIH0KICAgIC8qKgogICAgICogQHJldHVybiBUcnVlIGlmIHRoZSBpbnRlcnNlY3Rpb25zIHNob3VsZCBjb250aW51ZQogICAgICovCgoKICAgIHJlcG9ydEludGVyc2VjdGlvbihub3JtYWwsIGhpdFBvaW50V29ybGQsIHNoYXBlLCBib2R5LCBoaXRGYWNlSW5kZXgpIHsKICAgICAgY29uc3QgZnJvbSA9IHRoaXMuZnJvbTsKICAgICAgY29uc3QgdG8gPSB0aGlzLnRvOwogICAgICBjb25zdCBkaXN0YW5jZSA9IGZyb20uZGlzdGFuY2VUbyhoaXRQb2ludFdvcmxkKTsKICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5yZXN1bHQ7IC8vIFNraXAgYmFjayBmYWNlcz8KCiAgICAgIGlmICh0aGlzLnNraXBCYWNrZmFjZXMgJiYgbm9ybWFsLmRvdCh0aGlzLmRpcmVjdGlvbikgPiAwKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICByZXN1bHQuaGl0RmFjZUluZGV4ID0gdHlwZW9mIGhpdEZhY2VJbmRleCAhPT0gJ3VuZGVmaW5lZCcgPyBoaXRGYWNlSW5kZXggOiAtMTsKCiAgICAgIHN3aXRjaCAodGhpcy5tb2RlKSB7CiAgICAgICAgY2FzZSBSYXkuQUxMOgogICAgICAgICAgdGhpcy5oYXNIaXQgPSB0cnVlOwogICAgICAgICAgcmVzdWx0LnNldChmcm9tLCB0bywgbm9ybWFsLCBoaXRQb2ludFdvcmxkLCBzaGFwZSwgYm9keSwgZGlzdGFuY2UpOwogICAgICAgICAgcmVzdWx0Lmhhc0hpdCA9IHRydWU7CiAgICAgICAgICB0aGlzLmNhbGxiYWNrKHJlc3VsdCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSBSYXkuQ0xPU0VTVDoKICAgICAgICAgIC8vIFN0b3JlIGlmIGNsb3NlciB0aGFuIGN1cnJlbnQgY2xvc2VzdAogICAgICAgICAgaWYgKGRpc3RhbmNlIDwgcmVzdWx0LmRpc3RhbmNlIHx8ICFyZXN1bHQuaGFzSGl0KSB7CiAgICAgICAgICAgIHRoaXMuaGFzSGl0ID0gdHJ1ZTsKICAgICAgICAgICAgcmVzdWx0Lmhhc0hpdCA9IHRydWU7CiAgICAgICAgICAgIHJlc3VsdC5zZXQoZnJvbSwgdG8sIG5vcm1hbCwgaGl0UG9pbnRXb3JsZCwgc2hhcGUsIGJvZHksIGRpc3RhbmNlKTsKICAgICAgICAgIH0KCiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSBSYXkuQU5ZOgogICAgICAgICAgLy8gUmVwb3J0IGFuZCBzdG9wLgogICAgICAgICAgdGhpcy5oYXNIaXQgPSB0cnVlOwogICAgICAgICAgcmVzdWx0Lmhhc0hpdCA9IHRydWU7CiAgICAgICAgICByZXN1bHQuc2V0KGZyb20sIHRvLCBub3JtYWwsIGhpdFBvaW50V29ybGQsIHNoYXBlLCBib2R5LCBkaXN0YW5jZSk7CiAgICAgICAgICByZXN1bHQuc2hvdWxkU3RvcCA9IHRydWU7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBBcyBwZXIgIkJhcnljZW50cmljIFRlY2huaXF1ZSIgYXMgbmFtZWQKICAgICAqIHtAbGluayBodHRwczovL3d3dy5ibGFja3Bhd24uY29tL3RleHRzL3BvaW50aW5wb2x5L2RlZmF1bHQuaHRtbCBoZXJlfSBidXQgd2l0aG91dCB0aGUgZGl2aXNpb24KICAgICAqLwoKCiAgICBzdGF0aWMgcG9pbnRJblRyaWFuZ2xlKHAsIGEsIGIsIGMpIHsKICAgICAgYy52c3ViKGEsIHYwKTsKICAgICAgYi52c3ViKGEsIHYxKTsKICAgICAgcC52c3ViKGEsIHYyKTsKICAgICAgY29uc3QgZG90MDAgPSB2MC5kb3QodjApOwogICAgICBjb25zdCBkb3QwMSA9IHYwLmRvdCh2MSk7CiAgICAgIGNvbnN0IGRvdDAyID0gdjAuZG90KHYyKTsKICAgICAgY29uc3QgZG90MTEgPSB2MS5kb3QodjEpOwogICAgICBjb25zdCBkb3QxMiA9IHYxLmRvdCh2Mik7CiAgICAgIGxldCB1OwogICAgICBsZXQgdjsKICAgICAgcmV0dXJuICh1ID0gZG90MTEgKiBkb3QwMiAtIGRvdDAxICogZG90MTIpID49IDAgJiYgKHYgPSBkb3QwMCAqIGRvdDEyIC0gZG90MDEgKiBkb3QwMikgPj0gMCAmJiB1ICsgdiA8IGRvdDAwICogZG90MTEgLSBkb3QwMSAqIGRvdDAxOwogICAgfQoKICB9CiAgUmF5LkNMT1NFU1QgPSBSQVlfTU9ERVMuQ0xPU0VTVDsKICBSYXkuQU5ZID0gUkFZX01PREVTLkFOWTsKICBSYXkuQUxMID0gUkFZX01PREVTLkFMTDsKICBjb25zdCB0bXBBQUJCJDEgPSBuZXcgQUFCQigpOwogIGNvbnN0IHRtcEFycmF5ID0gW107CiAgY29uc3QgdjEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHYyID0gbmV3IFZlYzMoKTsKICBjb25zdCBpbnRlcnNlY3RCb2R5X3hpID0gbmV3IFZlYzMoKTsKICBjb25zdCBpbnRlcnNlY3RCb2R5X3FpID0gbmV3IFF1YXRlcm5pb24oKTsKICBjb25zdCBpbnRlcnNlY3RQb2ludCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYyA9IG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKICBuZXcgUmF5Y2FzdFJlc3VsdCgpOwogIGNvbnN0IGludGVyc2VjdENvbnZleE9wdGlvbnMgPSB7CiAgICBmYWNlTGlzdDogWzBdCiAgfTsKICBjb25zdCB3b3JsZFBpbGxhck9mZnNldCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0SGVpZ2h0ZmllbGRfbG9jYWxSYXkgPSBuZXcgUmF5KCk7CiAgY29uc3QgaW50ZXJzZWN0SGVpZ2h0ZmllbGRfaW5kZXggPSBbXTsKICBjb25zdCBSYXlfaW50ZXJzZWN0U3BoZXJlX2ludGVyc2VjdGlvblBvaW50ID0gbmV3IFZlYzMoKTsKICBjb25zdCBSYXlfaW50ZXJzZWN0U3BoZXJlX25vcm1hbCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0Q29udmV4X25vcm1hbCA9IG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKICBuZXcgVmVjMygpOwogIGNvbnN0IGludGVyc2VjdENvbnZleF92ZWN0b3IgPSBuZXcgVmVjMygpOwogIGNvbnN0IGludGVyc2VjdFRyaW1lc2hfbm9ybWFsID0gbmV3IFZlYzMoKTsKICBjb25zdCBpbnRlcnNlY3RUcmltZXNoX2xvY2FsRGlyZWN0aW9uID0gbmV3IFZlYzMoKTsKICBjb25zdCBpbnRlcnNlY3RUcmltZXNoX2xvY2FsRnJvbSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0VHJpbWVzaF9sb2NhbFRvID0gbmV3IFZlYzMoKTsKICBjb25zdCBpbnRlcnNlY3RUcmltZXNoX3dvcmxkTm9ybWFsID0gbmV3IFZlYzMoKTsKICBjb25zdCBpbnRlcnNlY3RUcmltZXNoX3dvcmxkSW50ZXJzZWN0UG9pbnQgPSBuZXcgVmVjMygpOwogIG5ldyBBQUJCKCk7CiAgY29uc3QgaW50ZXJzZWN0VHJpbWVzaF90cmlhbmdsZXMgPSBbXTsKICBjb25zdCBpbnRlcnNlY3RUcmltZXNoX3RyZWVUcmFuc2Zvcm0gPSBuZXcgVHJhbnNmb3JtKCk7CiAgY29uc3QgdjAgPSBuZXcgVmVjMygpOwogIGNvbnN0IGludGVyc2VjdCA9IG5ldyBWZWMzKCk7CgogIGZ1bmN0aW9uIGRpc3RhbmNlRnJvbUludGVyc2VjdGlvbihmcm9tLCBkaXJlY3Rpb24sIHBvc2l0aW9uKSB7CiAgICAvLyB2MCBpcyB2ZWN0b3IgZnJvbSBmcm9tIHRvIHBvc2l0aW9uCiAgICBwb3NpdGlvbi52c3ViKGZyb20sIHYwKTsKICAgIGNvbnN0IGRvdCA9IHYwLmRvdChkaXJlY3Rpb24pOyAvLyBpbnRlcnNlY3QgPSBkaXJlY3Rpb24qZG90ICsgZnJvbQoKICAgIGRpcmVjdGlvbi5zY2FsZShkb3QsIGludGVyc2VjdCk7CiAgICBpbnRlcnNlY3QudmFkZChmcm9tLCBpbnRlcnNlY3QpOwogICAgY29uc3QgZGlzdGFuY2UgPSBwb3NpdGlvbi5kaXN0YW5jZVRvKGludGVyc2VjdCk7CiAgICByZXR1cm4gZGlzdGFuY2U7CiAgfQoKICAvKioKICAgKiBTd2VlcCBhbmQgcHJ1bmUgYnJvYWRwaGFzZSBhbG9uZyBvbmUgYXhpcy4KICAgKi8KICBjbGFzcyBTQVBCcm9hZHBoYXNlIGV4dGVuZHMgQnJvYWRwaGFzZSB7CiAgICAvKioKICAgICAqIExpc3Qgb2YgYm9kaWVzIGN1cnJlbnRseSBpbiB0aGUgYnJvYWRwaGFzZS4KICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIHdvcmxkIHRvIHNlYXJjaCBpbi4KICAgICAqLwoKICAgIC8qKgogICAgICogQXhpcyB0byBzb3J0IHRoZSBib2RpZXMgYWxvbmcuCiAgICAgKiBTZXQgdG8gMCBmb3IgeCBheGlzLCBhbmQgMSBmb3IgeSBheGlzLgogICAgICogRm9yIGJlc3QgcGVyZm9ybWFuY2UsIHBpY2sgdGhlIGF4aXMgd2hlcmUgYm9kaWVzIGFyZSBtb3N0IGRpc3RyaWJ1dGVkLgogICAgICovCgogICAgLyoqCiAgICAgKiBDaGVjayBpZiB0aGUgYm91bmRzIG9mIHR3byBib2RpZXMgb3ZlcmxhcCwgYWxvbmcgdGhlIGdpdmVuIFNBUCBheGlzLgogICAgICovCiAgICBzdGF0aWMgY2hlY2tCb3VuZHMoYmksIGJqLCBheGlzSW5kZXgpIHsKICAgICAgbGV0IGJpUG9zOwogICAgICBsZXQgYmpQb3M7CgogICAgICBpZiAoYXhpc0luZGV4ID09PSAwKSB7CiAgICAgICAgYmlQb3MgPSBiaS5wb3NpdGlvbi54OwogICAgICAgIGJqUG9zID0gYmoucG9zaXRpb24ueDsKICAgICAgfSBlbHNlIGlmIChheGlzSW5kZXggPT09IDEpIHsKICAgICAgICBiaVBvcyA9IGJpLnBvc2l0aW9uLnk7CiAgICAgICAgYmpQb3MgPSBiai5wb3NpdGlvbi55OwogICAgICB9IGVsc2UgaWYgKGF4aXNJbmRleCA9PT0gMikgewogICAgICAgIGJpUG9zID0gYmkucG9zaXRpb24uejsKICAgICAgICBialBvcyA9IGJqLnBvc2l0aW9uLno7CiAgICAgIH0KCiAgICAgIGNvbnN0IHJpID0gYmkuYm91bmRpbmdSYWRpdXMsCiAgICAgICAgICAgIHJqID0gYmouYm91bmRpbmdSYWRpdXMsCiAgICAgICAgICAgIGJvdW5kQTIgPSBiaVBvcyArIHJpLAogICAgICAgICAgICBib3VuZEIxID0gYmpQb3MgLSByajsKICAgICAgcmV0dXJuIGJvdW5kQjEgPCBib3VuZEEyOwogICAgfSAvLyBOb3RlOiB0aGVzZSBhcmUgaWRlbnRpY2FsLCBzYXZlIGZvciB4L3kveiBsb3dlcmJvdW5kCgogICAgLyoqCiAgICAgKiBpbnNlcnRpb25Tb3J0WAogICAgICovCgoKICAgIHN0YXRpYyBpbnNlcnRpb25Tb3J0WChhKSB7CiAgICAgIGZvciAobGV0IGkgPSAxLCBsID0gYS5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgICBjb25zdCB2ID0gYVtpXTsKICAgICAgICBsZXQgajsKCiAgICAgICAgZm9yIChqID0gaSAtIDE7IGogPj0gMDsgai0tKSB7CiAgICAgICAgICBpZiAoYVtqXS5hYWJiLmxvd2VyQm91bmQueCA8PSB2LmFhYmIubG93ZXJCb3VuZC54KSB7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIGFbaiArIDFdID0gYVtqXTsKICAgICAgICB9CgogICAgICAgIGFbaiArIDFdID0gdjsKICAgICAgfQoKICAgICAgcmV0dXJuIGE7CiAgICB9CiAgICAvKioKICAgICAqIGluc2VydGlvblNvcnRZCiAgICAgKi8KCgogICAgc3RhdGljIGluc2VydGlvblNvcnRZKGEpIHsKICAgICAgZm9yIChsZXQgaSA9IDEsIGwgPSBhLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICAgIGNvbnN0IHYgPSBhW2ldOwogICAgICAgIGxldCBqOwoKICAgICAgICBmb3IgKGogPSBpIC0gMTsgaiA+PSAwOyBqLS0pIHsKICAgICAgICAgIGlmIChhW2pdLmFhYmIubG93ZXJCb3VuZC55IDw9IHYuYWFiYi5sb3dlckJvdW5kLnkpIHsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgICAgYVtqICsgMV0gPSBhW2pdOwogICAgICAgIH0KCiAgICAgICAgYVtqICsgMV0gPSB2OwogICAgICB9CgogICAgICByZXR1cm4gYTsKICAgIH0KICAgIC8qKgogICAgICogaW5zZXJ0aW9uU29ydFoKICAgICAqLwoKCiAgICBzdGF0aWMgaW5zZXJ0aW9uU29ydFooYSkgewogICAgICBmb3IgKGxldCBpID0gMSwgbCA9IGEubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgICAgY29uc3QgdiA9IGFbaV07CiAgICAgICAgbGV0IGo7CgogICAgICAgIGZvciAoaiA9IGkgLSAxOyBqID49IDA7IGotLSkgewogICAgICAgICAgaWYgKGFbal0uYWFiYi5sb3dlckJvdW5kLnogPD0gdi5hYWJiLmxvd2VyQm91bmQueikgewogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgICBhW2ogKyAxXSA9IGFbal07CiAgICAgICAgfQoKICAgICAgICBhW2ogKyAxXSA9IHY7CiAgICAgIH0KCiAgICAgIHJldHVybiBhOwogICAgfQoKICAgIGNvbnN0cnVjdG9yKHdvcmxkKSB7CiAgICAgIHN1cGVyKCk7CiAgICAgIHRoaXMuYXhpc0xpc3QgPSBbXTsKICAgICAgdGhpcy53b3JsZCA9IG51bGw7CiAgICAgIHRoaXMuYXhpc0luZGV4ID0gMDsKICAgICAgY29uc3QgYXhpc0xpc3QgPSB0aGlzLmF4aXNMaXN0OwoKICAgICAgdGhpcy5fYWRkQm9keUhhbmRsZXIgPSBldmVudCA9PiB7CiAgICAgICAgYXhpc0xpc3QucHVzaChldmVudC5ib2R5KTsKICAgICAgfTsKCiAgICAgIHRoaXMuX3JlbW92ZUJvZHlIYW5kbGVyID0gZXZlbnQgPT4gewogICAgICAgIGNvbnN0IGlkeCA9IGF4aXNMaXN0LmluZGV4T2YoZXZlbnQuYm9keSk7CgogICAgICAgIGlmIChpZHggIT09IC0xKSB7CiAgICAgICAgICBheGlzTGlzdC5zcGxpY2UoaWR4LCAxKTsKICAgICAgICB9CiAgICAgIH07CgogICAgICBpZiAod29ybGQpIHsKICAgICAgICB0aGlzLnNldFdvcmxkKHdvcmxkKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBDaGFuZ2UgdGhlIHdvcmxkCiAgICAgKi8KCgogICAgc2V0V29ybGQod29ybGQpIHsKICAgICAgLy8gQ2xlYXIgdGhlIG9sZCBheGlzIGFycmF5CiAgICAgIHRoaXMuYXhpc0xpc3QubGVuZ3RoID0gMDsgLy8gQWRkIGFsbCBib2RpZXMgZnJvbSB0aGUgbmV3IHdvcmxkCgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdvcmxkLmJvZGllcy5sZW5ndGg7IGkrKykgewogICAgICAgIHRoaXMuYXhpc0xpc3QucHVzaCh3b3JsZC5ib2RpZXNbaV0pOwogICAgICB9IC8vIFJlbW92ZSBvbGQgaGFuZGxlcnMsIGlmIGFueQoKCiAgICAgIHdvcmxkLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2FkZEJvZHknLCB0aGlzLl9hZGRCb2R5SGFuZGxlcik7CiAgICAgIHdvcmxkLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3JlbW92ZUJvZHknLCB0aGlzLl9yZW1vdmVCb2R5SGFuZGxlcik7IC8vIEFkZCBoYW5kbGVycyB0byB1cGRhdGUgdGhlIGxpc3Qgb2YgYm9kaWVzLgoKICAgICAgd29ybGQuYWRkRXZlbnRMaXN0ZW5lcignYWRkQm9keScsIHRoaXMuX2FkZEJvZHlIYW5kbGVyKTsKICAgICAgd29ybGQuYWRkRXZlbnRMaXN0ZW5lcigncmVtb3ZlQm9keScsIHRoaXMuX3JlbW92ZUJvZHlIYW5kbGVyKTsKICAgICAgdGhpcy53b3JsZCA9IHdvcmxkOwogICAgICB0aGlzLmRpcnR5ID0gdHJ1ZTsKICAgIH0KICAgIC8qKgogICAgICogQ29sbGVjdCBhbGwgY29sbGlzaW9uIHBhaXJzCiAgICAgKi8KCgogICAgY29sbGlzaW9uUGFpcnMod29ybGQsIHAxLCBwMikgewogICAgICBjb25zdCBib2RpZXMgPSB0aGlzLmF4aXNMaXN0OwogICAgICBjb25zdCBOID0gYm9kaWVzLmxlbmd0aDsKICAgICAgY29uc3QgYXhpc0luZGV4ID0gdGhpcy5heGlzSW5kZXg7CiAgICAgIGxldCBpOwogICAgICBsZXQgajsKCiAgICAgIGlmICh0aGlzLmRpcnR5KSB7CiAgICAgICAgdGhpcy5zb3J0TGlzdCgpOwogICAgICAgIHRoaXMuZGlydHkgPSBmYWxzZTsKICAgICAgfSAvLyBMb29rIHRocm91Z2ggdGhlIGxpc3QKCgogICAgICBmb3IgKGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBjb25zdCBiaSA9IGJvZGllc1tpXTsKCiAgICAgICAgZm9yIChqID0gaSArIDE7IGogPCBOOyBqKyspIHsKICAgICAgICAgIGNvbnN0IGJqID0gYm9kaWVzW2pdOwoKICAgICAgICAgIGlmICghdGhpcy5uZWVkQnJvYWRwaGFzZUNvbGxpc2lvbihiaSwgYmopKSB7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICghU0FQQnJvYWRwaGFzZS5jaGVja0JvdW5kcyhiaSwgYmosIGF4aXNJbmRleCkpIHsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgICAgdGhpcy5pbnRlcnNlY3Rpb25UZXN0KGJpLCBiaiwgcDEsIHAyKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBzb3J0TGlzdCgpIHsKICAgICAgY29uc3QgYXhpc0xpc3QgPSB0aGlzLmF4aXNMaXN0OwogICAgICBjb25zdCBheGlzSW5kZXggPSB0aGlzLmF4aXNJbmRleDsKICAgICAgY29uc3QgTiA9IGF4aXNMaXN0Lmxlbmd0aDsgLy8gVXBkYXRlIEFBQkJzCgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgY29uc3QgYmkgPSBheGlzTGlzdFtpXTsKCiAgICAgICAgaWYgKGJpLmFhYmJOZWVkc1VwZGF0ZSkgewogICAgICAgICAgYmkudXBkYXRlQUFCQigpOwogICAgICAgIH0KICAgICAgfSAvLyBTb3J0IHRoZSBsaXN0CgoKICAgICAgaWYgKGF4aXNJbmRleCA9PT0gMCkgewogICAgICAgIFNBUEJyb2FkcGhhc2UuaW5zZXJ0aW9uU29ydFgoYXhpc0xpc3QpOwogICAgICB9IGVsc2UgaWYgKGF4aXNJbmRleCA9PT0gMSkgewogICAgICAgIFNBUEJyb2FkcGhhc2UuaW5zZXJ0aW9uU29ydFkoYXhpc0xpc3QpOwogICAgICB9IGVsc2UgaWYgKGF4aXNJbmRleCA9PT0gMikgewogICAgICAgIFNBUEJyb2FkcGhhc2UuaW5zZXJ0aW9uU29ydFooYXhpc0xpc3QpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIENvbXB1dGVzIHRoZSB2YXJpYW5jZSBvZiB0aGUgYm9keSBwb3NpdGlvbnMgYW5kIGVzdGltYXRlcyB0aGUgYmVzdCBheGlzIHRvIHVzZS4KICAgICAqIFdpbGwgYXV0b21hdGljYWxseSBzZXQgcHJvcGVydHkgYGF4aXNJbmRleGAuCiAgICAgKi8KCgogICAgYXV0b0RldGVjdEF4aXMoKSB7CiAgICAgIGxldCBzdW1YID0gMDsKICAgICAgbGV0IHN1bVgyID0gMDsKICAgICAgbGV0IHN1bVkgPSAwOwogICAgICBsZXQgc3VtWTIgPSAwOwogICAgICBsZXQgc3VtWiA9IDA7CiAgICAgIGxldCBzdW1aMiA9IDA7CiAgICAgIGNvbnN0IGJvZGllcyA9IHRoaXMuYXhpc0xpc3Q7CiAgICAgIGNvbnN0IE4gPSBib2RpZXMubGVuZ3RoOwogICAgICBjb25zdCBpbnZOID0gMSAvIE47CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgY29uc3QgYiA9IGJvZGllc1tpXTsKICAgICAgICBjb25zdCBjZW50ZXJYID0gYi5wb3NpdGlvbi54OwogICAgICAgIHN1bVggKz0gY2VudGVyWDsKICAgICAgICBzdW1YMiArPSBjZW50ZXJYICogY2VudGVyWDsKICAgICAgICBjb25zdCBjZW50ZXJZID0gYi5wb3NpdGlvbi55OwogICAgICAgIHN1bVkgKz0gY2VudGVyWTsKICAgICAgICBzdW1ZMiArPSBjZW50ZXJZICogY2VudGVyWTsKICAgICAgICBjb25zdCBjZW50ZXJaID0gYi5wb3NpdGlvbi56OwogICAgICAgIHN1bVogKz0gY2VudGVyWjsKICAgICAgICBzdW1aMiArPSBjZW50ZXJaICogY2VudGVyWjsKICAgICAgfQoKICAgICAgY29uc3QgdmFyaWFuY2VYID0gc3VtWDIgLSBzdW1YICogc3VtWCAqIGludk47CiAgICAgIGNvbnN0IHZhcmlhbmNlWSA9IHN1bVkyIC0gc3VtWSAqIHN1bVkgKiBpbnZOOwogICAgICBjb25zdCB2YXJpYW5jZVogPSBzdW1aMiAtIHN1bVogKiBzdW1aICogaW52TjsKCiAgICAgIGlmICh2YXJpYW5jZVggPiB2YXJpYW5jZVkpIHsKICAgICAgICBpZiAodmFyaWFuY2VYID4gdmFyaWFuY2VaKSB7CiAgICAgICAgICB0aGlzLmF4aXNJbmRleCA9IDA7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuYXhpc0luZGV4ID0gMjsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAodmFyaWFuY2VZID4gdmFyaWFuY2VaKSB7CiAgICAgICAgdGhpcy5heGlzSW5kZXggPSAxOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuYXhpc0luZGV4ID0gMjsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBSZXR1cm5zIGFsbCB0aGUgYm9kaWVzIHdpdGhpbiBhbiBBQUJCLgogICAgICogQHBhcmFtIHJlc3VsdCBBbiBhcnJheSB0byBzdG9yZSByZXN1bHRpbmcgYm9kaWVzIGluLgogICAgICovCgoKICAgIGFhYmJRdWVyeSh3b3JsZCwgYWFiYiwgcmVzdWx0KSB7CiAgICAgIGlmIChyZXN1bHQgPT09IHZvaWQgMCkgewogICAgICAgIHJlc3VsdCA9IFtdOwogICAgICB9CgogICAgICBpZiAodGhpcy5kaXJ0eSkgewogICAgICAgIHRoaXMuc29ydExpc3QoKTsKICAgICAgICB0aGlzLmRpcnR5ID0gZmFsc2U7CiAgICAgIH0KCiAgICAgIGNvbnN0IGF4aXNJbmRleCA9IHRoaXMuYXhpc0luZGV4OwogICAgICBsZXQgYXhpcyA9ICd4JzsKCiAgICAgIGlmIChheGlzSW5kZXggPT09IDEpIHsKICAgICAgICBheGlzID0gJ3knOwogICAgICB9CgogICAgICBpZiAoYXhpc0luZGV4ID09PSAyKSB7CiAgICAgICAgYXhpcyA9ICd6JzsKICAgICAgfQoKICAgICAgY29uc3QgYXhpc0xpc3QgPSB0aGlzLmF4aXNMaXN0OwogICAgICBhYWJiLmxvd2VyQm91bmRbYXhpc107CiAgICAgIGFhYmIudXBwZXJCb3VuZFtheGlzXTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXhpc0xpc3QubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBiID0gYXhpc0xpc3RbaV07CgogICAgICAgIGlmIChiLmFhYmJOZWVkc1VwZGF0ZSkgewogICAgICAgICAgYi51cGRhdGVBQUJCKCk7CiAgICAgICAgfQoKICAgICAgICBpZiAoYi5hYWJiLm92ZXJsYXBzKGFhYmIpKSB7CiAgICAgICAgICByZXN1bHQucHVzaChiKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CgogIH0KCiAgY2xhc3MgVXRpbHMgewogICAgLyoqCiAgICAgKiBFeHRlbmQgYW4gb3B0aW9ucyBvYmplY3Qgd2l0aCBkZWZhdWx0IHZhbHVlcy4KICAgICAqIEBwYXJhbSBvcHRpb25zIFRoZSBvcHRpb25zIG9iamVjdC4gTWF5IGJlIGZhbHN5OiBpbiB0aGlzIGNhc2UsIGEgbmV3IG9iamVjdCBpcyBjcmVhdGVkIGFuZCByZXR1cm5lZC4KICAgICAqIEBwYXJhbSBkZWZhdWx0cyBBbiBvYmplY3QgY29udGFpbmluZyBkZWZhdWx0IHZhbHVlcy4KICAgICAqIEByZXR1cm4gVGhlIG1vZGlmaWVkIG9wdGlvbnMgb2JqZWN0LgogICAgICovCiAgICBzdGF0aWMgZGVmYXVsdHMob3B0aW9ucywgZGVmYXVsdHMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgZm9yIChsZXQga2V5IGluIGRlZmF1bHRzKSB7CiAgICAgICAgaWYgKCEoa2V5IGluIG9wdGlvbnMpKSB7CiAgICAgICAgICBvcHRpb25zW2tleV0gPSBkZWZhdWx0c1trZXldOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIG9wdGlvbnM7CiAgICB9CgogIH0KCiAgLyoqCiAgICogQ29uc3RyYWludCBiYXNlIGNsYXNzCiAgICovCiAgY2xhc3MgQ29uc3RyYWludCB7CiAgICAvKioKICAgICAqIEVxdWF0aW9ucyB0byBiZSBzb2x2ZWQgaW4gdGhpcyBjb25zdHJhaW50LgogICAgICovCgogICAgLyoqCiAgICAgKiBCb2R5IEEuCiAgICAgKi8KCiAgICAvKioKICAgICAqIEJvZHkgQi4KICAgICAqLwoKICAgIC8qKgogICAgICogU2V0IHRvIGZhbHNlIGlmIHlvdSBkb24ndCB3YW50IHRoZSBib2RpZXMgdG8gY29sbGlkZSB3aGVuIHRoZXkgYXJlIGNvbm5lY3RlZC4KICAgICAqLwogICAgY29uc3RydWN0b3IoYm9keUEsIGJvZHlCLCBvcHRpb25zKSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIG9wdGlvbnMgPSBVdGlscy5kZWZhdWx0cyhvcHRpb25zLCB7CiAgICAgICAgY29sbGlkZUNvbm5lY3RlZDogdHJ1ZSwKICAgICAgICB3YWtlVXBCb2RpZXM6IHRydWUKICAgICAgfSk7CiAgICAgIHRoaXMuZXF1YXRpb25zID0gW107CiAgICAgIHRoaXMuYm9keUEgPSBib2R5QTsKICAgICAgdGhpcy5ib2R5QiA9IGJvZHlCOwogICAgICB0aGlzLmlkID0gQ29uc3RyYWludC5pZENvdW50ZXIrKzsKICAgICAgdGhpcy5jb2xsaWRlQ29ubmVjdGVkID0gb3B0aW9ucy5jb2xsaWRlQ29ubmVjdGVkOwoKICAgICAgaWYgKG9wdGlvbnMud2FrZVVwQm9kaWVzKSB7CiAgICAgICAgaWYgKGJvZHlBKSB7CiAgICAgICAgICBib2R5QS53YWtlVXAoKTsKICAgICAgICB9CgogICAgICAgIGlmIChib2R5QikgewogICAgICAgICAgYm9keUIud2FrZVVwKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIFVwZGF0ZSBhbGwgdGhlIGVxdWF0aW9ucyB3aXRoIGRhdGEuCiAgICAgKi8KCgogICAgdXBkYXRlKCkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ21ldGhvZCB1cGRhdGUoKSBub3QgaW1wbG1lbWVudGVkIGluIHRoaXMgQ29uc3RyYWludCBzdWJjbGFzcyEnKTsKICAgIH0KICAgIC8qKgogICAgICogRW5hYmxlcyBhbGwgZXF1YXRpb25zIGluIHRoZSBjb25zdHJhaW50LgogICAgICovCgoKICAgIGVuYWJsZSgpIHsKICAgICAgY29uc3QgZXFzID0gdGhpcy5lcXVhdGlvbnM7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVxcy5sZW5ndGg7IGkrKykgewogICAgICAgIGVxc1tpXS5lbmFibGVkID0gdHJ1ZTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBEaXNhYmxlcyBhbGwgZXF1YXRpb25zIGluIHRoZSBjb25zdHJhaW50LgogICAgICovCgoKICAgIGRpc2FibGUoKSB7CiAgICAgIGNvbnN0IGVxcyA9IHRoaXMuZXF1YXRpb25zOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlcXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBlcXNbaV0uZW5hYmxlZCA9IGZhbHNlOwogICAgICB9CiAgICB9CgogIH0KICBDb25zdHJhaW50LmlkQ291bnRlciA9IDA7CgogIC8qKgogICAqIEFuIGVsZW1lbnQgY29udGFpbmluZyA2IGVudHJpZXMsIDMgc3BhdGlhbCBhbmQgMyByb3RhdGlvbmFsIGRlZ3JlZXMgb2YgZnJlZWRvbS4KICAgKi8KCiAgY2xhc3MgSmFjb2JpYW5FbGVtZW50IHsKICAgIC8qKgogICAgICogc3BhdGlhbAogICAgICovCgogICAgLyoqCiAgICAgKiByb3RhdGlvbmFsCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKCkgewogICAgICB0aGlzLnNwYXRpYWwgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnJvdGF0aW9uYWwgPSBuZXcgVmVjMygpOwogICAgfQogICAgLyoqCiAgICAgKiBNdWx0aXBseSB3aXRoIG90aGVyIEphY29iaWFuRWxlbWVudAogICAgICovCgoKICAgIG11bHRpcGx5RWxlbWVudChlbGVtZW50KSB7CiAgICAgIHJldHVybiBlbGVtZW50LnNwYXRpYWwuZG90KHRoaXMuc3BhdGlhbCkgKyBlbGVtZW50LnJvdGF0aW9uYWwuZG90KHRoaXMucm90YXRpb25hbCk7CiAgICB9CiAgICAvKioKICAgICAqIE11bHRpcGx5IHdpdGggdHdvIHZlY3RvcnMKICAgICAqLwoKCiAgICBtdWx0aXBseVZlY3RvcnMoc3BhdGlhbCwgcm90YXRpb25hbCkgewogICAgICByZXR1cm4gc3BhdGlhbC5kb3QodGhpcy5zcGF0aWFsKSArIHJvdGF0aW9uYWwuZG90KHRoaXMucm90YXRpb25hbCk7CiAgICB9CgogIH0KCiAgLyoqCiAgICogRXF1YXRpb24gYmFzZSBjbGFzcy4KICAgKgogICAqIGBhYCwgYGJgIGFuZCBgZXBzYCBhcmUge0BsaW5rIGh0dHBzOi8vd3d3OC5jcy51bXUuc2Uva3Vyc2VyLzVEVjA1OC9WVDE1L2xlY3R1cmVzL1NQT09LbGFibm90ZXMucGRmIFNQT09LfSBwYXJhbWV0ZXJzIHRoYXQgZGVmYXVsdCB0byBgMC4wYC4gU2VlIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vc2NodGVwcGUvY2Fubm9uLmpzL2lzc3Vlcy8yMzgjaXNzdWVjb21tZW50LTE0NzE3MjMyNyB0aGlzIGV4Y2hhbmdlfSBmb3IgbW9yZSBkZXRhaWxzIG9uIENhbm5vbidzIHBoeXNpY3MgaW1wbGVtZW50YXRpb24uCiAgICovCiAgY2xhc3MgRXF1YXRpb24gewogICAgLyoqCiAgICAgKiBNaW5pbXVtIChyZWFkOiBuZWdhdGl2ZSBtYXgpIGZvcmNlIHRvIGJlIGFwcGxpZWQgYnkgdGhlIGNvbnN0cmFpbnQuCiAgICAgKi8KCiAgICAvKioKICAgICAqIE1heGltdW0gKHJlYWQ6IHBvc2l0aXZlIG1heCkgZm9yY2UgdG8gYmUgYXBwbGllZCBieSB0aGUgY29uc3RyYWludC4KICAgICAqLwoKICAgIC8qKgogICAgICogU1BPT0sgcGFyYW1ldGVyCiAgICAgKi8KCiAgICAvKioKICAgICAqIFNQT09LIHBhcmFtZXRlcgogICAgICovCgogICAgLyoqCiAgICAgKiBTUE9PSyBwYXJhbWV0ZXIKICAgICAqLwoKICAgIC8qKgogICAgICogQSBudW1iZXIsIHByb3BvcnRpb25hbCB0byB0aGUgZm9yY2UgYWRkZWQgdG8gdGhlIGJvZGllcy4KICAgICAqLwogICAgY29uc3RydWN0b3IoYmksIGJqLCBtaW5Gb3JjZSwgbWF4Rm9yY2UpIHsKICAgICAgaWYgKG1pbkZvcmNlID09PSB2b2lkIDApIHsKICAgICAgICBtaW5Gb3JjZSA9IC0xZTY7CiAgICAgIH0KCiAgICAgIGlmIChtYXhGb3JjZSA9PT0gdm9pZCAwKSB7CiAgICAgICAgbWF4Rm9yY2UgPSAxZTY7CiAgICAgIH0KCiAgICAgIHRoaXMuaWQgPSBFcXVhdGlvbi5pZENvdW50ZXIrKzsKICAgICAgdGhpcy5taW5Gb3JjZSA9IG1pbkZvcmNlOwogICAgICB0aGlzLm1heEZvcmNlID0gbWF4Rm9yY2U7CiAgICAgIHRoaXMuYmkgPSBiaTsKICAgICAgdGhpcy5iaiA9IGJqOwogICAgICB0aGlzLmEgPSAwLjA7IC8vIFNQT09LIHBhcmFtZXRlcgoKICAgICAgdGhpcy5iID0gMC4wOyAvLyBTUE9PSyBwYXJhbWV0ZXIKCiAgICAgIHRoaXMuZXBzID0gMC4wOyAvLyBTUE9PSyBwYXJhbWV0ZXIKCiAgICAgIHRoaXMuamFjb2JpYW5FbGVtZW50QSA9IG5ldyBKYWNvYmlhbkVsZW1lbnQoKTsKICAgICAgdGhpcy5qYWNvYmlhbkVsZW1lbnRCID0gbmV3IEphY29iaWFuRWxlbWVudCgpOwogICAgICB0aGlzLmVuYWJsZWQgPSB0cnVlOwogICAgICB0aGlzLm11bHRpcGxpZXIgPSAwOwogICAgICB0aGlzLnNldFNwb29rUGFyYW1zKDFlNywgNCwgMSAvIDYwKTsgLy8gU2V0IHR5cGljYWwgc3Bvb2sgcGFyYW1zCiAgICB9CiAgICAvKioKICAgICAqIFJlY2FsY3VsYXRlcyBhLCBiLCBhbmQgZXBzLgogICAgICoKICAgICAqIFRoZSBFcXVhdGlvbiBjb25zdHJ1Y3RvciBzZXRzIHR5cGljYWwgU1BPT0sgcGFyYW1ldGVycyBhcyBzdWNoOgogICAgICogKiBgc3RpZmZuZXNzYCA9IDFlNwogICAgICogKiBgcmVsYXhhdGlvbmAgPSA0CiAgICAgKiAqIGB0aW1lU3RlcGA9IDEgLyA2MCwgX25vdGUgdGhlIGhhcmRjb2RlZCByZWZyZXNoIHJhdGUuXwogICAgICovCgoKICAgIHNldFNwb29rUGFyYW1zKHN0aWZmbmVzcywgcmVsYXhhdGlvbiwgdGltZVN0ZXApIHsKICAgICAgY29uc3QgZCA9IHJlbGF4YXRpb247CiAgICAgIGNvbnN0IGsgPSBzdGlmZm5lc3M7CiAgICAgIGNvbnN0IGggPSB0aW1lU3RlcDsKICAgICAgdGhpcy5hID0gNC4wIC8gKGggKiAoMSArIDQgKiBkKSk7CiAgICAgIHRoaXMuYiA9IDQuMCAqIGQgLyAoMSArIDQgKiBkKTsKICAgICAgdGhpcy5lcHMgPSA0LjAgLyAoaCAqIGggKiBrICogKDEgKyA0ICogZCkpOwogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlcyB0aGUgcmlnaHQgaGFuZCBzaWRlIG9mIHRoZSBTUE9PSyBlcXVhdGlvbgogICAgICovCgoKICAgIGNvbXB1dGVCKGEsIGIsIGgpIHsKICAgICAgY29uc3QgR1cgPSB0aGlzLmNvbXB1dGVHVygpOwogICAgICBjb25zdCBHcSA9IHRoaXMuY29tcHV0ZUdxKCk7CiAgICAgIGNvbnN0IEdpTWYgPSB0aGlzLmNvbXB1dGVHaU1mKCk7CiAgICAgIHJldHVybiAtR3EgKiBhIC0gR1cgKiBiIC0gR2lNZiAqIGg7CiAgICB9CiAgICAvKioKICAgICAqIENvbXB1dGVzIEcqcSwgd2hlcmUgcSBhcmUgdGhlIGdlbmVyYWxpemVkIGJvZHkgY29vcmRpbmF0ZXMKICAgICAqLwoKCiAgICBjb21wdXRlR3EoKSB7CiAgICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBOwogICAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjsKICAgICAgY29uc3QgYmkgPSB0aGlzLmJpOwogICAgICBjb25zdCBiaiA9IHRoaXMuYmo7CiAgICAgIGNvbnN0IHhpID0gYmkucG9zaXRpb247CiAgICAgIGNvbnN0IHhqID0gYmoucG9zaXRpb247CiAgICAgIHJldHVybiBHQS5zcGF0aWFsLmRvdCh4aSkgKyBHQi5zcGF0aWFsLmRvdCh4aik7CiAgICB9CiAgICAvKioKICAgICAqIENvbXB1dGVzIEcqVywgd2hlcmUgVyBhcmUgdGhlIGJvZHkgdmVsb2NpdGllcwogICAgICovCgoKICAgIGNvbXB1dGVHVygpIHsKICAgICAgY29uc3QgR0EgPSB0aGlzLmphY29iaWFuRWxlbWVudEE7CiAgICAgIGNvbnN0IEdCID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRCOwogICAgICBjb25zdCBiaSA9IHRoaXMuYmk7CiAgICAgIGNvbnN0IGJqID0gdGhpcy5iajsKICAgICAgY29uc3QgdmkgPSBiaS52ZWxvY2l0eTsKICAgICAgY29uc3QgdmogPSBiai52ZWxvY2l0eTsKICAgICAgY29uc3Qgd2kgPSBiaS5hbmd1bGFyVmVsb2NpdHk7CiAgICAgIGNvbnN0IHdqID0gYmouYW5ndWxhclZlbG9jaXR5OwogICAgICByZXR1cm4gR0EubXVsdGlwbHlWZWN0b3JzKHZpLCB3aSkgKyBHQi5tdWx0aXBseVZlY3RvcnModmosIHdqKTsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZXMgRypXbGFtYmRhLCB3aGVyZSBXIGFyZSB0aGUgYm9keSB2ZWxvY2l0aWVzCiAgICAgKi8KCgogICAgY29tcHV0ZUdXbGFtYmRhKCkgewogICAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTsKICAgICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7CiAgICAgIGNvbnN0IGJpID0gdGhpcy5iaTsKICAgICAgY29uc3QgYmogPSB0aGlzLmJqOwogICAgICBjb25zdCB2aSA9IGJpLnZsYW1iZGE7CiAgICAgIGNvbnN0IHZqID0gYmoudmxhbWJkYTsKICAgICAgY29uc3Qgd2kgPSBiaS53bGFtYmRhOwogICAgICBjb25zdCB3aiA9IGJqLndsYW1iZGE7CiAgICAgIHJldHVybiBHQS5tdWx0aXBseVZlY3RvcnModmksIHdpKSArIEdCLm11bHRpcGx5VmVjdG9ycyh2aiwgd2opOwogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlcyBHKmludihNKSpmLCB3aGVyZSBNIGlzIHRoZSBtYXNzIG1hdHJpeCB3aXRoIGRpYWdvbmFsIGJsb2NrcyBmb3IgZWFjaCBib2R5LCBhbmQgZiBhcmUgdGhlIGZvcmNlcyBvbiB0aGUgYm9kaWVzLgogICAgICovCgoKICAgIGNvbXB1dGVHaU1mKCkgewogICAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTsKICAgICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7CiAgICAgIGNvbnN0IGJpID0gdGhpcy5iaTsKICAgICAgY29uc3QgYmogPSB0aGlzLmJqOwogICAgICBjb25zdCBmaSA9IGJpLmZvcmNlOwogICAgICBjb25zdCB0aSA9IGJpLnRvcnF1ZTsKICAgICAgY29uc3QgZmogPSBiai5mb3JjZTsKICAgICAgY29uc3QgdGogPSBiai50b3JxdWU7CiAgICAgIGNvbnN0IGludk1hc3NpID0gYmkuaW52TWFzc1NvbHZlOwogICAgICBjb25zdCBpbnZNYXNzaiA9IGJqLmludk1hc3NTb2x2ZTsKICAgICAgZmkuc2NhbGUoaW52TWFzc2ksIGlNZmkpOwogICAgICBmai5zY2FsZShpbnZNYXNzaiwgaU1maik7CiAgICAgIGJpLmludkluZXJ0aWFXb3JsZFNvbHZlLnZtdWx0KHRpLCBpbnZJaV92bXVsdF90YXVpKTsKICAgICAgYmouaW52SW5lcnRpYVdvcmxkU29sdmUudm11bHQodGosIGludklqX3ZtdWx0X3RhdWopOwogICAgICByZXR1cm4gR0EubXVsdGlwbHlWZWN0b3JzKGlNZmksIGludklpX3ZtdWx0X3RhdWkpICsgR0IubXVsdGlwbHlWZWN0b3JzKGlNZmosIGludklqX3ZtdWx0X3RhdWopOwogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlcyBHKmludihNKSpHJwogICAgICovCgoKICAgIGNvbXB1dGVHaU1HdCgpIHsKICAgICAgY29uc3QgR0EgPSB0aGlzLmphY29iaWFuRWxlbWVudEE7CiAgICAgIGNvbnN0IEdCID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRCOwogICAgICBjb25zdCBiaSA9IHRoaXMuYmk7CiAgICAgIGNvbnN0IGJqID0gdGhpcy5iajsKICAgICAgY29uc3QgaW52TWFzc2kgPSBiaS5pbnZNYXNzU29sdmU7CiAgICAgIGNvbnN0IGludk1hc3NqID0gYmouaW52TWFzc1NvbHZlOwogICAgICBjb25zdCBpbnZJaSA9IGJpLmludkluZXJ0aWFXb3JsZFNvbHZlOwogICAgICBjb25zdCBpbnZJaiA9IGJqLmludkluZXJ0aWFXb3JsZFNvbHZlOwogICAgICBsZXQgcmVzdWx0ID0gaW52TWFzc2kgKyBpbnZNYXNzajsKICAgICAgaW52SWkudm11bHQoR0Eucm90YXRpb25hbCwgdG1wKTsKICAgICAgcmVzdWx0ICs9IHRtcC5kb3QoR0Eucm90YXRpb25hbCk7CiAgICAgIGludklqLnZtdWx0KEdCLnJvdGF0aW9uYWwsIHRtcCk7CiAgICAgIHJlc3VsdCArPSB0bXAuZG90KEdCLnJvdGF0aW9uYWwpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiBBZGQgY29uc3RyYWludCB2ZWxvY2l0eSB0byB0aGUgYm9kaWVzLgogICAgICovCgoKICAgIGFkZFRvV2xhbWJkYShkZWx0YWxhbWJkYSkgewogICAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTsKICAgICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7CiAgICAgIGNvbnN0IGJpID0gdGhpcy5iaTsKICAgICAgY29uc3QgYmogPSB0aGlzLmJqOwogICAgICBjb25zdCB0ZW1wID0gYWRkVG9XbGFtYmRhX3RlbXA7IC8vIEFkZCB0byBsaW5lYXIgdmVsb2NpdHkKICAgICAgLy8gdl9sYW1iZGEgKz0gaW52KE0pICogZGVsdGFfbGFtYmEgKiBHCgogICAgICBiaS52bGFtYmRhLmFkZFNjYWxlZFZlY3RvcihiaS5pbnZNYXNzU29sdmUgKiBkZWx0YWxhbWJkYSwgR0Euc3BhdGlhbCwgYmkudmxhbWJkYSk7CiAgICAgIGJqLnZsYW1iZGEuYWRkU2NhbGVkVmVjdG9yKGJqLmludk1hc3NTb2x2ZSAqIGRlbHRhbGFtYmRhLCBHQi5zcGF0aWFsLCBiai52bGFtYmRhKTsgLy8gQWRkIHRvIGFuZ3VsYXIgdmVsb2NpdHkKCiAgICAgIGJpLmludkluZXJ0aWFXb3JsZFNvbHZlLnZtdWx0KEdBLnJvdGF0aW9uYWwsIHRlbXApOwogICAgICBiaS53bGFtYmRhLmFkZFNjYWxlZFZlY3RvcihkZWx0YWxhbWJkYSwgdGVtcCwgYmkud2xhbWJkYSk7CiAgICAgIGJqLmludkluZXJ0aWFXb3JsZFNvbHZlLnZtdWx0KEdCLnJvdGF0aW9uYWwsIHRlbXApOwogICAgICBiai53bGFtYmRhLmFkZFNjYWxlZFZlY3RvcihkZWx0YWxhbWJkYSwgdGVtcCwgYmoud2xhbWJkYSk7CiAgICB9CiAgICAvKioKICAgICAqIENvbXB1dGUgdGhlIGRlbm9taW5hdG9yIHBhcnQgb2YgdGhlIFNQT09LIGVxdWF0aW9uOiBDID0gRyppbnYoTSkqRycgKyBlcHMKICAgICAqLwoKCiAgICBjb21wdXRlQygpIHsKICAgICAgcmV0dXJuIHRoaXMuY29tcHV0ZUdpTUd0KCkgKyB0aGlzLmVwczsKICAgIH0KCiAgfQogIEVxdWF0aW9uLmlkQ291bnRlciA9IDA7CiAgY29uc3QgaU1maSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaU1maiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW52SWlfdm11bHRfdGF1aSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW52SWpfdm11bHRfdGF1aiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgdG1wID0gbmV3IFZlYzMoKTsKICBjb25zdCBhZGRUb1dsYW1iZGFfdGVtcCA9IG5ldyBWZWMzKCk7CgogIC8qKgogICAqIENvbnRhY3Qvbm9uLXBlbmV0cmF0aW9uIGNvbnN0cmFpbnQgZXF1YXRpb24KICAgKi8KICBjbGFzcyBDb250YWN0RXF1YXRpb24gZXh0ZW5kcyBFcXVhdGlvbiB7CiAgICAvKioKICAgICAqICJib3VuY2luZXNzIjogdTEgPSAtZSp1MAogICAgICovCgogICAgLyoqCiAgICAgKiBXb3JsZC1vcmllbnRlZCB2ZWN0b3IgdGhhdCBnb2VzIGZyb20gdGhlIGNlbnRlciBvZiBiaSB0byB0aGUgY29udGFjdCBwb2ludC4KICAgICAqLwoKICAgIC8qKgogICAgICogV29ybGQtb3JpZW50ZWQgdmVjdG9yIHRoYXQgc3RhcnRzIGluIGJvZHkgaiBwb3NpdGlvbiBhbmQgZ29lcyB0byB0aGUgY29udGFjdCBwb2ludC4KICAgICAqLwoKICAgIC8qKgogICAgICogQ29udGFjdCBub3JtYWwsIHBvaW50aW5nIG91dCBvZiBib2R5IGkuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGJvZHlBLCBib2R5QiwgbWF4Rm9yY2UpIHsKICAgICAgaWYgKG1heEZvcmNlID09PSB2b2lkIDApIHsKICAgICAgICBtYXhGb3JjZSA9IDFlNjsKICAgICAgfQoKICAgICAgc3VwZXIoYm9keUEsIGJvZHlCLCAwLCBtYXhGb3JjZSk7CiAgICAgIHRoaXMucmVzdGl0dXRpb24gPSAwLjA7CiAgICAgIHRoaXMucmkgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnJqID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5uaSA9IG5ldyBWZWMzKCk7CiAgICB9CgogICAgY29tcHV0ZUIoaCkgewogICAgICBjb25zdCBhID0gdGhpcy5hOwogICAgICBjb25zdCBiID0gdGhpcy5iOwogICAgICBjb25zdCBiaSA9IHRoaXMuYmk7CiAgICAgIGNvbnN0IGJqID0gdGhpcy5iajsKICAgICAgY29uc3QgcmkgPSB0aGlzLnJpOwogICAgICBjb25zdCByaiA9IHRoaXMucmo7CiAgICAgIGNvbnN0IHJpeG4gPSBDb250YWN0RXF1YXRpb25fY29tcHV0ZUJfdGVtcDE7CiAgICAgIGNvbnN0IHJqeG4gPSBDb250YWN0RXF1YXRpb25fY29tcHV0ZUJfdGVtcDI7CiAgICAgIGNvbnN0IHZpID0gYmkudmVsb2NpdHk7CiAgICAgIGNvbnN0IHdpID0gYmkuYW5ndWxhclZlbG9jaXR5OwogICAgICBiaS5mb3JjZTsKICAgICAgYmkudG9ycXVlOwogICAgICBjb25zdCB2aiA9IGJqLnZlbG9jaXR5OwogICAgICBjb25zdCB3aiA9IGJqLmFuZ3VsYXJWZWxvY2l0eTsKICAgICAgYmouZm9yY2U7CiAgICAgIGJqLnRvcnF1ZTsKICAgICAgY29uc3QgcGVuZXRyYXRpb25WZWMgPSBDb250YWN0RXF1YXRpb25fY29tcHV0ZUJfdGVtcDM7CiAgICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBOwogICAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjsKICAgICAgY29uc3QgbiA9IHRoaXMubmk7IC8vIENhbHVjbGF0ZSBjcm9zcyBwcm9kdWN0cwoKICAgICAgcmkuY3Jvc3Mobiwgcml4bik7CiAgICAgIHJqLmNyb3NzKG4sIHJqeG4pOyAvLyBnID0geGorcmogLSh4aStyaSkKICAgICAgLy8gRyA9IFsgLW5pICAtcml4biAgbmkgIHJqeG4gXQoKICAgICAgbi5uZWdhdGUoR0Euc3BhdGlhbCk7CiAgICAgIHJpeG4ubmVnYXRlKEdBLnJvdGF0aW9uYWwpOwogICAgICBHQi5zcGF0aWFsLmNvcHkobik7CiAgICAgIEdCLnJvdGF0aW9uYWwuY29weShyanhuKTsgLy8gQ2FsY3VsYXRlIHRoZSBwZW5ldHJhdGlvbiB2ZWN0b3IKCiAgICAgIHBlbmV0cmF0aW9uVmVjLmNvcHkoYmoucG9zaXRpb24pOwogICAgICBwZW5ldHJhdGlvblZlYy52YWRkKHJqLCBwZW5ldHJhdGlvblZlYyk7CiAgICAgIHBlbmV0cmF0aW9uVmVjLnZzdWIoYmkucG9zaXRpb24sIHBlbmV0cmF0aW9uVmVjKTsKICAgICAgcGVuZXRyYXRpb25WZWMudnN1YihyaSwgcGVuZXRyYXRpb25WZWMpOwogICAgICBjb25zdCBnID0gbi5kb3QocGVuZXRyYXRpb25WZWMpOyAvLyBDb21wdXRlIGl0ZXJhdGlvbgoKICAgICAgY29uc3QgZVBsdXNPbmUgPSB0aGlzLnJlc3RpdHV0aW9uICsgMTsKICAgICAgY29uc3QgR1cgPSBlUGx1c09uZSAqIHZqLmRvdChuKSAtIGVQbHVzT25lICogdmkuZG90KG4pICsgd2ouZG90KHJqeG4pIC0gd2kuZG90KHJpeG4pOwogICAgICBjb25zdCBHaU1mID0gdGhpcy5jb21wdXRlR2lNZigpOwogICAgICBjb25zdCBCID0gLWcgKiBhIC0gR1cgKiBiIC0gaCAqIEdpTWY7CiAgICAgIHJldHVybiBCOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIGN1cnJlbnQgcmVsYXRpdmUgdmVsb2NpdHkgaW4gdGhlIGNvbnRhY3QgcG9pbnQuCiAgICAgKi8KCgogICAgZ2V0SW1wYWN0VmVsb2NpdHlBbG9uZ05vcm1hbCgpIHsKICAgICAgY29uc3QgdmkgPSBDb250YWN0RXF1YXRpb25fZ2V0SW1wYWN0VmVsb2NpdHlBbG9uZ05vcm1hbF92aTsKICAgICAgY29uc3QgdmogPSBDb250YWN0RXF1YXRpb25fZ2V0SW1wYWN0VmVsb2NpdHlBbG9uZ05vcm1hbF92ajsKICAgICAgY29uc3QgeGkgPSBDb250YWN0RXF1YXRpb25fZ2V0SW1wYWN0VmVsb2NpdHlBbG9uZ05vcm1hbF94aTsKICAgICAgY29uc3QgeGogPSBDb250YWN0RXF1YXRpb25fZ2V0SW1wYWN0VmVsb2NpdHlBbG9uZ05vcm1hbF94ajsKICAgICAgY29uc3QgcmVsVmVsID0gQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfcmVsVmVsOwogICAgICB0aGlzLmJpLnBvc2l0aW9uLnZhZGQodGhpcy5yaSwgeGkpOwogICAgICB0aGlzLmJqLnBvc2l0aW9uLnZhZGQodGhpcy5yaiwgeGopOwogICAgICB0aGlzLmJpLmdldFZlbG9jaXR5QXRXb3JsZFBvaW50KHhpLCB2aSk7CiAgICAgIHRoaXMuYmouZ2V0VmVsb2NpdHlBdFdvcmxkUG9pbnQoeGosIHZqKTsKICAgICAgdmkudnN1Yih2aiwgcmVsVmVsKTsKICAgICAgcmV0dXJuIHRoaXMubmkuZG90KHJlbFZlbCk7CiAgICB9CgogIH0KICBjb25zdCBDb250YWN0RXF1YXRpb25fY29tcHV0ZUJfdGVtcDEgPSBuZXcgVmVjMygpOyAvLyBUZW1wIHZlY3RvcnMKCiAgY29uc3QgQ29udGFjdEVxdWF0aW9uX2NvbXB1dGVCX3RlbXAyID0gbmV3IFZlYzMoKTsKICBjb25zdCBDb250YWN0RXF1YXRpb25fY29tcHV0ZUJfdGVtcDMgPSBuZXcgVmVjMygpOwogIGNvbnN0IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3ZpID0gbmV3IFZlYzMoKTsKICBjb25zdCBDb250YWN0RXF1YXRpb25fZ2V0SW1wYWN0VmVsb2NpdHlBbG9uZ05vcm1hbF92aiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfeGkgPSBuZXcgVmVjMygpOwogIGNvbnN0IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3hqID0gbmV3IFZlYzMoKTsKICBjb25zdCBDb250YWN0RXF1YXRpb25fZ2V0SW1wYWN0VmVsb2NpdHlBbG9uZ05vcm1hbF9yZWxWZWwgPSBuZXcgVmVjMygpOwoKICAvKioKICAgKiBDb25uZWN0cyB0d28gYm9kaWVzIGF0IGdpdmVuIG9mZnNldCBwb2ludHMuCiAgICogQGV4YW1wbGUKICAgKiAgICAgY29uc3QgYm9keUEgPSBuZXcgQm9keSh7IG1hc3M6IDEgfSkKICAgKiAgICAgY29uc3QgYm9keUIgPSBuZXcgQm9keSh7IG1hc3M6IDEgfSkKICAgKiAgICAgYm9keUEucG9zaXRpb24uc2V0KC0xLCAwLCAwKQogICAqICAgICBib2R5Qi5wb3NpdGlvbi5zZXQoMSwgMCwgMCkKICAgKiAgICAgYm9keUEuYWRkU2hhcGUoc2hhcGVBKQogICAqICAgICBib2R5Qi5hZGRTaGFwZShzaGFwZUIpCiAgICogICAgIHdvcmxkLmFkZEJvZHkoYm9keUEpCiAgICogICAgIHdvcmxkLmFkZEJvZHkoYm9keUIpCiAgICogICAgIGNvbnN0IGxvY2FsUGl2b3RBID0gbmV3IFZlYzMoMSwgMCwgMCkKICAgKiAgICAgY29uc3QgbG9jYWxQaXZvdEIgPSBuZXcgVmVjMygtMSwgMCwgMCkKICAgKiAgICAgY29uc3QgY29uc3RyYWludCA9IG5ldyBQb2ludFRvUG9pbnRDb25zdHJhaW50KGJvZHlBLCBsb2NhbFBpdm90QSwgYm9keUIsIGxvY2FsUGl2b3RCKQogICAqICAgICB3b3JsZC5hZGRDb25zdHJhaW50KGNvbnN0cmFpbnQpCiAgICovCiAgY2xhc3MgUG9pbnRUb1BvaW50Q29uc3RyYWludCBleHRlbmRzIENvbnN0cmFpbnQgewogICAgLyoqCiAgICAgKiBQaXZvdCwgZGVmaW5lZCBsb2NhbGx5IGluIGJvZHlBLgogICAgICovCgogICAgLyoqCiAgICAgKiBQaXZvdCwgZGVmaW5lZCBsb2NhbGx5IGluIGJvZHlCLgogICAgICovCgogICAgLyoqCiAgICAgKiBAcGFyYW0gcGl2b3RBIFRoZSBwb2ludCByZWxhdGl2ZSB0byB0aGUgY2VudGVyIG9mIG1hc3Mgb2YgYm9keUEgd2hpY2ggYm9keUEgaXMgY29uc3RyYWluZWQgdG8uCiAgICAgKiBAcGFyYW0gYm9keUIgQm9keSB0aGF0IHdpbGwgYmUgY29uc3RyYWluZWQgaW4gYSBzaW1pbGFyIHdheSB0byB0aGUgc2FtZSBwb2ludCBhcyBib2R5QS4gV2Ugd2lsbCB0aGVyZWZvcmUgZ2V0IGEgbGluayBiZXR3ZWVuIGJvZHlBIGFuZCBib2R5Qi4gSWYgbm90IHNwZWNpZmllZCwgYm9keUEgd2lsbCBiZSBjb25zdHJhaW5lZCB0byBhIHN0YXRpYyBwb2ludC4KICAgICAqIEBwYXJhbSBwaXZvdEIgVGhlIHBvaW50IHJlbGF0aXZlIHRvIHRoZSBjZW50ZXIgb2YgbWFzcyBvZiBib2R5QiB3aGljaCBib2R5QiBpcyBjb25zdHJhaW5lZCB0by4KICAgICAqIEBwYXJhbSBtYXhGb3JjZSBUaGUgbWF4aW11bSBmb3JjZSB0aGF0IHNob3VsZCBiZSBhcHBsaWVkIHRvIGNvbnN0cmFpbiB0aGUgYm9kaWVzLgogICAgICovCiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgcGl2b3RBLCBib2R5QiwgcGl2b3RCLCBtYXhGb3JjZSkgewogICAgICBpZiAocGl2b3RBID09PSB2b2lkIDApIHsKICAgICAgICBwaXZvdEEgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBpZiAocGl2b3RCID09PSB2b2lkIDApIHsKICAgICAgICBwaXZvdEIgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBpZiAobWF4Rm9yY2UgPT09IHZvaWQgMCkgewogICAgICAgIG1heEZvcmNlID0gMWU2OwogICAgICB9CgogICAgICBzdXBlcihib2R5QSwgYm9keUIpOwogICAgICB0aGlzLnBpdm90QSA9IHBpdm90QS5jbG9uZSgpOwogICAgICB0aGlzLnBpdm90QiA9IHBpdm90Qi5jbG9uZSgpOwogICAgICBjb25zdCB4ID0gdGhpcy5lcXVhdGlvblggPSBuZXcgQ29udGFjdEVxdWF0aW9uKGJvZHlBLCBib2R5Qik7CiAgICAgIGNvbnN0IHkgPSB0aGlzLmVxdWF0aW9uWSA9IG5ldyBDb250YWN0RXF1YXRpb24oYm9keUEsIGJvZHlCKTsKICAgICAgY29uc3QgeiA9IHRoaXMuZXF1YXRpb25aID0gbmV3IENvbnRhY3RFcXVhdGlvbihib2R5QSwgYm9keUIpOyAvLyBFcXVhdGlvbnMgdG8gYmUgZmVkIHRvIHRoZSBzb2x2ZXIKCiAgICAgIHRoaXMuZXF1YXRpb25zLnB1c2goeCwgeSwgeik7IC8vIE1ha2UgdGhlIGVxdWF0aW9ucyBiaWRpcmVjdGlvbmFsCgogICAgICB4Lm1pbkZvcmNlID0geS5taW5Gb3JjZSA9IHoubWluRm9yY2UgPSAtbWF4Rm9yY2U7CiAgICAgIHgubWF4Rm9yY2UgPSB5Lm1heEZvcmNlID0gei5tYXhGb3JjZSA9IG1heEZvcmNlOwogICAgICB4Lm5pLnNldCgxLCAwLCAwKTsKICAgICAgeS5uaS5zZXQoMCwgMSwgMCk7CiAgICAgIHoubmkuc2V0KDAsIDAsIDEpOwogICAgfQoKICAgIHVwZGF0ZSgpIHsKICAgICAgY29uc3QgYm9keUEgPSB0aGlzLmJvZHlBOwogICAgICBjb25zdCBib2R5QiA9IHRoaXMuYm9keUI7CiAgICAgIGNvbnN0IHggPSB0aGlzLmVxdWF0aW9uWDsKICAgICAgY29uc3QgeSA9IHRoaXMuZXF1YXRpb25ZOwogICAgICBjb25zdCB6ID0gdGhpcy5lcXVhdGlvblo7IC8vIFJvdGF0ZSB0aGUgcGl2b3RzIHRvIHdvcmxkIHNwYWNlCgogICAgICBib2R5QS5xdWF0ZXJuaW9uLnZtdWx0KHRoaXMucGl2b3RBLCB4LnJpKTsKICAgICAgYm9keUIucXVhdGVybmlvbi52bXVsdCh0aGlzLnBpdm90QiwgeC5yaik7CiAgICAgIHkucmkuY29weSh4LnJpKTsKICAgICAgeS5yai5jb3B5KHgucmopOwogICAgICB6LnJpLmNvcHkoeC5yaSk7CiAgICAgIHoucmouY29weSh4LnJqKTsKICAgIH0KCiAgfQoKICAvKioKICAgKiBDb25lIGVxdWF0aW9uLiBXb3JrcyB0byBrZWVwIHRoZSBnaXZlbiBib2R5IHdvcmxkIHZlY3RvcnMgYWxpZ25lZCwgb3IgdGlsdGVkIHdpdGhpbiBhIGdpdmVuIGFuZ2xlIGZyb20gZWFjaCBvdGhlci4KICAgKi8KICBjbGFzcyBDb25lRXF1YXRpb24gZXh0ZW5kcyBFcXVhdGlvbiB7CiAgICAvKioKICAgICAqIExvY2FsIGF4aXMgaW4gQQogICAgICovCgogICAgLyoqCiAgICAgKiBMb2NhbCBheGlzIGluIEIKICAgICAqLwoKICAgIC8qKgogICAgICogVGhlICJjb25lIGFuZ2xlIiB0byBrZWVwCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGJvZHlBLCBib2R5Qiwgb3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBjb25zdCBtYXhGb3JjZSA9IHR5cGVvZiBvcHRpb25zLm1heEZvcmNlICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMubWF4Rm9yY2UgOiAxZTY7CiAgICAgIHN1cGVyKGJvZHlBLCBib2R5QiwgLW1heEZvcmNlLCBtYXhGb3JjZSk7CiAgICAgIHRoaXMuYXhpc0EgPSBvcHRpb25zLmF4aXNBID8gb3B0aW9ucy5heGlzQS5jbG9uZSgpIDogbmV3IFZlYzMoMSwgMCwgMCk7CiAgICAgIHRoaXMuYXhpc0IgPSBvcHRpb25zLmF4aXNCID8gb3B0aW9ucy5heGlzQi5jbG9uZSgpIDogbmV3IFZlYzMoMCwgMSwgMCk7CiAgICAgIHRoaXMuYW5nbGUgPSB0eXBlb2Ygb3B0aW9ucy5hbmdsZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmFuZ2xlIDogMDsKICAgIH0KCiAgICBjb21wdXRlQihoKSB7CiAgICAgIGNvbnN0IGEgPSB0aGlzLmE7CiAgICAgIGNvbnN0IGIgPSB0aGlzLmI7CiAgICAgIGNvbnN0IG5pID0gdGhpcy5heGlzQTsKICAgICAgY29uc3QgbmogPSB0aGlzLmF4aXNCOwogICAgICBjb25zdCBuaXhuaiA9IHRtcFZlYzEkMjsKICAgICAgY29uc3Qgbmp4bmkgPSB0bXBWZWMyJDI7CiAgICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBOwogICAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjsgLy8gQ2FsdWNsYXRlIGNyb3NzIHByb2R1Y3RzCgogICAgICBuaS5jcm9zcyhuaiwgbml4bmopOwogICAgICBuai5jcm9zcyhuaSwgbmp4bmkpOyAvLyBUaGUgYW5nbGUgYmV0d2VlbiB0d28gdmVjdG9yIGlzOgogICAgICAvLyBjb3ModGhldGEpID0gYSAqIGIgLyAobGVuZ3RoKGEpICogbGVuZ3RoKGIpID0geyBsZW4oYSkgPSBsZW4oYikgPSAxIH0gPSBhICogYgogICAgICAvLyBnID0gYSAqIGIKICAgICAgLy8gZ2RvdCA9IChiIHggYSkgKiB3aSArIChhIHggYikgKiB3agogICAgICAvLyBHID0gWzAgYnhhIDAgYXhiXQogICAgICAvLyBXID0gW3ZpIHdpIHZqIHdqXQoKICAgICAgR0Eucm90YXRpb25hbC5jb3B5KG5qeG5pKTsKICAgICAgR0Iucm90YXRpb25hbC5jb3B5KG5peG5qKTsKICAgICAgY29uc3QgZyA9IE1hdGguY29zKHRoaXMuYW5nbGUpIC0gbmkuZG90KG5qKTsKICAgICAgY29uc3QgR1cgPSB0aGlzLmNvbXB1dGVHVygpOwogICAgICBjb25zdCBHaU1mID0gdGhpcy5jb21wdXRlR2lNZigpOwogICAgICBjb25zdCBCID0gLWcgKiBhIC0gR1cgKiBiIC0gaCAqIEdpTWY7CiAgICAgIHJldHVybiBCOwogICAgfQoKICB9CiAgY29uc3QgdG1wVmVjMSQyID0gbmV3IFZlYzMoKTsKICBjb25zdCB0bXBWZWMyJDIgPSBuZXcgVmVjMygpOwoKICAvKioKICAgKiBSb3RhdGlvbmFsIGNvbnN0cmFpbnQuIFdvcmtzIHRvIGtlZXAgdGhlIGxvY2FsIHZlY3RvcnMgb3J0aG9nb25hbCB0byBlYWNoIG90aGVyIGluIHdvcmxkIHNwYWNlLgogICAqLwogIGNsYXNzIFJvdGF0aW9uYWxFcXVhdGlvbiBleHRlbmRzIEVxdWF0aW9uIHsKICAgIC8qKgogICAgICogV29ybGQgb3JpZW50ZWQgcm90YXRpb25hbCBheGlzLgogICAgICovCgogICAgLyoqCiAgICAgKiBXb3JsZCBvcmllbnRlZCByb3RhdGlvbmFsIGF4aXMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIG1heEFuZ2xlCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGJvZHlBLCBib2R5Qiwgb3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBjb25zdCBtYXhGb3JjZSA9IHR5cGVvZiBvcHRpb25zLm1heEZvcmNlICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMubWF4Rm9yY2UgOiAxZTY7CiAgICAgIHN1cGVyKGJvZHlBLCBib2R5QiwgLW1heEZvcmNlLCBtYXhGb3JjZSk7CiAgICAgIHRoaXMuYXhpc0EgPSBvcHRpb25zLmF4aXNBID8gb3B0aW9ucy5heGlzQS5jbG9uZSgpIDogbmV3IFZlYzMoMSwgMCwgMCk7CiAgICAgIHRoaXMuYXhpc0IgPSBvcHRpb25zLmF4aXNCID8gb3B0aW9ucy5heGlzQi5jbG9uZSgpIDogbmV3IFZlYzMoMCwgMSwgMCk7CiAgICAgIHRoaXMubWF4QW5nbGUgPSBNYXRoLlBJIC8gMjsKICAgIH0KCiAgICBjb21wdXRlQihoKSB7CiAgICAgIGNvbnN0IGEgPSB0aGlzLmE7CiAgICAgIGNvbnN0IGIgPSB0aGlzLmI7CiAgICAgIGNvbnN0IG5pID0gdGhpcy5heGlzQTsKICAgICAgY29uc3QgbmogPSB0aGlzLmF4aXNCOwogICAgICBjb25zdCBuaXhuaiA9IHRtcFZlYzEkMTsKICAgICAgY29uc3Qgbmp4bmkgPSB0bXBWZWMyJDE7CiAgICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBOwogICAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjsgLy8gQ2FsdWNsYXRlIGNyb3NzIHByb2R1Y3RzCgogICAgICBuaS5jcm9zcyhuaiwgbml4bmopOwogICAgICBuai5jcm9zcyhuaSwgbmp4bmkpOyAvLyBnID0gbmkgKiBuagogICAgICAvLyBnZG90ID0gKG5qIHggbmkpICogd2kgKyAobmkgeCBuaikgKiB3agogICAgICAvLyBHID0gWzAgbmp4bmkgMCBuaXhual0KICAgICAgLy8gVyA9IFt2aSB3aSB2aiB3al0KCiAgICAgIEdBLnJvdGF0aW9uYWwuY29weShuanhuaSk7CiAgICAgIEdCLnJvdGF0aW9uYWwuY29weShuaXhuaik7CiAgICAgIGNvbnN0IGcgPSBNYXRoLmNvcyh0aGlzLm1heEFuZ2xlKSAtIG5pLmRvdChuaik7CiAgICAgIGNvbnN0IEdXID0gdGhpcy5jb21wdXRlR1coKTsKICAgICAgY29uc3QgR2lNZiA9IHRoaXMuY29tcHV0ZUdpTWYoKTsKICAgICAgY29uc3QgQiA9IC1nICogYSAtIEdXICogYiAtIGggKiBHaU1mOwogICAgICByZXR1cm4gQjsKICAgIH0KCiAgfQogIGNvbnN0IHRtcFZlYzEkMSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgdG1wVmVjMiQxID0gbmV3IFZlYzMoKTsKCiAgLyoqCiAgICogQSBDb25lIFR3aXN0IGNvbnN0cmFpbnQsIHVzZWZ1bCBmb3IgcmFnZG9sbHMuCiAgICovCiAgY2xhc3MgQ29uZVR3aXN0Q29uc3RyYWludCBleHRlbmRzIFBvaW50VG9Qb2ludENvbnN0cmFpbnQgewogICAgLyoqCiAgICAgKiBUaGUgYXhpcyBkaXJlY3Rpb24gZm9yIHRoZSBjb25zdHJhaW50IG9mIHRoZSBib2R5IEEuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBheGlzIGRpcmVjdGlvbiBmb3IgdGhlIGNvbnN0cmFpbnQgb2YgdGhlIGJvZHkgQi4KICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIGFwZXJ0dXJlIGFuZ2xlIG9mIHRoZSBjb25lLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgdHdpc3QgYW5nbGUgb2YgdGhlIGpvaW50LgogICAgICovCiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgY29uc3QgbWF4Rm9yY2UgPSB0eXBlb2Ygb3B0aW9ucy5tYXhGb3JjZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLm1heEZvcmNlIDogMWU2OyAvLyBTZXQgcGl2b3QgcG9pbnQgaW4gYmV0d2VlbgoKICAgICAgY29uc3QgcGl2b3RBID0gb3B0aW9ucy5waXZvdEEgPyBvcHRpb25zLnBpdm90QS5jbG9uZSgpIDogbmV3IFZlYzMoKTsKICAgICAgY29uc3QgcGl2b3RCID0gb3B0aW9ucy5waXZvdEIgPyBvcHRpb25zLnBpdm90Qi5jbG9uZSgpIDogbmV3IFZlYzMoKTsKICAgICAgc3VwZXIoYm9keUEsIHBpdm90QSwgYm9keUIsIHBpdm90QiwgbWF4Rm9yY2UpOwogICAgICB0aGlzLmF4aXNBID0gb3B0aW9ucy5heGlzQSA/IG9wdGlvbnMuYXhpc0EuY2xvbmUoKSA6IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuYXhpc0IgPSBvcHRpb25zLmF4aXNCID8gb3B0aW9ucy5heGlzQi5jbG9uZSgpIDogbmV3IFZlYzMoKTsKICAgICAgdGhpcy5jb2xsaWRlQ29ubmVjdGVkID0gISFvcHRpb25zLmNvbGxpZGVDb25uZWN0ZWQ7CiAgICAgIHRoaXMuYW5nbGUgPSB0eXBlb2Ygb3B0aW9ucy5hbmdsZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmFuZ2xlIDogMDsKICAgICAgY29uc3QgYyA9IHRoaXMuY29uZUVxdWF0aW9uID0gbmV3IENvbmVFcXVhdGlvbihib2R5QSwgYm9keUIsIG9wdGlvbnMpOwogICAgICBjb25zdCB0ID0gdGhpcy50d2lzdEVxdWF0aW9uID0gbmV3IFJvdGF0aW9uYWxFcXVhdGlvbihib2R5QSwgYm9keUIsIG9wdGlvbnMpOwogICAgICB0aGlzLnR3aXN0QW5nbGUgPSB0eXBlb2Ygb3B0aW9ucy50d2lzdEFuZ2xlICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMudHdpc3RBbmdsZSA6IDA7IC8vIE1ha2UgdGhlIGNvbmUgZXF1YXRpb24gcHVzaCB0aGUgYm9kaWVzIHRvd2FyZCB0aGUgY29uZSBheGlzLCBub3Qgb3V0d2FyZAoKICAgICAgYy5tYXhGb3JjZSA9IDA7CiAgICAgIGMubWluRm9yY2UgPSAtbWF4Rm9yY2U7IC8vIE1ha2UgdGhlIHR3aXN0IGVxdWF0aW9uIGFkZCB0b3JxdWUgdG93YXJkIHRoZSBpbml0aWFsIHBvc2l0aW9uCgogICAgICB0Lm1heEZvcmNlID0gMDsKICAgICAgdC5taW5Gb3JjZSA9IC1tYXhGb3JjZTsKICAgICAgdGhpcy5lcXVhdGlvbnMucHVzaChjLCB0KTsKICAgIH0KCiAgICB1cGRhdGUoKSB7CiAgICAgIGNvbnN0IGJvZHlBID0gdGhpcy5ib2R5QTsKICAgICAgY29uc3QgYm9keUIgPSB0aGlzLmJvZHlCOwogICAgICBjb25zdCBjb25lID0gdGhpcy5jb25lRXF1YXRpb247CiAgICAgIGNvbnN0IHR3aXN0ID0gdGhpcy50d2lzdEVxdWF0aW9uOwogICAgICBzdXBlci51cGRhdGUoKTsgLy8gVXBkYXRlIHRoZSBheGVzIHRvIHRoZSBjb25lIGNvbnN0cmFpbnQKCiAgICAgIGJvZHlBLnZlY3RvclRvV29ybGRGcmFtZSh0aGlzLmF4aXNBLCBjb25lLmF4aXNBKTsKICAgICAgYm9keUIudmVjdG9yVG9Xb3JsZEZyYW1lKHRoaXMuYXhpc0IsIGNvbmUuYXhpc0IpOyAvLyBVcGRhdGUgdGhlIHdvcmxkIGF4ZXMgaW4gdGhlIHR3aXN0IGNvbnN0cmFpbnQKCiAgICAgIHRoaXMuYXhpc0EudGFuZ2VudHModHdpc3QuYXhpc0EsIHR3aXN0LmF4aXNBKTsKICAgICAgYm9keUEudmVjdG9yVG9Xb3JsZEZyYW1lKHR3aXN0LmF4aXNBLCB0d2lzdC5heGlzQSk7CiAgICAgIHRoaXMuYXhpc0IudGFuZ2VudHModHdpc3QuYXhpc0IsIHR3aXN0LmF4aXNCKTsKICAgICAgYm9keUIudmVjdG9yVG9Xb3JsZEZyYW1lKHR3aXN0LmF4aXNCLCB0d2lzdC5heGlzQik7CiAgICAgIGNvbmUuYW5nbGUgPSB0aGlzLmFuZ2xlOwogICAgICB0d2lzdC5tYXhBbmdsZSA9IHRoaXMudHdpc3RBbmdsZTsKICAgIH0KCiAgfQogIG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKCiAgLyoqCiAgICogQ29uc3RyYWlucyB0d28gYm9kaWVzIHRvIGJlIGF0IGEgY29uc3RhbnQgZGlzdGFuY2UgZnJvbSBlYWNoIG90aGVycyBjZW50ZXIgb2YgbWFzcy4KICAgKi8KICBjbGFzcyBEaXN0YW5jZUNvbnN0cmFpbnQgZXh0ZW5kcyBDb25zdHJhaW50IHsKICAgIC8qKgogICAgICogVGhlIGRpc3RhbmNlIHRvIGtlZXAuIElmIHVuZGVmaW5lZCwgaXQgd2lsbCBiZSBzZXQgdG8gdGhlIGN1cnJlbnQgZGlzdGFuY2UgYmV0d2VlbiBib2R5QSBhbmQgYm9keUIKICAgICAqLwoKICAgIC8qKgogICAgICogQHBhcmFtIGRpc3RhbmNlIFRoZSBkaXN0YW5jZSB0byBrZWVwLiBJZiB1bmRlZmluZWQsIGl0IHdpbGwgYmUgc2V0IHRvIHRoZSBjdXJyZW50IGRpc3RhbmNlIGJldHdlZW4gYm9keUEgYW5kIGJvZHlCLgogICAgICogQHBhcmFtIG1heEZvcmNlIFRoZSBtYXhpbXVtIGZvcmNlIHRoYXQgc2hvdWxkIGJlIGFwcGxpZWQgdG8gY29uc3RyYWluIHRoZSBib2RpZXMuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGJvZHlBLCBib2R5QiwgZGlzdGFuY2UsIG1heEZvcmNlKSB7CiAgICAgIGlmIChtYXhGb3JjZSA9PT0gdm9pZCAwKSB7CiAgICAgICAgbWF4Rm9yY2UgPSAxZTY7CiAgICAgIH0KCiAgICAgIHN1cGVyKGJvZHlBLCBib2R5Qik7CgogICAgICBpZiAodHlwZW9mIGRpc3RhbmNlID09PSAndW5kZWZpbmVkJykgewogICAgICAgIGRpc3RhbmNlID0gYm9keUEucG9zaXRpb24uZGlzdGFuY2VUbyhib2R5Qi5wb3NpdGlvbik7CiAgICAgIH0KCiAgICAgIHRoaXMuZGlzdGFuY2UgPSBkaXN0YW5jZTsKICAgICAgY29uc3QgZXEgPSB0aGlzLmRpc3RhbmNlRXF1YXRpb24gPSBuZXcgQ29udGFjdEVxdWF0aW9uKGJvZHlBLCBib2R5Qik7CiAgICAgIHRoaXMuZXF1YXRpb25zLnB1c2goZXEpOyAvLyBNYWtlIGl0IGJpZGlyZWN0aW9uYWwKCiAgICAgIGVxLm1pbkZvcmNlID0gLW1heEZvcmNlOwogICAgICBlcS5tYXhGb3JjZSA9IG1heEZvcmNlOwogICAgfQogICAgLyoqCiAgICAgKiB1cGRhdGUKICAgICAqLwoKCiAgICB1cGRhdGUoKSB7CiAgICAgIGNvbnN0IGJvZHlBID0gdGhpcy5ib2R5QTsKICAgICAgY29uc3QgYm9keUIgPSB0aGlzLmJvZHlCOwogICAgICBjb25zdCBlcSA9IHRoaXMuZGlzdGFuY2VFcXVhdGlvbjsKICAgICAgY29uc3QgaGFsZkRpc3QgPSB0aGlzLmRpc3RhbmNlICogMC41OwogICAgICBjb25zdCBub3JtYWwgPSBlcS5uaTsKICAgICAgYm9keUIucG9zaXRpb24udnN1Yihib2R5QS5wb3NpdGlvbiwgbm9ybWFsKTsKICAgICAgbm9ybWFsLm5vcm1hbGl6ZSgpOwogICAgICBub3JtYWwuc2NhbGUoaGFsZkRpc3QsIGVxLnJpKTsKICAgICAgbm9ybWFsLnNjYWxlKC1oYWxmRGlzdCwgZXEucmopOwogICAgfQoKICB9CgogIC8qKgogICAqIExvY2sgY29uc3RyYWludC4gV2lsbCByZW1vdmUgYWxsIGRlZ3JlZXMgb2YgZnJlZWRvbSBiZXR3ZWVuIHRoZSBib2RpZXMuCiAgICovCiAgY2xhc3MgTG9ja0NvbnN0cmFpbnQgZXh0ZW5kcyBQb2ludFRvUG9pbnRDb25zdHJhaW50IHsKICAgIGNvbnN0cnVjdG9yKGJvZHlBLCBib2R5Qiwgb3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBjb25zdCBtYXhGb3JjZSA9IHR5cGVvZiBvcHRpb25zLm1heEZvcmNlICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMubWF4Rm9yY2UgOiAxZTY7IC8vIFNldCBwaXZvdCBwb2ludCBpbiBiZXR3ZWVuCgogICAgICBjb25zdCBwaXZvdEEgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBwaXZvdEIgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBoYWxmV2F5ID0gbmV3IFZlYzMoKTsKICAgICAgYm9keUEucG9zaXRpb24udmFkZChib2R5Qi5wb3NpdGlvbiwgaGFsZldheSk7CiAgICAgIGhhbGZXYXkuc2NhbGUoMC41LCBoYWxmV2F5KTsKICAgICAgYm9keUIucG9pbnRUb0xvY2FsRnJhbWUoaGFsZldheSwgcGl2b3RCKTsKICAgICAgYm9keUEucG9pbnRUb0xvY2FsRnJhbWUoaGFsZldheSwgcGl2b3RBKTsgLy8gVGhlIHBvaW50LXRvLXBvaW50IGNvbnN0cmFpbnQgd2lsbCBrZWVwIGEgcG9pbnQgc2hhcmVkIGJldHdlZW4gdGhlIGJvZGllcwoKICAgICAgc3VwZXIoYm9keUEsIHBpdm90QSwgYm9keUIsIHBpdm90QiwgbWF4Rm9yY2UpOyAvLyBTdG9yZSBpbml0aWFsIHJvdGF0aW9uIG9mIHRoZSBib2RpZXMgYXMgdW5pdCB2ZWN0b3JzIGluIHRoZSBsb2NhbCBib2R5IHNwYWNlcwoKICAgICAgdGhpcy54QSA9IGJvZHlBLnZlY3RvclRvTG9jYWxGcmFtZShWZWMzLlVOSVRfWCk7CiAgICAgIHRoaXMueEIgPSBib2R5Qi52ZWN0b3JUb0xvY2FsRnJhbWUoVmVjMy5VTklUX1gpOwogICAgICB0aGlzLnlBID0gYm9keUEudmVjdG9yVG9Mb2NhbEZyYW1lKFZlYzMuVU5JVF9ZKTsKICAgICAgdGhpcy55QiA9IGJvZHlCLnZlY3RvclRvTG9jYWxGcmFtZShWZWMzLlVOSVRfWSk7CiAgICAgIHRoaXMuekEgPSBib2R5QS52ZWN0b3JUb0xvY2FsRnJhbWUoVmVjMy5VTklUX1opOwogICAgICB0aGlzLnpCID0gYm9keUIudmVjdG9yVG9Mb2NhbEZyYW1lKFZlYzMuVU5JVF9aKTsgLy8gLi4uYW5kIHRoZSBmb2xsb3dpbmcgcm90YXRpb25hbCBlcXVhdGlvbnMgd2lsbCBrZWVwIGFsbCByb3RhdGlvbmFsIERPRidzIGluIHBsYWNlCgogICAgICBjb25zdCByMSA9IHRoaXMucm90YXRpb25hbEVxdWF0aW9uMSA9IG5ldyBSb3RhdGlvbmFsRXF1YXRpb24oYm9keUEsIGJvZHlCLCBvcHRpb25zKTsKICAgICAgY29uc3QgcjIgPSB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjIgPSBuZXcgUm90YXRpb25hbEVxdWF0aW9uKGJvZHlBLCBib2R5Qiwgb3B0aW9ucyk7CiAgICAgIGNvbnN0IHIzID0gdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24zID0gbmV3IFJvdGF0aW9uYWxFcXVhdGlvbihib2R5QSwgYm9keUIsIG9wdGlvbnMpOwogICAgICB0aGlzLmVxdWF0aW9ucy5wdXNoKHIxLCByMiwgcjMpOwogICAgfQogICAgLyoqCiAgICAgKiB1cGRhdGUKICAgICAqLwoKCiAgICB1cGRhdGUoKSB7CiAgICAgIGNvbnN0IGJvZHlBID0gdGhpcy5ib2R5QTsKICAgICAgY29uc3QgYm9keUIgPSB0aGlzLmJvZHlCOwogICAgICB0aGlzLm1vdG9yRXF1YXRpb247CiAgICAgIGNvbnN0IHIxID0gdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24xOwogICAgICBjb25zdCByMiA9IHRoaXMucm90YXRpb25hbEVxdWF0aW9uMjsKICAgICAgY29uc3QgcjMgPSB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjM7CiAgICAgIHN1cGVyLnVwZGF0ZSgpOyAvLyBUaGVzZSB2ZWN0b3IgcGFpcnMgbXVzdCBiZSBvcnRob2dvbmFsCgogICAgICBib2R5QS52ZWN0b3JUb1dvcmxkRnJhbWUodGhpcy54QSwgcjEuYXhpc0EpOwogICAgICBib2R5Qi52ZWN0b3JUb1dvcmxkRnJhbWUodGhpcy55QiwgcjEuYXhpc0IpOwogICAgICBib2R5QS52ZWN0b3JUb1dvcmxkRnJhbWUodGhpcy55QSwgcjIuYXhpc0EpOwogICAgICBib2R5Qi52ZWN0b3JUb1dvcmxkRnJhbWUodGhpcy56QiwgcjIuYXhpc0IpOwogICAgICBib2R5QS52ZWN0b3JUb1dvcmxkRnJhbWUodGhpcy56QSwgcjMuYXhpc0EpOwogICAgICBib2R5Qi52ZWN0b3JUb1dvcmxkRnJhbWUodGhpcy54QiwgcjMuYXhpc0IpOwogICAgfQoKICB9CiAgbmV3IFZlYzMoKTsKICBuZXcgVmVjMygpOwoKICAvKioKICAgKiBSb3RhdGlvbmFsIG1vdG9yIGNvbnN0cmFpbnQuIFRyaWVzIHRvIGtlZXAgdGhlIHJlbGF0aXZlIGFuZ3VsYXIgdmVsb2NpdHkgb2YgdGhlIGJvZGllcyB0byBhIGdpdmVuIHZhbHVlLgogICAqLwogIGNsYXNzIFJvdGF0aW9uYWxNb3RvckVxdWF0aW9uIGV4dGVuZHMgRXF1YXRpb24gewogICAgLyoqCiAgICAgKiBXb3JsZCBvcmllbnRlZCByb3RhdGlvbmFsIGF4aXMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFdvcmxkIG9yaWVudGVkIHJvdGF0aW9uYWwgYXhpcy4KICAgICAqLwoKICAgIC8qKgogICAgICogTW90b3IgdmVsb2NpdHkuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGJvZHlBLCBib2R5QiwgbWF4Rm9yY2UpIHsKICAgICAgaWYgKG1heEZvcmNlID09PSB2b2lkIDApIHsKICAgICAgICBtYXhGb3JjZSA9IDFlNjsKICAgICAgfQoKICAgICAgc3VwZXIoYm9keUEsIGJvZHlCLCAtbWF4Rm9yY2UsIG1heEZvcmNlKTsKICAgICAgdGhpcy5heGlzQSA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuYXhpc0IgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnRhcmdldFZlbG9jaXR5ID0gMDsKICAgIH0KCiAgICBjb21wdXRlQihoKSB7CiAgICAgIHRoaXMuYTsKICAgICAgY29uc3QgYiA9IHRoaXMuYjsKICAgICAgdGhpcy5iaTsKICAgICAgdGhpcy5iajsKICAgICAgY29uc3QgYXhpc0EgPSB0aGlzLmF4aXNBOwogICAgICBjb25zdCBheGlzQiA9IHRoaXMuYXhpc0I7CiAgICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBOwogICAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjsgLy8gZyA9IDAKICAgICAgLy8gZ2RvdCA9IGF4aXNBICogd2kgLSBheGlzQiAqIHdqCiAgICAgIC8vIGdkb3QgPSBHICogVyA9IEcgKiBbdmkgd2kgdmogd2pdCiAgICAgIC8vID0+CiAgICAgIC8vIEcgPSBbMCBheGlzQSAwIC1heGlzQl0KCiAgICAgIEdBLnJvdGF0aW9uYWwuY29weShheGlzQSk7CiAgICAgIGF4aXNCLm5lZ2F0ZShHQi5yb3RhdGlvbmFsKTsKICAgICAgY29uc3QgR1cgPSB0aGlzLmNvbXB1dGVHVygpIC0gdGhpcy50YXJnZXRWZWxvY2l0eTsKICAgICAgY29uc3QgR2lNZiA9IHRoaXMuY29tcHV0ZUdpTWYoKTsKICAgICAgY29uc3QgQiA9IC1HVyAqIGIgLSBoICogR2lNZjsKICAgICAgcmV0dXJuIEI7CiAgICB9CgogIH0KCiAgLyoqCiAgICogSGluZ2UgY29uc3RyYWludC4gVGhpbmsgb2YgaXQgYXMgYSBkb29yIGhpbmdlLiBJdCB0cmllcyB0byBrZWVwIHRoZSBkb29yIGluIHRoZSBjb3JyZWN0IHBsYWNlIGFuZCB3aXRoIHRoZSBjb3JyZWN0IG9yaWVudGF0aW9uLgogICAqLwogIGNsYXNzIEhpbmdlQ29uc3RyYWludCBleHRlbmRzIFBvaW50VG9Qb2ludENvbnN0cmFpbnQgewogICAgLyoqCiAgICAgKiBSb3RhdGlvbiBheGlzLCBkZWZpbmVkIGxvY2FsbHkgaW4gYm9keUEuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFJvdGF0aW9uIGF4aXMsIGRlZmluZWQgbG9jYWxseSBpbiBib2R5Qi4KICAgICAqLwogICAgY29uc3RydWN0b3IoYm9keUEsIGJvZHlCLCBvcHRpb25zKSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIGNvbnN0IG1heEZvcmNlID0gdHlwZW9mIG9wdGlvbnMubWF4Rm9yY2UgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5tYXhGb3JjZSA6IDFlNjsKICAgICAgY29uc3QgcGl2b3RBID0gb3B0aW9ucy5waXZvdEEgPyBvcHRpb25zLnBpdm90QS5jbG9uZSgpIDogbmV3IFZlYzMoKTsKICAgICAgY29uc3QgcGl2b3RCID0gb3B0aW9ucy5waXZvdEIgPyBvcHRpb25zLnBpdm90Qi5jbG9uZSgpIDogbmV3IFZlYzMoKTsKICAgICAgc3VwZXIoYm9keUEsIHBpdm90QSwgYm9keUIsIHBpdm90QiwgbWF4Rm9yY2UpOwogICAgICBjb25zdCBheGlzQSA9IHRoaXMuYXhpc0EgPSBvcHRpb25zLmF4aXNBID8gb3B0aW9ucy5heGlzQS5jbG9uZSgpIDogbmV3IFZlYzMoMSwgMCwgMCk7CiAgICAgIGF4aXNBLm5vcm1hbGl6ZSgpOwogICAgICBjb25zdCBheGlzQiA9IHRoaXMuYXhpc0IgPSBvcHRpb25zLmF4aXNCID8gb3B0aW9ucy5heGlzQi5jbG9uZSgpIDogbmV3IFZlYzMoMSwgMCwgMCk7CiAgICAgIGF4aXNCLm5vcm1hbGl6ZSgpOwogICAgICB0aGlzLmNvbGxpZGVDb25uZWN0ZWQgPSAhIW9wdGlvbnMuY29sbGlkZUNvbm5lY3RlZDsKICAgICAgY29uc3Qgcm90YXRpb25hbDEgPSB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjEgPSBuZXcgUm90YXRpb25hbEVxdWF0aW9uKGJvZHlBLCBib2R5Qiwgb3B0aW9ucyk7CiAgICAgIGNvbnN0IHJvdGF0aW9uYWwyID0gdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24yID0gbmV3IFJvdGF0aW9uYWxFcXVhdGlvbihib2R5QSwgYm9keUIsIG9wdGlvbnMpOwogICAgICBjb25zdCBtb3RvciA9IHRoaXMubW90b3JFcXVhdGlvbiA9IG5ldyBSb3RhdGlvbmFsTW90b3JFcXVhdGlvbihib2R5QSwgYm9keUIsIG1heEZvcmNlKTsKICAgICAgbW90b3IuZW5hYmxlZCA9IGZhbHNlOyAvLyBOb3QgZW5hYmxlZCBieSBkZWZhdWx0CiAgICAgIC8vIEVxdWF0aW9ucyB0byBiZSBmZWQgdG8gdGhlIHNvbHZlcgoKICAgICAgdGhpcy5lcXVhdGlvbnMucHVzaChyb3RhdGlvbmFsMSwgcm90YXRpb25hbDIsIG1vdG9yKTsKICAgIH0KICAgIC8qKgogICAgICogZW5hYmxlTW90b3IKICAgICAqLwoKCiAgICBlbmFibGVNb3RvcigpIHsKICAgICAgdGhpcy5tb3RvckVxdWF0aW9uLmVuYWJsZWQgPSB0cnVlOwogICAgfQogICAgLyoqCiAgICAgKiBkaXNhYmxlTW90b3IKICAgICAqLwoKCiAgICBkaXNhYmxlTW90b3IoKSB7CiAgICAgIHRoaXMubW90b3JFcXVhdGlvbi5lbmFibGVkID0gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIHNldE1vdG9yU3BlZWQKICAgICAqLwoKCiAgICBzZXRNb3RvclNwZWVkKHNwZWVkKSB7CiAgICAgIHRoaXMubW90b3JFcXVhdGlvbi50YXJnZXRWZWxvY2l0eSA9IHNwZWVkOwogICAgfQogICAgLyoqCiAgICAgKiBzZXRNb3Rvck1heEZvcmNlCiAgICAgKi8KCgogICAgc2V0TW90b3JNYXhGb3JjZShtYXhGb3JjZSkgewogICAgICB0aGlzLm1vdG9yRXF1YXRpb24ubWF4Rm9yY2UgPSBtYXhGb3JjZTsKICAgICAgdGhpcy5tb3RvckVxdWF0aW9uLm1pbkZvcmNlID0gLW1heEZvcmNlOwogICAgfQogICAgLyoqCiAgICAgKiB1cGRhdGUKICAgICAqLwoKCiAgICB1cGRhdGUoKSB7CiAgICAgIGNvbnN0IGJvZHlBID0gdGhpcy5ib2R5QTsKICAgICAgY29uc3QgYm9keUIgPSB0aGlzLmJvZHlCOwogICAgICBjb25zdCBtb3RvciA9IHRoaXMubW90b3JFcXVhdGlvbjsKICAgICAgY29uc3QgcjEgPSB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjE7CiAgICAgIGNvbnN0IHIyID0gdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24yOwogICAgICBjb25zdCB3b3JsZEF4aXNBID0gSGluZ2VDb25zdHJhaW50X3VwZGF0ZV90bXBWZWMxOwogICAgICBjb25zdCB3b3JsZEF4aXNCID0gSGluZ2VDb25zdHJhaW50X3VwZGF0ZV90bXBWZWMyOwogICAgICBjb25zdCBheGlzQSA9IHRoaXMuYXhpc0E7CiAgICAgIGNvbnN0IGF4aXNCID0gdGhpcy5heGlzQjsKICAgICAgc3VwZXIudXBkYXRlKCk7IC8vIEdldCB3b3JsZCBheGVzCgogICAgICBib2R5QS5xdWF0ZXJuaW9uLnZtdWx0KGF4aXNBLCB3b3JsZEF4aXNBKTsKICAgICAgYm9keUIucXVhdGVybmlvbi52bXVsdChheGlzQiwgd29ybGRBeGlzQik7CiAgICAgIHdvcmxkQXhpc0EudGFuZ2VudHMocjEuYXhpc0EsIHIyLmF4aXNBKTsKICAgICAgcjEuYXhpc0IuY29weSh3b3JsZEF4aXNCKTsKICAgICAgcjIuYXhpc0IuY29weSh3b3JsZEF4aXNCKTsKCiAgICAgIGlmICh0aGlzLm1vdG9yRXF1YXRpb24uZW5hYmxlZCkgewogICAgICAgIGJvZHlBLnF1YXRlcm5pb24udm11bHQodGhpcy5heGlzQSwgbW90b3IuYXhpc0EpOwogICAgICAgIGJvZHlCLnF1YXRlcm5pb24udm11bHQodGhpcy5heGlzQiwgbW90b3IuYXhpc0IpOwogICAgICB9CiAgICB9CgogIH0KICBjb25zdCBIaW5nZUNvbnN0cmFpbnRfdXBkYXRlX3RtcFZlYzEgPSBuZXcgVmVjMygpOwogIGNvbnN0IEhpbmdlQ29uc3RyYWludF91cGRhdGVfdG1wVmVjMiA9IG5ldyBWZWMzKCk7CgogIC8qKgogICAqIENvbnN0cmFpbnMgdGhlIHNsaXBwaW5nIGluIGEgY29udGFjdCBhbG9uZyBhIHRhbmdlbnQKICAgKi8KICBjbGFzcyBGcmljdGlvbkVxdWF0aW9uIGV4dGVuZHMgRXF1YXRpb24gewogICAgLy8gVGFuZ2VudAoKICAgIC8qKgogICAgICogQHBhcmFtIHNsaXBGb3JjZSBzaG91bGQgYmUgKy1GX2ZyaWN0aW9uID0gKy1tdSAqIEZfbm9ybWFsID0gKy1tdSAqIG0gKiBnCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGJvZHlBLCBib2R5Qiwgc2xpcEZvcmNlKSB7CiAgICAgIHN1cGVyKGJvZHlBLCBib2R5QiwgLXNsaXBGb3JjZSwgc2xpcEZvcmNlKTsKICAgICAgdGhpcy5yaSA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMucmogPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnQgPSBuZXcgVmVjMygpOwogICAgfQoKICAgIGNvbXB1dGVCKGgpIHsKICAgICAgdGhpcy5hOwogICAgICBjb25zdCBiID0gdGhpcy5iOwogICAgICB0aGlzLmJpOwogICAgICB0aGlzLmJqOwogICAgICBjb25zdCByaSA9IHRoaXMucmk7CiAgICAgIGNvbnN0IHJqID0gdGhpcy5yajsKICAgICAgY29uc3Qgcml4dCA9IEZyaWN0aW9uRXF1YXRpb25fY29tcHV0ZUJfdGVtcDE7CiAgICAgIGNvbnN0IHJqeHQgPSBGcmljdGlvbkVxdWF0aW9uX2NvbXB1dGVCX3RlbXAyOwogICAgICBjb25zdCB0ID0gdGhpcy50OyAvLyBDYWx1Y2xhdGUgY3Jvc3MgcHJvZHVjdHMKCiAgICAgIHJpLmNyb3NzKHQsIHJpeHQpOwogICAgICByai5jcm9zcyh0LCByanh0KTsgLy8gRyA9IFstdCAtcml4dCB0IHJqeHRdCiAgICAgIC8vIEFuZCByZW1lbWJlciwgdGhpcyBpcyBhIHB1cmUgdmVsb2NpdHkgY29uc3RyYWludCwgZyBpcyBhbHdheXMgemVybyEKCiAgICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBOwogICAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjsKICAgICAgdC5uZWdhdGUoR0Euc3BhdGlhbCk7CiAgICAgIHJpeHQubmVnYXRlKEdBLnJvdGF0aW9uYWwpOwogICAgICBHQi5zcGF0aWFsLmNvcHkodCk7CiAgICAgIEdCLnJvdGF0aW9uYWwuY29weShyanh0KTsKICAgICAgY29uc3QgR1cgPSB0aGlzLmNvbXB1dGVHVygpOwogICAgICBjb25zdCBHaU1mID0gdGhpcy5jb21wdXRlR2lNZigpOwogICAgICBjb25zdCBCID0gLUdXICogYiAtIGggKiBHaU1mOwogICAgICByZXR1cm4gQjsKICAgIH0KCiAgfQogIGNvbnN0IEZyaWN0aW9uRXF1YXRpb25fY29tcHV0ZUJfdGVtcDEgPSBuZXcgVmVjMygpOwogIGNvbnN0IEZyaWN0aW9uRXF1YXRpb25fY29tcHV0ZUJfdGVtcDIgPSBuZXcgVmVjMygpOwoKICAvKioKICAgKiBEZWZpbmVzIHdoYXQgaGFwcGVucyB3aGVuIHR3byBtYXRlcmlhbHMgbWVldC4KICAgKiBAdG9kbyBSZWZhY3RvciBtYXRlcmlhbHMgdG8gbWF0ZXJpYWxBIGFuZCBtYXRlcmlhbEIKICAgKi8KICBjbGFzcyBDb250YWN0TWF0ZXJpYWwgewogICAgLyoqCiAgICAgKiBJZGVudGlmaWVyIG9mIHRoaXMgbWF0ZXJpYWwuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFBhcnRpY2lwYXRpbmcgbWF0ZXJpYWxzLgogICAgICovCgogICAgLyoqCiAgICAgKiBGcmljdGlvbiBjb2VmZmljaWVudC4KICAgICAqIEBkZWZhdWx0IDAuMwogICAgICovCgogICAgLyoqCiAgICAgKiBSZXN0aXR1dGlvbiBjb2VmZmljaWVudC4KICAgICAqIEBkZWZhdWx0IDAuMwogICAgICovCgogICAgLyoqCiAgICAgKiBTdGlmZm5lc3Mgb2YgdGhlIHByb2R1Y2VkIGNvbnRhY3QgZXF1YXRpb25zLgogICAgICogQGRlZmF1bHQgMWU3CiAgICAgKi8KCiAgICAvKioKICAgICAqIFJlbGF4YXRpb24gdGltZSBvZiB0aGUgcHJvZHVjZWQgY29udGFjdCBlcXVhdGlvbnMuCiAgICAgKiBAZGVmYXVsdCAzCiAgICAgKi8KCiAgICAvKioKICAgICAqIFN0aWZmbmVzcyBvZiB0aGUgcHJvZHVjZWQgZnJpY3Rpb24gZXF1YXRpb25zLgogICAgICogQGRlZmF1bHQgMWU3CiAgICAgKi8KCiAgICAvKioKICAgICAqIFJlbGF4YXRpb24gdGltZSBvZiB0aGUgcHJvZHVjZWQgZnJpY3Rpb24gZXF1YXRpb25zCiAgICAgKiBAZGVmYXVsdCAzCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKG0xLCBtMiwgb3B0aW9ucykgewogICAgICBvcHRpb25zID0gVXRpbHMuZGVmYXVsdHMob3B0aW9ucywgewogICAgICAgIGZyaWN0aW9uOiAwLjMsCiAgICAgICAgcmVzdGl0dXRpb246IDAuMywKICAgICAgICBjb250YWN0RXF1YXRpb25TdGlmZm5lc3M6IDFlNywKICAgICAgICBjb250YWN0RXF1YXRpb25SZWxheGF0aW9uOiAzLAogICAgICAgIGZyaWN0aW9uRXF1YXRpb25TdGlmZm5lc3M6IDFlNywKICAgICAgICBmcmljdGlvbkVxdWF0aW9uUmVsYXhhdGlvbjogMwogICAgICB9KTsKICAgICAgdGhpcy5pZCA9IENvbnRhY3RNYXRlcmlhbC5pZENvdW50ZXIrKzsKICAgICAgdGhpcy5tYXRlcmlhbHMgPSBbbTEsIG0yXTsKICAgICAgdGhpcy5mcmljdGlvbiA9IG9wdGlvbnMuZnJpY3Rpb247CiAgICAgIHRoaXMucmVzdGl0dXRpb24gPSBvcHRpb25zLnJlc3RpdHV0aW9uOwogICAgICB0aGlzLmNvbnRhY3RFcXVhdGlvblN0aWZmbmVzcyA9IG9wdGlvbnMuY29udGFjdEVxdWF0aW9uU3RpZmZuZXNzOwogICAgICB0aGlzLmNvbnRhY3RFcXVhdGlvblJlbGF4YXRpb24gPSBvcHRpb25zLmNvbnRhY3RFcXVhdGlvblJlbGF4YXRpb247CiAgICAgIHRoaXMuZnJpY3Rpb25FcXVhdGlvblN0aWZmbmVzcyA9IG9wdGlvbnMuZnJpY3Rpb25FcXVhdGlvblN0aWZmbmVzczsKICAgICAgdGhpcy5mcmljdGlvbkVxdWF0aW9uUmVsYXhhdGlvbiA9IG9wdGlvbnMuZnJpY3Rpb25FcXVhdGlvblJlbGF4YXRpb247CiAgICB9CgogIH0KICBDb250YWN0TWF0ZXJpYWwuaWRDb3VudGVyID0gMDsKCiAgLyoqCiAgICogRGVmaW5lcyBhIHBoeXNpY3MgbWF0ZXJpYWwuCiAgICovCiAgY2xhc3MgTWF0ZXJpYWwgewogICAgLyoqCiAgICAgKiBNYXRlcmlhbCBuYW1lLgogICAgICogSWYgb3B0aW9ucyBpcyBhIHN0cmluZywgbmFtZSB3aWxsIGJlIHNldCB0byB0aGF0IHN0cmluZy4KICAgICAqIEB0b2RvIERlcHJlY2F0ZSB0aGlzCiAgICAgKi8KCiAgICAvKiogTWF0ZXJpYWwgaWQuICovCgogICAgLyoqCiAgICAgKiBGcmljdGlvbiBmb3IgdGhpcyBtYXRlcmlhbC4KICAgICAqIElmIG5vbi1uZWdhdGl2ZSwgaXQgd2lsbCBiZSB1c2VkIGluc3RlYWQgb2YgdGhlIGZyaWN0aW9uIGdpdmVuIGJ5IENvbnRhY3RNYXRlcmlhbHMuIElmIHRoZXJlJ3Mgbm8gbWF0Y2hpbmcgQ29udGFjdE1hdGVyaWFsLCB0aGUgdmFsdWUgZnJvbSBgZGVmYXVsdENvbnRhY3RNYXRlcmlhbGAgaW4gdGhlIFdvcmxkIHdpbGwgYmUgdXNlZC4KICAgICAqLwoKICAgIC8qKgogICAgICogUmVzdGl0dXRpb24gZm9yIHRoaXMgbWF0ZXJpYWwuCiAgICAgKiBJZiBub24tbmVnYXRpdmUsIGl0IHdpbGwgYmUgdXNlZCBpbnN0ZWFkIG9mIHRoZSByZXN0aXR1dGlvbiBnaXZlbiBieSBDb250YWN0TWF0ZXJpYWxzLiBJZiB0aGVyZSdzIG5vIG1hdGNoaW5nIENvbnRhY3RNYXRlcmlhbCwgdGhlIHZhbHVlIGZyb20gYGRlZmF1bHRDb250YWN0TWF0ZXJpYWxgIGluIHRoZSBXb3JsZCB3aWxsIGJlIHVzZWQuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgbGV0IG5hbWUgPSAnJzsgLy8gQmFja3dhcmRzIGNvbXBhdGliaWxpdHkgZml4CgogICAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgLy9jb25zb2xlLndhcm4oYFBhc3NpbmcgYSBzdHJpbmcgdG8gTWF0ZXJpYWxPcHRpb25zIGlzIGRlcHJlY2F0ZWQsIGFuZCBoYXMgbm8gZWZmZWN0YCkKICAgICAgICBuYW1lID0gb3B0aW9uczsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIHRoaXMubmFtZSA9IG5hbWU7CiAgICAgIHRoaXMuaWQgPSBNYXRlcmlhbC5pZENvdW50ZXIrKzsKICAgICAgdGhpcy5mcmljdGlvbiA9IHR5cGVvZiBvcHRpb25zLmZyaWN0aW9uICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuZnJpY3Rpb24gOiAtMTsKICAgICAgdGhpcy5yZXN0aXR1dGlvbiA9IHR5cGVvZiBvcHRpb25zLnJlc3RpdHV0aW9uICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMucmVzdGl0dXRpb24gOiAtMTsKICAgIH0KCiAgfQogIE1hdGVyaWFsLmlkQ291bnRlciA9IDA7CgogIC8qKgogICAqIEEgc3ByaW5nLCBjb25uZWN0aW5nIHR3byBib2RpZXMuCiAgICogQGV4YW1wbGUKICAgKiAgICAgY29uc3Qgc3ByaW5nID0gbmV3IFNwcmluZyhib3hCb2R5LCBzcGhlcmVCb2R5LCB7CiAgICogICAgICAgcmVzdExlbmd0aDogMCwKICAgKiAgICAgICBzdGlmZm5lc3M6IDUwLAogICAqICAgICAgIGRhbXBpbmc6IDEsCiAgICogICAgIH0pCiAgICoKICAgKiAgICAgLy8gQ29tcHV0ZSB0aGUgZm9yY2UgYWZ0ZXIgZWFjaCBzdGVwCiAgICogICAgIHdvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ3Bvc3RTdGVwJywgKGV2ZW50KSA9PiB7CiAgICogICAgICAgc3ByaW5nLmFwcGx5Rm9yY2UoKQogICAqICAgICB9KQogICAqLwogIGNsYXNzIFNwcmluZyB7CiAgICAvKioKICAgICAqIFJlc3QgbGVuZ3RoIG9mIHRoZSBzcHJpbmcuIEEgbnVtYmVyID4gMC4KICAgICAqIEBkZWZhdWx0IDEKICAgICAqLwoKICAgIC8qKgogICAgICogU3RpZmZuZXNzIG9mIHRoZSBzcHJpbmcuIEEgbnVtYmVyID49IDAuCiAgICAgKiBAZGVmYXVsdCAxMDAKICAgICAqLwoKICAgIC8qKgogICAgICogRGFtcGluZyBvZiB0aGUgc3ByaW5nLiBBIG51bWJlciA+PSAwLgogICAgICogQGRlZmF1bHQgMQogICAgICovCgogICAgLyoqCiAgICAgKiBGaXJzdCBjb25uZWN0ZWQgYm9keS4KICAgICAqLwoKICAgIC8qKgogICAgICogU2Vjb25kIGNvbm5lY3RlZCBib2R5LgogICAgICovCgogICAgLyoqCiAgICAgKiBBbmNob3IgZm9yIGJvZHlBIGluIGxvY2FsIGJvZHlBIGNvb3JkaW5hdGVzLgogICAgICogV2hlcmUgdG8gaG9vayB0aGUgc3ByaW5nIHRvIGJvZHkgQSwgaW4gbG9jYWwgYm9keSBjb29yZGluYXRlcy4KICAgICAqIEBkZWZhdWx0IG5ldyBWZWMzKCkKICAgICAqLwoKICAgIC8qKgogICAgICogQW5jaG9yIGZvciBib2R5QiBpbiBsb2NhbCBib2R5QiBjb29yZGluYXRlcy4KICAgICAqIFdoZXJlIHRvIGhvb2sgdGhlIHNwcmluZyB0byBib2R5IEIsIGluIGxvY2FsIGJvZHkgY29vcmRpbmF0ZXMuCiAgICAgKiBAZGVmYXVsdCBuZXcgVmVjMygpCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGJvZHlBLCBib2R5Qiwgb3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICB0aGlzLnJlc3RMZW5ndGggPSB0eXBlb2Ygb3B0aW9ucy5yZXN0TGVuZ3RoID09PSAnbnVtYmVyJyA/IG9wdGlvbnMucmVzdExlbmd0aCA6IDE7CiAgICAgIHRoaXMuc3RpZmZuZXNzID0gb3B0aW9ucy5zdGlmZm5lc3MgfHwgMTAwOwogICAgICB0aGlzLmRhbXBpbmcgPSBvcHRpb25zLmRhbXBpbmcgfHwgMTsKICAgICAgdGhpcy5ib2R5QSA9IGJvZHlBOwogICAgICB0aGlzLmJvZHlCID0gYm9keUI7CiAgICAgIHRoaXMubG9jYWxBbmNob3JBID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5sb2NhbEFuY2hvckIgPSBuZXcgVmVjMygpOwoKICAgICAgaWYgKG9wdGlvbnMubG9jYWxBbmNob3JBKSB7CiAgICAgICAgdGhpcy5sb2NhbEFuY2hvckEuY29weShvcHRpb25zLmxvY2FsQW5jaG9yQSk7CiAgICAgIH0KCiAgICAgIGlmIChvcHRpb25zLmxvY2FsQW5jaG9yQikgewogICAgICAgIHRoaXMubG9jYWxBbmNob3JCLmNvcHkob3B0aW9ucy5sb2NhbEFuY2hvckIpOwogICAgICB9CgogICAgICBpZiAob3B0aW9ucy53b3JsZEFuY2hvckEpIHsKICAgICAgICB0aGlzLnNldFdvcmxkQW5jaG9yQShvcHRpb25zLndvcmxkQW5jaG9yQSk7CiAgICAgIH0KCiAgICAgIGlmIChvcHRpb25zLndvcmxkQW5jaG9yQikgewogICAgICAgIHRoaXMuc2V0V29ybGRBbmNob3JCKG9wdGlvbnMud29ybGRBbmNob3JCKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBTZXQgdGhlIGFuY2hvciBwb2ludCBvbiBib2R5IEEsIHVzaW5nIHdvcmxkIGNvb3JkaW5hdGVzLgogICAgICovCgoKICAgIHNldFdvcmxkQW5jaG9yQSh3b3JsZEFuY2hvckEpIHsKICAgICAgdGhpcy5ib2R5QS5wb2ludFRvTG9jYWxGcmFtZSh3b3JsZEFuY2hvckEsIHRoaXMubG9jYWxBbmNob3JBKTsKICAgIH0KICAgIC8qKgogICAgICogU2V0IHRoZSBhbmNob3IgcG9pbnQgb24gYm9keSBCLCB1c2luZyB3b3JsZCBjb29yZGluYXRlcy4KICAgICAqLwoKCiAgICBzZXRXb3JsZEFuY2hvckIod29ybGRBbmNob3JCKSB7CiAgICAgIHRoaXMuYm9keUIucG9pbnRUb0xvY2FsRnJhbWUod29ybGRBbmNob3JCLCB0aGlzLmxvY2FsQW5jaG9yQik7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgYW5jaG9yIHBvaW50IG9uIGJvZHkgQSwgaW4gd29ybGQgY29vcmRpbmF0ZXMuCiAgICAgKiBAcGFyYW0gcmVzdWx0IFRoZSB2ZWN0b3IgdG8gc3RvcmUgdGhlIHJlc3VsdCBpbi4KICAgICAqLwoKCiAgICBnZXRXb3JsZEFuY2hvckEocmVzdWx0KSB7CiAgICAgIHRoaXMuYm9keUEucG9pbnRUb1dvcmxkRnJhbWUodGhpcy5sb2NhbEFuY2hvckEsIHJlc3VsdCk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgYW5jaG9yIHBvaW50IG9uIGJvZHkgQiwgaW4gd29ybGQgY29vcmRpbmF0ZXMuCiAgICAgKiBAcGFyYW0gcmVzdWx0IFRoZSB2ZWN0b3IgdG8gc3RvcmUgdGhlIHJlc3VsdCBpbi4KICAgICAqLwoKCiAgICBnZXRXb3JsZEFuY2hvckIocmVzdWx0KSB7CiAgICAgIHRoaXMuYm9keUIucG9pbnRUb1dvcmxkRnJhbWUodGhpcy5sb2NhbEFuY2hvckIsIHJlc3VsdCk7CiAgICB9CiAgICAvKioKICAgICAqIEFwcGx5IHRoZSBzcHJpbmcgZm9yY2UgdG8gdGhlIGNvbm5lY3RlZCBib2RpZXMuCiAgICAgKi8KCgogICAgYXBwbHlGb3JjZSgpIHsKICAgICAgY29uc3QgayA9IHRoaXMuc3RpZmZuZXNzOwogICAgICBjb25zdCBkID0gdGhpcy5kYW1waW5nOwogICAgICBjb25zdCBsID0gdGhpcy5yZXN0TGVuZ3RoOwogICAgICBjb25zdCBib2R5QSA9IHRoaXMuYm9keUE7CiAgICAgIGNvbnN0IGJvZHlCID0gdGhpcy5ib2R5QjsKICAgICAgY29uc3QgciA9IGFwcGx5Rm9yY2VfcjsKICAgICAgY29uc3Qgcl91bml0ID0gYXBwbHlGb3JjZV9yX3VuaXQ7CiAgICAgIGNvbnN0IHUgPSBhcHBseUZvcmNlX3U7CiAgICAgIGNvbnN0IGYgPSBhcHBseUZvcmNlX2Y7CiAgICAgIGNvbnN0IHRtcCA9IGFwcGx5Rm9yY2VfdG1wOwogICAgICBjb25zdCB3b3JsZEFuY2hvckEgPSBhcHBseUZvcmNlX3dvcmxkQW5jaG9yQTsKICAgICAgY29uc3Qgd29ybGRBbmNob3JCID0gYXBwbHlGb3JjZV93b3JsZEFuY2hvckI7CiAgICAgIGNvbnN0IHJpID0gYXBwbHlGb3JjZV9yaTsKICAgICAgY29uc3QgcmogPSBhcHBseUZvcmNlX3JqOwogICAgICBjb25zdCByaV94X2YgPSBhcHBseUZvcmNlX3JpX3hfZjsKICAgICAgY29uc3QgcmpfeF9mID0gYXBwbHlGb3JjZV9yal94X2Y7IC8vIEdldCB3b3JsZCBhbmNob3JzCgogICAgICB0aGlzLmdldFdvcmxkQW5jaG9yQSh3b3JsZEFuY2hvckEpOwogICAgICB0aGlzLmdldFdvcmxkQW5jaG9yQih3b3JsZEFuY2hvckIpOyAvLyBHZXQgb2Zmc2V0IHBvaW50cwoKICAgICAgd29ybGRBbmNob3JBLnZzdWIoYm9keUEucG9zaXRpb24sIHJpKTsKICAgICAgd29ybGRBbmNob3JCLnZzdWIoYm9keUIucG9zaXRpb24sIHJqKTsgLy8gQ29tcHV0ZSBkaXN0YW5jZSB2ZWN0b3IgYmV0d2VlbiB3b3JsZCBhbmNob3IgcG9pbnRzCgogICAgICB3b3JsZEFuY2hvckIudnN1Yih3b3JsZEFuY2hvckEsIHIpOwogICAgICBjb25zdCBybGVuID0gci5sZW5ndGgoKTsKICAgICAgcl91bml0LmNvcHkocik7CiAgICAgIHJfdW5pdC5ub3JtYWxpemUoKTsgLy8gQ29tcHV0ZSByZWxhdGl2ZSB2ZWxvY2l0eSBvZiB0aGUgYW5jaG9yIHBvaW50cywgdQoKICAgICAgYm9keUIudmVsb2NpdHkudnN1Yihib2R5QS52ZWxvY2l0eSwgdSk7IC8vIEFkZCByb3RhdGlvbmFsIHZlbG9jaXR5CgogICAgICBib2R5Qi5hbmd1bGFyVmVsb2NpdHkuY3Jvc3MocmosIHRtcCk7CiAgICAgIHUudmFkZCh0bXAsIHUpOwogICAgICBib2R5QS5hbmd1bGFyVmVsb2NpdHkuY3Jvc3MocmksIHRtcCk7CiAgICAgIHUudnN1Yih0bXAsIHUpOyAvLyBGID0gLSBrICogKCB4IC0gTCApIC0gRCAqICggdSApCgogICAgICByX3VuaXQuc2NhbGUoLWsgKiAocmxlbiAtIGwpIC0gZCAqIHUuZG90KHJfdW5pdCksIGYpOyAvLyBBZGQgZm9yY2VzIHRvIGJvZGllcwoKICAgICAgYm9keUEuZm9yY2UudnN1YihmLCBib2R5QS5mb3JjZSk7CiAgICAgIGJvZHlCLmZvcmNlLnZhZGQoZiwgYm9keUIuZm9yY2UpOyAvLyBBbmd1bGFyIGZvcmNlCgogICAgICByaS5jcm9zcyhmLCByaV94X2YpOwogICAgICByai5jcm9zcyhmLCByal94X2YpOwogICAgICBib2R5QS50b3JxdWUudnN1YihyaV94X2YsIGJvZHlBLnRvcnF1ZSk7CiAgICAgIGJvZHlCLnRvcnF1ZS52YWRkKHJqX3hfZiwgYm9keUIudG9ycXVlKTsKICAgIH0KCiAgfQogIGNvbnN0IGFwcGx5Rm9yY2VfciA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYXBwbHlGb3JjZV9yX3VuaXQgPSBuZXcgVmVjMygpOwogIGNvbnN0IGFwcGx5Rm9yY2VfdSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYXBwbHlGb3JjZV9mID0gbmV3IFZlYzMoKTsKICBjb25zdCBhcHBseUZvcmNlX3dvcmxkQW5jaG9yQSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYXBwbHlGb3JjZV93b3JsZEFuY2hvckIgPSBuZXcgVmVjMygpOwogIGNvbnN0IGFwcGx5Rm9yY2VfcmkgPSBuZXcgVmVjMygpOwogIGNvbnN0IGFwcGx5Rm9yY2VfcmogPSBuZXcgVmVjMygpOwogIGNvbnN0IGFwcGx5Rm9yY2VfcmlfeF9mID0gbmV3IFZlYzMoKTsKICBjb25zdCBhcHBseUZvcmNlX3JqX3hfZiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYXBwbHlGb3JjZV90bXAgPSBuZXcgVmVjMygpOwoKICAvKioKICAgKiBXaGVlbEluZm8KICAgKi8KICBjbGFzcyBXaGVlbEluZm8gewogICAgLyoqCiAgICAgKiBNYXggdHJhdmVsIGRpc3RhbmNlIG9mIHRoZSBzdXNwZW5zaW9uLCBpbiBtZXRlcnMuCiAgICAgKiBAZGVmYXVsdCAxCiAgICAgKi8KCiAgICAvKioKICAgICAqIFNwZWVkIHRvIGFwcGx5IHRvIHRoZSB3aGVlbCByb3RhdGlvbiB3aGVuIHRoZSB3aGVlbCBpcyBzbGlkaW5nLgogICAgICogQGRlZmF1bHQgLTAuMQogICAgICovCgogICAgLyoqCiAgICAgKiBJZiB0aGUgY3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZCBzaG91bGQgYmUgdXNlZC4KICAgICAqIEBkZWZhdWx0IGZhbHNlCiAgICAgKi8KCiAgICAvKioKICAgICAqIHNsaWRpbmcKICAgICAqLwoKICAgIC8qKgogICAgICogQ29ubmVjdGlvbiBwb2ludCwgZGVmaW5lZCBsb2NhbGx5IGluIHRoZSBjaGFzc2lzIGJvZHkgZnJhbWUuCiAgICAgKi8KCiAgICAvKioKICAgICAqIGNoYXNzaXNDb25uZWN0aW9uUG9pbnRXb3JsZAogICAgICovCgogICAgLyoqCiAgICAgKiBkaXJlY3Rpb25Mb2NhbAogICAgICovCgogICAgLyoqCiAgICAgKiBkaXJlY3Rpb25Xb3JsZAogICAgICovCgogICAgLyoqCiAgICAgKiBheGxlTG9jYWwKICAgICAqLwoKICAgIC8qKgogICAgICogYXhsZVdvcmxkCiAgICAgKi8KCiAgICAvKioKICAgICAqIHN1c3BlbnNpb25SZXN0TGVuZ3RoCiAgICAgKiBAZGVmYXVsdCAxCiAgICAgKi8KCiAgICAvKioKICAgICAqIHN1c3BlbnNpb25NYXhMZW5ndGgKICAgICAqIEBkZWZhdWx0IDIKICAgICAqLwoKICAgIC8qKgogICAgICogcmFkaXVzCiAgICAgKiBAZGVmYXVsdCAxCiAgICAgKi8KCiAgICAvKioKICAgICAqIHN1c3BlbnNpb25TdGlmZm5lc3MKICAgICAqIEBkZWZhdWx0IDEwMAogICAgICovCgogICAgLyoqCiAgICAgKiBkYW1waW5nQ29tcHJlc3Npb24KICAgICAqIEBkZWZhdWx0IDEwCiAgICAgKi8KCiAgICAvKioKICAgICAqIGRhbXBpbmdSZWxheGF0aW9uCiAgICAgKiBAZGVmYXVsdCAxMAogICAgICovCgogICAgLyoqCiAgICAgKiBmcmljdGlvblNsaXAKICAgICAqIEBkZWZhdWx0IDEwLjUKICAgICAqLwoKICAgIC8qKiBmb3J3YXJkQWNjZWxlcmF0aW9uICovCgogICAgLyoqIHNpZGVBY2NlbGVyYXRpb24gKi8KCiAgICAvKioKICAgICAqIHN0ZWVyaW5nCiAgICAgKiBAZGVmYXVsdCAwCiAgICAgKi8KCiAgICAvKioKICAgICAqIFJvdGF0aW9uIHZhbHVlLCBpbiByYWRpYW5zLgogICAgICogQGRlZmF1bHQgMAogICAgICovCgogICAgLyoqCiAgICAgKiBkZWx0YVJvdGF0aW9uCiAgICAgKiBAZGVmYXVsdCAwCiAgICAgKi8KCiAgICAvKioKICAgICAqIHJvbGxJbmZsdWVuY2UKICAgICAqIEBkZWZhdWx0IDAuMDEKICAgICAqLwoKICAgIC8qKgogICAgICogbWF4U3VzcGVuc2lvbkZvcmNlCiAgICAgKi8KCiAgICAvKioKICAgICAqIGVuZ2luZUZvcmNlCiAgICAgKi8KCiAgICAvKioKICAgICAqIGJyYWtlCiAgICAgKi8KCiAgICAvKioKICAgICAqIGlzRnJvbnRXaGVlbAogICAgICogQGRlZmF1bHQgdHJ1ZQogICAgICovCgogICAgLyoqCiAgICAgKiBjbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24KICAgICAqIEBkZWZhdWx0IDEKICAgICAqLwoKICAgIC8qKgogICAgICogc3VzcGVuc2lvblJlbGF0aXZlVmVsb2NpdHkKICAgICAqIEBkZWZhdWx0IDAKICAgICAqLwoKICAgIC8qKgogICAgICogc3VzcGVuc2lvbkZvcmNlCiAgICAgKiBAZGVmYXVsdCAwCiAgICAgKi8KCiAgICAvKioKICAgICAqIHNsaXBJbmZvCiAgICAgKi8KCiAgICAvKioKICAgICAqIHNraWRJbmZvCiAgICAgKiBAZGVmYXVsdCAwCiAgICAgKi8KCiAgICAvKioKICAgICAqIHN1c3BlbnNpb25MZW5ndGgKICAgICAqIEBkZWZhdWx0IDAKICAgICAqLwoKICAgIC8qKgogICAgICogc2lkZUltcHVsc2UKICAgICAqLwoKICAgIC8qKgogICAgICogZm9yd2FyZEltcHVsc2UKICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIHJlc3VsdCBmcm9tIHJheWNhc3RpbmcuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFdoZWVsIHdvcmxkIHRyYW5zZm9ybS4KICAgICAqLwoKICAgIC8qKgogICAgICogaXNJbkNvbnRhY3QKICAgICAqLwogICAgY29uc3RydWN0b3Iob3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBvcHRpb25zID0gVXRpbHMuZGVmYXVsdHMob3B0aW9ucywgewogICAgICAgIGNoYXNzaXNDb25uZWN0aW9uUG9pbnRMb2NhbDogbmV3IFZlYzMoKSwKICAgICAgICBjaGFzc2lzQ29ubmVjdGlvblBvaW50V29ybGQ6IG5ldyBWZWMzKCksCiAgICAgICAgZGlyZWN0aW9uTG9jYWw6IG5ldyBWZWMzKCksCiAgICAgICAgZGlyZWN0aW9uV29ybGQ6IG5ldyBWZWMzKCksCiAgICAgICAgYXhsZUxvY2FsOiBuZXcgVmVjMygpLAogICAgICAgIGF4bGVXb3JsZDogbmV3IFZlYzMoKSwKICAgICAgICBzdXNwZW5zaW9uUmVzdExlbmd0aDogMSwKICAgICAgICBzdXNwZW5zaW9uTWF4TGVuZ3RoOiAyLAogICAgICAgIHJhZGl1czogMSwKICAgICAgICBzdXNwZW5zaW9uU3RpZmZuZXNzOiAxMDAsCiAgICAgICAgZGFtcGluZ0NvbXByZXNzaW9uOiAxMCwKICAgICAgICBkYW1waW5nUmVsYXhhdGlvbjogMTAsCiAgICAgICAgZnJpY3Rpb25TbGlwOiAxMC41LAogICAgICAgIGZvcndhcmRBY2NlbGVyYXRpb246IDEsCiAgICAgICAgc2lkZUFjY2VsZXJhdGlvbjogMSwKICAgICAgICBzdGVlcmluZzogMCwKICAgICAgICByb3RhdGlvbjogMCwKICAgICAgICBkZWx0YVJvdGF0aW9uOiAwLAogICAgICAgIHJvbGxJbmZsdWVuY2U6IDAuMDEsCiAgICAgICAgbWF4U3VzcGVuc2lvbkZvcmNlOiBOdW1iZXIuTUFYX1ZBTFVFLAogICAgICAgIGlzRnJvbnRXaGVlbDogdHJ1ZSwKICAgICAgICBjbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb246IDEsCiAgICAgICAgc3VzcGVuc2lvblJlbGF0aXZlVmVsb2NpdHk6IDAsCiAgICAgICAgc3VzcGVuc2lvbkZvcmNlOiAwLAogICAgICAgIHNsaXBJbmZvOiAwLAogICAgICAgIHNraWRJbmZvOiAwLAogICAgICAgIHN1c3BlbnNpb25MZW5ndGg6IDAsCiAgICAgICAgbWF4U3VzcGVuc2lvblRyYXZlbDogMSwKICAgICAgICB1c2VDdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkOiBmYWxzZSwKICAgICAgICBjdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkOiAtMC4xCiAgICAgIH0pOwogICAgICB0aGlzLm1heFN1c3BlbnNpb25UcmF2ZWwgPSBvcHRpb25zLm1heFN1c3BlbnNpb25UcmF2ZWw7CiAgICAgIHRoaXMuY3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZCA9IG9wdGlvbnMuY3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZDsKICAgICAgdGhpcy51c2VDdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkID0gb3B0aW9ucy51c2VDdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkOwogICAgICB0aGlzLnNsaWRpbmcgPSBmYWxzZTsKICAgICAgdGhpcy5jaGFzc2lzQ29ubmVjdGlvblBvaW50TG9jYWwgPSBvcHRpb25zLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRMb2NhbC5jbG9uZSgpOwogICAgICB0aGlzLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRXb3JsZCA9IG9wdGlvbnMuY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludFdvcmxkLmNsb25lKCk7CiAgICAgIHRoaXMuZGlyZWN0aW9uTG9jYWwgPSBvcHRpb25zLmRpcmVjdGlvbkxvY2FsLmNsb25lKCk7CiAgICAgIHRoaXMuZGlyZWN0aW9uV29ybGQgPSBvcHRpb25zLmRpcmVjdGlvbldvcmxkLmNsb25lKCk7CiAgICAgIHRoaXMuYXhsZUxvY2FsID0gb3B0aW9ucy5heGxlTG9jYWwuY2xvbmUoKTsKICAgICAgdGhpcy5heGxlV29ybGQgPSBvcHRpb25zLmF4bGVXb3JsZC5jbG9uZSgpOwogICAgICB0aGlzLnN1c3BlbnNpb25SZXN0TGVuZ3RoID0gb3B0aW9ucy5zdXNwZW5zaW9uUmVzdExlbmd0aDsKICAgICAgdGhpcy5zdXNwZW5zaW9uTWF4TGVuZ3RoID0gb3B0aW9ucy5zdXNwZW5zaW9uTWF4TGVuZ3RoOwogICAgICB0aGlzLnJhZGl1cyA9IG9wdGlvbnMucmFkaXVzOwogICAgICB0aGlzLnN1c3BlbnNpb25TdGlmZm5lc3MgPSBvcHRpb25zLnN1c3BlbnNpb25TdGlmZm5lc3M7CiAgICAgIHRoaXMuZGFtcGluZ0NvbXByZXNzaW9uID0gb3B0aW9ucy5kYW1waW5nQ29tcHJlc3Npb247CiAgICAgIHRoaXMuZGFtcGluZ1JlbGF4YXRpb24gPSBvcHRpb25zLmRhbXBpbmdSZWxheGF0aW9uOwogICAgICB0aGlzLmZyaWN0aW9uU2xpcCA9IG9wdGlvbnMuZnJpY3Rpb25TbGlwOwogICAgICB0aGlzLmZvcndhcmRBY2NlbGVyYXRpb24gPSBvcHRpb25zLmZvcndhcmRBY2NlbGVyYXRpb247CiAgICAgIHRoaXMuc2lkZUFjY2VsZXJhdGlvbiA9IG9wdGlvbnMuc2lkZUFjY2VsZXJhdGlvbjsKICAgICAgdGhpcy5zdGVlcmluZyA9IDA7CiAgICAgIHRoaXMucm90YXRpb24gPSAwOwogICAgICB0aGlzLmRlbHRhUm90YXRpb24gPSAwOwogICAgICB0aGlzLnJvbGxJbmZsdWVuY2UgPSBvcHRpb25zLnJvbGxJbmZsdWVuY2U7CiAgICAgIHRoaXMubWF4U3VzcGVuc2lvbkZvcmNlID0gb3B0aW9ucy5tYXhTdXNwZW5zaW9uRm9yY2U7CiAgICAgIHRoaXMuZW5naW5lRm9yY2UgPSAwOwogICAgICB0aGlzLmJyYWtlID0gMDsKICAgICAgdGhpcy5pc0Zyb250V2hlZWwgPSBvcHRpb25zLmlzRnJvbnRXaGVlbDsKICAgICAgdGhpcy5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24gPSAxOwogICAgICB0aGlzLnN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5ID0gMDsKICAgICAgdGhpcy5zdXNwZW5zaW9uRm9yY2UgPSAwOwogICAgICB0aGlzLnNsaXBJbmZvID0gMDsKICAgICAgdGhpcy5za2lkSW5mbyA9IDA7CiAgICAgIHRoaXMuc3VzcGVuc2lvbkxlbmd0aCA9IDA7CiAgICAgIHRoaXMuc2lkZUltcHVsc2UgPSAwOwogICAgICB0aGlzLmZvcndhcmRJbXB1bHNlID0gMDsKICAgICAgdGhpcy5yYXljYXN0UmVzdWx0ID0gbmV3IFJheWNhc3RSZXN1bHQoKTsKICAgICAgdGhpcy53b3JsZFRyYW5zZm9ybSA9IG5ldyBUcmFuc2Zvcm0oKTsKICAgICAgdGhpcy5pc0luQ29udGFjdCA9IGZhbHNlOwogICAgfQoKICAgIHVwZGF0ZVdoZWVsKGNoYXNzaXMpIHsKICAgICAgY29uc3QgcmF5Y2FzdFJlc3VsdCA9IHRoaXMucmF5Y2FzdFJlc3VsdDsKCiAgICAgIGlmICh0aGlzLmlzSW5Db250YWN0KSB7CiAgICAgICAgY29uc3QgcHJvamVjdCA9IHJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQuZG90KHJheWNhc3RSZXN1bHQuZGlyZWN0aW9uV29ybGQpOwogICAgICAgIHJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZC52c3ViKGNoYXNzaXMucG9zaXRpb24sIHJlbHBvcyk7CiAgICAgICAgY2hhc3Npcy5nZXRWZWxvY2l0eUF0V29ybGRQb2ludChyZWxwb3MsIGNoYXNzaXNfdmVsb2NpdHlfYXRfY29udGFjdFBvaW50KTsKICAgICAgICBjb25zdCBwcm9qVmVsID0gcmF5Y2FzdFJlc3VsdC5oaXROb3JtYWxXb3JsZC5kb3QoY2hhc3Npc192ZWxvY2l0eV9hdF9jb250YWN0UG9pbnQpOwoKICAgICAgICBpZiAocHJvamVjdCA+PSAtMC4xKSB7CiAgICAgICAgICB0aGlzLnN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5ID0gMC4wOwogICAgICAgICAgdGhpcy5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24gPSAxLjAgLyAwLjE7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnN0IGludiA9IC0xIC8gcHJvamVjdDsKICAgICAgICAgIHRoaXMuc3VzcGVuc2lvblJlbGF0aXZlVmVsb2NpdHkgPSBwcm9qVmVsICogaW52OwogICAgICAgICAgdGhpcy5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24gPSBpbnY7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIC8vIE5vdCBpbiBjb250YWN0IDogcG9zaXRpb24gd2hlZWwgaW4gYSBuaWNlIChyZXN0IGxlbmd0aCkgcG9zaXRpb24KICAgICAgICByYXljYXN0UmVzdWx0LnN1c3BlbnNpb25MZW5ndGggPSB0aGlzLnN1c3BlbnNpb25SZXN0TGVuZ3RoOwogICAgICAgIHRoaXMuc3VzcGVuc2lvblJlbGF0aXZlVmVsb2NpdHkgPSAwLjA7CiAgICAgICAgcmF5Y2FzdFJlc3VsdC5kaXJlY3Rpb25Xb3JsZC5zY2FsZSgtMSwgcmF5Y2FzdFJlc3VsdC5oaXROb3JtYWxXb3JsZCk7CiAgICAgICAgdGhpcy5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24gPSAxLjA7CiAgICAgIH0KICAgIH0KCiAgfQogIGNvbnN0IGNoYXNzaXNfdmVsb2NpdHlfYXRfY29udGFjdFBvaW50ID0gbmV3IFZlYzMoKTsKICBjb25zdCByZWxwb3MgPSBuZXcgVmVjMygpOwoKICAvKioKICAgKiBWZWhpY2xlIGhlbHBlciBjbGFzcyB0aGF0IGNhc3RzIHJheXMgZnJvbSB0aGUgd2hlZWwgcG9zaXRpb25zIHRvd2FyZHMgdGhlIGdyb3VuZCBhbmQgYXBwbGllcyBmb3JjZXMuCiAgICovCiAgY2xhc3MgUmF5Y2FzdFZlaGljbGUgewogICAgLyoqIFRoZSBjYXIgY2hhc3NpcyBib2R5LiAqLwoKICAgIC8qKiBUaGUgd2hlZWxzLiAqLwoKICAgIC8qKiBXaWxsIGJlIHNldCB0byB0cnVlIGlmIHRoZSBjYXIgaXMgc2xpZGluZy4gKi8KCiAgICAvKiogSW5kZXggb2YgdGhlIHJpZ2h0IGF4aXMuIHg9MCwgeT0xLCB6PTIgKi8KCiAgICAvKiogSW5kZXggb2YgdGhlIGZvcndhcmQgYXhpcy4geD0wLCB5PTEsIHo9MiAqLwoKICAgIC8qKiBJbmRleCBvZiB0aGUgdXAgYXhpcy4geD0wLCB5PTEsIHo9MiAqLwoKICAgIC8qKiBUaGUgY29uc3RyYWludHMuICovCgogICAgLyoqIE9wdGlvbmFsIHByZS1zdGVwIGNhbGxiYWNrLiAqLwoKICAgIC8qKiBOdW1iZXIgb2Ygd2hlZWxzIG9uIHRoZSBncm91bmQuICovCiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7CiAgICAgIHRoaXMuY2hhc3Npc0JvZHkgPSBvcHRpb25zLmNoYXNzaXNCb2R5OwogICAgICB0aGlzLndoZWVsSW5mb3MgPSBbXTsKICAgICAgdGhpcy5zbGlkaW5nID0gZmFsc2U7CiAgICAgIHRoaXMud29ybGQgPSBudWxsOwogICAgICB0aGlzLmluZGV4UmlnaHRBeGlzID0gdHlwZW9mIG9wdGlvbnMuaW5kZXhSaWdodEF4aXMgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5pbmRleFJpZ2h0QXhpcyA6IDI7CiAgICAgIHRoaXMuaW5kZXhGb3J3YXJkQXhpcyA9IHR5cGVvZiBvcHRpb25zLmluZGV4Rm9yd2FyZEF4aXMgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5pbmRleEZvcndhcmRBeGlzIDogMDsKICAgICAgdGhpcy5pbmRleFVwQXhpcyA9IHR5cGVvZiBvcHRpb25zLmluZGV4VXBBeGlzICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuaW5kZXhVcEF4aXMgOiAxOwogICAgICB0aGlzLmNvbnN0cmFpbnRzID0gW107CgogICAgICB0aGlzLnByZVN0ZXBDYWxsYmFjayA9ICgpID0+IHt9OwoKICAgICAgdGhpcy5jdXJyZW50VmVoaWNsZVNwZWVkS21Ib3VyID0gMDsKICAgICAgdGhpcy5udW1XaGVlbHNPbkdyb3VuZCA9IDA7CiAgICB9CiAgICAvKioKICAgICAqIEFkZCBhIHdoZWVsLiBGb3IgaW5mb3JtYXRpb24gYWJvdXQgdGhlIG9wdGlvbnMsIHNlZSBgV2hlZWxJbmZvYC4KICAgICAqLwoKCiAgICBhZGRXaGVlbChvcHRpb25zKSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIGNvbnN0IGluZm8gPSBuZXcgV2hlZWxJbmZvKG9wdGlvbnMpOwogICAgICBjb25zdCBpbmRleCA9IHRoaXMud2hlZWxJbmZvcy5sZW5ndGg7CiAgICAgIHRoaXMud2hlZWxJbmZvcy5wdXNoKGluZm8pOwogICAgICByZXR1cm4gaW5kZXg7CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgc3RlZXJpbmcgdmFsdWUgb2YgYSB3aGVlbC4KICAgICAqLwoKCiAgICBzZXRTdGVlcmluZ1ZhbHVlKHZhbHVlLCB3aGVlbEluZGV4KSB7CiAgICAgIGNvbnN0IHdoZWVsID0gdGhpcy53aGVlbEluZm9zW3doZWVsSW5kZXhdOwogICAgICB3aGVlbC5zdGVlcmluZyA9IHZhbHVlOwogICAgfQogICAgLyoqCiAgICAgKiBTZXQgdGhlIHdoZWVsIGZvcmNlIHRvIGFwcGx5IG9uIG9uZSBvZiB0aGUgd2hlZWxzIGVhY2ggdGltZSBzdGVwCiAgICAgKi8KCgogICAgYXBwbHlFbmdpbmVGb3JjZSh2YWx1ZSwgd2hlZWxJbmRleCkgewogICAgICB0aGlzLndoZWVsSW5mb3Nbd2hlZWxJbmRleF0uZW5naW5lRm9yY2UgPSB2YWx1ZTsKICAgIH0KICAgIC8qKgogICAgICogU2V0IHRoZSBicmFraW5nIGZvcmNlIG9mIGEgd2hlZWwKICAgICAqLwoKCiAgICBzZXRCcmFrZShicmFrZSwgd2hlZWxJbmRleCkgewogICAgICB0aGlzLndoZWVsSW5mb3Nbd2hlZWxJbmRleF0uYnJha2UgPSBicmFrZTsKICAgIH0KICAgIC8qKgogICAgICogQWRkIHRoZSB2ZWhpY2xlIGluY2x1ZGluZyBpdHMgY29uc3RyYWludHMgdG8gdGhlIHdvcmxkLgogICAgICovCgoKICAgIGFkZFRvV29ybGQod29ybGQpIHsKICAgICAgd29ybGQuYWRkQm9keSh0aGlzLmNoYXNzaXNCb2R5KTsKICAgICAgY29uc3QgdGhhdCA9IHRoaXM7CgogICAgICB0aGlzLnByZVN0ZXBDYWxsYmFjayA9ICgpID0+IHsKICAgICAgICB0aGF0LnVwZGF0ZVZlaGljbGUod29ybGQuZHQpOwogICAgICB9OwoKICAgICAgd29ybGQuYWRkRXZlbnRMaXN0ZW5lcigncHJlU3RlcCcsIHRoaXMucHJlU3RlcENhbGxiYWNrKTsKICAgICAgdGhpcy53b3JsZCA9IHdvcmxkOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgb25lIG9mIHRoZSB3aGVlbCBheGxlcywgd29ybGQtb3JpZW50ZWQuCiAgICAgKi8KCgogICAgZ2V0VmVoaWNsZUF4aXNXb3JsZChheGlzSW5kZXgsIHJlc3VsdCkgewogICAgICByZXN1bHQuc2V0KGF4aXNJbmRleCA9PT0gMCA/IDEgOiAwLCBheGlzSW5kZXggPT09IDEgPyAxIDogMCwgYXhpc0luZGV4ID09PSAyID8gMSA6IDApOwogICAgICB0aGlzLmNoYXNzaXNCb2R5LnZlY3RvclRvV29ybGRGcmFtZShyZXN1bHQsIHJlc3VsdCk7CiAgICB9CgogICAgdXBkYXRlVmVoaWNsZSh0aW1lU3RlcCkgewogICAgICBjb25zdCB3aGVlbEluZm9zID0gdGhpcy53aGVlbEluZm9zOwogICAgICBjb25zdCBudW1XaGVlbHMgPSB3aGVlbEluZm9zLmxlbmd0aDsKICAgICAgY29uc3QgY2hhc3Npc0JvZHkgPSB0aGlzLmNoYXNzaXNCb2R5OwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1XaGVlbHM7IGkrKykgewogICAgICAgIHRoaXMudXBkYXRlV2hlZWxUcmFuc2Zvcm0oaSk7CiAgICAgIH0KCiAgICAgIHRoaXMuY3VycmVudFZlaGljbGVTcGVlZEttSG91ciA9IDMuNiAqIGNoYXNzaXNCb2R5LnZlbG9jaXR5Lmxlbmd0aCgpOwogICAgICBjb25zdCBmb3J3YXJkV29ybGQgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmdldFZlaGljbGVBeGlzV29ybGQodGhpcy5pbmRleEZvcndhcmRBeGlzLCBmb3J3YXJkV29ybGQpOwoKICAgICAgaWYgKGZvcndhcmRXb3JsZC5kb3QoY2hhc3Npc0JvZHkudmVsb2NpdHkpIDwgMCkgewogICAgICAgIHRoaXMuY3VycmVudFZlaGljbGVTcGVlZEttSG91ciAqPSAtMTsKICAgICAgfSAvLyBzaW11bGF0ZSBzdXNwZW5zaW9uCgoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1XaGVlbHM7IGkrKykgewogICAgICAgIHRoaXMuY2FzdFJheSh3aGVlbEluZm9zW2ldKTsKICAgICAgfQoKICAgICAgdGhpcy51cGRhdGVTdXNwZW5zaW9uKHRpbWVTdGVwKTsKICAgICAgY29uc3QgaW1wdWxzZSA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHJlbHBvcyA9IG5ldyBWZWMzKCk7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVdoZWVsczsgaSsrKSB7CiAgICAgICAgLy9hcHBseSBzdXNwZW5zaW9uIGZvcmNlCiAgICAgICAgY29uc3Qgd2hlZWwgPSB3aGVlbEluZm9zW2ldOwogICAgICAgIGxldCBzdXNwZW5zaW9uRm9yY2UgPSB3aGVlbC5zdXNwZW5zaW9uRm9yY2U7CgogICAgICAgIGlmIChzdXNwZW5zaW9uRm9yY2UgPiB3aGVlbC5tYXhTdXNwZW5zaW9uRm9yY2UpIHsKICAgICAgICAgIHN1c3BlbnNpb25Gb3JjZSA9IHdoZWVsLm1heFN1c3BlbnNpb25Gb3JjZTsKICAgICAgICB9CgogICAgICAgIHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQuc2NhbGUoc3VzcGVuc2lvbkZvcmNlICogdGltZVN0ZXAsIGltcHVsc2UpOwogICAgICAgIHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZC52c3ViKGNoYXNzaXNCb2R5LnBvc2l0aW9uLCByZWxwb3MpOwogICAgICAgIGNoYXNzaXNCb2R5LmFwcGx5SW1wdWxzZShpbXB1bHNlLCByZWxwb3MpOwogICAgICB9CgogICAgICB0aGlzLnVwZGF0ZUZyaWN0aW9uKHRpbWVTdGVwKTsKICAgICAgY29uc3QgaGl0Tm9ybWFsV29ybGRTY2FsZWRXaXRoUHJvaiA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IGZ3ZCA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHZlbCA9IG5ldyBWZWMzKCk7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVdoZWVsczsgaSsrKSB7CiAgICAgICAgY29uc3Qgd2hlZWwgPSB3aGVlbEluZm9zW2ldOyAvL2NvbnN0IHJlbHBvcyA9IG5ldyBWZWMzKCk7CiAgICAgICAgLy93aGVlbC5jaGFzc2lzQ29ubmVjdGlvblBvaW50V29ybGQudnN1YihjaGFzc2lzQm9keS5wb3NpdGlvbiwgcmVscG9zKTsKCiAgICAgICAgY2hhc3Npc0JvZHkuZ2V0VmVsb2NpdHlBdFdvcmxkUG9pbnQod2hlZWwuY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludFdvcmxkLCB2ZWwpOyAvLyBIYWNrIHRvIGdldCB0aGUgcm90YXRpb24gaW4gdGhlIGNvcnJlY3QgZGlyZWN0aW9uCgogICAgICAgIGxldCBtID0gMTsKCiAgICAgICAgc3dpdGNoICh0aGlzLmluZGV4VXBBeGlzKSB7CiAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgIG0gPSAtMTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgICBpZiAod2hlZWwuaXNJbkNvbnRhY3QpIHsKICAgICAgICAgIHRoaXMuZ2V0VmVoaWNsZUF4aXNXb3JsZCh0aGlzLmluZGV4Rm9yd2FyZEF4aXMsIGZ3ZCk7CiAgICAgICAgICBjb25zdCBwcm9qID0gZndkLmRvdCh3aGVlbC5yYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkKTsKICAgICAgICAgIHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQuc2NhbGUocHJvaiwgaGl0Tm9ybWFsV29ybGRTY2FsZWRXaXRoUHJvaik7CiAgICAgICAgICBmd2QudnN1YihoaXROb3JtYWxXb3JsZFNjYWxlZFdpdGhQcm9qLCBmd2QpOwogICAgICAgICAgY29uc3QgcHJvajIgPSBmd2QuZG90KHZlbCk7CiAgICAgICAgICB3aGVlbC5kZWx0YVJvdGF0aW9uID0gbSAqIHByb2oyICogdGltZVN0ZXAgLyB3aGVlbC5yYWRpdXM7CiAgICAgICAgfQoKICAgICAgICBpZiAoKHdoZWVsLnNsaWRpbmcgfHwgIXdoZWVsLmlzSW5Db250YWN0KSAmJiB3aGVlbC5lbmdpbmVGb3JjZSAhPT0gMCAmJiB3aGVlbC51c2VDdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkKSB7CiAgICAgICAgICAvLyBBcHBseSBjdXN0b20gcm90YXRpb24gd2hlbiBhY2NlbGVyYXRpbmcgYW5kIHNsaWRpbmcKICAgICAgICAgIHdoZWVsLmRlbHRhUm90YXRpb24gPSAod2hlZWwuZW5naW5lRm9yY2UgPiAwID8gMSA6IC0xKSAqIHdoZWVsLmN1c3RvbVNsaWRpbmdSb3RhdGlvbmFsU3BlZWQgKiB0aW1lU3RlcDsKICAgICAgICB9IC8vIExvY2sgd2hlZWxzCgoKICAgICAgICBpZiAoTWF0aC5hYnMod2hlZWwuYnJha2UpID4gTWF0aC5hYnMod2hlZWwuZW5naW5lRm9yY2UpKSB7CiAgICAgICAgICB3aGVlbC5kZWx0YVJvdGF0aW9uID0gMDsKICAgICAgICB9CgogICAgICAgIHdoZWVsLnJvdGF0aW9uICs9IHdoZWVsLmRlbHRhUm90YXRpb247IC8vIFVzZSB0aGUgb2xkIHZhbHVlCgogICAgICAgIHdoZWVsLmRlbHRhUm90YXRpb24gKj0gMC45OTsgLy8gZGFtcGluZyBvZiByb3RhdGlvbiB3aGVuIG5vdCBpbiBjb250YWN0CiAgICAgIH0KICAgIH0KCiAgICB1cGRhdGVTdXNwZW5zaW9uKGRlbHRhVGltZSkgewogICAgICBjb25zdCBjaGFzc2lzQm9keSA9IHRoaXMuY2hhc3Npc0JvZHk7CiAgICAgIGNvbnN0IGNoYXNzaXNNYXNzID0gY2hhc3Npc0JvZHkubWFzczsKICAgICAgY29uc3Qgd2hlZWxJbmZvcyA9IHRoaXMud2hlZWxJbmZvczsKICAgICAgY29uc3QgbnVtV2hlZWxzID0gd2hlZWxJbmZvcy5sZW5ndGg7CgogICAgICBmb3IgKGxldCB3X2l0ID0gMDsgd19pdCA8IG51bVdoZWVsczsgd19pdCsrKSB7CiAgICAgICAgY29uc3Qgd2hlZWwgPSB3aGVlbEluZm9zW3dfaXRdOwoKICAgICAgICBpZiAod2hlZWwuaXNJbkNvbnRhY3QpIHsKICAgICAgICAgIGxldCBmb3JjZTsgLy8gU3ByaW5nCgogICAgICAgICAgY29uc3Qgc3VzcF9sZW5ndGggPSB3aGVlbC5zdXNwZW5zaW9uUmVzdExlbmd0aDsKICAgICAgICAgIGNvbnN0IGN1cnJlbnRfbGVuZ3RoID0gd2hlZWwuc3VzcGVuc2lvbkxlbmd0aDsKICAgICAgICAgIGNvbnN0IGxlbmd0aF9kaWZmID0gc3VzcF9sZW5ndGggLSBjdXJyZW50X2xlbmd0aDsKICAgICAgICAgIGZvcmNlID0gd2hlZWwuc3VzcGVuc2lvblN0aWZmbmVzcyAqIGxlbmd0aF9kaWZmICogd2hlZWwuY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uOyAvLyBEYW1wZXIKCiAgICAgICAgICBjb25zdCBwcm9qZWN0ZWRfcmVsX3ZlbCA9IHdoZWVsLnN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5OwogICAgICAgICAgbGV0IHN1c3BfZGFtcGluZzsKCiAgICAgICAgICBpZiAocHJvamVjdGVkX3JlbF92ZWwgPCAwKSB7CiAgICAgICAgICAgIHN1c3BfZGFtcGluZyA9IHdoZWVsLmRhbXBpbmdDb21wcmVzc2lvbjsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHN1c3BfZGFtcGluZyA9IHdoZWVsLmRhbXBpbmdSZWxheGF0aW9uOwogICAgICAgICAgfQoKICAgICAgICAgIGZvcmNlIC09IHN1c3BfZGFtcGluZyAqIHByb2plY3RlZF9yZWxfdmVsOwogICAgICAgICAgd2hlZWwuc3VzcGVuc2lvbkZvcmNlID0gZm9yY2UgKiBjaGFzc2lzTWFzczsKCiAgICAgICAgICBpZiAod2hlZWwuc3VzcGVuc2lvbkZvcmNlIDwgMCkgewogICAgICAgICAgICB3aGVlbC5zdXNwZW5zaW9uRm9yY2UgPSAwOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB3aGVlbC5zdXNwZW5zaW9uRm9yY2UgPSAwOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBSZW1vdmUgdGhlIHZlaGljbGUgaW5jbHVkaW5nIGl0cyBjb25zdHJhaW50cyBmcm9tIHRoZSB3b3JsZC4KICAgICAqLwoKCiAgICByZW1vdmVGcm9tV29ybGQod29ybGQpIHsKICAgICAgdGhpcy5jb25zdHJhaW50czsKICAgICAgd29ybGQucmVtb3ZlQm9keSh0aGlzLmNoYXNzaXNCb2R5KTsKICAgICAgd29ybGQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncHJlU3RlcCcsIHRoaXMucHJlU3RlcENhbGxiYWNrKTsKICAgICAgdGhpcy53b3JsZCA9IG51bGw7CiAgICB9CgogICAgY2FzdFJheSh3aGVlbCkgewogICAgICBjb25zdCByYXl2ZWN0b3IgPSBjYXN0UmF5X3JheXZlY3RvcjsKICAgICAgY29uc3QgdGFyZ2V0ID0gY2FzdFJheV90YXJnZXQ7CiAgICAgIHRoaXMudXBkYXRlV2hlZWxUcmFuc2Zvcm1Xb3JsZCh3aGVlbCk7CiAgICAgIGNvbnN0IGNoYXNzaXNCb2R5ID0gdGhpcy5jaGFzc2lzQm9keTsKICAgICAgbGV0IGRlcHRoID0gLTE7CiAgICAgIGNvbnN0IHJheWxlbiA9IHdoZWVsLnN1c3BlbnNpb25SZXN0TGVuZ3RoICsgd2hlZWwucmFkaXVzOwogICAgICB3aGVlbC5kaXJlY3Rpb25Xb3JsZC5zY2FsZShyYXlsZW4sIHJheXZlY3Rvcik7CiAgICAgIGNvbnN0IHNvdXJjZSA9IHdoZWVsLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRXb3JsZDsKICAgICAgc291cmNlLnZhZGQocmF5dmVjdG9yLCB0YXJnZXQpOwogICAgICBjb25zdCByYXljYXN0UmVzdWx0ID0gd2hlZWwucmF5Y2FzdFJlc3VsdDsKICAgICAgcmF5Y2FzdFJlc3VsdC5yZXNldCgpOyAvLyBUdXJuIG9mZiByYXkgY29sbGlzaW9uIHdpdGggdGhlIGNoYXNzaXMgdGVtcG9yYXJpbHkKCiAgICAgIGNvbnN0IG9sZFN0YXRlID0gY2hhc3Npc0JvZHkuY29sbGlzaW9uUmVzcG9uc2U7CiAgICAgIGNoYXNzaXNCb2R5LmNvbGxpc2lvblJlc3BvbnNlID0gZmFsc2U7IC8vIENhc3QgcmF5IGFnYWluc3Qgd29ybGQKCiAgICAgIHRoaXMud29ybGQucmF5VGVzdChzb3VyY2UsIHRhcmdldCwgcmF5Y2FzdFJlc3VsdCk7CiAgICAgIGNoYXNzaXNCb2R5LmNvbGxpc2lvblJlc3BvbnNlID0gb2xkU3RhdGU7CiAgICAgIGNvbnN0IG9iamVjdCA9IHJheWNhc3RSZXN1bHQuYm9keTsKICAgICAgd2hlZWwucmF5Y2FzdFJlc3VsdC5ncm91bmRPYmplY3QgPSAwOwoKICAgICAgaWYgKG9iamVjdCkgewogICAgICAgIGRlcHRoID0gcmF5Y2FzdFJlc3VsdC5kaXN0YW5jZTsKICAgICAgICB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkID0gcmF5Y2FzdFJlc3VsdC5oaXROb3JtYWxXb3JsZDsKICAgICAgICB3aGVlbC5pc0luQ29udGFjdCA9IHRydWU7CiAgICAgICAgY29uc3QgaGl0RGlzdGFuY2UgPSByYXljYXN0UmVzdWx0LmRpc3RhbmNlOwogICAgICAgIHdoZWVsLnN1c3BlbnNpb25MZW5ndGggPSBoaXREaXN0YW5jZSAtIHdoZWVsLnJhZGl1czsgLy8gY2xhbXAgb24gbWF4IHN1c3BlbnNpb24gdHJhdmVsCgogICAgICAgIGNvbnN0IG1pblN1c3BlbnNpb25MZW5ndGggPSB3aGVlbC5zdXNwZW5zaW9uUmVzdExlbmd0aCAtIHdoZWVsLm1heFN1c3BlbnNpb25UcmF2ZWw7CiAgICAgICAgY29uc3QgbWF4U3VzcGVuc2lvbkxlbmd0aCA9IHdoZWVsLnN1c3BlbnNpb25SZXN0TGVuZ3RoICsgd2hlZWwubWF4U3VzcGVuc2lvblRyYXZlbDsKCiAgICAgICAgaWYgKHdoZWVsLnN1c3BlbnNpb25MZW5ndGggPCBtaW5TdXNwZW5zaW9uTGVuZ3RoKSB7CiAgICAgICAgICB3aGVlbC5zdXNwZW5zaW9uTGVuZ3RoID0gbWluU3VzcGVuc2lvbkxlbmd0aDsKICAgICAgICB9CgogICAgICAgIGlmICh3aGVlbC5zdXNwZW5zaW9uTGVuZ3RoID4gbWF4U3VzcGVuc2lvbkxlbmd0aCkgewogICAgICAgICAgd2hlZWwuc3VzcGVuc2lvbkxlbmd0aCA9IG1heFN1c3BlbnNpb25MZW5ndGg7CiAgICAgICAgICB3aGVlbC5yYXljYXN0UmVzdWx0LnJlc2V0KCk7CiAgICAgICAgfQoKICAgICAgICBjb25zdCBkZW5vbWluYXRvciA9IHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQuZG90KHdoZWVsLmRpcmVjdGlvbldvcmxkKTsKICAgICAgICBjb25zdCBjaGFzc2lzX3ZlbG9jaXR5X2F0X2NvbnRhY3RQb2ludCA9IG5ldyBWZWMzKCk7CiAgICAgICAgY2hhc3Npc0JvZHkuZ2V0VmVsb2NpdHlBdFdvcmxkUG9pbnQod2hlZWwucmF5Y2FzdFJlc3VsdC5oaXRQb2ludFdvcmxkLCBjaGFzc2lzX3ZlbG9jaXR5X2F0X2NvbnRhY3RQb2ludCk7CiAgICAgICAgY29uc3QgcHJvalZlbCA9IHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQuZG90KGNoYXNzaXNfdmVsb2NpdHlfYXRfY29udGFjdFBvaW50KTsKCiAgICAgICAgaWYgKGRlbm9taW5hdG9yID49IC0wLjEpIHsKICAgICAgICAgIHdoZWVsLnN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5ID0gMDsKICAgICAgICAgIHdoZWVsLmNsaXBwZWRJbnZDb250YWN0RG90U3VzcGVuc2lvbiA9IDEgLyAwLjE7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnN0IGludiA9IC0xIC8gZGVub21pbmF0b3I7CiAgICAgICAgICB3aGVlbC5zdXNwZW5zaW9uUmVsYXRpdmVWZWxvY2l0eSA9IHByb2pWZWwgKiBpbnY7CiAgICAgICAgICB3aGVlbC5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24gPSBpbnY7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIC8vcHV0IHdoZWVsIGluZm8gYXMgaW4gcmVzdCBwb3NpdGlvbgogICAgICAgIHdoZWVsLnN1c3BlbnNpb25MZW5ndGggPSB3aGVlbC5zdXNwZW5zaW9uUmVzdExlbmd0aCArIDAgKiB3aGVlbC5tYXhTdXNwZW5zaW9uVHJhdmVsOwogICAgICAgIHdoZWVsLnN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5ID0gMC4wOwogICAgICAgIHdoZWVsLmRpcmVjdGlvbldvcmxkLnNjYWxlKC0xLCB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkKTsKICAgICAgICB3aGVlbC5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24gPSAxLjA7CiAgICAgIH0KCiAgICAgIHJldHVybiBkZXB0aDsKICAgIH0KCiAgICB1cGRhdGVXaGVlbFRyYW5zZm9ybVdvcmxkKHdoZWVsKSB7CiAgICAgIHdoZWVsLmlzSW5Db250YWN0ID0gZmFsc2U7CiAgICAgIGNvbnN0IGNoYXNzaXNCb2R5ID0gdGhpcy5jaGFzc2lzQm9keTsKICAgICAgY2hhc3Npc0JvZHkucG9pbnRUb1dvcmxkRnJhbWUod2hlZWwuY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludExvY2FsLCB3aGVlbC5jaGFzc2lzQ29ubmVjdGlvblBvaW50V29ybGQpOwogICAgICBjaGFzc2lzQm9keS52ZWN0b3JUb1dvcmxkRnJhbWUod2hlZWwuZGlyZWN0aW9uTG9jYWwsIHdoZWVsLmRpcmVjdGlvbldvcmxkKTsKICAgICAgY2hhc3Npc0JvZHkudmVjdG9yVG9Xb3JsZEZyYW1lKHdoZWVsLmF4bGVMb2NhbCwgd2hlZWwuYXhsZVdvcmxkKTsKICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlIG9uZSBvZiB0aGUgd2hlZWwgdHJhbnNmb3JtLgogICAgICogTm90ZSB3aGVuIHJlbmRlcmluZyB3aGVlbHM6IGR1cmluZyBlYWNoIHN0ZXAsIHdoZWVsIHRyYW5zZm9ybXMgYXJlIHVwZGF0ZWQgQkVGT1JFIHRoZSBjaGFzc2lzOyBpZS4gdGhlaXIgcG9zaXRpb24gYmVjb21lcyBpbnZhbGlkIGFmdGVyIHRoZSBzdGVwLiBUaHVzIHdoZW4geW91IHJlbmRlciB3aGVlbHMsIHlvdSBtdXN0IHVwZGF0ZSB3aGVlbCB0cmFuc2Zvcm1zIGJlZm9yZSByZW5kZXJpbmcgdGhlbS4gU2VlIHJheWNhc3RWZWhpY2xlIGRlbW8gZm9yIGFuIGV4YW1wbGUuCiAgICAgKiBAcGFyYW0gd2hlZWxJbmRleCBUaGUgd2hlZWwgaW5kZXggdG8gdXBkYXRlLgogICAgICovCgoKICAgIHVwZGF0ZVdoZWVsVHJhbnNmb3JtKHdoZWVsSW5kZXgpIHsKICAgICAgY29uc3QgdXAgPSB0bXBWZWM0OwogICAgICBjb25zdCByaWdodCA9IHRtcFZlYzU7CiAgICAgIGNvbnN0IGZ3ZCA9IHRtcFZlYzY7CiAgICAgIGNvbnN0IHdoZWVsID0gdGhpcy53aGVlbEluZm9zW3doZWVsSW5kZXhdOwogICAgICB0aGlzLnVwZGF0ZVdoZWVsVHJhbnNmb3JtV29ybGQod2hlZWwpOwogICAgICB3aGVlbC5kaXJlY3Rpb25Mb2NhbC5zY2FsZSgtMSwgdXApOwogICAgICByaWdodC5jb3B5KHdoZWVsLmF4bGVMb2NhbCk7CiAgICAgIHVwLmNyb3NzKHJpZ2h0LCBmd2QpOwogICAgICBmd2Qubm9ybWFsaXplKCk7CiAgICAgIHJpZ2h0Lm5vcm1hbGl6ZSgpOyAvLyBSb3RhdGUgYXJvdW5kIHN0ZWVyaW5nIG92ZXIgdGhlIHdoZWVsQXhsZQoKICAgICAgY29uc3Qgc3RlZXJpbmcgPSB3aGVlbC5zdGVlcmluZzsKICAgICAgY29uc3Qgc3RlZXJpbmdPcm4gPSBuZXcgUXVhdGVybmlvbigpOwogICAgICBzdGVlcmluZ09ybi5zZXRGcm9tQXhpc0FuZ2xlKHVwLCBzdGVlcmluZyk7CiAgICAgIGNvbnN0IHJvdGF0aW5nT3JuID0gbmV3IFF1YXRlcm5pb24oKTsKICAgICAgcm90YXRpbmdPcm4uc2V0RnJvbUF4aXNBbmdsZShyaWdodCwgd2hlZWwucm90YXRpb24pOyAvLyBXb3JsZCByb3RhdGlvbiBvZiB0aGUgd2hlZWwKCiAgICAgIGNvbnN0IHEgPSB3aGVlbC53b3JsZFRyYW5zZm9ybS5xdWF0ZXJuaW9uOwogICAgICB0aGlzLmNoYXNzaXNCb2R5LnF1YXRlcm5pb24ubXVsdChzdGVlcmluZ09ybiwgcSk7CiAgICAgIHEubXVsdChyb3RhdGluZ09ybiwgcSk7CiAgICAgIHEubm9ybWFsaXplKCk7IC8vIHdvcmxkIHBvc2l0aW9uIG9mIHRoZSB3aGVlbAoKICAgICAgY29uc3QgcCA9IHdoZWVsLndvcmxkVHJhbnNmb3JtLnBvc2l0aW9uOwogICAgICBwLmNvcHkod2hlZWwuZGlyZWN0aW9uV29ybGQpOwogICAgICBwLnNjYWxlKHdoZWVsLnN1c3BlbnNpb25MZW5ndGgsIHApOwogICAgICBwLnZhZGQod2hlZWwuY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludFdvcmxkLCBwKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSB3b3JsZCB0cmFuc2Zvcm0gb2Ygb25lIG9mIHRoZSB3aGVlbHMKICAgICAqLwoKCiAgICBnZXRXaGVlbFRyYW5zZm9ybVdvcmxkKHdoZWVsSW5kZXgpIHsKICAgICAgcmV0dXJuIHRoaXMud2hlZWxJbmZvc1t3aGVlbEluZGV4XS53b3JsZFRyYW5zZm9ybTsKICAgIH0KCiAgICB1cGRhdGVGcmljdGlvbih0aW1lU3RlcCkgewogICAgICBjb25zdCBzdXJmTm9ybWFsV1Nfc2NhbGVkX3Byb2ogPSB1cGRhdGVGcmljdGlvbl9zdXJmTm9ybWFsV1Nfc2NhbGVkX3Byb2o7IC8vY2FsY3VsYXRlIHRoZSBpbXB1bHNlLCBzbyB0aGF0IHRoZSB3aGVlbHMgZG9uJ3QgbW92ZSBzaWRld2FyZHMKCiAgICAgIGNvbnN0IHdoZWVsSW5mb3MgPSB0aGlzLndoZWVsSW5mb3M7CiAgICAgIGNvbnN0IG51bVdoZWVscyA9IHdoZWVsSW5mb3MubGVuZ3RoOwogICAgICBjb25zdCBjaGFzc2lzQm9keSA9IHRoaXMuY2hhc3Npc0JvZHk7CiAgICAgIGNvbnN0IGZvcndhcmRXUyA9IHVwZGF0ZUZyaWN0aW9uX2ZvcndhcmRXUzsKICAgICAgY29uc3QgYXhsZSA9IHVwZGF0ZUZyaWN0aW9uX2F4bGU7CiAgICAgIHRoaXMubnVtV2hlZWxzT25Hcm91bmQgPSAwOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1XaGVlbHM7IGkrKykgewogICAgICAgIGNvbnN0IHdoZWVsID0gd2hlZWxJbmZvc1tpXTsKICAgICAgICBjb25zdCBncm91bmRPYmplY3QgPSB3aGVlbC5yYXljYXN0UmVzdWx0LmJvZHk7CgogICAgICAgIGlmIChncm91bmRPYmplY3QpIHsKICAgICAgICAgIHRoaXMubnVtV2hlZWxzT25Hcm91bmQrKzsKICAgICAgICB9CgogICAgICAgIHdoZWVsLnNpZGVJbXB1bHNlID0gMDsKICAgICAgICB3aGVlbC5mb3J3YXJkSW1wdWxzZSA9IDA7CgogICAgICAgIGlmICghZm9yd2FyZFdTW2ldKSB7CiAgICAgICAgICBmb3J3YXJkV1NbaV0gPSBuZXcgVmVjMygpOwogICAgICAgIH0KCiAgICAgICAgaWYgKCFheGxlW2ldKSB7CiAgICAgICAgICBheGxlW2ldID0gbmV3IFZlYzMoKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtV2hlZWxzOyBpKyspIHsKICAgICAgICBjb25zdCB3aGVlbCA9IHdoZWVsSW5mb3NbaV07CiAgICAgICAgY29uc3QgZ3JvdW5kT2JqZWN0ID0gd2hlZWwucmF5Y2FzdFJlc3VsdC5ib2R5OwoKICAgICAgICBpZiAoZ3JvdW5kT2JqZWN0KSB7CiAgICAgICAgICBjb25zdCBheGxlaSA9IGF4bGVbaV07CiAgICAgICAgICBjb25zdCB3aGVlbFRyYW5zID0gdGhpcy5nZXRXaGVlbFRyYW5zZm9ybVdvcmxkKGkpOyAvLyBHZXQgd29ybGQgYXhsZQoKICAgICAgICAgIHdoZWVsVHJhbnMudmVjdG9yVG9Xb3JsZEZyYW1lKGRpcmVjdGlvbnNbdGhpcy5pbmRleFJpZ2h0QXhpc10sIGF4bGVpKTsKICAgICAgICAgIGNvbnN0IHN1cmZOb3JtYWxXUyA9IHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQ7CiAgICAgICAgICBjb25zdCBwcm9qID0gYXhsZWkuZG90KHN1cmZOb3JtYWxXUyk7CiAgICAgICAgICBzdXJmTm9ybWFsV1Muc2NhbGUocHJvaiwgc3VyZk5vcm1hbFdTX3NjYWxlZF9wcm9qKTsKICAgICAgICAgIGF4bGVpLnZzdWIoc3VyZk5vcm1hbFdTX3NjYWxlZF9wcm9qLCBheGxlaSk7CiAgICAgICAgICBheGxlaS5ub3JtYWxpemUoKTsKICAgICAgICAgIHN1cmZOb3JtYWxXUy5jcm9zcyhheGxlaSwgZm9yd2FyZFdTW2ldKTsKICAgICAgICAgIGZvcndhcmRXU1tpXS5ub3JtYWxpemUoKTsKICAgICAgICAgIHdoZWVsLnNpZGVJbXB1bHNlID0gcmVzb2x2ZVNpbmdsZUJpbGF0ZXJhbChjaGFzc2lzQm9keSwgd2hlZWwucmF5Y2FzdFJlc3VsdC5oaXRQb2ludFdvcmxkLCBncm91bmRPYmplY3QsIHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZCwgYXhsZWkpOwogICAgICAgICAgd2hlZWwuc2lkZUltcHVsc2UgKj0gc2lkZUZyaWN0aW9uU3RpZmZuZXNzMjsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGNvbnN0IHNpZGVGYWN0b3IgPSAxOwogICAgICBjb25zdCBmd2RGYWN0b3IgPSAwLjU7CiAgICAgIHRoaXMuc2xpZGluZyA9IGZhbHNlOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1XaGVlbHM7IGkrKykgewogICAgICAgIGNvbnN0IHdoZWVsID0gd2hlZWxJbmZvc1tpXTsKICAgICAgICBjb25zdCBncm91bmRPYmplY3QgPSB3aGVlbC5yYXljYXN0UmVzdWx0LmJvZHk7CiAgICAgICAgbGV0IHJvbGxpbmdGcmljdGlvbiA9IDA7CiAgICAgICAgd2hlZWwuc2xpcEluZm8gPSAxOwoKICAgICAgICBpZiAoZ3JvdW5kT2JqZWN0KSB7CiAgICAgICAgICBjb25zdCBkZWZhdWx0Um9sbGluZ0ZyaWN0aW9uSW1wdWxzZSA9IDA7CiAgICAgICAgICBjb25zdCBtYXhJbXB1bHNlID0gd2hlZWwuYnJha2UgPyB3aGVlbC5icmFrZSA6IGRlZmF1bHRSb2xsaW5nRnJpY3Rpb25JbXB1bHNlOyAvLyBidFdoZWVsQ29udGFjdFBvaW50IGNvbnRhY3RQdChjaGFzc2lzQm9keSxncm91bmRPYmplY3Qsd2hlZWxJbmZyYXljYXN0SW5mby5oaXRQb2ludFdvcmxkLGZvcndhcmRXU1t3aGVlbF0sbWF4SW1wdWxzZSk7CiAgICAgICAgICAvLyByb2xsaW5nRnJpY3Rpb24gPSBjYWxjUm9sbGluZ0ZyaWN0aW9uKGNvbnRhY3RQdCk7CgogICAgICAgICAgcm9sbGluZ0ZyaWN0aW9uID0gY2FsY1JvbGxpbmdGcmljdGlvbihjaGFzc2lzQm9keSwgZ3JvdW5kT2JqZWN0LCB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdFBvaW50V29ybGQsIGZvcndhcmRXU1tpXSwgbWF4SW1wdWxzZSk7CiAgICAgICAgICByb2xsaW5nRnJpY3Rpb24gKz0gd2hlZWwuZW5naW5lRm9yY2UgKiB0aW1lU3RlcDsgLy8gcm9sbGluZ0ZyaWN0aW9uID0gMDsKCiAgICAgICAgICBjb25zdCBmYWN0b3IgPSBtYXhJbXB1bHNlIC8gcm9sbGluZ0ZyaWN0aW9uOwogICAgICAgICAgd2hlZWwuc2xpcEluZm8gKj0gZmFjdG9yOwogICAgICAgIH0gLy9zd2l0Y2ggYmV0d2VlbiBhY3RpdmUgcm9sbGluZyAodGhyb3R0bGUpLCBicmFraW5nIGFuZCBub24tYWN0aXZlIHJvbGxpbmcgZnJpY3Rpb24gKG50aHJvdHRsZS9icmVhaykKCgogICAgICAgIHdoZWVsLmZvcndhcmRJbXB1bHNlID0gMDsKICAgICAgICB3aGVlbC5za2lkSW5mbyA9IDE7CgogICAgICAgIGlmIChncm91bmRPYmplY3QpIHsKICAgICAgICAgIHdoZWVsLnNraWRJbmZvID0gMTsKICAgICAgICAgIGNvbnN0IG1heGltcCA9IHdoZWVsLnN1c3BlbnNpb25Gb3JjZSAqIHRpbWVTdGVwICogd2hlZWwuZnJpY3Rpb25TbGlwOwogICAgICAgICAgY29uc3QgbWF4aW1wU2lkZSA9IG1heGltcDsKICAgICAgICAgIGNvbnN0IG1heGltcFNxdWFyZWQgPSBtYXhpbXAgKiBtYXhpbXBTaWRlOwogICAgICAgICAgd2hlZWwuZm9yd2FyZEltcHVsc2UgPSByb2xsaW5nRnJpY3Rpb247IC8vd2hlZWxJbmZvLmVuZ2luZUZvcmNlKiB0aW1lU3RlcDsKCiAgICAgICAgICBjb25zdCB4ID0gd2hlZWwuZm9yd2FyZEltcHVsc2UgKiBmd2RGYWN0b3IgLyB3aGVlbC5mb3J3YXJkQWNjZWxlcmF0aW9uOwogICAgICAgICAgY29uc3QgeSA9IHdoZWVsLnNpZGVJbXB1bHNlICogc2lkZUZhY3RvciAvIHdoZWVsLnNpZGVBY2NlbGVyYXRpb247CiAgICAgICAgICBjb25zdCBpbXB1bHNlU3F1YXJlZCA9IHggKiB4ICsgeSAqIHk7CiAgICAgICAgICB3aGVlbC5zbGlkaW5nID0gZmFsc2U7CgogICAgICAgICAgaWYgKGltcHVsc2VTcXVhcmVkID4gbWF4aW1wU3F1YXJlZCkgewogICAgICAgICAgICB0aGlzLnNsaWRpbmcgPSB0cnVlOwogICAgICAgICAgICB3aGVlbC5zbGlkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgY29uc3QgZmFjdG9yID0gbWF4aW1wIC8gTWF0aC5zcXJ0KGltcHVsc2VTcXVhcmVkKTsKICAgICAgICAgICAgd2hlZWwuc2tpZEluZm8gKj0gZmFjdG9yOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKHRoaXMuc2xpZGluZykgewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtV2hlZWxzOyBpKyspIHsKICAgICAgICAgIGNvbnN0IHdoZWVsID0gd2hlZWxJbmZvc1tpXTsKCiAgICAgICAgICBpZiAod2hlZWwuc2lkZUltcHVsc2UgIT09IDApIHsKICAgICAgICAgICAgaWYgKHdoZWVsLnNraWRJbmZvIDwgMSkgewogICAgICAgICAgICAgIHdoZWVsLmZvcndhcmRJbXB1bHNlICo9IHdoZWVsLnNraWRJbmZvOwogICAgICAgICAgICAgIHdoZWVsLnNpZGVJbXB1bHNlICo9IHdoZWVsLnNraWRJbmZvOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IC8vIGFwcGx5IHRoZSBpbXB1bHNlcwoKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtV2hlZWxzOyBpKyspIHsKICAgICAgICBjb25zdCB3aGVlbCA9IHdoZWVsSW5mb3NbaV07CiAgICAgICAgY29uc3QgcmVsX3BvcyA9IG5ldyBWZWMzKCk7CiAgICAgICAgd2hlZWwucmF5Y2FzdFJlc3VsdC5oaXRQb2ludFdvcmxkLnZzdWIoY2hhc3Npc0JvZHkucG9zaXRpb24sIHJlbF9wb3MpOyAvLyBjYW5ub25zIGFwcGx5aW1wdWxzZSBpcyB1c2luZyB3b3JsZCBjb29yZCBmb3IgdGhlIHBvc2l0aW9uCiAgICAgICAgLy9yZWxfcG9zLmNvcHkod2hlZWwucmF5Y2FzdFJlc3VsdC5oaXRQb2ludFdvcmxkKTsKCiAgICAgICAgaWYgKHdoZWVsLmZvcndhcmRJbXB1bHNlICE9PSAwKSB7CiAgICAgICAgICBjb25zdCBpbXB1bHNlID0gbmV3IFZlYzMoKTsKICAgICAgICAgIGZvcndhcmRXU1tpXS5zY2FsZSh3aGVlbC5mb3J3YXJkSW1wdWxzZSwgaW1wdWxzZSk7CiAgICAgICAgICBjaGFzc2lzQm9keS5hcHBseUltcHVsc2UoaW1wdWxzZSwgcmVsX3Bvcyk7CiAgICAgICAgfQoKICAgICAgICBpZiAod2hlZWwuc2lkZUltcHVsc2UgIT09IDApIHsKICAgICAgICAgIGNvbnN0IGdyb3VuZE9iamVjdCA9IHdoZWVsLnJheWNhc3RSZXN1bHQuYm9keTsKICAgICAgICAgIGNvbnN0IHJlbF9wb3MyID0gbmV3IFZlYzMoKTsKICAgICAgICAgIHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZC52c3ViKGdyb3VuZE9iamVjdC5wb3NpdGlvbiwgcmVsX3BvczIpOyAvL3JlbF9wb3MyLmNvcHkod2hlZWwucmF5Y2FzdFJlc3VsdC5oaXRQb2ludFdvcmxkKTsKCiAgICAgICAgICBjb25zdCBzaWRlSW1wID0gbmV3IFZlYzMoKTsKICAgICAgICAgIGF4bGVbaV0uc2NhbGUod2hlZWwuc2lkZUltcHVsc2UsIHNpZGVJbXApOyAvLyBTY2FsZSB0aGUgcmVsYXRpdmUgcG9zaXRpb24gaW4gdGhlIHVwIGRpcmVjdGlvbiB3aXRoIHJvbGxJbmZsdWVuY2UuCiAgICAgICAgICAvLyBJZiByb2xsSW5mbHVlbmNlIGlzIDEsIHRoZSBpbXB1bHNlIHdpbGwgYmUgYXBwbGllZCBvbiB0aGUgaGl0UG9pbnQgKGVhc3kgdG8gcm9sbCBvdmVyKSwgaWYgaXQgaXMgemVybyBpdCB3aWxsIGJlIGFwcGxpZWQgaW4gdGhlIHNhbWUgcGxhbmUgYXMgdGhlIGNlbnRlciBvZiBtYXNzIChub3QgZWFzeSB0byByb2xsIG92ZXIpLgoKICAgICAgICAgIGNoYXNzaXNCb2R5LnZlY3RvclRvTG9jYWxGcmFtZShyZWxfcG9zLCByZWxfcG9zKTsKICAgICAgICAgIHJlbF9wb3NbJ3h5eidbdGhpcy5pbmRleFVwQXhpc11dICo9IHdoZWVsLnJvbGxJbmZsdWVuY2U7CiAgICAgICAgICBjaGFzc2lzQm9keS52ZWN0b3JUb1dvcmxkRnJhbWUocmVsX3BvcywgcmVsX3Bvcyk7CiAgICAgICAgICBjaGFzc2lzQm9keS5hcHBseUltcHVsc2Uoc2lkZUltcCwgcmVsX3Bvcyk7IC8vYXBwbHkgZnJpY3Rpb24gaW1wdWxzZSBvbiB0aGUgZ3JvdW5kCgogICAgICAgICAgc2lkZUltcC5zY2FsZSgtMSwgc2lkZUltcCk7CiAgICAgICAgICBncm91bmRPYmplY3QuYXBwbHlJbXB1bHNlKHNpZGVJbXAsIHJlbF9wb3MyKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgfQogIG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKICBuZXcgVmVjMygpOwogIGNvbnN0IHRtcFZlYzQgPSBuZXcgVmVjMygpOwogIGNvbnN0IHRtcFZlYzUgPSBuZXcgVmVjMygpOwogIGNvbnN0IHRtcFZlYzYgPSBuZXcgVmVjMygpOwogIG5ldyBSYXkoKTsKICBuZXcgVmVjMygpOwogIGNvbnN0IGNhc3RSYXlfcmF5dmVjdG9yID0gbmV3IFZlYzMoKTsKICBjb25zdCBjYXN0UmF5X3RhcmdldCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZGlyZWN0aW9ucyA9IFtuZXcgVmVjMygxLCAwLCAwKSwgbmV3IFZlYzMoMCwgMSwgMCksIG5ldyBWZWMzKDAsIDAsIDEpXTsKICBjb25zdCB1cGRhdGVGcmljdGlvbl9zdXJmTm9ybWFsV1Nfc2NhbGVkX3Byb2ogPSBuZXcgVmVjMygpOwogIGNvbnN0IHVwZGF0ZUZyaWN0aW9uX2F4bGUgPSBbXTsKICBjb25zdCB1cGRhdGVGcmljdGlvbl9mb3J3YXJkV1MgPSBbXTsKICBjb25zdCBzaWRlRnJpY3Rpb25TdGlmZm5lc3MyID0gMTsKICBjb25zdCBjYWxjUm9sbGluZ0ZyaWN0aW9uX3ZlbDEgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNhbGNSb2xsaW5nRnJpY3Rpb25fdmVsMiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgY2FsY1JvbGxpbmdGcmljdGlvbl92ZWwgPSBuZXcgVmVjMygpOwoKICBmdW5jdGlvbiBjYWxjUm9sbGluZ0ZyaWN0aW9uKGJvZHkwLCBib2R5MSwgZnJpY3Rpb25Qb3NXb3JsZCwgZnJpY3Rpb25EaXJlY3Rpb25Xb3JsZCwgbWF4SW1wdWxzZSkgewogICAgbGV0IGoxID0gMDsKICAgIGNvbnN0IGNvbnRhY3RQb3NXb3JsZCA9IGZyaWN0aW9uUG9zV29ybGQ7IC8vIGNvbnN0IHJlbF9wb3MxID0gbmV3IFZlYzMoKTsKICAgIC8vIGNvbnN0IHJlbF9wb3MyID0gbmV3IFZlYzMoKTsKCiAgICBjb25zdCB2ZWwxID0gY2FsY1JvbGxpbmdGcmljdGlvbl92ZWwxOwogICAgY29uc3QgdmVsMiA9IGNhbGNSb2xsaW5nRnJpY3Rpb25fdmVsMjsKICAgIGNvbnN0IHZlbCA9IGNhbGNSb2xsaW5nRnJpY3Rpb25fdmVsOyAvLyBjb250YWN0UG9zV29ybGQudnN1Yihib2R5MC5wb3NpdGlvbiwgcmVsX3BvczEpOwogICAgLy8gY29udGFjdFBvc1dvcmxkLnZzdWIoYm9keTEucG9zaXRpb24sIHJlbF9wb3MyKTsKCiAgICBib2R5MC5nZXRWZWxvY2l0eUF0V29ybGRQb2ludChjb250YWN0UG9zV29ybGQsIHZlbDEpOwogICAgYm9keTEuZ2V0VmVsb2NpdHlBdFdvcmxkUG9pbnQoY29udGFjdFBvc1dvcmxkLCB2ZWwyKTsKICAgIHZlbDEudnN1Yih2ZWwyLCB2ZWwpOwogICAgY29uc3QgdnJlbCA9IGZyaWN0aW9uRGlyZWN0aW9uV29ybGQuZG90KHZlbCk7CiAgICBjb25zdCBkZW5vbTAgPSBjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yKGJvZHkwLCBmcmljdGlvblBvc1dvcmxkLCBmcmljdGlvbkRpcmVjdGlvbldvcmxkKTsKICAgIGNvbnN0IGRlbm9tMSA9IGNvbXB1dGVJbXB1bHNlRGVub21pbmF0b3IoYm9keTEsIGZyaWN0aW9uUG9zV29ybGQsIGZyaWN0aW9uRGlyZWN0aW9uV29ybGQpOwogICAgY29uc3QgcmVsYXhhdGlvbiA9IDE7CiAgICBjb25zdCBqYWNEaWFnQUJJbnYgPSByZWxheGF0aW9uIC8gKGRlbm9tMCArIGRlbm9tMSk7IC8vIGNhbGN1bGF0ZSBqIHRoYXQgbW92ZXMgdXMgdG8gemVybyByZWxhdGl2ZSB2ZWxvY2l0eQoKICAgIGoxID0gLXZyZWwgKiBqYWNEaWFnQUJJbnY7CgogICAgaWYgKG1heEltcHVsc2UgPCBqMSkgewogICAgICBqMSA9IG1heEltcHVsc2U7CiAgICB9CgogICAgaWYgKGoxIDwgLW1heEltcHVsc2UpIHsKICAgICAgajEgPSAtbWF4SW1wdWxzZTsKICAgIH0KCiAgICByZXR1cm4gajE7CiAgfQoKICBjb25zdCBjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yX3IwID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yX2MwID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yX3ZlYyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl9tID0gbmV3IFZlYzMoKTsKCiAgZnVuY3Rpb24gY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcihib2R5LCBwb3MsIG5vcm1hbCkgewogICAgY29uc3QgcjAgPSBjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yX3IwOwogICAgY29uc3QgYzAgPSBjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yX2MwOwogICAgY29uc3QgdmVjID0gY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl92ZWM7CiAgICBjb25zdCBtID0gY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl9tOwogICAgcG9zLnZzdWIoYm9keS5wb3NpdGlvbiwgcjApOwogICAgcjAuY3Jvc3Mobm9ybWFsLCBjMCk7CiAgICBib2R5LmludkluZXJ0aWFXb3JsZC52bXVsdChjMCwgbSk7CiAgICBtLmNyb3NzKHIwLCB2ZWMpOwogICAgcmV0dXJuIGJvZHkuaW52TWFzcyArIG5vcm1hbC5kb3QodmVjKTsKICB9CgogIGNvbnN0IHJlc29sdmVTaW5nbGVCaWxhdGVyYWxfdmVsMSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcmVzb2x2ZVNpbmdsZUJpbGF0ZXJhbF92ZWwyID0gbmV3IFZlYzMoKTsKICBjb25zdCByZXNvbHZlU2luZ2xlQmlsYXRlcmFsX3ZlbCA9IG5ldyBWZWMzKCk7IC8vIGJpbGF0ZXJhbCBjb25zdHJhaW50IGJldHdlZW4gdHdvIGR5bmFtaWMgb2JqZWN0cwoKICBmdW5jdGlvbiByZXNvbHZlU2luZ2xlQmlsYXRlcmFsKGJvZHkxLCBwb3MxLCBib2R5MiwgcG9zMiwgbm9ybWFsKSB7CiAgICBjb25zdCBub3JtYWxMZW5TcXIgPSBub3JtYWwubGVuZ3RoU3F1YXJlZCgpOwoKICAgIGlmIChub3JtYWxMZW5TcXIgPiAxLjEpIHsKICAgICAgcmV0dXJuIDA7IC8vIG5vIGltcHVsc2UKICAgIH0gLy8gY29uc3QgcmVsX3BvczEgPSBuZXcgVmVjMygpOwogICAgLy8gY29uc3QgcmVsX3BvczIgPSBuZXcgVmVjMygpOwogICAgLy8gcG9zMS52c3ViKGJvZHkxLnBvc2l0aW9uLCByZWxfcG9zMSk7CiAgICAvLyBwb3MyLnZzdWIoYm9keTIucG9zaXRpb24sIHJlbF9wb3MyKTsKCgogICAgY29uc3QgdmVsMSA9IHJlc29sdmVTaW5nbGVCaWxhdGVyYWxfdmVsMTsKICAgIGNvbnN0IHZlbDIgPSByZXNvbHZlU2luZ2xlQmlsYXRlcmFsX3ZlbDI7CiAgICBjb25zdCB2ZWwgPSByZXNvbHZlU2luZ2xlQmlsYXRlcmFsX3ZlbDsKICAgIGJvZHkxLmdldFZlbG9jaXR5QXRXb3JsZFBvaW50KHBvczEsIHZlbDEpOwogICAgYm9keTIuZ2V0VmVsb2NpdHlBdFdvcmxkUG9pbnQocG9zMiwgdmVsMik7CiAgICB2ZWwxLnZzdWIodmVsMiwgdmVsKTsKICAgIGNvbnN0IHJlbF92ZWwgPSBub3JtYWwuZG90KHZlbCk7CiAgICBjb25zdCBjb250YWN0RGFtcGluZyA9IDAuMjsKICAgIGNvbnN0IG1hc3NUZXJtID0gMSAvIChib2R5MS5pbnZNYXNzICsgYm9keTIuaW52TWFzcyk7CiAgICBjb25zdCBpbXB1bHNlID0gLWNvbnRhY3REYW1waW5nICogcmVsX3ZlbCAqIG1hc3NUZXJtOwogICAgcmV0dXJuIGltcHVsc2U7CiAgfQoKICAvKioKICAgKiBTcGhlcmljYWwgc2hhcGUKICAgKiBAZXhhbXBsZQogICAqICAgICBjb25zdCByYWRpdXMgPSAxCiAgICogICAgIGNvbnN0IHNwaGVyZVNoYXBlID0gbmV3IENBTk5PTi5TcGhlcmUocmFkaXVzKQogICAqICAgICBjb25zdCBzcGhlcmVCb2R5ID0gbmV3IENBTk5PTi5Cb2R5KHsgbWFzczogMSwgc2hhcGU6IHNwaGVyZVNoYXBlIH0pCiAgICogICAgIHdvcmxkLmFkZEJvZHkoc3BoZXJlQm9keSkKICAgKi8KICBjbGFzcyBTcGhlcmUgZXh0ZW5kcyBTaGFwZSB7CiAgICAvKioKICAgICAqIFRoZSByYWRpdXMgb2YgdGhlIHNwaGVyZS4KICAgICAqLwoKICAgIC8qKgogICAgICoKICAgICAqIEBwYXJhbSByYWRpdXMgVGhlIHJhZGl1cyBvZiB0aGUgc3BoZXJlLCBhIG5vbi1uZWdhdGl2ZSBudW1iZXIuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKHJhZGl1cykgewogICAgICBzdXBlcih7CiAgICAgICAgdHlwZTogU2hhcGUudHlwZXMuU1BIRVJFCiAgICAgIH0pOwogICAgICB0aGlzLnJhZGl1cyA9IHJhZGl1cyAhPT0gdW5kZWZpbmVkID8gcmFkaXVzIDogMS4wOwoKICAgICAgaWYgKHRoaXMucmFkaXVzIDwgMCkgewogICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIHNwaGVyZSByYWRpdXMgY2Fubm90IGJlIG5lZ2F0aXZlLicpOwogICAgICB9CgogICAgICB0aGlzLnVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCk7CiAgICB9CiAgICAvKiogY2FsY3VsYXRlTG9jYWxJbmVydGlhICovCgoKICAgIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYShtYXNzLCB0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgY29uc3QgSSA9IDIuMCAqIG1hc3MgKiB0aGlzLnJhZGl1cyAqIHRoaXMucmFkaXVzIC8gNS4wOwogICAgICB0YXJnZXQueCA9IEk7CiAgICAgIHRhcmdldC55ID0gSTsKICAgICAgdGFyZ2V0LnogPSBJOwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqIHZvbHVtZSAqLwoKCiAgICB2b2x1bWUoKSB7CiAgICAgIHJldHVybiA0LjAgKiBNYXRoLlBJICogTWF0aC5wb3codGhpcy5yYWRpdXMsIDMpIC8gMy4wOwogICAgfQoKICAgIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCkgewogICAgICB0aGlzLmJvdW5kaW5nU3BoZXJlUmFkaXVzID0gdGhpcy5yYWRpdXM7CiAgICB9CgogICAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHsKICAgICAgY29uc3QgciA9IHRoaXMucmFkaXVzOwogICAgICBjb25zdCBheGVzID0gWyd4JywgJ3knLCAneiddOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBheGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3QgYXggPSBheGVzW2ldOwogICAgICAgIG1pbltheF0gPSBwb3NbYXhdIC0gcjsKICAgICAgICBtYXhbYXhdID0gcG9zW2F4XSArIHI7CiAgICAgIH0KICAgIH0KCiAgfQogIG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKICBuZXcgVmVjMygpOyAvLyBUZW1wIHZlY3RvcnMgZm9yIGNhbGN1bGF0aW9uCgogIG5ldyBWZWMzKCk7IC8vIFJlbGF0aXZlIHZlbG9jaXR5CgogIG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKICBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKCiAgLyoqCiAgICogQ3lsaW5kZXIgY2xhc3MuCiAgICogQGV4YW1wbGUKICAgKiAgICAgY29uc3QgcmFkaXVzVG9wID0gMC41CiAgICogICAgIGNvbnN0IHJhZGl1c0JvdHRvbSA9IDAuNQogICAqICAgICBjb25zdCBoZWlnaHQgPSAyCiAgICogICAgIGNvbnN0IG51bVNlZ21lbnRzID0gMTIKICAgKiAgICAgY29uc3QgY3lsaW5kZXJTaGFwZSA9IG5ldyBDQU5OT04uQ3lsaW5kZXIocmFkaXVzVG9wLCByYWRpdXNCb3R0b20sIGhlaWdodCwgbnVtU2VnbWVudHMpCiAgICogICAgIGNvbnN0IGN5bGluZGVyQm9keSA9IG5ldyBDQU5OT04uQm9keSh7IG1hc3M6IDEsIHNoYXBlOiBjeWxpbmRlclNoYXBlIH0pCiAgICogICAgIHdvcmxkLmFkZEJvZHkoY3lsaW5kZXJCb2R5KQogICAqLwoKICBjbGFzcyBDeWxpbmRlciBleHRlbmRzIENvbnZleFBvbHloZWRyb24gewogICAgLyoqIFRoZSByYWRpdXMgb2YgdGhlIHRvcCBvZiB0aGUgQ3lsaW5kZXIuICovCgogICAgLyoqIFRoZSByYWRpdXMgb2YgdGhlIGJvdHRvbSBvZiB0aGUgQ3lsaW5kZXIuICovCgogICAgLyoqIFRoZSBoZWlnaHQgb2YgdGhlIEN5bGluZGVyLiAqLwoKICAgIC8qKiBUaGUgbnVtYmVyIG9mIHNlZ21lbnRzIHRvIGJ1aWxkIHRoZSBjeWxpbmRlciBvdXQgb2YuICovCgogICAgLyoqCiAgICAgKiBAcGFyYW0gcmFkaXVzVG9wIFRoZSByYWRpdXMgb2YgdGhlIHRvcCBvZiB0aGUgQ3lsaW5kZXIuCiAgICAgKiBAcGFyYW0gcmFkaXVzQm90dG9tIFRoZSByYWRpdXMgb2YgdGhlIGJvdHRvbSBvZiB0aGUgQ3lsaW5kZXIuCiAgICAgKiBAcGFyYW0gaGVpZ2h0IFRoZSBoZWlnaHQgb2YgdGhlIEN5bGluZGVyLgogICAgICogQHBhcmFtIG51bVNlZ21lbnRzIFRoZSBudW1iZXIgb2Ygc2VnbWVudHMgdG8gYnVpbGQgdGhlIGN5bGluZGVyIG91dCBvZi4KICAgICAqLwogICAgY29uc3RydWN0b3IocmFkaXVzVG9wLCByYWRpdXNCb3R0b20sIGhlaWdodCwgbnVtU2VnbWVudHMpIHsKICAgICAgaWYgKHJhZGl1c1RvcCA9PT0gdm9pZCAwKSB7CiAgICAgICAgcmFkaXVzVG9wID0gMTsKICAgICAgfQoKICAgICAgaWYgKHJhZGl1c0JvdHRvbSA9PT0gdm9pZCAwKSB7CiAgICAgICAgcmFkaXVzQm90dG9tID0gMTsKICAgICAgfQoKICAgICAgaWYgKGhlaWdodCA9PT0gdm9pZCAwKSB7CiAgICAgICAgaGVpZ2h0ID0gMTsKICAgICAgfQoKICAgICAgaWYgKG51bVNlZ21lbnRzID09PSB2b2lkIDApIHsKICAgICAgICBudW1TZWdtZW50cyA9IDg7CiAgICAgIH0KCiAgICAgIGlmIChyYWRpdXNUb3AgPCAwKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgY3lsaW5kZXIgcmFkaXVzVG9wIGNhbm5vdCBiZSBuZWdhdGl2ZS4nKTsKICAgICAgfQoKICAgICAgaWYgKHJhZGl1c0JvdHRvbSA8IDApIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBjeWxpbmRlciByYWRpdXNCb3R0b20gY2Fubm90IGJlIG5lZ2F0aXZlLicpOwogICAgICB9CgogICAgICBjb25zdCBOID0gbnVtU2VnbWVudHM7CiAgICAgIGNvbnN0IHZlcnRpY2VzID0gW107CiAgICAgIGNvbnN0IGF4ZXMgPSBbXTsKICAgICAgY29uc3QgZmFjZXMgPSBbXTsKICAgICAgY29uc3QgYm90dG9tZmFjZSA9IFtdOwogICAgICBjb25zdCB0b3BmYWNlID0gW107CiAgICAgIGNvbnN0IGNvcyA9IE1hdGguY29zOwogICAgICBjb25zdCBzaW4gPSBNYXRoLnNpbjsgLy8gRmlyc3QgYm90dG9tIHBvaW50CgogICAgICB2ZXJ0aWNlcy5wdXNoKG5ldyBWZWMzKC1yYWRpdXNCb3R0b20gKiBzaW4oMCksIC1oZWlnaHQgKiAwLjUsIHJhZGl1c0JvdHRvbSAqIGNvcygwKSkpOwogICAgICBib3R0b21mYWNlLnB1c2goMCk7IC8vIEZpcnN0IHRvcCBwb2ludAoKICAgICAgdmVydGljZXMucHVzaChuZXcgVmVjMygtcmFkaXVzVG9wICogc2luKDApLCBoZWlnaHQgKiAwLjUsIHJhZGl1c1RvcCAqIGNvcygwKSkpOwogICAgICB0b3BmYWNlLnB1c2goMSk7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IE47IGkrKykgewogICAgICAgIGNvbnN0IHRoZXRhID0gMiAqIE1hdGguUEkgLyBOICogKGkgKyAxKTsKICAgICAgICBjb25zdCB0aGV0YU4gPSAyICogTWF0aC5QSSAvIE4gKiAoaSArIDAuNSk7CgogICAgICAgIGlmIChpIDwgTiAtIDEpIHsKICAgICAgICAgIC8vIEJvdHRvbQogICAgICAgICAgdmVydGljZXMucHVzaChuZXcgVmVjMygtcmFkaXVzQm90dG9tICogc2luKHRoZXRhKSwgLWhlaWdodCAqIDAuNSwgcmFkaXVzQm90dG9tICogY29zKHRoZXRhKSkpOwogICAgICAgICAgYm90dG9tZmFjZS5wdXNoKDIgKiBpICsgMik7IC8vIFRvcAoKICAgICAgICAgIHZlcnRpY2VzLnB1c2gobmV3IFZlYzMoLXJhZGl1c1RvcCAqIHNpbih0aGV0YSksIGhlaWdodCAqIDAuNSwgcmFkaXVzVG9wICogY29zKHRoZXRhKSkpOwogICAgICAgICAgdG9wZmFjZS5wdXNoKDIgKiBpICsgMyk7IC8vIEZhY2UKCiAgICAgICAgICBmYWNlcy5wdXNoKFsyICogaSwgMiAqIGkgKyAxLCAyICogaSArIDMsIDIgKiBpICsgMl0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBmYWNlcy5wdXNoKFsyICogaSwgMiAqIGkgKyAxLCAxLCAwXSk7IC8vIENvbm5lY3QKICAgICAgICB9IC8vIEF4aXM6IHdlIGNhbiBjdXQgb2ZmIGhhbGYgb2YgdGhlbSBpZiB3ZSBoYXZlIGV2ZW4gbnVtYmVyIG9mIHNlZ21lbnRzCgoKICAgICAgICBpZiAoTiAlIDIgPT09IDEgfHwgaSA8IE4gLyAyKSB7CiAgICAgICAgICBheGVzLnB1c2gobmV3IFZlYzMoLXNpbih0aGV0YU4pLCAwLCBjb3ModGhldGFOKSkpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgZmFjZXMucHVzaChib3R0b21mYWNlKTsKICAgICAgYXhlcy5wdXNoKG5ldyBWZWMzKDAsIDEsIDApKTsgLy8gUmVvcmRlciB0b3AgZmFjZQoKICAgICAgY29uc3QgdGVtcCA9IFtdOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b3BmYWNlLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGVtcC5wdXNoKHRvcGZhY2VbdG9wZmFjZS5sZW5ndGggLSBpIC0gMV0pOwogICAgICB9CgogICAgICBmYWNlcy5wdXNoKHRlbXApOwogICAgICBzdXBlcih7CiAgICAgICAgdmVydGljZXMsCiAgICAgICAgZmFjZXMsCiAgICAgICAgYXhlcwogICAgICB9KTsKICAgICAgdGhpcy50eXBlID0gU2hhcGUudHlwZXMuQ1lMSU5ERVI7CiAgICAgIHRoaXMucmFkaXVzVG9wID0gcmFkaXVzVG9wOwogICAgICB0aGlzLnJhZGl1c0JvdHRvbSA9IHJhZGl1c0JvdHRvbTsKICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7CiAgICAgIHRoaXMubnVtU2VnbWVudHMgPSBudW1TZWdtZW50czsKICAgIH0KCiAgfQoKICAvKioKICAgKiBQYXJ0aWNsZSBzaGFwZS4KICAgKiBAZXhhbXBsZQogICAqICAgICBjb25zdCBwYXJ0aWNsZVNoYXBlID0gbmV3IENBTk5PTi5QYXJ0aWNsZSgpCiAgICogICAgIGNvbnN0IHBhcnRpY2xlQm9keSA9IG5ldyBDQU5OT04uQm9keSh7IG1hc3M6IDEsIHNoYXBlOiBwYXJ0aWNsZVNoYXBlIH0pCiAgICogICAgIHdvcmxkLmFkZEJvZHkocGFydGljbGVCb2R5KQogICAqLwogIGNsYXNzIFBhcnRpY2xlIGV4dGVuZHMgU2hhcGUgewogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHN1cGVyKHsKICAgICAgICB0eXBlOiBTaGFwZS50eXBlcy5QQVJUSUNMRQogICAgICB9KTsKICAgIH0KICAgIC8qKgogICAgICogY2FsY3VsYXRlTG9jYWxJbmVydGlhCiAgICAgKi8KCgogICAgY2FsY3VsYXRlTG9jYWxJbmVydGlhKG1hc3MsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICB0YXJnZXQuc2V0KDAsIDAsIDApOwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQoKICAgIHZvbHVtZSgpIHsKICAgICAgcmV0dXJuIDA7CiAgICB9CgogICAgdXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKSB7CiAgICAgIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgPSAwOwogICAgfQoKICAgIGNhbGN1bGF0ZVdvcmxkQUFCQihwb3MsIHF1YXQsIG1pbiwgbWF4KSB7CiAgICAgIC8vIEdldCBlYWNoIGF4aXMgbWF4CiAgICAgIG1pbi5jb3B5KHBvcyk7CiAgICAgIG1heC5jb3B5KHBvcyk7CiAgICB9CgogIH0KCiAgLyoqCiAgICogQSBwbGFuZSwgZmFjaW5nIGluIHRoZSBaIGRpcmVjdGlvbi4gVGhlIHBsYW5lIGhhcyBpdHMgc3VyZmFjZSBhdCB6PTAgYW5kIGV2ZXJ5dGhpbmcgYmVsb3cgej0wIGlzIGFzc3VtZWQgdG8gYmUgc29saWQgcGxhbmUuIFRvIG1ha2UgdGhlIHBsYW5lIGZhY2UgaW4gc29tZSBvdGhlciBkaXJlY3Rpb24gdGhhbiB6LCB5b3UgbXVzdCBwdXQgaXQgaW5zaWRlIGEgQm9keSBhbmQgcm90YXRlIHRoYXQgYm9keS4gU2VlIHRoZSBkZW1vcy4KICAgKiBAZXhhbXBsZQogICAqICAgICBjb25zdCBwbGFuZVNoYXBlID0gbmV3IENBTk5PTi5QbGFuZSgpCiAgICogICAgIGNvbnN0IHBsYW5lQm9keSA9IG5ldyBDQU5OT04uQm9keSh7IG1hc3M6IDAsIHNoYXBlOiAgcGxhbmVTaGFwZSB9KQogICAqICAgICBwbGFuZUJvZHkucXVhdGVybmlvbi5zZXRGcm9tRXVsZXIoLU1hdGguUEkgLyAyLCAwLCAwKSAvLyBtYWtlIGl0IGZhY2UgdXAKICAgKiAgICAgd29ybGQuYWRkQm9keShwbGFuZUJvZHkpCiAgICovCiAgY2xhc3MgUGxhbmUgZXh0ZW5kcyBTaGFwZSB7CiAgICAvKiogd29ybGROb3JtYWwgKi8KCiAgICAvKiogd29ybGROb3JtYWxOZWVkc1VwZGF0ZSAqLwogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHN1cGVyKHsKICAgICAgICB0eXBlOiBTaGFwZS50eXBlcy5QTEFORQogICAgICB9KTsgLy8gV29ybGQgb3JpZW50ZWQgbm9ybWFsCgogICAgICB0aGlzLndvcmxkTm9ybWFsID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy53b3JsZE5vcm1hbE5lZWRzVXBkYXRlID0gdHJ1ZTsKICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IE51bWJlci5NQVhfVkFMVUU7CiAgICB9CiAgICAvKiogY29tcHV0ZVdvcmxkTm9ybWFsICovCgoKICAgIGNvbXB1dGVXb3JsZE5vcm1hbChxdWF0KSB7CiAgICAgIGNvbnN0IG4gPSB0aGlzLndvcmxkTm9ybWFsOwogICAgICBuLnNldCgwLCAwLCAxKTsKICAgICAgcXVhdC52bXVsdChuLCBuKTsKICAgICAgdGhpcy53b3JsZE5vcm1hbE5lZWRzVXBkYXRlID0gZmFsc2U7CiAgICB9CgogICAgY2FsY3VsYXRlTG9jYWxJbmVydGlhKG1hc3MsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQoKICAgIHZvbHVtZSgpIHsKICAgICAgcmV0dXJuICgvLyBUaGUgcGxhbmUgaXMgaW5maW5pdGUuLi4KICAgICAgICBOdW1iZXIuTUFYX1ZBTFVFCiAgICAgICk7CiAgICB9CgogICAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHsKICAgICAgLy8gVGhlIHBsYW5lIEFBQkIgaXMgaW5maW5pdGUsIGV4Y2VwdCBpZiB0aGUgbm9ybWFsIGlzIHBvaW50aW5nIGFsb25nIGFueSBheGlzCiAgICAgIHRlbXBOb3JtYWwuc2V0KDAsIDAsIDEpOyAvLyBEZWZhdWx0IHBsYW5lIG5vcm1hbCBpcyB6CgogICAgICBxdWF0LnZtdWx0KHRlbXBOb3JtYWwsIHRlbXBOb3JtYWwpOwogICAgICBjb25zdCBtYXhWYWwgPSBOdW1iZXIuTUFYX1ZBTFVFOwogICAgICBtaW4uc2V0KC1tYXhWYWwsIC1tYXhWYWwsIC1tYXhWYWwpOwogICAgICBtYXguc2V0KG1heFZhbCwgbWF4VmFsLCBtYXhWYWwpOwoKICAgICAgaWYgKHRlbXBOb3JtYWwueCA9PT0gMSkgewogICAgICAgIG1heC54ID0gcG9zLng7CiAgICAgIH0gZWxzZSBpZiAodGVtcE5vcm1hbC54ID09PSAtMSkgewogICAgICAgIG1pbi54ID0gcG9zLng7CiAgICAgIH0KCiAgICAgIGlmICh0ZW1wTm9ybWFsLnkgPT09IDEpIHsKICAgICAgICBtYXgueSA9IHBvcy55OwogICAgICB9IGVsc2UgaWYgKHRlbXBOb3JtYWwueSA9PT0gLTEpIHsKICAgICAgICBtaW4ueSA9IHBvcy55OwogICAgICB9CgogICAgICBpZiAodGVtcE5vcm1hbC56ID09PSAxKSB7CiAgICAgICAgbWF4LnogPSBwb3MuejsKICAgICAgfSBlbHNlIGlmICh0ZW1wTm9ybWFsLnogPT09IC0xKSB7CiAgICAgICAgbWluLnogPSBwb3MuejsKICAgICAgfQogICAgfQoKICAgIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCkgewogICAgICB0aGlzLmJvdW5kaW5nU3BoZXJlUmFkaXVzID0gTnVtYmVyLk1BWF9WQUxVRTsKICAgIH0KCiAgfQogIGNvbnN0IHRlbXBOb3JtYWwgPSBuZXcgVmVjMygpOwoKICAvKioKICAgKiBIZWlnaHRmaWVsZCBzaGFwZSBjbGFzcy4gSGVpZ2h0IGRhdGEgaXMgZ2l2ZW4gYXMgYW4gYXJyYXkuIFRoZXNlIGRhdGEgcG9pbnRzIGFyZSBzcHJlYWQgb3V0IGV2ZW5seSB3aXRoIGEgZ2l2ZW4gZGlzdGFuY2UuCiAgICogQHRvZG8gU2hvdWxkIGJlIHBvc3NpYmxlIHRvIHVzZSBhbG9uZyBhbGwgYXhlcywgbm90IGp1c3QgeQogICAqIEB0b2RvIHNob3VsZCBiZSBwb3NzaWJsZSB0byBzY2FsZSBhbG9uZyBhbGwgYXhlcwogICAqIEB0b2RvIFJlZmFjdG9yIGVsZW1lbnRTaXplIHRvIGVsZW1lbnRTaXplWCBhbmQgZWxlbWVudFNpemVZCiAgICoKICAgKiBAZXhhbXBsZQogICAqICAgICAvLyBHZW5lcmF0ZSBzb21lIGhlaWdodCBkYXRhICh5LXZhbHVlcykuCiAgICogICAgIGNvbnN0IGRhdGEgPSBbXQogICAqICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwMDA7IGkrKykgewogICAqICAgICAgICAgY29uc3QgeSA9IDAuNSAqIE1hdGguY29zKDAuMiAqIGkpCiAgICogICAgICAgICBkYXRhLnB1c2goeSkKICAgKiAgICAgfQogICAqCiAgICogICAgIC8vIENyZWF0ZSB0aGUgaGVpZ2h0ZmllbGQgc2hhcGUKICAgKiAgICAgY29uc3QgaGVpZ2h0ZmllbGRTaGFwZSA9IG5ldyBDQU5OT04uSGVpZ2h0ZmllbGQoZGF0YSwgewogICAqICAgICAgICAgZWxlbWVudFNpemU6IDEgLy8gRGlzdGFuY2UgYmV0d2VlbiB0aGUgZGF0YSBwb2ludHMgaW4gWCBhbmQgWSBkaXJlY3Rpb25zCiAgICogICAgIH0pCiAgICogICAgIGNvbnN0IGhlaWdodGZpZWxkQm9keSA9IG5ldyBDQU5OT04uQm9keSh7IHNoYXBlOiBoZWlnaHRmaWVsZFNoYXBlIH0pCiAgICogICAgIHdvcmxkLmFkZEJvZHkoaGVpZ2h0ZmllbGRCb2R5KQogICAqLwogIGNsYXNzIEhlaWdodGZpZWxkIGV4dGVuZHMgU2hhcGUgewogICAgLyoqCiAgICAgKiBBbiBhcnJheSBvZiBudW1iZXJzLCBvciBoZWlnaHQgdmFsdWVzLCB0aGF0IGFyZSBzcHJlYWQgb3V0IGFsb25nIHRoZSB4IGF4aXMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIE1heCB2YWx1ZSBvZiB0aGUgZGF0YSBwb2ludHMgaW4gdGhlIGRhdGEgYXJyYXkuCiAgICAgKi8KCiAgICAvKioKICAgICAqIE1pbmltdW0gdmFsdWUgb2YgdGhlIGRhdGEgcG9pbnRzIGluIHRoZSBkYXRhIGFycmF5LgogICAgICovCgogICAgLyoqCiAgICAgKiBXb3JsZCBzcGFjaW5nIGJldHdlZW4gdGhlIGRhdGEgcG9pbnRzIGluIFggYW5kIFkgZGlyZWN0aW9uLgogICAgICogQHRvZG8gZWxlbWVudFNpemVYIGFuZCBZCiAgICAgKiBAZGVmYXVsdCAxCiAgICAgKi8KCiAgICAvKioKICAgICAqIEBkZWZhdWx0IHRydWUKICAgICAqLwoKICAgIC8qKgogICAgICogQHBhcmFtIGRhdGEgQW4gYXJyYXkgb2YgbnVtYmVycywgb3IgaGVpZ2h0IHZhbHVlcywgdGhhdCBhcmUgc3ByZWFkIG91dCBhbG9uZyB0aGUgeCBheGlzLgogICAgICovCiAgICBjb25zdHJ1Y3RvcihkYXRhLCBvcHRpb25zKSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIG9wdGlvbnMgPSBVdGlscy5kZWZhdWx0cyhvcHRpb25zLCB7CiAgICAgICAgbWF4VmFsdWU6IG51bGwsCiAgICAgICAgbWluVmFsdWU6IG51bGwsCiAgICAgICAgZWxlbWVudFNpemU6IDEKICAgICAgfSk7CiAgICAgIHN1cGVyKHsKICAgICAgICB0eXBlOiBTaGFwZS50eXBlcy5IRUlHSFRGSUVMRAogICAgICB9KTsKICAgICAgdGhpcy5kYXRhID0gZGF0YTsKICAgICAgdGhpcy5tYXhWYWx1ZSA9IG9wdGlvbnMubWF4VmFsdWU7CiAgICAgIHRoaXMubWluVmFsdWUgPSBvcHRpb25zLm1pblZhbHVlOwogICAgICB0aGlzLmVsZW1lbnRTaXplID0gb3B0aW9ucy5lbGVtZW50U2l6ZTsKCiAgICAgIGlmIChvcHRpb25zLm1pblZhbHVlID09PSBudWxsKSB7CiAgICAgICAgdGhpcy51cGRhdGVNaW5WYWx1ZSgpOwogICAgICB9CgogICAgICBpZiAob3B0aW9ucy5tYXhWYWx1ZSA9PT0gbnVsbCkgewogICAgICAgIHRoaXMudXBkYXRlTWF4VmFsdWUoKTsKICAgICAgfQoKICAgICAgdGhpcy5jYWNoZUVuYWJsZWQgPSB0cnVlOwogICAgICB0aGlzLnBpbGxhckNvbnZleCA9IG5ldyBDb252ZXhQb2x5aGVkcm9uKCk7CiAgICAgIHRoaXMucGlsbGFyT2Zmc2V0ID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy51cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpOyAvLyAiaV9qX2lzVXBwZXIiID0+IHsgY29udmV4OiAuLi4sIG9mZnNldDogLi4uIH0KICAgICAgLy8gZm9yIGV4YW1wbGU6CiAgICAgIC8vIF9jYWNoZWRQaWxsYXJzWyIwXzJfMSJdCgogICAgICB0aGlzLl9jYWNoZWRQaWxsYXJzID0ge307CiAgICB9CiAgICAvKioKICAgICAqIENhbGwgd2hlbmV2ZXIgeW91IGNoYW5nZSB0aGUgZGF0YSBhcnJheS4KICAgICAqLwoKCiAgICB1cGRhdGUoKSB7CiAgICAgIHRoaXMuX2NhY2hlZFBpbGxhcnMgPSB7fTsKICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlIHRoZSBgbWluVmFsdWVgIHByb3BlcnR5CiAgICAgKi8KCgogICAgdXBkYXRlTWluVmFsdWUoKSB7CiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7CiAgICAgIGxldCBtaW5WYWx1ZSA9IGRhdGFbMF1bMF07CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gZGF0YS5sZW5ndGg7IGkrKykgewogICAgICAgIGZvciAobGV0IGogPSAwOyBqICE9PSBkYXRhW2ldLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICBjb25zdCB2ID0gZGF0YVtpXVtqXTsKCiAgICAgICAgICBpZiAodiA8IG1pblZhbHVlKSB7CiAgICAgICAgICAgIG1pblZhbHVlID0gdjsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMubWluVmFsdWUgPSBtaW5WYWx1ZTsKICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlIHRoZSBgbWF4VmFsdWVgIHByb3BlcnR5CiAgICAgKi8KCgogICAgdXBkYXRlTWF4VmFsdWUoKSB7CiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7CiAgICAgIGxldCBtYXhWYWx1ZSA9IGRhdGFbMF1bMF07CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gZGF0YS5sZW5ndGg7IGkrKykgewogICAgICAgIGZvciAobGV0IGogPSAwOyBqICE9PSBkYXRhW2ldLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICBjb25zdCB2ID0gZGF0YVtpXVtqXTsKCiAgICAgICAgICBpZiAodiA+IG1heFZhbHVlKSB7CiAgICAgICAgICAgIG1heFZhbHVlID0gdjsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMubWF4VmFsdWUgPSBtYXhWYWx1ZTsKICAgIH0KICAgIC8qKgogICAgICogU2V0IHRoZSBoZWlnaHQgdmFsdWUgYXQgYW4gaW5kZXguIERvbid0IGZvcmdldCB0byB1cGRhdGUgbWF4VmFsdWUgYW5kIG1pblZhbHVlIGFmdGVyIHlvdSdyZSBkb25lLgogICAgICovCgoKICAgIHNldEhlaWdodFZhbHVlQXRJbmRleCh4aSwgeWksIHZhbHVlKSB7CiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7CiAgICAgIGRhdGFbeGldW3lpXSA9IHZhbHVlOyAvLyBJbnZhbGlkYXRlIGNhY2hlCgogICAgICB0aGlzLmNsZWFyQ2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGksIHlpLCBmYWxzZSk7CgogICAgICBpZiAoeGkgPiAwKSB7CiAgICAgICAgdGhpcy5jbGVhckNhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpIC0gMSwgeWksIHRydWUpOwogICAgICAgIHRoaXMuY2xlYXJDYWNoZWRDb252ZXhUcmlhbmdsZVBpbGxhcih4aSAtIDEsIHlpLCBmYWxzZSk7CiAgICAgIH0KCiAgICAgIGlmICh5aSA+IDApIHsKICAgICAgICB0aGlzLmNsZWFyQ2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGksIHlpIC0gMSwgdHJ1ZSk7CiAgICAgICAgdGhpcy5jbGVhckNhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpLCB5aSAtIDEsIGZhbHNlKTsKICAgICAgfQoKICAgICAgaWYgKHlpID4gMCAmJiB4aSA+IDApIHsKICAgICAgICB0aGlzLmNsZWFyQ2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGkgLSAxLCB5aSAtIDEsIHRydWUpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEdldCBtYXgvbWluIGluIGEgcmVjdGFuZ2xlIGluIHRoZSBtYXRyaXggZGF0YQogICAgICogQHBhcmFtIHJlc3VsdCBBbiBhcnJheSB0byBzdG9yZSB0aGUgcmVzdWx0cyBpbi4KICAgICAqIEByZXR1cm4gVGhlIHJlc3VsdCBhcnJheSwgaWYgaXQgd2FzIHBhc3NlZCBpbi4gTWluaW11bSB3aWxsIGJlIGF0IHBvc2l0aW9uIDAgYW5kIG1heCBhdCAxLgogICAgICovCgoKICAgIGdldFJlY3RNaW5NYXgoaU1pblgsIGlNaW5ZLCBpTWF4WCwgaU1heFksIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIHsKICAgICAgICByZXN1bHQgPSBbXTsKICAgICAgfQoKICAgICAgLy8gR2V0IG1heCBhbmQgbWluIG9mIHRoZSBkYXRhCiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7IC8vIFNldCBmaXJzdCB2YWx1ZQoKICAgICAgbGV0IG1heCA9IHRoaXMubWluVmFsdWU7CgogICAgICBmb3IgKGxldCBpID0gaU1pblg7IGkgPD0gaU1heFg7IGkrKykgewogICAgICAgIGZvciAobGV0IGogPSBpTWluWTsgaiA8PSBpTWF4WTsgaisrKSB7CiAgICAgICAgICBjb25zdCBoZWlnaHQgPSBkYXRhW2ldW2pdOwoKICAgICAgICAgIGlmIChoZWlnaHQgPiBtYXgpIHsKICAgICAgICAgICAgbWF4ID0gaGVpZ2h0OwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgcmVzdWx0WzBdID0gdGhpcy5taW5WYWx1ZTsKICAgICAgcmVzdWx0WzFdID0gbWF4OwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIGluZGV4IG9mIGEgbG9jYWwgcG9zaXRpb24gb24gdGhlIGhlaWdodGZpZWxkLiBUaGUgaW5kZXhlcyBpbmRpY2F0ZSB0aGUgcmVjdGFuZ2xlcywgc28gaWYgeW91ciB0ZXJyYWluIGlzIG1hZGUgb2YgTiB4IE4gaGVpZ2h0IGRhdGEgcG9pbnRzLCB5b3Ugd2lsbCBoYXZlIHJlY3RhbmdsZSBpbmRleGVzIHJhbmdpbmcgZnJvbSAwIHRvIE4tMS4KICAgICAqIEBwYXJhbSByZXN1bHQgVHdvLWVsZW1lbnQgYXJyYXkKICAgICAqIEBwYXJhbSBjbGFtcCBJZiB0aGUgcG9zaXRpb24gc2hvdWxkIGJlIGNsYW1wZWQgdG8gdGhlIGhlaWdodGZpZWxkIGVkZ2UuCiAgICAgKi8KCgogICAgZ2V0SW5kZXhPZlBvc2l0aW9uKHgsIHksIHJlc3VsdCwgY2xhbXApIHsKICAgICAgLy8gR2V0IHRoZSBpbmRleCBvZiB0aGUgZGF0YSBwb2ludHMgdG8gdGVzdCBhZ2FpbnN0CiAgICAgIGNvbnN0IHcgPSB0aGlzLmVsZW1lbnRTaXplOwogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOwogICAgICBsZXQgeGkgPSBNYXRoLmZsb29yKHggLyB3KTsKICAgICAgbGV0IHlpID0gTWF0aC5mbG9vcih5IC8gdyk7CiAgICAgIHJlc3VsdFswXSA9IHhpOwogICAgICByZXN1bHRbMV0gPSB5aTsKCiAgICAgIGlmIChjbGFtcCkgewogICAgICAgIC8vIENsYW1wIGluZGV4IHRvIGVkZ2VzCiAgICAgICAgaWYgKHhpIDwgMCkgewogICAgICAgICAgeGkgPSAwOwogICAgICAgIH0KCiAgICAgICAgaWYgKHlpIDwgMCkgewogICAgICAgICAgeWkgPSAwOwogICAgICAgIH0KCiAgICAgICAgaWYgKHhpID49IGRhdGEubGVuZ3RoIC0gMSkgewogICAgICAgICAgeGkgPSBkYXRhLmxlbmd0aCAtIDE7CiAgICAgICAgfQoKICAgICAgICBpZiAoeWkgPj0gZGF0YVswXS5sZW5ndGggLSAxKSB7CiAgICAgICAgICB5aSA9IGRhdGFbMF0ubGVuZ3RoIC0gMTsKICAgICAgICB9CiAgICAgIH0gLy8gQmFpbCBvdXQgaWYgd2UgYXJlIG91dCBvZiB0aGUgdGVycmFpbgoKCiAgICAgIGlmICh4aSA8IDAgfHwgeWkgPCAwIHx8IHhpID49IGRhdGEubGVuZ3RoIC0gMSB8fCB5aSA+PSBkYXRhWzBdLmxlbmd0aCAtIDEpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGdldFRyaWFuZ2xlQXQoeCwgeSwgZWRnZUNsYW1wLCBhLCBiLCBjKSB7CiAgICAgIGNvbnN0IGlkeCA9IGdldEhlaWdodEF0X2lkeDsKICAgICAgdGhpcy5nZXRJbmRleE9mUG9zaXRpb24oeCwgeSwgaWR4LCBlZGdlQ2xhbXApOwogICAgICBsZXQgeGkgPSBpZHhbMF07CiAgICAgIGxldCB5aSA9IGlkeFsxXTsKICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTsKCiAgICAgIGlmIChlZGdlQ2xhbXApIHsKICAgICAgICB4aSA9IE1hdGgubWluKGRhdGEubGVuZ3RoIC0gMiwgTWF0aC5tYXgoMCwgeGkpKTsKICAgICAgICB5aSA9IE1hdGgubWluKGRhdGFbMF0ubGVuZ3RoIC0gMiwgTWF0aC5tYXgoMCwgeWkpKTsKICAgICAgfQoKICAgICAgY29uc3QgZWxlbWVudFNpemUgPSB0aGlzLmVsZW1lbnRTaXplOwogICAgICBjb25zdCBsb3dlckRpc3QyID0gKHggLyBlbGVtZW50U2l6ZSAtIHhpKSAqKiAyICsgKHkgLyBlbGVtZW50U2l6ZSAtIHlpKSAqKiAyOwogICAgICBjb25zdCB1cHBlckRpc3QyID0gKHggLyBlbGVtZW50U2l6ZSAtICh4aSArIDEpKSAqKiAyICsgKHkgLyBlbGVtZW50U2l6ZSAtICh5aSArIDEpKSAqKiAyOwogICAgICBjb25zdCB1cHBlciA9IGxvd2VyRGlzdDIgPiB1cHBlckRpc3QyOwogICAgICB0aGlzLmdldFRyaWFuZ2xlKHhpLCB5aSwgdXBwZXIsIGEsIGIsIGMpOwogICAgICByZXR1cm4gdXBwZXI7CiAgICB9CgogICAgZ2V0Tm9ybWFsQXQoeCwgeSwgZWRnZUNsYW1wLCByZXN1bHQpIHsKICAgICAgY29uc3QgYSA9IGdldE5vcm1hbEF0X2E7CiAgICAgIGNvbnN0IGIgPSBnZXROb3JtYWxBdF9iOwogICAgICBjb25zdCBjID0gZ2V0Tm9ybWFsQXRfYzsKICAgICAgY29uc3QgZTAgPSBnZXROb3JtYWxBdF9lMDsKICAgICAgY29uc3QgZTEgPSBnZXROb3JtYWxBdF9lMTsKICAgICAgdGhpcy5nZXRUcmlhbmdsZUF0KHgsIHksIGVkZ2VDbGFtcCwgYSwgYiwgYyk7CiAgICAgIGIudnN1YihhLCBlMCk7CiAgICAgIGMudnN1YihhLCBlMSk7CiAgICAgIGUwLmNyb3NzKGUxLCByZXN1bHQpOwogICAgICByZXN1bHQubm9ybWFsaXplKCk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbiBBQUJCIG9mIGEgc3F1YXJlIGluIHRoZSBoZWlnaHRmaWVsZAogICAgICogQHBhcmFtIHhpCiAgICAgKiBAcGFyYW0geWkKICAgICAqIEBwYXJhbSByZXN1bHQKICAgICAqLwoKCiAgICBnZXRBYWJiQXRJbmRleCh4aSwgeWksIF9yZWYpIHsKICAgICAgbGV0IHsKICAgICAgICBsb3dlckJvdW5kLAogICAgICAgIHVwcGVyQm91bmQKICAgICAgfSA9IF9yZWY7CiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7CiAgICAgIGNvbnN0IGVsZW1lbnRTaXplID0gdGhpcy5lbGVtZW50U2l6ZTsKICAgICAgbG93ZXJCb3VuZC5zZXQoeGkgKiBlbGVtZW50U2l6ZSwgeWkgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aV1beWldKTsKICAgICAgdXBwZXJCb3VuZC5zZXQoKHhpICsgMSkgKiBlbGVtZW50U2l6ZSwgKHlpICsgMSkgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aSArIDFdW3lpICsgMV0pOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIGhlaWdodCBpbiB0aGUgaGVpZ2h0ZmllbGQgYXQgYSBnaXZlbiBwb3NpdGlvbgogICAgICovCgoKICAgIGdldEhlaWdodEF0KHgsIHksIGVkZ2VDbGFtcCkgewogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOwogICAgICBjb25zdCBhID0gZ2V0SGVpZ2h0QXRfYTsKICAgICAgY29uc3QgYiA9IGdldEhlaWdodEF0X2I7CiAgICAgIGNvbnN0IGMgPSBnZXRIZWlnaHRBdF9jOwogICAgICBjb25zdCBpZHggPSBnZXRIZWlnaHRBdF9pZHg7CiAgICAgIHRoaXMuZ2V0SW5kZXhPZlBvc2l0aW9uKHgsIHksIGlkeCwgZWRnZUNsYW1wKTsKICAgICAgbGV0IHhpID0gaWR4WzBdOwogICAgICBsZXQgeWkgPSBpZHhbMV07CgogICAgICBpZiAoZWRnZUNsYW1wKSB7CiAgICAgICAgeGkgPSBNYXRoLm1pbihkYXRhLmxlbmd0aCAtIDIsIE1hdGgubWF4KDAsIHhpKSk7CiAgICAgICAgeWkgPSBNYXRoLm1pbihkYXRhWzBdLmxlbmd0aCAtIDIsIE1hdGgubWF4KDAsIHlpKSk7CiAgICAgIH0KCiAgICAgIGNvbnN0IHVwcGVyID0gdGhpcy5nZXRUcmlhbmdsZUF0KHgsIHksIGVkZ2VDbGFtcCwgYSwgYiwgYyk7CiAgICAgIGJhcnljZW50cmljV2VpZ2h0cyh4LCB5LCBhLngsIGEueSwgYi54LCBiLnksIGMueCwgYy55LCBnZXRIZWlnaHRBdF93ZWlnaHRzKTsKICAgICAgY29uc3QgdyA9IGdldEhlaWdodEF0X3dlaWdodHM7CgogICAgICBpZiAodXBwZXIpIHsKICAgICAgICAvLyBUb3AgdHJpYW5nbGUgdmVydHMKICAgICAgICByZXR1cm4gZGF0YVt4aSArIDFdW3lpICsgMV0gKiB3LnggKyBkYXRhW3hpXVt5aSArIDFdICogdy55ICsgZGF0YVt4aSArIDFdW3lpXSAqIHcuejsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBUb3AgdHJpYW5nbGUgdmVydHMKICAgICAgICByZXR1cm4gZGF0YVt4aV1beWldICogdy54ICsgZGF0YVt4aSArIDFdW3lpXSAqIHcueSArIGRhdGFbeGldW3lpICsgMV0gKiB3Lno7CiAgICAgIH0KICAgIH0KCiAgICBnZXRDYWNoZUNvbnZleFRyaWFuZ2xlUGlsbGFyS2V5KHhpLCB5aSwgZ2V0VXBwZXJUcmlhbmdsZSkgewogICAgICByZXR1cm4gYCR7eGl9XyR7eWl9XyR7Z2V0VXBwZXJUcmlhbmdsZSA/IDEgOiAwfWA7CiAgICB9CgogICAgZ2V0Q2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGksIHlpLCBnZXRVcHBlclRyaWFuZ2xlKSB7CiAgICAgIHJldHVybiB0aGlzLl9jYWNoZWRQaWxsYXJzW3RoaXMuZ2V0Q2FjaGVDb252ZXhUcmlhbmdsZVBpbGxhcktleSh4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUpXTsKICAgIH0KCiAgICBzZXRDYWNoZWRDb252ZXhUcmlhbmdsZVBpbGxhcih4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUsIGNvbnZleCwgb2Zmc2V0KSB7CiAgICAgIHRoaXMuX2NhY2hlZFBpbGxhcnNbdGhpcy5nZXRDYWNoZUNvbnZleFRyaWFuZ2xlUGlsbGFyS2V5KHhpLCB5aSwgZ2V0VXBwZXJUcmlhbmdsZSldID0gewogICAgICAgIGNvbnZleCwKICAgICAgICBvZmZzZXQKICAgICAgfTsKICAgIH0KCiAgICBjbGVhckNhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpLCB5aSwgZ2V0VXBwZXJUcmlhbmdsZSkgewogICAgICBkZWxldGUgdGhpcy5fY2FjaGVkUGlsbGFyc1t0aGlzLmdldENhY2hlQ29udmV4VHJpYW5nbGVQaWxsYXJLZXkoeGksIHlpLCBnZXRVcHBlclRyaWFuZ2xlKV07CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhIHRyaWFuZ2xlIGZyb20gdGhlIGhlaWdodGZpZWxkCiAgICAgKi8KCgogICAgZ2V0VHJpYW5nbGUoeGksIHlpLCB1cHBlciwgYSwgYiwgYykgewogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOwogICAgICBjb25zdCBlbGVtZW50U2l6ZSA9IHRoaXMuZWxlbWVudFNpemU7CgogICAgICBpZiAodXBwZXIpIHsKICAgICAgICAvLyBUb3AgdHJpYW5nbGUgdmVydHMKICAgICAgICBhLnNldCgoeGkgKyAxKSAqIGVsZW1lbnRTaXplLCAoeWkgKyAxKSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpICsgMV1beWkgKyAxXSk7CiAgICAgICAgYi5zZXQoeGkgKiBlbGVtZW50U2l6ZSwgKHlpICsgMSkgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aV1beWkgKyAxXSk7CiAgICAgICAgYy5zZXQoKHhpICsgMSkgKiBlbGVtZW50U2l6ZSwgeWkgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aSArIDFdW3lpXSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gVG9wIHRyaWFuZ2xlIHZlcnRzCiAgICAgICAgYS5zZXQoeGkgKiBlbGVtZW50U2l6ZSwgeWkgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aV1beWldKTsKICAgICAgICBiLnNldCgoeGkgKyAxKSAqIGVsZW1lbnRTaXplLCB5aSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpICsgMV1beWldKTsKICAgICAgICBjLnNldCh4aSAqIGVsZW1lbnRTaXplLCAoeWkgKyAxKSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpXVt5aSArIDFdKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBHZXQgYSB0cmlhbmdsZSBpbiB0aGUgdGVycmFpbiBpbiB0aGUgZm9ybSBvZiBhIHRyaWFuZ3VsYXIgY29udmV4IHNoYXBlLgogICAgICovCgoKICAgIGdldENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpLCB5aSwgZ2V0VXBwZXJUcmlhbmdsZSkgewogICAgICBsZXQgcmVzdWx0ID0gdGhpcy5waWxsYXJDb252ZXg7CiAgICAgIGxldCBvZmZzZXRSZXN1bHQgPSB0aGlzLnBpbGxhck9mZnNldDsKCiAgICAgIGlmICh0aGlzLmNhY2hlRW5hYmxlZCkgewogICAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmdldENhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpLCB5aSwgZ2V0VXBwZXJUcmlhbmdsZSk7CgogICAgICAgIGlmIChkYXRhKSB7CiAgICAgICAgICB0aGlzLnBpbGxhckNvbnZleCA9IGRhdGEuY29udmV4OwogICAgICAgICAgdGhpcy5waWxsYXJPZmZzZXQgPSBkYXRhLm9mZnNldDsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHJlc3VsdCA9IG5ldyBDb252ZXhQb2x5aGVkcm9uKCk7CiAgICAgICAgb2Zmc2V0UmVzdWx0ID0gbmV3IFZlYzMoKTsKICAgICAgICB0aGlzLnBpbGxhckNvbnZleCA9IHJlc3VsdDsKICAgICAgICB0aGlzLnBpbGxhck9mZnNldCA9IG9mZnNldFJlc3VsdDsKICAgICAgfQoKICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTsKICAgICAgY29uc3QgZWxlbWVudFNpemUgPSB0aGlzLmVsZW1lbnRTaXplOwogICAgICBjb25zdCBmYWNlcyA9IHJlc3VsdC5mYWNlczsgLy8gUmV1c2UgdmVydHMgaWYgcG9zc2libGUKCiAgICAgIHJlc3VsdC52ZXJ0aWNlcy5sZW5ndGggPSA2OwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA2OyBpKyspIHsKICAgICAgICBpZiAoIXJlc3VsdC52ZXJ0aWNlc1tpXSkgewogICAgICAgICAgcmVzdWx0LnZlcnRpY2VzW2ldID0gbmV3IFZlYzMoKTsKICAgICAgICB9CiAgICAgIH0gLy8gUmV1c2UgZmFjZXMgaWYgcG9zc2libGUKCgogICAgICBmYWNlcy5sZW5ndGggPSA1OwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA1OyBpKyspIHsKICAgICAgICBpZiAoIWZhY2VzW2ldKSB7CiAgICAgICAgICBmYWNlc1tpXSA9IFtdOwogICAgICAgIH0KICAgICAgfQoKICAgICAgY29uc3QgdmVydHMgPSByZXN1bHQudmVydGljZXM7CiAgICAgIGNvbnN0IGggPSAoTWF0aC5taW4oZGF0YVt4aV1beWldLCBkYXRhW3hpICsgMV1beWldLCBkYXRhW3hpXVt5aSArIDFdLCBkYXRhW3hpICsgMV1beWkgKyAxXSkgLSB0aGlzLm1pblZhbHVlKSAvIDIgKyB0aGlzLm1pblZhbHVlOwoKICAgICAgaWYgKCFnZXRVcHBlclRyaWFuZ2xlKSB7CiAgICAgICAgLy8gQ2VudGVyIG9mIHRoZSB0cmlhbmdsZSBwaWxsYXIgLSBhbGwgcG9seWdvbnMgYXJlIGdpdmVuIHJlbGF0aXZlIHRvIHRoaXMgb25lCiAgICAgICAgb2Zmc2V0UmVzdWx0LnNldCgoeGkgKyAwLjI1KSAqIGVsZW1lbnRTaXplLCAvLyBzb3J0IG9mIGNlbnRlciBvZiBhIHRyaWFuZ2xlCiAgICAgICAgKHlpICsgMC4yNSkgKiBlbGVtZW50U2l6ZSwgaCAvLyB2ZXJ0aWNhbCBjZW50ZXIKICAgICAgICApOyAvLyBUb3AgdHJpYW5nbGUgdmVydHMKCiAgICAgICAgdmVydHNbMF0uc2V0KC0wLjI1ICogZWxlbWVudFNpemUsIC0wLjI1ICogZWxlbWVudFNpemUsIGRhdGFbeGldW3lpXSAtIGgpOwogICAgICAgIHZlcnRzWzFdLnNldCgwLjc1ICogZWxlbWVudFNpemUsIC0wLjI1ICogZWxlbWVudFNpemUsIGRhdGFbeGkgKyAxXVt5aV0gLSBoKTsKICAgICAgICB2ZXJ0c1syXS5zZXQoLTAuMjUgKiBlbGVtZW50U2l6ZSwgMC43NSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpXVt5aSArIDFdIC0gaCk7IC8vIGJvdHRvbSB0cmlhbmdsZSB2ZXJ0cwoKICAgICAgICB2ZXJ0c1szXS5zZXQoLTAuMjUgKiBlbGVtZW50U2l6ZSwgLTAuMjUgKiBlbGVtZW50U2l6ZSwgLU1hdGguYWJzKGgpIC0gMSk7CiAgICAgICAgdmVydHNbNF0uc2V0KDAuNzUgKiBlbGVtZW50U2l6ZSwgLTAuMjUgKiBlbGVtZW50U2l6ZSwgLU1hdGguYWJzKGgpIC0gMSk7CiAgICAgICAgdmVydHNbNV0uc2V0KC0wLjI1ICogZWxlbWVudFNpemUsIDAuNzUgKiBlbGVtZW50U2l6ZSwgLU1hdGguYWJzKGgpIC0gMSk7IC8vIHRvcCB0cmlhbmdsZQoKICAgICAgICBmYWNlc1swXVswXSA9IDA7CiAgICAgICAgZmFjZXNbMF1bMV0gPSAxOwogICAgICAgIGZhY2VzWzBdWzJdID0gMjsgLy8gYm90dG9tIHRyaWFuZ2xlCgogICAgICAgIGZhY2VzWzFdWzBdID0gNTsKICAgICAgICBmYWNlc1sxXVsxXSA9IDQ7CiAgICAgICAgZmFjZXNbMV1bMl0gPSAzOyAvLyAteCBmYWNpbmcgcXVhZAoKICAgICAgICBmYWNlc1syXVswXSA9IDA7CiAgICAgICAgZmFjZXNbMl1bMV0gPSAyOwogICAgICAgIGZhY2VzWzJdWzJdID0gNTsKICAgICAgICBmYWNlc1syXVszXSA9IDM7IC8vIC15IGZhY2luZyBxdWFkCgogICAgICAgIGZhY2VzWzNdWzBdID0gMTsKICAgICAgICBmYWNlc1szXVsxXSA9IDA7CiAgICAgICAgZmFjZXNbM11bMl0gPSAzOwogICAgICAgIGZhY2VzWzNdWzNdID0gNDsgLy8gK3h5IGZhY2luZyBxdWFkCgogICAgICAgIGZhY2VzWzRdWzBdID0gNDsKICAgICAgICBmYWNlc1s0XVsxXSA9IDU7CiAgICAgICAgZmFjZXNbNF1bMl0gPSAyOwogICAgICAgIGZhY2VzWzRdWzNdID0gMTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBDZW50ZXIgb2YgdGhlIHRyaWFuZ2xlIHBpbGxhciAtIGFsbCBwb2x5Z29ucyBhcmUgZ2l2ZW4gcmVsYXRpdmUgdG8gdGhpcyBvbmUKICAgICAgICBvZmZzZXRSZXN1bHQuc2V0KCh4aSArIDAuNzUpICogZWxlbWVudFNpemUsIC8vIHNvcnQgb2YgY2VudGVyIG9mIGEgdHJpYW5nbGUKICAgICAgICAoeWkgKyAwLjc1KSAqIGVsZW1lbnRTaXplLCBoIC8vIHZlcnRpY2FsIGNlbnRlcgogICAgICAgICk7IC8vIFRvcCB0cmlhbmdsZSB2ZXJ0cwoKICAgICAgICB2ZXJ0c1swXS5zZXQoMC4yNSAqIGVsZW1lbnRTaXplLCAwLjI1ICogZWxlbWVudFNpemUsIGRhdGFbeGkgKyAxXVt5aSArIDFdIC0gaCk7CiAgICAgICAgdmVydHNbMV0uc2V0KC0wLjc1ICogZWxlbWVudFNpemUsIDAuMjUgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aV1beWkgKyAxXSAtIGgpOwogICAgICAgIHZlcnRzWzJdLnNldCgwLjI1ICogZWxlbWVudFNpemUsIC0wLjc1ICogZWxlbWVudFNpemUsIGRhdGFbeGkgKyAxXVt5aV0gLSBoKTsgLy8gYm90dG9tIHRyaWFuZ2xlIHZlcnRzCgogICAgICAgIHZlcnRzWzNdLnNldCgwLjI1ICogZWxlbWVudFNpemUsIDAuMjUgKiBlbGVtZW50U2l6ZSwgLU1hdGguYWJzKGgpIC0gMSk7CiAgICAgICAgdmVydHNbNF0uc2V0KC0wLjc1ICogZWxlbWVudFNpemUsIDAuMjUgKiBlbGVtZW50U2l6ZSwgLU1hdGguYWJzKGgpIC0gMSk7CiAgICAgICAgdmVydHNbNV0uc2V0KDAuMjUgKiBlbGVtZW50U2l6ZSwgLTAuNzUgKiBlbGVtZW50U2l6ZSwgLU1hdGguYWJzKGgpIC0gMSk7IC8vIFRvcCB0cmlhbmdsZQoKICAgICAgICBmYWNlc1swXVswXSA9IDA7CiAgICAgICAgZmFjZXNbMF1bMV0gPSAxOwogICAgICAgIGZhY2VzWzBdWzJdID0gMjsgLy8gYm90dG9tIHRyaWFuZ2xlCgogICAgICAgIGZhY2VzWzFdWzBdID0gNTsKICAgICAgICBmYWNlc1sxXVsxXSA9IDQ7CiAgICAgICAgZmFjZXNbMV1bMl0gPSAzOyAvLyAreCBmYWNpbmcgcXVhZAoKICAgICAgICBmYWNlc1syXVswXSA9IDI7CiAgICAgICAgZmFjZXNbMl1bMV0gPSA1OwogICAgICAgIGZhY2VzWzJdWzJdID0gMzsKICAgICAgICBmYWNlc1syXVszXSA9IDA7IC8vICt5IGZhY2luZyBxdWFkCgogICAgICAgIGZhY2VzWzNdWzBdID0gMzsKICAgICAgICBmYWNlc1szXVsxXSA9IDQ7CiAgICAgICAgZmFjZXNbM11bMl0gPSAxOwogICAgICAgIGZhY2VzWzNdWzNdID0gMDsgLy8gLXh5IGZhY2luZyBxdWFkCgogICAgICAgIGZhY2VzWzRdWzBdID0gMTsKICAgICAgICBmYWNlc1s0XVsxXSA9IDQ7CiAgICAgICAgZmFjZXNbNF1bMl0gPSA1OwogICAgICAgIGZhY2VzWzRdWzNdID0gMjsKICAgICAgfQoKICAgICAgcmVzdWx0LmNvbXB1dGVOb3JtYWxzKCk7CiAgICAgIHJlc3VsdC5jb21wdXRlRWRnZXMoKTsKICAgICAgcmVzdWx0LnVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCk7CiAgICAgIHRoaXMuc2V0Q2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGksIHlpLCBnZXRVcHBlclRyaWFuZ2xlLCByZXN1bHQsIG9mZnNldFJlc3VsdCk7CiAgICB9CgogICAgY2FsY3VsYXRlTG9jYWxJbmVydGlhKG1hc3MsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICB0YXJnZXQuc2V0KDAsIDAsIDApOwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQoKICAgIHZvbHVtZSgpIHsKICAgICAgcmV0dXJuICgvLyBUaGUgdGVycmFpbiBpcyBpbmZpbml0ZQogICAgICAgIE51bWJlci5NQVhfVkFMVUUKICAgICAgKTsKICAgIH0KCiAgICBjYWxjdWxhdGVXb3JsZEFBQkIocG9zLCBxdWF0LCBtaW4sIG1heCkgewogICAgICAvKiogQFRPRE8gZG8gaXQgcHJvcGVybHkgKi8KICAgICAgbWluLnNldCgtTnVtYmVyLk1BWF9WQUxVRSwgLU51bWJlci5NQVhfVkFMVUUsIC1OdW1iZXIuTUFYX1ZBTFVFKTsKICAgICAgbWF4LnNldChOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFKTsKICAgIH0KCiAgICB1cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpIHsKICAgICAgLy8gVXNlIHRoZSBib3VuZGluZyBib3ggb2YgdGhlIG1pbi9tYXggdmFsdWVzCiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7CiAgICAgIGNvbnN0IHMgPSB0aGlzLmVsZW1lbnRTaXplOwogICAgICB0aGlzLmJvdW5kaW5nU3BoZXJlUmFkaXVzID0gbmV3IFZlYzMoZGF0YS5sZW5ndGggKiBzLCBkYXRhWzBdLmxlbmd0aCAqIHMsIE1hdGgubWF4KE1hdGguYWJzKHRoaXMubWF4VmFsdWUpLCBNYXRoLmFicyh0aGlzLm1pblZhbHVlKSkpLmxlbmd0aCgpOwogICAgfQogICAgLyoqCiAgICAgKiBTZXRzIHRoZSBoZWlnaHQgdmFsdWVzIGZyb20gYW4gaW1hZ2UuIEN1cnJlbnRseSBvbmx5IHN1cHBvcnRlZCBpbiBicm93c2VyLgogICAgICovCgoKICAgIHNldEhlaWdodHNGcm9tSW1hZ2UoaW1hZ2UsIHNjYWxlKSB7CiAgICAgIGNvbnN0IHsKICAgICAgICB4LAogICAgICAgIHosCiAgICAgICAgeQogICAgICB9ID0gc2NhbGU7CiAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpOwogICAgICBjYW52YXMud2lkdGggPSBpbWFnZS53aWR0aDsKICAgICAgY2FudmFzLmhlaWdodCA9IGltYWdlLmhlaWdodDsKICAgICAgY29uc3QgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpOwogICAgICBjb250ZXh0LmRyYXdJbWFnZShpbWFnZSwgMCwgMCk7CiAgICAgIGNvbnN0IGltYWdlRGF0YSA9IGNvbnRleHQuZ2V0SW1hZ2VEYXRhKDAsIDAsIGltYWdlLndpZHRoLCBpbWFnZS5oZWlnaHQpOwogICAgICBjb25zdCBtYXRyaXggPSB0aGlzLmRhdGE7CiAgICAgIG1hdHJpeC5sZW5ndGggPSAwOwogICAgICB0aGlzLmVsZW1lbnRTaXplID0gTWF0aC5hYnMoeCkgLyBpbWFnZURhdGEud2lkdGg7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGltYWdlRGF0YS5oZWlnaHQ7IGkrKykgewogICAgICAgIGNvbnN0IHJvdyA9IFtdOwoKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGltYWdlRGF0YS53aWR0aDsgaisrKSB7CiAgICAgICAgICBjb25zdCBhID0gaW1hZ2VEYXRhLmRhdGFbKGkgKiBpbWFnZURhdGEuaGVpZ2h0ICsgaikgKiA0XTsKICAgICAgICAgIGNvbnN0IGIgPSBpbWFnZURhdGEuZGF0YVsoaSAqIGltYWdlRGF0YS5oZWlnaHQgKyBqKSAqIDQgKyAxXTsKICAgICAgICAgIGNvbnN0IGMgPSBpbWFnZURhdGEuZGF0YVsoaSAqIGltYWdlRGF0YS5oZWlnaHQgKyBqKSAqIDQgKyAyXTsKICAgICAgICAgIGNvbnN0IGhlaWdodCA9IChhICsgYiArIGMpIC8gNCAvIDI1NSAqIHo7CgogICAgICAgICAgaWYgKHggPCAwKSB7CiAgICAgICAgICAgIHJvdy5wdXNoKGhlaWdodCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByb3cudW5zaGlmdChoZWlnaHQpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKHkgPCAwKSB7CiAgICAgICAgICBtYXRyaXgudW5zaGlmdChyb3cpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBtYXRyaXgucHVzaChyb3cpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy51cGRhdGVNYXhWYWx1ZSgpOwogICAgICB0aGlzLnVwZGF0ZU1pblZhbHVlKCk7CiAgICAgIHRoaXMudXBkYXRlKCk7CiAgICB9CgogIH0KICBjb25zdCBnZXRIZWlnaHRBdF9pZHggPSBbXTsKICBjb25zdCBnZXRIZWlnaHRBdF93ZWlnaHRzID0gbmV3IFZlYzMoKTsKICBjb25zdCBnZXRIZWlnaHRBdF9hID0gbmV3IFZlYzMoKTsKICBjb25zdCBnZXRIZWlnaHRBdF9iID0gbmV3IFZlYzMoKTsKICBjb25zdCBnZXRIZWlnaHRBdF9jID0gbmV3IFZlYzMoKTsKICBjb25zdCBnZXROb3JtYWxBdF9hID0gbmV3IFZlYzMoKTsKICBjb25zdCBnZXROb3JtYWxBdF9iID0gbmV3IFZlYzMoKTsKICBjb25zdCBnZXROb3JtYWxBdF9jID0gbmV3IFZlYzMoKTsKICBjb25zdCBnZXROb3JtYWxBdF9lMCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0Tm9ybWFsQXRfZTEgPSBuZXcgVmVjMygpOyAvLyBmcm9tIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0JhcnljZW50cmljX2Nvb3JkaW5hdGVfc3lzdGVtCgogIGZ1bmN0aW9uIGJhcnljZW50cmljV2VpZ2h0cyh4LCB5LCBheCwgYXksIGJ4LCBieSwgY3gsIGN5LCByZXN1bHQpIHsKICAgIHJlc3VsdC54ID0gKChieSAtIGN5KSAqICh4IC0gY3gpICsgKGN4IC0gYngpICogKHkgLSBjeSkpIC8gKChieSAtIGN5KSAqIChheCAtIGN4KSArIChjeCAtIGJ4KSAqIChheSAtIGN5KSk7CiAgICByZXN1bHQueSA9ICgoY3kgLSBheSkgKiAoeCAtIGN4KSArIChheCAtIGN4KSAqICh5IC0gY3kpKSAvICgoYnkgLSBjeSkgKiAoYXggLSBjeCkgKyAoY3ggLSBieCkgKiAoYXkgLSBjeSkpOwogICAgcmVzdWx0LnogPSAxIC0gcmVzdWx0LnggLSByZXN1bHQueTsKICB9CgogIC8qKgogICAqIE9jdHJlZU5vZGUKICAgKi8KICBjbGFzcyBPY3RyZWVOb2RlIHsKICAgIC8qKiBUaGUgcm9vdCBub2RlICovCgogICAgLyoqIEJvdW5kYXJ5IG9mIHRoaXMgbm9kZSAqLwoKICAgIC8qKiBDb250YWluZWQgZGF0YSBhdCB0aGUgY3VycmVudCBub2RlIGxldmVsICovCgogICAgLyoqIENoaWxkcmVuIHRvIHRoaXMgbm9kZSAqLwogICAgY29uc3RydWN0b3Iob3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICB0aGlzLnJvb3QgPSBvcHRpb25zLnJvb3QgfHwgbnVsbDsKICAgICAgdGhpcy5hYWJiID0gb3B0aW9ucy5hYWJiID8gb3B0aW9ucy5hYWJiLmNsb25lKCkgOiBuZXcgQUFCQigpOwogICAgICB0aGlzLmRhdGEgPSBbXTsKICAgICAgdGhpcy5jaGlsZHJlbiA9IFtdOwogICAgfQogICAgLyoqCiAgICAgKiByZXNldAogICAgICovCgoKICAgIHJlc2V0KCkgewogICAgICB0aGlzLmNoaWxkcmVuLmxlbmd0aCA9IHRoaXMuZGF0YS5sZW5ndGggPSAwOwogICAgfQogICAgLyoqCiAgICAgKiBJbnNlcnQgZGF0YSBpbnRvIHRoaXMgbm9kZQogICAgICogQHJldHVybiBUcnVlIGlmIHN1Y2Nlc3NmdWwsIG90aGVyd2lzZSBmYWxzZQogICAgICovCgoKICAgIGluc2VydChhYWJiLCBlbGVtZW50RGF0YSwgbGV2ZWwpIHsKICAgICAgaWYgKGxldmVsID09PSB2b2lkIDApIHsKICAgICAgICBsZXZlbCA9IDA7CiAgICAgIH0KCiAgICAgIGNvbnN0IG5vZGVEYXRhID0gdGhpcy5kYXRhOyAvLyBJZ25vcmUgb2JqZWN0cyB0aGF0IGRvIG5vdCBiZWxvbmcgaW4gdGhpcyBub2RlCgogICAgICBpZiAoIXRoaXMuYWFiYi5jb250YWlucyhhYWJiKSkgewogICAgICAgIHJldHVybiBmYWxzZTsgLy8gb2JqZWN0IGNhbm5vdCBiZSBhZGRlZAogICAgICB9CgogICAgICBjb25zdCBjaGlsZHJlbiA9IHRoaXMuY2hpbGRyZW47CiAgICAgIGNvbnN0IG1heERlcHRoID0gdGhpcy5tYXhEZXB0aCB8fCB0aGlzLnJvb3QubWF4RGVwdGg7CgogICAgICBpZiAobGV2ZWwgPCBtYXhEZXB0aCkgewogICAgICAgIC8vIFN1YmRpdmlkZSBpZiB0aGVyZSBhcmUgbm8gY2hpbGRyZW4geWV0CiAgICAgICAgbGV0IHN1YmRpdmlkZWQgPSBmYWxzZTsKCiAgICAgICAgaWYgKCFjaGlsZHJlbi5sZW5ndGgpIHsKICAgICAgICAgIHRoaXMuc3ViZGl2aWRlKCk7CiAgICAgICAgICBzdWJkaXZpZGVkID0gdHJ1ZTsKICAgICAgICB9IC8vIGFkZCB0byB3aGljaGV2ZXIgbm9kZSB3aWxsIGFjY2VwdCBpdAoKCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IDg7IGkrKykgewogICAgICAgICAgaWYgKGNoaWxkcmVuW2ldLmluc2VydChhYWJiLCBlbGVtZW50RGF0YSwgbGV2ZWwgKyAxKSkgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmIChzdWJkaXZpZGVkKSB7CiAgICAgICAgICAvLyBObyBjaGlsZHJlbiBhY2NlcHRlZCEgTWlnaHQgYXMgd2VsbCBqdXN0IHJlbW92ZSBlbSBzaW5jZSB0aGV5IGNvbnRhaW4gbm9uZQogICAgICAgICAgY2hpbGRyZW4ubGVuZ3RoID0gMDsKICAgICAgICB9CiAgICAgIH0gLy8gVG9vIGRlZXAsIG9yIGNoaWxkcmVuIGRpZG50IHdhbnQgaXQuIGFkZCBpdCBpbiBjdXJyZW50IG5vZGUKCgogICAgICBub2RlRGF0YS5wdXNoKGVsZW1lbnREYXRhKTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAvKioKICAgICAqIENyZWF0ZSA4IGVxdWFsbHkgc2l6ZWQgY2hpbGRyZW4gbm9kZXMgYW5kIHB1dCB0aGVtIGluIHRoZSBgY2hpbGRyZW5gIGFycmF5LgogICAgICovCgoKICAgIHN1YmRpdmlkZSgpIHsKICAgICAgY29uc3QgYWFiYiA9IHRoaXMuYWFiYjsKICAgICAgY29uc3QgbCA9IGFhYmIubG93ZXJCb3VuZDsKICAgICAgY29uc3QgdSA9IGFhYmIudXBwZXJCb3VuZDsKICAgICAgY29uc3QgY2hpbGRyZW4gPSB0aGlzLmNoaWxkcmVuOwogICAgICBjaGlsZHJlbi5wdXNoKG5ldyBPY3RyZWVOb2RlKHsKICAgICAgICBhYWJiOiBuZXcgQUFCQih7CiAgICAgICAgICBsb3dlckJvdW5kOiBuZXcgVmVjMygwLCAwLCAwKQogICAgICAgIH0pCiAgICAgIH0pLCBuZXcgT2N0cmVlTm9kZSh7CiAgICAgICAgYWFiYjogbmV3IEFBQkIoewogICAgICAgICAgbG93ZXJCb3VuZDogbmV3IFZlYzMoMSwgMCwgMCkKICAgICAgICB9KQogICAgICB9KSwgbmV3IE9jdHJlZU5vZGUoewogICAgICAgIGFhYmI6IG5ldyBBQUJCKHsKICAgICAgICAgIGxvd2VyQm91bmQ6IG5ldyBWZWMzKDEsIDEsIDApCiAgICAgICAgfSkKICAgICAgfSksIG5ldyBPY3RyZWVOb2RlKHsKICAgICAgICBhYWJiOiBuZXcgQUFCQih7CiAgICAgICAgICBsb3dlckJvdW5kOiBuZXcgVmVjMygxLCAxLCAxKQogICAgICAgIH0pCiAgICAgIH0pLCBuZXcgT2N0cmVlTm9kZSh7CiAgICAgICAgYWFiYjogbmV3IEFBQkIoewogICAgICAgICAgbG93ZXJCb3VuZDogbmV3IFZlYzMoMCwgMSwgMSkKICAgICAgICB9KQogICAgICB9KSwgbmV3IE9jdHJlZU5vZGUoewogICAgICAgIGFhYmI6IG5ldyBBQUJCKHsKICAgICAgICAgIGxvd2VyQm91bmQ6IG5ldyBWZWMzKDAsIDAsIDEpCiAgICAgICAgfSkKICAgICAgfSksIG5ldyBPY3RyZWVOb2RlKHsKICAgICAgICBhYWJiOiBuZXcgQUFCQih7CiAgICAgICAgICBsb3dlckJvdW5kOiBuZXcgVmVjMygxLCAwLCAxKQogICAgICAgIH0pCiAgICAgIH0pLCBuZXcgT2N0cmVlTm9kZSh7CiAgICAgICAgYWFiYjogbmV3IEFBQkIoewogICAgICAgICAgbG93ZXJCb3VuZDogbmV3IFZlYzMoMCwgMSwgMCkKICAgICAgICB9KQogICAgICB9KSk7CiAgICAgIHUudnN1YihsLCBoYWxmRGlhZ29uYWwpOwogICAgICBoYWxmRGlhZ29uYWwuc2NhbGUoMC41LCBoYWxmRGlhZ29uYWwpOwogICAgICBjb25zdCByb290ID0gdGhpcy5yb290IHx8IHRoaXM7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gODsgaSsrKSB7CiAgICAgICAgY29uc3QgY2hpbGQgPSBjaGlsZHJlbltpXTsgLy8gU2V0IGN1cnJlbnQgbm9kZSBhcyByb290CgogICAgICAgIGNoaWxkLnJvb3QgPSByb290OyAvLyBDb21wdXRlIGJvdW5kcwoKICAgICAgICBjb25zdCBsb3dlckJvdW5kID0gY2hpbGQuYWFiYi5sb3dlckJvdW5kOwogICAgICAgIGxvd2VyQm91bmQueCAqPSBoYWxmRGlhZ29uYWwueDsKICAgICAgICBsb3dlckJvdW5kLnkgKj0gaGFsZkRpYWdvbmFsLnk7CiAgICAgICAgbG93ZXJCb3VuZC56ICo9IGhhbGZEaWFnb25hbC56OwogICAgICAgIGxvd2VyQm91bmQudmFkZChsLCBsb3dlckJvdW5kKTsgLy8gVXBwZXIgYm91bmQgaXMgYWx3YXlzIGxvd2VyIGJvdW5kICsgaGFsZkRpYWdvbmFsCgogICAgICAgIGxvd2VyQm91bmQudmFkZChoYWxmRGlhZ29uYWwsIGNoaWxkLmFhYmIudXBwZXJCb3VuZCk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogR2V0IGFsbCBkYXRhLCBwb3RlbnRpYWxseSB3aXRoaW4gYW4gQUFCQgogICAgICogQHJldHVybiBUaGUgInJlc3VsdCIgb2JqZWN0CiAgICAgKi8KCgogICAgYWFiYlF1ZXJ5KGFhYmIsIHJlc3VsdCkgewogICAgICB0aGlzLmRhdGE7IC8vIGFib3J0IGlmIHRoZSByYW5nZSBkb2VzIG5vdCBpbnRlcnNlY3QgdGhpcyBub2RlCiAgICAgIC8vIGlmICghdGhpcy5hYWJiLm92ZXJsYXBzKGFhYmIpKXsKICAgICAgLy8gICAgIHJldHVybiByZXN1bHQ7CiAgICAgIC8vIH0KICAgICAgLy8gQWRkIG9iamVjdHMgYXQgdGhpcyBsZXZlbAogICAgICAvLyBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShyZXN1bHQsIG5vZGVEYXRhKTsKICAgICAgLy8gQWRkIGNoaWxkIGRhdGEKICAgICAgLy8gQHRvZG8gdW53cmFwIHJlY3Vyc2lvbiBpbnRvIGEgcXVldWUgLyBsb29wLCB0aGF0J3MgZmFzdGVyIGluIEpTCgogICAgICB0aGlzLmNoaWxkcmVuOyAvLyBmb3IgKGxldCBpID0gMCwgTiA9IHRoaXMuY2hpbGRyZW4ubGVuZ3RoOyBpICE9PSBOOyBpKyspIHsKICAgICAgLy8gICAgIGNoaWxkcmVuW2ldLmFhYmJRdWVyeShhYWJiLCByZXN1bHQpOwogICAgICAvLyB9CgogICAgICBjb25zdCBxdWV1ZSA9IFt0aGlzXTsKCiAgICAgIHdoaWxlIChxdWV1ZS5sZW5ndGgpIHsKICAgICAgICBjb25zdCBub2RlID0gcXVldWUucG9wKCk7CgogICAgICAgIGlmIChub2RlLmFhYmIub3ZlcmxhcHMoYWFiYikpIHsKICAgICAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KHJlc3VsdCwgbm9kZS5kYXRhKTsKICAgICAgICB9CgogICAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KHF1ZXVlLCBub2RlLmNoaWxkcmVuKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICAgIC8qKgogICAgICogR2V0IGFsbCBkYXRhLCBwb3RlbnRpYWxseSBpbnRlcnNlY3RlZCBieSBhIHJheS4KICAgICAqIEByZXR1cm4gVGhlICJyZXN1bHQiIG9iamVjdAogICAgICovCgoKICAgIHJheVF1ZXJ5KHJheSwgdHJlZVRyYW5zZm9ybSwgcmVzdWx0KSB7CiAgICAgIC8vIFVzZSBhYWJiIHF1ZXJ5IGZvciBub3cuCgogICAgICAvKiogQHRvZG8gaW1wbGVtZW50IHJlYWwgcmF5IHF1ZXJ5IHdoaWNoIG5lZWRzIGxlc3MgbG9va3VwcyAqLwogICAgICByYXkuZ2V0QUFCQih0bXBBQUJCKTsKICAgICAgdG1wQUFCQi50b0xvY2FsRnJhbWUodHJlZVRyYW5zZm9ybSwgdG1wQUFCQik7CiAgICAgIHRoaXMuYWFiYlF1ZXJ5KHRtcEFBQkIsIHJlc3VsdCk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIHJlbW92ZUVtcHR5Tm9kZXMKICAgICAqLwoKCiAgICByZW1vdmVFbXB0eU5vZGVzKCkgewogICAgICBmb3IgKGxldCBpID0gdGhpcy5jaGlsZHJlbi5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewogICAgICAgIHRoaXMuY2hpbGRyZW5baV0ucmVtb3ZlRW1wdHlOb2RlcygpOwoKICAgICAgICBpZiAoIXRoaXMuY2hpbGRyZW5baV0uY2hpbGRyZW4ubGVuZ3RoICYmICF0aGlzLmNoaWxkcmVuW2ldLmRhdGEubGVuZ3RoKSB7CiAgICAgICAgICB0aGlzLmNoaWxkcmVuLnNwbGljZShpLCAxKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgfQogIC8qKgogICAqIE9jdHJlZQogICAqLwoKCiAgY2xhc3MgT2N0cmVlIGV4dGVuZHMgT2N0cmVlTm9kZSB7CiAgICAvKioKICAgICAqIE1heGltdW0gc3ViZGl2aXNpb24gZGVwdGgKICAgICAqIEBkZWZhdWx0IDgKICAgICAqLwoKICAgIC8qKgogICAgICogQHBhcmFtIGFhYmIgVGhlIHRvdGFsIEFBQkIgb2YgdGhlIHRyZWUKICAgICAqLwogICAgY29uc3RydWN0b3IoYWFiYiwgb3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBzdXBlcih7CiAgICAgICAgcm9vdDogbnVsbCwKICAgICAgICBhYWJiCiAgICAgIH0pOwogICAgICB0aGlzLm1heERlcHRoID0gdHlwZW9mIG9wdGlvbnMubWF4RGVwdGggIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5tYXhEZXB0aCA6IDg7CiAgICB9CgogIH0KICBjb25zdCBoYWxmRGlhZ29uYWwgPSBuZXcgVmVjMygpOwogIGNvbnN0IHRtcEFBQkIgPSBuZXcgQUFCQigpOwoKICAvKioKICAgKiBUcmltZXNoLgogICAqIEBleGFtcGxlCiAgICogICAgIC8vIEhvdyB0byBtYWtlIGEgbWVzaCB3aXRoIGEgc2luZ2xlIHRyaWFuZ2xlCiAgICogICAgIGNvbnN0IHZlcnRpY2VzID0gWwogICAqICAgICAgICAgMCwgMCwgMCwgLy8gdmVydGV4IDAKICAgKiAgICAgICAgIDEsIDAsIDAsIC8vIHZlcnRleCAxCiAgICogICAgICAgICAwLCAxLCAwICAvLyB2ZXJ0ZXggMgogICAqICAgICBdCiAgICogICAgIGNvbnN0IGluZGljZXMgPSBbCiAgICogICAgICAgICAwLCAxLCAyICAvLyB0cmlhbmdsZSAwCiAgICogICAgIF0KICAgKiAgICAgY29uc3QgdHJpbWVzaFNoYXBlID0gbmV3IENBTk5PTi5UcmltZXNoKHZlcnRpY2VzLCBpbmRpY2VzKQogICAqLwogIGNsYXNzIFRyaW1lc2ggZXh0ZW5kcyBTaGFwZSB7CiAgICAvKioKICAgICAqIHZlcnRpY2VzCiAgICAgKi8KCiAgICAvKioKICAgICAqIEFycmF5IG9mIGludGVnZXJzLCBpbmRpY2F0aW5nIHdoaWNoIHZlcnRpY2VzIGVhY2ggdHJpYW5nbGUgY29uc2lzdHMgb2YuIFRoZSBsZW5ndGggb2YgdGhpcyBhcnJheSBpcyB0aHVzIDMgdGltZXMgdGhlIG51bWJlciBvZiB0cmlhbmdsZXMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBub3JtYWxzIGRhdGEuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBsb2NhbCBBQUJCIG9mIHRoZSBtZXNoLgogICAgICovCgogICAgLyoqCiAgICAgKiBSZWZlcmVuY2VzIHRvIHZlcnRleCBwYWlycywgbWFraW5nIHVwIGFsbCB1bmlxdWUgZWRnZXMgaW4gdGhlIHRyaW1lc2guCiAgICAgKi8KCiAgICAvKioKICAgICAqIExvY2FsIHNjYWxpbmcgb2YgdGhlIG1lc2guIFVzZSAuc2V0U2NhbGUoKSB0byBzZXQgaXQuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBpbmRleGVkIHRyaWFuZ2xlcy4gVXNlIC51cGRhdGVUcmVlKCkgdG8gdXBkYXRlIGl0LgogICAgICovCiAgICBjb25zdHJ1Y3Rvcih2ZXJ0aWNlcywgaW5kaWNlcykgewogICAgICBzdXBlcih7CiAgICAgICAgdHlwZTogU2hhcGUudHlwZXMuVFJJTUVTSAogICAgICB9KTsKICAgICAgdGhpcy52ZXJ0aWNlcyA9IG5ldyBGbG9hdDMyQXJyYXkodmVydGljZXMpOwogICAgICB0aGlzLmluZGljZXMgPSBuZXcgSW50MTZBcnJheShpbmRpY2VzKTsKICAgICAgdGhpcy5ub3JtYWxzID0gbmV3IEZsb2F0MzJBcnJheShpbmRpY2VzLmxlbmd0aCk7CiAgICAgIHRoaXMuYWFiYiA9IG5ldyBBQUJCKCk7CiAgICAgIHRoaXMuZWRnZXMgPSBudWxsOwogICAgICB0aGlzLnNjYWxlID0gbmV3IFZlYzMoMSwgMSwgMSk7CiAgICAgIHRoaXMudHJlZSA9IG5ldyBPY3RyZWUoKTsKICAgICAgdGhpcy51cGRhdGVFZGdlcygpOwogICAgICB0aGlzLnVwZGF0ZU5vcm1hbHMoKTsKICAgICAgdGhpcy51cGRhdGVBQUJCKCk7CiAgICAgIHRoaXMudXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKTsKICAgICAgdGhpcy51cGRhdGVUcmVlKCk7CiAgICB9CiAgICAvKioKICAgICAqIHVwZGF0ZVRyZWUKICAgICAqLwoKCiAgICB1cGRhdGVUcmVlKCkgewogICAgICBjb25zdCB0cmVlID0gdGhpcy50cmVlOwogICAgICB0cmVlLnJlc2V0KCk7CiAgICAgIHRyZWUuYWFiYi5jb3B5KHRoaXMuYWFiYik7CiAgICAgIGNvbnN0IHNjYWxlID0gdGhpcy5zY2FsZTsgLy8gVGhlIGxvY2FsIG1lc2ggQUFCQiBpcyBzY2FsZWQsIGJ1dCB0aGUgb2N0cmVlIEFBQkIgc2hvdWxkIGJlIHVuc2NhbGVkCgogICAgICB0cmVlLmFhYmIubG93ZXJCb3VuZC54ICo9IDEgLyBzY2FsZS54OwogICAgICB0cmVlLmFhYmIubG93ZXJCb3VuZC55ICo9IDEgLyBzY2FsZS55OwogICAgICB0cmVlLmFhYmIubG93ZXJCb3VuZC56ICo9IDEgLyBzY2FsZS56OwogICAgICB0cmVlLmFhYmIudXBwZXJCb3VuZC54ICo9IDEgLyBzY2FsZS54OwogICAgICB0cmVlLmFhYmIudXBwZXJCb3VuZC55ICo9IDEgLyBzY2FsZS55OwogICAgICB0cmVlLmFhYmIudXBwZXJCb3VuZC56ICo9IDEgLyBzY2FsZS56OyAvLyBJbnNlcnQgYWxsIHRyaWFuZ2xlcwoKICAgICAgY29uc3QgdHJpYW5nbGVBQUJCID0gbmV3IEFBQkIoKTsKICAgICAgY29uc3QgYSA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IGIgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBjID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgcG9pbnRzID0gW2EsIGIsIGNdOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmluZGljZXMubGVuZ3RoIC8gMzsgaSsrKSB7CiAgICAgICAgLy90aGlzLmdldFRyaWFuZ2xlVmVydGljZXMoaSwgYSwgYiwgYyk7CiAgICAgICAgLy8gR2V0IHVuc2NhbGVkIHRyaWFuZ2xlIHZlcnRzCiAgICAgICAgY29uc3QgaTMgPSBpICogMzsKCiAgICAgICAgdGhpcy5fZ2V0VW5zY2FsZWRWZXJ0ZXgodGhpcy5pbmRpY2VzW2kzXSwgYSk7CgogICAgICAgIHRoaXMuX2dldFVuc2NhbGVkVmVydGV4KHRoaXMuaW5kaWNlc1tpMyArIDFdLCBiKTsKCiAgICAgICAgdGhpcy5fZ2V0VW5zY2FsZWRWZXJ0ZXgodGhpcy5pbmRpY2VzW2kzICsgMl0sIGMpOwoKICAgICAgICB0cmlhbmdsZUFBQkIuc2V0RnJvbVBvaW50cyhwb2ludHMpOwogICAgICAgIHRyZWUuaW5zZXJ0KHRyaWFuZ2xlQUFCQiwgaSk7CiAgICAgIH0KCiAgICAgIHRyZWUucmVtb3ZlRW1wdHlOb2RlcygpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdHJpYW5nbGVzIGluIGEgbG9jYWwgQUFCQiBmcm9tIHRoZSB0cmltZXNoLgogICAgICogQHBhcmFtIHJlc3VsdCBBbiBhcnJheSBvZiBpbnRlZ2VycywgcmVmZXJlbmNpbmcgdGhlIHF1ZXJpZWQgdHJpYW5nbGVzLgogICAgICovCgoKICAgIGdldFRyaWFuZ2xlc0luQUFCQihhYWJiLCByZXN1bHQpIHsKICAgICAgdW5zY2FsZWRBQUJCLmNvcHkoYWFiYik7IC8vIFNjYWxlIGl0IHRvIGxvY2FsCgogICAgICBjb25zdCBzY2FsZSA9IHRoaXMuc2NhbGU7CiAgICAgIGNvbnN0IGlzeCA9IHNjYWxlLng7CiAgICAgIGNvbnN0IGlzeSA9IHNjYWxlLnk7CiAgICAgIGNvbnN0IGlzeiA9IHNjYWxlLno7CiAgICAgIGNvbnN0IGwgPSB1bnNjYWxlZEFBQkIubG93ZXJCb3VuZDsKICAgICAgY29uc3QgdSA9IHVuc2NhbGVkQUFCQi51cHBlckJvdW5kOwogICAgICBsLnggLz0gaXN4OwogICAgICBsLnkgLz0gaXN5OwogICAgICBsLnogLz0gaXN6OwogICAgICB1LnggLz0gaXN4OwogICAgICB1LnkgLz0gaXN5OwogICAgICB1LnogLz0gaXN6OwogICAgICByZXR1cm4gdGhpcy50cmVlLmFhYmJRdWVyeSh1bnNjYWxlZEFBQkIsIHJlc3VsdCk7CiAgICB9CiAgICAvKioKICAgICAqIHNldFNjYWxlCiAgICAgKi8KCgogICAgc2V0U2NhbGUoc2NhbGUpIHsKICAgICAgY29uc3Qgd2FzVW5pZm9ybSA9IHRoaXMuc2NhbGUueCA9PT0gdGhpcy5zY2FsZS55ICYmIHRoaXMuc2NhbGUueSA9PT0gdGhpcy5zY2FsZS56OwogICAgICBjb25zdCBpc1VuaWZvcm0gPSBzY2FsZS54ID09PSBzY2FsZS55ICYmIHNjYWxlLnkgPT09IHNjYWxlLno7CgogICAgICBpZiAoISh3YXNVbmlmb3JtICYmIGlzVW5pZm9ybSkpIHsKICAgICAgICAvLyBOb24tdW5pZm9ybSBzY2FsaW5nLiBOZWVkIHRvIHVwZGF0ZSBub3JtYWxzLgogICAgICAgIHRoaXMudXBkYXRlTm9ybWFscygpOwogICAgICB9CgogICAgICB0aGlzLnNjYWxlLmNvcHkoc2NhbGUpOwogICAgICB0aGlzLnVwZGF0ZUFBQkIoKTsKICAgICAgdGhpcy51cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpOwogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlIHRoZSBub3JtYWxzIG9mIHRoZSBmYWNlcy4gV2lsbCBzYXZlIGluIHRoZSBgLm5vcm1hbHNgIGFycmF5LgogICAgICovCgoKICAgIHVwZGF0ZU5vcm1hbHMoKSB7CiAgICAgIGNvbnN0IG4gPSBjb21wdXRlTm9ybWFsc19uOyAvLyBHZW5lcmF0ZSBub3JtYWxzCgogICAgICBjb25zdCBub3JtYWxzID0gdGhpcy5ub3JtYWxzOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmluZGljZXMubGVuZ3RoIC8gMzsgaSsrKSB7CiAgICAgICAgY29uc3QgaTMgPSBpICogMzsKICAgICAgICBjb25zdCBhID0gdGhpcy5pbmRpY2VzW2kzXTsKICAgICAgICBjb25zdCBiID0gdGhpcy5pbmRpY2VzW2kzICsgMV07CiAgICAgICAgY29uc3QgYyA9IHRoaXMuaW5kaWNlc1tpMyArIDJdOwogICAgICAgIHRoaXMuZ2V0VmVydGV4KGEsIHZhKTsKICAgICAgICB0aGlzLmdldFZlcnRleChiLCB2Yik7CiAgICAgICAgdGhpcy5nZXRWZXJ0ZXgoYywgdmMpOwogICAgICAgIFRyaW1lc2guY29tcHV0ZU5vcm1hbCh2YiwgdmEsIHZjLCBuKTsKICAgICAgICBub3JtYWxzW2kzXSA9IG4ueDsKICAgICAgICBub3JtYWxzW2kzICsgMV0gPSBuLnk7CiAgICAgICAgbm9ybWFsc1tpMyArIDJdID0gbi56OwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIFVwZGF0ZSB0aGUgYC5lZGdlc2AgcHJvcGVydHkKICAgICAqLwoKCiAgICB1cGRhdGVFZGdlcygpIHsKICAgICAgY29uc3QgZWRnZXMgPSB7fTsKCiAgICAgIGNvbnN0IGFkZCA9IChhLCBiKSA9PiB7CiAgICAgICAgY29uc3Qga2V5ID0gYSA8IGIgPyBgJHthfV8ke2J9YCA6IGAke2J9XyR7YX1gOwogICAgICAgIGVkZ2VzW2tleV0gPSB0cnVlOwogICAgICB9OwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmluZGljZXMubGVuZ3RoIC8gMzsgaSsrKSB7CiAgICAgICAgY29uc3QgaTMgPSBpICogMzsKICAgICAgICBjb25zdCBhID0gdGhpcy5pbmRpY2VzW2kzXTsKICAgICAgICBjb25zdCBiID0gdGhpcy5pbmRpY2VzW2kzICsgMV07CiAgICAgICAgY29uc3QgYyA9IHRoaXMuaW5kaWNlc1tpMyArIDJdOwogICAgICAgIGFkZChhLCBiKTsKICAgICAgICBhZGQoYiwgYyk7CiAgICAgICAgYWRkKGMsIGEpOwogICAgICB9CgogICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoZWRnZXMpOwogICAgICB0aGlzLmVkZ2VzID0gbmV3IEludDE2QXJyYXkoa2V5cy5sZW5ndGggKiAyKTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykgewogICAgICAgIGNvbnN0IGluZGljZXMgPSBrZXlzW2ldLnNwbGl0KCdfJyk7CiAgICAgICAgdGhpcy5lZGdlc1syICogaV0gPSBwYXJzZUludChpbmRpY2VzWzBdLCAxMCk7CiAgICAgICAgdGhpcy5lZGdlc1syICogaSArIDFdID0gcGFyc2VJbnQoaW5kaWNlc1sxXSwgMTApOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbiBlZGdlIHZlcnRleAogICAgICogQHBhcmFtIGZpcnN0T3JTZWNvbmQgMCBvciAxLCBkZXBlbmRpbmcgb24gd2hpY2ggb25lIG9mIHRoZSB2ZXJ0aWNlcyB5b3UgbmVlZC4KICAgICAqIEBwYXJhbSB2ZXJ0ZXhTdG9yZSBXaGVyZSB0byBzdG9yZSB0aGUgcmVzdWx0CiAgICAgKi8KCgogICAgZ2V0RWRnZVZlcnRleChlZGdlSW5kZXgsIGZpcnN0T3JTZWNvbmQsIHZlcnRleFN0b3JlKSB7CiAgICAgIGNvbnN0IHZlcnRleEluZGV4ID0gdGhpcy5lZGdlc1tlZGdlSW5kZXggKiAyICsgKGZpcnN0T3JTZWNvbmQgPyAxIDogMCldOwogICAgICB0aGlzLmdldFZlcnRleCh2ZXJ0ZXhJbmRleCwgdmVydGV4U3RvcmUpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgYSB2ZWN0b3IgYWxvbmcgYW4gZWRnZS4KICAgICAqLwoKCiAgICBnZXRFZGdlVmVjdG9yKGVkZ2VJbmRleCwgdmVjdG9yU3RvcmUpIHsKICAgICAgY29uc3QgdmEgPSBnZXRFZGdlVmVjdG9yX3ZhOwogICAgICBjb25zdCB2YiA9IGdldEVkZ2VWZWN0b3JfdmI7CiAgICAgIHRoaXMuZ2V0RWRnZVZlcnRleChlZGdlSW5kZXgsIDAsIHZhKTsKICAgICAgdGhpcy5nZXRFZGdlVmVydGV4KGVkZ2VJbmRleCwgMSwgdmIpOwogICAgICB2Yi52c3ViKHZhLCB2ZWN0b3JTdG9yZSk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBmYWNlIG5vcm1hbCBnaXZlbiAzIHZlcnRpY2VzCiAgICAgKi8KCgogICAgc3RhdGljIGNvbXB1dGVOb3JtYWwodmEsIHZiLCB2YywgdGFyZ2V0KSB7CiAgICAgIHZiLnZzdWIodmEsIGFiKTsKICAgICAgdmMudnN1Yih2YiwgY2IpOwogICAgICBjYi5jcm9zcyhhYiwgdGFyZ2V0KTsKCiAgICAgIGlmICghdGFyZ2V0LmlzWmVybygpKSB7CiAgICAgICAgdGFyZ2V0Lm5vcm1hbGl6ZSgpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEdldCB2ZXJ0ZXggaS4KICAgICAqIEByZXR1cm4gVGhlICJvdXQiIHZlY3RvciBvYmplY3QKICAgICAqLwoKCiAgICBnZXRWZXJ0ZXgoaSwgb3V0KSB7CiAgICAgIGNvbnN0IHNjYWxlID0gdGhpcy5zY2FsZTsKCiAgICAgIHRoaXMuX2dldFVuc2NhbGVkVmVydGV4KGksIG91dCk7CgogICAgICBvdXQueCAqPSBzY2FsZS54OwogICAgICBvdXQueSAqPSBzY2FsZS55OwogICAgICBvdXQueiAqPSBzY2FsZS56OwogICAgICByZXR1cm4gb3V0OwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgcmF3IHZlcnRleCBpCiAgICAgKiBAcmV0dXJuIFRoZSAib3V0IiB2ZWN0b3Igb2JqZWN0CiAgICAgKi8KCgogICAgX2dldFVuc2NhbGVkVmVydGV4KGksIG91dCkgewogICAgICBjb25zdCBpMyA9IGkgKiAzOwogICAgICBjb25zdCB2ZXJ0aWNlcyA9IHRoaXMudmVydGljZXM7CiAgICAgIHJldHVybiBvdXQuc2V0KHZlcnRpY2VzW2kzXSwgdmVydGljZXNbaTMgKyAxXSwgdmVydGljZXNbaTMgKyAyXSk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhIHZlcnRleCBmcm9tIHRoZSB0cmltZXNoLHRyYW5zZm9ybWVkIGJ5IHRoZSBnaXZlbiBwb3NpdGlvbiBhbmQgcXVhdGVybmlvbi4KICAgICAqIEByZXR1cm4gVGhlICJvdXQiIHZlY3RvciBvYmplY3QKICAgICAqLwoKCiAgICBnZXRXb3JsZFZlcnRleChpLCBwb3MsIHF1YXQsIG91dCkgewogICAgICB0aGlzLmdldFZlcnRleChpLCBvdXQpOwogICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUocG9zLCBxdWF0LCBvdXQsIG91dCk7CiAgICAgIHJldHVybiBvdXQ7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgdGhyZWUgdmVydGljZXMgZm9yIHRyaWFuZ2xlIGkuCiAgICAgKi8KCgogICAgZ2V0VHJpYW5nbGVWZXJ0aWNlcyhpLCBhLCBiLCBjKSB7CiAgICAgIGNvbnN0IGkzID0gaSAqIDM7CiAgICAgIHRoaXMuZ2V0VmVydGV4KHRoaXMuaW5kaWNlc1tpM10sIGEpOwogICAgICB0aGlzLmdldFZlcnRleCh0aGlzLmluZGljZXNbaTMgKyAxXSwgYik7CiAgICAgIHRoaXMuZ2V0VmVydGV4KHRoaXMuaW5kaWNlc1tpMyArIDJdLCBjKTsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZSB0aGUgbm9ybWFsIG9mIHRyaWFuZ2xlIGkuCiAgICAgKiBAcmV0dXJuIFRoZSAidGFyZ2V0IiB2ZWN0b3Igb2JqZWN0CiAgICAgKi8KCgogICAgZ2V0Tm9ybWFsKGksIHRhcmdldCkgewogICAgICBjb25zdCBpMyA9IGkgKiAzOwogICAgICByZXR1cm4gdGFyZ2V0LnNldCh0aGlzLm5vcm1hbHNbaTNdLCB0aGlzLm5vcm1hbHNbaTMgKyAxXSwgdGhpcy5ub3JtYWxzW2kzICsgMl0pOwogICAgfQogICAgLyoqCiAgICAgKiBAcmV0dXJuIFRoZSAidGFyZ2V0IiB2ZWN0b3Igb2JqZWN0CiAgICAgKi8KCgogICAgY2FsY3VsYXRlTG9jYWxJbmVydGlhKG1hc3MsIHRhcmdldCkgewogICAgICAvLyBBcHByb3hpbWF0ZSB3aXRoIGJveCBpbmVydGlhCiAgICAgIC8vIEV4YWN0IGluZXJ0aWEgY2FsY3VsYXRpb24gaXMgb3ZlcmtpbGwsIGJ1dCBzZWUgaHR0cDovL2dlb21ldHJpY3Rvb2xzLmNvbS9Eb2N1bWVudGF0aW9uL1BvbHloZWRyYWxNYXNzUHJvcGVydGllcy5wZGYgZm9yIHRoZSBjb3JyZWN0IHdheSB0byBkbyBpdAogICAgICB0aGlzLmNvbXB1dGVMb2NhbEFBQkIoY2xpX2FhYmIpOwogICAgICBjb25zdCB4ID0gY2xpX2FhYmIudXBwZXJCb3VuZC54IC0gY2xpX2FhYmIubG93ZXJCb3VuZC54OwogICAgICBjb25zdCB5ID0gY2xpX2FhYmIudXBwZXJCb3VuZC55IC0gY2xpX2FhYmIubG93ZXJCb3VuZC55OwogICAgICBjb25zdCB6ID0gY2xpX2FhYmIudXBwZXJCb3VuZC56IC0gY2xpX2FhYmIubG93ZXJCb3VuZC56OwogICAgICByZXR1cm4gdGFyZ2V0LnNldCgxLjAgLyAxMi4wICogbWFzcyAqICgyICogeSAqIDIgKiB5ICsgMiAqIHogKiAyICogeiksIDEuMCAvIDEyLjAgKiBtYXNzICogKDIgKiB4ICogMiAqIHggKyAyICogeiAqIDIgKiB6KSwgMS4wIC8gMTIuMCAqIG1hc3MgKiAoMiAqIHkgKiAyICogeSArIDIgKiB4ICogMiAqIHgpKTsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZSB0aGUgbG9jYWwgQUFCQiBmb3IgdGhlIHRyaW1lc2gKICAgICAqLwoKCiAgICBjb21wdXRlTG9jYWxBQUJCKGFhYmIpIHsKICAgICAgY29uc3QgbCA9IGFhYmIubG93ZXJCb3VuZDsKICAgICAgY29uc3QgdSA9IGFhYmIudXBwZXJCb3VuZDsKICAgICAgY29uc3QgbiA9IHRoaXMudmVydGljZXMubGVuZ3RoOwogICAgICB0aGlzLnZlcnRpY2VzOwogICAgICBjb25zdCB2ID0gY29tcHV0ZUxvY2FsQUFCQl93b3JsZFZlcnQ7CiAgICAgIHRoaXMuZ2V0VmVydGV4KDAsIHYpOwogICAgICBsLmNvcHkodik7CiAgICAgIHUuY29weSh2KTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBuOyBpKyspIHsKICAgICAgICB0aGlzLmdldFZlcnRleChpLCB2KTsKCiAgICAgICAgaWYgKHYueCA8IGwueCkgewogICAgICAgICAgbC54ID0gdi54OwogICAgICAgIH0gZWxzZSBpZiAodi54ID4gdS54KSB7CiAgICAgICAgICB1LnggPSB2Lng7CiAgICAgICAgfQoKICAgICAgICBpZiAodi55IDwgbC55KSB7CiAgICAgICAgICBsLnkgPSB2Lnk7CiAgICAgICAgfSBlbHNlIGlmICh2LnkgPiB1LnkpIHsKICAgICAgICAgIHUueSA9IHYueTsKICAgICAgICB9CgogICAgICAgIGlmICh2LnogPCBsLnopIHsKICAgICAgICAgIGwueiA9IHYuejsKICAgICAgICB9IGVsc2UgaWYgKHYueiA+IHUueikgewogICAgICAgICAgdS56ID0gdi56OwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBVcGRhdGUgdGhlIGAuYWFiYmAgcHJvcGVydHkKICAgICAqLwoKCiAgICB1cGRhdGVBQUJCKCkgewogICAgICB0aGlzLmNvbXB1dGVMb2NhbEFBQkIodGhpcy5hYWJiKTsKICAgIH0KICAgIC8qKgogICAgICogV2lsbCB1cGRhdGUgdGhlIGAuYm91bmRpbmdTcGhlcmVSYWRpdXNgIHByb3BlcnR5CiAgICAgKi8KCgogICAgdXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKSB7CiAgICAgIC8vIEFzc3VtZSBwb2ludHMgYXJlIGRpc3RyaWJ1dGVkIHdpdGggbG9jYWwgKDAsMCwwKSBhcyBjZW50ZXIKICAgICAgbGV0IG1heDIgPSAwOwogICAgICBjb25zdCB2ZXJ0aWNlcyA9IHRoaXMudmVydGljZXM7CiAgICAgIGNvbnN0IHYgPSBuZXcgVmVjMygpOwoKICAgICAgZm9yIChsZXQgaSA9IDAsIE4gPSB2ZXJ0aWNlcy5sZW5ndGggLyAzOyBpICE9PSBOOyBpKyspIHsKICAgICAgICB0aGlzLmdldFZlcnRleChpLCB2KTsKICAgICAgICBjb25zdCBub3JtMiA9IHYubGVuZ3RoU3F1YXJlZCgpOwoKICAgICAgICBpZiAobm9ybTIgPiBtYXgyKSB7CiAgICAgICAgICBtYXgyID0gbm9ybTI7CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLmJvdW5kaW5nU3BoZXJlUmFkaXVzID0gTWF0aC5zcXJ0KG1heDIpOwogICAgfQogICAgLyoqCiAgICAgKiBjYWxjdWxhdGVXb3JsZEFBQkIKICAgICAqLwoKCiAgICBjYWxjdWxhdGVXb3JsZEFBQkIocG9zLCBxdWF0LCBtaW4sIG1heCkgewogICAgICAvKgogICAgICAgICAgY29uc3QgbiA9IHRoaXMudmVydGljZXMubGVuZ3RoIC8gMywKICAgICAgICAgICAgICB2ZXJ0cyA9IHRoaXMudmVydGljZXM7CiAgICAgICAgICBjb25zdCBtaW54LG1pbnksbWlueixtYXh4LG1heHksbWF4ejsKICAgICAgICAgICBjb25zdCB2ID0gdGVtcFdvcmxkVmVydGV4OwogICAgICAgICAgZm9yKGxldCBpPTA7IGk8bjsgaSsrKXsKICAgICAgICAgICAgICB0aGlzLmdldFZlcnRleChpLCB2KTsKICAgICAgICAgICAgICBxdWF0LnZtdWx0KHYsIHYpOwogICAgICAgICAgICAgIHBvcy52YWRkKHYsIHYpOwogICAgICAgICAgICAgIGlmICh2LnggPCBtaW54IHx8IG1pbng9PT11bmRlZmluZWQpewogICAgICAgICAgICAgICAgICBtaW54ID0gdi54OwogICAgICAgICAgICAgIH0gZWxzZSBpZih2LnggPiBtYXh4IHx8IG1heHg9PT11bmRlZmluZWQpewogICAgICAgICAgICAgICAgICBtYXh4ID0gdi54OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgaWYgKHYueSA8IG1pbnkgfHwgbWlueT09PXVuZGVmaW5lZCl7CiAgICAgICAgICAgICAgICAgIG1pbnkgPSB2Lnk7CiAgICAgICAgICAgICAgfSBlbHNlIGlmKHYueSA+IG1heHkgfHwgbWF4eT09PXVuZGVmaW5lZCl7CiAgICAgICAgICAgICAgICAgIG1heHkgPSB2Lnk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICBpZiAodi56IDwgbWlueiB8fCBtaW56PT09dW5kZWZpbmVkKXsKICAgICAgICAgICAgICAgICAgbWlueiA9IHYuejsKICAgICAgICAgICAgICB9IGVsc2UgaWYodi56ID4gbWF4eiB8fCBtYXh6PT09dW5kZWZpbmVkKXsKICAgICAgICAgICAgICAgICAgbWF4eiA9IHYuejsKICAgICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBtaW4uc2V0KG1pbngsbWlueSxtaW56KTsKICAgICAgICAgIG1heC5zZXQobWF4eCxtYXh5LG1heHopOwogICAgICAgICAgKi8KICAgICAgLy8gRmFzdGVyIGFwcHJveGltYXRpb24gdXNpbmcgbG9jYWwgQUFCQgogICAgICBjb25zdCBmcmFtZSA9IGNhbGN1bGF0ZVdvcmxkQUFCQl9mcmFtZTsKICAgICAgY29uc3QgcmVzdWx0ID0gY2FsY3VsYXRlV29ybGRBQUJCX2FhYmI7CiAgICAgIGZyYW1lLnBvc2l0aW9uID0gcG9zOwogICAgICBmcmFtZS5xdWF0ZXJuaW9uID0gcXVhdDsKICAgICAgdGhpcy5hYWJiLnRvV29ybGRGcmFtZShmcmFtZSwgcmVzdWx0KTsKICAgICAgbWluLmNvcHkocmVzdWx0Lmxvd2VyQm91bmQpOwogICAgICBtYXguY29weShyZXN1bHQudXBwZXJCb3VuZCk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhcHByb3hpbWF0ZSB2b2x1bWUKICAgICAqLwoKCiAgICB2b2x1bWUoKSB7CiAgICAgIHJldHVybiA0LjAgKiBNYXRoLlBJICogdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyAvIDMuMDsKICAgIH0KICAgIC8qKgogICAgICogQ3JlYXRlIGEgVHJpbWVzaCBpbnN0YW5jZSwgc2hhcGVkIGFzIGEgdG9ydXMuCiAgICAgKi8KCgogICAgc3RhdGljIGNyZWF0ZVRvcnVzKHJhZGl1cywgdHViZSwgcmFkaWFsU2VnbWVudHMsIHR1YnVsYXJTZWdtZW50cywgYXJjKSB7CiAgICAgIGlmIChyYWRpdXMgPT09IHZvaWQgMCkgewogICAgICAgIHJhZGl1cyA9IDE7CiAgICAgIH0KCiAgICAgIGlmICh0dWJlID09PSB2b2lkIDApIHsKICAgICAgICB0dWJlID0gMC41OwogICAgICB9CgogICAgICBpZiAocmFkaWFsU2VnbWVudHMgPT09IHZvaWQgMCkgewogICAgICAgIHJhZGlhbFNlZ21lbnRzID0gODsKICAgICAgfQoKICAgICAgaWYgKHR1YnVsYXJTZWdtZW50cyA9PT0gdm9pZCAwKSB7CiAgICAgICAgdHVidWxhclNlZ21lbnRzID0gNjsKICAgICAgfQoKICAgICAgaWYgKGFyYyA9PT0gdm9pZCAwKSB7CiAgICAgICAgYXJjID0gTWF0aC5QSSAqIDI7CiAgICAgIH0KCiAgICAgIGNvbnN0IHZlcnRpY2VzID0gW107CiAgICAgIGNvbnN0IGluZGljZXMgPSBbXTsKCiAgICAgIGZvciAobGV0IGogPSAwOyBqIDw9IHJhZGlhbFNlZ21lbnRzOyBqKyspIHsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8PSB0dWJ1bGFyU2VnbWVudHM7IGkrKykgewogICAgICAgICAgY29uc3QgdSA9IGkgLyB0dWJ1bGFyU2VnbWVudHMgKiBhcmM7CiAgICAgICAgICBjb25zdCB2ID0gaiAvIHJhZGlhbFNlZ21lbnRzICogTWF0aC5QSSAqIDI7CiAgICAgICAgICBjb25zdCB4ID0gKHJhZGl1cyArIHR1YmUgKiBNYXRoLmNvcyh2KSkgKiBNYXRoLmNvcyh1KTsKICAgICAgICAgIGNvbnN0IHkgPSAocmFkaXVzICsgdHViZSAqIE1hdGguY29zKHYpKSAqIE1hdGguc2luKHUpOwogICAgICAgICAgY29uc3QgeiA9IHR1YmUgKiBNYXRoLnNpbih2KTsKICAgICAgICAgIHZlcnRpY2VzLnB1c2goeCwgeSwgeik7CiAgICAgICAgfQogICAgICB9CgogICAgICBmb3IgKGxldCBqID0gMTsgaiA8PSByYWRpYWxTZWdtZW50czsgaisrKSB7CiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gdHVidWxhclNlZ21lbnRzOyBpKyspIHsKICAgICAgICAgIGNvbnN0IGEgPSAodHVidWxhclNlZ21lbnRzICsgMSkgKiBqICsgaSAtIDE7CiAgICAgICAgICBjb25zdCBiID0gKHR1YnVsYXJTZWdtZW50cyArIDEpICogKGogLSAxKSArIGkgLSAxOwogICAgICAgICAgY29uc3QgYyA9ICh0dWJ1bGFyU2VnbWVudHMgKyAxKSAqIChqIC0gMSkgKyBpOwogICAgICAgICAgY29uc3QgZCA9ICh0dWJ1bGFyU2VnbWVudHMgKyAxKSAqIGogKyBpOwogICAgICAgICAgaW5kaWNlcy5wdXNoKGEsIGIsIGQpOwogICAgICAgICAgaW5kaWNlcy5wdXNoKGIsIGMsIGQpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIG5ldyBUcmltZXNoKHZlcnRpY2VzLCBpbmRpY2VzKTsKICAgIH0KCiAgfQogIGNvbnN0IGNvbXB1dGVOb3JtYWxzX24gPSBuZXcgVmVjMygpOwogIGNvbnN0IHVuc2NhbGVkQUFCQiA9IG5ldyBBQUJCKCk7CiAgY29uc3QgZ2V0RWRnZVZlY3Rvcl92YSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0RWRnZVZlY3Rvcl92YiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgY2IgPSBuZXcgVmVjMygpOwogIGNvbnN0IGFiID0gbmV3IFZlYzMoKTsKICBjb25zdCB2YSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgdmIgPSBuZXcgVmVjMygpOwogIGNvbnN0IHZjID0gbmV3IFZlYzMoKTsKICBjb25zdCBjbGlfYWFiYiA9IG5ldyBBQUJCKCk7CiAgY29uc3QgY29tcHV0ZUxvY2FsQUFCQl93b3JsZFZlcnQgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNhbGN1bGF0ZVdvcmxkQUFCQl9mcmFtZSA9IG5ldyBUcmFuc2Zvcm0oKTsKICBjb25zdCBjYWxjdWxhdGVXb3JsZEFBQkJfYWFiYiA9IG5ldyBBQUJCKCk7CgogIC8qKgogICAqIENvbnN0cmFpbnQgZXF1YXRpb24gc29sdmVyIGJhc2UgY2xhc3MuCiAgICovCiAgY2xhc3MgU29sdmVyIHsKICAgIC8qKgogICAgICogQWxsIGVxdWF0aW9ucyB0byBiZSBzb2x2ZWQKICAgICAqLwoKICAgIC8qKgogICAgICogQHRvZG8gcmVtb3ZlIHVzZWxlc3MgY29uc3RydWN0b3IKICAgICAqLwogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHRoaXMuZXF1YXRpb25zID0gW107CiAgICB9CiAgICAvKioKICAgICAqIFNob3VsZCBiZSBpbXBsZW1lbnRlZCBpbiBzdWJjbGFzc2VzIQogICAgICogQHRvZG8gdXNlIGFic3RyYWN0CiAgICAgKiBAcmV0dXJuIG51bWJlciBvZiBpdGVyYXRpb25zIHBlcmZvcm1lZAogICAgICovCgoKICAgIHNvbHZlKGR0LCB3b3JsZCkgewogICAgICByZXR1cm4gKC8vIFNob3VsZCByZXR1cm4gdGhlIG51bWJlciBvZiBpdGVyYXRpb25zIGRvbmUhCiAgICAgICAgMAogICAgICApOwogICAgfQogICAgLyoqCiAgICAgKiBBZGQgYW4gZXF1YXRpb24KICAgICAqLwoKCiAgICBhZGRFcXVhdGlvbihlcSkgewogICAgICBpZiAoZXEuZW5hYmxlZCAmJiAhZXEuYmkuaXNUcmlnZ2VyICYmICFlcS5iai5pc1RyaWdnZXIpIHsKICAgICAgICB0aGlzLmVxdWF0aW9ucy5wdXNoKGVxKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBSZW1vdmUgYW4gZXF1YXRpb24KICAgICAqLwoKCiAgICByZW1vdmVFcXVhdGlvbihlcSkgewogICAgICBjb25zdCBlcXMgPSB0aGlzLmVxdWF0aW9uczsKICAgICAgY29uc3QgaSA9IGVxcy5pbmRleE9mKGVxKTsKCiAgICAgIGlmIChpICE9PSAtMSkgewogICAgICAgIGVxcy5zcGxpY2UoaSwgMSk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQWRkIGFsbCBlcXVhdGlvbnMKICAgICAqLwoKCiAgICByZW1vdmVBbGxFcXVhdGlvbnMoKSB7CiAgICAgIHRoaXMuZXF1YXRpb25zLmxlbmd0aCA9IDA7CiAgICB9CgogIH0KCiAgLyoqCiAgICogQ29uc3RyYWludCBlcXVhdGlvbiBHYXVzcy1TZWlkZWwgc29sdmVyLgogICAqIEB0b2RvIFRoZSBzcG9vayBwYXJhbWV0ZXJzIHNob3VsZCBiZSBzcGVjaWZpZWQgZm9yIGVhY2ggY29uc3RyYWludCwgbm90IGdsb2JhbGx5LgogICAqIEBzZWUgaHR0cHM6Ly93d3c4LmNzLnVtdS5zZS9rdXJzZXIvNURWMDU4L1ZUMDkvbGVjdHVyZXMvc3Bvb2tub3Rlcy5wZGYKICAgKi8KICBjbGFzcyBHU1NvbHZlciBleHRlbmRzIFNvbHZlciB7CiAgICAvKioKICAgICAqIFRoZSBudW1iZXIgb2Ygc29sdmVyIGl0ZXJhdGlvbnMgZGV0ZXJtaW5lcyBxdWFsaXR5IG9mIHRoZSBjb25zdHJhaW50cyBpbiB0aGUgd29ybGQuCiAgICAgKiBUaGUgbW9yZSBpdGVyYXRpb25zLCB0aGUgbW9yZSBjb3JyZWN0IHNpbXVsYXRpb24uIE1vcmUgaXRlcmF0aW9ucyBuZWVkIG1vcmUgY29tcHV0YXRpb25zIHRob3VnaC4gSWYgeW91IGhhdmUgYSBsYXJnZSBncmF2aXR5IGZvcmNlIGluIHlvdXIgd29ybGQsIHlvdSB3aWxsIG5lZWQgbW9yZSBpdGVyYXRpb25zLgogICAgICovCgogICAgLyoqCiAgICAgKiBXaGVuIHRvbGVyYW5jZSBpcyByZWFjaGVkLCB0aGUgc3lzdGVtIGlzIGFzc3VtZWQgdG8gYmUgY29udmVyZ2VkLgogICAgICovCgogICAgLyoqCiAgICAgKiBAdG9kbyByZW1vdmUgdXNlbGVzcyBjb25zdHJ1Y3RvcgogICAgICovCiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgc3VwZXIoKTsKICAgICAgdGhpcy5pdGVyYXRpb25zID0gMTA7CiAgICAgIHRoaXMudG9sZXJhbmNlID0gMWUtNzsKICAgIH0KICAgIC8qKgogICAgICogU29sdmUKICAgICAqIEByZXR1cm4gbnVtYmVyIG9mIGl0ZXJhdGlvbnMgcGVyZm9ybWVkCiAgICAgKi8KCgogICAgc29sdmUoZHQsIHdvcmxkKSB7CiAgICAgIGxldCBpdGVyID0gMDsKICAgICAgY29uc3QgbWF4SXRlciA9IHRoaXMuaXRlcmF0aW9uczsKICAgICAgY29uc3QgdG9sU3F1YXJlZCA9IHRoaXMudG9sZXJhbmNlICogdGhpcy50b2xlcmFuY2U7CiAgICAgIGNvbnN0IGVxdWF0aW9ucyA9IHRoaXMuZXF1YXRpb25zOwogICAgICBjb25zdCBOZXEgPSBlcXVhdGlvbnMubGVuZ3RoOwogICAgICBjb25zdCBib2RpZXMgPSB3b3JsZC5ib2RpZXM7CiAgICAgIGNvbnN0IE5ib2RpZXMgPSBib2RpZXMubGVuZ3RoOwogICAgICBjb25zdCBoID0gZHQ7CiAgICAgIGxldCBCOwogICAgICBsZXQgaW52QzsKICAgICAgbGV0IGRlbHRhbGFtYmRhOwogICAgICBsZXQgZGVsdGFsYW1iZGFUb3Q7CiAgICAgIGxldCBHV2xhbWJkYTsKICAgICAgbGV0IGxhbWJkYWo7IC8vIFVwZGF0ZSBzb2x2ZSBtYXNzCgogICAgICBpZiAoTmVxICE9PSAwKSB7CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE5ib2RpZXM7IGkrKykgewogICAgICAgICAgYm9kaWVzW2ldLnVwZGF0ZVNvbHZlTWFzc1Byb3BlcnRpZXMoKTsKICAgICAgICB9CiAgICAgIH0gLy8gVGhpbmdzIHRoYXQgZG8gbm90IGNoYW5nZSBkdXJpbmcgaXRlcmF0aW9uIGNhbiBiZSBjb21wdXRlZCBvbmNlCgoKICAgICAgY29uc3QgaW52Q3MgPSBHU1NvbHZlcl9zb2x2ZV9pbnZDczsKICAgICAgY29uc3QgQnMgPSBHU1NvbHZlcl9zb2x2ZV9CczsKICAgICAgY29uc3QgbGFtYmRhID0gR1NTb2x2ZXJfc29sdmVfbGFtYmRhOwogICAgICBpbnZDcy5sZW5ndGggPSBOZXE7CiAgICAgIEJzLmxlbmd0aCA9IE5lcTsKICAgICAgbGFtYmRhLmxlbmd0aCA9IE5lcTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOZXE7IGkrKykgewogICAgICAgIGNvbnN0IGMgPSBlcXVhdGlvbnNbaV07CiAgICAgICAgbGFtYmRhW2ldID0gMC4wOwogICAgICAgIEJzW2ldID0gYy5jb21wdXRlQihoKTsKICAgICAgICBpbnZDc1tpXSA9IDEuMCAvIGMuY29tcHV0ZUMoKTsKICAgICAgfQoKICAgICAgaWYgKE5lcSAhPT0gMCkgewogICAgICAgIC8vIFJlc2V0IHZsYW1iZGEKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTmJvZGllczsgaSsrKSB7CiAgICAgICAgICBjb25zdCBiID0gYm9kaWVzW2ldOwogICAgICAgICAgY29uc3QgdmxhbWJkYSA9IGIudmxhbWJkYTsKICAgICAgICAgIGNvbnN0IHdsYW1iZGEgPSBiLndsYW1iZGE7CiAgICAgICAgICB2bGFtYmRhLnNldCgwLCAwLCAwKTsKICAgICAgICAgIHdsYW1iZGEuc2V0KDAsIDAsIDApOwogICAgICAgIH0gLy8gSXRlcmF0ZSBvdmVyIGVxdWF0aW9ucwoKCiAgICAgICAgZm9yIChpdGVyID0gMDsgaXRlciAhPT0gbWF4SXRlcjsgaXRlcisrKSB7CiAgICAgICAgICAvLyBBY2N1bXVsYXRlIHRoZSB0b3RhbCBlcnJvciBmb3IgZWFjaCBpdGVyYXRpb24uCiAgICAgICAgICBkZWx0YWxhbWJkYVRvdCA9IDAuMDsKCiAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gTmVxOyBqKyspIHsKICAgICAgICAgICAgY29uc3QgYyA9IGVxdWF0aW9uc1tqXTsgLy8gQ29tcHV0ZSBpdGVyYXRpb24KCiAgICAgICAgICAgIEIgPSBCc1tqXTsKICAgICAgICAgICAgaW52QyA9IGludkNzW2pdOwogICAgICAgICAgICBsYW1iZGFqID0gbGFtYmRhW2pdOwogICAgICAgICAgICBHV2xhbWJkYSA9IGMuY29tcHV0ZUdXbGFtYmRhKCk7CiAgICAgICAgICAgIGRlbHRhbGFtYmRhID0gaW52QyAqIChCIC0gR1dsYW1iZGEgLSBjLmVwcyAqIGxhbWJkYWopOyAvLyBDbGFtcCBpZiB3ZSBhcmUgbm90IHdpdGhpbiB0aGUgbWluL21heCBpbnRlcnZhbAoKICAgICAgICAgICAgaWYgKGxhbWJkYWogKyBkZWx0YWxhbWJkYSA8IGMubWluRm9yY2UpIHsKICAgICAgICAgICAgICBkZWx0YWxhbWJkYSA9IGMubWluRm9yY2UgLSBsYW1iZGFqOwogICAgICAgICAgICB9IGVsc2UgaWYgKGxhbWJkYWogKyBkZWx0YWxhbWJkYSA+IGMubWF4Rm9yY2UpIHsKICAgICAgICAgICAgICBkZWx0YWxhbWJkYSA9IGMubWF4Rm9yY2UgLSBsYW1iZGFqOwogICAgICAgICAgICB9CgogICAgICAgICAgICBsYW1iZGFbal0gKz0gZGVsdGFsYW1iZGE7CiAgICAgICAgICAgIGRlbHRhbGFtYmRhVG90ICs9IGRlbHRhbGFtYmRhID4gMC4wID8gZGVsdGFsYW1iZGEgOiAtZGVsdGFsYW1iZGE7IC8vIGFicyhkZWx0YWxhbWJkYSkKCiAgICAgICAgICAgIGMuYWRkVG9XbGFtYmRhKGRlbHRhbGFtYmRhKTsKICAgICAgICAgIH0gLy8gSWYgdGhlIHRvdGFsIGVycm9yIGlzIHNtYWxsIGVub3VnaCAtIHN0b3AgaXRlcmF0ZQoKCiAgICAgICAgICBpZiAoZGVsdGFsYW1iZGFUb3QgKiBkZWx0YWxhbWJkYVRvdCA8IHRvbFNxdWFyZWQpIHsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgfSAvLyBBZGQgcmVzdWx0IHRvIHZlbG9jaXR5CgoKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTmJvZGllczsgaSsrKSB7CiAgICAgICAgICBjb25zdCBiID0gYm9kaWVzW2ldOwogICAgICAgICAgY29uc3QgdiA9IGIudmVsb2NpdHk7CiAgICAgICAgICBjb25zdCB3ID0gYi5hbmd1bGFyVmVsb2NpdHk7CiAgICAgICAgICBiLnZsYW1iZGEudm11bChiLmxpbmVhckZhY3RvciwgYi52bGFtYmRhKTsKICAgICAgICAgIHYudmFkZChiLnZsYW1iZGEsIHYpOwogICAgICAgICAgYi53bGFtYmRhLnZtdWwoYi5hbmd1bGFyRmFjdG9yLCBiLndsYW1iZGEpOwogICAgICAgICAgdy52YWRkKGIud2xhbWJkYSwgdyk7CiAgICAgICAgfSAvLyBTZXQgdGhlIGAubXVsdGlwbGllcmAgcHJvcGVydHkgb2YgZWFjaCBlcXVhdGlvbgoKCiAgICAgICAgbGV0IGwgPSBlcXVhdGlvbnMubGVuZ3RoOwogICAgICAgIGNvbnN0IGludkR0ID0gMSAvIGg7CgogICAgICAgIHdoaWxlIChsLS0pIHsKICAgICAgICAgIGVxdWF0aW9uc1tsXS5tdWx0aXBsaWVyID0gbGFtYmRhW2xdICogaW52RHQ7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gaXRlcjsKICAgIH0KCiAgfSAvLyBKdXN0IHRlbXBvcmFyeSBudW1iZXIgaG9sZGVycyB0aGF0IHdlIHdhbnQgdG8gcmV1c2UgZWFjaCBpdGVyYXRpb24uCgogIGNvbnN0IEdTU29sdmVyX3NvbHZlX2xhbWJkYSA9IFtdOwogIGNvbnN0IEdTU29sdmVyX3NvbHZlX2ludkNzID0gW107CiAgY29uc3QgR1NTb2x2ZXJfc29sdmVfQnMgPSBbXTsKCiAgLyoqCiAgICogU3BsaXRzIHRoZSBlcXVhdGlvbnMgaW50byBpc2xhbmRzIGFuZCBzb2x2ZXMgdGhlbSBpbmRlcGVuZGVudGx5LiBDYW4gaW1wcm92ZSBwZXJmb3JtYW5jZS4KICAgKi8KICBjbGFzcyBTcGxpdFNvbHZlciBleHRlbmRzIFNvbHZlciB7CiAgICAvKioKICAgICAqIFRoZSBudW1iZXIgb2Ygc29sdmVyIGl0ZXJhdGlvbnMgZGV0ZXJtaW5lcyBxdWFsaXR5IG9mIHRoZSBjb25zdHJhaW50cyBpbiB0aGUgd29ybGQuIFRoZSBtb3JlIGl0ZXJhdGlvbnMsIHRoZSBtb3JlIGNvcnJlY3Qgc2ltdWxhdGlvbi4gTW9yZSBpdGVyYXRpb25zIG5lZWQgbW9yZSBjb21wdXRhdGlvbnMgdGhvdWdoLiBJZiB5b3UgaGF2ZSBhIGxhcmdlIGdyYXZpdHkgZm9yY2UgaW4geW91ciB3b3JsZCwgeW91IHdpbGwgbmVlZCBtb3JlIGl0ZXJhdGlvbnMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFdoZW4gdG9sZXJhbmNlIGlzIHJlYWNoZWQsIHRoZSBzeXN0ZW0gaXMgYXNzdW1lZCB0byBiZSBjb252ZXJnZWQuCiAgICAgKi8KCiAgICAvKiogc3Vic29sdmVyICovCiAgICBjb25zdHJ1Y3RvcihzdWJzb2x2ZXIpIHsKICAgICAgc3VwZXIoKTsKICAgICAgdGhpcy5pdGVyYXRpb25zID0gMTA7CiAgICAgIHRoaXMudG9sZXJhbmNlID0gMWUtNzsKICAgICAgdGhpcy5zdWJzb2x2ZXIgPSBzdWJzb2x2ZXI7CiAgICAgIHRoaXMubm9kZXMgPSBbXTsKICAgICAgdGhpcy5ub2RlUG9vbCA9IFtdOyAvLyBDcmVhdGUgbmVlZGVkIG5vZGVzLCByZXVzZSBpZiBwb3NzaWJsZQoKICAgICAgd2hpbGUgKHRoaXMubm9kZVBvb2wubGVuZ3RoIDwgMTI4KSB7CiAgICAgICAgdGhpcy5ub2RlUG9vbC5wdXNoKHRoaXMuY3JlYXRlTm9kZSgpKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBjcmVhdGVOb2RlCiAgICAgKi8KCgogICAgY3JlYXRlTm9kZSgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBib2R5OiBudWxsLAogICAgICAgIGNoaWxkcmVuOiBbXSwKICAgICAgICBlcXM6IFtdLAogICAgICAgIHZpc2l0ZWQ6IGZhbHNlCiAgICAgIH07CiAgICB9CiAgICAvKioKICAgICAqIFNvbHZlIHRoZSBzdWJzeXN0ZW1zCiAgICAgKiBAcmV0dXJuIG51bWJlciBvZiBpdGVyYXRpb25zIHBlcmZvcm1lZAogICAgICovCgoKICAgIHNvbHZlKGR0LCB3b3JsZCkgewogICAgICBjb25zdCBub2RlcyA9IFNwbGl0U29sdmVyX3NvbHZlX25vZGVzOwogICAgICBjb25zdCBub2RlUG9vbCA9IHRoaXMubm9kZVBvb2w7CiAgICAgIGNvbnN0IGJvZGllcyA9IHdvcmxkLmJvZGllczsKICAgICAgY29uc3QgZXF1YXRpb25zID0gdGhpcy5lcXVhdGlvbnM7CiAgICAgIGNvbnN0IE5lcSA9IGVxdWF0aW9ucy5sZW5ndGg7CiAgICAgIGNvbnN0IE5ib2RpZXMgPSBib2RpZXMubGVuZ3RoOwogICAgICBjb25zdCBzdWJzb2x2ZXIgPSB0aGlzLnN1YnNvbHZlcjsgLy8gQ3JlYXRlIG5lZWRlZCBub2RlcywgcmV1c2UgaWYgcG9zc2libGUKCiAgICAgIHdoaWxlIChub2RlUG9vbC5sZW5ndGggPCBOYm9kaWVzKSB7CiAgICAgICAgbm9kZVBvb2wucHVzaCh0aGlzLmNyZWF0ZU5vZGUoKSk7CiAgICAgIH0KCiAgICAgIG5vZGVzLmxlbmd0aCA9IE5ib2RpZXM7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IE5ib2RpZXM7IGkrKykgewogICAgICAgIG5vZGVzW2ldID0gbm9kZVBvb2xbaV07CiAgICAgIH0gLy8gUmVzZXQgbm9kZSB2YWx1ZXMKCgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTmJvZGllczsgaSsrKSB7CiAgICAgICAgY29uc3Qgbm9kZSA9IG5vZGVzW2ldOwogICAgICAgIG5vZGUuYm9keSA9IGJvZGllc1tpXTsKICAgICAgICBub2RlLmNoaWxkcmVuLmxlbmd0aCA9IDA7CiAgICAgICAgbm9kZS5lcXMubGVuZ3RoID0gMDsKICAgICAgICBub2RlLnZpc2l0ZWQgPSBmYWxzZTsKICAgICAgfQoKICAgICAgZm9yIChsZXQgayA9IDA7IGsgIT09IE5lcTsgaysrKSB7CiAgICAgICAgY29uc3QgZXEgPSBlcXVhdGlvbnNba107CiAgICAgICAgY29uc3QgaSA9IGJvZGllcy5pbmRleE9mKGVxLmJpKTsKICAgICAgICBjb25zdCBqID0gYm9kaWVzLmluZGV4T2YoZXEuYmopOwogICAgICAgIGNvbnN0IG5pID0gbm9kZXNbaV07CiAgICAgICAgY29uc3QgbmogPSBub2Rlc1tqXTsKICAgICAgICBuaS5jaGlsZHJlbi5wdXNoKG5qKTsKICAgICAgICBuaS5lcXMucHVzaChlcSk7CiAgICAgICAgbmouY2hpbGRyZW4ucHVzaChuaSk7CiAgICAgICAgbmouZXFzLnB1c2goZXEpOwogICAgICB9CgogICAgICBsZXQgY2hpbGQ7CiAgICAgIGxldCBuID0gMDsKICAgICAgbGV0IGVxcyA9IFNwbGl0U29sdmVyX3NvbHZlX2VxczsKICAgICAgc3Vic29sdmVyLnRvbGVyYW5jZSA9IHRoaXMudG9sZXJhbmNlOwogICAgICBzdWJzb2x2ZXIuaXRlcmF0aW9ucyA9IHRoaXMuaXRlcmF0aW9uczsKICAgICAgY29uc3QgZHVtbXlXb3JsZCA9IFNwbGl0U29sdmVyX3NvbHZlX2R1bW15V29ybGQ7CgogICAgICB3aGlsZSAoY2hpbGQgPSBnZXRVbnZpc2l0ZWROb2RlKG5vZGVzKSkgewogICAgICAgIGVxcy5sZW5ndGggPSAwOwogICAgICAgIGR1bW15V29ybGQuYm9kaWVzLmxlbmd0aCA9IDA7CiAgICAgICAgYmZzKGNoaWxkLCB2aXNpdEZ1bmMsIGR1bW15V29ybGQuYm9kaWVzLCBlcXMpOwogICAgICAgIGNvbnN0IE5lcXMgPSBlcXMubGVuZ3RoOwogICAgICAgIGVxcyA9IGVxcy5zb3J0KHNvcnRCeUlkKTsKCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE5lcXM7IGkrKykgewogICAgICAgICAgc3Vic29sdmVyLmFkZEVxdWF0aW9uKGVxc1tpXSk7CiAgICAgICAgfQoKICAgICAgICBzdWJzb2x2ZXIuc29sdmUoZHQsIGR1bW15V29ybGQpOwogICAgICAgIHN1YnNvbHZlci5yZW1vdmVBbGxFcXVhdGlvbnMoKTsKICAgICAgICBuKys7CiAgICAgIH0KCiAgICAgIHJldHVybiBuOwogICAgfQoKICB9IC8vIFJldHVybnMgdGhlIG51bWJlciBvZiBzdWJzeXN0ZW1zCgogIGNvbnN0IFNwbGl0U29sdmVyX3NvbHZlX25vZGVzID0gW107IC8vIEFsbCBhbGxvY2F0ZWQgbm9kZSBvYmplY3RzCgogIGNvbnN0IFNwbGl0U29sdmVyX3NvbHZlX2VxcyA9IFtdOyAvLyBUZW1wIGFycmF5CgogIGNvbnN0IFNwbGl0U29sdmVyX3NvbHZlX2R1bW15V29ybGQgPSB7CiAgICBib2RpZXM6IFtdCiAgfTsgLy8gVGVtcCBvYmplY3QKCiAgY29uc3QgU1RBVElDID0gQm9keS5TVEFUSUM7CgogIGZ1bmN0aW9uIGdldFVudmlzaXRlZE5vZGUobm9kZXMpIHsKICAgIGNvbnN0IE5ub2RlcyA9IG5vZGVzLmxlbmd0aDsKCiAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTm5vZGVzOyBpKyspIHsKICAgICAgY29uc3Qgbm9kZSA9IG5vZGVzW2ldOwoKICAgICAgaWYgKCFub2RlLnZpc2l0ZWQgJiYgIShub2RlLmJvZHkudHlwZSAmIFNUQVRJQykpIHsKICAgICAgICByZXR1cm4gbm9kZTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBmYWxzZTsKICB9CgogIGNvbnN0IHF1ZXVlID0gW107CgogIGZ1bmN0aW9uIGJmcyhyb290LCB2aXNpdEZ1bmMsIGJkcywgZXFzKSB7CiAgICBxdWV1ZS5wdXNoKHJvb3QpOwogICAgcm9vdC52aXNpdGVkID0gdHJ1ZTsKICAgIHZpc2l0RnVuYyhyb290LCBiZHMsIGVxcyk7CgogICAgd2hpbGUgKHF1ZXVlLmxlbmd0aCkgewogICAgICBjb25zdCBub2RlID0gcXVldWUucG9wKCk7IC8vIExvb3Agb3ZlciB1bnZpc2l0ZWQgY2hpbGQgbm9kZXMKCiAgICAgIGxldCBjaGlsZDsKCiAgICAgIHdoaWxlIChjaGlsZCA9IGdldFVudmlzaXRlZE5vZGUobm9kZS5jaGlsZHJlbikpIHsKICAgICAgICBjaGlsZC52aXNpdGVkID0gdHJ1ZTsKICAgICAgICB2aXNpdEZ1bmMoY2hpbGQsIGJkcywgZXFzKTsKICAgICAgICBxdWV1ZS5wdXNoKGNoaWxkKTsKICAgICAgfQogICAgfQogIH0KCiAgZnVuY3Rpb24gdmlzaXRGdW5jKG5vZGUsIGJkcywgZXFzKSB7CiAgICBiZHMucHVzaChub2RlLmJvZHkpOwogICAgY29uc3QgTmVxcyA9IG5vZGUuZXFzLmxlbmd0aDsKCiAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTmVxczsgaSsrKSB7CiAgICAgIGNvbnN0IGVxID0gbm9kZS5lcXNbaV07CgogICAgICBpZiAoIWVxcy5pbmNsdWRlcyhlcSkpIHsKICAgICAgICBlcXMucHVzaChlcSk7CiAgICAgIH0KICAgIH0KICB9CgogIGZ1bmN0aW9uIHNvcnRCeUlkKGEsIGIpIHsKICAgIHJldHVybiBiLmlkIC0gYS5pZDsKICB9CgogIC8qKgogICAqIEZvciBwb29saW5nIG9iamVjdHMgdGhhdCBjYW4gYmUgcmV1c2VkLgogICAqLwogIGNsYXNzIFBvb2wgewogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHRoaXMub2JqZWN0cyA9IFtdOwogICAgICB0aGlzLnR5cGUgPSBPYmplY3Q7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZWxlYXNlIGFuIG9iamVjdCBhZnRlciB1c2UKICAgICAqLwogICAgcmVsZWFzZSgpIHsKICAgICAgY29uc3QgTmFyZ3MgPSBhcmd1bWVudHMubGVuZ3RoOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE5hcmdzOyBpKyspIHsKICAgICAgICB0aGlzLm9iamVjdHMucHVzaChpIDwgMCB8fCBhcmd1bWVudHMubGVuZ3RoIDw9IGkgPyB1bmRlZmluZWQgOiBhcmd1bWVudHNbaV0pOwogICAgICB9CgogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogR2V0IGFuIG9iamVjdAogICAgICovCgoKICAgIGdldCgpIHsKICAgICAgaWYgKHRoaXMub2JqZWN0cy5sZW5ndGggPT09IDApIHsKICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3RPYmplY3QoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gdGhpcy5vYmplY3RzLnBvcCgpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIENvbnN0cnVjdCBhbiBvYmplY3QuIFNob3VsZCBiZSBpbXBsZW1lbnRlZCBpbiBlYWNoIHN1YmNsYXNzLgogICAgICovCgoKICAgIGNvbnN0cnVjdE9iamVjdCgpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb25zdHJ1Y3RPYmplY3QoKSBub3QgaW1wbGVtZW50ZWQgaW4gdGhpcyBQb29sIHN1YmNsYXNzIHlldCEnKTsKICAgIH0KICAgIC8qKgogICAgICogQHJldHVybiBTZWxmLCBmb3IgY2hhaW5pbmcKICAgICAqLwoKCiAgICByZXNpemUoc2l6ZSkgewogICAgICBjb25zdCBvYmplY3RzID0gdGhpcy5vYmplY3RzOwoKICAgICAgd2hpbGUgKG9iamVjdHMubGVuZ3RoID4gc2l6ZSkgewogICAgICAgIG9iamVjdHMucG9wKCk7CiAgICAgIH0KCiAgICAgIHdoaWxlIChvYmplY3RzLmxlbmd0aCA8IHNpemUpIHsKICAgICAgICBvYmplY3RzLnB1c2godGhpcy5jb25zdHJ1Y3RPYmplY3QoKSk7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzOwogICAgfQoKICB9CgogIC8qKgogICAqIFZlYzNQb29sCiAgICovCgogIGNsYXNzIFZlYzNQb29sIGV4dGVuZHMgUG9vbCB7CiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTsKICAgICAgdGhpcy50eXBlID0gVmVjMzsKICAgIH0KCiAgICAvKioKICAgICAqIENvbnN0cnVjdCBhIHZlY3RvcgogICAgICovCiAgICBjb25zdHJ1Y3RPYmplY3QoKSB7CiAgICAgIHJldHVybiBuZXcgVmVjMygpOwogICAgfQoKICB9CgogIC8vIE5hbWluZyBydWxlOiBiYXNlZCBvZiB0aGUgb3JkZXIgaW4gU0hBUEVfVFlQRVMsCiAgLy8gdGhlIGZpcnN0IHBhcnQgb2YgdGhlIG1ldGhvZCBpcyBmb3JtZWQgYnkgdGhlCiAgLy8gc2hhcGUgdHlwZSB0aGF0IGNvbWVzIGJlZm9yZSwgaW4gdGhlIHNlY29uZCBwYXJ0CiAgLy8gdGhlcmUgaXMgdGhlIHNoYXBlIHR5cGUgdGhhdCBjb21lcyBhZnRlciBpbiB0aGUgU0hBUEVfVFlQRVMgbGlzdAogIGNvbnN0IENPTExJU0lPTl9UWVBFUyA9IHsKICAgIHNwaGVyZVNwaGVyZTogU2hhcGUudHlwZXMuU1BIRVJFLAogICAgc3BoZXJlUGxhbmU6IFNoYXBlLnR5cGVzLlNQSEVSRSB8IFNoYXBlLnR5cGVzLlBMQU5FLAogICAgYm94Qm94OiBTaGFwZS50eXBlcy5CT1ggfCBTaGFwZS50eXBlcy5CT1gsCiAgICBzcGhlcmVCb3g6IFNoYXBlLnR5cGVzLlNQSEVSRSB8IFNoYXBlLnR5cGVzLkJPWCwKICAgIHBsYW5lQm94OiBTaGFwZS50eXBlcy5QTEFORSB8IFNoYXBlLnR5cGVzLkJPWCwKICAgIGNvbnZleENvbnZleDogU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTiwKICAgIHNwaGVyZUNvbnZleDogU2hhcGUudHlwZXMuU1BIRVJFIHwgU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTiwKICAgIHBsYW5lQ29udmV4OiBTaGFwZS50eXBlcy5QTEFORSB8IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST04sCiAgICBib3hDb252ZXg6IFNoYXBlLnR5cGVzLkJPWCB8IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST04sCiAgICBzcGhlcmVIZWlnaHRmaWVsZDogU2hhcGUudHlwZXMuU1BIRVJFIHwgU2hhcGUudHlwZXMuSEVJR0hURklFTEQsCiAgICBib3hIZWlnaHRmaWVsZDogU2hhcGUudHlwZXMuQk9YIHwgU2hhcGUudHlwZXMuSEVJR0hURklFTEQsCiAgICBjb252ZXhIZWlnaHRmaWVsZDogU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTiB8IFNoYXBlLnR5cGVzLkhFSUdIVEZJRUxELAogICAgc3BoZXJlUGFydGljbGU6IFNoYXBlLnR5cGVzLlBBUlRJQ0xFIHwgU2hhcGUudHlwZXMuU1BIRVJFLAogICAgcGxhbmVQYXJ0aWNsZTogU2hhcGUudHlwZXMuUExBTkUgfCBTaGFwZS50eXBlcy5QQVJUSUNMRSwKICAgIGJveFBhcnRpY2xlOiBTaGFwZS50eXBlcy5CT1ggfCBTaGFwZS50eXBlcy5QQVJUSUNMRSwKICAgIGNvbnZleFBhcnRpY2xlOiBTaGFwZS50eXBlcy5QQVJUSUNMRSB8IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST04sCiAgICBjeWxpbmRlckN5bGluZGVyOiBTaGFwZS50eXBlcy5DWUxJTkRFUiwKICAgIHNwaGVyZUN5bGluZGVyOiBTaGFwZS50eXBlcy5TUEhFUkUgfCBTaGFwZS50eXBlcy5DWUxJTkRFUiwKICAgIHBsYW5lQ3lsaW5kZXI6IFNoYXBlLnR5cGVzLlBMQU5FIHwgU2hhcGUudHlwZXMuQ1lMSU5ERVIsCiAgICBib3hDeWxpbmRlcjogU2hhcGUudHlwZXMuQk9YIHwgU2hhcGUudHlwZXMuQ1lMSU5ERVIsCiAgICBjb252ZXhDeWxpbmRlcjogU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTiB8IFNoYXBlLnR5cGVzLkNZTElOREVSLAogICAgaGVpZ2h0ZmllbGRDeWxpbmRlcjogU2hhcGUudHlwZXMuSEVJR0hURklFTEQgfCBTaGFwZS50eXBlcy5DWUxJTkRFUiwKICAgIHBhcnRpY2xlQ3lsaW5kZXI6IFNoYXBlLnR5cGVzLlBBUlRJQ0xFIHwgU2hhcGUudHlwZXMuQ1lMSU5ERVIsCiAgICBzcGhlcmVUcmltZXNoOiBTaGFwZS50eXBlcy5TUEhFUkUgfCBTaGFwZS50eXBlcy5UUklNRVNILAogICAgcGxhbmVUcmltZXNoOiBTaGFwZS50eXBlcy5QTEFORSB8IFNoYXBlLnR5cGVzLlRSSU1FU0gKICB9OwoKICAvKioKICAgKiBIZWxwZXIgY2xhc3MgZm9yIHRoZSBXb3JsZC4gR2VuZXJhdGVzIENvbnRhY3RFcXVhdGlvbnMuCiAgICogQHRvZG8gU3BoZXJlLUNvbnZleFBvbHloZWRyb24gY29udGFjdHMKICAgKiBAdG9kbyBDb250YWN0IHJlZHVjdGlvbgogICAqIEB0b2RvIHNob3VsZCBtb3ZlIG1ldGhvZHMgdG8gcHJvdG90eXBlCiAgICovCiAgY2xhc3MgTmFycm93cGhhc2UgewogICAgLyoqCiAgICAgKiBJbnRlcm5hbCBzdG9yYWdlIG9mIHBvb2xlZCBjb250YWN0IHBvaW50cy4KICAgICAqLwoKICAgIC8qKgogICAgICogUG9vbGVkIHZlY3RvcnMuCiAgICAgKi8KICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLnNwaGVyZVNwaGVyZV0oKSB7CiAgICAgIHJldHVybiB0aGlzLnNwaGVyZVNwaGVyZTsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5zcGhlcmVQbGFuZV0oKSB7CiAgICAgIHJldHVybiB0aGlzLnNwaGVyZVBsYW5lOwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLmJveEJveF0oKSB7CiAgICAgIHJldHVybiB0aGlzLmJveEJveDsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5zcGhlcmVCb3hdKCkgewogICAgICByZXR1cm4gdGhpcy5zcGhlcmVCb3g7CiAgICB9CgogICAgZ2V0IFtDT0xMSVNJT05fVFlQRVMucGxhbmVCb3hdKCkgewogICAgICByZXR1cm4gdGhpcy5wbGFuZUJveDsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5jb252ZXhDb252ZXhdKCkgewogICAgICByZXR1cm4gdGhpcy5jb252ZXhDb252ZXg7CiAgICB9CgogICAgZ2V0IFtDT0xMSVNJT05fVFlQRVMuc3BoZXJlQ29udmV4XSgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3BoZXJlQ29udmV4OwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLnBsYW5lQ29udmV4XSgpIHsKICAgICAgcmV0dXJuIHRoaXMucGxhbmVDb252ZXg7CiAgICB9CgogICAgZ2V0IFtDT0xMSVNJT05fVFlQRVMuYm94Q29udmV4XSgpIHsKICAgICAgcmV0dXJuIHRoaXMuYm94Q29udmV4OwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLnNwaGVyZUhlaWdodGZpZWxkXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3BoZXJlSGVpZ2h0ZmllbGQ7CiAgICB9CgogICAgZ2V0IFtDT0xMSVNJT05fVFlQRVMuYm94SGVpZ2h0ZmllbGRdKCkgewogICAgICByZXR1cm4gdGhpcy5ib3hIZWlnaHRmaWVsZDsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5jb252ZXhIZWlnaHRmaWVsZF0oKSB7CiAgICAgIHJldHVybiB0aGlzLmNvbnZleEhlaWdodGZpZWxkOwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLnNwaGVyZVBhcnRpY2xlXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3BoZXJlUGFydGljbGU7CiAgICB9CgogICAgZ2V0IFtDT0xMSVNJT05fVFlQRVMucGxhbmVQYXJ0aWNsZV0oKSB7CiAgICAgIHJldHVybiB0aGlzLnBsYW5lUGFydGljbGU7CiAgICB9CgogICAgZ2V0IFtDT0xMSVNJT05fVFlQRVMuYm94UGFydGljbGVdKCkgewogICAgICByZXR1cm4gdGhpcy5ib3hQYXJ0aWNsZTsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5jb252ZXhQYXJ0aWNsZV0oKSB7CiAgICAgIHJldHVybiB0aGlzLmNvbnZleFBhcnRpY2xlOwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLmN5bGluZGVyQ3lsaW5kZXJdKCkgewogICAgICByZXR1cm4gdGhpcy5jb252ZXhDb252ZXg7CiAgICB9CgogICAgZ2V0IFtDT0xMSVNJT05fVFlQRVMuc3BoZXJlQ3lsaW5kZXJdKCkgewogICAgICByZXR1cm4gdGhpcy5zcGhlcmVDb252ZXg7CiAgICB9CgogICAgZ2V0IFtDT0xMSVNJT05fVFlQRVMucGxhbmVDeWxpbmRlcl0oKSB7CiAgICAgIHJldHVybiB0aGlzLnBsYW5lQ29udmV4OwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLmJveEN5bGluZGVyXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuYm94Q29udmV4OwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLmNvbnZleEN5bGluZGVyXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuY29udmV4Q29udmV4OwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLmhlaWdodGZpZWxkQ3lsaW5kZXJdKCkgewogICAgICByZXR1cm4gdGhpcy5oZWlnaHRmaWVsZEN5bGluZGVyOwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLnBhcnRpY2xlQ3lsaW5kZXJdKCkgewogICAgICByZXR1cm4gdGhpcy5wYXJ0aWNsZUN5bGluZGVyOwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLnNwaGVyZVRyaW1lc2hdKCkgewogICAgICByZXR1cm4gdGhpcy5zcGhlcmVUcmltZXNoOwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLnBsYW5lVHJpbWVzaF0oKSB7CiAgICAgIHJldHVybiB0aGlzLnBsYW5lVHJpbWVzaDsKICAgIH0gLy8gZ2V0IFtDT0xMSVNJT05fVFlQRVMuY29udmV4VHJpbWVzaF0oKSB7CiAgICAvLyAgIHJldHVybiB0aGlzLmNvbnZleFRyaW1lc2gKICAgIC8vIH0KCgogICAgY29uc3RydWN0b3Iod29ybGQpIHsKICAgICAgdGhpcy5jb250YWN0UG9pbnRQb29sID0gW107CiAgICAgIHRoaXMuZnJpY3Rpb25FcXVhdGlvblBvb2wgPSBbXTsKICAgICAgdGhpcy5yZXN1bHQgPSBbXTsKICAgICAgdGhpcy5mcmljdGlvblJlc3VsdCA9IFtdOwogICAgICB0aGlzLnYzcG9vbCA9IG5ldyBWZWMzUG9vbCgpOwogICAgICB0aGlzLndvcmxkID0gd29ybGQ7CiAgICAgIHRoaXMuY3VycmVudENvbnRhY3RNYXRlcmlhbCA9IHdvcmxkLmRlZmF1bHRDb250YWN0TWF0ZXJpYWw7CiAgICAgIHRoaXMuZW5hYmxlRnJpY3Rpb25SZWR1Y3Rpb24gPSBmYWxzZTsKICAgIH0KICAgIC8qKgogICAgICogTWFrZSBhIGNvbnRhY3Qgb2JqZWN0LCBieSB1c2luZyB0aGUgaW50ZXJuYWwgcG9vbCBvciBjcmVhdGluZyBhIG5ldyBvbmUuCiAgICAgKi8KCgogICAgY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCBvdmVycmlkZVNoYXBlQSwgb3ZlcnJpZGVTaGFwZUIpIHsKICAgICAgbGV0IGM7CgogICAgICBpZiAodGhpcy5jb250YWN0UG9pbnRQb29sLmxlbmd0aCkgewogICAgICAgIGMgPSB0aGlzLmNvbnRhY3RQb2ludFBvb2wucG9wKCk7CiAgICAgICAgYy5iaSA9IGJpOwogICAgICAgIGMuYmogPSBiajsKICAgICAgfSBlbHNlIHsKICAgICAgICBjID0gbmV3IENvbnRhY3RFcXVhdGlvbihiaSwgYmopOwogICAgICB9CgogICAgICBjLmVuYWJsZWQgPSBiaS5jb2xsaXNpb25SZXNwb25zZSAmJiBiai5jb2xsaXNpb25SZXNwb25zZSAmJiBzaS5jb2xsaXNpb25SZXNwb25zZSAmJiBzai5jb2xsaXNpb25SZXNwb25zZTsKICAgICAgY29uc3QgY20gPSB0aGlzLmN1cnJlbnRDb250YWN0TWF0ZXJpYWw7CiAgICAgIGMucmVzdGl0dXRpb24gPSBjbS5yZXN0aXR1dGlvbjsKICAgICAgYy5zZXRTcG9va1BhcmFtcyhjbS5jb250YWN0RXF1YXRpb25TdGlmZm5lc3MsIGNtLmNvbnRhY3RFcXVhdGlvblJlbGF4YXRpb24sIHRoaXMud29ybGQuZHQpOwogICAgICBjb25zdCBtYXRBID0gc2kubWF0ZXJpYWwgfHwgYmkubWF0ZXJpYWw7CiAgICAgIGNvbnN0IG1hdEIgPSBzai5tYXRlcmlhbCB8fCBiai5tYXRlcmlhbDsKCiAgICAgIGlmIChtYXRBICYmIG1hdEIgJiYgbWF0QS5yZXN0aXR1dGlvbiA+PSAwICYmIG1hdEIucmVzdGl0dXRpb24gPj0gMCkgewogICAgICAgIGMucmVzdGl0dXRpb24gPSBtYXRBLnJlc3RpdHV0aW9uICogbWF0Qi5yZXN0aXR1dGlvbjsKICAgICAgfQoKICAgICAgYy5zaSA9IG92ZXJyaWRlU2hhcGVBIHx8IHNpOwogICAgICBjLnNqID0gb3ZlcnJpZGVTaGFwZUIgfHwgc2o7CiAgICAgIHJldHVybiBjOwogICAgfQoKICAgIGNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QoY29udGFjdEVxdWF0aW9uLCBvdXRBcnJheSkgewogICAgICBjb25zdCBib2R5QSA9IGNvbnRhY3RFcXVhdGlvbi5iaTsKICAgICAgY29uc3QgYm9keUIgPSBjb250YWN0RXF1YXRpb24uYmo7CiAgICAgIGNvbnN0IHNoYXBlQSA9IGNvbnRhY3RFcXVhdGlvbi5zaTsKICAgICAgY29uc3Qgc2hhcGVCID0gY29udGFjdEVxdWF0aW9uLnNqOwogICAgICBjb25zdCB3b3JsZCA9IHRoaXMud29ybGQ7CiAgICAgIGNvbnN0IGNtID0gdGhpcy5jdXJyZW50Q29udGFjdE1hdGVyaWFsOyAvLyBJZiBmcmljdGlvbiBvciByZXN0aXR1dGlvbiB3ZXJlIHNwZWNpZmllZCBpbiB0aGUgbWF0ZXJpYWwsIHVzZSB0aGVtCgogICAgICBsZXQgZnJpY3Rpb24gPSBjbS5mcmljdGlvbjsKICAgICAgY29uc3QgbWF0QSA9IHNoYXBlQS5tYXRlcmlhbCB8fCBib2R5QS5tYXRlcmlhbDsKICAgICAgY29uc3QgbWF0QiA9IHNoYXBlQi5tYXRlcmlhbCB8fCBib2R5Qi5tYXRlcmlhbDsKCiAgICAgIGlmIChtYXRBICYmIG1hdEIgJiYgbWF0QS5mcmljdGlvbiA+PSAwICYmIG1hdEIuZnJpY3Rpb24gPj0gMCkgewogICAgICAgIGZyaWN0aW9uID0gbWF0QS5mcmljdGlvbiAqIG1hdEIuZnJpY3Rpb247CiAgICAgIH0KCiAgICAgIGlmIChmcmljdGlvbiA+IDApIHsKICAgICAgICAvLyBDcmVhdGUgMiB0YW5nZW50IGVxdWF0aW9ucwogICAgICAgIC8vIFVzZXJzIG1heSBwcm92aWRlIGEgZm9yY2UgZGlmZmVyZW50IGZyb20gZ2xvYmFsIGdyYXZpdHkgdG8gdXNlIHdoZW4gY29tcHV0aW5nIGNvbnRhY3QgZnJpY3Rpb24uCiAgICAgICAgY29uc3QgbXVnID0gZnJpY3Rpb24gKiAod29ybGQuZnJpY3Rpb25HcmF2aXR5IHx8IHdvcmxkLmdyYXZpdHkpLmxlbmd0aCgpOwogICAgICAgIGxldCByZWR1Y2VkTWFzcyA9IGJvZHlBLmludk1hc3MgKyBib2R5Qi5pbnZNYXNzOwoKICAgICAgICBpZiAocmVkdWNlZE1hc3MgPiAwKSB7CiAgICAgICAgICByZWR1Y2VkTWFzcyA9IDEgLyByZWR1Y2VkTWFzczsKICAgICAgICB9CgogICAgICAgIGNvbnN0IHBvb2wgPSB0aGlzLmZyaWN0aW9uRXF1YXRpb25Qb29sOwogICAgICAgIGNvbnN0IGMxID0gcG9vbC5sZW5ndGggPyBwb29sLnBvcCgpIDogbmV3IEZyaWN0aW9uRXF1YXRpb24oYm9keUEsIGJvZHlCLCBtdWcgKiByZWR1Y2VkTWFzcyk7CiAgICAgICAgY29uc3QgYzIgPSBwb29sLmxlbmd0aCA/IHBvb2wucG9wKCkgOiBuZXcgRnJpY3Rpb25FcXVhdGlvbihib2R5QSwgYm9keUIsIG11ZyAqIHJlZHVjZWRNYXNzKTsKICAgICAgICBjMS5iaSA9IGMyLmJpID0gYm9keUE7CiAgICAgICAgYzEuYmogPSBjMi5iaiA9IGJvZHlCOwogICAgICAgIGMxLm1pbkZvcmNlID0gYzIubWluRm9yY2UgPSAtbXVnICogcmVkdWNlZE1hc3M7CiAgICAgICAgYzEubWF4Rm9yY2UgPSBjMi5tYXhGb3JjZSA9IG11ZyAqIHJlZHVjZWRNYXNzOyAvLyBDb3B5IG92ZXIgdGhlIHJlbGF0aXZlIHZlY3RvcnMKCiAgICAgICAgYzEucmkuY29weShjb250YWN0RXF1YXRpb24ucmkpOwogICAgICAgIGMxLnJqLmNvcHkoY29udGFjdEVxdWF0aW9uLnJqKTsKICAgICAgICBjMi5yaS5jb3B5KGNvbnRhY3RFcXVhdGlvbi5yaSk7CiAgICAgICAgYzIucmouY29weShjb250YWN0RXF1YXRpb24ucmopOyAvLyBDb25zdHJ1Y3QgdGFuZ2VudHMKCiAgICAgICAgY29udGFjdEVxdWF0aW9uLm5pLnRhbmdlbnRzKGMxLnQsIGMyLnQpOyAvLyBTZXQgc3Bvb2sgcGFyYW1zCgogICAgICAgIGMxLnNldFNwb29rUGFyYW1zKGNtLmZyaWN0aW9uRXF1YXRpb25TdGlmZm5lc3MsIGNtLmZyaWN0aW9uRXF1YXRpb25SZWxheGF0aW9uLCB3b3JsZC5kdCk7CiAgICAgICAgYzIuc2V0U3Bvb2tQYXJhbXMoY20uZnJpY3Rpb25FcXVhdGlvblN0aWZmbmVzcywgY20uZnJpY3Rpb25FcXVhdGlvblJlbGF4YXRpb24sIHdvcmxkLmR0KTsKICAgICAgICBjMS5lbmFibGVkID0gYzIuZW5hYmxlZCA9IGNvbnRhY3RFcXVhdGlvbi5lbmFibGVkOwogICAgICAgIG91dEFycmF5LnB1c2goYzEsIGMyKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQoKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgLyoqCiAgICAgKiBUYWtlIHRoZSBhdmVyYWdlIE4gbGF0ZXN0IGNvbnRhY3QgcG9pbnQgb24gdGhlIHBsYW5lLgogICAgICovCgoKICAgIGNyZWF0ZUZyaWN0aW9uRnJvbUF2ZXJhZ2UobnVtQ29udGFjdHMpIHsKICAgICAgLy8gVGhlIGxhc3QgY29udGFjdEVxdWF0aW9uCiAgICAgIGxldCBjID0gdGhpcy5yZXN1bHRbdGhpcy5yZXN1bHQubGVuZ3RoIC0gMV07IC8vIENyZWF0ZSB0aGUgcmVzdWx0OiB0d28gImF2ZXJhZ2UiIGZyaWN0aW9uIGVxdWF0aW9ucwoKICAgICAgaWYgKCF0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QoYywgdGhpcy5mcmljdGlvblJlc3VsdCkgfHwgbnVtQ29udGFjdHMgPT09IDEpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnN0IGYxID0gdGhpcy5mcmljdGlvblJlc3VsdFt0aGlzLmZyaWN0aW9uUmVzdWx0Lmxlbmd0aCAtIDJdOwogICAgICBjb25zdCBmMiA9IHRoaXMuZnJpY3Rpb25SZXN1bHRbdGhpcy5mcmljdGlvblJlc3VsdC5sZW5ndGggLSAxXTsKICAgICAgYXZlcmFnZU5vcm1hbC5zZXRaZXJvKCk7CiAgICAgIGF2ZXJhZ2VDb250YWN0UG9pbnRBLnNldFplcm8oKTsKICAgICAgYXZlcmFnZUNvbnRhY3RQb2ludEIuc2V0WmVybygpOwogICAgICBjb25zdCBib2R5QSA9IGMuYmk7CiAgICAgIGMuYmo7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gbnVtQ29udGFjdHM7IGkrKykgewogICAgICAgIGMgPSB0aGlzLnJlc3VsdFt0aGlzLnJlc3VsdC5sZW5ndGggLSAxIC0gaV07CgogICAgICAgIGlmIChjLmJpICE9PSBib2R5QSkgewogICAgICAgICAgYXZlcmFnZU5vcm1hbC52YWRkKGMubmksIGF2ZXJhZ2VOb3JtYWwpOwogICAgICAgICAgYXZlcmFnZUNvbnRhY3RQb2ludEEudmFkZChjLnJpLCBhdmVyYWdlQ29udGFjdFBvaW50QSk7CiAgICAgICAgICBhdmVyYWdlQ29udGFjdFBvaW50Qi52YWRkKGMucmosIGF2ZXJhZ2VDb250YWN0UG9pbnRCKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgYXZlcmFnZU5vcm1hbC52c3ViKGMubmksIGF2ZXJhZ2VOb3JtYWwpOwogICAgICAgICAgYXZlcmFnZUNvbnRhY3RQb2ludEEudmFkZChjLnJqLCBhdmVyYWdlQ29udGFjdFBvaW50QSk7CiAgICAgICAgICBhdmVyYWdlQ29udGFjdFBvaW50Qi52YWRkKGMucmksIGF2ZXJhZ2VDb250YWN0UG9pbnRCKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGNvbnN0IGludk51bUNvbnRhY3RzID0gMSAvIG51bUNvbnRhY3RzOwogICAgICBhdmVyYWdlQ29udGFjdFBvaW50QS5zY2FsZShpbnZOdW1Db250YWN0cywgZjEucmkpOwogICAgICBhdmVyYWdlQ29udGFjdFBvaW50Qi5zY2FsZShpbnZOdW1Db250YWN0cywgZjEucmopOwogICAgICBmMi5yaS5jb3B5KGYxLnJpKTsgLy8gU2hvdWxkIGJlIHRoZSBzYW1lCgogICAgICBmMi5yai5jb3B5KGYxLnJqKTsKICAgICAgYXZlcmFnZU5vcm1hbC5ub3JtYWxpemUoKTsKICAgICAgYXZlcmFnZU5vcm1hbC50YW5nZW50cyhmMS50LCBmMi50KTsgLy8gcmV0dXJuIGVxOwogICAgfQogICAgLyoqCiAgICAgKiBHZW5lcmF0ZSBhbGwgY29udGFjdHMgYmV0d2VlbiBhIGxpc3Qgb2YgYm9keSBwYWlycwogICAgICogQHBhcmFtIHAxIEFycmF5IG9mIGJvZHkgaW5kaWNlcwogICAgICogQHBhcmFtIHAyIEFycmF5IG9mIGJvZHkgaW5kaWNlcwogICAgICogQHBhcmFtIHJlc3VsdCBBcnJheSB0byBzdG9yZSBnZW5lcmF0ZWQgY29udGFjdHMKICAgICAqIEBwYXJhbSBvbGRjb250YWN0cyBPcHRpb25hbC4gQXJyYXkgb2YgcmV1c2FibGUgY29udGFjdCBvYmplY3RzCiAgICAgKi8KCgogICAgZ2V0Q29udGFjdHMocDEsIHAyLCB3b3JsZCwgcmVzdWx0LCBvbGRjb250YWN0cywgZnJpY3Rpb25SZXN1bHQsIGZyaWN0aW9uUG9vbCkgewogICAgICAvLyBTYXZlIG9sZCBjb250YWN0IG9iamVjdHMKICAgICAgdGhpcy5jb250YWN0UG9pbnRQb29sID0gb2xkY29udGFjdHM7CiAgICAgIHRoaXMuZnJpY3Rpb25FcXVhdGlvblBvb2wgPSBmcmljdGlvblBvb2w7CiAgICAgIHRoaXMucmVzdWx0ID0gcmVzdWx0OwogICAgICB0aGlzLmZyaWN0aW9uUmVzdWx0ID0gZnJpY3Rpb25SZXN1bHQ7CiAgICAgIGNvbnN0IHFpID0gdG1wUXVhdDE7CiAgICAgIGNvbnN0IHFqID0gdG1wUXVhdDI7CiAgICAgIGNvbnN0IHhpID0gdG1wVmVjMTsKICAgICAgY29uc3QgeGogPSB0bXBWZWMyOwoKICAgICAgZm9yIChsZXQgayA9IDAsIE4gPSBwMS5sZW5ndGg7IGsgIT09IE47IGsrKykgewogICAgICAgIC8vIEdldCBjdXJyZW50IGNvbGxpc2lvbiBib2RpZXMKICAgICAgICBjb25zdCBiaSA9IHAxW2tdOwogICAgICAgIGNvbnN0IGJqID0gcDJba107IC8vIEdldCBjb250YWN0IG1hdGVyaWFsCgogICAgICAgIGxldCBib2R5Q29udGFjdE1hdGVyaWFsID0gbnVsbDsKCiAgICAgICAgaWYgKGJpLm1hdGVyaWFsICYmIGJqLm1hdGVyaWFsKSB7CiAgICAgICAgICBib2R5Q29udGFjdE1hdGVyaWFsID0gd29ybGQuZ2V0Q29udGFjdE1hdGVyaWFsKGJpLm1hdGVyaWFsLCBiai5tYXRlcmlhbCkgfHwgbnVsbDsKICAgICAgICB9CgogICAgICAgIGNvbnN0IGp1c3RUZXN0ID0gYmkudHlwZSAmIEJvZHkuS0lORU1BVElDICYmIGJqLnR5cGUgJiBCb2R5LlNUQVRJQyB8fCBiaS50eXBlICYgQm9keS5TVEFUSUMgJiYgYmoudHlwZSAmIEJvZHkuS0lORU1BVElDIHx8IGJpLnR5cGUgJiBCb2R5LktJTkVNQVRJQyAmJiBiai50eXBlICYgQm9keS5LSU5FTUFUSUM7CgogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYmkuc2hhcGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBiaS5xdWF0ZXJuaW9uLm11bHQoYmkuc2hhcGVPcmllbnRhdGlvbnNbaV0sIHFpKTsKICAgICAgICAgIGJpLnF1YXRlcm5pb24udm11bHQoYmkuc2hhcGVPZmZzZXRzW2ldLCB4aSk7CiAgICAgICAgICB4aS52YWRkKGJpLnBvc2l0aW9uLCB4aSk7CiAgICAgICAgICBjb25zdCBzaSA9IGJpLnNoYXBlc1tpXTsKCiAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGJqLnNoYXBlcy5sZW5ndGg7IGorKykgewogICAgICAgICAgICAvLyBDb21wdXRlIHdvcmxkIHRyYW5zZm9ybSBvZiBzaGFwZXMKICAgICAgICAgICAgYmoucXVhdGVybmlvbi5tdWx0KGJqLnNoYXBlT3JpZW50YXRpb25zW2pdLCBxaik7CiAgICAgICAgICAgIGJqLnF1YXRlcm5pb24udm11bHQoYmouc2hhcGVPZmZzZXRzW2pdLCB4aik7CiAgICAgICAgICAgIHhqLnZhZGQoYmoucG9zaXRpb24sIHhqKTsKICAgICAgICAgICAgY29uc3Qgc2ogPSBiai5zaGFwZXNbal07CgogICAgICAgICAgICBpZiAoIShzaS5jb2xsaXNpb25GaWx0ZXJNYXNrICYgc2ouY29sbGlzaW9uRmlsdGVyR3JvdXAgJiYgc2ouY29sbGlzaW9uRmlsdGVyTWFzayAmIHNpLmNvbGxpc2lvbkZpbHRlckdyb3VwKSkgewogICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoeGkuZGlzdGFuY2VUbyh4aikgPiBzaS5ib3VuZGluZ1NwaGVyZVJhZGl1cyArIHNqLmJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7CiAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0gLy8gR2V0IGNvbGxpc2lvbiBtYXRlcmlhbAoKCiAgICAgICAgICAgIGxldCBzaGFwZUNvbnRhY3RNYXRlcmlhbCA9IG51bGw7CgogICAgICAgICAgICBpZiAoc2kubWF0ZXJpYWwgJiYgc2oubWF0ZXJpYWwpIHsKICAgICAgICAgICAgICBzaGFwZUNvbnRhY3RNYXRlcmlhbCA9IHdvcmxkLmdldENvbnRhY3RNYXRlcmlhbChzaS5tYXRlcmlhbCwgc2oubWF0ZXJpYWwpIHx8IG51bGw7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRoaXMuY3VycmVudENvbnRhY3RNYXRlcmlhbCA9IHNoYXBlQ29udGFjdE1hdGVyaWFsIHx8IGJvZHlDb250YWN0TWF0ZXJpYWwgfHwgd29ybGQuZGVmYXVsdENvbnRhY3RNYXRlcmlhbDsgLy8gR2V0IGNvbnRhY3RzCgogICAgICAgICAgICBjb25zdCByZXNvbHZlckluZGV4ID0gc2kudHlwZSB8IHNqLnR5cGU7CiAgICAgICAgICAgIGNvbnN0IHJlc29sdmVyID0gdGhpc1tyZXNvbHZlckluZGV4XTsKCiAgICAgICAgICAgIGlmIChyZXNvbHZlcikgewogICAgICAgICAgICAgIGxldCByZXR2YWwgPSBmYWxzZTsgLy8gVE8gRE86IGludmVzdGlnYXRlIHdoeSBzcGhlcmVQYXJ0aWNsZSBhbmQgY29udmV4UGFydGljbGUKICAgICAgICAgICAgICAvLyByZXNvbHZlcnMgZXhwZWN0IHNpIGFuZCBzaiBzaGFwZXMgdG8gYmUgaW4gcmV2ZXJzZSBvcmRlcgogICAgICAgICAgICAgIC8vIChpLmUuIGxhcmdlciBpbnRlZ2VyIHZhbHVlIHR5cGUgZmlyc3QgaW5zdGVhZCBvZiBzbWFsbGVyIGZpcnN0KQoKICAgICAgICAgICAgICBpZiAoc2kudHlwZSA8IHNqLnR5cGUpIHsKICAgICAgICAgICAgICAgIHJldHZhbCA9IHJlc29sdmVyLmNhbGwodGhpcywgc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCBzaSwgc2osIGp1c3RUZXN0KTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmV0dmFsID0gcmVzb2x2ZXIuY2FsbCh0aGlzLCBzaiwgc2ksIHhqLCB4aSwgcWosIHFpLCBiaiwgYmksIHNpLCBzaiwganVzdFRlc3QpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaWYgKHJldHZhbCAmJiBqdXN0VGVzdCkgewogICAgICAgICAgICAgICAgLy8gUmVnaXN0ZXIgb3ZlcmxhcAogICAgICAgICAgICAgICAgd29ybGQuc2hhcGVPdmVybGFwS2VlcGVyLnNldChzaS5pZCwgc2ouaWQpOwogICAgICAgICAgICAgICAgd29ybGQuYm9keU92ZXJsYXBLZWVwZXIuc2V0KGJpLmlkLCBiai5pZCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgc3BoZXJlU3BoZXJlKHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIGlmIChqdXN0VGVzdCkgewogICAgICAgIHJldHVybiB4aS5kaXN0YW5jZVNxdWFyZWQoeGopIDwgKHNpLnJhZGl1cyArIHNqLnJhZGl1cykgKiogMjsKICAgICAgfSAvLyBXZSB3aWxsIGhhdmUgb25seSBvbmUgY29udGFjdCBpbiB0aGlzIGNhc2UKCgogICAgICBjb25zdCBjb250YWN0RXEgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opOyAvLyBDb250YWN0IG5vcm1hbAoKICAgICAgeGoudnN1Yih4aSwgY29udGFjdEVxLm5pKTsKICAgICAgY29udGFjdEVxLm5pLm5vcm1hbGl6ZSgpOyAvLyBDb250YWN0IHBvaW50IGxvY2F0aW9ucwoKICAgICAgY29udGFjdEVxLnJpLmNvcHkoY29udGFjdEVxLm5pKTsKICAgICAgY29udGFjdEVxLnJqLmNvcHkoY29udGFjdEVxLm5pKTsKICAgICAgY29udGFjdEVxLnJpLnNjYWxlKHNpLnJhZGl1cywgY29udGFjdEVxLnJpKTsKICAgICAgY29udGFjdEVxLnJqLnNjYWxlKC1zai5yYWRpdXMsIGNvbnRhY3RFcS5yaik7CiAgICAgIGNvbnRhY3RFcS5yaS52YWRkKHhpLCBjb250YWN0RXEucmkpOwogICAgICBjb250YWN0RXEucmkudnN1YihiaS5wb3NpdGlvbiwgY29udGFjdEVxLnJpKTsKICAgICAgY29udGFjdEVxLnJqLnZhZGQoeGosIGNvbnRhY3RFcS5yaik7CiAgICAgIGNvbnRhY3RFcS5yai52c3ViKGJqLnBvc2l0aW9uLCBjb250YWN0RXEucmopOwogICAgICB0aGlzLnJlc3VsdC5wdXNoKGNvbnRhY3RFcSk7CiAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChjb250YWN0RXEsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOwogICAgfQoKICAgIHNwaGVyZVBsYW5lKHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIC8vIFdlIHdpbGwgaGF2ZSBvbmUgY29udGFjdCBpbiB0aGlzIGNhc2UKICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7IC8vIENvbnRhY3Qgbm9ybWFsCgogICAgICByLm5pLnNldCgwLCAwLCAxKTsKICAgICAgcWoudm11bHQoci5uaSwgci5uaSk7CiAgICAgIHIubmkubmVnYXRlKHIubmkpOyAvLyBib2R5IGkgaXMgdGhlIHNwaGVyZSwgZmxpcCBub3JtYWwKCiAgICAgIHIubmkubm9ybWFsaXplKCk7IC8vIE5lZWRlZD8KICAgICAgLy8gVmVjdG9yIGZyb20gc3BoZXJlIGNlbnRlciB0byBjb250YWN0IHBvaW50CgogICAgICByLm5pLnNjYWxlKHNpLnJhZGl1cywgci5yaSk7IC8vIFByb2plY3QgZG93biBzcGhlcmUgb24gcGxhbmUKCiAgICAgIHhpLnZzdWIoeGosIHBvaW50X29uX3BsYW5lX3RvX3NwaGVyZSk7CiAgICAgIHIubmkuc2NhbGUoci5uaS5kb3QocG9pbnRfb25fcGxhbmVfdG9fc3BoZXJlKSwgcGxhbmVfdG9fc3BoZXJlX29ydGhvKTsKICAgICAgcG9pbnRfb25fcGxhbmVfdG9fc3BoZXJlLnZzdWIocGxhbmVfdG9fc3BoZXJlX29ydGhvLCByLnJqKTsgLy8gVGhlIHNwaGVyZSBwb3NpdGlvbiBwcm9qZWN0ZWQgdG8gcGxhbmUKCiAgICAgIGlmICgtcG9pbnRfb25fcGxhbmVfdG9fc3BoZXJlLmRvdChyLm5pKSA8PSBzaS5yYWRpdXMpIHsKICAgICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gLy8gTWFrZSBpdCByZWxhdGl2ZSB0byB0aGUgYm9keQoKCiAgICAgICAgY29uc3QgcmkgPSByLnJpOwogICAgICAgIGNvbnN0IHJqID0gci5yajsKICAgICAgICByaS52YWRkKHhpLCByaSk7CiAgICAgICAgcmkudnN1YihiaS5wb3NpdGlvbiwgcmkpOwogICAgICAgIHJqLnZhZGQoeGosIHJqKTsKICAgICAgICByai52c3ViKGJqLnBvc2l0aW9uLCByaik7CiAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTsKICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7CiAgICAgIH0KICAgIH0KCiAgICBib3hCb3goc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLm1hdGVyaWFsID0gc2kubWF0ZXJpYWw7CiAgICAgIHNqLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5tYXRlcmlhbCA9IHNqLm1hdGVyaWFsOwogICAgICBzaS5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24uY29sbGlzaW9uUmVzcG9uc2UgPSBzaS5jb2xsaXNpb25SZXNwb25zZTsKICAgICAgc2ouY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLmNvbGxpc2lvblJlc3BvbnNlID0gc2ouY29sbGlzaW9uUmVzcG9uc2U7CiAgICAgIHJldHVybiB0aGlzLmNvbnZleENvbnZleChzaS5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24sIHNqLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgc2ksIHNqLCBqdXN0VGVzdCk7CiAgICB9CgogICAgc3BoZXJlQm94KHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIGNvbnN0IHYzcG9vbCA9IHRoaXMudjNwb29sOyAvLyB3ZSByZWZlciB0byB0aGUgYm94IGFzIGJvZHkgagoKICAgICAgY29uc3Qgc2lkZXMgPSBzcGhlcmVCb3hfc2lkZXM7CiAgICAgIHhpLnZzdWIoeGosIGJveF90b19zcGhlcmUpOwogICAgICBzai5nZXRTaWRlTm9ybWFscyhzaWRlcywgcWopOwogICAgICBjb25zdCBSID0gc2kucmFkaXVzOwoKICAgICAgbGV0IGZvdW5kID0gZmFsc2U7IC8vIFN0b3JlIHRoZSByZXN1bHRpbmcgc2lkZSBwZW5ldHJhdGlvbiBpbmZvCgogICAgICBjb25zdCBzaWRlX25zID0gc3BoZXJlQm94X3NpZGVfbnM7CiAgICAgIGNvbnN0IHNpZGVfbnMxID0gc3BoZXJlQm94X3NpZGVfbnMxOwogICAgICBjb25zdCBzaWRlX25zMiA9IHNwaGVyZUJveF9zaWRlX25zMjsKICAgICAgbGV0IHNpZGVfaCA9IG51bGw7CiAgICAgIGxldCBzaWRlX3BlbmV0cmF0aW9ucyA9IDA7CiAgICAgIGxldCBzaWRlX2RvdDEgPSAwOwogICAgICBsZXQgc2lkZV9kb3QyID0gMDsKICAgICAgbGV0IHNpZGVfZGlzdGFuY2UgPSBudWxsOwoKICAgICAgZm9yIChsZXQgaWR4ID0gMCwgbnNpZGVzID0gc2lkZXMubGVuZ3RoOyBpZHggIT09IG5zaWRlcyAmJiBmb3VuZCA9PT0gZmFsc2U7IGlkeCsrKSB7CiAgICAgICAgLy8gR2V0IHRoZSBwbGFuZSBzaWRlIG5vcm1hbCAobnMpCiAgICAgICAgY29uc3QgbnMgPSBzcGhlcmVCb3hfbnM7CiAgICAgICAgbnMuY29weShzaWRlc1tpZHhdKTsKICAgICAgICBjb25zdCBoID0gbnMubGVuZ3RoKCk7CiAgICAgICAgbnMubm9ybWFsaXplKCk7IC8vIFRoZSBub3JtYWwvZGlzdGFuY2UgZG90IHByb2R1Y3QgdGVsbHMgd2hpY2ggc2lkZSBvZiB0aGUgcGxhbmUgd2UgYXJlCgogICAgICAgIGNvbnN0IGRvdCA9IGJveF90b19zcGhlcmUuZG90KG5zKTsKCiAgICAgICAgaWYgKGRvdCA8IGggKyBSICYmIGRvdCA+IDApIHsKICAgICAgICAgIC8vIEludGVyc2VjdHMgcGxhbmUuIE5vdyBjaGVjayB0aGUgb3RoZXIgdHdvIGRpbWVuc2lvbnMKICAgICAgICAgIGNvbnN0IG5zMSA9IHNwaGVyZUJveF9uczE7CiAgICAgICAgICBjb25zdCBuczIgPSBzcGhlcmVCb3hfbnMyOwogICAgICAgICAgbnMxLmNvcHkoc2lkZXNbKGlkeCArIDEpICUgM10pOwogICAgICAgICAgbnMyLmNvcHkoc2lkZXNbKGlkeCArIDIpICUgM10pOwogICAgICAgICAgY29uc3QgaDEgPSBuczEubGVuZ3RoKCk7CiAgICAgICAgICBjb25zdCBoMiA9IG5zMi5sZW5ndGgoKTsKICAgICAgICAgIG5zMS5ub3JtYWxpemUoKTsKICAgICAgICAgIG5zMi5ub3JtYWxpemUoKTsKICAgICAgICAgIGNvbnN0IGRvdDEgPSBib3hfdG9fc3BoZXJlLmRvdChuczEpOwogICAgICAgICAgY29uc3QgZG90MiA9IGJveF90b19zcGhlcmUuZG90KG5zMik7CgogICAgICAgICAgaWYgKGRvdDEgPCBoMSAmJiBkb3QxID4gLWgxICYmIGRvdDIgPCBoMiAmJiBkb3QyID4gLWgyKSB7CiAgICAgICAgICAgIGNvbnN0IGRpc3QgPSBNYXRoLmFicyhkb3QgLSBoIC0gUik7CgogICAgICAgICAgICBpZiAoc2lkZV9kaXN0YW5jZSA9PT0gbnVsbCB8fCBkaXN0IDwgc2lkZV9kaXN0YW5jZSkgewogICAgICAgICAgICAgIHNpZGVfZGlzdGFuY2UgPSBkaXN0OwogICAgICAgICAgICAgIHNpZGVfZG90MSA9IGRvdDE7CiAgICAgICAgICAgICAgc2lkZV9kb3QyID0gZG90MjsKICAgICAgICAgICAgICBzaWRlX2ggPSBoOwogICAgICAgICAgICAgIHNpZGVfbnMuY29weShucyk7CiAgICAgICAgICAgICAgc2lkZV9uczEuY29weShuczEpOwogICAgICAgICAgICAgIHNpZGVfbnMyLmNvcHkobnMyKTsKICAgICAgICAgICAgICBzaWRlX3BlbmV0cmF0aW9ucysrOwoKICAgICAgICAgICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKHNpZGVfcGVuZXRyYXRpb25zKSB7CiAgICAgICAgZm91bmQgPSB0cnVlOwogICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opOwogICAgICAgIHNpZGVfbnMuc2NhbGUoLVIsIHIucmkpOyAvLyBTcGhlcmUgcgoKICAgICAgICByLm5pLmNvcHkoc2lkZV9ucyk7CiAgICAgICAgci5uaS5uZWdhdGUoci5uaSk7IC8vIE5vcm1hbCBzaG91bGQgYmUgb3V0IG9mIHNwaGVyZQoKICAgICAgICBzaWRlX25zLnNjYWxlKHNpZGVfaCwgc2lkZV9ucyk7CiAgICAgICAgc2lkZV9uczEuc2NhbGUoc2lkZV9kb3QxLCBzaWRlX25zMSk7CiAgICAgICAgc2lkZV9ucy52YWRkKHNpZGVfbnMxLCBzaWRlX25zKTsKICAgICAgICBzaWRlX25zMi5zY2FsZShzaWRlX2RvdDIsIHNpZGVfbnMyKTsKICAgICAgICBzaWRlX25zLnZhZGQoc2lkZV9uczIsIHIucmopOyAvLyBNYWtlIHJlbGF0aXZlIHRvIGJvZGllcwoKICAgICAgICByLnJpLnZhZGQoeGksIHIucmkpOwogICAgICAgIHIucmkudnN1YihiaS5wb3NpdGlvbiwgci5yaSk7CiAgICAgICAgci5yai52YWRkKHhqLCByLnJqKTsKICAgICAgICByLnJqLnZzdWIoYmoucG9zaXRpb24sIHIucmopOwogICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7CiAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOwogICAgICB9IC8vIENoZWNrIGNvcm5lcnMKCgogICAgICBsZXQgcmogPSB2M3Bvb2wuZ2V0KCk7CiAgICAgIGNvbnN0IHNwaGVyZV90b19jb3JuZXIgPSBzcGhlcmVCb3hfc3BoZXJlX3RvX2Nvcm5lcjsKCiAgICAgIGZvciAobGV0IGogPSAwOyBqICE9PSAyICYmICFmb3VuZDsgaisrKSB7CiAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgIT09IDIgJiYgIWZvdW5kOyBrKyspIHsKICAgICAgICAgIGZvciAobGV0IGwgPSAwOyBsICE9PSAyICYmICFmb3VuZDsgbCsrKSB7CiAgICAgICAgICAgIHJqLnNldCgwLCAwLCAwKTsKCiAgICAgICAgICAgIGlmIChqKSB7CiAgICAgICAgICAgICAgcmoudmFkZChzaWRlc1swXSwgcmopOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHJqLnZzdWIoc2lkZXNbMF0sIHJqKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGspIHsKICAgICAgICAgICAgICByai52YWRkKHNpZGVzWzFdLCByaik7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmoudnN1YihzaWRlc1sxXSwgcmopOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAobCkgewogICAgICAgICAgICAgIHJqLnZhZGQoc2lkZXNbMl0sIHJqKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByai52c3ViKHNpZGVzWzJdLCByaik7CiAgICAgICAgICAgIH0gLy8gV29ybGQgcG9zaXRpb24gb2YgY29ybmVyCgoKICAgICAgICAgICAgeGoudmFkZChyaiwgc3BoZXJlX3RvX2Nvcm5lcik7CiAgICAgICAgICAgIHNwaGVyZV90b19jb3JuZXIudnN1Yih4aSwgc3BoZXJlX3RvX2Nvcm5lcik7CgogICAgICAgICAgICBpZiAoc3BoZXJlX3RvX2Nvcm5lci5sZW5ndGhTcXVhcmVkKCkgPCBSICogUikgewogICAgICAgICAgICAgIGlmIChqdXN0VGVzdCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7CiAgICAgICAgICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7CiAgICAgICAgICAgICAgci5yaS5jb3B5KHNwaGVyZV90b19jb3JuZXIpOwogICAgICAgICAgICAgIHIucmkubm9ybWFsaXplKCk7CiAgICAgICAgICAgICAgci5uaS5jb3B5KHIucmkpOwogICAgICAgICAgICAgIHIucmkuc2NhbGUoUiwgci5yaSk7CiAgICAgICAgICAgICAgci5yai5jb3B5KHJqKTsgLy8gTWFrZSByZWxhdGl2ZSB0byBib2RpZXMKCiAgICAgICAgICAgICAgci5yaS52YWRkKHhpLCByLnJpKTsKICAgICAgICAgICAgICByLnJpLnZzdWIoYmkucG9zaXRpb24sIHIucmkpOwogICAgICAgICAgICAgIHIucmoudmFkZCh4aiwgci5yaik7CiAgICAgICAgICAgICAgci5yai52c3ViKGJqLnBvc2l0aW9uLCByLnJqKTsKICAgICAgICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgdjNwb29sLnJlbGVhc2UocmopOwogICAgICByaiA9IG51bGw7IC8vIENoZWNrIGVkZ2VzCgogICAgICBjb25zdCBlZGdlVGFuZ2VudCA9IHYzcG9vbC5nZXQoKTsKICAgICAgY29uc3QgZWRnZUNlbnRlciA9IHYzcG9vbC5nZXQoKTsKICAgICAgY29uc3QgciA9IHYzcG9vbC5nZXQoKTsgLy8gciA9IGVkZ2UgY2VudGVyIHRvIHNwaGVyZSBjZW50ZXIKCiAgICAgIGNvbnN0IG9ydGhvZ29uYWwgPSB2M3Bvb2wuZ2V0KCk7CiAgICAgIGNvbnN0IGRpc3QgPSB2M3Bvb2wuZ2V0KCk7CiAgICAgIGNvbnN0IE5zaWRlcyA9IHNpZGVzLmxlbmd0aDsKCiAgICAgIGZvciAobGV0IGogPSAwOyBqICE9PSBOc2lkZXMgJiYgIWZvdW5kOyBqKyspIHsKICAgICAgICBmb3IgKGxldCBrID0gMDsgayAhPT0gTnNpZGVzICYmICFmb3VuZDsgaysrKSB7CiAgICAgICAgICBpZiAoaiAlIDMgIT09IGsgJSAzKSB7CiAgICAgICAgICAgIC8vIEdldCBlZGdlIHRhbmdlbnQKICAgICAgICAgICAgc2lkZXNba10uY3Jvc3Moc2lkZXNbal0sIGVkZ2VUYW5nZW50KTsKICAgICAgICAgICAgZWRnZVRhbmdlbnQubm9ybWFsaXplKCk7CiAgICAgICAgICAgIHNpZGVzW2pdLnZhZGQoc2lkZXNba10sIGVkZ2VDZW50ZXIpOwogICAgICAgICAgICByLmNvcHkoeGkpOwogICAgICAgICAgICByLnZzdWIoZWRnZUNlbnRlciwgcik7CiAgICAgICAgICAgIHIudnN1Yih4aiwgcik7CiAgICAgICAgICAgIGNvbnN0IG9ydGhvbm9ybSA9IHIuZG90KGVkZ2VUYW5nZW50KTsgLy8gZGlzdGFuY2UgZnJvbSBlZGdlIGNlbnRlciB0byBzcGhlcmUgY2VudGVyIGluIHRoZSB0YW5nZW50IGRpcmVjdGlvbgoKICAgICAgICAgICAgZWRnZVRhbmdlbnQuc2NhbGUob3J0aG9ub3JtLCBvcnRob2dvbmFsKTsgLy8gVmVjdG9yIGZyb20gZWRnZSBjZW50ZXIgdG8gc3BoZXJlIGNlbnRlciBpbiB0aGUgdGFuZ2VudCBkaXJlY3Rpb24KICAgICAgICAgICAgLy8gRmluZCB0aGUgdGhpcmQgc2lkZSBvcnRob2dvbmFsIHRvIHRoaXMgb25lCgogICAgICAgICAgICBsZXQgbCA9IDA7CgogICAgICAgICAgICB3aGlsZSAobCA9PT0gaiAlIDMgfHwgbCA9PT0gayAlIDMpIHsKICAgICAgICAgICAgICBsKys7CiAgICAgICAgICAgIH0gLy8gdmVjIGZyb20gZWRnZSBjZW50ZXIgdG8gc3BoZXJlIHByb2plY3RlZCB0byB0aGUgcGxhbmUgb3J0aG9nb25hbCB0byB0aGUgZWRnZSB0YW5nZW50CgoKICAgICAgICAgICAgZGlzdC5jb3B5KHhpKTsKICAgICAgICAgICAgZGlzdC52c3ViKG9ydGhvZ29uYWwsIGRpc3QpOwogICAgICAgICAgICBkaXN0LnZzdWIoZWRnZUNlbnRlciwgZGlzdCk7CiAgICAgICAgICAgIGRpc3QudnN1Yih4aiwgZGlzdCk7IC8vIERpc3RhbmNlcyBpbiB0YW5nZW50IGRpcmVjdGlvbiBhbmQgZGlzdGFuY2UgaW4gdGhlIHBsYW5lIG9ydGhvZ29uYWwgdG8gaXQKCiAgICAgICAgICAgIGNvbnN0IHRkaXN0ID0gTWF0aC5hYnMob3J0aG9ub3JtKTsKICAgICAgICAgICAgY29uc3QgbmRpc3QgPSBkaXN0Lmxlbmd0aCgpOwoKICAgICAgICAgICAgaWYgKHRkaXN0IDwgc2lkZXNbbF0ubGVuZ3RoKCkgJiYgbmRpc3QgPCBSKSB7CiAgICAgICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTsKICAgICAgICAgICAgICBjb25zdCByZXMgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opOwogICAgICAgICAgICAgIGVkZ2VDZW50ZXIudmFkZChvcnRob2dvbmFsLCByZXMucmopOyAvLyBib3ggcmoKCiAgICAgICAgICAgICAgcmVzLnJqLmNvcHkocmVzLnJqKTsKICAgICAgICAgICAgICBkaXN0Lm5lZ2F0ZShyZXMubmkpOwogICAgICAgICAgICAgIHJlcy5uaS5ub3JtYWxpemUoKTsKICAgICAgICAgICAgICByZXMucmkuY29weShyZXMucmopOwogICAgICAgICAgICAgIHJlcy5yaS52YWRkKHhqLCByZXMucmkpOwogICAgICAgICAgICAgIHJlcy5yaS52c3ViKHhpLCByZXMucmkpOwogICAgICAgICAgICAgIHJlcy5yaS5ub3JtYWxpemUoKTsKICAgICAgICAgICAgICByZXMucmkuc2NhbGUoUiwgcmVzLnJpKTsgLy8gTWFrZSByZWxhdGl2ZSB0byBib2RpZXMKCiAgICAgICAgICAgICAgcmVzLnJpLnZhZGQoeGksIHJlcy5yaSk7CiAgICAgICAgICAgICAgcmVzLnJpLnZzdWIoYmkucG9zaXRpb24sIHJlcy5yaSk7CiAgICAgICAgICAgICAgcmVzLnJqLnZhZGQoeGosIHJlcy5yaik7CiAgICAgICAgICAgICAgcmVzLnJqLnZzdWIoYmoucG9zaXRpb24sIHJlcy5yaik7CiAgICAgICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyZXMpOwogICAgICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyZXMsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICB2M3Bvb2wucmVsZWFzZShlZGdlVGFuZ2VudCwgZWRnZUNlbnRlciwgciwgb3J0aG9nb25hbCwgZGlzdCk7CiAgICB9CgogICAgcGxhbmVCb3goc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgc2ouY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLm1hdGVyaWFsID0gc2oubWF0ZXJpYWw7CiAgICAgIHNqLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5jb2xsaXNpb25SZXNwb25zZSA9IHNqLmNvbGxpc2lvblJlc3BvbnNlOwogICAgICBzai5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24uaWQgPSBzai5pZDsKICAgICAgcmV0dXJuIHRoaXMucGxhbmVDb252ZXgoc2ksIHNqLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgc2ksIHNqLCBqdXN0VGVzdCk7CiAgICB9CgogICAgY29udmV4Q29udmV4KHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0LCBmYWNlTGlzdEEsIGZhY2VMaXN0QikgewogICAgICBjb25zdCBzZXBBeGlzID0gY29udmV4Q29udmV4X3NlcEF4aXM7CgogICAgICBpZiAoeGkuZGlzdGFuY2VUbyh4aikgPiBzaS5ib3VuZGluZ1NwaGVyZVJhZGl1cyArIHNqLmJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoc2kuZmluZFNlcGFyYXRpbmdBeGlzKHNqLCB4aSwgcWksIHhqLCBxaiwgc2VwQXhpcywgZmFjZUxpc3RBLCBmYWNlTGlzdEIpKSB7CiAgICAgICAgY29uc3QgcmVzID0gW107CiAgICAgICAgY29uc3QgcSA9IGNvbnZleENvbnZleF9xOwogICAgICAgIHNpLmNsaXBBZ2FpbnN0SHVsbCh4aSwgcWksIHNqLCB4aiwgcWosIHNlcEF4aXMsIC0xMDAsIDEwMCwgcmVzKTsKICAgICAgICBsZXQgbnVtQ29udGFjdHMgPSAwOwoKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gcmVzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CgogICAgICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7CiAgICAgICAgICBjb25zdCByaSA9IHIucmk7CiAgICAgICAgICBjb25zdCByaiA9IHIucmo7CiAgICAgICAgICBzZXBBeGlzLm5lZ2F0ZShyLm5pKTsKICAgICAgICAgIHJlc1tqXS5ub3JtYWwubmVnYXRlKHEpOwogICAgICAgICAgcS5zY2FsZShyZXNbal0uZGVwdGgsIHEpOwogICAgICAgICAgcmVzW2pdLnBvaW50LnZhZGQocSwgcmkpOwogICAgICAgICAgcmouY29weShyZXNbal0ucG9pbnQpOyAvLyBDb250YWN0IHBvaW50cyBhcmUgaW4gd29ybGQgY29vcmRpbmF0ZXMuIFRyYW5zZm9ybSBiYWNrIHRvIHJlbGF0aXZlCgogICAgICAgICAgcmkudnN1Yih4aSwgcmkpOwogICAgICAgICAgcmoudnN1Yih4aiwgcmopOyAvLyBNYWtlIHJlbGF0aXZlIHRvIGJvZGllcwoKICAgICAgICAgIHJpLnZhZGQoeGksIHJpKTsKICAgICAgICAgIHJpLnZzdWIoYmkucG9zaXRpb24sIHJpKTsKICAgICAgICAgIHJqLnZhZGQoeGosIHJqKTsKICAgICAgICAgIHJqLnZzdWIoYmoucG9zaXRpb24sIHJqKTsKICAgICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7CiAgICAgICAgICBudW1Db250YWN0cysrOwoKICAgICAgICAgIGlmICghdGhpcy5lbmFibGVGcmljdGlvblJlZHVjdGlvbikgewogICAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAodGhpcy5lbmFibGVGcmljdGlvblJlZHVjdGlvbiAmJiBudW1Db250YWN0cykgewogICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkZyb21BdmVyYWdlKG51bUNvbnRhY3RzKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBzcGhlcmVDb252ZXgoc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgY29uc3QgdjNwb29sID0gdGhpcy52M3Bvb2w7CiAgICAgIHhpLnZzdWIoeGosIGNvbnZleF90b19zcGhlcmUpOwogICAgICBjb25zdCBub3JtYWxzID0gc2ouZmFjZU5vcm1hbHM7CiAgICAgIGNvbnN0IGZhY2VzID0gc2ouZmFjZXM7CiAgICAgIGNvbnN0IHZlcnRzID0gc2oudmVydGljZXM7CiAgICAgIGNvbnN0IFIgPSBzaS5yYWRpdXM7CiAgICAgIC8vICAgICByZXR1cm47CiAgICAgIC8vIH0KCiAgICAgIGxldCBmb3VuZCA9IGZhbHNlOyAvLyBDaGVjayBjb3JuZXJzCgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gdmVydHMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCB2ID0gdmVydHNbaV07IC8vIFdvcmxkIHBvc2l0aW9uIG9mIGNvcm5lcgoKICAgICAgICBjb25zdCB3b3JsZENvcm5lciA9IHNwaGVyZUNvbnZleF93b3JsZENvcm5lcjsKICAgICAgICBxai52bXVsdCh2LCB3b3JsZENvcm5lcik7CiAgICAgICAgeGoudmFkZCh3b3JsZENvcm5lciwgd29ybGRDb3JuZXIpOwogICAgICAgIGNvbnN0IHNwaGVyZV90b19jb3JuZXIgPSBzcGhlcmVDb252ZXhfc3BoZXJlVG9Db3JuZXI7CiAgICAgICAgd29ybGRDb3JuZXIudnN1Yih4aSwgc3BoZXJlX3RvX2Nvcm5lcik7CgogICAgICAgIGlmIChzcGhlcmVfdG9fY29ybmVyLmxlbmd0aFNxdWFyZWQoKSA8IFIgKiBSKSB7CiAgICAgICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CgogICAgICAgICAgZm91bmQgPSB0cnVlOwogICAgICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7CiAgICAgICAgICByLnJpLmNvcHkoc3BoZXJlX3RvX2Nvcm5lcik7CiAgICAgICAgICByLnJpLm5vcm1hbGl6ZSgpOwogICAgICAgICAgci5uaS5jb3B5KHIucmkpOwogICAgICAgICAgci5yaS5zY2FsZShSLCByLnJpKTsKICAgICAgICAgIHdvcmxkQ29ybmVyLnZzdWIoeGosIHIucmopOyAvLyBTaG91bGQgYmUgcmVsYXRpdmUgdG8gdGhlIGJvZHkuCgogICAgICAgICAgci5yaS52YWRkKHhpLCByLnJpKTsKICAgICAgICAgIHIucmkudnN1YihiaS5wb3NpdGlvbiwgci5yaSk7IC8vIFNob3VsZCBiZSByZWxhdGl2ZSB0byB0aGUgYm9keS4KCiAgICAgICAgICByLnJqLnZhZGQoeGosIHIucmopOwogICAgICAgICAgci5yai52c3ViKGJqLnBvc2l0aW9uLCByLnJqKTsKICAgICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7CiAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICB9IC8vIENoZWNrIHNpZGUgKHBsYW5lKSBpbnRlcnNlY3Rpb25zCgoKICAgICAgZm9yIChsZXQgaSA9IDAsIG5mYWNlcyA9IGZhY2VzLmxlbmd0aDsgaSAhPT0gbmZhY2VzICYmIGZvdW5kID09PSBmYWxzZTsgaSsrKSB7CiAgICAgICAgY29uc3Qgbm9ybWFsID0gbm9ybWFsc1tpXTsKICAgICAgICBjb25zdCBmYWNlID0gZmFjZXNbaV07IC8vIEdldCB3b3JsZC10cmFuc2Zvcm1lZCBub3JtYWwgb2YgdGhlIGZhY2UKCiAgICAgICAgY29uc3Qgd29ybGROb3JtYWwgPSBzcGhlcmVDb252ZXhfd29ybGROb3JtYWw7CiAgICAgICAgcWoudm11bHQobm9ybWFsLCB3b3JsZE5vcm1hbCk7IC8vIEdldCBhIHdvcmxkIHZlcnRleCBmcm9tIHRoZSBmYWNlCgogICAgICAgIGNvbnN0IHdvcmxkUG9pbnQgPSBzcGhlcmVDb252ZXhfd29ybGRQb2ludDsKICAgICAgICBxai52bXVsdCh2ZXJ0c1tmYWNlWzBdXSwgd29ybGRQb2ludCk7CiAgICAgICAgd29ybGRQb2ludC52YWRkKHhqLCB3b3JsZFBvaW50KTsgLy8gR2V0IGEgcG9pbnQgb24gdGhlIHNwaGVyZSwgY2xvc2VzdCB0byB0aGUgZmFjZSBub3JtYWwKCiAgICAgICAgY29uc3Qgd29ybGRTcGhlcmVQb2ludENsb3Nlc3RUb1BsYW5lID0gc3BoZXJlQ29udmV4X3dvcmxkU3BoZXJlUG9pbnRDbG9zZXN0VG9QbGFuZTsKICAgICAgICB3b3JsZE5vcm1hbC5zY2FsZSgtUiwgd29ybGRTcGhlcmVQb2ludENsb3Nlc3RUb1BsYW5lKTsKICAgICAgICB4aS52YWRkKHdvcmxkU3BoZXJlUG9pbnRDbG9zZXN0VG9QbGFuZSwgd29ybGRTcGhlcmVQb2ludENsb3Nlc3RUb1BsYW5lKTsgLy8gVmVjdG9yIGZyb20gYSBmYWNlIHBvaW50IHRvIHRoZSBjbG9zZXN0IHBvaW50IG9uIHRoZSBzcGhlcmUKCiAgICAgICAgY29uc3QgcGVuZXRyYXRpb25WZWMgPSBzcGhlcmVDb252ZXhfcGVuZXRyYXRpb25WZWM7CiAgICAgICAgd29ybGRTcGhlcmVQb2ludENsb3Nlc3RUb1BsYW5lLnZzdWIod29ybGRQb2ludCwgcGVuZXRyYXRpb25WZWMpOyAvLyBUaGUgcGVuZXRyYXRpb24uIE5lZ2F0aXZlIHZhbHVlIG1lYW5zIG92ZXJsYXAuCgogICAgICAgIGNvbnN0IHBlbmV0cmF0aW9uID0gcGVuZXRyYXRpb25WZWMuZG90KHdvcmxkTm9ybWFsKTsKICAgICAgICBjb25zdCB3b3JsZFBvaW50VG9TcGhlcmUgPSBzcGhlcmVDb252ZXhfc3BoZXJlVG9Xb3JsZFBvaW50OwogICAgICAgIHhpLnZzdWIod29ybGRQb2ludCwgd29ybGRQb2ludFRvU3BoZXJlKTsKCiAgICAgICAgaWYgKHBlbmV0cmF0aW9uIDwgMCAmJiB3b3JsZFBvaW50VG9TcGhlcmUuZG90KHdvcmxkTm9ybWFsKSA+IDApIHsKICAgICAgICAgIC8vIEludGVyc2VjdHMgcGxhbmUuIE5vdyBjaGVjayBpZiB0aGUgc3BoZXJlIGlzIGluc2lkZSB0aGUgZmFjZSBwb2x5Z29uCiAgICAgICAgICBjb25zdCBmYWNlVmVydHMgPSBbXTsgLy8gRmFjZSB2ZXJ0aWNlcywgaW4gd29ybGQgY29vcmRzCgogICAgICAgICAgZm9yIChsZXQgaiA9IDAsIE52ZXJ0cyA9IGZhY2UubGVuZ3RoOyBqICE9PSBOdmVydHM7IGorKykgewogICAgICAgICAgICBjb25zdCB3b3JsZFZlcnRleCA9IHYzcG9vbC5nZXQoKTsKICAgICAgICAgICAgcWoudm11bHQodmVydHNbZmFjZVtqXV0sIHdvcmxkVmVydGV4KTsKICAgICAgICAgICAgeGoudmFkZCh3b3JsZFZlcnRleCwgd29ybGRWZXJ0ZXgpOwogICAgICAgICAgICBmYWNlVmVydHMucHVzaCh3b3JsZFZlcnRleCk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHBvaW50SW5Qb2x5Z29uKGZhY2VWZXJ0cywgd29ybGROb3JtYWwsIHhpKSkgewogICAgICAgICAgICAvLyBJcyB0aGUgc3BoZXJlIGNlbnRlciBpbiB0aGUgZmFjZSBwb2x5Z29uPwogICAgICAgICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZm91bmQgPSB0cnVlOwogICAgICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTsKICAgICAgICAgICAgd29ybGROb3JtYWwuc2NhbGUoLVIsIHIucmkpOyAvLyBDb250YWN0IG9mZnNldCwgZnJvbSBzcGhlcmUgY2VudGVyIHRvIGNvbnRhY3QKCiAgICAgICAgICAgIHdvcmxkTm9ybWFsLm5lZ2F0ZShyLm5pKTsgLy8gTm9ybWFsIHBvaW50aW5nIG91dCBvZiBzcGhlcmUKCiAgICAgICAgICAgIGNvbnN0IHBlbmV0cmF0aW9uVmVjMiA9IHYzcG9vbC5nZXQoKTsKICAgICAgICAgICAgd29ybGROb3JtYWwuc2NhbGUoLXBlbmV0cmF0aW9uLCBwZW5ldHJhdGlvblZlYzIpOwogICAgICAgICAgICBjb25zdCBwZW5ldHJhdGlvblNwaGVyZVBvaW50ID0gdjNwb29sLmdldCgpOwogICAgICAgICAgICB3b3JsZE5vcm1hbC5zY2FsZSgtUiwgcGVuZXRyYXRpb25TcGhlcmVQb2ludCk7IC8veGkudnN1Yih4aikudmFkZChwZW5ldHJhdGlvblNwaGVyZVBvaW50KS52YWRkKHBlbmV0cmF0aW9uVmVjMiAsIHIucmopOwoKICAgICAgICAgICAgeGkudnN1Yih4aiwgci5yaik7CiAgICAgICAgICAgIHIucmoudmFkZChwZW5ldHJhdGlvblNwaGVyZVBvaW50LCByLnJqKTsKICAgICAgICAgICAgci5yai52YWRkKHBlbmV0cmF0aW9uVmVjMiwgci5yaik7IC8vIFNob3VsZCBiZSByZWxhdGl2ZSB0byB0aGUgYm9keS4KCiAgICAgICAgICAgIHIucmoudmFkZCh4aiwgci5yaik7CiAgICAgICAgICAgIHIucmoudnN1Yihiai5wb3NpdGlvbiwgci5yaik7IC8vIFNob3VsZCBiZSByZWxhdGl2ZSB0byB0aGUgYm9keS4KCiAgICAgICAgICAgIHIucmkudmFkZCh4aSwgci5yaSk7CiAgICAgICAgICAgIHIucmkudnN1YihiaS5wb3NpdGlvbiwgci5yaSk7CiAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHBlbmV0cmF0aW9uVmVjMik7CiAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHBlbmV0cmF0aW9uU3BoZXJlUG9pbnQpOwogICAgICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7IC8vIFJlbGVhc2Ugd29ybGQgdmVydGljZXMKCiAgICAgICAgICAgIGZvciAobGV0IGogPSAwLCBOZmFjZXZlcnRzID0gZmFjZVZlcnRzLmxlbmd0aDsgaiAhPT0gTmZhY2V2ZXJ0czsgaisrKSB7CiAgICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UoZmFjZVZlcnRzW2pdKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuOyAvLyBXZSBvbmx5IGV4cGVjdCAqb25lKiBmYWNlIGNvbnRhY3QKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIEVkZ2U/CiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqICE9PSBmYWNlLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgLy8gR2V0IHR3byB3b3JsZCB0cmFuc2Zvcm1lZCB2ZXJ0aWNlcwogICAgICAgICAgICAgIGNvbnN0IHYxID0gdjNwb29sLmdldCgpOwogICAgICAgICAgICAgIGNvbnN0IHYyID0gdjNwb29sLmdldCgpOwogICAgICAgICAgICAgIHFqLnZtdWx0KHZlcnRzW2ZhY2VbKGogKyAxKSAlIGZhY2UubGVuZ3RoXV0sIHYxKTsKICAgICAgICAgICAgICBxai52bXVsdCh2ZXJ0c1tmYWNlWyhqICsgMikgJSBmYWNlLmxlbmd0aF1dLCB2Mik7CiAgICAgICAgICAgICAgeGoudmFkZCh2MSwgdjEpOwogICAgICAgICAgICAgIHhqLnZhZGQodjIsIHYyKTsgLy8gQ29uc3RydWN0IGVkZ2UgdmVjdG9yCgogICAgICAgICAgICAgIGNvbnN0IGVkZ2UgPSBzcGhlcmVDb252ZXhfZWRnZTsKICAgICAgICAgICAgICB2Mi52c3ViKHYxLCBlZGdlKTsgLy8gQ29uc3RydWN0IHRoZSBzYW1lIHZlY3RvciwgYnV0IG5vcm1hbGl6ZWQKCiAgICAgICAgICAgICAgY29uc3QgZWRnZVVuaXQgPSBzcGhlcmVDb252ZXhfZWRnZVVuaXQ7CiAgICAgICAgICAgICAgZWRnZS51bml0KGVkZ2VVbml0KTsgLy8gcCBpcyB4aSBwcm9qZWN0ZWQgb250byB0aGUgZWRnZQoKICAgICAgICAgICAgICBjb25zdCBwID0gdjNwb29sLmdldCgpOwogICAgICAgICAgICAgIGNvbnN0IHYxX3RvX3hpID0gdjNwb29sLmdldCgpOwogICAgICAgICAgICAgIHhpLnZzdWIodjEsIHYxX3RvX3hpKTsKICAgICAgICAgICAgICBjb25zdCBkb3QgPSB2MV90b194aS5kb3QoZWRnZVVuaXQpOwogICAgICAgICAgICAgIGVkZ2VVbml0LnNjYWxlKGRvdCwgcCk7CiAgICAgICAgICAgICAgcC52YWRkKHYxLCBwKTsgLy8gQ29tcHV0ZSBhIHZlY3RvciBmcm9tIHAgdG8gdGhlIGNlbnRlciBvZiB0aGUgc3BoZXJlCgogICAgICAgICAgICAgIGNvbnN0IHhpX3RvX3AgPSB2M3Bvb2wuZ2V0KCk7CiAgICAgICAgICAgICAgcC52c3ViKHhpLCB4aV90b19wKTsgLy8gQ29sbGlzaW9uIGlmIHRoZSBlZGdlLXNwaGVyZSBkaXN0YW5jZSBpcyBsZXNzIHRoYW4gdGhlIHJhZGl1cwogICAgICAgICAgICAgIC8vIEFORCBpZiBwIGlzIGluIGJldHdlZW4gdjEgYW5kIHYyCgogICAgICAgICAgICAgIGlmIChkb3QgPiAwICYmIGRvdCAqIGRvdCA8IGVkZ2UubGVuZ3RoU3F1YXJlZCgpICYmIHhpX3RvX3AubGVuZ3RoU3F1YXJlZCgpIDwgUiAqIFIpIHsKICAgICAgICAgICAgICAgIC8vIENvbGxpc2lvbiBpZiB0aGUgZWRnZS1zcGhlcmUgZGlzdGFuY2UgaXMgbGVzcyB0aGFuIHRoZSByYWRpdXMKICAgICAgICAgICAgICAgIC8vIEVkZ2UgY29udGFjdCEKICAgICAgICAgICAgICAgIGlmIChqdXN0VGVzdCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTsKICAgICAgICAgICAgICAgIHAudnN1Yih4aiwgci5yaik7CiAgICAgICAgICAgICAgICBwLnZzdWIoeGksIHIubmkpOwogICAgICAgICAgICAgICAgci5uaS5ub3JtYWxpemUoKTsKICAgICAgICAgICAgICAgIHIubmkuc2NhbGUoUiwgci5yaSk7IC8vIFNob3VsZCBiZSByZWxhdGl2ZSB0byB0aGUgYm9keS4KCiAgICAgICAgICAgICAgICByLnJqLnZhZGQoeGosIHIucmopOwogICAgICAgICAgICAgICAgci5yai52c3ViKGJqLnBvc2l0aW9uLCByLnJqKTsgLy8gU2hvdWxkIGJlIHJlbGF0aXZlIHRvIHRoZSBib2R5LgoKICAgICAgICAgICAgICAgIHIucmkudmFkZCh4aSwgci5yaSk7CiAgICAgICAgICAgICAgICByLnJpLnZzdWIoYmkucG9zaXRpb24sIHIucmkpOwogICAgICAgICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTsKICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsgLy8gUmVsZWFzZSB3b3JsZCB2ZXJ0aWNlcwoKICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwLCBOZmFjZXZlcnRzID0gZmFjZVZlcnRzLmxlbmd0aDsgaiAhPT0gTmZhY2V2ZXJ0czsgaisrKSB7CiAgICAgICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKGZhY2VWZXJ0c1tqXSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UodjEpOwogICAgICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UodjIpOwogICAgICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UocCk7CiAgICAgICAgICAgICAgICB2M3Bvb2wucmVsZWFzZSh4aV90b19wKTsKICAgICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHYxX3RvX3hpKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHYxKTsKICAgICAgICAgICAgICB2M3Bvb2wucmVsZWFzZSh2Mik7CiAgICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UocCk7CiAgICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UoeGlfdG9fcCk7CiAgICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UodjFfdG9feGkpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IC8vIFJlbGVhc2Ugd29ybGQgdmVydGljZXMKCgogICAgICAgICAgZm9yIChsZXQgaiA9IDAsIE5mYWNldmVydHMgPSBmYWNlVmVydHMubGVuZ3RoOyBqICE9PSBOZmFjZXZlcnRzOyBqKyspIHsKICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UoZmFjZVZlcnRzW2pdKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBwbGFuZUNvbnZleChwbGFuZVNoYXBlLCBjb252ZXhTaGFwZSwgcGxhbmVQb3NpdGlvbiwgY29udmV4UG9zaXRpb24sIHBsYW5lUXVhdCwgY29udmV4UXVhdCwgcGxhbmVCb2R5LCBjb252ZXhCb2R5LCBzaSwgc2osIGp1c3RUZXN0KSB7CiAgICAgIC8vIFNpbXBseSByZXR1cm4gdGhlIHBvaW50cyBiZWhpbmQgdGhlIHBsYW5lLgogICAgICBjb25zdCB3b3JsZFZlcnRleCA9IHBsYW5lQ29udmV4X3Y7CiAgICAgIGNvbnN0IHdvcmxkTm9ybWFsID0gcGxhbmVDb252ZXhfbm9ybWFsOwogICAgICB3b3JsZE5vcm1hbC5zZXQoMCwgMCwgMSk7CiAgICAgIHBsYW5lUXVhdC52bXVsdCh3b3JsZE5vcm1hbCwgd29ybGROb3JtYWwpOyAvLyBUdXJuIG5vcm1hbCBhY2NvcmRpbmcgdG8gcGxhbmUgb3JpZW50YXRpb24KCiAgICAgIGxldCBudW1Db250YWN0cyA9IDA7CiAgICAgIGNvbnN0IHJlbHBvcyA9IHBsYW5lQ29udmV4X3JlbHBvczsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBjb252ZXhTaGFwZS52ZXJ0aWNlcy5sZW5ndGg7IGkrKykgewogICAgICAgIC8vIEdldCB3b3JsZCBjb252ZXggdmVydGV4CiAgICAgICAgd29ybGRWZXJ0ZXguY29weShjb252ZXhTaGFwZS52ZXJ0aWNlc1tpXSk7CiAgICAgICAgY29udmV4UXVhdC52bXVsdCh3b3JsZFZlcnRleCwgd29ybGRWZXJ0ZXgpOwogICAgICAgIGNvbnZleFBvc2l0aW9uLnZhZGQod29ybGRWZXJ0ZXgsIHdvcmxkVmVydGV4KTsKICAgICAgICB3b3JsZFZlcnRleC52c3ViKHBsYW5lUG9zaXRpb24sIHJlbHBvcyk7CiAgICAgICAgY29uc3QgZG90ID0gd29ybGROb3JtYWwuZG90KHJlbHBvcyk7CgogICAgICAgIGlmIChkb3QgPD0gMC4wKSB7CiAgICAgICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CgogICAgICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKHBsYW5lQm9keSwgY29udmV4Qm9keSwgcGxhbmVTaGFwZSwgY29udmV4U2hhcGUsIHNpLCBzaik7IC8vIEdldCB2ZXJ0ZXggcG9zaXRpb24gcHJvamVjdGVkIG9uIHBsYW5lCgogICAgICAgICAgY29uc3QgcHJvamVjdGVkID0gcGxhbmVDb252ZXhfcHJvamVjdGVkOwogICAgICAgICAgd29ybGROb3JtYWwuc2NhbGUod29ybGROb3JtYWwuZG90KHJlbHBvcyksIHByb2plY3RlZCk7CiAgICAgICAgICB3b3JsZFZlcnRleC52c3ViKHByb2plY3RlZCwgcHJvamVjdGVkKTsKICAgICAgICAgIHByb2plY3RlZC52c3ViKHBsYW5lUG9zaXRpb24sIHIucmkpOyAvLyBGcm9tIHBsYW5lIHRvIHZlcnRleCBwcm9qZWN0ZWQgb24gcGxhbmUKCiAgICAgICAgICByLm5pLmNvcHkod29ybGROb3JtYWwpOyAvLyBDb250YWN0IG5vcm1hbCBpcyB0aGUgcGxhbmUgbm9ybWFsIG91dCBmcm9tIHBsYW5lCiAgICAgICAgICAvLyByaiBpcyBub3cganVzdCB0aGUgdmVjdG9yIGZyb20gdGhlIGNvbnZleCBjZW50ZXIgdG8gdGhlIHZlcnRleAoKICAgICAgICAgIHdvcmxkVmVydGV4LnZzdWIoY29udmV4UG9zaXRpb24sIHIucmopOyAvLyBNYWtlIGl0IHJlbGF0aXZlIHRvIHRoZSBib2R5CgogICAgICAgICAgci5yaS52YWRkKHBsYW5lUG9zaXRpb24sIHIucmkpOwogICAgICAgICAgci5yaS52c3ViKHBsYW5lQm9keS5wb3NpdGlvbiwgci5yaSk7CiAgICAgICAgICByLnJqLnZhZGQoY29udmV4UG9zaXRpb24sIHIucmopOwogICAgICAgICAgci5yai52c3ViKGNvbnZleEJvZHkucG9zaXRpb24sIHIucmopOwogICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTsKICAgICAgICAgIG51bUNvbnRhY3RzKys7CgogICAgICAgICAgaWYgKCF0aGlzLmVuYWJsZUZyaWN0aW9uUmVkdWN0aW9uKSB7CiAgICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmVuYWJsZUZyaWN0aW9uUmVkdWN0aW9uICYmIG51bUNvbnRhY3RzKSB7CiAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkZyb21BdmVyYWdlKG51bUNvbnRhY3RzKTsKICAgICAgfQogICAgfQoKICAgIGJveENvbnZleChzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICBzaS5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24ubWF0ZXJpYWwgPSBzaS5tYXRlcmlhbDsKICAgICAgc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLmNvbGxpc2lvblJlc3BvbnNlID0gc2kuY29sbGlzaW9uUmVzcG9uc2U7CiAgICAgIHJldHVybiB0aGlzLmNvbnZleENvbnZleChzaS5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24sIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCBzaSwgc2osIGp1c3RUZXN0KTsKICAgIH0KCiAgICBzcGhlcmVIZWlnaHRmaWVsZChzcGhlcmVTaGFwZSwgaGZTaGFwZSwgc3BoZXJlUG9zLCBoZlBvcywgc3BoZXJlUXVhdCwgaGZRdWF0LCBzcGhlcmVCb2R5LCBoZkJvZHksIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICBjb25zdCBkYXRhID0gaGZTaGFwZS5kYXRhOwogICAgICBjb25zdCByYWRpdXMgPSBzcGhlcmVTaGFwZS5yYWRpdXM7CiAgICAgIGNvbnN0IHcgPSBoZlNoYXBlLmVsZW1lbnRTaXplOwogICAgICBjb25zdCB3b3JsZFBpbGxhck9mZnNldCA9IHNwaGVyZUhlaWdodGZpZWxkX3RtcDI7IC8vIEdldCBzcGhlcmUgcG9zaXRpb24gdG8gaGVpZ2h0ZmllbGQgbG9jYWwhCgogICAgICBjb25zdCBsb2NhbFNwaGVyZVBvcyA9IHNwaGVyZUhlaWdodGZpZWxkX3RtcDE7CiAgICAgIFRyYW5zZm9ybS5wb2ludFRvTG9jYWxGcmFtZShoZlBvcywgaGZRdWF0LCBzcGhlcmVQb3MsIGxvY2FsU3BoZXJlUG9zKTsgLy8gR2V0IHRoZSBpbmRleCBvZiB0aGUgZGF0YSBwb2ludHMgdG8gdGVzdCBhZ2FpbnN0CgogICAgICBsZXQgaU1pblggPSBNYXRoLmZsb29yKChsb2NhbFNwaGVyZVBvcy54IC0gcmFkaXVzKSAvIHcpIC0gMTsKICAgICAgbGV0IGlNYXhYID0gTWF0aC5jZWlsKChsb2NhbFNwaGVyZVBvcy54ICsgcmFkaXVzKSAvIHcpICsgMTsKICAgICAgbGV0IGlNaW5ZID0gTWF0aC5mbG9vcigobG9jYWxTcGhlcmVQb3MueSAtIHJhZGl1cykgLyB3KSAtIDE7CiAgICAgIGxldCBpTWF4WSA9IE1hdGguY2VpbCgobG9jYWxTcGhlcmVQb3MueSArIHJhZGl1cykgLyB3KSArIDE7IC8vIEJhaWwgb3V0IGlmIHdlIGFyZSBvdXQgb2YgdGhlIHRlcnJhaW4KCiAgICAgIGlmIChpTWF4WCA8IDAgfHwgaU1heFkgPCAwIHx8IGlNaW5YID4gZGF0YS5sZW5ndGggfHwgaU1pblkgPiBkYXRhWzBdLmxlbmd0aCkgewogICAgICAgIHJldHVybjsKICAgICAgfSAvLyBDbGFtcCBpbmRleCB0byBlZGdlcwoKCiAgICAgIGlmIChpTWluWCA8IDApIHsKICAgICAgICBpTWluWCA9IDA7CiAgICAgIH0KCiAgICAgIGlmIChpTWF4WCA8IDApIHsKICAgICAgICBpTWF4WCA9IDA7CiAgICAgIH0KCiAgICAgIGlmIChpTWluWSA8IDApIHsKICAgICAgICBpTWluWSA9IDA7CiAgICAgIH0KCiAgICAgIGlmIChpTWF4WSA8IDApIHsKICAgICAgICBpTWF4WSA9IDA7CiAgICAgIH0KCiAgICAgIGlmIChpTWluWCA+PSBkYXRhLmxlbmd0aCkgewogICAgICAgIGlNaW5YID0gZGF0YS5sZW5ndGggLSAxOwogICAgICB9CgogICAgICBpZiAoaU1heFggPj0gZGF0YS5sZW5ndGgpIHsKICAgICAgICBpTWF4WCA9IGRhdGEubGVuZ3RoIC0gMTsKICAgICAgfQoKICAgICAgaWYgKGlNYXhZID49IGRhdGFbMF0ubGVuZ3RoKSB7CiAgICAgICAgaU1heFkgPSBkYXRhWzBdLmxlbmd0aCAtIDE7CiAgICAgIH0KCiAgICAgIGlmIChpTWluWSA+PSBkYXRhWzBdLmxlbmd0aCkgewogICAgICAgIGlNaW5ZID0gZGF0YVswXS5sZW5ndGggLSAxOwogICAgICB9CgogICAgICBjb25zdCBtaW5NYXggPSBbXTsKICAgICAgaGZTaGFwZS5nZXRSZWN0TWluTWF4KGlNaW5YLCBpTWluWSwgaU1heFgsIGlNYXhZLCBtaW5NYXgpOwogICAgICBjb25zdCBtaW4gPSBtaW5NYXhbMF07CiAgICAgIGNvbnN0IG1heCA9IG1pbk1heFsxXTsgLy8gQmFpbCBvdXQgaWYgd2UgY2FuJ3QgdG91Y2ggdGhlIGJvdW5kaW5nIGhlaWdodCBib3gKCiAgICAgIGlmIChsb2NhbFNwaGVyZVBvcy56IC0gcmFkaXVzID4gbWF4IHx8IGxvY2FsU3BoZXJlUG9zLnogKyByYWRpdXMgPCBtaW4pIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMucmVzdWx0OwoKICAgICAgZm9yIChsZXQgaSA9IGlNaW5YOyBpIDwgaU1heFg7IGkrKykgewogICAgICAgIGZvciAobGV0IGogPSBpTWluWTsgaiA8IGlNYXhZOyBqKyspIHsKICAgICAgICAgIGNvbnN0IG51bUNvbnRhY3RzQmVmb3JlID0gcmVzdWx0Lmxlbmd0aDsKICAgICAgICAgIGxldCBpbnRlcnNlY3RpbmcgPSBmYWxzZTsgLy8gTG93ZXIgdHJpYW5nbGUKCiAgICAgICAgICBoZlNoYXBlLmdldENvbnZleFRyaWFuZ2xlUGlsbGFyKGksIGosIGZhbHNlKTsKICAgICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZShoZlBvcywgaGZRdWF0LCBoZlNoYXBlLnBpbGxhck9mZnNldCwgd29ybGRQaWxsYXJPZmZzZXQpOwoKICAgICAgICAgIGlmIChzcGhlcmVQb3MuZGlzdGFuY2VUbyh3b3JsZFBpbGxhck9mZnNldCkgPCBoZlNoYXBlLnBpbGxhckNvbnZleC5ib3VuZGluZ1NwaGVyZVJhZGl1cyArIHNwaGVyZVNoYXBlLmJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7CiAgICAgICAgICAgIGludGVyc2VjdGluZyA9IHRoaXMuc3BoZXJlQ29udmV4KHNwaGVyZVNoYXBlLCBoZlNoYXBlLnBpbGxhckNvbnZleCwgc3BoZXJlUG9zLCB3b3JsZFBpbGxhck9mZnNldCwgc3BoZXJlUXVhdCwgaGZRdWF0LCBzcGhlcmVCb2R5LCBoZkJvZHksIHNwaGVyZVNoYXBlLCBoZlNoYXBlLCBqdXN0VGVzdCk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGp1c3RUZXN0ICYmIGludGVyc2VjdGluZykgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0gLy8gVXBwZXIgdHJpYW5nbGUKCgogICAgICAgICAgaGZTaGFwZS5nZXRDb252ZXhUcmlhbmdsZVBpbGxhcihpLCBqLCB0cnVlKTsKICAgICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZShoZlBvcywgaGZRdWF0LCBoZlNoYXBlLnBpbGxhck9mZnNldCwgd29ybGRQaWxsYXJPZmZzZXQpOwoKICAgICAgICAgIGlmIChzcGhlcmVQb3MuZGlzdGFuY2VUbyh3b3JsZFBpbGxhck9mZnNldCkgPCBoZlNoYXBlLnBpbGxhckNvbnZleC5ib3VuZGluZ1NwaGVyZVJhZGl1cyArIHNwaGVyZVNoYXBlLmJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7CiAgICAgICAgICAgIGludGVyc2VjdGluZyA9IHRoaXMuc3BoZXJlQ29udmV4KHNwaGVyZVNoYXBlLCBoZlNoYXBlLnBpbGxhckNvbnZleCwgc3BoZXJlUG9zLCB3b3JsZFBpbGxhck9mZnNldCwgc3BoZXJlUXVhdCwgaGZRdWF0LCBzcGhlcmVCb2R5LCBoZkJvZHksIHNwaGVyZVNoYXBlLCBoZlNoYXBlLCBqdXN0VGVzdCk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGp1c3RUZXN0ICYmIGludGVyc2VjdGluZykgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0KCiAgICAgICAgICBjb25zdCBudW1Db250YWN0cyA9IHJlc3VsdC5sZW5ndGggLSBudW1Db250YWN0c0JlZm9yZTsKCiAgICAgICAgICBpZiAobnVtQ29udGFjdHMgPiAyKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIC8qCiAgICAgICAgICAgIC8vIFNraXAgYWxsIGJ1dCAxCiAgICAgICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgbnVtQ29udGFjdHMgLSAxOyBrKyspIHsKICAgICAgICAgICAgICAgIHJlc3VsdC5wb3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgKi8KCiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgYm94SGVpZ2h0ZmllbGQoc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLm1hdGVyaWFsID0gc2kubWF0ZXJpYWw7CiAgICAgIHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5jb2xsaXNpb25SZXNwb25zZSA9IHNpLmNvbGxpc2lvblJlc3BvbnNlOwogICAgICByZXR1cm4gdGhpcy5jb252ZXhIZWlnaHRmaWVsZChzaS5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24sIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCBzaSwgc2osIGp1c3RUZXN0KTsKICAgIH0KCiAgICBjb252ZXhIZWlnaHRmaWVsZChjb252ZXhTaGFwZSwgaGZTaGFwZSwgY29udmV4UG9zLCBoZlBvcywgY29udmV4UXVhdCwgaGZRdWF0LCBjb252ZXhCb2R5LCBoZkJvZHksIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICBjb25zdCBkYXRhID0gaGZTaGFwZS5kYXRhOwogICAgICBjb25zdCB3ID0gaGZTaGFwZS5lbGVtZW50U2l6ZTsKICAgICAgY29uc3QgcmFkaXVzID0gY29udmV4U2hhcGUuYm91bmRpbmdTcGhlcmVSYWRpdXM7CiAgICAgIGNvbnN0IHdvcmxkUGlsbGFyT2Zmc2V0ID0gY29udmV4SGVpZ2h0ZmllbGRfdG1wMjsKICAgICAgY29uc3QgZmFjZUxpc3QgPSBjb252ZXhIZWlnaHRmaWVsZF9mYWNlTGlzdDsgLy8gR2V0IHNwaGVyZSBwb3NpdGlvbiB0byBoZWlnaHRmaWVsZCBsb2NhbCEKCiAgICAgIGNvbnN0IGxvY2FsQ29udmV4UG9zID0gY29udmV4SGVpZ2h0ZmllbGRfdG1wMTsKICAgICAgVHJhbnNmb3JtLnBvaW50VG9Mb2NhbEZyYW1lKGhmUG9zLCBoZlF1YXQsIGNvbnZleFBvcywgbG9jYWxDb252ZXhQb3MpOyAvLyBHZXQgdGhlIGluZGV4IG9mIHRoZSBkYXRhIHBvaW50cyB0byB0ZXN0IGFnYWluc3QKCiAgICAgIGxldCBpTWluWCA9IE1hdGguZmxvb3IoKGxvY2FsQ29udmV4UG9zLnggLSByYWRpdXMpIC8gdykgLSAxOwogICAgICBsZXQgaU1heFggPSBNYXRoLmNlaWwoKGxvY2FsQ29udmV4UG9zLnggKyByYWRpdXMpIC8gdykgKyAxOwogICAgICBsZXQgaU1pblkgPSBNYXRoLmZsb29yKChsb2NhbENvbnZleFBvcy55IC0gcmFkaXVzKSAvIHcpIC0gMTsKICAgICAgbGV0IGlNYXhZID0gTWF0aC5jZWlsKChsb2NhbENvbnZleFBvcy55ICsgcmFkaXVzKSAvIHcpICsgMTsgLy8gQmFpbCBvdXQgaWYgd2UgYXJlIG91dCBvZiB0aGUgdGVycmFpbgoKICAgICAgaWYgKGlNYXhYIDwgMCB8fCBpTWF4WSA8IDAgfHwgaU1pblggPiBkYXRhLmxlbmd0aCB8fCBpTWluWSA+IGRhdGFbMF0ubGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9IC8vIENsYW1wIGluZGV4IHRvIGVkZ2VzCgoKICAgICAgaWYgKGlNaW5YIDwgMCkgewogICAgICAgIGlNaW5YID0gMDsKICAgICAgfQoKICAgICAgaWYgKGlNYXhYIDwgMCkgewogICAgICAgIGlNYXhYID0gMDsKICAgICAgfQoKICAgICAgaWYgKGlNaW5ZIDwgMCkgewogICAgICAgIGlNaW5ZID0gMDsKICAgICAgfQoKICAgICAgaWYgKGlNYXhZIDwgMCkgewogICAgICAgIGlNYXhZID0gMDsKICAgICAgfQoKICAgICAgaWYgKGlNaW5YID49IGRhdGEubGVuZ3RoKSB7CiAgICAgICAgaU1pblggPSBkYXRhLmxlbmd0aCAtIDE7CiAgICAgIH0KCiAgICAgIGlmIChpTWF4WCA+PSBkYXRhLmxlbmd0aCkgewogICAgICAgIGlNYXhYID0gZGF0YS5sZW5ndGggLSAxOwogICAgICB9CgogICAgICBpZiAoaU1heFkgPj0gZGF0YVswXS5sZW5ndGgpIHsKICAgICAgICBpTWF4WSA9IGRhdGFbMF0ubGVuZ3RoIC0gMTsKICAgICAgfQoKICAgICAgaWYgKGlNaW5ZID49IGRhdGFbMF0ubGVuZ3RoKSB7CiAgICAgICAgaU1pblkgPSBkYXRhWzBdLmxlbmd0aCAtIDE7CiAgICAgIH0KCiAgICAgIGNvbnN0IG1pbk1heCA9IFtdOwogICAgICBoZlNoYXBlLmdldFJlY3RNaW5NYXgoaU1pblgsIGlNaW5ZLCBpTWF4WCwgaU1heFksIG1pbk1heCk7CiAgICAgIGNvbnN0IG1pbiA9IG1pbk1heFswXTsKICAgICAgY29uc3QgbWF4ID0gbWluTWF4WzFdOyAvLyBCYWlsIG91dCBpZiB3ZSdyZSBjYW50IHRvdWNoIHRoZSBib3VuZGluZyBoZWlnaHQgYm94CgogICAgICBpZiAobG9jYWxDb252ZXhQb3MueiAtIHJhZGl1cyA+IG1heCB8fCBsb2NhbENvbnZleFBvcy56ICsgcmFkaXVzIDwgbWluKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBmb3IgKGxldCBpID0gaU1pblg7IGkgPCBpTWF4WDsgaSsrKSB7CiAgICAgICAgZm9yIChsZXQgaiA9IGlNaW5ZOyBqIDwgaU1heFk7IGorKykgewogICAgICAgICAgbGV0IGludGVyc2VjdGluZyA9IGZhbHNlOyAvLyBMb3dlciB0cmlhbmdsZQoKICAgICAgICAgIGhmU2hhcGUuZ2V0Q29udmV4VHJpYW5nbGVQaWxsYXIoaSwgaiwgZmFsc2UpOwogICAgICAgICAgVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKGhmUG9zLCBoZlF1YXQsIGhmU2hhcGUucGlsbGFyT2Zmc2V0LCB3b3JsZFBpbGxhck9mZnNldCk7CgogICAgICAgICAgaWYgKGNvbnZleFBvcy5kaXN0YW5jZVRvKHdvcmxkUGlsbGFyT2Zmc2V0KSA8IGhmU2hhcGUucGlsbGFyQ29udmV4LmJvdW5kaW5nU3BoZXJlUmFkaXVzICsgY29udmV4U2hhcGUuYm91bmRpbmdTcGhlcmVSYWRpdXMpIHsKICAgICAgICAgICAgaW50ZXJzZWN0aW5nID0gdGhpcy5jb252ZXhDb252ZXgoY29udmV4U2hhcGUsIGhmU2hhcGUucGlsbGFyQ29udmV4LCBjb252ZXhQb3MsIHdvcmxkUGlsbGFyT2Zmc2V0LCBjb252ZXhRdWF0LCBoZlF1YXQsIGNvbnZleEJvZHksIGhmQm9keSwgbnVsbCwgbnVsbCwganVzdFRlc3QsIGZhY2VMaXN0LCBudWxsKTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoanVzdFRlc3QgJiYgaW50ZXJzZWN0aW5nKSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfSAvLyBVcHBlciB0cmlhbmdsZQoKCiAgICAgICAgICBoZlNoYXBlLmdldENvbnZleFRyaWFuZ2xlUGlsbGFyKGksIGosIHRydWUpOwogICAgICAgICAgVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKGhmUG9zLCBoZlF1YXQsIGhmU2hhcGUucGlsbGFyT2Zmc2V0LCB3b3JsZFBpbGxhck9mZnNldCk7CgogICAgICAgICAgaWYgKGNvbnZleFBvcy5kaXN0YW5jZVRvKHdvcmxkUGlsbGFyT2Zmc2V0KSA8IGhmU2hhcGUucGlsbGFyQ29udmV4LmJvdW5kaW5nU3BoZXJlUmFkaXVzICsgY29udmV4U2hhcGUuYm91bmRpbmdTcGhlcmVSYWRpdXMpIHsKICAgICAgICAgICAgaW50ZXJzZWN0aW5nID0gdGhpcy5jb252ZXhDb252ZXgoY29udmV4U2hhcGUsIGhmU2hhcGUucGlsbGFyQ29udmV4LCBjb252ZXhQb3MsIHdvcmxkUGlsbGFyT2Zmc2V0LCBjb252ZXhRdWF0LCBoZlF1YXQsIGNvbnZleEJvZHksIGhmQm9keSwgbnVsbCwgbnVsbCwganVzdFRlc3QsIGZhY2VMaXN0LCBudWxsKTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoanVzdFRlc3QgJiYgaW50ZXJzZWN0aW5nKSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIHNwaGVyZVBhcnRpY2xlKHNqLCBzaSwgeGosIHhpLCBxaiwgcWksIGJqLCBiaSwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIC8vIFRoZSBub3JtYWwgaXMgdGhlIHVuaXQgdmVjdG9yIGZyb20gc3BoZXJlIGNlbnRlciB0byBwYXJ0aWNsZSBjZW50ZXIKICAgICAgY29uc3Qgbm9ybWFsID0gcGFydGljbGVTcGhlcmVfbm9ybWFsOwogICAgICBub3JtYWwuc2V0KDAsIDAsIDEpOwogICAgICB4aS52c3ViKHhqLCBub3JtYWwpOwogICAgICBjb25zdCBsZW5ndGhTcXVhcmVkID0gbm9ybWFsLmxlbmd0aFNxdWFyZWQoKTsKCiAgICAgIGlmIChsZW5ndGhTcXVhcmVkIDw9IHNqLnJhZGl1cyAqIHNqLnJhZGl1cykgewogICAgICAgIGlmIChqdXN0VGVzdCkgewogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQoKICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTsKICAgICAgICBub3JtYWwubm9ybWFsaXplKCk7CiAgICAgICAgci5yai5jb3B5KG5vcm1hbCk7CiAgICAgICAgci5yai5zY2FsZShzai5yYWRpdXMsIHIucmopOwogICAgICAgIHIubmkuY29weShub3JtYWwpOyAvLyBDb250YWN0IG5vcm1hbAoKICAgICAgICByLm5pLm5lZ2F0ZShyLm5pKTsKICAgICAgICByLnJpLnNldCgwLCAwLCAwKTsgLy8gQ2VudGVyIG9mIHBhcnRpY2xlCgogICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7CiAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOwogICAgICB9CiAgICB9CgogICAgcGxhbmVQYXJ0aWNsZShzaiwgc2ksIHhqLCB4aSwgcWosIHFpLCBiaiwgYmksIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICBjb25zdCBub3JtYWwgPSBwYXJ0aWNsZVBsYW5lX25vcm1hbDsKICAgICAgbm9ybWFsLnNldCgwLCAwLCAxKTsKICAgICAgYmoucXVhdGVybmlvbi52bXVsdChub3JtYWwsIG5vcm1hbCk7IC8vIFR1cm4gbm9ybWFsIGFjY29yZGluZyB0byBwbGFuZSBvcmllbnRhdGlvbgoKICAgICAgY29uc3QgcmVscG9zID0gcGFydGljbGVQbGFuZV9yZWxwb3M7CiAgICAgIHhpLnZzdWIoYmoucG9zaXRpb24sIHJlbHBvcyk7CiAgICAgIGNvbnN0IGRvdCA9IG5vcm1hbC5kb3QocmVscG9zKTsKCiAgICAgIGlmIChkb3QgPD0gMC4wKSB7CiAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opOwogICAgICAgIHIubmkuY29weShub3JtYWwpOyAvLyBDb250YWN0IG5vcm1hbCBpcyB0aGUgcGxhbmUgbm9ybWFsCgogICAgICAgIHIubmkubmVnYXRlKHIubmkpOwogICAgICAgIHIucmkuc2V0KDAsIDAsIDApOyAvLyBDZW50ZXIgb2YgcGFydGljbGUKICAgICAgICAvLyBHZXQgcGFydGljbGUgcG9zaXRpb24gcHJvamVjdGVkIG9uIHBsYW5lCgogICAgICAgIGNvbnN0IHByb2plY3RlZCA9IHBhcnRpY2xlUGxhbmVfcHJvamVjdGVkOwogICAgICAgIG5vcm1hbC5zY2FsZShub3JtYWwuZG90KHhpKSwgcHJvamVjdGVkKTsKICAgICAgICB4aS52c3ViKHByb2plY3RlZCwgcHJvamVjdGVkKTsgLy9wcm9qZWN0ZWQudmFkZChiai5wb3NpdGlvbixwcm9qZWN0ZWQpOwogICAgICAgIC8vIHJqIGlzIG5vdyB0aGUgcHJvamVjdGVkIHdvcmxkIHBvc2l0aW9uIG1pbnVzIHBsYW5lIHBvc2l0aW9uCgogICAgICAgIHIucmouY29weShwcm9qZWN0ZWQpOwogICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7CiAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOwogICAgICB9CiAgICB9CgogICAgYm94UGFydGljbGUoc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLm1hdGVyaWFsID0gc2kubWF0ZXJpYWw7CiAgICAgIHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5jb2xsaXNpb25SZXNwb25zZSA9IHNpLmNvbGxpc2lvblJlc3BvbnNlOwogICAgICByZXR1cm4gdGhpcy5jb252ZXhQYXJ0aWNsZShzaS5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24sIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCBzaSwgc2osIGp1c3RUZXN0KTsKICAgIH0KCiAgICBjb252ZXhQYXJ0aWNsZShzaiwgc2ksIHhqLCB4aSwgcWosIHFpLCBiaiwgYmksIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICBsZXQgcGVuZXRyYXRlZEZhY2VJbmRleCA9IC0xOwogICAgICBjb25zdCBwZW5ldHJhdGVkRmFjZU5vcm1hbCA9IGNvbnZleFBhcnRpY2xlX3BlbmV0cmF0ZWRGYWNlTm9ybWFsOwogICAgICBjb25zdCB3b3JsZFBlbmV0cmF0aW9uVmVjID0gY29udmV4UGFydGljbGVfd29ybGRQZW5ldHJhdGlvblZlYzsKICAgICAgbGV0IG1pblBlbmV0cmF0aW9uID0gbnVsbDsKCiAgICAgIGNvbnN0IGxvY2FsID0gY29udmV4UGFydGljbGVfbG9jYWw7CiAgICAgIGxvY2FsLmNvcHkoeGkpOwogICAgICBsb2NhbC52c3ViKHhqLCBsb2NhbCk7IC8vIENvbnZlcnQgcG9zaXRpb24gdG8gcmVsYXRpdmUgdGhlIGNvbnZleCBvcmlnaW4KCiAgICAgIHFqLmNvbmp1Z2F0ZShjcWopOwogICAgICBjcWoudm11bHQobG9jYWwsIGxvY2FsKTsKCiAgICAgIGlmIChzai5wb2ludElzSW5zaWRlKGxvY2FsKSkgewogICAgICAgIGlmIChzai53b3JsZFZlcnRpY2VzTmVlZHNVcGRhdGUpIHsKICAgICAgICAgIHNqLmNvbXB1dGVXb3JsZFZlcnRpY2VzKHhqLCBxaik7CiAgICAgICAgfQoKICAgICAgICBpZiAoc2oud29ybGRGYWNlTm9ybWFsc05lZWRzVXBkYXRlKSB7CiAgICAgICAgICBzai5jb21wdXRlV29ybGRGYWNlTm9ybWFscyhxaik7CiAgICAgICAgfSAvLyBGb3IgZWFjaCB3b3JsZCBwb2x5Z29uIGluIHRoZSBwb2x5aGVkcmEKCgogICAgICAgIGZvciAobGV0IGkgPSAwLCBuZmFjZXMgPSBzai5mYWNlcy5sZW5ndGg7IGkgIT09IG5mYWNlczsgaSsrKSB7CiAgICAgICAgICAvLyBDb25zdHJ1Y3Qgd29ybGQgZmFjZSB2ZXJ0aWNlcwogICAgICAgICAgY29uc3QgdmVydHMgPSBbc2oud29ybGRWZXJ0aWNlc1tzai5mYWNlc1tpXVswXV1dOwogICAgICAgICAgY29uc3Qgbm9ybWFsID0gc2oud29ybGRGYWNlTm9ybWFsc1tpXTsgLy8gQ2hlY2sgaG93IG11Y2ggdGhlIHBhcnRpY2xlIHBlbmV0cmF0ZXMgdGhlIHBvbHlnb24gcGxhbmUuCgogICAgICAgICAgeGkudnN1Yih2ZXJ0c1swXSwgY29udmV4UGFydGljbGVfdmVydGV4VG9QYXJ0aWNsZSk7CiAgICAgICAgICBjb25zdCBwZW5ldHJhdGlvbiA9IC1ub3JtYWwuZG90KGNvbnZleFBhcnRpY2xlX3ZlcnRleFRvUGFydGljbGUpOwoKICAgICAgICAgIGlmIChtaW5QZW5ldHJhdGlvbiA9PT0gbnVsbCB8fCBNYXRoLmFicyhwZW5ldHJhdGlvbikgPCBNYXRoLmFicyhtaW5QZW5ldHJhdGlvbikpIHsKICAgICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIG1pblBlbmV0cmF0aW9uID0gcGVuZXRyYXRpb247CiAgICAgICAgICAgIHBlbmV0cmF0ZWRGYWNlSW5kZXggPSBpOwogICAgICAgICAgICBwZW5ldHJhdGVkRmFjZU5vcm1hbC5jb3B5KG5vcm1hbCk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAocGVuZXRyYXRlZEZhY2VJbmRleCAhPT0gLTEpIHsKICAgICAgICAgIC8vIFNldHVwIGNvbnRhY3QKICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opOwogICAgICAgICAgcGVuZXRyYXRlZEZhY2VOb3JtYWwuc2NhbGUobWluUGVuZXRyYXRpb24sIHdvcmxkUGVuZXRyYXRpb25WZWMpOyAvLyByaiBpcyB0aGUgcGFydGljbGUgcG9zaXRpb24gcHJvamVjdGVkIHRvIHRoZSBmYWNlCgogICAgICAgICAgd29ybGRQZW5ldHJhdGlvblZlYy52YWRkKHhpLCB3b3JsZFBlbmV0cmF0aW9uVmVjKTsKICAgICAgICAgIHdvcmxkUGVuZXRyYXRpb25WZWMudnN1Yih4aiwgd29ybGRQZW5ldHJhdGlvblZlYyk7CiAgICAgICAgICByLnJqLmNvcHkod29ybGRQZW5ldHJhdGlvblZlYyk7IC8vY29uc3QgcHJvamVjdGVkVG9GYWNlID0geGkudnN1Yih4aikudmFkZCh3b3JsZFBlbmV0cmF0aW9uVmVjKTsKICAgICAgICAgIC8vcHJvamVjdGVkVG9GYWNlLmNvcHkoci5yaik7CiAgICAgICAgICAvL3FqLnZtdWx0KHIucmosci5yaik7CgogICAgICAgICAgcGVuZXRyYXRlZEZhY2VOb3JtYWwubmVnYXRlKHIubmkpOyAvLyBDb250YWN0IG5vcm1hbAoKICAgICAgICAgIHIucmkuc2V0KDAsIDAsIDApOyAvLyBDZW50ZXIgb2YgcGFydGljbGUKCiAgICAgICAgICBjb25zdCByaSA9IHIucmk7CiAgICAgICAgICBjb25zdCByaiA9IHIucmo7IC8vIE1ha2UgcmVsYXRpdmUgdG8gYm9kaWVzCgogICAgICAgICAgcmkudmFkZCh4aSwgcmkpOwogICAgICAgICAgcmkudnN1YihiaS5wb3NpdGlvbiwgcmkpOwogICAgICAgICAgcmoudmFkZCh4aiwgcmopOwogICAgICAgICAgcmoudnN1Yihiai5wb3NpdGlvbiwgcmopOwogICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTsKICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc29sZS53YXJuKCdQb2ludCBmb3VuZCBpbnNpZGUgY29udmV4LCBidXQgZGlkIG5vdCBmaW5kIHBlbmV0cmF0aW5nIGZhY2UhJyk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgaGVpZ2h0ZmllbGRDeWxpbmRlcihoZlNoYXBlLCBjb252ZXhTaGFwZSwgaGZQb3MsIGNvbnZleFBvcywgaGZRdWF0LCBjb252ZXhRdWF0LCBoZkJvZHksIGNvbnZleEJvZHksIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICByZXR1cm4gdGhpcy5jb252ZXhIZWlnaHRmaWVsZChjb252ZXhTaGFwZSwgaGZTaGFwZSwgY29udmV4UG9zLCBoZlBvcywgY29udmV4UXVhdCwgaGZRdWF0LCBjb252ZXhCb2R5LCBoZkJvZHksIHJzaSwgcnNqLCBqdXN0VGVzdCk7CiAgICB9CgogICAgcGFydGljbGVDeWxpbmRlcihzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICByZXR1cm4gdGhpcy5jb252ZXhQYXJ0aWNsZShzaiwgc2ksIHhqLCB4aSwgcWosIHFpLCBiaiwgYmksIHJzaSwgcnNqLCBqdXN0VGVzdCk7CiAgICB9CgogICAgc3BoZXJlVHJpbWVzaChzcGhlcmVTaGFwZSwgdHJpbWVzaFNoYXBlLCBzcGhlcmVQb3MsIHRyaW1lc2hQb3MsIHNwaGVyZVF1YXQsIHRyaW1lc2hRdWF0LCBzcGhlcmVCb2R5LCB0cmltZXNoQm9keSwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIGNvbnN0IGVkZ2VWZXJ0ZXhBID0gc3BoZXJlVHJpbWVzaF9lZGdlVmVydGV4QTsKICAgICAgY29uc3QgZWRnZVZlcnRleEIgPSBzcGhlcmVUcmltZXNoX2VkZ2VWZXJ0ZXhCOwogICAgICBjb25zdCBlZGdlVmVjdG9yID0gc3BoZXJlVHJpbWVzaF9lZGdlVmVjdG9yOwogICAgICBjb25zdCBlZGdlVmVjdG9yVW5pdCA9IHNwaGVyZVRyaW1lc2hfZWRnZVZlY3RvclVuaXQ7CiAgICAgIGNvbnN0IGxvY2FsU3BoZXJlUG9zID0gc3BoZXJlVHJpbWVzaF9sb2NhbFNwaGVyZVBvczsKICAgICAgY29uc3QgdG1wID0gc3BoZXJlVHJpbWVzaF90bXA7CiAgICAgIGNvbnN0IGxvY2FsU3BoZXJlQUFCQiA9IHNwaGVyZVRyaW1lc2hfbG9jYWxTcGhlcmVBQUJCOwogICAgICBjb25zdCB2MiA9IHNwaGVyZVRyaW1lc2hfdjI7CiAgICAgIGNvbnN0IHJlbHBvcyA9IHNwaGVyZVRyaW1lc2hfcmVscG9zOwogICAgICBjb25zdCB0cmlhbmdsZXMgPSBzcGhlcmVUcmltZXNoX3RyaWFuZ2xlczsgLy8gQ29udmVydCBzcGhlcmUgcG9zaXRpb24gdG8gbG9jYWwgaW4gdGhlIHRyaW1lc2gKCiAgICAgIFRyYW5zZm9ybS5wb2ludFRvTG9jYWxGcmFtZSh0cmltZXNoUG9zLCB0cmltZXNoUXVhdCwgc3BoZXJlUG9zLCBsb2NhbFNwaGVyZVBvcyk7IC8vIEdldCB0aGUgYWFiYiBvZiB0aGUgc3BoZXJlIGxvY2FsbHkgaW4gdGhlIHRyaW1lc2gKCiAgICAgIGNvbnN0IHNwaGVyZVJhZGl1cyA9IHNwaGVyZVNoYXBlLnJhZGl1czsKICAgICAgbG9jYWxTcGhlcmVBQUJCLmxvd2VyQm91bmQuc2V0KGxvY2FsU3BoZXJlUG9zLnggLSBzcGhlcmVSYWRpdXMsIGxvY2FsU3BoZXJlUG9zLnkgLSBzcGhlcmVSYWRpdXMsIGxvY2FsU3BoZXJlUG9zLnogLSBzcGhlcmVSYWRpdXMpOwogICAgICBsb2NhbFNwaGVyZUFBQkIudXBwZXJCb3VuZC5zZXQobG9jYWxTcGhlcmVQb3MueCArIHNwaGVyZVJhZGl1cywgbG9jYWxTcGhlcmVQb3MueSArIHNwaGVyZVJhZGl1cywgbG9jYWxTcGhlcmVQb3MueiArIHNwaGVyZVJhZGl1cyk7CiAgICAgIHRyaW1lc2hTaGFwZS5nZXRUcmlhbmdsZXNJbkFBQkIobG9jYWxTcGhlcmVBQUJCLCB0cmlhbmdsZXMpOyAvL2ZvciAobGV0IGkgPSAwOyBpIDwgdHJpbWVzaFNoYXBlLmluZGljZXMubGVuZ3RoIC8gMzsgaSsrKSB0cmlhbmdsZXMucHVzaChpKTsgLy8gQWxsCiAgICAgIC8vIFZlcnRpY2VzCgogICAgICBjb25zdCB2ID0gc3BoZXJlVHJpbWVzaF92OwogICAgICBjb25zdCByYWRpdXNTcXVhcmVkID0gc3BoZXJlU2hhcGUucmFkaXVzICogc3BoZXJlU2hhcGUucmFkaXVzOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0cmlhbmdsZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDM7IGorKykgewogICAgICAgICAgdHJpbWVzaFNoYXBlLmdldFZlcnRleCh0cmltZXNoU2hhcGUuaW5kaWNlc1t0cmlhbmdsZXNbaV0gKiAzICsgal0sIHYpOyAvLyBDaGVjayB2ZXJ0ZXggb3ZlcmxhcCBpbiBzcGhlcmUKCiAgICAgICAgICB2LnZzdWIobG9jYWxTcGhlcmVQb3MsIHJlbHBvcyk7CgogICAgICAgICAgaWYgKHJlbHBvcy5sZW5ndGhTcXVhcmVkKCkgPD0gcmFkaXVzU3F1YXJlZCkgewogICAgICAgICAgICAvLyBTYWZlIHVwCiAgICAgICAgICAgIHYyLmNvcHkodik7CiAgICAgICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZSh0cmltZXNoUG9zLCB0cmltZXNoUXVhdCwgdjIsIHYpOwogICAgICAgICAgICB2LnZzdWIoc3BoZXJlUG9zLCByZWxwb3MpOwoKICAgICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGxldCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oc3BoZXJlQm9keSwgdHJpbWVzaEJvZHksIHNwaGVyZVNoYXBlLCB0cmltZXNoU2hhcGUsIHJzaSwgcnNqKTsKICAgICAgICAgICAgci5uaS5jb3B5KHJlbHBvcyk7CiAgICAgICAgICAgIHIubmkubm9ybWFsaXplKCk7IC8vIHJpIGlzIHRoZSB2ZWN0b3IgZnJvbSBzcGhlcmUgY2VudGVyIHRvIHRoZSBzcGhlcmUgc3VyZmFjZQoKICAgICAgICAgICAgci5yaS5jb3B5KHIubmkpOwogICAgICAgICAgICByLnJpLnNjYWxlKHNwaGVyZVNoYXBlLnJhZGl1cywgci5yaSk7CiAgICAgICAgICAgIHIucmkudmFkZChzcGhlcmVQb3MsIHIucmkpOwogICAgICAgICAgICByLnJpLnZzdWIoc3BoZXJlQm9keS5wb3NpdGlvbiwgci5yaSk7CiAgICAgICAgICAgIHIucmouY29weSh2KTsKICAgICAgICAgICAgci5yai52c3ViKHRyaW1lc2hCb2R5LnBvc2l0aW9uLCByLnJqKTsgLy8gU3RvcmUgcmVzdWx0CgogICAgICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IC8vIENoZWNrIGFsbCBlZGdlcwoKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdHJpYW5nbGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAzOyBqKyspIHsKICAgICAgICAgIHRyaW1lc2hTaGFwZS5nZXRWZXJ0ZXgodHJpbWVzaFNoYXBlLmluZGljZXNbdHJpYW5nbGVzW2ldICogMyArIGpdLCBlZGdlVmVydGV4QSk7CiAgICAgICAgICB0cmltZXNoU2hhcGUuZ2V0VmVydGV4KHRyaW1lc2hTaGFwZS5pbmRpY2VzW3RyaWFuZ2xlc1tpXSAqIDMgKyAoaiArIDEpICUgM10sIGVkZ2VWZXJ0ZXhCKTsKICAgICAgICAgIGVkZ2VWZXJ0ZXhCLnZzdWIoZWRnZVZlcnRleEEsIGVkZ2VWZWN0b3IpOyAvLyBQcm9qZWN0IHNwaGVyZSBwb3NpdGlvbiB0byB0aGUgZWRnZQoKICAgICAgICAgIGxvY2FsU3BoZXJlUG9zLnZzdWIoZWRnZVZlcnRleEIsIHRtcCk7CiAgICAgICAgICBjb25zdCBwb3NpdGlvbkFsb25nRWRnZUIgPSB0bXAuZG90KGVkZ2VWZWN0b3IpOwogICAgICAgICAgbG9jYWxTcGhlcmVQb3MudnN1YihlZGdlVmVydGV4QSwgdG1wKTsKICAgICAgICAgIGxldCBwb3NpdGlvbkFsb25nRWRnZUEgPSB0bXAuZG90KGVkZ2VWZWN0b3IpOwoKICAgICAgICAgIGlmIChwb3NpdGlvbkFsb25nRWRnZUEgPiAwICYmIHBvc2l0aW9uQWxvbmdFZGdlQiA8IDApIHsKICAgICAgICAgICAgLy8gTm93IGNoZWNrIHRoZSBvcnRob2dvbmFsIGRpc3RhbmNlIGZyb20gZWRnZSB0byBzcGhlcmUgY2VudGVyCiAgICAgICAgICAgIGxvY2FsU3BoZXJlUG9zLnZzdWIoZWRnZVZlcnRleEEsIHRtcCk7CiAgICAgICAgICAgIGVkZ2VWZWN0b3JVbml0LmNvcHkoZWRnZVZlY3Rvcik7CiAgICAgICAgICAgIGVkZ2VWZWN0b3JVbml0Lm5vcm1hbGl6ZSgpOwogICAgICAgICAgICBwb3NpdGlvbkFsb25nRWRnZUEgPSB0bXAuZG90KGVkZ2VWZWN0b3JVbml0KTsKICAgICAgICAgICAgZWRnZVZlY3RvclVuaXQuc2NhbGUocG9zaXRpb25BbG9uZ0VkZ2VBLCB0bXApOwogICAgICAgICAgICB0bXAudmFkZChlZGdlVmVydGV4QSwgdG1wKTsgLy8gdG1wIGlzIG5vdyB0aGUgc3BoZXJlIGNlbnRlciBwb3NpdGlvbiBwcm9qZWN0ZWQgdG8gdGhlIGVkZ2UsIGRlZmluZWQgbG9jYWxseSBpbiB0aGUgdHJpbWVzaCBmcmFtZQoKICAgICAgICAgICAgY29uc3QgZGlzdCA9IHRtcC5kaXN0YW5jZVRvKGxvY2FsU3BoZXJlUG9zKTsKCiAgICAgICAgICAgIGlmIChkaXN0IDwgc3BoZXJlU2hhcGUucmFkaXVzKSB7CiAgICAgICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihzcGhlcmVCb2R5LCB0cmltZXNoQm9keSwgc3BoZXJlU2hhcGUsIHRyaW1lc2hTaGFwZSwgcnNpLCByc2opOwogICAgICAgICAgICAgIHRtcC52c3ViKGxvY2FsU3BoZXJlUG9zLCByLm5pKTsKICAgICAgICAgICAgICByLm5pLm5vcm1hbGl6ZSgpOwogICAgICAgICAgICAgIHIubmkuc2NhbGUoc3BoZXJlU2hhcGUucmFkaXVzLCByLnJpKTsKICAgICAgICAgICAgICByLnJpLnZhZGQoc3BoZXJlUG9zLCByLnJpKTsKICAgICAgICAgICAgICByLnJpLnZzdWIoc3BoZXJlQm9keS5wb3NpdGlvbiwgci5yaSk7CiAgICAgICAgICAgICAgVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKHRyaW1lc2hQb3MsIHRyaW1lc2hRdWF0LCB0bXAsIHRtcCk7CiAgICAgICAgICAgICAgdG1wLnZzdWIodHJpbWVzaEJvZHkucG9zaXRpb24sIHIucmopOwogICAgICAgICAgICAgIFRyYW5zZm9ybS52ZWN0b3JUb1dvcmxkRnJhbWUodHJpbWVzaFF1YXQsIHIubmksIHIubmkpOwogICAgICAgICAgICAgIFRyYW5zZm9ybS52ZWN0b3JUb1dvcmxkRnJhbWUodHJpbWVzaFF1YXQsIHIucmksIHIucmkpOwogICAgICAgICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7CiAgICAgICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IC8vIFRyaWFuZ2xlIGZhY2VzCgoKICAgICAgY29uc3QgdmEgPSBzcGhlcmVUcmltZXNoX3ZhOwogICAgICBjb25zdCB2YiA9IHNwaGVyZVRyaW1lc2hfdmI7CiAgICAgIGNvbnN0IHZjID0gc3BoZXJlVHJpbWVzaF92YzsKICAgICAgY29uc3Qgbm9ybWFsID0gc3BoZXJlVHJpbWVzaF9ub3JtYWw7CgogICAgICBmb3IgKGxldCBpID0gMCwgTiA9IHRyaWFuZ2xlcy5sZW5ndGg7IGkgIT09IE47IGkrKykgewogICAgICAgIHRyaW1lc2hTaGFwZS5nZXRUcmlhbmdsZVZlcnRpY2VzKHRyaWFuZ2xlc1tpXSwgdmEsIHZiLCB2Yyk7CiAgICAgICAgdHJpbWVzaFNoYXBlLmdldE5vcm1hbCh0cmlhbmdsZXNbaV0sIG5vcm1hbCk7CiAgICAgICAgbG9jYWxTcGhlcmVQb3MudnN1Yih2YSwgdG1wKTsKICAgICAgICBsZXQgZGlzdCA9IHRtcC5kb3Qobm9ybWFsKTsKICAgICAgICBub3JtYWwuc2NhbGUoZGlzdCwgdG1wKTsKICAgICAgICBsb2NhbFNwaGVyZVBvcy52c3ViKHRtcCwgdG1wKTsgLy8gdG1wIGlzIG5vdyB0aGUgc3BoZXJlIHBvc2l0aW9uIHByb2plY3RlZCB0byB0aGUgdHJpYW5nbGUgcGxhbmUKCiAgICAgICAgZGlzdCA9IHRtcC5kaXN0YW5jZVRvKGxvY2FsU3BoZXJlUG9zKTsKCiAgICAgICAgaWYgKFJheS5wb2ludEluVHJpYW5nbGUodG1wLCB2YSwgdmIsIHZjKSAmJiBkaXN0IDwgc3BoZXJlU2hhcGUucmFkaXVzKSB7CiAgICAgICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CgogICAgICAgICAgbGV0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihzcGhlcmVCb2R5LCB0cmltZXNoQm9keSwgc3BoZXJlU2hhcGUsIHRyaW1lc2hTaGFwZSwgcnNpLCByc2opOwogICAgICAgICAgdG1wLnZzdWIobG9jYWxTcGhlcmVQb3MsIHIubmkpOwogICAgICAgICAgci5uaS5ub3JtYWxpemUoKTsKICAgICAgICAgIHIubmkuc2NhbGUoc3BoZXJlU2hhcGUucmFkaXVzLCByLnJpKTsKICAgICAgICAgIHIucmkudmFkZChzcGhlcmVQb3MsIHIucmkpOwogICAgICAgICAgci5yaS52c3ViKHNwaGVyZUJvZHkucG9zaXRpb24sIHIucmkpOwogICAgICAgICAgVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKHRyaW1lc2hQb3MsIHRyaW1lc2hRdWF0LCB0bXAsIHRtcCk7CiAgICAgICAgICB0bXAudnN1Yih0cmltZXNoQm9keS5wb3NpdGlvbiwgci5yaik7CiAgICAgICAgICBUcmFuc2Zvcm0udmVjdG9yVG9Xb3JsZEZyYW1lKHRyaW1lc2hRdWF0LCByLm5pLCByLm5pKTsKICAgICAgICAgIFRyYW5zZm9ybS52ZWN0b3JUb1dvcmxkRnJhbWUodHJpbWVzaFF1YXQsIHIucmksIHIucmkpOwogICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTsKICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRyaWFuZ2xlcy5sZW5ndGggPSAwOwogICAgfQoKICAgIHBsYW5lVHJpbWVzaChwbGFuZVNoYXBlLCB0cmltZXNoU2hhcGUsIHBsYW5lUG9zLCB0cmltZXNoUG9zLCBwbGFuZVF1YXQsIHRyaW1lc2hRdWF0LCBwbGFuZUJvZHksIHRyaW1lc2hCb2R5LCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgLy8gTWFrZSBjb250YWN0cyEKICAgICAgY29uc3QgdiA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IG5vcm1hbCA9IHBsYW5lVHJpbWVzaF9ub3JtYWw7CiAgICAgIG5vcm1hbC5zZXQoMCwgMCwgMSk7CiAgICAgIHBsYW5lUXVhdC52bXVsdChub3JtYWwsIG5vcm1hbCk7IC8vIFR1cm4gbm9ybWFsIGFjY29yZGluZyB0byBwbGFuZQoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0cmltZXNoU2hhcGUudmVydGljZXMubGVuZ3RoIC8gMzsgaSsrKSB7CiAgICAgICAgLy8gR2V0IHdvcmxkIHZlcnRleCBmcm9tIHRyaW1lc2gKICAgICAgICB0cmltZXNoU2hhcGUuZ2V0VmVydGV4KGksIHYpOyAvLyBTYWZlIHVwCgogICAgICAgIGNvbnN0IHYyID0gbmV3IFZlYzMoKTsKICAgICAgICB2Mi5jb3B5KHYpOwogICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZSh0cmltZXNoUG9zLCB0cmltZXNoUXVhdCwgdjIsIHYpOyAvLyBDaGVjayBwbGFuZSBzaWRlCgogICAgICAgIGNvbnN0IHJlbHBvcyA9IHBsYW5lVHJpbWVzaF9yZWxwb3M7CiAgICAgICAgdi52c3ViKHBsYW5lUG9zLCByZWxwb3MpOwogICAgICAgIGNvbnN0IGRvdCA9IG5vcm1hbC5kb3QocmVscG9zKTsKCiAgICAgICAgaWYgKGRvdCA8PSAwLjApIHsKICAgICAgICAgIGlmIChqdXN0VGVzdCkgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0KCiAgICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24ocGxhbmVCb2R5LCB0cmltZXNoQm9keSwgcGxhbmVTaGFwZSwgdHJpbWVzaFNoYXBlLCByc2ksIHJzaik7CiAgICAgICAgICByLm5pLmNvcHkobm9ybWFsKTsgLy8gQ29udGFjdCBub3JtYWwgaXMgdGhlIHBsYW5lIG5vcm1hbAogICAgICAgICAgLy8gR2V0IHZlcnRleCBwb3NpdGlvbiBwcm9qZWN0ZWQgb24gcGxhbmUKCiAgICAgICAgICBjb25zdCBwcm9qZWN0ZWQgPSBwbGFuZVRyaW1lc2hfcHJvamVjdGVkOwogICAgICAgICAgbm9ybWFsLnNjYWxlKHJlbHBvcy5kb3Qobm9ybWFsKSwgcHJvamVjdGVkKTsKICAgICAgICAgIHYudnN1Yihwcm9qZWN0ZWQsIHByb2plY3RlZCk7IC8vIHJpIGlzIHRoZSBwcm9qZWN0ZWQgd29ybGQgcG9zaXRpb24gbWludXMgcGxhbmUgcG9zaXRpb24KCiAgICAgICAgICByLnJpLmNvcHkocHJvamVjdGVkKTsKICAgICAgICAgIHIucmkudnN1YihwbGFuZUJvZHkucG9zaXRpb24sIHIucmkpOwogICAgICAgICAgci5yai5jb3B5KHYpOwogICAgICAgICAgci5yai52c3ViKHRyaW1lc2hCb2R5LnBvc2l0aW9uLCByLnJqKTsgLy8gU3RvcmUgcmVzdWx0CgogICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTsKICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0gLy8gY29udmV4VHJpbWVzaCgKICAgIC8vICAgc2k6IENvbnZleFBvbHloZWRyb24sIHNqOiBUcmltZXNoLCB4aTogVmVjMywgeGo6IFZlYzMsIHFpOiBRdWF0ZXJuaW9uLCBxajogUXVhdGVybmlvbiwKICAgIC8vICAgYmk6IEJvZHksIGJqOiBCb2R5LCByc2k/OiBTaGFwZSB8IG51bGwsIHJzaj86IFNoYXBlIHwgbnVsbCwKICAgIC8vICAgZmFjZUxpc3RBPzogbnVtYmVyW10gfCBudWxsLCBmYWNlTGlzdEI/OiBudW1iZXJbXSB8IG51bGwsCiAgICAvLyApIHsKICAgIC8vICAgY29uc3Qgc2VwQXhpcyA9IGNvbnZleENvbnZleF9zZXBBeGlzOwogICAgLy8gICBpZih4aS5kaXN0YW5jZVRvKHhqKSA+IHNpLmJvdW5kaW5nU3BoZXJlUmFkaXVzICsgc2ouYm91bmRpbmdTcGhlcmVSYWRpdXMpewogICAgLy8gICAgICAgcmV0dXJuOwogICAgLy8gICB9CiAgICAvLyAgIC8vIENvbnN0cnVjdCBhIHRlbXAgaHVsbCBmb3IgZWFjaCB0cmlhbmdsZQogICAgLy8gICBjb25zdCBodWxsQiA9IG5ldyBDb252ZXhQb2x5aGVkcm9uKCk7CiAgICAvLyAgIGh1bGxCLmZhY2VzID0gW1swLDEsMl1dOwogICAgLy8gICBjb25zdCB2YSA9IG5ldyBWZWMzKCk7CiAgICAvLyAgIGNvbnN0IHZiID0gbmV3IFZlYzMoKTsKICAgIC8vICAgY29uc3QgdmMgPSBuZXcgVmVjMygpOwogICAgLy8gICBodWxsQi52ZXJ0aWNlcyA9IFsKICAgIC8vICAgICAgIHZhLAogICAgLy8gICAgICAgdmIsCiAgICAvLyAgICAgICB2YwogICAgLy8gICBdOwogICAgLy8gICBmb3IgKGxldCBpID0gMDsgaSA8IHNqLmluZGljZXMubGVuZ3RoIC8gMzsgaSsrKSB7CiAgICAvLyAgICAgICBjb25zdCB0cmlhbmdsZU5vcm1hbCA9IG5ldyBWZWMzKCk7CiAgICAvLyAgICAgICBzai5nZXROb3JtYWwoaSwgdHJpYW5nbGVOb3JtYWwpOwogICAgLy8gICAgICAgaHVsbEIuZmFjZU5vcm1hbHMgPSBbdHJpYW5nbGVOb3JtYWxdOwogICAgLy8gICAgICAgc2ouZ2V0VHJpYW5nbGVWZXJ0aWNlcyhpLCB2YSwgdmIsIHZjKTsKICAgIC8vICAgICAgIGxldCBkID0gc2kudGVzdFNlcEF4aXModHJpYW5nbGVOb3JtYWwsIGh1bGxCLCB4aSwgcWksIHhqLCBxaik7CiAgICAvLyAgICAgICBpZighZCl7CiAgICAvLyAgICAgICAgICAgdHJpYW5nbGVOb3JtYWwuc2NhbGUoLTEsIHRyaWFuZ2xlTm9ybWFsKTsKICAgIC8vICAgICAgICAgICBkID0gc2kudGVzdFNlcEF4aXModHJpYW5nbGVOb3JtYWwsIGh1bGxCLCB4aSwgcWksIHhqLCBxaik7CiAgICAvLyAgICAgICAgICAgaWYoIWQpewogICAgLy8gICAgICAgICAgICAgICBjb250aW51ZTsKICAgIC8vICAgICAgICAgICB9CiAgICAvLyAgICAgICB9CiAgICAvLyAgICAgICBjb25zdCByZXM6IENvbnZleFBvbHloZWRyb25Db250YWN0UG9pbnRbXSA9IFtdOwogICAgLy8gICAgICAgY29uc3QgcSA9IGNvbnZleENvbnZleF9xOwogICAgLy8gICAgICAgc2kuY2xpcEFnYWluc3RIdWxsKHhpLHFpLGh1bGxCLHhqLHFqLHRyaWFuZ2xlTm9ybWFsLC0xMDAsMTAwLHJlcyk7CiAgICAvLyAgICAgICBmb3IobGV0IGogPSAwOyBqICE9PSByZXMubGVuZ3RoOyBqKyspewogICAgLy8gICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSxiaixzaSxzaixyc2kscnNqKSwKICAgIC8vICAgICAgICAgICAgICAgcmkgPSByLnJpLAogICAgLy8gICAgICAgICAgICAgICByaiA9IHIucmo7CiAgICAvLyAgICAgICAgICAgci5uaS5jb3B5KHRyaWFuZ2xlTm9ybWFsKTsKICAgIC8vICAgICAgICAgICByLm5pLm5lZ2F0ZShyLm5pKTsKICAgIC8vICAgICAgICAgICByZXNbal0ubm9ybWFsLm5lZ2F0ZShxKTsKICAgIC8vICAgICAgICAgICBxLm11bHQocmVzW2pdLmRlcHRoLCBxKTsKICAgIC8vICAgICAgICAgICByZXNbal0ucG9pbnQudmFkZChxLCByaSk7CiAgICAvLyAgICAgICAgICAgcmouY29weShyZXNbal0ucG9pbnQpOwogICAgLy8gICAgICAgICAgIC8vIENvbnRhY3QgcG9pbnRzIGFyZSBpbiB3b3JsZCBjb29yZGluYXRlcy4gVHJhbnNmb3JtIGJhY2sgdG8gcmVsYXRpdmUKICAgIC8vICAgICAgICAgICByaS52c3ViKHhpLHJpKTsKICAgIC8vICAgICAgICAgICByai52c3ViKHhqLHJqKTsKICAgIC8vICAgICAgICAgICAvLyBNYWtlIHJlbGF0aXZlIHRvIGJvZGllcwogICAgLy8gICAgICAgICAgIHJpLnZhZGQoeGksIHJpKTsKICAgIC8vICAgICAgICAgICByaS52c3ViKGJpLnBvc2l0aW9uLCByaSk7CiAgICAvLyAgICAgICAgICAgcmoudmFkZCh4aiwgcmopOwogICAgLy8gICAgICAgICAgIHJqLnZzdWIoYmoucG9zaXRpb24sIHJqKTsKICAgIC8vICAgICAgICAgICByZXN1bHQucHVzaChyKTsKICAgIC8vICAgICAgIH0KICAgIC8vICAgfQogICAgLy8gfQoKCiAgfQogIGNvbnN0IGF2ZXJhZ2VOb3JtYWwgPSBuZXcgVmVjMygpOwogIGNvbnN0IGF2ZXJhZ2VDb250YWN0UG9pbnRBID0gbmV3IFZlYzMoKTsKICBjb25zdCBhdmVyYWdlQ29udGFjdFBvaW50QiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgdG1wVmVjMSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgdG1wVmVjMiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgdG1wUXVhdDEgPSBuZXcgUXVhdGVybmlvbigpOwogIGNvbnN0IHRtcFF1YXQyID0gbmV3IFF1YXRlcm5pb24oKTsKCiAgY29uc3QgcGxhbmVUcmltZXNoX25vcm1hbCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcGxhbmVUcmltZXNoX3JlbHBvcyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcGxhbmVUcmltZXNoX3Byb2plY3RlZCA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlVHJpbWVzaF9ub3JtYWwgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfcmVscG9zID0gbmV3IFZlYzMoKTsKICBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfdiA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlVHJpbWVzaF92MiA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlVHJpbWVzaF9lZGdlVmVydGV4QSA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlVHJpbWVzaF9lZGdlVmVydGV4QiA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlVHJpbWVzaF9lZGdlVmVjdG9yID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVUcmltZXNoX2VkZ2VWZWN0b3JVbml0ID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVUcmltZXNoX2xvY2FsU3BoZXJlUG9zID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVUcmltZXNoX3RtcCA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlVHJpbWVzaF92YSA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlVHJpbWVzaF92YiA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlVHJpbWVzaF92YyA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlVHJpbWVzaF9sb2NhbFNwaGVyZUFBQkIgPSBuZXcgQUFCQigpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfdHJpYW5nbGVzID0gW107CiAgY29uc3QgcG9pbnRfb25fcGxhbmVfdG9fc3BoZXJlID0gbmV3IFZlYzMoKTsKICBjb25zdCBwbGFuZV90b19zcGhlcmVfb3J0aG8gPSBuZXcgVmVjMygpOyAvLyBTZWUgaHR0cDovL2J1bGxldHBoeXNpY3MuY29tL0J1bGxldC9CdWxsZXRGdWxsL1NwaGVyZVRyaWFuZ2xlRGV0ZWN0b3JfOGNwcF9zb3VyY2UuaHRtbAoKICBjb25zdCBwb2ludEluUG9seWdvbl9lZGdlID0gbmV3IFZlYzMoKTsKICBjb25zdCBwb2ludEluUG9seWdvbl9lZGdlX3hfbm9ybWFsID0gbmV3IFZlYzMoKTsKICBjb25zdCBwb2ludEluUG9seWdvbl92dHAgPSBuZXcgVmVjMygpOwoKICBmdW5jdGlvbiBwb2ludEluUG9seWdvbih2ZXJ0cywgbm9ybWFsLCBwKSB7CiAgICBsZXQgcG9zaXRpdmVSZXN1bHQgPSBudWxsOwogICAgY29uc3QgTiA9IHZlcnRzLmxlbmd0aDsKCiAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgIGNvbnN0IHYgPSB2ZXJ0c1tpXTsgLy8gR2V0IGVkZ2UgdG8gdGhlIG5leHQgdmVydGV4CgogICAgICBjb25zdCBlZGdlID0gcG9pbnRJblBvbHlnb25fZWRnZTsKICAgICAgdmVydHNbKGkgKyAxKSAlIE5dLnZzdWIodiwgZWRnZSk7IC8vIEdldCBjcm9zcyBwcm9kdWN0IGJldHdlZW4gcG9seWdvbiBub3JtYWwgYW5kIHRoZSBlZGdlCgogICAgICBjb25zdCBlZGdlX3hfbm9ybWFsID0gcG9pbnRJblBvbHlnb25fZWRnZV94X25vcm1hbDsgLy9jb25zdCBlZGdlX3hfbm9ybWFsID0gbmV3IFZlYzMoKTsKCiAgICAgIGVkZ2UuY3Jvc3Mobm9ybWFsLCBlZGdlX3hfbm9ybWFsKTsgLy8gR2V0IHZlY3RvciBiZXR3ZWVuIHBvaW50IGFuZCBjdXJyZW50IHZlcnRleAoKICAgICAgY29uc3QgdmVydGV4X3RvX3AgPSBwb2ludEluUG9seWdvbl92dHA7CiAgICAgIHAudnN1Yih2LCB2ZXJ0ZXhfdG9fcCk7IC8vIFRoaXMgZG90IHByb2R1Y3QgZGV0ZXJtaW5lcyB3aGljaCBzaWRlIG9mIHRoZSBlZGdlIHRoZSBwb2ludCBpcwoKICAgICAgY29uc3QgciA9IGVkZ2VfeF9ub3JtYWwuZG90KHZlcnRleF90b19wKTsgLy8gSWYgYWxsIHN1Y2ggZG90IHByb2R1Y3RzIGhhdmUgc2FtZSBzaWduLCB3ZSBhcmUgaW5zaWRlIHRoZSBwb2x5Z29uLgoKICAgICAgaWYgKHBvc2l0aXZlUmVzdWx0ID09PSBudWxsIHx8IHIgPiAwICYmIHBvc2l0aXZlUmVzdWx0ID09PSB0cnVlIHx8IHIgPD0gMCAmJiBwb3NpdGl2ZVJlc3VsdCA9PT0gZmFsc2UpIHsKICAgICAgICBpZiAocG9zaXRpdmVSZXN1bHQgPT09IG51bGwpIHsKICAgICAgICAgIHBvc2l0aXZlUmVzdWx0ID0gciA+IDA7CiAgICAgICAgfQoKICAgICAgICBjb250aW51ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gZmFsc2U7IC8vIEVuY291bnRlcmVkIHNvbWUgb3RoZXIgc2lnbi4gRXhpdC4KICAgICAgfQogICAgfSAvLyBJZiB3ZSBnb3QgaGVyZSwgYWxsIGRvdCBwcm9kdWN0cyB3ZXJlIG9mIHRoZSBzYW1lIHNpZ24uCgoKICAgIHJldHVybiB0cnVlOwogIH0KCiAgY29uc3QgYm94X3RvX3NwaGVyZSA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQm94X25zID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVCb3hfbnMxID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVCb3hfbnMyID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVCb3hfc2lkZXMgPSBbbmV3IFZlYzMoKSwgbmV3IFZlYzMoKSwgbmV3IFZlYzMoKSwgbmV3IFZlYzMoKSwgbmV3IFZlYzMoKSwgbmV3IFZlYzMoKV07CiAgY29uc3Qgc3BoZXJlQm94X3NwaGVyZV90b19jb3JuZXIgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUJveF9zaWRlX25zID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVCb3hfc2lkZV9uczEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUJveF9zaWRlX25zMiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgY29udmV4X3RvX3NwaGVyZSA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQ29udmV4X2VkZ2UgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUNvbnZleF9lZGdlVW5pdCA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQ29udmV4X3NwaGVyZVRvQ29ybmVyID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVDb252ZXhfd29ybGRDb3JuZXIgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUNvbnZleF93b3JsZE5vcm1hbCA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQ29udmV4X3dvcmxkUG9pbnQgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUNvbnZleF93b3JsZFNwaGVyZVBvaW50Q2xvc2VzdFRvUGxhbmUgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUNvbnZleF9wZW5ldHJhdGlvblZlYyA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQ29udmV4X3NwaGVyZVRvV29ybGRQb2ludCA9IG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKICBuZXcgVmVjMygpOwogIGNvbnN0IHBsYW5lQ29udmV4X3YgPSBuZXcgVmVjMygpOwogIGNvbnN0IHBsYW5lQ29udmV4X25vcm1hbCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcGxhbmVDb252ZXhfcmVscG9zID0gbmV3IFZlYzMoKTsKICBjb25zdCBwbGFuZUNvbnZleF9wcm9qZWN0ZWQgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNvbnZleENvbnZleF9zZXBBeGlzID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb252ZXhDb252ZXhfcSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcGFydGljbGVQbGFuZV9ub3JtYWwgPSBuZXcgVmVjMygpOwogIGNvbnN0IHBhcnRpY2xlUGxhbmVfcmVscG9zID0gbmV3IFZlYzMoKTsKICBjb25zdCBwYXJ0aWNsZVBsYW5lX3Byb2plY3RlZCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcGFydGljbGVTcGhlcmVfbm9ybWFsID0gbmV3IFZlYzMoKTsgLy8gV0lQCgogIGNvbnN0IGNxaiA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgY29uc3QgY29udmV4UGFydGljbGVfbG9jYWwgPSBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CiAgY29uc3QgY29udmV4UGFydGljbGVfcGVuZXRyYXRlZEZhY2VOb3JtYWwgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNvbnZleFBhcnRpY2xlX3ZlcnRleFRvUGFydGljbGUgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNvbnZleFBhcnRpY2xlX3dvcmxkUGVuZXRyYXRpb25WZWMgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNvbnZleEhlaWdodGZpZWxkX3RtcDEgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNvbnZleEhlaWdodGZpZWxkX3RtcDIgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNvbnZleEhlaWdodGZpZWxkX2ZhY2VMaXN0ID0gWzBdOwogIGNvbnN0IHNwaGVyZUhlaWdodGZpZWxkX3RtcDEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUhlaWdodGZpZWxkX3RtcDIgPSBuZXcgVmVjMygpOwoKICBjbGFzcyBPdmVybGFwS2VlcGVyIHsKICAgIC8qKgogICAgICogQHRvZG8gUmVtb3ZlIHVzZWxlc3MgY29uc3RydWN0b3IKICAgICAqLwogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHRoaXMuY3VycmVudCA9IFtdOwogICAgICB0aGlzLnByZXZpb3VzID0gW107CiAgICB9CiAgICAvKioKICAgICAqIGdldEtleQogICAgICovCgoKICAgIGdldEtleShpLCBqKSB7CiAgICAgIGlmIChqIDwgaSkgewogICAgICAgIGNvbnN0IHRlbXAgPSBqOwogICAgICAgIGogPSBpOwogICAgICAgIGkgPSB0ZW1wOwogICAgICB9CgogICAgICByZXR1cm4gaSA8PCAxNiB8IGo7CiAgICB9CiAgICAvKioKICAgICAqIHNldAogICAgICovCgoKICAgIHNldChpLCBqKSB7CiAgICAgIC8vIEluc2VydGlvbiBzb3J0LiBUaGlzIHdheSB0aGUgZGlmZiB3aWxsIGhhdmUgbGluZWFyIGNvbXBsZXhpdHkuCiAgICAgIGNvbnN0IGtleSA9IHRoaXMuZ2V0S2V5KGksIGopOwogICAgICBjb25zdCBjdXJyZW50ID0gdGhpcy5jdXJyZW50OwogICAgICBsZXQgaW5kZXggPSAwOwoKICAgICAgd2hpbGUgKGtleSA+IGN1cnJlbnRbaW5kZXhdKSB7CiAgICAgICAgaW5kZXgrKzsKICAgICAgfQoKICAgICAgaWYgKGtleSA9PT0gY3VycmVudFtpbmRleF0pIHsKICAgICAgICByZXR1cm47IC8vIFBhaXIgd2FzIGFscmVhZHkgYWRkZWQKICAgICAgfQoKICAgICAgZm9yIChsZXQgaiA9IGN1cnJlbnQubGVuZ3RoIC0gMTsgaiA+PSBpbmRleDsgai0tKSB7CiAgICAgICAgY3VycmVudFtqICsgMV0gPSBjdXJyZW50W2pdOwogICAgICB9CgogICAgICBjdXJyZW50W2luZGV4XSA9IGtleTsKICAgIH0KICAgIC8qKgogICAgICogdGljawogICAgICovCgoKICAgIHRpY2soKSB7CiAgICAgIGNvbnN0IHRtcCA9IHRoaXMuY3VycmVudDsKICAgICAgdGhpcy5jdXJyZW50ID0gdGhpcy5wcmV2aW91czsKICAgICAgdGhpcy5wcmV2aW91cyA9IHRtcDsKICAgICAgdGhpcy5jdXJyZW50Lmxlbmd0aCA9IDA7CiAgICB9CiAgICAvKioKICAgICAqIGdldERpZmYKICAgICAqLwoKCiAgICBnZXREaWZmKGFkZGl0aW9ucywgcmVtb3ZhbHMpIHsKICAgICAgY29uc3QgYSA9IHRoaXMuY3VycmVudDsKICAgICAgY29uc3QgYiA9IHRoaXMucHJldmlvdXM7CiAgICAgIGNvbnN0IGFsID0gYS5sZW5ndGg7CiAgICAgIGNvbnN0IGJsID0gYi5sZW5ndGg7CiAgICAgIGxldCBqID0gMDsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWw7IGkrKykgewogICAgICAgIGxldCBmb3VuZCA9IGZhbHNlOwogICAgICAgIGNvbnN0IGtleUEgPSBhW2ldOwoKICAgICAgICB3aGlsZSAoa2V5QSA+IGJbal0pIHsKICAgICAgICAgIGorKzsKICAgICAgICB9CgogICAgICAgIGZvdW5kID0ga2V5QSA9PT0gYltqXTsKCiAgICAgICAgaWYgKCFmb3VuZCkgewogICAgICAgICAgdW5wYWNrQW5kUHVzaChhZGRpdGlvbnMsIGtleUEpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaiA9IDA7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJsOyBpKyspIHsKICAgICAgICBsZXQgZm91bmQgPSBmYWxzZTsKICAgICAgICBjb25zdCBrZXlCID0gYltpXTsKCiAgICAgICAgd2hpbGUgKGtleUIgPiBhW2pdKSB7CiAgICAgICAgICBqKys7CiAgICAgICAgfQoKICAgICAgICBmb3VuZCA9IGFbal0gPT09IGtleUI7CgogICAgICAgIGlmICghZm91bmQpIHsKICAgICAgICAgIHVucGFja0FuZFB1c2gocmVtb3ZhbHMsIGtleUIpOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICB9CgogIGZ1bmN0aW9uIHVucGFja0FuZFB1c2goYXJyYXksIGtleSkgewogICAgYXJyYXkucHVzaCgoa2V5ICYgMHhmZmZmMDAwMCkgPj4gMTYsIGtleSAmIDB4MDAwMGZmZmYpOwogIH0KCiAgY29uc3QgZ2V0S2V5ID0gKGksIGopID0+IGkgPCBqID8gYCR7aX0tJHtqfWAgOiBgJHtqfS0ke2l9YDsKICAvKioKICAgKiBUdXBsZURpY3Rpb25hcnkKICAgKi8KCgogIGNsYXNzIFR1cGxlRGljdGlvbmFyeSB7CiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgdGhpcy5kYXRhID0gewogICAgICAgIGtleXM6IFtdCiAgICAgIH07CiAgICB9CgogICAgLyoqIGdldCAqLwogICAgZ2V0KGksIGopIHsKICAgICAgY29uc3Qga2V5ID0gZ2V0S2V5KGksIGopOwogICAgICByZXR1cm4gdGhpcy5kYXRhW2tleV07CiAgICB9CiAgICAvKiogc2V0ICovCgoKICAgIHNldChpLCBqLCB2YWx1ZSkgewogICAgICBjb25zdCBrZXkgPSBnZXRLZXkoaSwgaik7IC8vIENoZWNrIGlmIGtleSBhbHJlYWR5IGV4aXN0cwoKICAgICAgaWYgKCF0aGlzLmdldChpLCBqKSkgewogICAgICAgIHRoaXMuZGF0YS5rZXlzLnB1c2goa2V5KTsKICAgICAgfQoKICAgICAgdGhpcy5kYXRhW2tleV0gPSB2YWx1ZTsKICAgIH0KICAgIC8qKiBkZWxldGUgKi8KCgogICAgZGVsZXRlKGksIGopIHsKICAgICAgY29uc3Qga2V5ID0gZ2V0S2V5KGksIGopOwogICAgICBjb25zdCBpbmRleCA9IHRoaXMuZGF0YS5rZXlzLmluZGV4T2Yoa2V5KTsKCiAgICAgIGlmIChpbmRleCAhPT0gLTEpIHsKICAgICAgICB0aGlzLmRhdGEua2V5cy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICB9CgogICAgICBkZWxldGUgdGhpcy5kYXRhW2tleV07CiAgICB9CiAgICAvKiogcmVzZXQgKi8KCgogICAgcmVzZXQoKSB7CiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7CiAgICAgIGNvbnN0IGtleXMgPSBkYXRhLmtleXM7CgogICAgICB3aGlsZSAoa2V5cy5sZW5ndGggPiAwKSB7CiAgICAgICAgY29uc3Qga2V5ID0ga2V5cy5wb3AoKTsKICAgICAgICBkZWxldGUgZGF0YVtrZXldOwogICAgICB9CiAgICB9CgogIH0KCiAgLyoqCiAgICogVGhlIHBoeXNpY3Mgd29ybGQKICAgKi8KICBjbGFzcyBXb3JsZCBleHRlbmRzIEV2ZW50VGFyZ2V0IHsKICAgIC8qKgogICAgICogQ3VycmVudGx5IC8gbGFzdCB1c2VkIHRpbWVzdGVwLiBJcyBzZXQgdG8gLTEgaWYgbm90IGF2YWlsYWJsZS4gVGhpcyB2YWx1ZSBpcyB1cGRhdGVkIGJlZm9yZSBlYWNoIGludGVybmFsIHN0ZXAsIHdoaWNoIG1lYW5zIHRoYXQgaXQgaXMgImZyZXNoIiBpbnNpZGUgZXZlbnQgY2FsbGJhY2tzLgogICAgICovCgogICAgLyoqCiAgICAgKiBNYWtlcyBib2RpZXMgZ28gdG8gc2xlZXAgd2hlbiB0aGV5J3ZlIGJlZW4gaW5hY3RpdmUuCiAgICAgKiBAZGVmYXVsdCBmYWxzZQogICAgICovCgogICAgLyoqCiAgICAgKiBBbGwgdGhlIGN1cnJlbnQgY29udGFjdHMgKGluc3RhbmNlcyBvZiBDb250YWN0RXF1YXRpb24pIGluIHRoZSB3b3JsZC4KICAgICAqLwoKICAgIC8qKgogICAgICogSG93IG9mdGVuIHRvIG5vcm1hbGl6ZSBxdWF0ZXJuaW9ucy4gU2V0IHRvIDAgZm9yIGV2ZXJ5IHN0ZXAsIDEgZm9yIGV2ZXJ5IHNlY29uZCBldGMuLiBBIGxhcmdlciB2YWx1ZSBpbmNyZWFzZXMgcGVyZm9ybWFuY2UuIElmIGJvZGllcyB0ZW5kIHRvIGV4cGxvZGUsIHNldCB0byBhIHNtYWxsZXIgdmFsdWUgKHplcm8gdG8gYmUgc3VyZSBub3RoaW5nIGNhbiBnbyB3cm9uZykuCiAgICAgKiBAZGVmYXVsdCAwCiAgICAgKi8KCiAgICAvKioKICAgICAqIFNldCB0byB0cnVlIHRvIHVzZSBmYXN0IHF1YXRlcm5pb24gbm9ybWFsaXphdGlvbi4gSXQgaXMgb2Z0ZW4gZW5vdWdoIGFjY3VyYXRlIHRvIHVzZS4KICAgICAqIElmIGJvZGllcyB0ZW5kIHRvIGV4cGxvZGUsIHNldCB0byBmYWxzZS4KICAgICAqIEBkZWZhdWx0IGZhbHNlCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSB3YWxsLWNsb2NrIHRpbWUgc2luY2Ugc2ltdWxhdGlvbiBzdGFydC4KICAgICAqLwoKICAgIC8qKgogICAgICogTnVtYmVyIG9mIHRpbWVzdGVwcyB0YWtlbiBzaW5jZSBzdGFydC4KICAgICAqLwoKICAgIC8qKgogICAgICogRGVmYXVsdCBhbmQgbGFzdCB0aW1lc3RlcCBzaXplcy4KICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIGdyYXZpdHkgb2YgdGhlIHdvcmxkLgogICAgICovCgogICAgLyoqCiAgICAgKiBHcmF2aXR5IHRvIHVzZSB3aGVuIGFwcHJveGltYXRpbmcgdGhlIGZyaWN0aW9uIG1heCBmb3JjZSAobXUqbWFzcypncmF2aXR5KS4KICAgICAqIElmIHVuZGVmaW5lZCwgZ2xvYmFsIGdyYXZpdHkgd2lsbCBiZSB1c2VkLgogICAgICogVXNlIHRvIGVuYWJsZSBmcmljdGlvbiBpbiBhIFdvcmxkIHdpdGggYSBudWxsIGdyYXZpdHkgdmVjdG9yIChubyBncmF2aXR5KS4KICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIGJyb2FkcGhhc2UgYWxnb3JpdGhtIHRvIHVzZS4KICAgICAqIEBkZWZhdWx0IE5haXZlQnJvYWRwaGFzZQogICAgICovCgogICAgLyoqCiAgICAgKiBBbGwgYm9kaWVzIGluIHRoaXMgd29ybGQKICAgICAqLwoKICAgIC8qKgogICAgICogVHJ1ZSBpZiBhbnkgYm9kaWVzIGFyZSBub3Qgc2xlZXBpbmcsIGZhbHNlIGlmIGV2ZXJ5IGJvZHkgaXMgc2xlZXBpbmcuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBzb2x2ZXIgYWxnb3JpdGhtIHRvIHVzZS4KICAgICAqIEBkZWZhdWx0IEdTU29sdmVyCiAgICAgKi8KCiAgICAvKioKICAgICAqIGNvbGxpc2lvbk1hdHJpeAogICAgICovCgogICAgLyoqCiAgICAgKiBDb2xsaXNpb25NYXRyaXggZnJvbSB0aGUgcHJldmlvdXMgc3RlcC4KICAgICAqLwoKICAgIC8qKgogICAgICogQWxsIGFkZGVkIGNvbnRhY3RtYXRlcmlhbHMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFVzZWQgdG8gbG9vayB1cCBhIENvbnRhY3RNYXRlcmlhbCBnaXZlbiB0d28gaW5zdGFuY2VzIG9mIE1hdGVyaWFsLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgZGVmYXVsdCBtYXRlcmlhbCBvZiB0aGUgYm9kaWVzLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGlzIGNvbnRhY3QgbWF0ZXJpYWwgaXMgdXNlZCBpZiBubyBzdWl0YWJsZSBjb250YWN0bWF0ZXJpYWwgaXMgZm91bmQgZm9yIGEgY29udGFjdC4KICAgICAqLwoKICAgIC8qKgogICAgICogVGltZSBhY2N1bXVsYXRvciBmb3IgaW50ZXJwb2xhdGlvbi4KICAgICAqIEBzZWUgaHR0cHM6Ly9nYWZmZXJvbmdhbWVzLmNvbS9nYW1lLXBoeXNpY3MvZml4LXlvdXItdGltZXN0ZXAvCiAgICAgKi8KCiAgICAvKioKICAgICAqIERpc3BhdGNoZWQgYWZ0ZXIgYSBib2R5IGhhcyBiZWVuIGFkZGVkIHRvIHRoZSB3b3JsZC4KICAgICAqLwoKICAgIC8qKgogICAgICogRGlzcGF0Y2hlZCBhZnRlciBhIGJvZHkgaGFzIGJlZW4gcmVtb3ZlZCBmcm9tIHRoZSB3b3JsZC4KICAgICAqLwogICAgY29uc3RydWN0b3Iob3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBzdXBlcigpOwogICAgICB0aGlzLmR0ID0gLTE7CiAgICAgIHRoaXMuYWxsb3dTbGVlcCA9ICEhb3B0aW9ucy5hbGxvd1NsZWVwOwogICAgICB0aGlzLmNvbnRhY3RzID0gW107CiAgICAgIHRoaXMuZnJpY3Rpb25FcXVhdGlvbnMgPSBbXTsKICAgICAgdGhpcy5xdWF0Tm9ybWFsaXplU2tpcCA9IG9wdGlvbnMucXVhdE5vcm1hbGl6ZVNraXAgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMucXVhdE5vcm1hbGl6ZVNraXAgOiAwOwogICAgICB0aGlzLnF1YXROb3JtYWxpemVGYXN0ID0gb3B0aW9ucy5xdWF0Tm9ybWFsaXplRmFzdCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5xdWF0Tm9ybWFsaXplRmFzdCA6IGZhbHNlOwogICAgICB0aGlzLnRpbWUgPSAwLjA7CiAgICAgIHRoaXMuc3RlcG51bWJlciA9IDA7CiAgICAgIHRoaXMuZGVmYXVsdF9kdCA9IDEgLyA2MDsKICAgICAgdGhpcy5uZXh0SWQgPSAwOwogICAgICB0aGlzLmdyYXZpdHkgPSBuZXcgVmVjMygpOwoKICAgICAgaWYgKG9wdGlvbnMuZ3Jhdml0eSkgewogICAgICAgIHRoaXMuZ3Jhdml0eS5jb3B5KG9wdGlvbnMuZ3Jhdml0eSk7CiAgICAgIH0KCiAgICAgIGlmIChvcHRpb25zLmZyaWN0aW9uR3Jhdml0eSkgewogICAgICAgIHRoaXMuZnJpY3Rpb25HcmF2aXR5ID0gbmV3IFZlYzMoKTsKICAgICAgICB0aGlzLmZyaWN0aW9uR3Jhdml0eS5jb3B5KG9wdGlvbnMuZnJpY3Rpb25HcmF2aXR5KTsKICAgICAgfQoKICAgICAgdGhpcy5icm9hZHBoYXNlID0gb3B0aW9ucy5icm9hZHBoYXNlICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmJyb2FkcGhhc2UgOiBuZXcgTmFpdmVCcm9hZHBoYXNlKCk7CiAgICAgIHRoaXMuYm9kaWVzID0gW107CiAgICAgIHRoaXMuaGFzQWN0aXZlQm9kaWVzID0gZmFsc2U7CiAgICAgIHRoaXMuc29sdmVyID0gb3B0aW9ucy5zb2x2ZXIgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuc29sdmVyIDogbmV3IEdTU29sdmVyKCk7CiAgICAgIHRoaXMuY29uc3RyYWludHMgPSBbXTsKICAgICAgdGhpcy5uYXJyb3dwaGFzZSA9IG5ldyBOYXJyb3dwaGFzZSh0aGlzKTsKICAgICAgdGhpcy5jb2xsaXNpb25NYXRyaXggPSBuZXcgQXJyYXlDb2xsaXNpb25NYXRyaXgoKTsKICAgICAgdGhpcy5jb2xsaXNpb25NYXRyaXhQcmV2aW91cyA9IG5ldyBBcnJheUNvbGxpc2lvbk1hdHJpeCgpOwogICAgICB0aGlzLmJvZHlPdmVybGFwS2VlcGVyID0gbmV3IE92ZXJsYXBLZWVwZXIoKTsKICAgICAgdGhpcy5zaGFwZU92ZXJsYXBLZWVwZXIgPSBuZXcgT3ZlcmxhcEtlZXBlcigpOwogICAgICB0aGlzLmNvbnRhY3RtYXRlcmlhbHMgPSBbXTsKICAgICAgdGhpcy5jb250YWN0TWF0ZXJpYWxUYWJsZSA9IG5ldyBUdXBsZURpY3Rpb25hcnkoKTsKICAgICAgdGhpcy5kZWZhdWx0TWF0ZXJpYWwgPSBuZXcgTWF0ZXJpYWwoJ2RlZmF1bHQnKTsKICAgICAgdGhpcy5kZWZhdWx0Q29udGFjdE1hdGVyaWFsID0gbmV3IENvbnRhY3RNYXRlcmlhbCh0aGlzLmRlZmF1bHRNYXRlcmlhbCwgdGhpcy5kZWZhdWx0TWF0ZXJpYWwsIHsKICAgICAgICBmcmljdGlvbjogMC4zLAogICAgICAgIHJlc3RpdHV0aW9uOiAwLjAKICAgICAgfSk7CiAgICAgIHRoaXMuZG9Qcm9maWxpbmcgPSBmYWxzZTsKICAgICAgdGhpcy5wcm9maWxlID0gewogICAgICAgIHNvbHZlOiAwLAogICAgICAgIG1ha2VDb250YWN0Q29uc3RyYWludHM6IDAsCiAgICAgICAgYnJvYWRwaGFzZTogMCwKICAgICAgICBpbnRlZ3JhdGU6IDAsCiAgICAgICAgbmFycm93cGhhc2U6IDAKICAgICAgfTsKICAgICAgdGhpcy5hY2N1bXVsYXRvciA9IDA7CiAgICAgIHRoaXMuc3Vic3lzdGVtcyA9IFtdOwogICAgICB0aGlzLmFkZEJvZHlFdmVudCA9IHsKICAgICAgICB0eXBlOiAnYWRkQm9keScsCiAgICAgICAgYm9keTogbnVsbAogICAgICB9OwogICAgICB0aGlzLnJlbW92ZUJvZHlFdmVudCA9IHsKICAgICAgICB0eXBlOiAncmVtb3ZlQm9keScsCiAgICAgICAgYm9keTogbnVsbAogICAgICB9OwogICAgICB0aGlzLmlkVG9Cb2R5TWFwID0ge307CiAgICAgIHRoaXMuYnJvYWRwaGFzZS5zZXRXb3JsZCh0aGlzKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSBjb250YWN0IG1hdGVyaWFsIGJldHdlZW4gbWF0ZXJpYWxzIG0xIGFuZCBtMgogICAgICogQHJldHVybiBUaGUgY29udGFjdCBtYXRlcmlhbCBpZiBpdCB3YXMgZm91bmQuCiAgICAgKi8KCgogICAgZ2V0Q29udGFjdE1hdGVyaWFsKG0xLCBtMikgewogICAgICByZXR1cm4gdGhpcy5jb250YWN0TWF0ZXJpYWxUYWJsZS5nZXQobTEuaWQsIG0yLmlkKTsKICAgIH0KICAgIC8qKgogICAgICogU3RvcmUgb2xkIGNvbGxpc2lvbiBzdGF0ZSBpbmZvCiAgICAgKi8KCgogICAgY29sbGlzaW9uTWF0cml4VGljaygpIHsKICAgICAgY29uc3QgdGVtcCA9IHRoaXMuY29sbGlzaW9uTWF0cml4UHJldmlvdXM7CiAgICAgIHRoaXMuY29sbGlzaW9uTWF0cml4UHJldmlvdXMgPSB0aGlzLmNvbGxpc2lvbk1hdHJpeDsKICAgICAgdGhpcy5jb2xsaXNpb25NYXRyaXggPSB0ZW1wOwogICAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeC5yZXNldCgpOwogICAgICB0aGlzLmJvZHlPdmVybGFwS2VlcGVyLnRpY2soKTsKICAgICAgdGhpcy5zaGFwZU92ZXJsYXBLZWVwZXIudGljaygpOwogICAgfQogICAgLyoqCiAgICAgKiBBZGQgYSBjb25zdHJhaW50IHRvIHRoZSBzaW11bGF0aW9uLgogICAgICovCgoKICAgIGFkZENvbnN0cmFpbnQoYykgewogICAgICB0aGlzLmNvbnN0cmFpbnRzLnB1c2goYyk7CiAgICB9CiAgICAvKioKICAgICAqIFJlbW92ZXMgYSBjb25zdHJhaW50CiAgICAgKi8KCgogICAgcmVtb3ZlQ29uc3RyYWludChjKSB7CiAgICAgIGNvbnN0IGlkeCA9IHRoaXMuY29uc3RyYWludHMuaW5kZXhPZihjKTsKCiAgICAgIGlmIChpZHggIT09IC0xKSB7CiAgICAgICAgdGhpcy5jb25zdHJhaW50cy5zcGxpY2UoaWR4LCAxKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBSYXljYXN0IHRlc3QKICAgICAqIEBkZXByZWNhdGVkIFVzZSAucmF5Y2FzdEFsbCwgLnJheWNhc3RDbG9zZXN0IG9yIC5yYXljYXN0QW55IGluc3RlYWQuCiAgICAgKi8KCgogICAgcmF5VGVzdChmcm9tLCB0bywgcmVzdWx0KSB7CiAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBSYXljYXN0UmVzdWx0KSB7CiAgICAgICAgLy8gRG8gcmF5Y2FzdENsb3Nlc3QKICAgICAgICB0aGlzLnJheWNhc3RDbG9zZXN0KGZyb20sIHRvLCB7CiAgICAgICAgICBza2lwQmFja2ZhY2VzOiB0cnVlCiAgICAgICAgfSwgcmVzdWx0KTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBEbyByYXljYXN0QWxsCiAgICAgICAgdGhpcy5yYXljYXN0QWxsKGZyb20sIHRvLCB7CiAgICAgICAgICBza2lwQmFja2ZhY2VzOiB0cnVlCiAgICAgICAgfSwgcmVzdWx0KTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBSYXkgY2FzdCBhZ2FpbnN0IGFsbCBib2RpZXMuIFRoZSBwcm92aWRlZCBjYWxsYmFjayB3aWxsIGJlIGV4ZWN1dGVkIGZvciBlYWNoIGhpdCB3aXRoIGEgUmF5Y2FzdFJlc3VsdCBhcyBzaW5nbGUgYXJndW1lbnQuCiAgICAgKiBAcmV0dXJuIFRydWUgaWYgYW55IGJvZHkgd2FzIGhpdC4KICAgICAqLwoKCiAgICByYXljYXN0QWxsKGZyb20sIHRvLCBvcHRpb25zLCBjYWxsYmFjaykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBvcHRpb25zLm1vZGUgPSBSYXkuQUxMOwogICAgICBvcHRpb25zLmZyb20gPSBmcm9tOwogICAgICBvcHRpb25zLnRvID0gdG87CiAgICAgIG9wdGlvbnMuY2FsbGJhY2sgPSBjYWxsYmFjazsKICAgICAgcmV0dXJuIHRtcFJheS5pbnRlcnNlY3RXb3JsZCh0aGlzLCBvcHRpb25zKTsKICAgIH0KICAgIC8qKgogICAgICogUmF5IGNhc3QsIGFuZCBzdG9wIGF0IHRoZSBmaXJzdCByZXN1bHQuIE5vdGUgdGhhdCB0aGUgb3JkZXIgaXMgcmFuZG9tIC0gYnV0IHRoZSBtZXRob2QgaXMgZmFzdC4KICAgICAqIEByZXR1cm4gVHJ1ZSBpZiBhbnkgYm9keSB3YXMgaGl0LgogICAgICovCgoKICAgIHJheWNhc3RBbnkoZnJvbSwgdG8sIG9wdGlvbnMsIHJlc3VsdCkgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBvcHRpb25zLm1vZGUgPSBSYXkuQU5ZOwogICAgICBvcHRpb25zLmZyb20gPSBmcm9tOwogICAgICBvcHRpb25zLnRvID0gdG87CiAgICAgIG9wdGlvbnMucmVzdWx0ID0gcmVzdWx0OwogICAgICByZXR1cm4gdG1wUmF5LmludGVyc2VjdFdvcmxkKHRoaXMsIG9wdGlvbnMpOwogICAgfQogICAgLyoqCiAgICAgKiBSYXkgY2FzdCwgYW5kIHJldHVybiBpbmZvcm1hdGlvbiBvZiB0aGUgY2xvc2VzdCBoaXQuCiAgICAgKiBAcmV0dXJuIFRydWUgaWYgYW55IGJvZHkgd2FzIGhpdC4KICAgICAqLwoKCiAgICByYXljYXN0Q2xvc2VzdChmcm9tLCB0bywgb3B0aW9ucywgcmVzdWx0KSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIG9wdGlvbnMubW9kZSA9IFJheS5DTE9TRVNUOwogICAgICBvcHRpb25zLmZyb20gPSBmcm9tOwogICAgICBvcHRpb25zLnRvID0gdG87CiAgICAgIG9wdGlvbnMucmVzdWx0ID0gcmVzdWx0OwogICAgICByZXR1cm4gdG1wUmF5LmludGVyc2VjdFdvcmxkKHRoaXMsIG9wdGlvbnMpOwogICAgfQogICAgLyoqCiAgICAgKiBBZGQgYSByaWdpZCBib2R5IHRvIHRoZSBzaW11bGF0aW9uLgogICAgICogQHRvZG8gSWYgdGhlIHNpbXVsYXRpb24gaGFzIG5vdCB5ZXQgc3RhcnRlZCwgd2h5IHJlY3JldGUgYW5kIGNvcHkgYXJyYXlzIGZvciBlYWNoIGJvZHk/IEFjY3VtdWxhdGUgaW4gZHluYW1pYyBhcnJheXMgaW4gdGhpcyBjYXNlLgogICAgICogQHRvZG8gQWRkaW5nIGFuIGFycmF5IG9mIGJvZGllcyBzaG91bGQgYmUgcG9zc2libGUuIFRoaXMgd291bGQgc2F2ZSBzb21lIGxvb3BzIHRvbwogICAgICovCgoKICAgIGFkZEJvZHkoYm9keSkgewogICAgICBpZiAodGhpcy5ib2RpZXMuaW5jbHVkZXMoYm9keSkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGJvZHkuaW5kZXggPSB0aGlzLmJvZGllcy5sZW5ndGg7CiAgICAgIHRoaXMuYm9kaWVzLnB1c2goYm9keSk7CiAgICAgIGJvZHkud29ybGQgPSB0aGlzOwogICAgICBib2R5LmluaXRQb3NpdGlvbi5jb3B5KGJvZHkucG9zaXRpb24pOwogICAgICBib2R5LmluaXRWZWxvY2l0eS5jb3B5KGJvZHkudmVsb2NpdHkpOwogICAgICBib2R5LnRpbWVMYXN0U2xlZXB5ID0gdGhpcy50aW1lOwoKICAgICAgaWYgKGJvZHkgaW5zdGFuY2VvZiBCb2R5KSB7CiAgICAgICAgYm9keS5pbml0QW5ndWxhclZlbG9jaXR5LmNvcHkoYm9keS5hbmd1bGFyVmVsb2NpdHkpOwogICAgICAgIGJvZHkuaW5pdFF1YXRlcm5pb24uY29weShib2R5LnF1YXRlcm5pb24pOwogICAgICB9CgogICAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeC5zZXROdW1PYmplY3RzKHRoaXMuYm9kaWVzLmxlbmd0aCk7CiAgICAgIHRoaXMuYWRkQm9keUV2ZW50LmJvZHkgPSBib2R5OwogICAgICB0aGlzLmlkVG9Cb2R5TWFwW2JvZHkuaWRdID0gYm9keTsKICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KHRoaXMuYWRkQm9keUV2ZW50KTsKICAgIH0KICAgIC8qKgogICAgICogUmVtb3ZlIGEgcmlnaWQgYm9keSBmcm9tIHRoZSBzaW11bGF0aW9uLgogICAgICovCgoKICAgIHJlbW92ZUJvZHkoYm9keSkgewogICAgICBib2R5LndvcmxkID0gbnVsbDsKICAgICAgY29uc3QgbiA9IHRoaXMuYm9kaWVzLmxlbmd0aCAtIDE7CiAgICAgIGNvbnN0IGJvZGllcyA9IHRoaXMuYm9kaWVzOwogICAgICBjb25zdCBpZHggPSBib2RpZXMuaW5kZXhPZihib2R5KTsKCiAgICAgIGlmIChpZHggIT09IC0xKSB7CiAgICAgICAgYm9kaWVzLnNwbGljZShpZHgsIDEpOyAvLyBUb2RvOiBzaG91bGQgdXNlIGEgZ2FyYmFnZSBmcmVlIG1ldGhvZAogICAgICAgIC8vIFJlY29tcHV0ZSBpbmRleAoKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gYm9kaWVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBib2RpZXNbaV0uaW5kZXggPSBpOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5jb2xsaXNpb25NYXRyaXguc2V0TnVtT2JqZWN0cyhuKTsKICAgICAgICB0aGlzLnJlbW92ZUJvZHlFdmVudC5ib2R5ID0gYm9keTsKICAgICAgICBkZWxldGUgdGhpcy5pZFRvQm9keU1hcFtib2R5LmlkXTsKICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQodGhpcy5yZW1vdmVCb2R5RXZlbnQpOwogICAgICB9CiAgICB9CgogICAgZ2V0Qm9keUJ5SWQoaWQpIHsKICAgICAgcmV0dXJuIHRoaXMuaWRUb0JvZHlNYXBbaWRdOwogICAgfQogICAgLyoqCiAgICAgKiBAdG9kbyBNYWtlIGEgZmFzdGVyIG1hcAogICAgICovCgoKICAgIGdldFNoYXBlQnlJZChpZCkgewogICAgICBjb25zdCBib2RpZXMgPSB0aGlzLmJvZGllczsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYm9kaWVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3Qgc2hhcGVzID0gYm9kaWVzW2ldLnNoYXBlczsKCiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBzaGFwZXMubGVuZ3RoOyBqKyspIHsKICAgICAgICAgIGNvbnN0IHNoYXBlID0gc2hhcGVzW2pdOwoKICAgICAgICAgIGlmIChzaGFwZS5pZCA9PT0gaWQpIHsKICAgICAgICAgICAgcmV0dXJuIHNoYXBlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgICAvKioKICAgICAqIEFkZHMgYSBjb250YWN0IG1hdGVyaWFsIHRvIHRoZSBXb3JsZAogICAgICovCgoKICAgIGFkZENvbnRhY3RNYXRlcmlhbChjbWF0KSB7CiAgICAgIC8vIEFkZCBjb250YWN0IG1hdGVyaWFsCiAgICAgIHRoaXMuY29udGFjdG1hdGVyaWFscy5wdXNoKGNtYXQpOyAvLyBBZGQgY3VycmVudCBjb250YWN0IG1hdGVyaWFsIHRvIHRoZSBtYXRlcmlhbCB0YWJsZQoKICAgICAgdGhpcy5jb250YWN0TWF0ZXJpYWxUYWJsZS5zZXQoY21hdC5tYXRlcmlhbHNbMF0uaWQsIGNtYXQubWF0ZXJpYWxzWzFdLmlkLCBjbWF0KTsKICAgIH0KICAgIC8qKgogICAgICogUmVtb3ZlcyBhIGNvbnRhY3QgbWF0ZXJpYWwgZnJvbSB0aGUgV29ybGQuCiAgICAgKi8KCgogICAgcmVtb3ZlQ29udGFjdE1hdGVyaWFsKGNtYXQpIHsKICAgICAgY29uc3QgaWR4ID0gdGhpcy5jb250YWN0bWF0ZXJpYWxzLmluZGV4T2YoY21hdCk7CgogICAgICBpZiAoaWR4ID09PSAtMSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy5jb250YWN0bWF0ZXJpYWxzLnNwbGljZShpZHgsIDEpOwogICAgICB0aGlzLmNvbnRhY3RNYXRlcmlhbFRhYmxlLmRlbGV0ZShjbWF0Lm1hdGVyaWFsc1swXS5pZCwgY21hdC5tYXRlcmlhbHNbMV0uaWQpOwogICAgfQogICAgLyoqCiAgICAgKiBTdGVwIHRoZSBzaW11bGF0aW9uIGZvcndhcmQga2VlcGluZyB0cmFjayBvZiBsYXN0IGNhbGxlZCB0aW1lCiAgICAgKiB0byBiZSBhYmxlIHRvIHN0ZXAgdGhlIHdvcmxkIGF0IGEgZml4ZWQgcmF0ZSwgaW5kZXBlbmRlbnRseSBvZiBmcmFtZXJhdGUuCiAgICAgKgogICAgICogQHBhcmFtIGR0IFRoZSBmaXhlZCB0aW1lIHN0ZXAgc2l6ZSB0byB1c2UgKGRlZmF1bHQ6IDEgLyA2MCkuCiAgICAgKiBAcGFyYW0gbWF4U3ViU3RlcHMgTWF4aW11bSBudW1iZXIgb2YgZml4ZWQgc3RlcHMgdG8gdGFrZSBwZXIgZnVuY3Rpb24gY2FsbCAoZGVmYXVsdDogMTApLgogICAgICogQHNlZSBodHRwczovL2dhZmZlcm9uZ2FtZXMuY29tL3Bvc3QvZml4X3lvdXJfdGltZXN0ZXAvCiAgICAgKiBAZXhhbXBsZQogICAgICogICAgIC8vIFJ1biB0aGUgc2ltdWxhdGlvbiBpbmRlcGVuZGVudGx5IG9mIGZyYW1lcmF0ZSBldmVyeSAxIC8gNjAgbXMKICAgICAqICAgICB3b3JsZC5maXhlZFN0ZXAoKQogICAgICovCgoKICAgIGZpeGVkU3RlcChkdCwgbWF4U3ViU3RlcHMpIHsKICAgICAgaWYgKGR0ID09PSB2b2lkIDApIHsKICAgICAgICBkdCA9IDEgLyA2MDsKICAgICAgfQoKICAgICAgaWYgKG1heFN1YlN0ZXBzID09PSB2b2lkIDApIHsKICAgICAgICBtYXhTdWJTdGVwcyA9IDEwOwogICAgICB9CgogICAgICBjb25zdCB0aW1lID0gcGVyZm9ybWFuY2Uubm93KCkgLyAxMDAwOyAvLyBzZWNvbmRzCgogICAgICBpZiAoIXRoaXMubGFzdENhbGxUaW1lKSB7CiAgICAgICAgdGhpcy5zdGVwKGR0LCB1bmRlZmluZWQsIG1heFN1YlN0ZXBzKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zdCB0aW1lU2luY2VMYXN0Q2FsbGVkID0gdGltZSAtIHRoaXMubGFzdENhbGxUaW1lOwogICAgICAgIHRoaXMuc3RlcChkdCwgdGltZVNpbmNlTGFzdENhbGxlZCwgbWF4U3ViU3RlcHMpOwogICAgICB9CgogICAgICB0aGlzLmxhc3RDYWxsVGltZSA9IHRpbWU7CiAgICB9CiAgICAvKioKICAgICAqIFN0ZXAgdGhlIHBoeXNpY3Mgd29ybGQgZm9yd2FyZCBpbiB0aW1lLgogICAgICoKICAgICAqIFRoZXJlIGFyZSB0d28gbW9kZXMuIFRoZSBzaW1wbGUgbW9kZSBpcyBmaXhlZCB0aW1lc3RlcHBpbmcgd2l0aG91dCBpbnRlcnBvbGF0aW9uLiBJbiB0aGlzIGNhc2UgeW91IG9ubHkgdXNlIHRoZSBmaXJzdCBhcmd1bWVudC4gVGhlIHNlY29uZCBjYXNlIHVzZXMgaW50ZXJwb2xhdGlvbi4gSW4gdGhhdCB5b3UgYWxzbyBwcm92aWRlIHRoZSB0aW1lIHNpbmNlIHRoZSBmdW5jdGlvbiB3YXMgbGFzdCB1c2VkLCBhcyB3ZWxsIGFzIHRoZSBtYXhpbXVtIGZpeGVkIHRpbWVzdGVwcyB0byB0YWtlLgogICAgICoKICAgICAqIEBwYXJhbSBkdCBUaGUgZml4ZWQgdGltZSBzdGVwIHNpemUgdG8gdXNlLgogICAgICogQHBhcmFtIHRpbWVTaW5jZUxhc3RDYWxsZWQgVGhlIHRpbWUgZWxhcHNlZCBzaW5jZSB0aGUgZnVuY3Rpb24gd2FzIGxhc3QgY2FsbGVkLgogICAgICogQHBhcmFtIG1heFN1YlN0ZXBzIE1heGltdW0gbnVtYmVyIG9mIGZpeGVkIHN0ZXBzIHRvIHRha2UgcGVyIGZ1bmN0aW9uIGNhbGwgKGRlZmF1bHQ6IDEwKS4KICAgICAqIEBzZWUgaHR0cHM6Ly93ZWIuYXJjaGl2ZS5vcmcvd2ViLzIwMTgwNDI2MTU0NTMxL2h0dHA6Ly9idWxsZXRwaHlzaWNzLm9yZy9tZWRpYXdpa2ktMS41LjgvaW5kZXgucGhwL1N0ZXBwaW5nX1RoZV9Xb3JsZCNXaGF0X2RvX3RoZV9wYXJhbWV0ZXJzX3RvX2J0RHluYW1pY3NXb3JsZDo6c3RlcFNpbXVsYXRpb25fbWVhbi4zRgogICAgICogQGV4YW1wbGUKICAgICAqICAgICAvLyBmaXhlZCB0aW1lc3RlcHBpbmcgd2l0aG91dCBpbnRlcnBvbGF0aW9uCiAgICAgKiAgICAgd29ybGQuc3RlcCgxIC8gNjApCiAgICAgKi8KCgogICAgc3RlcChkdCwgdGltZVNpbmNlTGFzdENhbGxlZCwgbWF4U3ViU3RlcHMpIHsKICAgICAgaWYgKG1heFN1YlN0ZXBzID09PSB2b2lkIDApIHsKICAgICAgICBtYXhTdWJTdGVwcyA9IDEwOwogICAgICB9CgogICAgICBpZiAodGltZVNpbmNlTGFzdENhbGxlZCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgLy8gRml4ZWQsIHNpbXBsZSBzdGVwcGluZwogICAgICAgIHRoaXMuaW50ZXJuYWxTdGVwKGR0KTsgLy8gSW5jcmVtZW50IHRpbWUKCiAgICAgICAgdGhpcy50aW1lICs9IGR0OwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuYWNjdW11bGF0b3IgKz0gdGltZVNpbmNlTGFzdENhbGxlZDsKICAgICAgICBjb25zdCB0MCA9IHBlcmZvcm1hbmNlLm5vdygpOwogICAgICAgIGxldCBzdWJzdGVwcyA9IDA7CgogICAgICAgIHdoaWxlICh0aGlzLmFjY3VtdWxhdG9yID49IGR0ICYmIHN1YnN0ZXBzIDwgbWF4U3ViU3RlcHMpIHsKICAgICAgICAgIC8vIERvIGZpeGVkIHN0ZXBzIHRvIGNhdGNoIHVwCiAgICAgICAgICB0aGlzLmludGVybmFsU3RlcChkdCk7CiAgICAgICAgICB0aGlzLmFjY3VtdWxhdG9yIC09IGR0OwogICAgICAgICAgc3Vic3RlcHMrKzsKCiAgICAgICAgICBpZiAocGVyZm9ybWFuY2Uubm93KCkgLSB0MCA+IGR0ICogMTAwMCkgewogICAgICAgICAgICAvLyBUaGUgZnJhbWVyYXRlIGlzIG5vdCBpbnRlcmFjdGl2ZSBhbnltb3JlLgogICAgICAgICAgICAvLyBXZSBhcmUgYmVsb3cgdGhlIHRhcmdldCBmcmFtZXJhdGUuCiAgICAgICAgICAgIC8vIEJldHRlciBiYWlsIG91dC4KICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgfSAvLyBSZW1vdmUgdGhlIGV4Y2VzcyBhY2N1bXVsYXRvciwgc2luY2Ugd2UgbWF5IG5vdAogICAgICAgIC8vIGhhdmUgaGFkIGVub3VnaCBzdWJzdGVwcyBhdmFpbGFibGUgdG8gY2F0Y2ggdXAKCgogICAgICAgIHRoaXMuYWNjdW11bGF0b3IgPSB0aGlzLmFjY3VtdWxhdG9yICUgZHQ7CiAgICAgICAgY29uc3QgdCA9IHRoaXMuYWNjdW11bGF0b3IgLyBkdDsKCiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogIT09IHRoaXMuYm9kaWVzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICBjb25zdCBiID0gdGhpcy5ib2RpZXNbal07CiAgICAgICAgICBiLnByZXZpb3VzUG9zaXRpb24ubGVycChiLnBvc2l0aW9uLCB0LCBiLmludGVycG9sYXRlZFBvc2l0aW9uKTsKICAgICAgICAgIGIucHJldmlvdXNRdWF0ZXJuaW9uLnNsZXJwKGIucXVhdGVybmlvbiwgdCwgYi5pbnRlcnBvbGF0ZWRRdWF0ZXJuaW9uKTsKICAgICAgICAgIGIucHJldmlvdXNRdWF0ZXJuaW9uLm5vcm1hbGl6ZSgpOwogICAgICAgIH0KCiAgICAgICAgdGhpcy50aW1lICs9IHRpbWVTaW5jZUxhc3RDYWxsZWQ7CiAgICAgIH0KICAgIH0KCiAgICBpbnRlcm5hbFN0ZXAoZHQpIHsKICAgICAgdGhpcy5kdCA9IGR0OwogICAgICBjb25zdCBjb250YWN0cyA9IHRoaXMuY29udGFjdHM7CiAgICAgIGNvbnN0IHAxID0gV29ybGRfc3RlcF9wMTsKICAgICAgY29uc3QgcDIgPSBXb3JsZF9zdGVwX3AyOwogICAgICBjb25zdCBOID0gdGhpcy5ib2RpZXMubGVuZ3RoOwogICAgICBjb25zdCBib2RpZXMgPSB0aGlzLmJvZGllczsKICAgICAgY29uc3Qgc29sdmVyID0gdGhpcy5zb2x2ZXI7CiAgICAgIGNvbnN0IGdyYXZpdHkgPSB0aGlzLmdyYXZpdHk7CiAgICAgIGNvbnN0IGRvUHJvZmlsaW5nID0gdGhpcy5kb1Byb2ZpbGluZzsKICAgICAgY29uc3QgcHJvZmlsZSA9IHRoaXMucHJvZmlsZTsKICAgICAgY29uc3QgRFlOQU1JQyA9IEJvZHkuRFlOQU1JQzsKICAgICAgbGV0IHByb2ZpbGluZ1N0YXJ0ID0gLUluZmluaXR5OwogICAgICBjb25zdCBjb25zdHJhaW50cyA9IHRoaXMuY29uc3RyYWludHM7CiAgICAgIGNvbnN0IGZyaWN0aW9uRXF1YXRpb25Qb29sID0gV29ybGRfc3RlcF9mcmljdGlvbkVxdWF0aW9uUG9vbDsKICAgICAgZ3Jhdml0eS5sZW5ndGgoKTsKICAgICAgY29uc3QgZ3ggPSBncmF2aXR5Lng7CiAgICAgIGNvbnN0IGd5ID0gZ3Jhdml0eS55OwogICAgICBjb25zdCBneiA9IGdyYXZpdHkuejsKICAgICAgbGV0IGkgPSAwOwoKICAgICAgaWYgKGRvUHJvZmlsaW5nKSB7CiAgICAgICAgcHJvZmlsaW5nU3RhcnQgPSBwZXJmb3JtYW5jZS5ub3coKTsKICAgICAgfSAvLyBBZGQgZ3Jhdml0eSB0byBhbGwgb2JqZWN0cwoKCiAgICAgIGZvciAoaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICAgIGNvbnN0IGJpID0gYm9kaWVzW2ldOwoKICAgICAgICBpZiAoYmkudHlwZSA9PT0gRFlOQU1JQykgewogICAgICAgICAgLy8gT25seSBmb3IgZHluYW1pYyBib2RpZXMKICAgICAgICAgIGNvbnN0IGYgPSBiaS5mb3JjZTsKICAgICAgICAgIGNvbnN0IG0gPSBiaS5tYXNzOwogICAgICAgICAgZi54ICs9IG0gKiBneDsKICAgICAgICAgIGYueSArPSBtICogZ3k7CiAgICAgICAgICBmLnogKz0gbSAqIGd6OwogICAgICAgIH0KICAgICAgfSAvLyBVcGRhdGUgc3Vic3lzdGVtcwoKCiAgICAgIGZvciAobGV0IGkgPSAwLCBOc3Vic3lzdGVtcyA9IHRoaXMuc3Vic3lzdGVtcy5sZW5ndGg7IGkgIT09IE5zdWJzeXN0ZW1zOyBpKyspIHsKICAgICAgICB0aGlzLnN1YnN5c3RlbXNbaV0udXBkYXRlKCk7CiAgICAgIH0gLy8gQ29sbGlzaW9uIGRldGVjdGlvbgoKCiAgICAgIGlmIChkb1Byb2ZpbGluZykgewogICAgICAgIHByb2ZpbGluZ1N0YXJ0ID0gcGVyZm9ybWFuY2Uubm93KCk7CiAgICAgIH0KCiAgICAgIHAxLmxlbmd0aCA9IDA7IC8vIENsZWFuIHVwIHBhaXIgYXJyYXlzIGZyb20gbGFzdCBzdGVwCgogICAgICBwMi5sZW5ndGggPSAwOwogICAgICB0aGlzLmJyb2FkcGhhc2UuY29sbGlzaW9uUGFpcnModGhpcywgcDEsIHAyKTsKCiAgICAgIGlmIChkb1Byb2ZpbGluZykgewogICAgICAgIHByb2ZpbGUuYnJvYWRwaGFzZSA9IHBlcmZvcm1hbmNlLm5vdygpIC0gcHJvZmlsaW5nU3RhcnQ7CiAgICAgIH0gLy8gUmVtb3ZlIGNvbnN0cmFpbmVkIHBhaXJzIHdpdGggY29sbGlkZUNvbm5lY3RlZCA9PSBmYWxzZQoKCiAgICAgIGxldCBOY29uc3RyYWludHMgPSBjb25zdHJhaW50cy5sZW5ndGg7CgogICAgICBmb3IgKGkgPSAwOyBpICE9PSBOY29uc3RyYWludHM7IGkrKykgewogICAgICAgIGNvbnN0IGMgPSBjb25zdHJhaW50c1tpXTsKCiAgICAgICAgaWYgKCFjLmNvbGxpZGVDb25uZWN0ZWQpIHsKICAgICAgICAgIGZvciAobGV0IGogPSBwMS5sZW5ndGggLSAxOyBqID49IDA7IGogLT0gMSkgewogICAgICAgICAgICBpZiAoYy5ib2R5QSA9PT0gcDFbal0gJiYgYy5ib2R5QiA9PT0gcDJbal0gfHwgYy5ib2R5QiA9PT0gcDFbal0gJiYgYy5ib2R5QSA9PT0gcDJbal0pIHsKICAgICAgICAgICAgICBwMS5zcGxpY2UoaiwgMSk7CiAgICAgICAgICAgICAgcDIuc3BsaWNlKGosIDEpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeFRpY2soKTsgLy8gR2VuZXJhdGUgY29udGFjdHMKCiAgICAgIGlmIChkb1Byb2ZpbGluZykgewogICAgICAgIHByb2ZpbGluZ1N0YXJ0ID0gcGVyZm9ybWFuY2Uubm93KCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IG9sZGNvbnRhY3RzID0gV29ybGRfc3RlcF9vbGRDb250YWN0czsKICAgICAgY29uc3QgTm9sZENvbnRhY3RzID0gY29udGFjdHMubGVuZ3RoOwoKICAgICAgZm9yIChpID0gMDsgaSAhPT0gTm9sZENvbnRhY3RzOyBpKyspIHsKICAgICAgICBvbGRjb250YWN0cy5wdXNoKGNvbnRhY3RzW2ldKTsKICAgICAgfQoKICAgICAgY29udGFjdHMubGVuZ3RoID0gMDsgLy8gVHJhbnNmZXIgRnJpY3Rpb25FcXVhdGlvbiBmcm9tIGN1cnJlbnQgbGlzdCB0byB0aGUgcG9vbCBmb3IgcmV1c2UKCiAgICAgIGNvbnN0IE5vbGRGcmljdGlvbkVxdWF0aW9ucyA9IHRoaXMuZnJpY3Rpb25FcXVhdGlvbnMubGVuZ3RoOwoKICAgICAgZm9yIChpID0gMDsgaSAhPT0gTm9sZEZyaWN0aW9uRXF1YXRpb25zOyBpKyspIHsKICAgICAgICBmcmljdGlvbkVxdWF0aW9uUG9vbC5wdXNoKHRoaXMuZnJpY3Rpb25FcXVhdGlvbnNbaV0pOwogICAgICB9CgogICAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25zLmxlbmd0aCA9IDA7CiAgICAgIHRoaXMubmFycm93cGhhc2UuZ2V0Q29udGFjdHMocDEsIHAyLCB0aGlzLCBjb250YWN0cywgb2xkY29udGFjdHMsIC8vIFRvIGJlIHJldXNlZAogICAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25zLCBmcmljdGlvbkVxdWF0aW9uUG9vbCk7CgogICAgICBpZiAoZG9Qcm9maWxpbmcpIHsKICAgICAgICBwcm9maWxlLm5hcnJvd3BoYXNlID0gcGVyZm9ybWFuY2Uubm93KCkgLSBwcm9maWxpbmdTdGFydDsKICAgICAgfSAvLyBMb29wIG92ZXIgYWxsIGNvbGxpc2lvbnMKCgogICAgICBpZiAoZG9Qcm9maWxpbmcpIHsKICAgICAgICBwcm9maWxpbmdTdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpOwogICAgICB9IC8vIEFkZCBhbGwgZnJpY3Rpb24gZXFzCgoKICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMuZnJpY3Rpb25FcXVhdGlvbnMubGVuZ3RoOyBpKyspIHsKICAgICAgICBzb2x2ZXIuYWRkRXF1YXRpb24odGhpcy5mcmljdGlvbkVxdWF0aW9uc1tpXSk7CiAgICAgIH0KCiAgICAgIGNvbnN0IG5jb250YWN0cyA9IGNvbnRhY3RzLmxlbmd0aDsKCiAgICAgIGZvciAobGV0IGsgPSAwOyBrICE9PSBuY29udGFjdHM7IGsrKykgewogICAgICAgIC8vIEN1cnJlbnQgY29udGFjdAogICAgICAgIGNvbnN0IGMgPSBjb250YWN0c1trXTsgLy8gR2V0IGN1cnJlbnQgY29sbGlzaW9uIGluZGVjZXMKCiAgICAgICAgY29uc3QgYmkgPSBjLmJpOwogICAgICAgIGNvbnN0IGJqID0gYy5iajsKICAgICAgICBjb25zdCBzaSA9IGMuc2k7CiAgICAgICAgY29uc3Qgc2ogPSBjLnNqOyAvLyBHZXQgY29sbGlzaW9uIHByb3BlcnRpZXMKCiAgICAgICAgbGV0IGNtOwoKICAgICAgICBpZiAoYmkubWF0ZXJpYWwgJiYgYmoubWF0ZXJpYWwpIHsKICAgICAgICAgIGNtID0gdGhpcy5nZXRDb250YWN0TWF0ZXJpYWwoYmkubWF0ZXJpYWwsIGJqLm1hdGVyaWFsKSB8fCB0aGlzLmRlZmF1bHRDb250YWN0TWF0ZXJpYWw7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNtID0gdGhpcy5kZWZhdWx0Q29udGFjdE1hdGVyaWFsOwogICAgICAgIH0gLy8gYy5lbmFibGVkID0gYmkuY29sbGlzaW9uUmVzcG9uc2UgJiYgYmouY29sbGlzaW9uUmVzcG9uc2UgJiYgc2kuY29sbGlzaW9uUmVzcG9uc2UgJiYgc2ouY29sbGlzaW9uUmVzcG9uc2U7CgoKICAgICAgICBjbS5mcmljdGlvbjsgLy8gYy5yZXN0aXR1dGlvbiA9IGNtLnJlc3RpdHV0aW9uOwogICAgICAgIC8vIElmIGZyaWN0aW9uIG9yIHJlc3RpdHV0aW9uIHdlcmUgc3BlY2lmaWVkIGluIHRoZSBtYXRlcmlhbCwgdXNlIHRoZW0KCiAgICAgICAgaWYgKGJpLm1hdGVyaWFsICYmIGJqLm1hdGVyaWFsKSB7CiAgICAgICAgICBpZiAoYmkubWF0ZXJpYWwuZnJpY3Rpb24gPj0gMCAmJiBiai5tYXRlcmlhbC5mcmljdGlvbiA+PSAwKSB7CiAgICAgICAgICAgIGJpLm1hdGVyaWFsLmZyaWN0aW9uICogYmoubWF0ZXJpYWwuZnJpY3Rpb247CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGJpLm1hdGVyaWFsLnJlc3RpdHV0aW9uID49IDAgJiYgYmoubWF0ZXJpYWwucmVzdGl0dXRpb24gPj0gMCkgewogICAgICAgICAgICBjLnJlc3RpdHV0aW9uID0gYmkubWF0ZXJpYWwucmVzdGl0dXRpb24gKiBiai5tYXRlcmlhbC5yZXN0aXR1dGlvbjsKICAgICAgICAgIH0KICAgICAgICB9IC8vIGMuc2V0U3Bvb2tQYXJhbXMoCiAgICAgICAgLy8gICAgICAgICAgIGNtLmNvbnRhY3RFcXVhdGlvblN0aWZmbmVzcywKICAgICAgICAvLyAgICAgICAgICAgY20uY29udGFjdEVxdWF0aW9uUmVsYXhhdGlvbiwKICAgICAgICAvLyAgICAgICAgICAgZHQKICAgICAgICAvLyAgICAgICApOwoKCiAgICAgICAgc29sdmVyLmFkZEVxdWF0aW9uKGMpOyAvLyAvLyBBZGQgZnJpY3Rpb24gY29uc3RyYWludCBlcXVhdGlvbgogICAgICAgIC8vIGlmKG11ID4gMCl7CiAgICAgICAgLy8gCS8vIENyZWF0ZSAyIHRhbmdlbnQgZXF1YXRpb25zCiAgICAgICAgLy8gCWNvbnN0IG11ZyA9IG11ICogZ25vcm07CiAgICAgICAgLy8gCWNvbnN0IHJlZHVjZWRNYXNzID0gKGJpLmludk1hc3MgKyBiai5pbnZNYXNzKTsKICAgICAgICAvLyAJaWYocmVkdWNlZE1hc3MgPiAwKXsKICAgICAgICAvLyAJCXJlZHVjZWRNYXNzID0gMS9yZWR1Y2VkTWFzczsKICAgICAgICAvLyAJfQogICAgICAgIC8vIAljb25zdCBwb29sID0gZnJpY3Rpb25FcXVhdGlvblBvb2w7CiAgICAgICAgLy8gCWNvbnN0IGMxID0gcG9vbC5sZW5ndGggPyBwb29sLnBvcCgpIDogbmV3IEZyaWN0aW9uRXF1YXRpb24oYmksYmosbXVnKnJlZHVjZWRNYXNzKTsKICAgICAgICAvLyAJY29uc3QgYzIgPSBwb29sLmxlbmd0aCA/IHBvb2wucG9wKCkgOiBuZXcgRnJpY3Rpb25FcXVhdGlvbihiaSxiaixtdWcqcmVkdWNlZE1hc3MpOwogICAgICAgIC8vIAl0aGlzLmZyaWN0aW9uRXF1YXRpb25zLnB1c2goYzEsIGMyKTsKICAgICAgICAvLyAJYzEuYmkgPSBjMi5iaSA9IGJpOwogICAgICAgIC8vIAljMS5iaiA9IGMyLmJqID0gYmo7CiAgICAgICAgLy8gCWMxLm1pbkZvcmNlID0gYzIubWluRm9yY2UgPSAtbXVnKnJlZHVjZWRNYXNzOwogICAgICAgIC8vIAljMS5tYXhGb3JjZSA9IGMyLm1heEZvcmNlID0gbXVnKnJlZHVjZWRNYXNzOwogICAgICAgIC8vIAkvLyBDb3B5IG92ZXIgdGhlIHJlbGF0aXZlIHZlY3RvcnMKICAgICAgICAvLyAJYzEucmkuY29weShjLnJpKTsKICAgICAgICAvLyAJYzEucmouY29weShjLnJqKTsKICAgICAgICAvLyAJYzIucmkuY29weShjLnJpKTsKICAgICAgICAvLyAJYzIucmouY29weShjLnJqKTsKICAgICAgICAvLyAJLy8gQ29uc3RydWN0IHRhbmdlbnRzCiAgICAgICAgLy8gCWMubmkudGFuZ2VudHMoYzEudCwgYzIudCk7CiAgICAgICAgLy8gICAgICAgICAgIC8vIFNldCBzcG9vayBwYXJhbXMKICAgICAgICAvLyAgICAgICAgICAgYzEuc2V0U3Bvb2tQYXJhbXMoY20uZnJpY3Rpb25FcXVhdGlvblN0aWZmbmVzcywgY20uZnJpY3Rpb25FcXVhdGlvblJlbGF4YXRpb24sIGR0KTsKICAgICAgICAvLyAgICAgICAgICAgYzIuc2V0U3Bvb2tQYXJhbXMoY20uZnJpY3Rpb25FcXVhdGlvblN0aWZmbmVzcywgY20uZnJpY3Rpb25FcXVhdGlvblJlbGF4YXRpb24sIGR0KTsKICAgICAgICAvLyAgICAgICAgICAgYzEuZW5hYmxlZCA9IGMyLmVuYWJsZWQgPSBjLmVuYWJsZWQ7CiAgICAgICAgLy8gCS8vIEFkZCBlcXVhdGlvbnMgdG8gc29sdmVyCiAgICAgICAgLy8gCXNvbHZlci5hZGRFcXVhdGlvbihjMSk7CiAgICAgICAgLy8gCXNvbHZlci5hZGRFcXVhdGlvbihjMik7CiAgICAgICAgLy8gfQoKICAgICAgICBpZiAoYmkuYWxsb3dTbGVlcCAmJiBiaS50eXBlID09PSBCb2R5LkRZTkFNSUMgJiYgYmkuc2xlZXBTdGF0ZSA9PT0gQm9keS5TTEVFUElORyAmJiBiai5zbGVlcFN0YXRlID09PSBCb2R5LkFXQUtFICYmIGJqLnR5cGUgIT09IEJvZHkuU1RBVElDKSB7CiAgICAgICAgICBjb25zdCBzcGVlZFNxdWFyZWRCID0gYmoudmVsb2NpdHkubGVuZ3RoU3F1YXJlZCgpICsgYmouYW5ndWxhclZlbG9jaXR5Lmxlbmd0aFNxdWFyZWQoKTsKICAgICAgICAgIGNvbnN0IHNwZWVkTGltaXRTcXVhcmVkQiA9IGJqLnNsZWVwU3BlZWRMaW1pdCAqKiAyOwoKICAgICAgICAgIGlmIChzcGVlZFNxdWFyZWRCID49IHNwZWVkTGltaXRTcXVhcmVkQiAqIDIpIHsKICAgICAgICAgICAgYmkud2FrZVVwQWZ0ZXJOYXJyb3dwaGFzZSA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoYmouYWxsb3dTbGVlcCAmJiBiai50eXBlID09PSBCb2R5LkRZTkFNSUMgJiYgYmouc2xlZXBTdGF0ZSA9PT0gQm9keS5TTEVFUElORyAmJiBiaS5zbGVlcFN0YXRlID09PSBCb2R5LkFXQUtFICYmIGJpLnR5cGUgIT09IEJvZHkuU1RBVElDKSB7CiAgICAgICAgICBjb25zdCBzcGVlZFNxdWFyZWRBID0gYmkudmVsb2NpdHkubGVuZ3RoU3F1YXJlZCgpICsgYmkuYW5ndWxhclZlbG9jaXR5Lmxlbmd0aFNxdWFyZWQoKTsKICAgICAgICAgIGNvbnN0IHNwZWVkTGltaXRTcXVhcmVkQSA9IGJpLnNsZWVwU3BlZWRMaW1pdCAqKiAyOwoKICAgICAgICAgIGlmIChzcGVlZFNxdWFyZWRBID49IHNwZWVkTGltaXRTcXVhcmVkQSAqIDIpIHsKICAgICAgICAgICAgYmoud2FrZVVwQWZ0ZXJOYXJyb3dwaGFzZSA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfSAvLyBOb3cgd2Uga25vdyB0aGF0IGkgYW5kIGogYXJlIGluIGNvbnRhY3QuIFNldCBjb2xsaXNpb24gbWF0cml4IHN0YXRlCgoKICAgICAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeC5zZXQoYmksIGJqLCB0cnVlKTsKCiAgICAgICAgaWYgKCF0aGlzLmNvbGxpc2lvbk1hdHJpeFByZXZpb3VzLmdldChiaSwgYmopKSB7CiAgICAgICAgICAvLyBGaXJzdCBjb250YWN0IQogICAgICAgICAgLy8gV2UgcmV1c2UgdGhlIGNvbGxpZGVFdmVudCBvYmplY3QsIG90aGVyd2lzZSB3ZSB3aWxsIGVuZCB1cCBjcmVhdGluZyBuZXcgb2JqZWN0cyBmb3IgZWFjaCBuZXcgY29udGFjdCwgZXZlbiBpZiB0aGVyZSdzIG5vIGV2ZW50IGxpc3RlbmVyIGF0dGFjaGVkLgogICAgICAgICAgV29ybGRfc3RlcF9jb2xsaWRlRXZlbnQuYm9keSA9IGJqOwogICAgICAgICAgV29ybGRfc3RlcF9jb2xsaWRlRXZlbnQuY29udGFjdCA9IGM7CiAgICAgICAgICBiaS5kaXNwYXRjaEV2ZW50KFdvcmxkX3N0ZXBfY29sbGlkZUV2ZW50KTsKICAgICAgICAgIFdvcmxkX3N0ZXBfY29sbGlkZUV2ZW50LmJvZHkgPSBiaTsKICAgICAgICAgIGJqLmRpc3BhdGNoRXZlbnQoV29ybGRfc3RlcF9jb2xsaWRlRXZlbnQpOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5ib2R5T3ZlcmxhcEtlZXBlci5zZXQoYmkuaWQsIGJqLmlkKTsKICAgICAgICB0aGlzLnNoYXBlT3ZlcmxhcEtlZXBlci5zZXQoc2kuaWQsIHNqLmlkKTsKICAgICAgfQoKICAgICAgdGhpcy5lbWl0Q29udGFjdEV2ZW50cygpOwoKICAgICAgaWYgKGRvUHJvZmlsaW5nKSB7CiAgICAgICAgcHJvZmlsZS5tYWtlQ29udGFjdENvbnN0cmFpbnRzID0gcGVyZm9ybWFuY2Uubm93KCkgLSBwcm9maWxpbmdTdGFydDsKICAgICAgICBwcm9maWxpbmdTdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpOwogICAgICB9IC8vIFdha2UgdXAgYm9kaWVzCgoKICAgICAgZm9yIChpID0gMDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgY29uc3QgYmkgPSBib2RpZXNbaV07CgogICAgICAgIGlmIChiaS53YWtlVXBBZnRlck5hcnJvd3BoYXNlKSB7CiAgICAgICAgICBiaS53YWtlVXAoKTsKICAgICAgICAgIGJpLndha2VVcEFmdGVyTmFycm93cGhhc2UgPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH0gLy8gQWRkIHVzZXItYWRkZWQgY29uc3RyYWludHMKCgogICAgICBOY29uc3RyYWludHMgPSBjb25zdHJhaW50cy5sZW5ndGg7CgogICAgICBmb3IgKGkgPSAwOyBpICE9PSBOY29uc3RyYWludHM7IGkrKykgewogICAgICAgIGNvbnN0IGMgPSBjb25zdHJhaW50c1tpXTsKICAgICAgICBjLnVwZGF0ZSgpOwoKICAgICAgICBmb3IgKGxldCBqID0gMCwgTmVxID0gYy5lcXVhdGlvbnMubGVuZ3RoOyBqICE9PSBOZXE7IGorKykgewogICAgICAgICAgY29uc3QgZXEgPSBjLmVxdWF0aW9uc1tqXTsKICAgICAgICAgIHNvbHZlci5hZGRFcXVhdGlvbihlcSk7CiAgICAgICAgfQogICAgICB9IC8vIFNvbHZlIHRoZSBjb25zdHJhaW5lZCBzeXN0ZW0KCgogICAgICBzb2x2ZXIuc29sdmUoZHQsIHRoaXMpOwoKICAgICAgaWYgKGRvUHJvZmlsaW5nKSB7CiAgICAgICAgcHJvZmlsZS5zb2x2ZSA9IHBlcmZvcm1hbmNlLm5vdygpIC0gcHJvZmlsaW5nU3RhcnQ7CiAgICAgIH0gLy8gUmVtb3ZlIGFsbCBjb250YWN0cyBmcm9tIHNvbHZlcgoKCiAgICAgIHNvbHZlci5yZW1vdmVBbGxFcXVhdGlvbnMoKTsgLy8gQXBwbHkgZGFtcGluZywgc2VlIGh0dHA6Ly9jb2RlLmdvb2dsZS5jb20vcC9idWxsZXQvaXNzdWVzL2RldGFpbD9pZD03NCBmb3IgZGV0YWlscwoKICAgICAgY29uc3QgcG93ID0gTWF0aC5wb3c7CgogICAgICBmb3IgKGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBjb25zdCBiaSA9IGJvZGllc1tpXTsKCiAgICAgICAgaWYgKGJpLnR5cGUgJiBEWU5BTUlDKSB7CiAgICAgICAgICAvLyBPbmx5IGZvciBkeW5hbWljIGJvZGllcwogICAgICAgICAgY29uc3QgbGQgPSBwb3coMS4wIC0gYmkubGluZWFyRGFtcGluZywgZHQpOwogICAgICAgICAgY29uc3QgdiA9IGJpLnZlbG9jaXR5OwogICAgICAgICAgdi5zY2FsZShsZCwgdik7CiAgICAgICAgICBjb25zdCBhdiA9IGJpLmFuZ3VsYXJWZWxvY2l0eTsKCiAgICAgICAgICBpZiAoYXYpIHsKICAgICAgICAgICAgY29uc3QgYWQgPSBwb3coMS4wIC0gYmkuYW5ndWxhckRhbXBpbmcsIGR0KTsKICAgICAgICAgICAgYXYuc2NhbGUoYWQsIGF2KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChXb3JsZF9zdGVwX3ByZVN0ZXBFdmVudCk7IC8vIExlYXAgZnJvZwogICAgICAvLyB2bmV3ID0gdiArIGgqZi9tCiAgICAgIC8vIHhuZXcgPSB4ICsgaCp2bmV3CgogICAgICBpZiAoZG9Qcm9maWxpbmcpIHsKICAgICAgICBwcm9maWxpbmdTdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpOwogICAgICB9CgogICAgICBjb25zdCBzdGVwbnVtYmVyID0gdGhpcy5zdGVwbnVtYmVyOwogICAgICBjb25zdCBxdWF0Tm9ybWFsaXplID0gc3RlcG51bWJlciAlICh0aGlzLnF1YXROb3JtYWxpemVTa2lwICsgMSkgPT09IDA7CiAgICAgIGNvbnN0IHF1YXROb3JtYWxpemVGYXN0ID0gdGhpcy5xdWF0Tm9ybWFsaXplRmFzdDsKCiAgICAgIGZvciAoaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICAgIGJvZGllc1tpXS5pbnRlZ3JhdGUoZHQsIHF1YXROb3JtYWxpemUsIHF1YXROb3JtYWxpemVGYXN0KTsKICAgICAgfQoKICAgICAgdGhpcy5jbGVhckZvcmNlcygpOwogICAgICB0aGlzLmJyb2FkcGhhc2UuZGlydHkgPSB0cnVlOwoKICAgICAgaWYgKGRvUHJvZmlsaW5nKSB7CiAgICAgICAgcHJvZmlsZS5pbnRlZ3JhdGUgPSBwZXJmb3JtYW5jZS5ub3coKSAtIHByb2ZpbGluZ1N0YXJ0OwogICAgICB9IC8vIFVwZGF0ZSBzdGVwIG51bWJlcgoKCiAgICAgIHRoaXMuc3RlcG51bWJlciArPSAxOwogICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoV29ybGRfc3RlcF9wb3N0U3RlcEV2ZW50KTsgLy8gU2xlZXBpbmcgdXBkYXRlCgogICAgICBsZXQgaGFzQWN0aXZlQm9kaWVzID0gdHJ1ZTsKCiAgICAgIGlmICh0aGlzLmFsbG93U2xlZXApIHsKICAgICAgICBoYXNBY3RpdmVCb2RpZXMgPSBmYWxzZTsKCiAgICAgICAgZm9yIChpID0gMDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgICBjb25zdCBiaSA9IGJvZGllc1tpXTsKICAgICAgICAgIGJpLnNsZWVwVGljayh0aGlzLnRpbWUpOwoKICAgICAgICAgIGlmIChiaS5zbGVlcFN0YXRlICE9PSBCb2R5LlNMRUVQSU5HKSB7CiAgICAgICAgICAgIGhhc0FjdGl2ZUJvZGllcyA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLmhhc0FjdGl2ZUJvZGllcyA9IGhhc0FjdGl2ZUJvZGllczsKICAgIH0KCiAgICBlbWl0Q29udGFjdEV2ZW50cygpIHsKICAgICAgY29uc3QgaGFzQmVnaW5Db250YWN0ID0gdGhpcy5oYXNBbnlFdmVudExpc3RlbmVyKCdiZWdpbkNvbnRhY3QnKTsKICAgICAgY29uc3QgaGFzRW5kQ29udGFjdCA9IHRoaXMuaGFzQW55RXZlbnRMaXN0ZW5lcignZW5kQ29udGFjdCcpOwoKICAgICAgaWYgKGhhc0JlZ2luQ29udGFjdCB8fCBoYXNFbmRDb250YWN0KSB7CiAgICAgICAgdGhpcy5ib2R5T3ZlcmxhcEtlZXBlci5nZXREaWZmKGFkZGl0aW9ucywgcmVtb3ZhbHMpOwogICAgICB9CgogICAgICBpZiAoaGFzQmVnaW5Db250YWN0KSB7CiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGwgPSBhZGRpdGlvbnMubGVuZ3RoOyBpIDwgbDsgaSArPSAyKSB7CiAgICAgICAgICBiZWdpbkNvbnRhY3RFdmVudC5ib2R5QSA9IHRoaXMuZ2V0Qm9keUJ5SWQoYWRkaXRpb25zW2ldKTsKICAgICAgICAgIGJlZ2luQ29udGFjdEV2ZW50LmJvZHlCID0gdGhpcy5nZXRCb2R5QnlJZChhZGRpdGlvbnNbaSArIDFdKTsKICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChiZWdpbkNvbnRhY3RFdmVudCk7CiAgICAgICAgfQoKICAgICAgICBiZWdpbkNvbnRhY3RFdmVudC5ib2R5QSA9IGJlZ2luQ29udGFjdEV2ZW50LmJvZHlCID0gbnVsbDsKICAgICAgfQoKICAgICAgaWYgKGhhc0VuZENvbnRhY3QpIHsKICAgICAgICBmb3IgKGxldCBpID0gMCwgbCA9IHJlbW92YWxzLmxlbmd0aDsgaSA8IGw7IGkgKz0gMikgewogICAgICAgICAgZW5kQ29udGFjdEV2ZW50LmJvZHlBID0gdGhpcy5nZXRCb2R5QnlJZChyZW1vdmFsc1tpXSk7CiAgICAgICAgICBlbmRDb250YWN0RXZlbnQuYm9keUIgPSB0aGlzLmdldEJvZHlCeUlkKHJlbW92YWxzW2kgKyAxXSk7CiAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZW5kQ29udGFjdEV2ZW50KTsKICAgICAgICB9CgogICAgICAgIGVuZENvbnRhY3RFdmVudC5ib2R5QSA9IGVuZENvbnRhY3RFdmVudC5ib2R5QiA9IG51bGw7CiAgICAgIH0KCiAgICAgIGFkZGl0aW9ucy5sZW5ndGggPSByZW1vdmFscy5sZW5ndGggPSAwOwogICAgICBjb25zdCBoYXNCZWdpblNoYXBlQ29udGFjdCA9IHRoaXMuaGFzQW55RXZlbnRMaXN0ZW5lcignYmVnaW5TaGFwZUNvbnRhY3QnKTsKICAgICAgY29uc3QgaGFzRW5kU2hhcGVDb250YWN0ID0gdGhpcy5oYXNBbnlFdmVudExpc3RlbmVyKCdlbmRTaGFwZUNvbnRhY3QnKTsKCiAgICAgIGlmIChoYXNCZWdpblNoYXBlQ29udGFjdCB8fCBoYXNFbmRTaGFwZUNvbnRhY3QpIHsKICAgICAgICB0aGlzLnNoYXBlT3ZlcmxhcEtlZXBlci5nZXREaWZmKGFkZGl0aW9ucywgcmVtb3ZhbHMpOwogICAgICB9CgogICAgICBpZiAoaGFzQmVnaW5TaGFwZUNvbnRhY3QpIHsKICAgICAgICBmb3IgKGxldCBpID0gMCwgbCA9IGFkZGl0aW9ucy5sZW5ndGg7IGkgPCBsOyBpICs9IDIpIHsKICAgICAgICAgIGNvbnN0IHNoYXBlQSA9IHRoaXMuZ2V0U2hhcGVCeUlkKGFkZGl0aW9uc1tpXSk7CiAgICAgICAgICBjb25zdCBzaGFwZUIgPSB0aGlzLmdldFNoYXBlQnlJZChhZGRpdGlvbnNbaSArIDFdKTsKICAgICAgICAgIGJlZ2luU2hhcGVDb250YWN0RXZlbnQuc2hhcGVBID0gc2hhcGVBOwogICAgICAgICAgYmVnaW5TaGFwZUNvbnRhY3RFdmVudC5zaGFwZUIgPSBzaGFwZUI7CiAgICAgICAgICBpZiAoc2hhcGVBKSBiZWdpblNoYXBlQ29udGFjdEV2ZW50LmJvZHlBID0gc2hhcGVBLmJvZHk7CiAgICAgICAgICBpZiAoc2hhcGVCKSBiZWdpblNoYXBlQ29udGFjdEV2ZW50LmJvZHlCID0gc2hhcGVCLmJvZHk7CiAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoYmVnaW5TaGFwZUNvbnRhY3RFdmVudCk7CiAgICAgICAgfQoKICAgICAgICBiZWdpblNoYXBlQ29udGFjdEV2ZW50LmJvZHlBID0gYmVnaW5TaGFwZUNvbnRhY3RFdmVudC5ib2R5QiA9IGJlZ2luU2hhcGVDb250YWN0RXZlbnQuc2hhcGVBID0gYmVnaW5TaGFwZUNvbnRhY3RFdmVudC5zaGFwZUIgPSBudWxsOwogICAgICB9CgogICAgICBpZiAoaGFzRW5kU2hhcGVDb250YWN0KSB7CiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGwgPSByZW1vdmFscy5sZW5ndGg7IGkgPCBsOyBpICs9IDIpIHsKICAgICAgICAgIGNvbnN0IHNoYXBlQSA9IHRoaXMuZ2V0U2hhcGVCeUlkKHJlbW92YWxzW2ldKTsKICAgICAgICAgIGNvbnN0IHNoYXBlQiA9IHRoaXMuZ2V0U2hhcGVCeUlkKHJlbW92YWxzW2kgKyAxXSk7CiAgICAgICAgICBlbmRTaGFwZUNvbnRhY3RFdmVudC5zaGFwZUEgPSBzaGFwZUE7CiAgICAgICAgICBlbmRTaGFwZUNvbnRhY3RFdmVudC5zaGFwZUIgPSBzaGFwZUI7CiAgICAgICAgICBpZiAoc2hhcGVBKSBlbmRTaGFwZUNvbnRhY3RFdmVudC5ib2R5QSA9IHNoYXBlQS5ib2R5OwogICAgICAgICAgaWYgKHNoYXBlQikgZW5kU2hhcGVDb250YWN0RXZlbnQuYm9keUIgPSBzaGFwZUIuYm9keTsKICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChlbmRTaGFwZUNvbnRhY3RFdmVudCk7CiAgICAgICAgfQoKICAgICAgICBlbmRTaGFwZUNvbnRhY3RFdmVudC5ib2R5QSA9IGVuZFNoYXBlQ29udGFjdEV2ZW50LmJvZHlCID0gZW5kU2hhcGVDb250YWN0RXZlbnQuc2hhcGVBID0gZW5kU2hhcGVDb250YWN0RXZlbnQuc2hhcGVCID0gbnVsbDsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBTZXRzIGFsbCBib2R5IGZvcmNlcyBpbiB0aGUgd29ybGQgdG8gemVyby4KICAgICAqLwoKCiAgICBjbGVhckZvcmNlcygpIHsKICAgICAgY29uc3QgYm9kaWVzID0gdGhpcy5ib2RpZXM7CiAgICAgIGNvbnN0IE4gPSBib2RpZXMubGVuZ3RoOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICAgIGNvbnN0IGIgPSBib2RpZXNbaV07CiAgICAgICAgYi5mb3JjZTsKICAgICAgICBiLnRvcnF1ZTsKICAgICAgICBiLmZvcmNlLnNldCgwLCAwLCAwKTsKICAgICAgICBiLnRvcnF1ZS5zZXQoMCwgMCwgMCk7CiAgICAgIH0KICAgIH0KCiAgfSAvLyBUZW1wIHN0dWZmCgogIG5ldyBBQUJCKCk7CiAgY29uc3QgdG1wUmF5ID0gbmV3IFJheSgpOyAvLyBwZXJmb3JtYW5jZS5ub3coKSBmYWxsYmFjayBvbiBEYXRlLm5vdygpCgogIGNvbnN0IHBlcmZvcm1hbmNlID0gZ2xvYmFsVGhpcy5wZXJmb3JtYW5jZSB8fCB7fTsKCiAgaWYgKCFwZXJmb3JtYW5jZS5ub3cpIHsKICAgIGxldCBub3dPZmZzZXQgPSBEYXRlLm5vdygpOwoKICAgIGlmIChwZXJmb3JtYW5jZS50aW1pbmcgJiYgcGVyZm9ybWFuY2UudGltaW5nLm5hdmlnYXRpb25TdGFydCkgewogICAgICBub3dPZmZzZXQgPSBwZXJmb3JtYW5jZS50aW1pbmcubmF2aWdhdGlvblN0YXJ0OwogICAgfQoKICAgIHBlcmZvcm1hbmNlLm5vdyA9ICgpID0+IERhdGUubm93KCkgLSBub3dPZmZzZXQ7CiAgfQoKICBuZXcgVmVjMygpOyAvLyBEaXNwYXRjaGVkIGFmdGVyIHRoZSB3b3JsZCBoYXMgc3RlcHBlZCBmb3J3YXJkIGluIHRpbWUuCiAgLy8gUmV1c2FibGUgZXZlbnQgb2JqZWN0cyB0byBzYXZlIG1lbW9yeS4KCiAgY29uc3QgV29ybGRfc3RlcF9wb3N0U3RlcEV2ZW50ID0gewogICAgdHlwZTogJ3Bvc3RTdGVwJwogIH07IC8vIERpc3BhdGNoZWQgYmVmb3JlIHRoZSB3b3JsZCBzdGVwcyBmb3J3YXJkIGluIHRpbWUuCgogIGNvbnN0IFdvcmxkX3N0ZXBfcHJlU3RlcEV2ZW50ID0gewogICAgdHlwZTogJ3ByZVN0ZXAnCiAgfTsKICBjb25zdCBXb3JsZF9zdGVwX2NvbGxpZGVFdmVudCA9IHsKICAgIHR5cGU6IEJvZHkuQ09MTElERV9FVkVOVF9OQU1FLAogICAgYm9keTogbnVsbCwKICAgIGNvbnRhY3Q6IG51bGwKICB9OyAvLyBQb29scyBmb3IgdW51c2VkIG9iamVjdHMKCiAgY29uc3QgV29ybGRfc3RlcF9vbGRDb250YWN0cyA9IFtdOwogIGNvbnN0IFdvcmxkX3N0ZXBfZnJpY3Rpb25FcXVhdGlvblBvb2wgPSBbXTsgLy8gUmV1c2FibGUgYXJyYXlzIGZvciBjb2xsaXNpb24gcGFpcnMKCiAgY29uc3QgV29ybGRfc3RlcF9wMSA9IFtdOwogIGNvbnN0IFdvcmxkX3N0ZXBfcDIgPSBbXTsgLy8gU3R1ZmYgZm9yIGVtaXRDb250YWN0RXZlbnRzCgogIGNvbnN0IGFkZGl0aW9ucyA9IFtdOwogIGNvbnN0IHJlbW92YWxzID0gW107CiAgY29uc3QgYmVnaW5Db250YWN0RXZlbnQgPSB7CiAgICB0eXBlOiAnYmVnaW5Db250YWN0JywKICAgIGJvZHlBOiBudWxsLAogICAgYm9keUI6IG51bGwKICB9OwogIGNvbnN0IGVuZENvbnRhY3RFdmVudCA9IHsKICAgIHR5cGU6ICdlbmRDb250YWN0JywKICAgIGJvZHlBOiBudWxsLAogICAgYm9keUI6IG51bGwKICB9OwogIGNvbnN0IGJlZ2luU2hhcGVDb250YWN0RXZlbnQgPSB7CiAgICB0eXBlOiAnYmVnaW5TaGFwZUNvbnRhY3QnLAogICAgYm9keUE6IG51bGwsCiAgICBib2R5QjogbnVsbCwKICAgIHNoYXBlQTogbnVsbCwKICAgIHNoYXBlQjogbnVsbAogIH07CiAgY29uc3QgZW5kU2hhcGVDb250YWN0RXZlbnQgPSB7CiAgICB0eXBlOiAnZW5kU2hhcGVDb250YWN0JywKICAgIGJvZHlBOiBudWxsLAogICAgYm9keUI6IG51bGwsCiAgICBzaGFwZUE6IG51bGwsCiAgICBzaGFwZUI6IG51bGwKICB9OwoKICBjb25zdCBhZGRDb250YWN0TWF0ZXJpYWwgPSAod29ybGQsIGNyZWF0ZU1hdGVyaWFsLCBfcmVmLCB1dWlkKSA9PiB7CiAgICBsZXQgW21hdGVyaWFsQSwgbWF0ZXJpYWxCLCBvcHRpb25zXSA9IF9yZWY7CiAgICBjb25zdCBtYXRBID0gY3JlYXRlTWF0ZXJpYWwobWF0ZXJpYWxBKTsKICAgIGNvbnN0IG1hdEIgPSBjcmVhdGVNYXRlcmlhbChtYXRlcmlhbEIpOwogICAgY29uc3QgY29udGFjdE1hdGVyaWFsID0gbmV3IENvbnRhY3RNYXRlcmlhbChtYXRBLCBtYXRCLCBvcHRpb25zKTsKICAgIGNvbnRhY3RNYXRlcmlhbC51dWlkID0gdXVpZDsKICAgIHdvcmxkLmFkZENvbnRhY3RNYXRlcmlhbChjb250YWN0TWF0ZXJpYWwpOwogIH07CiAgY29uc3QgcmVtb3ZlQ29udGFjdE1hdGVyaWFsID0gKHdvcmxkLCBjbVVVSUQpID0+IHsKICAgIGNvbnN0IGluZGV4ID0gd29ybGQuY29udGFjdG1hdGVyaWFscy5maW5kSW5kZXgoX3JlZjIgPT4gewogICAgICBsZXQgewogICAgICAgIHV1aWQKICAgICAgfSA9IF9yZWYyOwogICAgICByZXR1cm4gdXVpZCA9PT0gY21VVUlEOwogICAgfSk7CiAgICBjb25zdCBbewogICAgICBpZDogaQogICAgfSwgewogICAgICBpZDogagogICAgfV0gPSB3b3JsZC5jb250YWN0bWF0ZXJpYWxzW2luZGV4XS5tYXRlcmlhbHM7CiAgICB3b3JsZC5jb250YWN0bWF0ZXJpYWxzLnNwbGljZShpbmRleCwgMSk7CiAgICBkZWxldGUgd29ybGQuY29udGFjdE1hdGVyaWFsVGFibGUuZGF0YVtpIDwgaiA/IGAke2l9LSR7an1gIDogYCR7an0tJHtpfWBdOwogIH07CgogIGxldCBtYXRlcmlhbElkID0gMDsKICBjb25zdCBjcmVhdGVNYXRlcmlhbEZhY3RvcnkgPSBtYXRlcmlhbHMgPT4gZnVuY3Rpb24gKG5hbWVPck9wdGlvbnMpIHsKICAgIGlmIChuYW1lT3JPcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgbmFtZU9yT3B0aW9ucyA9IHt9OwogICAgfQogICAgY29uc3QgbWF0ZXJpYWxPcHRpb25zID0gdHlwZW9mIG5hbWVPck9wdGlvbnMgPT09ICdzdHJpbmcnID8gewogICAgICBuYW1lOiBuYW1lT3JPcHRpb25zCiAgICB9IDogewogICAgICBuYW1lOiBTeW1ib2wuZm9yKGBNYXRlcmlhbCR7bWF0ZXJpYWxJZCsrfWApLAogICAgICAuLi5uYW1lT3JPcHRpb25zCiAgICB9OwogICAgY29uc3QgewogICAgICBuYW1lCiAgICB9ID0gbWF0ZXJpYWxPcHRpb25zOwogICAgbWF0ZXJpYWxzW25hbWVdID0gbWF0ZXJpYWxzW25hbWVdIHx8IG5ldyBNYXRlcmlhbChtYXRlcmlhbE9wdGlvbnMpOwogICAgcmV0dXJuIG1hdGVyaWFsc1tuYW1lXTsKICB9OwoKICAvKioKICAgKiBAdHlwZWRlZiB7IGltcG9ydCgnY2Fubm9uLWVzJykuTWF0ZXJpYWxPcHRpb25zIH0gTWF0ZXJpYWxPcHRpb25zCiAgICovCgogIGNvbnN0IG1ha2VWZWMzID0gX3JlZiA9PiB7CiAgICBsZXQgW3gsIHksIHpdID0gX3JlZjsKICAgIHJldHVybiBuZXcgVmVjMyh4LCB5LCB6KTsKICB9OwogIGNvbnN0IHByZXBhcmVTcGhlcmUgPSBhcmdzID0+IEFycmF5LmlzQXJyYXkoYXJncykgPyBhcmdzIDogW2FyZ3NdOwogIGNvbnN0IHByZXBhcmVDb252ZXhQb2x5aGVkcm9uID0gX3JlZjIgPT4gewogICAgbGV0IFt2LCBmYWNlcywgbiwgYSwgYm91bmRpbmdTcGhlcmVSYWRpdXNdID0gX3JlZjI7CiAgICByZXR1cm4gW3sKICAgICAgYXhlczogYSA/IGEubWFwKG1ha2VWZWMzKSA6IHVuZGVmaW5lZCwKICAgICAgYm91bmRpbmdTcGhlcmVSYWRpdXMsCiAgICAgIGZhY2VzLAogICAgICBub3JtYWxzOiBuID8gbi5tYXAobWFrZVZlYzMpIDogdW5kZWZpbmVkLAogICAgICB2ZXJ0aWNlczogdiA/IHYubWFwKG1ha2VWZWMzKSA6IHVuZGVmaW5lZAogICAgfV07CiAgfTsKICBmdW5jdGlvbiBjcmVhdGVTaGFwZSh0eXBlLCBhcmdzKSB7CiAgICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgY2FzZSAnQm94JzoKICAgICAgICByZXR1cm4gbmV3IEJveChuZXcgVmVjMyguLi5hcmdzLm1hcCh2ID0+IHYgLyAyKSkpOwogICAgICAvLyBleHRlbnRzID0+IGhhbGZFeHRlbnRzCiAgICAgIGNhc2UgJ0NvbnZleFBvbHloZWRyb24nOgogICAgICAgIHJldHVybiBuZXcgQ29udmV4UG9seWhlZHJvbiguLi5wcmVwYXJlQ29udmV4UG9seWhlZHJvbihhcmdzKSk7CiAgICAgIGNhc2UgJ0N5bGluZGVyJzoKICAgICAgICByZXR1cm4gbmV3IEN5bGluZGVyKC4uLmFyZ3MpOwogICAgICAvLyBbIHJhZGl1c1RvcCwgcmFkaXVzQm90dG9tLCBoZWlnaHQsIG51bVNlZ21lbnRzIF0gPSBhcmdzCiAgICAgIGNhc2UgJ0hlaWdodGZpZWxkJzoKICAgICAgICByZXR1cm4gbmV3IEhlaWdodGZpZWxkKC4uLmFyZ3MpOwogICAgICAvLyBbIEFycmF5IGRhdGEsIG9wdGlvbnM6IHttaW5WYWx1ZSwgbWF4VmFsdWUsIGVsZW1lbnRTaXplfSAgXSA9IGFyZ3MKICAgICAgY2FzZSAnUGFydGljbGUnOgogICAgICAgIHJldHVybiBuZXcgUGFydGljbGUoKTsKICAgICAgLy8gbm8gYXJncwogICAgICBjYXNlICdQbGFuZSc6CiAgICAgICAgcmV0dXJuIG5ldyBQbGFuZSgpOwogICAgICAvLyBubyBhcmdzLCBpbmZpbml0ZSB4IGFuZCB5CiAgICAgIGNhc2UgJ1NwaGVyZSc6CiAgICAgICAgcmV0dXJuIG5ldyBTcGhlcmUoLi4ucHJlcGFyZVNwaGVyZShhcmdzKSk7CiAgICAgIC8vIHJhZGl1cyA9IGFyZ3MKICAgICAgY2FzZSAnVHJpbWVzaCc6CiAgICAgICAgcmV0dXJuIG5ldyBUcmltZXNoKC4uLmFyZ3MpOwogICAgICAvLyBbdmVydGljZXMsIGluZGljZXNdID0gYXJncwogICAgfQogIH0KCiAgLyoqCiAgICogQGZ1bmN0aW9uCiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMKICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy51dWlkCiAgICogQHBhcmFtIHtCb2R5UHJvcHN9IG9wdGlvbnMucHJvcHMKICAgKiBAcGFyYW0ge0JvZHlTaGFwZVR5cGV9IG9wdGlvbnMudHlwZQogICAqIEBwYXJhbSB7KG1hdGVyaWFsT3B0aW9uczogTWF0ZXJpYWxPcHRpb25zKSA9PiBNYXRlcmlhbCA9fSBvcHRpb25zLmNyZWF0ZU1hdGVyaWFsCiAgICogQHJldHVybnMge0JvZHl9CiAgICovCiAgY29uc3QgcHJvcHNUb0JvZHkgPSBvcHRpb25zID0+IHsKICAgIGNvbnN0IHsKICAgICAgdXVpZCwKICAgICAgcHJvcHMsCiAgICAgIHR5cGUsCiAgICAgIGNyZWF0ZU1hdGVyaWFsID0gbWF0ZXJpYWxPcHRpb25zID0+IG5ldyBNYXRlcmlhbChtYXRlcmlhbE9wdGlvbnMpCiAgICB9ID0gb3B0aW9uczsKICAgIGNvbnN0IHsKICAgICAgYW5ndWxhckZhY3RvciA9IFsxLCAxLCAxXSwKICAgICAgYW5ndWxhclZlbG9jaXR5ID0gWzAsIDAsIDBdLAogICAgICBhcmdzID0gW10sCiAgICAgIGNvbGxpc2lvblJlc3BvbnNlLAogICAgICBsaW5lYXJGYWN0b3IgPSBbMSwgMSwgMV0sCiAgICAgIG1hc3MsCiAgICAgIG1hdGVyaWFsLAogICAgICBvbkNvbGxpZGUsCiAgICAgIHBvc2l0aW9uID0gWzAsIDAsIDBdLAogICAgICByb3RhdGlvbiA9IFswLCAwLCAwXSwKICAgICAgc2hhcGVzLAogICAgICB0eXBlOiBib2R5VHlwZSwKICAgICAgdmVsb2NpdHkgPSBbMCwgMCwgMF0sCiAgICAgIC4uLmV4dHJhCiAgICB9ID0gcHJvcHM7CiAgICBjb25zdCBib2R5ID0gbmV3IEJvZHkoewogICAgICAuLi5leHRyYSwKICAgICAgbWFzczogYm9keVR5cGUgPT09ICdTdGF0aWMnID8gMCA6IG1hc3MsCiAgICAgIG1hdGVyaWFsOiBtYXRlcmlhbCA/IGNyZWF0ZU1hdGVyaWFsKG1hdGVyaWFsKSA6IHVuZGVmaW5lZCwKICAgICAgdHlwZTogYm9keVR5cGUgPyBCb2R5W2JvZHlUeXBlLnRvVXBwZXJDYXNlKCldIDogdW5kZWZpbmVkCiAgICB9KTsKICAgIGJvZHkudXVpZCA9IHV1aWQ7CiAgICBpZiAoY29sbGlzaW9uUmVzcG9uc2UgIT09IHVuZGVmaW5lZCkgewogICAgICBib2R5LmNvbGxpc2lvblJlc3BvbnNlID0gY29sbGlzaW9uUmVzcG9uc2U7CiAgICB9CiAgICBpZiAodHlwZSA9PT0gJ0NvbXBvdW5kJykgewogICAgICBzaGFwZXMuZm9yRWFjaChfcmVmMyA9PiB7CiAgICAgICAgbGV0IHsKICAgICAgICAgIHR5cGUsCiAgICAgICAgICBhcmdzLAogICAgICAgICAgcG9zaXRpb24sCiAgICAgICAgICByb3RhdGlvbiwKICAgICAgICAgIG1hdGVyaWFsLAogICAgICAgICAgLi4uZXh0cmEKICAgICAgICB9ID0gX3JlZjM7CiAgICAgICAgY29uc3Qgc2hhcGVCb2R5ID0gYm9keS5hZGRTaGFwZShjcmVhdGVTaGFwZSh0eXBlLCBhcmdzKSwgcG9zaXRpb24gPyBuZXcgVmVjMyguLi5wb3NpdGlvbikgOiB1bmRlZmluZWQsIHJvdGF0aW9uID8gbmV3IFF1YXRlcm5pb24oKS5zZXRGcm9tRXVsZXIoLi4ucm90YXRpb24pIDogdW5kZWZpbmVkKTsKICAgICAgICBpZiAobWF0ZXJpYWwpIHNoYXBlQm9keS5tYXRlcmlhbCA9IGNyZWF0ZU1hdGVyaWFsKG1hdGVyaWFsKTsKICAgICAgICBPYmplY3QuYXNzaWduKHNoYXBlQm9keSwgZXh0cmEpOwogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIGJvZHkuYWRkU2hhcGUoY3JlYXRlU2hhcGUodHlwZSwgYXJncykpOwogICAgfQogICAgYm9keS5wb3NpdGlvbi5zZXQocG9zaXRpb25bMF0sIHBvc2l0aW9uWzFdLCBwb3NpdGlvblsyXSk7CiAgICBib2R5LnF1YXRlcm5pb24uc2V0RnJvbUV1bGVyKHJvdGF0aW9uWzBdLCByb3RhdGlvblsxXSwgcm90YXRpb25bMl0pOwogICAgYm9keS52ZWxvY2l0eS5zZXQodmVsb2NpdHlbMF0sIHZlbG9jaXR5WzFdLCB2ZWxvY2l0eVsyXSk7CiAgICBib2R5LmFuZ3VsYXJWZWxvY2l0eS5zZXQoYW5ndWxhclZlbG9jaXR5WzBdLCBhbmd1bGFyVmVsb2NpdHlbMV0sIGFuZ3VsYXJWZWxvY2l0eVsyXSk7CiAgICBib2R5LmxpbmVhckZhY3Rvci5zZXQobGluZWFyRmFjdG9yWzBdLCBsaW5lYXJGYWN0b3JbMV0sIGxpbmVhckZhY3RvclsyXSk7CiAgICBib2R5LmFuZ3VsYXJGYWN0b3Iuc2V0KGFuZ3VsYXJGYWN0b3JbMF0sIGFuZ3VsYXJGYWN0b3JbMV0sIGFuZ3VsYXJGYWN0b3JbMl0pOwogICAgcmV0dXJuIGJvZHk7CiAgfTsKCiAgY29uc3QgYWRkQm9kaWVzID0gKHN0YXRlLCBjcmVhdGVNYXRlcmlhbCwgX3JlZikgPT4gewogICAgbGV0IHsKICAgICAgcHJvcHMsCiAgICAgIHR5cGUsCiAgICAgIHV1aWQKICAgIH0gPSBfcmVmOwogICAgZm9yIChsZXQgaSA9IDA7IGkgPCB1dWlkLmxlbmd0aDsgaSsrKSB7CiAgICAgIGNvbnN0IGJvZHkgPSBwcm9wc1RvQm9keSh7CiAgICAgICAgY3JlYXRlTWF0ZXJpYWwsCiAgICAgICAgcHJvcHM6IHByb3BzW2ldLAogICAgICAgIHR5cGUsCiAgICAgICAgdXVpZDogdXVpZFtpXQogICAgICB9KTsKICAgICAgc3RhdGUud29ybGQuYWRkQm9keShib2R5KTsKICAgICAgaWYgKHByb3BzW2ldLm9uQ29sbGlkZSkgYm9keS5hZGRFdmVudExpc3RlbmVyKCdjb2xsaWRlJywgX3JlZjIgPT4gewogICAgICAgIGxldCB7CiAgICAgICAgICB0eXBlLAogICAgICAgICAgYm9keSwKICAgICAgICAgIHRhcmdldCwKICAgICAgICAgIGNvbnRhY3QKICAgICAgICB9ID0gX3JlZjI7CiAgICAgICAgaWYgKCFib2R5LnV1aWQgfHwgIXRhcmdldC51dWlkKSByZXR1cm47CiAgICAgICAgY29uc3QgewogICAgICAgICAgbmksCiAgICAgICAgICByaSwKICAgICAgICAgIHJqLAogICAgICAgICAgYmksCiAgICAgICAgICBiaiwKICAgICAgICAgIGlkCiAgICAgICAgfSA9IGNvbnRhY3Q7CiAgICAgICAgY29uc3QgY29udGFjdFBvaW50ID0gYmkucG9zaXRpb24udmFkZChyaSk7CiAgICAgICAgY29uc3QgY29udGFjdE5vcm1hbCA9IGJpID09PSBib2R5ID8gbmkgOiBuaS5zY2FsZSgtMSk7CiAgICAgICAgc2VsZi5wb3N0TWVzc2FnZSh7CiAgICAgICAgICBib2R5OiBib2R5LnV1aWQsCiAgICAgICAgICBjb2xsaXNpb25GaWx0ZXJzOiB7CiAgICAgICAgICAgIGJvZHlGaWx0ZXJHcm91cDogYm9keS5jb2xsaXNpb25GaWx0ZXJHcm91cCwKICAgICAgICAgICAgYm9keUZpbHRlck1hc2s6IGJvZHkuY29sbGlzaW9uRmlsdGVyTWFzaywKICAgICAgICAgICAgdGFyZ2V0RmlsdGVyR3JvdXA6IHRhcmdldC5jb2xsaXNpb25GaWx0ZXJHcm91cCwKICAgICAgICAgICAgdGFyZ2V0RmlsdGVyTWFzazogdGFyZ2V0LmNvbGxpc2lvbkZpbHRlck1hc2sKICAgICAgICAgIH0sCiAgICAgICAgICBjb250YWN0OiB7CiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVE9ETzogdXNlIGlkIGluc3RlYWQgb2YgdXVpZAogICAgICAgICAgICBiaTogYmkudXVpZCwKICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUT0RPOiB1c2UgaWQgaW5zdGVhZCBvZiB1dWlkCiAgICAgICAgICAgIGJqOiBiai51dWlkLAogICAgICAgICAgICAvLyBOb3JtYWwgb2YgdGhlIGNvbnRhY3QsIHJlbGF0aXZlIHRvIHRoZSBjb2xsaWRpbmcgYm9keQogICAgICAgICAgICBjb250YWN0Tm9ybWFsOiBjb250YWN0Tm9ybWFsLnRvQXJyYXkoKSwKICAgICAgICAgICAgLy8gV29ybGQgcG9zaXRpb24gb2YgdGhlIGNvbnRhY3QKICAgICAgICAgICAgY29udGFjdFBvaW50OiBjb250YWN0UG9pbnQudG9BcnJheSgpLAogICAgICAgICAgICBpZCwKICAgICAgICAgICAgaW1wYWN0VmVsb2NpdHk6IGNvbnRhY3QuZ2V0SW1wYWN0VmVsb2NpdHlBbG9uZ05vcm1hbCgpLAogICAgICAgICAgICBuaTogbmkudG9BcnJheSgpLAogICAgICAgICAgICByaTogcmkudG9BcnJheSgpLAogICAgICAgICAgICByajogcmoudG9BcnJheSgpCiAgICAgICAgICB9LAogICAgICAgICAgb3A6ICdldmVudCcsCiAgICAgICAgICB0YXJnZXQ6IHRhcmdldC51dWlkLAogICAgICAgICAgdHlwZQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9OwoKICBjb25zdCB0cmlwbGV0VG9WZWMzID0gdCA9PiB0ID8gbmV3IFZlYzMoLi4udCkgOiB1bmRlZmluZWQ7CgogIGNvbnN0IGFkZENvbnN0cmFpbnQgPSAoc3RhdGUsIF9yZWYpID0+IHsKICAgIGxldCB7CiAgICAgIHByb3BzOiBbYm9keUEsIGJvZHlCLCB7CiAgICAgICAgYW5nbGUsCiAgICAgICAgYXhpc0EsCiAgICAgICAgYXhpc0IsCiAgICAgICAgY29sbGlkZUNvbm5lY3RlZCwKICAgICAgICBkaXN0YW5jZSwKICAgICAgICBtYXhGb3JjZSwKICAgICAgICBtYXhNdWx0aXBsaWVyLAogICAgICAgIHBpdm90QSwKICAgICAgICBwaXZvdEIsCiAgICAgICAgdHdpc3RBbmdsZSwKICAgICAgICB3YWtlVXBCb2RpZXMKICAgICAgfV0sCiAgICAgIHR5cGUsCiAgICAgIHV1aWQKICAgIH0gPSBfcmVmOwogICAgbGV0IGNvbnN0cmFpbnQ7CiAgICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgY2FzZSAnUG9pbnRUb1BvaW50JzoKICAgICAgICBjb25zdHJhaW50ID0gbmV3IFBvaW50VG9Qb2ludENvbnN0cmFpbnQoc3RhdGUuYm9kaWVzW2JvZHlBXSwgdHJpcGxldFRvVmVjMyhwaXZvdEEpLCBzdGF0ZS5ib2RpZXNbYm9keUJdLCB0cmlwbGV0VG9WZWMzKHBpdm90QiksIG1heEZvcmNlKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnQ29uZVR3aXN0JzoKICAgICAgICBjb25zdHJhaW50ID0gbmV3IENvbmVUd2lzdENvbnN0cmFpbnQoc3RhdGUuYm9kaWVzW2JvZHlBXSwgc3RhdGUuYm9kaWVzW2JvZHlCXSwgewogICAgICAgICAgYW5nbGUsCiAgICAgICAgICBheGlzQTogdHJpcGxldFRvVmVjMyhheGlzQSksCiAgICAgICAgICBheGlzQjogdHJpcGxldFRvVmVjMyhheGlzQiksCiAgICAgICAgICBjb2xsaWRlQ29ubmVjdGVkLAogICAgICAgICAgbWF4Rm9yY2UsCiAgICAgICAgICBwaXZvdEE6IHRyaXBsZXRUb1ZlYzMocGl2b3RBKSwKICAgICAgICAgIHBpdm90QjogdHJpcGxldFRvVmVjMyhwaXZvdEIpLAogICAgICAgICAgdHdpc3RBbmdsZQogICAgICAgIH0pOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdIaW5nZSc6CiAgICAgICAgY29uc3RyYWludCA9IG5ldyBIaW5nZUNvbnN0cmFpbnQoc3RhdGUuYm9kaWVzW2JvZHlBXSwgc3RhdGUuYm9kaWVzW2JvZHlCXSwgewogICAgICAgICAgYXhpc0E6IHRyaXBsZXRUb1ZlYzMoYXhpc0EpLAogICAgICAgICAgYXhpc0I6IHRyaXBsZXRUb1ZlYzMoYXhpc0IpLAogICAgICAgICAgY29sbGlkZUNvbm5lY3RlZCwKICAgICAgICAgIG1heEZvcmNlLAogICAgICAgICAgcGl2b3RBOiB0cmlwbGV0VG9WZWMzKHBpdm90QSksCiAgICAgICAgICBwaXZvdEI6IHRyaXBsZXRUb1ZlYzMocGl2b3RCKQogICAgICAgIH0pOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdEaXN0YW5jZSc6CiAgICAgICAgY29uc3RyYWludCA9IG5ldyBEaXN0YW5jZUNvbnN0cmFpbnQoc3RhdGUuYm9kaWVzW2JvZHlBXSwgc3RhdGUuYm9kaWVzW2JvZHlCXSwgZGlzdGFuY2UsIG1heEZvcmNlKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnTG9jayc6CiAgICAgICAgY29uc3RyYWludCA9IG5ldyBMb2NrQ29uc3RyYWludChzdGF0ZS5ib2RpZXNbYm9keUFdLCBzdGF0ZS5ib2RpZXNbYm9keUJdLCB7CiAgICAgICAgICBtYXhGb3JjZQogICAgICAgIH0pOwogICAgICAgIGJyZWFrOwogICAgICBkZWZhdWx0OgogICAgICAgIGNvbnN0cmFpbnQgPSBuZXcgQ29uc3RyYWludChzdGF0ZS5ib2RpZXNbYm9keUFdLCBzdGF0ZS5ib2RpZXNbYm9keUJdLCB7CiAgICAgICAgICBjb2xsaWRlQ29ubmVjdGVkLAogICAgICAgICAgd2FrZVVwQm9kaWVzCiAgICAgICAgfSk7CiAgICAgICAgYnJlYWs7CiAgICB9CiAgICBjb25zdHJhaW50LnV1aWQgPSB1dWlkOwogICAgc3RhdGUud29ybGQuYWRkQ29uc3RyYWludChjb25zdHJhaW50KTsKICAgIGlmIChtYXhNdWx0aXBsaWVyICE9PSB1bmRlZmluZWQpIHsKICAgICAgY29uc3QgcG9zdFN0ZXBDb25zdHJhaW50ID0gKCkgPT4gewogICAgICAgIC8vIFRoZSBtdWx0aXBsaWVyIGlzIHByb3BvcnRpb25hbCB0byBob3cgbXVjaCBmb3JjZSBpcyBhZGRlZCB0byB0aGUgYm9kaWVzIGJ5IHRoZSBjb25zdHJhaW50LgogICAgICAgIC8vIElmIHRoaXMgZXhjZWVkcyBhIGxpbWl0IHRoZSBjb25zdHJhaW50IGlzIGRpc2FibGVkLgogICAgICAgIGNvbnN0IG11bHRpcGxpZXIgPSBNYXRoLmFicyhjb25zdHJhaW50LmVxdWF0aW9uc1swXS5tdWx0aXBsaWVyKTsKICAgICAgICBpZiAobXVsdGlwbGllciA+IG1heE11bHRpcGxpZXIpIHsKICAgICAgICAgIGNvbnN0cmFpbnQuZGlzYWJsZSgpOwogICAgICAgIH0KICAgICAgfTsKICAgICAgc3RhdGUuY29uc3RyYWludHNbdXVpZF0gPSBwb3N0U3RlcENvbnN0cmFpbnQ7CiAgICAgIHN0YXRlLndvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ3Bvc3RTdGVwJywgc3RhdGUuY29uc3RyYWludHNbdXVpZF0pOwogICAgfQogIH07CgogIGZ1bmN0aW9uIHRvVXBwZXJjYXNlKHN0cikgewogICAgcmV0dXJuIHN0ci50b1VwcGVyQ2FzZSgpOwogIH0KICBjb25zdCBhZGRSYXkgPSAoc3RhdGUsIF9yZWYpID0+IHsKICAgIGxldCB7CiAgICAgIHByb3BzOiB7CiAgICAgICAgZnJvbSwKICAgICAgICBtb2RlLAogICAgICAgIHRvLAogICAgICAgIC4uLnJheU9wdGlvbnMKICAgICAgfSwKICAgICAgdXVpZAogICAgfSA9IF9yZWY7CiAgICBjb25zdCByYXkgPSBuZXcgUmF5KHRyaXBsZXRUb1ZlYzMoZnJvbSksIHRyaXBsZXRUb1ZlYzModG8pKTsKICAgIGNvbnN0IG9wdGlvbnMgPSB7CiAgICAgIG1vZGU6IFJBWV9NT0RFU1t0b1VwcGVyY2FzZShtb2RlKV0sCiAgICAgIHJlc3VsdDogbmV3IFJheWNhc3RSZXN1bHQoKSwKICAgICAgLi4ucmF5T3B0aW9ucwogICAgfTsKICAgIHN0YXRlLnJheXNbdXVpZF0gPSAoKSA9PiB7CiAgICAgIHJheS5pbnRlcnNlY3RXb3JsZChzdGF0ZS53b3JsZCwgb3B0aW9ucyk7CiAgICAgIGlmICghb3B0aW9ucy5yZXN1bHQgfHwgIW9wdGlvbnMucmVzdWx0LmJvZHkpIHJldHVybjsKICAgICAgY29uc3QgewogICAgICAgIGJvZHksCiAgICAgICAgc2hhcGUsCiAgICAgICAgcmF5RnJvbVdvcmxkLAogICAgICAgIHJheVRvV29ybGQsCiAgICAgICAgaGl0Tm9ybWFsV29ybGQsCiAgICAgICAgaGl0UG9pbnRXb3JsZCwKICAgICAgICAuLi5yZXN0CiAgICAgIH0gPSBvcHRpb25zLnJlc3VsdDsKICAgICAgY29uc3QgYm9keVVVSUQgPSBib2R5LnV1aWQ7CiAgICAgIGlmICghYm9keVVVSUQpIHJldHVybjsKICAgICAgc2VsZi5wb3N0TWVzc2FnZSh7CiAgICAgICAgYm9keTogYm9keVVVSUQsCiAgICAgICAgaGl0Tm9ybWFsV29ybGQ6IGhpdE5vcm1hbFdvcmxkLnRvQXJyYXkoKSwKICAgICAgICBoaXRQb2ludFdvcmxkOiBoaXRQb2ludFdvcmxkLnRvQXJyYXkoKSwKICAgICAgICBvcDogJ2V2ZW50JywKICAgICAgICByYXk6IHsKICAgICAgICAgIGNvbGxpc2lvbkZpbHRlckdyb3VwOiByYXkuY29sbGlzaW9uRmlsdGVyR3JvdXAsCiAgICAgICAgICBjb2xsaXNpb25GaWx0ZXJNYXNrOiByYXkuY29sbGlzaW9uRmlsdGVyTWFzaywKICAgICAgICAgIGRpcmVjdGlvbjogcmF5LmRpcmVjdGlvbi50b0FycmF5KCksCiAgICAgICAgICBmcm9tLAogICAgICAgICAgdG8sCiAgICAgICAgICB1dWlkCiAgICAgICAgfSwKICAgICAgICByYXlGcm9tV29ybGQ6IHJheUZyb21Xb3JsZC50b0FycmF5KCksCiAgICAgICAgcmF5VG9Xb3JsZDogcmF5VG9Xb3JsZC50b0FycmF5KCksCiAgICAgICAgc2hhcGU6IHNoYXBlID8gewogICAgICAgICAgLi4uc2hhcGUsCiAgICAgICAgICBib2R5OiBib2R5VVVJRAogICAgICAgIH0gOiBudWxsLAogICAgICAgIHR5cGU6ICdyYXloaXQnLAogICAgICAgIC4uLnJlc3QKICAgICAgfSk7CiAgICB9OwogICAgc3RhdGUud29ybGQuYWRkRXZlbnRMaXN0ZW5lcigncHJlU3RlcCcsIHN0YXRlLnJheXNbdXVpZF0pOwogIH07CgogIGNvbnN0IGFkZFJheWNhc3RWZWhpY2xlID0gKHN0YXRlLCBkYXRhKSA9PiB7CiAgICBjb25zdCBbY2hhc3Npc0JvZHksIHdoZWVscywgd2hlZWxJbmZvcywgaW5kZXhGb3J3YXJkQXhpcywgaW5kZXhSaWdodEF4aXMsIGluZGV4VXBBeGlzXSA9IGRhdGEucHJvcHM7CiAgICBjb25zdCB2ZWhpY2xlID0gbmV3IFJheWNhc3RWZWhpY2xlKHsKICAgICAgY2hhc3Npc0JvZHk6IHN0YXRlLmJvZGllc1tjaGFzc2lzQm9keV0sCiAgICAgIGluZGV4Rm9yd2FyZEF4aXMsCiAgICAgIGluZGV4UmlnaHRBeGlzLAogICAgICBpbmRleFVwQXhpcwogICAgfSk7CiAgICB2ZWhpY2xlLndvcmxkID0gc3RhdGUud29ybGQ7CiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdoZWVsSW5mb3MubGVuZ3RoOyBpKyspIHsKICAgICAgY29uc3QgewogICAgICAgIGF4bGVMb2NhbCwKICAgICAgICBjaGFzc2lzQ29ubmVjdGlvblBvaW50TG9jYWwsCiAgICAgICAgZGlyZWN0aW9uTG9jYWwsCiAgICAgICAgLi4ucmVzdAogICAgICB9ID0gd2hlZWxJbmZvc1tpXTsKICAgICAgdmVoaWNsZS5hZGRXaGVlbCh7CiAgICAgICAgYXhsZUxvY2FsOiB0cmlwbGV0VG9WZWMzKGF4bGVMb2NhbCksCiAgICAgICAgY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludExvY2FsOiB0cmlwbGV0VG9WZWMzKGNoYXNzaXNDb25uZWN0aW9uUG9pbnRMb2NhbCksCiAgICAgICAgZGlyZWN0aW9uTG9jYWw6IHRyaXBsZXRUb1ZlYzMoZGlyZWN0aW9uTG9jYWwpLAogICAgICAgIC4uLnJlc3QKICAgICAgfSk7CiAgICB9CiAgICBjb25zdCBwcmVTdGVwID0gKCkgPT4gewogICAgICB2ZWhpY2xlLnVwZGF0ZVZlaGljbGUoc3RhdGUud29ybGQuZHQpOwogICAgfTsKICAgIGNvbnN0IHBvc3RTdGVwID0gKCkgPT4gewogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZlaGljbGUud2hlZWxJbmZvcy5sZW5ndGg7IGkrKykgewogICAgICAgIHZlaGljbGUudXBkYXRlV2hlZWxUcmFuc2Zvcm0oaSk7CiAgICAgICAgY29uc3QgdCA9IHZlaGljbGUud2hlZWxJbmZvc1tpXS53b3JsZFRyYW5zZm9ybTsKICAgICAgICBjb25zdCB3aGVlbEJvZHkgPSBzdGF0ZS5ib2RpZXNbd2hlZWxzW2ldXTsKICAgICAgICB3aGVlbEJvZHkucG9zaXRpb24uY29weSh0LnBvc2l0aW9uKTsKICAgICAgICB3aGVlbEJvZHkucXVhdGVybmlvbi5jb3B5KHQucXVhdGVybmlvbik7CiAgICAgIH0KICAgIH07CiAgICBzdGF0ZS52ZWhpY2xlc1tkYXRhLnV1aWRdID0gewogICAgICBwb3N0U3RlcCwKICAgICAgcHJlU3RlcCwKICAgICAgdmVoaWNsZQogICAgfTsKICAgIHN0YXRlLndvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ3ByZVN0ZXAnLCBwcmVTdGVwKTsKICAgIHN0YXRlLndvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ3Bvc3RTdGVwJywgcG9zdFN0ZXApOwogIH07CgogIGNvbnN0IGFkZFNwcmluZyA9IChzdGF0ZSwgX3JlZikgPT4gewogICAgbGV0IHsKICAgICAgcHJvcHM6IFtib2R5QSwgYm9keUIsIHsKICAgICAgICBkYW1waW5nLAogICAgICAgIGxvY2FsQW5jaG9yQSwKICAgICAgICBsb2NhbEFuY2hvckIsCiAgICAgICAgcmVzdExlbmd0aCwKICAgICAgICBzdGlmZm5lc3MsCiAgICAgICAgd29ybGRBbmNob3JBLAogICAgICAgIHdvcmxkQW5jaG9yQgogICAgICB9XSwKICAgICAgdXVpZAogICAgfSA9IF9yZWY7CiAgICBjb25zdCBzcHJpbmcgPSBuZXcgU3ByaW5nKHN0YXRlLmJvZGllc1tib2R5QV0sIHN0YXRlLmJvZGllc1tib2R5Ql0sIHsKICAgICAgZGFtcGluZywKICAgICAgbG9jYWxBbmNob3JBOiB0cmlwbGV0VG9WZWMzKGxvY2FsQW5jaG9yQSksCiAgICAgIGxvY2FsQW5jaG9yQjogdHJpcGxldFRvVmVjMyhsb2NhbEFuY2hvckIpLAogICAgICByZXN0TGVuZ3RoLAogICAgICBzdGlmZm5lc3MsCiAgICAgIHdvcmxkQW5jaG9yQTogdHJpcGxldFRvVmVjMyh3b3JsZEFuY2hvckEpLAogICAgICB3b3JsZEFuY2hvckI6IHRyaXBsZXRUb1ZlYzMod29ybGRBbmNob3JCKQogICAgfSk7CiAgICBzcHJpbmcudXVpZCA9IHV1aWQ7CiAgICBjb25zdCBwb3N0U3RlcFNwcmluZyA9ICgpID0+IHNwcmluZy5hcHBseUZvcmNlKCk7CiAgICBzdGF0ZS5zcHJpbmdzW3V1aWRdID0gcG9zdFN0ZXBTcHJpbmc7CiAgICBzdGF0ZS5zcHJpbmdJbnN0YW5jZXNbdXVpZF0gPSBzcHJpbmc7CgogICAgLy8gQ29tcHV0ZSB0aGUgZm9yY2UgYWZ0ZXIgZWFjaCBzdGVwCiAgICBzdGF0ZS53b3JsZC5hZGRFdmVudExpc3RlbmVyKCdwb3N0U3RlcCcsIHN0YXRlLnNwcmluZ3NbdXVpZF0pOwogIH07CgogIGZ1bmN0aW9uIGVtaXRCZWdpbkNvbnRhY3QoX3JlZikgewogICAgbGV0IHsKICAgICAgYm9keUEsCiAgICAgIGJvZHlCCiAgICB9ID0gX3JlZjsKICAgIGlmICghKGJvZHlBICE9IG51bGwgJiYgYm9keUEudXVpZCkgfHwgIShib2R5QiAhPSBudWxsICYmIGJvZHlCLnV1aWQpKSByZXR1cm47CiAgICBzZWxmLnBvc3RNZXNzYWdlKHsKICAgICAgYm9keUE6IGJvZHlBLnV1aWQsCiAgICAgIGJvZHlCOiBib2R5Qi51dWlkLAogICAgICBvcDogJ2V2ZW50JywKICAgICAgdHlwZTogJ2NvbGxpZGVCZWdpbicKICAgIH0pOwogIH0KICBmdW5jdGlvbiBlbWl0RW5kQ29udGFjdChfcmVmMikgewogICAgbGV0IHsKICAgICAgYm9keUEsCiAgICAgIGJvZHlCCiAgICB9ID0gX3JlZjI7CiAgICBpZiAoIShib2R5QSAhPSBudWxsICYmIGJvZHlBLnV1aWQpIHx8ICEoYm9keUIgIT0gbnVsbCAmJiBib2R5Qi51dWlkKSkgcmV0dXJuOwogICAgc2VsZi5wb3N0TWVzc2FnZSh7CiAgICAgIGJvZHlBOiBib2R5QS51dWlkLAogICAgICBib2R5QjogYm9keUIudXVpZCwKICAgICAgb3A6ICdldmVudCcsCiAgICAgIHR5cGU6ICdjb2xsaWRlRW5kJwogICAgfSk7CiAgfQogIGNvbnN0IGluaXQgPSAod29ybGQsIF9yZWYzKSA9PiB7CiAgICBsZXQgewogICAgICBhbGxvd1NsZWVwLAogICAgICBheGlzSW5kZXggPSAwLAogICAgICBicm9hZHBoYXNlLAogICAgICBkZWZhdWx0Q29udGFjdE1hdGVyaWFsLAogICAgICBmcmljdGlvbkdyYXZpdHksCiAgICAgIGdyYXZpdHksCiAgICAgIGl0ZXJhdGlvbnMsCiAgICAgIHF1YXROb3JtYWxpemVGYXN0LAogICAgICBxdWF0Tm9ybWFsaXplU2tpcCwKICAgICAgc29sdmVyLAogICAgICB0b2xlcmFuY2UKICAgIH0gPSBfcmVmMzsKICAgIHdvcmxkLmFsbG93U2xlZXAgPSBhbGxvd1NsZWVwOwogICAgd29ybGQuZ3Jhdml0eS5zZXQoLi4uZ3Jhdml0eSk7CiAgICB3b3JsZC5mcmljdGlvbkdyYXZpdHkgPSBmcmljdGlvbkdyYXZpdHkgPyBuZXcgVmVjMyguLi5mcmljdGlvbkdyYXZpdHkpIDogdW5kZWZpbmVkOwogICAgd29ybGQucXVhdE5vcm1hbGl6ZUZhc3QgPSBxdWF0Tm9ybWFsaXplRmFzdDsKICAgIHdvcmxkLnF1YXROb3JtYWxpemVTa2lwID0gcXVhdE5vcm1hbGl6ZVNraXA7CiAgICBpZiAoc29sdmVyID09PSAnU3BsaXQnKSB7CiAgICAgIHdvcmxkLnNvbHZlciA9IG5ldyBTcGxpdFNvbHZlcihuZXcgR1NTb2x2ZXIoKSk7CiAgICB9CiAgICBpZiAod29ybGQuc29sdmVyIGluc3RhbmNlb2YgR1NTb2x2ZXIpIHsKICAgICAgd29ybGQuc29sdmVyLnRvbGVyYW5jZSA9IHRvbGVyYW5jZTsKICAgICAgd29ybGQuc29sdmVyLml0ZXJhdGlvbnMgPSBpdGVyYXRpb25zOwogICAgfQogICAgd29ybGQuYnJvYWRwaGFzZSA9IGJyb2FkcGhhc2UgPT09ICdTQVAnID8gbmV3IFNBUEJyb2FkcGhhc2Uod29ybGQpIDogbmV3IE5haXZlQnJvYWRwaGFzZSgpOwogICAgaWYgKHdvcmxkLmJyb2FkcGhhc2UgaW5zdGFuY2VvZiBTQVBCcm9hZHBoYXNlKSB7CiAgICAgIHdvcmxkLmJyb2FkcGhhc2UuYXhpc0luZGV4ID0gYXhpc0luZGV4OwogICAgfQogICAgd29ybGQuYWRkRXZlbnRMaXN0ZW5lcignYmVnaW5Db250YWN0JywgZW1pdEJlZ2luQ29udGFjdCk7CiAgICB3b3JsZC5hZGRFdmVudExpc3RlbmVyKCdlbmRDb250YWN0JywgZW1pdEVuZENvbnRhY3QpOwogICAgT2JqZWN0LmFzc2lnbih3b3JsZC5kZWZhdWx0Q29udGFjdE1hdGVyaWFsLCBkZWZhdWx0Q29udGFjdE1hdGVyaWFsKTsKICB9OwoKICBjb25zdCBpc1FvclYgPSB2ID0+IHYgaW5zdGFuY2VvZiBRdWF0ZXJuaW9uIHx8IHYgaW5zdGFuY2VvZiBWZWMzOwogIGNvbnN0IHN0ZXAgPSAoc3RhdGUsIF9yZWYpID0+IHsKICAgIGxldCB7CiAgICAgIHBvc2l0aW9ucywKICAgICAgcHJvcHM6IHsKICAgICAgICBtYXhTdWJTdGVwcywKICAgICAgICBzdGVwU2l6ZSwKICAgICAgICB0aW1lU2luY2VMYXN0Q2FsbGVkCiAgICAgIH0sCiAgICAgIHF1YXRlcm5pb25zCiAgICB9ID0gX3JlZjsKICAgIHN0YXRlLndvcmxkLnN0ZXAoc3RlcFNpemUsIHRpbWVTaW5jZUxhc3RDYWxsZWQsIG1heFN1YlN0ZXBzKTsKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RhdGUud29ybGQuYm9kaWVzLmxlbmd0aDsgaSArPSAxKSB7CiAgICAgIGNvbnN0IHAgPSBzdGF0ZS53b3JsZC5ib2RpZXNbaV0ucG9zaXRpb247CiAgICAgIGNvbnN0IHEgPSBzdGF0ZS53b3JsZC5ib2RpZXNbaV0ucXVhdGVybmlvbjsKICAgICAgcG9zaXRpb25zWzMgKiBpICsgMF0gPSBwLng7CiAgICAgIHBvc2l0aW9uc1szICogaSArIDFdID0gcC55OwogICAgICBwb3NpdGlvbnNbMyAqIGkgKyAyXSA9IHAuejsKICAgICAgcXVhdGVybmlvbnNbNCAqIGkgKyAwXSA9IHEueDsKICAgICAgcXVhdGVybmlvbnNbNCAqIGkgKyAxXSA9IHEueTsKICAgICAgcXVhdGVybmlvbnNbNCAqIGkgKyAyXSA9IHEuejsKICAgICAgcXVhdGVybmlvbnNbNCAqIGkgKyAzXSA9IHEudzsKICAgIH0KICAgIGNvbnN0IG9ic2VydmF0aW9ucyA9IFtdOwogICAgZm9yIChjb25zdCBpZCBvZiBPYmplY3Qua2V5cyhzdGF0ZS5zdWJzY3JpcHRpb25zKSkgewogICAgICBjb25zdCBbdXVpZCwgdHlwZSwgdGFyZ2V0ID0gJ2JvZGllcyddID0gc3RhdGUuc3Vic2NyaXB0aW9uc1tpZF07CiAgICAgIGNvbnN0IHsKICAgICAgICBib2RpZXMsCiAgICAgICAgdmVoaWNsZXMKICAgICAgfSA9IHN0YXRlOwogICAgICBjb25zdCB2YWx1ZSA9IHRhcmdldCA9PT0gJ3ZlaGljbGVzJyA/CiAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVE9ETzogRGlmZmVyZW50aWF0ZSB0aGVzZSAidHlwZXMiCiAgICAgIHZlaGljbGVzW3V1aWRdLnZlaGljbGVbdHlwZV0gOgogICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRPRE86IERpZmZlcmVudGlhdGUgdGhlc2UgInR5cGVzIgogICAgICBib2RpZXNbdXVpZF1bdHlwZV07CiAgICAgIGNvbnN0IHNlcmlhbGl6YWJsZVZhbHVlID0gaXNRb3JWKHZhbHVlKSA/IHZhbHVlLnRvQXJyYXkoKSA6IHZhbHVlOwogICAgICBvYnNlcnZhdGlvbnMucHVzaChbTnVtYmVyKGlkKSwgc2VyaWFsaXphYmxlVmFsdWUsCiAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVE9ETzogRGlmZmVyZW50aWF0ZSB0aGVzZSAidHlwZXMiCiAgICAgIHR5cGVdKTsKICAgIH0KICAgIGNvbnN0IG1lc3NhZ2UgPSB7CiAgICAgIGFjdGl2ZTogc3RhdGUud29ybGQuaGFzQWN0aXZlQm9kaWVzLAogICAgICBvYnNlcnZhdGlvbnMsCiAgICAgIG9wOiAnZnJhbWUnLAogICAgICBwb3NpdGlvbnMsCiAgICAgIHF1YXRlcm5pb25zCiAgICB9OwogICAgaWYgKHN0YXRlLmJvZGllc05lZWRTeW5jaW5nKSB7CiAgICAgIG1lc3NhZ2UuYm9kaWVzID0gc3RhdGUud29ybGQuYm9kaWVzLnJlZHVjZSgoYm9kaWVzLCBib2R5KSA9PiB7CiAgICAgICAgaWYgKGJvZHkudXVpZCkgYm9kaWVzLnB1c2goYm9keS51dWlkKTsKICAgICAgICByZXR1cm4gYm9kaWVzOwogICAgICB9LCBbXSk7CiAgICAgIHN0YXRlLmJvZGllc05lZWRTeW5jaW5nID0gZmFsc2U7CiAgICB9CiAgICBzZWxmLnBvc3RNZXNzYWdlKG1lc3NhZ2UsIFtwb3NpdGlvbnMuYnVmZmVyLCBxdWF0ZXJuaW9ucy5idWZmZXJdKTsKICB9OwoKICBjb25zdCBzdGF0ZSA9IHsKICAgIGJvZGllczoge30sCiAgICBib2RpZXNOZWVkU3luY2luZzogZmFsc2UsCiAgICBjb25zdHJhaW50czoge30sCiAgICBtYXRlcmlhbHM6IHt9LAogICAgcmF5czoge30sCiAgICBzcHJpbmdJbnN0YW5jZXM6IHt9LAogICAgc3ByaW5nczoge30sCiAgICBzdWJzY3JpcHRpb25zOiB7fSwKICAgIHZlaGljbGVzOiB7fSwKICAgIHdvcmxkOiBuZXcgV29ybGQoKQogIH07CgogIC8vLyA8cmVmZXJlbmNlIG5vLWRlZmF1bHQtbGliPSJ0cnVlIi8+CiAgY29uc3QgaXNIaW5nZUNvbnN0cmFpbnQgPSBjID0+IGMgaW5zdGFuY2VvZiBIaW5nZUNvbnN0cmFpbnQ7CiAgZnVuY3Rpb24gc3luY0JvZGllcygpIHsKICAgIHN0YXRlLmJvZGllc05lZWRTeW5jaW5nID0gdHJ1ZTsKICAgIHN0YXRlLmJvZGllcyA9IHN0YXRlLndvcmxkLmJvZGllcy5yZWR1Y2UoKGJvZGllcywgYm9keSkgPT4gYm9keS51dWlkID8gewogICAgICAuLi5ib2RpZXMsCiAgICAgIFtib2R5LnV1aWRdOiBib2R5CiAgICB9IDogYm9kaWVzLCB7fSk7CiAgfQogIGNvbnN0IGJyb2FkcGhhc2VzID0gewogICAgTmFpdmVCcm9hZHBoYXNlLAogICAgU0FQQnJvYWRwaGFzZQogIH07CiAgY29uc3QgY3JlYXRlTWF0ZXJpYWwgPSBjcmVhdGVNYXRlcmlhbEZhY3Rvcnkoc3RhdGUubWF0ZXJpYWxzKTsKICBzZWxmLm9ubWVzc2FnZSA9IF9yZWYgPT4gewogICAgbGV0IHsKICAgICAgZGF0YQogICAgfSA9IF9yZWY7CiAgICBzd2l0Y2ggKGRhdGEub3ApIHsKICAgICAgY2FzZSAnaW5pdCc6CiAgICAgICAgewogICAgICAgICAgaW5pdChzdGF0ZS53b3JsZCwgZGF0YS5wcm9wcyk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIGNhc2UgJ3N0ZXAnOgogICAgICAgIHsKICAgICAgICAgIHN0ZXAoc3RhdGUsIGRhdGEpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICBjYXNlICdhZGRCb2RpZXMnOgogICAgICAgIHsKICAgICAgICAgIGFkZEJvZGllcyhzdGF0ZSwgY3JlYXRlTWF0ZXJpYWwsIGRhdGEpOwogICAgICAgICAgc3luY0JvZGllcygpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICBjYXNlICdyZW1vdmVCb2RpZXMnOgogICAgICAgIHsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS51dWlkLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHN0YXRlLndvcmxkLnJlbW92ZUJvZHkoc3RhdGUuYm9kaWVzW2RhdGEudXVpZFtpXV0pOwogICAgICAgICAgICBjb25zdCBrZXkgPSBPYmplY3Qua2V5cyhzdGF0ZS5zdWJzY3JpcHRpb25zKS5maW5kKGsgPT4gc3RhdGUuc3Vic2NyaXB0aW9uc1trXVswXSA9PT0gZGF0YS51dWlkW2ldKTsKICAgICAgICAgICAgaWYgKGtleSkgewogICAgICAgICAgICAgIGRlbGV0ZSBzdGF0ZS5zdWJzY3JpcHRpb25zW2tleV07CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHN5bmNCb2RpZXMoKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgY2FzZSAnc3Vic2NyaWJlJzoKICAgICAgICB7CiAgICAgICAgICBjb25zdCB7CiAgICAgICAgICAgIGlkLAogICAgICAgICAgICB0YXJnZXQsCiAgICAgICAgICAgIHR5cGUKICAgICAgICAgIH0gPSBkYXRhLnByb3BzOwogICAgICAgICAgc3RhdGUuc3Vic2NyaXB0aW9uc1tpZF0gPSBbZGF0YS51dWlkLCB0eXBlLCB0YXJnZXRdOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICBjYXNlICd1bnN1YnNjcmliZSc6CiAgICAgICAgewogICAgICAgICAgZGVsZXRlIHN0YXRlLnN1YnNjcmlwdGlvbnNbZGF0YS5wcm9wc107CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIGNhc2UgJ3NldFBvc2l0aW9uJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5wb3NpdGlvbi5zZXQoZGF0YS5wcm9wc1swXSwgZGF0YS5wcm9wc1sxXSwgZGF0YS5wcm9wc1syXSk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ3NldFF1YXRlcm5pb24nOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLnF1YXRlcm5pb24uc2V0KGRhdGEucHJvcHNbMF0sIGRhdGEucHJvcHNbMV0sIGRhdGEucHJvcHNbMl0sIGRhdGEucHJvcHNbM10pOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdzZXRSb3RhdGlvbic6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0ucXVhdGVybmlvbi5zZXRGcm9tRXVsZXIoZGF0YS5wcm9wc1swXSwgZGF0YS5wcm9wc1sxXSwgZGF0YS5wcm9wc1syXSk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ3NldFZlbG9jaXR5JzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS52ZWxvY2l0eS5zZXQoZGF0YS5wcm9wc1swXSwgZGF0YS5wcm9wc1sxXSwgZGF0YS5wcm9wc1syXSk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ3NldEFuZ3VsYXJWZWxvY2l0eSc6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0uYW5ndWxhclZlbG9jaXR5LnNldChkYXRhLnByb3BzWzBdLCBkYXRhLnByb3BzWzFdLCBkYXRhLnByb3BzWzJdKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnc2V0TGluZWFyRmFjdG9yJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5saW5lYXJGYWN0b3Iuc2V0KGRhdGEucHJvcHNbMF0sIGRhdGEucHJvcHNbMV0sIGRhdGEucHJvcHNbMl0pOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdzZXRBbmd1bGFyRmFjdG9yJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5hbmd1bGFyRmFjdG9yLnNldChkYXRhLnByb3BzWzBdLCBkYXRhLnByb3BzWzFdLCBkYXRhLnByb3BzWzJdKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnc2V0TWFzcyc6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0ubWFzcyA9IGRhdGEucHJvcHM7CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0udXBkYXRlTWFzc1Byb3BlcnRpZXMoKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnc2V0TWF0ZXJpYWwnOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLm1hdGVyaWFsID0gZGF0YS5wcm9wcyA/IGNyZWF0ZU1hdGVyaWFsKGRhdGEucHJvcHMpIDogbnVsbDsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnc2V0TGluZWFyRGFtcGluZyc6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0ubGluZWFyRGFtcGluZyA9IGRhdGEucHJvcHM7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ3NldEFuZ3VsYXJEYW1waW5nJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5hbmd1bGFyRGFtcGluZyA9IGRhdGEucHJvcHM7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ3NldEFsbG93U2xlZXAnOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLmFsbG93U2xlZXAgPSBkYXRhLnByb3BzOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdzZXRTbGVlcFNwZWVkTGltaXQnOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLnNsZWVwU3BlZWRMaW1pdCA9IGRhdGEucHJvcHM7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ3NldFNsZWVwVGltZUxpbWl0JzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5zbGVlcFRpbWVMaW1pdCA9IGRhdGEucHJvcHM7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ3NldENvbGxpc2lvbkZpbHRlckdyb3VwJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5jb2xsaXNpb25GaWx0ZXJHcm91cCA9IGRhdGEucHJvcHM7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ3NldENvbGxpc2lvbkZpbHRlck1hc2snOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLmNvbGxpc2lvbkZpbHRlck1hc2sgPSBkYXRhLnByb3BzOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdzZXRDb2xsaXNpb25SZXNwb25zZSc6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0uY29sbGlzaW9uUmVzcG9uc2UgPSBkYXRhLnByb3BzOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdzZXRGaXhlZFJvdGF0aW9uJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5maXhlZFJvdGF0aW9uID0gZGF0YS5wcm9wczsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnc2V0RnJpY3Rpb25HcmF2aXR5JzoKICAgICAgICBzdGF0ZS53b3JsZC5mcmljdGlvbkdyYXZpdHkgPSBkYXRhLnByb3BzID8gbmV3IFZlYzMoLi4uZGF0YS5wcm9wcykgOiB1bmRlZmluZWQ7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ3NldElzVHJpZ2dlcic6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0uaXNUcmlnZ2VyID0gZGF0YS5wcm9wczsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnc2V0R3Jhdml0eSc6CiAgICAgICAgc3RhdGUud29ybGQuZ3Jhdml0eS5zZXQoZGF0YS5wcm9wc1swXSwgZGF0YS5wcm9wc1sxXSwgZGF0YS5wcm9wc1syXSk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ3NldFRvbGVyYW5jZSc6CiAgICAgICAgaWYgKHN0YXRlLndvcmxkLnNvbHZlciBpbnN0YW5jZW9mIEdTU29sdmVyKSB7CiAgICAgICAgICBzdGF0ZS53b3JsZC5zb2x2ZXIudG9sZXJhbmNlID0gZGF0YS5wcm9wczsKICAgICAgICB9CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ3NldEl0ZXJhdGlvbnMnOgogICAgICAgIGlmIChzdGF0ZS53b3JsZC5zb2x2ZXIgaW5zdGFuY2VvZiBHU1NvbHZlcikgewogICAgICAgICAgc3RhdGUud29ybGQuc29sdmVyLml0ZXJhdGlvbnMgPSBkYXRhLnByb3BzOwogICAgICAgIH0KICAgICAgICBicmVhazsKICAgICAgY2FzZSAnc2V0QnJvYWRwaGFzZSc6CiAgICAgICAgc3RhdGUud29ybGQuYnJvYWRwaGFzZSA9IG5ldyAoYnJvYWRwaGFzZXNbYCR7ZGF0YS5wcm9wc31Ccm9hZHBoYXNlYF0gfHwgTmFpdmVCcm9hZHBoYXNlKShzdGF0ZS53b3JsZCk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ3NldEF4aXNJbmRleCc6CiAgICAgICAgaWYgKHN0YXRlLndvcmxkLmJyb2FkcGhhc2UgaW5zdGFuY2VvZiBTQVBCcm9hZHBoYXNlKSB7CiAgICAgICAgICBzdGF0ZS53b3JsZC5icm9hZHBoYXNlLmF4aXNJbmRleCA9IGRhdGEucHJvcHMgPT09IHVuZGVmaW5lZCB8fCBkYXRhLnByb3BzID09PSBudWxsID8gMCA6IGRhdGEucHJvcHM7CiAgICAgICAgfQogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdhcHBseUZvcmNlJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5hcHBseUZvcmNlKG5ldyBWZWMzKC4uLmRhdGEucHJvcHNbMF0pLCBuZXcgVmVjMyguLi5kYXRhLnByb3BzWzFdKSk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ2FwcGx5SW1wdWxzZSc6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0uYXBwbHlJbXB1bHNlKG5ldyBWZWMzKC4uLmRhdGEucHJvcHNbMF0pLCBuZXcgVmVjMyguLi5kYXRhLnByb3BzWzFdKSk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ2FwcGx5TG9jYWxGb3JjZSc6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0uYXBwbHlMb2NhbEZvcmNlKG5ldyBWZWMzKC4uLmRhdGEucHJvcHNbMF0pLCBuZXcgVmVjMyguLi5kYXRhLnByb3BzWzFdKSk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ2FwcGx5TG9jYWxJbXB1bHNlJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5hcHBseUxvY2FsSW1wdWxzZShuZXcgVmVjMyguLi5kYXRhLnByb3BzWzBdKSwgbmV3IFZlYzMoLi4uZGF0YS5wcm9wc1sxXSkpOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdhcHBseVRvcnF1ZSc6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0uYXBwbHlUb3JxdWUobmV3IFZlYzMoLi4uZGF0YS5wcm9wc1swXSkpOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdhZGRDb25zdHJhaW50JzoKICAgICAgICB7CiAgICAgICAgICBhZGRDb25zdHJhaW50KHN0YXRlLCBkYXRhKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgY2FzZSAncmVtb3ZlQ29uc3RyYWludCc6CiAgICAgICAgc3RhdGUud29ybGQuY29uc3RyYWludHMuZmlsdGVyKF9yZWYyID0+IHsKICAgICAgICAgIGxldCB7CiAgICAgICAgICAgIHV1aWQKICAgICAgICAgIH0gPSBfcmVmMjsKICAgICAgICAgIHJldHVybiB1dWlkID09PSBkYXRhLnV1aWQ7CiAgICAgICAgfSkubWFwKGMgPT4gc3RhdGUud29ybGQucmVtb3ZlQ29uc3RyYWludChjKSk7CiAgICAgICAgaWYgKHN0YXRlLmNvbnN0cmFpbnRzW2RhdGEudXVpZF0pIHsKICAgICAgICAgIHN0YXRlLndvcmxkLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Bvc3RTdGVwJywgc3RhdGUuY29uc3RyYWludHNbZGF0YS51dWlkXSk7CiAgICAgICAgICBkZWxldGUgc3RhdGUuY29uc3RyYWludHNbZGF0YS51dWlkXTsKICAgICAgICB9CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ2VuYWJsZUNvbnN0cmFpbnQnOgogICAgICAgIHN0YXRlLndvcmxkLmNvbnN0cmFpbnRzLmZpbHRlcihjID0+IGMudXVpZCA9PT0gZGF0YS51dWlkKS5tYXAoYyA9PiBjLmVuYWJsZSgpKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnZGlzYWJsZUNvbnN0cmFpbnQnOgogICAgICAgIHN0YXRlLndvcmxkLmNvbnN0cmFpbnRzLmZpbHRlcihjID0+IGMudXVpZCA9PT0gZGF0YS51dWlkKS5tYXAoYyA9PiBjLmRpc2FibGUoKSk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ2VuYWJsZUNvbnN0cmFpbnRNb3Rvcic6CiAgICAgICAgc3RhdGUud29ybGQuY29uc3RyYWludHMuZmlsdGVyKGMgPT4gYy51dWlkID09PSBkYXRhLnV1aWQpLmZpbHRlcihpc0hpbmdlQ29uc3RyYWludCkubWFwKGMgPT4gYy5lbmFibGVNb3RvcigpKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnZGlzYWJsZUNvbnN0cmFpbnRNb3Rvcic6CiAgICAgICAgc3RhdGUud29ybGQuY29uc3RyYWludHMuZmlsdGVyKGMgPT4gYy51dWlkID09PSBkYXRhLnV1aWQpLmZpbHRlcihpc0hpbmdlQ29uc3RyYWludCkubWFwKGMgPT4gYy5kaXNhYmxlTW90b3IoKSk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ3NldENvbnN0cmFpbnRNb3RvclNwZWVkJzoKICAgICAgICBzdGF0ZS53b3JsZC5jb25zdHJhaW50cy5maWx0ZXIoYyA9PiBjLnV1aWQgPT09IGRhdGEudXVpZCkuZmlsdGVyKGlzSGluZ2VDb25zdHJhaW50KS5tYXAoYyA9PiBjLnNldE1vdG9yU3BlZWQoZGF0YS5wcm9wcykpOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdzZXRDb25zdHJhaW50TW90b3JNYXhGb3JjZSc6CiAgICAgICAgc3RhdGUud29ybGQuY29uc3RyYWludHMuZmlsdGVyKGMgPT4gYy51dWlkID09PSBkYXRhLnV1aWQpLmZpbHRlcihpc0hpbmdlQ29uc3RyYWludCkubWFwKGMgPT4gYy5zZXRNb3Rvck1heEZvcmNlKGRhdGEucHJvcHMpKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnYWRkU3ByaW5nJzoKICAgICAgICB7CiAgICAgICAgICBhZGRTcHJpbmcoc3RhdGUsIGRhdGEpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICBjYXNlICdzZXRTcHJpbmdTdGlmZm5lc3MnOgogICAgICAgIHsKICAgICAgICAgIHN0YXRlLnNwcmluZ0luc3RhbmNlc1tkYXRhLnV1aWRdLnN0aWZmbmVzcyA9IGRhdGEucHJvcHM7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIGNhc2UgJ3NldFNwcmluZ1Jlc3RMZW5ndGgnOgogICAgICAgIHsKICAgICAgICAgIHN0YXRlLnNwcmluZ0luc3RhbmNlc1tkYXRhLnV1aWRdLnJlc3RMZW5ndGggPSBkYXRhLnByb3BzOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICBjYXNlICdzZXRTcHJpbmdEYW1waW5nJzoKICAgICAgICB7CiAgICAgICAgICBzdGF0ZS5zcHJpbmdJbnN0YW5jZXNbZGF0YS51dWlkXS5kYW1waW5nID0gZGF0YS5wcm9wczsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgY2FzZSAncmVtb3ZlU3ByaW5nJzoKICAgICAgICB7CiAgICAgICAgICBzdGF0ZS53b3JsZC5yZW1vdmVFdmVudExpc3RlbmVyKCdwb3N0U3RlcCcsIHN0YXRlLnNwcmluZ3NbZGF0YS51dWlkXSk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIGNhc2UgJ2FkZFJheSc6CiAgICAgICAgewogICAgICAgICAgYWRkUmF5KHN0YXRlLCBkYXRhKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgY2FzZSAncmVtb3ZlUmF5JzoKICAgICAgICB7CiAgICAgICAgICBzdGF0ZS53b3JsZC5yZW1vdmVFdmVudExpc3RlbmVyKCdwcmVTdGVwJywgc3RhdGUucmF5c1tkYXRhLnV1aWRdKTsKICAgICAgICAgIGRlbGV0ZSBzdGF0ZS5yYXlzW2RhdGEudXVpZF07CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIGNhc2UgJ2FkZFJheWNhc3RWZWhpY2xlJzoKICAgICAgICB7CiAgICAgICAgICBhZGRSYXljYXN0VmVoaWNsZShzdGF0ZSwgZGF0YSk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIGNhc2UgJ3JlbW92ZVJheWNhc3RWZWhpY2xlJzoKICAgICAgICB7CiAgICAgICAgICBzdGF0ZS53b3JsZC5yZW1vdmVFdmVudExpc3RlbmVyKCdwcmVTdGVwJywgc3RhdGUudmVoaWNsZXNbZGF0YS51dWlkXS5wcmVTdGVwKTsKICAgICAgICAgIHN0YXRlLndvcmxkLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Bvc3RTdGVwJywgc3RhdGUudmVoaWNsZXNbZGF0YS51dWlkXS5wb3N0U3RlcCk7CiAgICAgICAgICBzdGF0ZS52ZWhpY2xlc1tkYXRhLnV1aWRdLnZlaGljbGUud29ybGQgPSBudWxsOwogICAgICAgICAgZGVsZXRlIHN0YXRlLnZlaGljbGVzW2RhdGEudXVpZF07CiAgICAgICAgICBjb25zdCBrZXkgPSBPYmplY3Qua2V5cyhzdGF0ZS5zdWJzY3JpcHRpb25zKS5maW5kKGsgPT4gc3RhdGUuc3Vic2NyaXB0aW9uc1trXVswXSA9PT0gZGF0YS51dWlkKTsKICAgICAgICAgIGlmIChrZXkpIHsKICAgICAgICAgICAgZGVsZXRlIHN0YXRlLnN1YnNjcmlwdGlvbnNba2V5XTsKICAgICAgICAgIH0KICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgY2FzZSAnc2V0UmF5Y2FzdFZlaGljbGVTdGVlcmluZ1ZhbHVlJzoKICAgICAgICB7CiAgICAgICAgICBjb25zdCBbdmFsdWUsIHdoZWVsSW5kZXhdID0gZGF0YS5wcm9wczsKICAgICAgICAgIHN0YXRlLnZlaGljbGVzW2RhdGEudXVpZF0udmVoaWNsZS5zZXRTdGVlcmluZ1ZhbHVlKHZhbHVlLCB3aGVlbEluZGV4KTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgY2FzZSAnYXBwbHlSYXljYXN0VmVoaWNsZUVuZ2luZUZvcmNlJzoKICAgICAgICB7CiAgICAgICAgICBjb25zdCBbdmFsdWUsIHdoZWVsSW5kZXhdID0gZGF0YS5wcm9wczsKICAgICAgICAgIHN0YXRlLnZlaGljbGVzW2RhdGEudXVpZF0udmVoaWNsZS5hcHBseUVuZ2luZUZvcmNlKHZhbHVlLCB3aGVlbEluZGV4KTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgY2FzZSAnc2V0UmF5Y2FzdFZlaGljbGVCcmFrZSc6CiAgICAgICAgewogICAgICAgICAgY29uc3QgW2JyYWtlLCB3aGVlbEluZGV4XSA9IGRhdGEucHJvcHM7CiAgICAgICAgICBzdGF0ZS52ZWhpY2xlc1tkYXRhLnV1aWRdLnZlaGljbGUuc2V0QnJha2UoYnJha2UsIHdoZWVsSW5kZXgpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICBjYXNlICdhZGRDb250YWN0TWF0ZXJpYWwnOgogICAgICAgIHsKICAgICAgICAgIGFkZENvbnRhY3RNYXRlcmlhbChzdGF0ZS53b3JsZCwgY3JlYXRlTWF0ZXJpYWwsIGRhdGEucHJvcHMsIGRhdGEudXVpZCk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIGNhc2UgJ3JlbW92ZUNvbnRhY3RNYXRlcmlhbCc6CiAgICAgICAgewogICAgICAgICAgcmVtb3ZlQ29udGFjdE1hdGVyaWFsKHN0YXRlLndvcmxkLCBkYXRhLnV1aWQpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICBjYXNlICd3YWtlVXAnOgogICAgICAgIHsKICAgICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLndha2VVcCgpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICBjYXNlICdzbGVlcCc6CiAgICAgICAgewogICAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0uc2xlZXAoKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgIH0KICB9OwoKfSkoKTsKCg==",null,!1),LT=function(e){kc(n,e);var t=Vc(n);function n(e){var i;ka(this,n);var r=e.allowSleep,a=void 0!==r&&r,o=e.axisIndex,s=void 0===o?0:o,l=e.broadphase,c=void 0===l?"Naive":l,u=e.defaultContactMaterial,g=void 0===u?{contactEquationStiffness:1e6}:u,d=e.frictionGravity,h=void 0===d?null:d,f=e.gravity,p=void 0===f?[0,-9.81,0]:f,I=e.iterations,C=void 0===I?5:I,m=e.quatNormalizeFast,v=void 0!==m&&m,A=e.quatNormalizeSkip,b=void 0===A?0:A,y=e.size,G=void 0===y?1e3:y,w=e.solver,B=void 0===w?"GS":w,x=e.tolerance,S=void 0===x?.001:x;return ke(Ye(i=t.call(this)),"messageQueue",[]),ke(Ye(i),"worker",null),i.config={allowSleep:a,axisIndex:s,broadphase:c,defaultContactMaterial:g,frictionGravity:h,gravity:p,iterations:C,quatNormalizeFast:v,quatNormalizeSkip:b,size:G,solver:B,tolerance:S},i.buffers={positions:new Float32Array(3*G),quaternions:new Float32Array(4*G)},i}return Xe(n,[{key:"axisIndex",get:function(){return this.config.axisIndex},set:function(e){this.config.axisIndex=e,this.postMessage({op:"setAxisIndex",props:e})}},{key:"broadphase",get:function(){return this.config.broadphase},set:function(e){this.config.broadphase=e,this.postMessage({op:"setBroadphase",props:e})}},{key:"frictionGravity",get:function(){return this.config.frictionGravity},set:function(e){this.config.frictionGravity=e,this.postMessage({op:"setFrictionGravity",props:e})}},{key:"gravity",get:function(){return this.config.gravity},set:function(e){this.config.gravity=e,this.postMessage({op:"setGravity",props:e})}},{key:"iterations",get:function(){return this.config.iterations},set:function(e){this.config.iterations=e,this.postMessage({op:"setIterations",props:e})}},{key:"tolerance",get:function(){return this.config.tolerance},set:function(e){this.config.tolerance=e,this.postMessage({op:"setTolerance",props:e})}},{key:"addBodies",value:function(e){var t=e.props,n=e.type,i=e.uuid;this.postMessage({op:"addBodies",props:t,type:n,uuid:i})}},{key:"addConstraint",value:function(e){var t=c(e.props,3),n=t[0],i=t[1],r=t[2],a=e.type,o=e.uuid;this.postMessage({op:"addConstraint",props:[n,i,r],type:a,uuid:o})}},{key:"addContactMaterial",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"addContactMaterial",props:t,uuid:n})}},{key:"addRay",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"addRay",props:t,uuid:n})}},{key:"addRaycastVehicle",value:function(e){var t=c(e.props,6),n=t[0],i=t[1],r=t[2],a=t[3],o=t[4],s=t[5],l=e.uuid;this.postMessage({op:"addRaycastVehicle",props:[n,i,r,a,o,s],uuid:l})}},{key:"addSpring",value:function(e){var t=c(e.props,3),n=t[0],i=t[1],r=t[2],a=e.uuid;this.postMessage({op:"addSpring",props:[n,i,r],uuid:a})}},{key:"applyForce",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"applyForce",props:t,uuid:n})}},{key:"applyImpulse",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"applyImpulse",props:t,uuid:n})}},{key:"applyLocalForce",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"applyLocalForce",props:t,uuid:n})}},{key:"applyLocalImpulse",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"applyLocalImpulse",props:t,uuid:n})}},{key:"applyRaycastVehicleEngineForce",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"applyRaycastVehicleEngineForce",props:t,uuid:n})}},{key:"applyTorque",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"applyTorque",props:t,uuid:n})}},{key:"connect",value:function(){var e=this;this.worker=new zT,this.worker.onmessage=function(t){if("frame"===t.data.op)return e.buffers.positions=t.data.positions,e.buffers.quaternions=t.data.quaternions,void e.emit(t.data.op,t.data);e.emit(t.data.type,t.data)};var t,n=Fc(this.messageQueue);try{for(n.s();!(t=n.n()).done;){var i=t.value;this.worker.postMessage(i)}}catch(r){n.e(r)}finally{n.f()}this.messageQueue.length=0}},{key:"disableConstraint",value:function(e){var t=e.uuid;this.postMessage({op:"disableConstraint",uuid:t})}},{key:"disableConstraintMotor",value:function(e){var t=e.uuid;this.postMessage({op:"disableConstraintMotor",uuid:t})}},{key:"disconnect",value:function(){this.worker&&(this.worker.onmessage=null)}},{key:"enableConstraint",value:function(e){var t=e.uuid;this.postMessage({op:"enableConstraint",uuid:t})}},{key:"enableConstraintMotor",value:function(e){var t=e.uuid;this.postMessage({op:"enableConstraintMotor",uuid:t})}},{key:"init",value:function(){var e=this.config,t=e.allowSleep,n=e.axisIndex,i=e.broadphase,r=e.defaultContactMaterial,a=e.frictionGravity,o=e.gravity,s=e.iterations,l=e.quatNormalizeFast,c=e.quatNormalizeSkip,u=e.solver,g=e.tolerance;this.postMessage({op:"init",props:{allowSleep:t,axisIndex:n,broadphase:i,defaultContactMaterial:r,frictionGravity:a,gravity:o,iterations:s,quatNormalizeFast:l,quatNormalizeSkip:c,solver:u,tolerance:g}})}},{key:"removeBodies",value:function(e){var t=e.uuid;this.postMessage({op:"removeBodies",uuid:t})}},{key:"removeConstraint",value:function(e){var t=e.uuid;this.postMessage({op:"removeConstraint",uuid:t})}},{key:"removeContactMaterial",value:function(e){var t=e.uuid;this.postMessage({op:"removeContactMaterial",uuid:t})}},{key:"removeRay",value:function(e){var t=e.uuid;this.postMessage({op:"removeRay",uuid:t})}},{key:"removeRaycastVehicle",value:function(e){var t=e.uuid;this.postMessage({op:"removeRaycastVehicle",uuid:t})}},{key:"removeSpring",value:function(e){var t=e.uuid;this.postMessage({op:"removeSpring",uuid:t})}},{key:"setAllowSleep",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setAllowSleep",props:t,uuid:n})}},{key:"setAngularDamping",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setAngularDamping",props:t,uuid:n})}},{key:"setAngularFactor",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setAngularFactor",props:t,uuid:n})}},{key:"setAngularVelocity",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setAngularVelocity",props:t,uuid:n})}},{key:"setCollisionFilterGroup",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setCollisionFilterGroup",props:t,uuid:n})}},{key:"setCollisionFilterMask",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setCollisionFilterMask",props:t,uuid:n})}},{key:"setCollisionResponse",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setCollisionResponse",props:t,uuid:n})}},{key:"setConstraintMotorMaxForce",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setConstraintMotorMaxForce",props:t,uuid:n})}},{key:"setConstraintMotorSpeed",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setConstraintMotorSpeed",props:t,uuid:n})}},{key:"setFixedRotation",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setFixedRotation",props:t,uuid:n})}},{key:"setIsTrigger",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setIsTrigger",props:t,uuid:n})}},{key:"setLinearDamping",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setLinearDamping",props:t,uuid:n})}},{key:"setLinearFactor",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setLinearFactor",props:t,uuid:n})}},{key:"setMass",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setMass",props:t,uuid:n})}},{key:"setMaterial",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setMaterial",props:t,uuid:n})}},{key:"setPosition",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setPosition",props:t,uuid:n})}},{key:"setQuaternion",value:function(e){var t=c(e.props,4),n=t[0],i=t[1],r=t[2],a=t[3],o=e.uuid;this.postMessage({op:"setQuaternion",props:[n,i,r,a],uuid:o})}},{key:"setRaycastVehicleBrake",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setRaycastVehicleBrake",props:t,uuid:n})}},{key:"setRaycastVehicleSteeringValue",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setRaycastVehicleSteeringValue",props:t,uuid:n})}},{key:"setRotation",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setRotation",props:t,uuid:n})}},{key:"setSleepSpeedLimit",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setSleepSpeedLimit",props:t,uuid:n})}},{key:"setSleepTimeLimit",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setSleepTimeLimit",props:t,uuid:n})}},{key:"setSpringDamping",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setSpringDamping",props:t,uuid:n})}},{key:"setSpringRestLength",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setSpringRestLength",props:t,uuid:n})}},{key:"setSpringStiffness",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setSpringStiffness",props:t,uuid:n})}},{key:"setUserData",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setUserData",props:t,uuid:n})}},{key:"setVelocity",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setVelocity",props:t,uuid:n})}},{key:"sleep",value:function(e){var t=e.uuid;this.postMessage({op:"sleep",uuid:t})}},{key:"step",value:function(e){var t,n=this.buffers,i=n.positions,r=n.quaternions;(i.byteLength||r.byteLength)&&(null==(t=this.worker)||t.postMessage({op:"step",positions:i,props:e,quaternions:r},[i.buffer,r.buffer]))}},{key:"subscribe",value:function(e){var t=e.props,n=t.id,i=t.target,r=t.type,a=e.uuid;this.postMessage({op:"subscribe",props:{id:n,target:i,type:r},uuid:a})}},{key:"terminate",value:function(){var e;null==(e=this.worker)||e.terminate(),this.worker=null}},{key:"unsubscribe",value:function(e){var t=e.props;this.postMessage({op:"unsubscribe",props:t})}},{key:"wakeUp",value:function(e){var t=e.uuid;this.postMessage({op:"wakeUp",uuid:t})}},{key:"postMessage",value:function(e){if(this.worker)return this.worker.postMessage(e);this.messageQueue.push(e)}}]),n}(YT),KT=function(){function e(t){ka(this,e),void 0===t&&(t=[0,0,0,0,0,0,0,0,0]),this.elements=t}return Xe(e,[{key:"identity",value:function(){var e=this.elements;e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1}},{key:"setZero",value:function(){var e=this.elements;e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e[8]=0}},{key:"setTrace",value:function(e){var t=this.elements;t[0]=e.x,t[4]=e.y,t[8]=e.z}},{key:"getTrace",value:function(e){void 0===e&&(e=new PT);var t=this.elements;return e.x=t[0],e.y=t[4],e.z=t[8],e}},{key:"vmult",value:function(e,t){void 0===t&&(t=new PT);var n=this.elements,i=e.x,r=e.y,a=e.z;return t.x=n[0]*i+n[1]*r+n[2]*a,t.y=n[3]*i+n[4]*r+n[5]*a,t.z=n[6]*i+n[7]*r+n[8]*a,t}},{key:"smult",value:function(e){for(var t=0;t<this.elements.length;t++)this.elements[t]*=e}},{key:"mmult",value:function(t,n){void 0===n&&(n=new e);var i=this.elements,r=t.elements,a=n.elements,o=i[0],s=i[1],l=i[2],c=i[3],u=i[4],g=i[5],d=i[6],h=i[7],f=i[8],p=r[0],I=r[1],C=r[2],m=r[3],v=r[4],A=r[5],b=r[6],y=r[7],G=r[8];return a[0]=o*p+s*m+l*b,a[1]=o*I+s*v+l*y,a[2]=o*C+s*A+l*G,a[3]=c*p+u*m+g*b,a[4]=c*I+u*v+g*y,a[5]=c*C+u*A+g*G,a[6]=d*p+h*m+f*b,a[7]=d*I+h*v+f*y,a[8]=d*C+h*A+f*G,n}},{key:"scale",value:function(t,n){void 0===n&&(n=new e);for(var i=this.elements,r=n.elements,a=0;3!==a;a++)r[3*a+0]=t.x*i[3*a+0],r[3*a+1]=t.y*i[3*a+1],r[3*a+2]=t.z*i[3*a+2];return n}},{key:"solve",value:function(e,t){void 0===t&&(t=new PT);var n,i,r=[];for(n=0;n<12;n++)r.push(0);for(n=0;n<3;n++)for(i=0;i<3;i++)r[n+4*i]=this.elements[n+3*i];r[3]=e.x,r[7]=e.y,r[11]=e.z;var a,o,s=3,l=s;do{if(0===r[(n=l-s)+4*n])for(i=n+1;i<l;i++)if(0!==r[n+4*i]){a=4;do{r[(o=4-a)+4*n]+=r[o+4*i]}while(--a);break}if(0!==r[n+4*n])for(i=n+1;i<l;i++){var c=r[n+4*i]/r[n+4*n];a=4;do{r[(o=4-a)+4*i]=o<=n?0:r[o+4*i]-r[o+4*n]*c}while(--a)}}while(--s);if(t.z=r[11]/r[10],t.y=(r[7]-r[6]*t.z)/r[5],t.x=(r[3]-r[2]*t.z-r[1]*t.y)/r[0],isNaN(t.x)||isNaN(t.y)||isNaN(t.z)||t.x===1/0||t.y===1/0||t.z===1/0)throw"Could not solve equation! Got x=[".concat(t.toString(),"], b=[").concat(e.toString(),"], A=[").concat(this.toString(),"]");return t}},{key:"e",value:function(e,t,n){if(void 0===n)return this.elements[t+3*e];this.elements[t+3*e]=n}},{key:"copy",value:function(e){for(var t=0;t<e.elements.length;t++)this.elements[t]=e.elements[t];return this}},{key:"toString",value:function(){for(var e="",t=0;t<9;t++)e+=this.elements[t]+",";return e}},{key:"reverse",value:function(t){void 0===t&&(t=new e);var n,i,r=_T;for(n=0;n<3;n++)for(i=0;i<3;i++)r[n+6*i]=this.elements[n+3*i];r[3]=1,r[9]=0,r[15]=0,r[4]=0,r[10]=1,r[16]=0,r[5]=0,r[11]=0,r[17]=1;var a,o,s=3,l=s;do{if(0===r[(n=l-s)+6*n])for(i=n+1;i<l;i++)if(0!==r[n+6*i]){a=6;do{r[(o=6-a)+6*n]+=r[o+6*i]}while(--a);break}if(0!==r[n+6*n])for(i=n+1;i<l;i++){var c=r[n+6*i]/r[n+6*n];a=6;do{r[(o=6-a)+6*i]=o<=n?0:r[o+6*i]-r[o+6*n]*c}while(--a)}}while(--s);n=2;do{i=n-1;do{var u=r[n+6*i]/r[n+6*n];a=6;do{r[(o=6-a)+6*i]=r[o+6*i]-r[o+6*n]*u}while(--a)}while(i--)}while(--n);n=2;do{var g=1/r[n+6*n];a=6;do{r[(o=6-a)+6*n]=r[o+6*n]*g}while(--a)}while(n--);n=2;do{i=2;do{if(o=r[3+i+6*n],isNaN(o)||o===1/0)throw"Could not reverse! A=[".concat(this.toString(),"]");t.e(n,i,o)}while(i--)}while(n--);return t}},{key:"setRotationFromQuaternion",value:function(e){var t=e.x,n=e.y,i=e.z,r=e.w,a=t+t,o=n+n,s=i+i,l=t*a,c=t*o,u=t*s,g=n*o,d=n*s,h=i*s,f=r*a,p=r*o,I=r*s,C=this.elements;return C[0]=1-(g+h),C[1]=c-I,C[2]=u+p,C[3]=c+I,C[4]=1-(l+h),C[5]=d-f,C[6]=u-p,C[7]=d+f,C[8]=1-(l+g),this}},{key:"transpose",value:function(t){void 0===t&&(t=new e);var n,i=this.elements,r=t.elements;return r[0]=i[0],r[4]=i[4],r[8]=i[8],n=i[1],r[1]=i[3],r[3]=n,n=i[2],r[2]=i[6],r[6]=n,n=i[5],r[5]=i[7],r[7]=n,t}}]),e}(),_T=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],PT=function(){function e(t,n,i){ka(this,e),void 0===t&&(t=0),void 0===n&&(n=0),void 0===i&&(i=0),this.x=t,this.y=n,this.z=i}return Xe(e,[{key:"cross",value:function(t,n){void 0===n&&(n=new e);var i=t.x,r=t.y,a=t.z,o=this.x,s=this.y,l=this.z;return n.x=s*a-l*r,n.y=l*i-o*a,n.z=o*r-s*i,n}},{key:"set",value:function(e,t,n){return this.x=e,this.y=t,this.z=n,this}},{key:"setZero",value:function(){this.x=this.y=this.z=0}},{key:"vadd",value:function(t,n){if(!n)return new e(this.x+t.x,this.y+t.y,this.z+t.z);n.x=t.x+this.x,n.y=t.y+this.y,n.z=t.z+this.z}},{key:"vsub",value:function(t,n){if(!n)return new e(this.x-t.x,this.y-t.y,this.z-t.z);n.x=this.x-t.x,n.y=this.y-t.y,n.z=this.z-t.z}},{key:"crossmat",value:function(){return new KT([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])}},{key:"normalize",value:function(){var e=this.x,t=this.y,n=this.z,i=Math.sqrt(e*e+t*t+n*n);if(i>0){var r=1/i;this.x*=r,this.y*=r,this.z*=r}else this.x=0,this.y=0,this.z=0;return i}},{key:"unit",value:function(t){void 0===t&&(t=new e);var n=this.x,i=this.y,r=this.z,a=Math.sqrt(n*n+i*i+r*r);return a>0?(a=1/a,t.x=n*a,t.y=i*a,t.z=r*a):(t.x=1,t.y=0,t.z=0),t}},{key:"length",value:function(){var e=this.x,t=this.y,n=this.z;return Math.sqrt(e*e+t*t+n*n)}},{key:"lengthSquared",value:function(){return this.dot(this)}},{key:"distanceTo",value:function(e){var t=this.x,n=this.y,i=this.z,r=e.x,a=e.y,o=e.z;return Math.sqrt((r-t)*(r-t)+(a-n)*(a-n)+(o-i)*(o-i))}},{key:"distanceSquared",value:function(e){var t=this.x,n=this.y,i=this.z,r=e.x,a=e.y,o=e.z;return(r-t)*(r-t)+(a-n)*(a-n)+(o-i)*(o-i)}},{key:"scale",value:function(t,n){void 0===n&&(n=new e);var i=this.x,r=this.y,a=this.z;return n.x=t*i,n.y=t*r,n.z=t*a,n}},{key:"vmul",value:function(t,n){return void 0===n&&(n=new e),n.x=t.x*this.x,n.y=t.y*this.y,n.z=t.z*this.z,n}},{key:"addScaledVector",value:function(t,n,i){return void 0===i&&(i=new e),i.x=this.x+t*n.x,i.y=this.y+t*n.y,i.z=this.z+t*n.z,i}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"isZero",value:function(){return 0===this.x&&0===this.y&&0===this.z}},{key:"negate",value:function(t){return void 0===t&&(t=new e),t.x=-this.x,t.y=-this.y,t.z=-this.z,t}},{key:"tangents",value:function(e,t){var n=this.length();if(n>0){var i=DT,r=1/n;i.set(this.x*r,this.y*r,this.z*r);var a=OT;Math.abs(i.x)<.9?(a.set(1,0,0),i.cross(a,e)):(a.set(0,1,0),i.cross(a,e)),i.cross(e,t)}else e.set(1,0,0),t.set(0,1,0)}},{key:"toString",value:function(){return"".concat(this.x,",").concat(this.y,",").concat(this.z)}},{key:"toArray",value:function(){return[this.x,this.y,this.z]}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"lerp",value:function(e,t,n){var i=this.x,r=this.y,a=this.z;n.x=i+(e.x-i)*t,n.y=r+(e.y-r)*t,n.z=a+(e.z-a)*t}},{key:"almostEquals",value:function(e,t){return void 0===t&&(t=1e-6),!(Math.abs(this.x-e.x)>t||Math.abs(this.y-e.y)>t||Math.abs(this.z-e.z)>t)}},{key:"almostZero",value:function(e){return void 0===e&&(e=1e-6),!(Math.abs(this.x)>e||Math.abs(this.y)>e||Math.abs(this.z)>e)}},{key:"isAntiparallelTo",value:function(e,t){return this.negate(UT),UT.almostEquals(e,t)}},{key:"clone",value:function(){return new e(this.x,this.y,this.z)}}]),e}();PT.ZERO=new PT(0,0,0),PT.UNIT_X=new PT(1,0,0),PT.UNIT_Y=new PT(0,1,0),PT.UNIT_Z=new PT(0,0,1);var DT=new PT,OT=new PT,UT=new PT,jT=function(){function e(t){ka(this,e),void 0===t&&(t={}),this.lowerBound=new PT,this.upperBound=new PT,t.lowerBound&&this.lowerBound.copy(t.lowerBound),t.upperBound&&this.upperBound.copy(t.upperBound)}return Xe(e,[{key:"setFromPoints",value:function(e,t,n,i){var r=this.lowerBound,a=this.upperBound,o=n;r.copy(e[0]),o&&o.vmult(r,r),a.copy(r);for(var s=1;s<e.length;s++){var l=e[s];o&&(o.vmult(l,JT),l=JT),l.x>a.x&&(a.x=l.x),l.x<r.x&&(r.x=l.x),l.y>a.y&&(a.y=l.y),l.y<r.y&&(r.y=l.y),l.z>a.z&&(a.z=l.z),l.z<r.z&&(r.z=l.z)}return t&&(t.vadd(r,r),t.vadd(a,a)),i&&(r.x-=i,r.y-=i,r.z-=i,a.x+=i,a.y+=i,a.z+=i),this}},{key:"copy",value:function(e){return this.lowerBound.copy(e.lowerBound),this.upperBound.copy(e.upperBound),this}},{key:"clone",value:function(){return(new e).copy(this)}},{key:"extend",value:function(e){this.lowerBound.x=Math.min(this.lowerBound.x,e.lowerBound.x),this.upperBound.x=Math.max(this.upperBound.x,e.upperBound.x),this.lowerBound.y=Math.min(this.lowerBound.y,e.lowerBound.y),this.upperBound.y=Math.max(this.upperBound.y,e.upperBound.y),this.lowerBound.z=Math.min(this.lowerBound.z,e.lowerBound.z),this.upperBound.z=Math.max(this.upperBound.z,e.upperBound.z)}},{key:"overlaps",value:function(e){var t=this.lowerBound,n=this.upperBound,i=e.lowerBound,r=e.upperBound,a=i.x<=n.x&&n.x<=r.x||t.x<=r.x&&r.x<=n.x,o=i.y<=n.y&&n.y<=r.y||t.y<=r.y&&r.y<=n.y,s=i.z<=n.z&&n.z<=r.z||t.z<=r.z&&r.z<=n.z;return a&&o&&s}},{key:"volume",value:function(){var e=this.lowerBound,t=this.upperBound;return(t.x-e.x)*(t.y-e.y)*(t.z-e.z)}},{key:"contains",value:function(e){var t=this.lowerBound,n=this.upperBound,i=e.lowerBound,r=e.upperBound;return t.x<=i.x&&n.x>=r.x&&t.y<=i.y&&n.y>=r.y&&t.z<=i.z&&n.z>=r.z}},{key:"getCorners",value:function(e,t,n,i,r,a,o,s){var l=this.lowerBound,c=this.upperBound;e.copy(l),t.set(c.x,l.y,l.z),n.set(c.x,c.y,l.z),i.set(l.x,c.y,c.z),r.set(c.x,l.y,c.z),a.set(l.x,c.y,l.z),o.set(l.x,l.y,c.z),s.copy(c)}},{key:"toLocalFrame",value:function(e,t){var n=QT,i=n[0],r=n[1],a=n[2],o=n[3],s=n[4],l=n[5],c=n[6],u=n[7];this.getCorners(i,r,a,o,s,l,c,u);for(var g=0;8!==g;g++){var d=n[g];e.pointToLocal(d,d)}return t.setFromPoints(n)}},{key:"toWorldFrame",value:function(e,t){var n=QT,i=n[0],r=n[1],a=n[2],o=n[3],s=n[4],l=n[5],c=n[6],u=n[7];this.getCorners(i,r,a,o,s,l,c,u);for(var g=0;8!==g;g++){var d=n[g];e.pointToWorld(d,d)}return t.setFromPoints(n)}},{key:"overlapsRay",value:function(e){var t=e.direction,n=e.from,i=1/t.x,r=1/t.y,a=1/t.z,o=(this.lowerBound.x-n.x)*i,s=(this.upperBound.x-n.x)*i,l=(this.lowerBound.y-n.y)*r,c=(this.upperBound.y-n.y)*r,u=(this.lowerBound.z-n.z)*a,g=(this.upperBound.z-n.z)*a,d=Math.max(Math.max(Math.min(o,s),Math.min(l,c)),Math.min(u,g)),h=Math.min(Math.min(Math.max(o,s),Math.max(l,c)),Math.max(u,g));return!(h<0)&&!(d>h)}}]),e}(),JT=new PT,QT=[new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT],qT=function(){function e(){ka(this,e)}return Xe(e,[{key:"addEventListener",value:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;return void 0===n[e]&&(n[e]=[]),n[e].includes(t)||n[e].push(t),this}},{key:"hasEventListener",value:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return!(void 0===n[e]||!n[e].includes(t))}},{key:"hasAnyEventListener",value:function(e){return void 0!==this._listeners&&void 0!==this._listeners[e]}},{key:"removeEventListener",value:function(e,t){if(void 0===this._listeners)return this;var n=this._listeners;if(void 0===n[e])return this;var i=n[e].indexOf(t);return-1!==i&&n[e].splice(i,1),this}},{key:"dispatchEvent",value:function(e){if(void 0===this._listeners)return this;var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=0,i=t.length;n<i;n++)t[n].call(this,e)}return this}}]),e}(),$T=function(){function e(t,n,i,r){ka(this,e),void 0===t&&(t=0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=1),this.x=t,this.y=n,this.z=i,this.w=r}return Xe(e,[{key:"set",value:function(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}},{key:"toString",value:function(){return"".concat(this.x,",").concat(this.y,",").concat(this.z,",").concat(this.w)}},{key:"toArray",value:function(){return[this.x,this.y,this.z,this.w]}},{key:"setFromAxisAngle",value:function(e,t){var n=Math.sin(.5*t);return this.x=e.x*n,this.y=e.y*n,this.z=e.z*n,this.w=Math.cos(.5*t),this}},{key:"toAxisAngle",value:function(e){void 0===e&&(e=new PT),this.normalize();var t=2*Math.acos(this.w),n=Math.sqrt(1-this.w*this.w);return n<.001?(e.x=this.x,e.y=this.y,e.z=this.z):(e.x=this.x/n,e.y=this.y/n,e.z=this.z/n),[e,t]}},{key:"setFromVectors",value:function(e,t){if(e.isAntiparallelTo(t)){var n=eX,i=tX;e.tangents(n,i),this.setFromAxisAngle(n,Math.PI)}else{var r=e.cross(t);this.x=r.x,this.y=r.y,this.z=r.z,this.w=Math.sqrt(Math.pow(e.length(),2)*Math.pow(t.length(),2))+e.dot(t),this.normalize()}return this}},{key:"mult",value:function(t,n){void 0===n&&(n=new e);var i=this.x,r=this.y,a=this.z,o=this.w,s=t.x,l=t.y,c=t.z,u=t.w;return n.x=i*u+o*s+r*c-a*l,n.y=r*u+o*l+a*s-i*c,n.z=a*u+o*c+i*l-r*s,n.w=o*u-i*s-r*l-a*c,n}},{key:"inverse",value:function(t){void 0===t&&(t=new e);var n=this.x,i=this.y,r=this.z,a=this.w;this.conjugate(t);var o=1/(n*n+i*i+r*r+a*a);return t.x*=o,t.y*=o,t.z*=o,t.w*=o,t}},{key:"conjugate",value:function(t){return void 0===t&&(t=new e),t.x=-this.x,t.y=-this.y,t.z=-this.z,t.w=this.w,t}},{key:"normalize",value:function(){var e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(e=1/e,this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}},{key:"normalizeFast",value:function(){var e=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}},{key:"vmult",value:function(e,t){void 0===t&&(t=new PT);var n=e.x,i=e.y,r=e.z,a=this.x,o=this.y,s=this.z,l=this.w,c=l*n+o*r-s*i,u=l*i+s*n-a*r,g=l*r+a*i-o*n,d=-a*n-o*i-s*r;return t.x=c*l+d*-a+u*-s-g*-o,t.y=u*l+d*-o+g*-a-c*-s,t.z=g*l+d*-s+c*-o-u*-a,t}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this}},{key:"toEuler",value:function(e,t){var n,i,r;void 0===t&&(t="YZX");var a=this.x,o=this.y,s=this.z,l=this.w;if("YZX"!==t)throw new Error("Euler order ".concat(t," not supported yet."));var c=a*o+s*l;if(c>.499&&(n=2*Math.atan2(a,l),i=Math.PI/2,r=0),c<-.499&&(n=-2*Math.atan2(a,l),i=-Math.PI/2,r=0),void 0===n){var u=a*a,g=o*o,d=s*s;n=Math.atan2(2*o*l-2*a*s,1-2*g-2*d),i=Math.asin(2*c),r=Math.atan2(2*a*l-2*o*s,1-2*u-2*d)}e.y=n,e.z=i,e.x=r}},{key:"setFromEuler",value:function(e,t,n,i){void 0===i&&(i="XYZ");var r=Math.cos(e/2),a=Math.cos(t/2),o=Math.cos(n/2),s=Math.sin(e/2),l=Math.sin(t/2),c=Math.sin(n/2);return"XYZ"===i?(this.x=s*a*o+r*l*c,this.y=r*l*o-s*a*c,this.z=r*a*c+s*l*o,this.w=r*a*o-s*l*c):"YXZ"===i?(this.x=s*a*o+r*l*c,this.y=r*l*o-s*a*c,this.z=r*a*c-s*l*o,this.w=r*a*o+s*l*c):"ZXY"===i?(this.x=s*a*o-r*l*c,this.y=r*l*o+s*a*c,this.z=r*a*c+s*l*o,this.w=r*a*o-s*l*c):"ZYX"===i?(this.x=s*a*o-r*l*c,this.y=r*l*o+s*a*c,this.z=r*a*c-s*l*o,this.w=r*a*o+s*l*c):"YZX"===i?(this.x=s*a*o+r*l*c,this.y=r*l*o+s*a*c,this.z=r*a*c-s*l*o,this.w=r*a*o-s*l*c):"XZY"===i&&(this.x=s*a*o-r*l*c,this.y=r*l*o-s*a*c,this.z=r*a*c+s*l*o,this.w=r*a*o+s*l*c),this}},{key:"clone",value:function(){return new e(this.x,this.y,this.z,this.w)}},{key:"slerp",value:function(t,n,i){void 0===i&&(i=new e);var r,a,o,s,l,c=this.x,u=this.y,g=this.z,d=this.w,h=t.x,f=t.y,p=t.z,I=t.w;return(a=c*h+u*f+g*p+d*I)<0&&(a=-a,h=-h,f=-f,p=-p,I=-I),1-a>1e-6?(r=Math.acos(a),o=Math.sin(r),s=Math.sin((1-n)*r)/o,l=Math.sin(n*r)/o):(s=1-n,l=n),i.x=s*c+l*h,i.y=s*u+l*f,i.z=s*g+l*p,i.w=s*d+l*I,i}},{key:"integrate",value:function(t,n,i,r){void 0===r&&(r=new e);var a=t.x*i.x,o=t.y*i.y,s=t.z*i.z,l=this.x,c=this.y,u=this.z,g=this.w,d=.5*n;return r.x+=d*(a*g+o*u-s*c),r.y+=d*(o*g+s*l-a*u),r.z+=d*(s*g+a*c-o*l),r.w+=d*(-a*l-o*c-s*u),r}}]),e}(),eX=new PT,tX=new PT,nX=function(){function e(t){ka(this,e),void 0===t&&(t={}),this.id=e.idCounter++,this.type=t.type||0,this.boundingSphereRadius=0,this.collisionResponse=!t.collisionResponse||t.collisionResponse,this.collisionFilterGroup=void 0!==t.collisionFilterGroup?t.collisionFilterGroup:1,this.collisionFilterMask=void 0!==t.collisionFilterMask?t.collisionFilterMask:-1,this.material=t.material?t.material:null,this.body=null}return Xe(e,[{key:"updateBoundingSphereRadius",value:function(){throw"computeBoundingSphereRadius() not implemented for shape type ".concat(this.type)}},{key:"volume",value:function(){throw"volume() not implemented for shape type ".concat(this.type)}},{key:"calculateLocalInertia",value:function(e,t){throw"calculateLocalInertia() not implemented for shape type ".concat(this.type)}},{key:"calculateWorldAABB",value:function(e,t,n,i){throw"calculateWorldAABB() not implemented for shape type ".concat(this.type)}}]),e}();nX.idCounter=0,nX.types={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256};var iX=function(){function e(t){ka(this,e),void 0===t&&(t={}),this.position=new PT,this.quaternion=new $T,t.position&&this.position.copy(t.position),t.quaternion&&this.quaternion.copy(t.quaternion)}return Xe(e,[{key:"pointToLocal",value:function(t,n){return e.pointToLocalFrame(this.position,this.quaternion,t,n)}},{key:"pointToWorld",value:function(t,n){return e.pointToWorldFrame(this.position,this.quaternion,t,n)}},{key:"vectorToWorldFrame",value:function(e,t){return void 0===t&&(t=new PT),this.quaternion.vmult(e,t),t}}],[{key:"pointToLocalFrame",value:function(e,t,n,i){return void 0===i&&(i=new PT),n.vsub(e,i),t.conjugate(rX),rX.vmult(i,i),i}},{key:"pointToWorldFrame",value:function(e,t,n,i){return void 0===i&&(i=new PT),t.vmult(n,i),i.vadd(e,i),i}},{key:"vectorToWorldFrame",value:function(e,t,n){return void 0===n&&(n=new PT),e.vmult(t,n),n}},{key:"vectorToLocalFrame",value:function(e,t,n,i){return void 0===i&&(i=new PT),t.w*=-1,t.vmult(n,i),t.w*=-1,i}}]),e}(),rX=new $T,aX=function(e){kc(n,e);var t=Vc(n);function n(e){var i;ka(this,n),void 0===e&&(e={});var r=e,a=r.vertices,o=void 0===a?[]:a,s=r.faces,l=void 0===s?[]:s,c=r.normals,u=void 0===c?[]:c,g=r.axes,d=r.boundingSphereRadius;return(i=t.call(this,{type:nX.types.CONVEXPOLYHEDRON})).vertices=o,i.faces=l,i.faceNormals=u,0===i.faceNormals.length&&i.computeNormals(),d?i.boundingSphereRadius=d:i.updateBoundingSphereRadius(),i.worldVertices=[],i.worldVerticesNeedsUpdate=!0,i.worldFaceNormals=[],i.worldFaceNormalsNeedsUpdate=!0,i.uniqueAxes=g?g.slice():null,i.uniqueEdges=[],i.computeEdges(),i}return Xe(n,[{key:"computeEdges",value:function(){var e=this.faces,t=this.vertices,n=this.uniqueEdges;n.length=0;for(var i=new PT,r=0;r!==e.length;r++)for(var a=e[r],o=a.length,s=0;s!==o;s++){var l=(s+1)%o;t[a[s]].vsub(t[a[l]],i),i.normalize();for(var c=!1,u=0;u!==n.length;u++)if(n[u].almostEquals(i)||n[u].almostEquals(i)){c=!0;break}c||n.push(i.clone())}}},{key:"computeNormals",value:function(){this.faceNormals.length=this.faces.length;for(var e=0;e<this.faces.length;e++){for(var t=0;t<this.faces[e].length;t++)if(!this.vertices[this.faces[e][t]])throw new Error("Vertex ".concat(this.faces[e][t]," not found!"));var n=this.faceNormals[e]||new PT;this.getFaceNormal(e,n),n.negate(n),this.faceNormals[e]=n;var i=this.vertices[this.faces[e][0]];if(n.dot(i)<0){console.error(".faceNormals[".concat(e,"] = Vec3(").concat(n.toString(),") looks like it points into the shape? The vertices follow. Make sure they are ordered CCW around the normal, using the right hand rule."));for(var r=0;r<this.faces[e].length;r++)console.warn(".vertices[".concat(this.faces[e][r],"] = Vec3(").concat(this.vertices[this.faces[e][r]].toString(),")"))}}}},{key:"getFaceNormal",value:function(e,t){var i=this.faces[e],r=this.vertices[i[0]],a=this.vertices[i[1]],o=this.vertices[i[2]];n.computeNormal(r,a,o,t)}},{key:"clipAgainstHull",value:function(e,t,n,i,r,a,o,s,l){for(var c=new PT,u=-1,g=-Number.MAX_VALUE,d=0;d<n.faces.length;d++){c.copy(n.faceNormals[d]),r.vmult(c,c);var h=c.dot(a);h>g&&(g=h,u=d)}for(var f=[],p=0;p<n.faces[u].length;p++){var I=n.vertices[n.faces[u][p]],C=new PT;C.copy(I),r.vmult(C,C),i.vadd(C,C),f.push(C)}u>=0&&this.clipFaceAgainstHull(a,e,t,f,o,s,l)}},{key:"findSeparatingAxis",value:function(e,t,n,i,r,a,o,s){var l=new PT,c=new PT,u=new PT,g=new PT,d=new PT,h=new PT,f=Number.MAX_VALUE,p=this;if(p.uniqueAxes)for(var I=0;I!==p.uniqueAxes.length;I++){n.vmult(p.uniqueAxes[I],l);var C=p.testSepAxis(l,e,t,n,i,r);if(!1===C)return!1;C<f&&(f=C,a.copy(l))}else for(var m=o?o.length:p.faces.length,v=0;v<m;v++){var A=o?o[v]:v;l.copy(p.faceNormals[A]),n.vmult(l,l);var b=p.testSepAxis(l,e,t,n,i,r);if(!1===b)return!1;b<f&&(f=b,a.copy(l))}if(e.uniqueAxes)for(var y=0;y!==e.uniqueAxes.length;y++){r.vmult(e.uniqueAxes[y],c);var G=p.testSepAxis(c,e,t,n,i,r);if(!1===G)return!1;G<f&&(f=G,a.copy(c))}else for(var w=s?s.length:e.faces.length,B=0;B<w;B++){var x=s?s[B]:B;c.copy(e.faceNormals[x]),r.vmult(c,c);var S=p.testSepAxis(c,e,t,n,i,r);if(!1===S)return!1;S<f&&(f=S,a.copy(c))}for(var Z=0;Z!==p.uniqueEdges.length;Z++){n.vmult(p.uniqueEdges[Z],g);for(var k=0;k!==e.uniqueEdges.length;k++)if(r.vmult(e.uniqueEdges[k],d),g.cross(d,h),!h.almostZero()){h.normalize();var R=p.testSepAxis(h,e,t,n,i,r);if(!1===R)return!1;R<f&&(f=R,a.copy(h))}}return i.vsub(t,u),u.dot(a)>0&&a.negate(a),!0}},{key:"testSepAxis",value:function(e,t,i,r,a,o){n.project(this,e,i,r,oX),n.project(t,e,a,o,sX);var s=oX[0],l=oX[1],c=sX[0],u=sX[1];if(s<u||c<l)return!1;var g=s-u,d=c-l;return g<d?g:d}},{key:"calculateLocalInertia",value:function(e,t){var n=new PT,i=new PT;this.computeLocalAABB(i,n);var r=n.x-i.x,a=n.y-i.y,o=n.z-i.z;t.x=1/12*e*(2*a*2*a+2*o*2*o),t.y=1/12*e*(2*r*2*r+2*o*2*o),t.z=1/12*e*(2*a*2*a+2*r*2*r)}},{key:"getPlaneConstantOfFace",value:function(e){var t=this.faces[e],n=this.faceNormals[e],i=this.vertices[t[0]];return-n.dot(i)}},{key:"clipFaceAgainstHull",value:function(e,t,n,i,r,a,o){for(var s=new PT,l=new PT,c=new PT,u=new PT,g=new PT,d=new PT,h=new PT,f=new PT,p=this,I=i,C=[],m=-1,v=Number.MAX_VALUE,A=0;A<p.faces.length;A++){s.copy(p.faceNormals[A]),n.vmult(s,s);var b=s.dot(e);b<v&&(v=b,m=A)}if(!(m<0)){var y=p.faces[m];y.connectedFaces=[];for(var G=0;G<p.faces.length;G++)for(var w=0;w<p.faces[G].length;w++)-1!==y.indexOf(p.faces[G][w])&&G!==m&&-1===y.connectedFaces.indexOf(G)&&y.connectedFaces.push(G);for(var B=y.length,x=0;x<B;x++){var S=p.vertices[y[x]],Z=p.vertices[y[(x+1)%B]];S.vsub(Z,l),c.copy(l),n.vmult(c,c),t.vadd(c,c),u.copy(this.faceNormals[m]),n.vmult(u,u),t.vadd(u,u),c.cross(u,g),g.negate(g),d.copy(S),n.vmult(d,d),t.vadd(d,d);var k=y.connectedFaces[x];h.copy(this.faceNormals[k]);var R=this.getPlaneConstantOfFace(k);f.copy(h),n.vmult(f,f);var W=R-f.dot(t);for(this.clipFaceAgainstPlane(I,C,f,W);I.length;)I.shift();for(;C.length;)I.push(C.shift())}h.copy(this.faceNormals[m]);var M=this.getPlaneConstantOfFace(m);f.copy(h),n.vmult(f,f);for(var V=M-f.dot(t),F=0;F<I.length;F++){var N=f.dot(I[F])+V;if(N<=r&&(console.log("clamped: depth=".concat(N," to minDist=").concat(r)),N=r),N<=a){var H=I[F];if(N<=1e-6){var T={point:H,normal:f,depth:N};o.push(T)}}}}}},{key:"clipFaceAgainstPlane",value:function(e,t,n,i){var r,a,o=e.length;if(o<2)return t;var s=e[e.length-1],l=e[0];r=n.dot(s)+i;for(var c=0;c<o;c++){if(l=e[c],a=n.dot(l)+i,r<0)if(a<0){var u=new PT;u.copy(l),t.push(u)}else{var g=new PT;s.lerp(l,r/(r-a),g),t.push(g)}else if(a<0){var d=new PT;s.lerp(l,r/(r-a),d),t.push(d),t.push(l)}s=l,r=a}return t}},{key:"computeWorldVertices",value:function(e,t){for(;this.worldVertices.length<this.vertices.length;)this.worldVertices.push(new PT);for(var n=this.vertices,i=this.worldVertices,r=0;r!==this.vertices.length;r++)t.vmult(n[r],i[r]),e.vadd(i[r],i[r]);this.worldVerticesNeedsUpdate=!1}},{key:"computeLocalAABB",value:function(e,t){var n=this.vertices;e.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),t.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(var i=0;i<this.vertices.length;i++){var r=n[i];r.x<e.x?e.x=r.x:r.x>t.x&&(t.x=r.x),r.y<e.y?e.y=r.y:r.y>t.y&&(t.y=r.y),r.z<e.z?e.z=r.z:r.z>t.z&&(t.z=r.z)}}},{key:"computeWorldFaceNormals",value:function(e){for(var t=this.faceNormals.length;this.worldFaceNormals.length<t;)this.worldFaceNormals.push(new PT);for(var n=this.faceNormals,i=this.worldFaceNormals,r=0;r!==t;r++)e.vmult(n[r],i[r]);this.worldFaceNormalsNeedsUpdate=!1}},{key:"updateBoundingSphereRadius",value:function(){for(var e=0,t=this.vertices,n=0;n!==t.length;n++){var i=t[n].lengthSquared();i>e&&(e=i)}this.boundingSphereRadius=Math.sqrt(e)}},{key:"calculateWorldAABB",value:function(e,t,n,i){for(var r,a,o,s,l,c,u=this.vertices,g=new PT,d=0;d<u.length;d++){g.copy(u[d]),t.vmult(g,g),e.vadd(g,g);var h=g;(void 0===r||h.x<r)&&(r=h.x),(void 0===s||h.x>s)&&(s=h.x),(void 0===a||h.y<a)&&(a=h.y),(void 0===l||h.y>l)&&(l=h.y),(void 0===o||h.z<o)&&(o=h.z),(void 0===c||h.z>c)&&(c=h.z)}n.set(r,a,o),i.set(s,l,c)}},{key:"volume",value:function(){return 4*Math.PI*this.boundingSphereRadius/3}},{key:"getAveragePointLocal",value:function(e){void 0===e&&(e=new PT);for(var t=this.vertices,n=0;n<t.length;n++)e.vadd(t[n],e);return e.scale(1/t.length,e),e}},{key:"transformAllPoints",value:function(e,t){var n=this.vertices.length,i=this.vertices;if(t){for(var r=0;r<n;r++){var a=i[r];t.vmult(a,a)}for(var o=0;o<this.faceNormals.length;o++){var s=this.faceNormals[o];t.vmult(s,s)}}if(e)for(var l=0;l<n;l++){var c=i[l];c.vadd(e,c)}}},{key:"pointIsInside",value:function(e){var t=this.vertices,n=this.faces,i=this.faceNormals,r=new PT;this.getAveragePointLocal(r);for(var a=0;a<this.faces.length;a++){var o=i[a],s=t[n[a][0]],l=new PT;e.vsub(s,l);var c=o.dot(l),u=new PT;r.vsub(s,u);var g=o.dot(u);if(c<0&&g>0||c>0&&g<0)return!1}return-1}}],[{key:"computeNormal",value:function(e,t,n,i){var r=new PT,a=new PT;t.vsub(e,a),n.vsub(t,r),r.cross(a,i),i.isZero()||i.normalize()}},{key:"project",value:function(e,t,n,i,r){var a=e.vertices.length,o=lX,s=0,l=0,c=cX,u=e.vertices;c.setZero(),iX.vectorToLocalFrame(n,i,t,o),iX.pointToLocalFrame(n,i,c,c);var g=c.dot(o);l=s=u[0].dot(o);for(var d=1;d<a;d++){var h=u[d].dot(o);h>s&&(s=h),h<l&&(l=h)}if((l-=g)>(s-=g)){var f=l;l=s,s=f}r[0]=s,r[1]=l}}]),n}(nX),oX=[],sX=[];new PT;var lX=new PT,cX=new PT,uX=function(e){kc(n,e);var t=Vc(n);function n(e){var i;return ka(this,n),(i=t.call(this,{type:nX.types.BOX})).halfExtents=e,i.convexPolyhedronRepresentation=null,i.updateConvexPolyhedronRepresentation(),i.updateBoundingSphereRadius(),i}return Xe(n,[{key:"updateConvexPolyhedronRepresentation",value:function(){var e=this.halfExtents.x,t=this.halfExtents.y,n=this.halfExtents.z,i=PT,r=[new i(-e,-t,-n),new i(e,-t,-n),new i(e,t,-n),new i(-e,t,-n),new i(-e,-t,n),new i(e,-t,n),new i(e,t,n),new i(-e,t,n)],a=[new i(0,0,1),new i(0,1,0),new i(1,0,0)],o=new aX({vertices:r,faces:[[3,2,1,0],[4,5,6,7],[5,4,0,1],[2,3,7,6],[0,4,7,3],[1,2,6,5]],axes:a});this.convexPolyhedronRepresentation=o,o.material=this.material}},{key:"calculateLocalInertia",value:function(e,t){return void 0===t&&(t=new PT),n.calculateInertia(this.halfExtents,e,t),t}},{key:"getSideNormals",value:function(e,t){var n=e,i=this.halfExtents;if(n[0].set(i.x,0,0),n[1].set(0,i.y,0),n[2].set(0,0,i.z),n[3].set(-i.x,0,0),n[4].set(0,-i.y,0),n[5].set(0,0,-i.z),void 0!==t)for(var r=0;r!==n.length;r++)t.vmult(n[r],n[r]);return n}},{key:"volume",value:function(){return 8*this.halfExtents.x*this.halfExtents.y*this.halfExtents.z}},{key:"updateBoundingSphereRadius",value:function(){this.boundingSphereRadius=this.halfExtents.length()}},{key:"forEachWorldCorner",value:function(e,t,n){for(var i=this.halfExtents,r=[[i.x,i.y,i.z],[-i.x,i.y,i.z],[-i.x,-i.y,i.z],[-i.x,-i.y,-i.z],[i.x,-i.y,-i.z],[i.x,i.y,-i.z],[-i.x,i.y,-i.z],[i.x,-i.y,i.z]],a=0;a<r.length;a++)gX.set(r[a][0],r[a][1],r[a][2]),t.vmult(gX,gX),e.vadd(gX,gX),n(gX.x,gX.y,gX.z)}},{key:"calculateWorldAABB",value:function(e,t,n,i){var r=this.halfExtents;dX[0].set(r.x,r.y,r.z),dX[1].set(-r.x,r.y,r.z),dX[2].set(-r.x,-r.y,r.z),dX[3].set(-r.x,-r.y,-r.z),dX[4].set(r.x,-r.y,-r.z),dX[5].set(r.x,r.y,-r.z),dX[6].set(-r.x,r.y,-r.z),dX[7].set(r.x,-r.y,r.z);var a=dX[0];t.vmult(a,a),e.vadd(a,a),i.copy(a),n.copy(a);for(var o=1;o<8;o++){var s=dX[o];t.vmult(s,s),e.vadd(s,s);var l=s.x,c=s.y,u=s.z;l>i.x&&(i.x=l),c>i.y&&(i.y=c),u>i.z&&(i.z=u),l<n.x&&(n.x=l),c<n.y&&(n.y=c),u<n.z&&(n.z=u)}}}],[{key:"calculateInertia",value:function(e,t,n){var i=e;n.x=1/12*t*(2*i.y*2*i.y+2*i.z*2*i.z),n.y=1/12*t*(2*i.x*2*i.x+2*i.z*2*i.z),n.z=1/12*t*(2*i.y*2*i.y+2*i.x*2*i.x)}}]),n}(nX),gX=new PT,dX=[new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT],hX=1,fX=2,pX=4,IX=0,CX=1,mX=2,vX=function(e){kc(n,e);var t=Vc(n);function n(e){var i;ka(this,n),void 0===e&&(e={}),(i=t.call(this)).id=n.idCounter++,i.index=-1,i.world=null,i.vlambda=new PT,i.collisionFilterGroup="number"===typeof e.collisionFilterGroup?e.collisionFilterGroup:1,i.collisionFilterMask="number"===typeof e.collisionFilterMask?e.collisionFilterMask:-1,i.collisionResponse="boolean"!==typeof e.collisionResponse||e.collisionResponse,i.position=new PT,i.previousPosition=new PT,i.interpolatedPosition=new PT,i.initPosition=new PT,e.position&&(i.position.copy(e.position),i.previousPosition.copy(e.position),i.interpolatedPosition.copy(e.position),i.initPosition.copy(e.position)),i.velocity=new PT,e.velocity&&i.velocity.copy(e.velocity),i.initVelocity=new PT,i.force=new PT;var r="number"===typeof e.mass?e.mass:0;return i.mass=r,i.invMass=r>0?1/r:0,i.material=e.material||null,i.linearDamping="number"===typeof e.linearDamping?e.linearDamping:.01,i.type=r<=0?n.STATIC:n.DYNAMIC,typeof e.type===typeof n.STATIC&&(i.type=e.type),i.allowSleep="undefined"===typeof e.allowSleep||e.allowSleep,i.sleepState=n.AWAKE,i.sleepSpeedLimit="undefined"!==typeof e.sleepSpeedLimit?e.sleepSpeedLimit:.1,i.sleepTimeLimit="undefined"!==typeof e.sleepTimeLimit?e.sleepTimeLimit:1,i.timeLastSleepy=0,i.wakeUpAfterNarrowphase=!1,i.torque=new PT,i.quaternion=new $T,i.initQuaternion=new $T,i.previousQuaternion=new $T,i.interpolatedQuaternion=new $T,e.quaternion&&(i.quaternion.copy(e.quaternion),i.initQuaternion.copy(e.quaternion),i.previousQuaternion.copy(e.quaternion),i.interpolatedQuaternion.copy(e.quaternion)),i.angularVelocity=new PT,e.angularVelocity&&i.angularVelocity.copy(e.angularVelocity),i.initAngularVelocity=new PT,i.shapes=[],i.shapeOffsets=[],i.shapeOrientations=[],i.inertia=new PT,i.invInertia=new PT,i.invInertiaWorld=new KT,i.invMassSolve=0,i.invInertiaSolve=new PT,i.invInertiaWorldSolve=new KT,i.fixedRotation="undefined"!==typeof e.fixedRotation&&e.fixedRotation,i.angularDamping="undefined"!==typeof e.angularDamping?e.angularDamping:.01,i.linearFactor=new PT(1,1,1),e.linearFactor&&i.linearFactor.copy(e.linearFactor),i.angularFactor=new PT(1,1,1),e.angularFactor&&i.angularFactor.copy(e.angularFactor),i.aabb=new jT,i.aabbNeedsUpdate=!0,i.boundingRadius=0,i.wlambda=new PT,i.isTrigger=Boolean(e.isTrigger),e.shape&&i.addShape(e.shape),i.updateMassProperties(),i}return Xe(n,[{key:"wakeUp",value:function(){var e=this.sleepState;this.sleepState=n.AWAKE,this.wakeUpAfterNarrowphase=!1,e===n.SLEEPING&&this.dispatchEvent(n.wakeupEvent)}},{key:"sleep",value:function(){this.sleepState=n.SLEEPING,this.velocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.wakeUpAfterNarrowphase=!1}},{key:"sleepTick",value:function(e){if(this.allowSleep){var t=this.sleepState,i=this.velocity.lengthSquared()+this.angularVelocity.lengthSquared(),r=Math.pow(this.sleepSpeedLimit,2);t===n.AWAKE&&i<r?(this.sleepState=n.SLEEPY,this.timeLastSleepy=e,this.dispatchEvent(n.sleepyEvent)):t===n.SLEEPY&&i>r?this.wakeUp():t===n.SLEEPY&&e-this.timeLastSleepy>this.sleepTimeLimit&&(this.sleep(),this.dispatchEvent(n.sleepEvent))}}},{key:"updateSolveMassProperties",value:function(){this.sleepState===n.SLEEPING||this.type===n.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve.setZero(),this.invInertiaWorldSolve.setZero()):(this.invMassSolve=this.invMass,this.invInertiaSolve.copy(this.invInertia),this.invInertiaWorldSolve.copy(this.invInertiaWorld))}},{key:"pointToLocalFrame",value:function(e,t){return void 0===t&&(t=new PT),e.vsub(this.position,t),this.quaternion.conjugate().vmult(t,t),t}},{key:"vectorToLocalFrame",value:function(e,t){return void 0===t&&(t=new PT),this.quaternion.conjugate().vmult(e,t),t}},{key:"pointToWorldFrame",value:function(e,t){return void 0===t&&(t=new PT),this.quaternion.vmult(e,t),t.vadd(this.position,t),t}},{key:"vectorToWorldFrame",value:function(e,t){return void 0===t&&(t=new PT),this.quaternion.vmult(e,t),t}},{key:"addShape",value:function(e,t,n){var i=new PT,r=new $T;return t&&i.copy(t),n&&r.copy(n),this.shapes.push(e),this.shapeOffsets.push(i),this.shapeOrientations.push(r),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=this,this}},{key:"removeShape",value:function(e){var t=this.shapes.indexOf(e);return-1===t?(console.warn("Shape does not belong to the body"),this):(this.shapes.splice(t,1),this.shapeOffsets.splice(t,1),this.shapeOrientations.splice(t,1),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=null,this)}},{key:"updateBoundingRadius",value:function(){for(var e=this.shapes,t=this.shapeOffsets,n=e.length,i=0,r=0;r!==n;r++){var a=e[r];a.updateBoundingSphereRadius();var o=t[r].length(),s=a.boundingSphereRadius;o+s>i&&(i=o+s)}this.boundingRadius=i}},{key:"updateAABB",value:function(){for(var e=this.shapes,t=this.shapeOffsets,n=this.shapeOrientations,i=e.length,r=AX,a=bX,o=this.quaternion,s=this.aabb,l=yX,c=0;c!==i;c++){var u=e[c];o.vmult(t[c],r),r.vadd(this.position,r),o.mult(n[c],a),u.calculateWorldAABB(r,a,l.lowerBound,l.upperBound),0===c?s.copy(l):s.extend(l)}this.aabbNeedsUpdate=!1}},{key:"updateInertiaWorld",value:function(e){var t=this.invInertia;if(t.x!==t.y||t.y!==t.z||e){var n=GX,i=wX;n.setRotationFromQuaternion(this.quaternion),n.transpose(i),n.scale(t,n),n.mmult(i,this.invInertiaWorld)}else;}},{key:"applyForce",value:function(e,t){if(void 0===t&&(t=new PT),this.type===n.DYNAMIC){this.sleepState===n.SLEEPING&&this.wakeUp();var i=BX;t.cross(e,i),this.force.vadd(e,this.force),this.torque.vadd(i,this.torque)}}},{key:"applyLocalForce",value:function(e,t){if(void 0===t&&(t=new PT),this.type===n.DYNAMIC){var i=xX,r=SX;this.vectorToWorldFrame(e,i),this.vectorToWorldFrame(t,r),this.applyForce(i,r)}}},{key:"applyTorque",value:function(e){this.type===n.DYNAMIC&&(this.sleepState===n.SLEEPING&&this.wakeUp(),this.torque.vadd(e,this.torque))}},{key:"applyImpulse",value:function(e,t){if(void 0===t&&(t=new PT),this.type===n.DYNAMIC){this.sleepState===n.SLEEPING&&this.wakeUp();var i=t,r=ZX;r.copy(e),r.scale(this.invMass,r),this.velocity.vadd(r,this.velocity);var a=kX;i.cross(e,a),this.invInertiaWorld.vmult(a,a),this.angularVelocity.vadd(a,this.angularVelocity)}}},{key:"applyLocalImpulse",value:function(e,t){if(void 0===t&&(t=new PT),this.type===n.DYNAMIC){var i=RX,r=WX;this.vectorToWorldFrame(e,i),this.vectorToWorldFrame(t,r),this.applyImpulse(i,r)}}},{key:"updateMassProperties",value:function(){var e=MX;this.invMass=this.mass>0?1/this.mass:0;var t=this.inertia,n=this.fixedRotation;this.updateAABB(),e.set((this.aabb.upperBound.x-this.aabb.lowerBound.x)/2,(this.aabb.upperBound.y-this.aabb.lowerBound.y)/2,(this.aabb.upperBound.z-this.aabb.lowerBound.z)/2),uX.calculateInertia(e,this.mass,t),this.invInertia.set(t.x>0&&!n?1/t.x:0,t.y>0&&!n?1/t.y:0,t.z>0&&!n?1/t.z:0),this.updateInertiaWorld(!0)}},{key:"getVelocityAtWorldPoint",value:function(e,t){var n=new PT;return e.vsub(this.position,n),this.angularVelocity.cross(n,t),this.velocity.vadd(t,t),t}},{key:"integrate",value:function(e,t,i){if(this.previousPosition.copy(this.position),this.previousQuaternion.copy(this.quaternion),(this.type===n.DYNAMIC||this.type===n.KINEMATIC)&&this.sleepState!==n.SLEEPING){var r=this.velocity,a=this.angularVelocity,o=this.position,s=this.force,l=this.torque,c=this.quaternion,u=this.invMass,g=this.invInertiaWorld,d=this.linearFactor,h=u*e;r.x+=s.x*h*d.x,r.y+=s.y*h*d.y,r.z+=s.z*h*d.z;var f=g.elements,p=this.angularFactor,I=l.x*p.x,C=l.y*p.y,m=l.z*p.z;a.x+=e*(f[0]*I+f[1]*C+f[2]*m),a.y+=e*(f[3]*I+f[4]*C+f[5]*m),a.z+=e*(f[6]*I+f[7]*C+f[8]*m),o.x+=r.x*e,o.y+=r.y*e,o.z+=r.z*e,c.integrate(this.angularVelocity,e,this.angularFactor,c),t&&(i?c.normalizeFast():c.normalize()),this.aabbNeedsUpdate=!0,this.updateInertiaWorld()}}}]),n}(qT);vX.idCounter=0,vX.COLLIDE_EVENT_NAME="collide",vX.DYNAMIC=hX,vX.STATIC=fX,vX.KINEMATIC=pX,vX.AWAKE=IX,vX.SLEEPY=CX,vX.SLEEPING=mX,vX.wakeupEvent={type:"wakeup"},vX.sleepyEvent={type:"sleepy"},vX.sleepEvent={type:"sleep"};var AX=new PT,bX=new $T,yX=new jT,GX=new KT,wX=new KT;new KT;var BX=new PT,xX=new PT,SX=new PT,ZX=new PT,kX=new PT,RX=new PT,WX=new PT,MX=new PT;new PT,new PT,new $T,new PT,new PT,new PT,new PT;var VX=function(){function e(){ka(this,e),this.rayFromWorld=new PT,this.rayToWorld=new PT,this.hitNormalWorld=new PT,this.hitPointWorld=new PT,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}return Xe(e,[{key:"reset",value:function(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}},{key:"abort",value:function(){this.shouldStop=!0}},{key:"set",value:function(e,t,n,i,r,a,o){this.rayFromWorld.copy(e),this.rayToWorld.copy(t),this.hitNormalWorld.copy(n),this.hitPointWorld.copy(i),this.shape=r,this.body=a,this.distance=o}}]),e}(),FX=1,NX=2,HX=4,TX=function(e,t,n,i,r,a,o){function s(e,t){ka(this,s),void 0===e&&(e=new PT),void 0===t&&(t=new PT),this.from=e.clone(),this.to=t.clone(),this.direction=new PT,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=s.ANY,this.result=new VX,this.hasHit=!1,this.callback=function(e){}}return Xe(s,[{key:e,get:function(){return this._intersectSphere}},{key:t,get:function(){return this._intersectPlane}},{key:n,get:function(){return this._intersectBox}},{key:i,get:function(){return this._intersectConvex}},{key:r,get:function(){return this._intersectConvex}},{key:a,get:function(){return this._intersectHeightfield}},{key:o,get:function(){return this._intersectTrimesh}},{key:"intersectWorld",value:function(e,t){return this.mode=t.mode||s.ANY,this.result=t.result||new VX,this.skipBackfaces=!!t.skipBackfaces,this.collisionFilterMask="undefined"!==typeof t.collisionFilterMask?t.collisionFilterMask:-1,this.collisionFilterGroup="undefined"!==typeof t.collisionFilterGroup?t.collisionFilterGroup:-1,this.checkCollisionResponse="undefined"===typeof t.checkCollisionResponse||t.checkCollisionResponse,t.from&&this.from.copy(t.from),t.to&&this.to.copy(t.to),this.callback=t.callback||function(){},this.hasHit=!1,this.result.reset(),this.updateDirection(),this.getAABB(XX),YX.length=0,e.broadphase.aabbQuery(e,XX,YX),this.intersectBodies(YX),this.hasHit}},{key:"intersectBody",value:function(e,t){t&&(this.result=t,this.updateDirection());var n=this.checkCollisionResponse;if((!n||e.collisionResponse)&&0!==(this.collisionFilterGroup&e.collisionFilterMask)&&0!==(e.collisionFilterGroup&this.collisionFilterMask))for(var i=LX,r=KX,a=0,o=e.shapes.length;a<o;a++){var s=e.shapes[a];if((!n||s.collisionResponse)&&(e.quaternion.mult(e.shapeOrientations[a],r),e.quaternion.vmult(e.shapeOffsets[a],i),i.vadd(e.position,i),this.intersectShape(s,r,i,e),this.result.shouldStop))break}}},{key:"intersectBodies",value:function(e,t){t&&(this.result=t,this.updateDirection());for(var n=0,i=e.length;!this.result.shouldStop&&n<i;n++)this.intersectBody(e[n])}},{key:"updateDirection",value:function(){this.to.vsub(this.from,this.direction),this.direction.normalize()}},{key:"intersectShape",value:function(e,t,n,i){var r=function(e,t,n){n.vsub(e,uY);var i=uY.dot(t);t.scale(i,gY),gY.vadd(e,gY);var r=n.distanceTo(gY);return r}(this.from,this.direction,n);if(!(r>e.boundingSphereRadius)){var a=this[e.type];a&&a.call(this,e,t,n,i,e)}}},{key:"_intersectBox",value:function(e,t,n,i,r){return this._intersectConvex(e.convexPolyhedronRepresentation,t,n,i,r)}},{key:"_intersectPlane",value:function(e,t,n,i,r){var a=this.from,o=this.to,s=this.direction,l=new PT(0,0,1);t.vmult(l,l);var c=new PT;a.vsub(n,c);var u=c.dot(l);if(o.vsub(n,c),!(u*c.dot(l)>0)&&!(a.distanceTo(o)<u)){var g=l.dot(s);if(!(Math.abs(g)<this.precision)){var d=new PT,h=new PT,f=new PT;a.vsub(n,d);var p=-l.dot(d)/g;s.scale(p,h),a.vadd(h,f),this.reportIntersection(l,f,r,i,-1)}}}},{key:"getAABB",value:function(e){var t=e.lowerBound,n=e.upperBound,i=this.to,r=this.from;t.x=Math.min(i.x,r.x),t.y=Math.min(i.y,r.y),t.z=Math.min(i.z,r.z),n.x=Math.max(i.x,r.x),n.y=Math.max(i.y,r.y),n.z=Math.max(i.z,r.z)}},{key:"_intersectHeightfield",value:function(e,t,n,i,r){e.data,e.elementSize;var a=JX;a.from.copy(this.from),a.to.copy(this.to),iX.pointToLocalFrame(n,t,a.from,a.from),iX.pointToLocalFrame(n,t,a.to,a.to),a.updateDirection();var o,s,l,c,u=QX;o=s=0,l=c=e.data.length-1;var g=new jT;a.getAABB(g),e.getIndexOfPosition(g.lowerBound.x,g.lowerBound.y,u,!0),o=Math.max(o,u[0]),s=Math.max(s,u[1]),e.getIndexOfPosition(g.upperBound.x,g.upperBound.y,u,!0),l=Math.min(l,u[0]+1),c=Math.min(c,u[1]+1);for(var d=o;d<l;d++)for(var h=s;h<c;h++){if(this.result.shouldStop)return;if(e.getAabbAtIndex(d,h,g),g.overlapsRay(a)){if(e.getConvexTrianglePillar(d,h,!1),iX.pointToWorldFrame(n,t,e.pillarOffset,jX),this._intersectConvex(e.pillarConvex,t,jX,i,r,UX),this.result.shouldStop)return;e.getConvexTrianglePillar(d,h,!0),iX.pointToWorldFrame(n,t,e.pillarOffset,jX),this._intersectConvex(e.pillarConvex,t,jX,i,r,UX)}}}},{key:"_intersectSphere",value:function(e,t,n,i,r){var a=this.from,o=this.to,s=e.radius,l=Math.pow(o.x-a.x,2)+Math.pow(o.y-a.y,2)+Math.pow(o.z-a.z,2),c=2*((o.x-a.x)*(a.x-n.x)+(o.y-a.y)*(a.y-n.y)+(o.z-a.z)*(a.z-n.z)),u=Math.pow(a.x-n.x,2)+Math.pow(a.y-n.y,2)+Math.pow(a.z-n.z,2)-Math.pow(s,2),g=Math.pow(c,2)-4*l*u,d=qX,h=$X;if(!(g<0))if(0===g)a.lerp(o,g,d),d.vsub(n,h),h.normalize(),this.reportIntersection(h,d,r,i,-1);else{var f=(-c-Math.sqrt(g))/(2*l),p=(-c+Math.sqrt(g))/(2*l);if(f>=0&&f<=1&&(a.lerp(o,f,d),d.vsub(n,h),h.normalize(),this.reportIntersection(h,d,r,i,-1)),this.result.shouldStop)return;p>=0&&p<=1&&(a.lerp(o,p,d),d.vsub(n,h),h.normalize(),this.reportIntersection(h,d,r,i,-1))}}},{key:"_intersectConvex",value:function(e,t,n,i,r,a){for(var o=eY,l=tY,c=a&&a.faceList||null,u=e.faces,g=e.vertices,d=e.faceNormals,h=this.direction,f=this.from,p=this.to,I=f.distanceTo(p),C=c?c.length:u.length,m=this.result,v=0;!m.shouldStop&&v<C;v++){var A=c?c[v]:v,b=u[A],y=d[A],G=t,w=n;l.copy(g[b[0]]),G.vmult(l,l),l.vadd(w,l),l.vsub(f,l),G.vmult(y,o);var B=h.dot(o);if(!(Math.abs(B)<this.precision)){var x=o.dot(l)/B;if(!(x<0)){h.scale(x,_X),_X.vadd(f,_X),PX.copy(g[b[0]]),G.vmult(PX,PX),w.vadd(PX,PX);for(var S=1;!m.shouldStop&&S<b.length-1;S++){DX.copy(g[b[S]]),OX.copy(g[b[S+1]]),G.vmult(DX,DX),G.vmult(OX,OX),w.vadd(DX,DX),w.vadd(OX,OX);var Z=_X.distanceTo(f);!s.pointInTriangle(_X,PX,DX,OX)&&!s.pointInTriangle(_X,DX,PX,OX)||Z>I||this.reportIntersection(o,_X,r,i,A)}}}}}},{key:"_intersectTrimesh",value:function(e,t,n,i,r,a){var o=nY,l=lY,c=cY,u=tY,g=iY,d=rY,h=aY,f=sY,p=oY,I=e.indices;e.vertices;var C=this.from,m=this.to,v=this.direction;c.position.copy(n),c.quaternion.copy(t),iX.vectorToLocalFrame(n,t,v,g),iX.pointToLocalFrame(n,t,C,d),iX.pointToLocalFrame(n,t,m,h),h.x*=e.scale.x,h.y*=e.scale.y,h.z*=e.scale.z,d.x*=e.scale.x,d.y*=e.scale.y,d.z*=e.scale.z,h.vsub(d,g),g.normalize();var A=d.distanceSquared(h);e.tree.rayQuery(this,c,l);for(var b=0,y=l.length;!this.result.shouldStop&&b!==y;b++){var G=l[b];e.getNormal(G,o),e.getVertex(I[3*G],PX),PX.vsub(d,u);var w=g.dot(o),B=o.dot(u)/w;if(!(B<0)){g.scale(B,_X),_X.vadd(d,_X),e.getVertex(I[3*G+1],DX),e.getVertex(I[3*G+2],OX);var x=_X.distanceSquared(d);!s.pointInTriangle(_X,DX,PX,OX)&&!s.pointInTriangle(_X,PX,DX,OX)||x>A||(iX.vectorToWorldFrame(t,o,p),iX.pointToWorldFrame(n,t,_X,f),this.reportIntersection(p,f,r,i,G))}}l.length=0}},{key:"reportIntersection",value:function(e,t,n,i,r){var a=this.from,o=this.to,l=a.distanceTo(t),c=this.result;if(!(this.skipBackfaces&&e.dot(this.direction)>0))switch(c.hitFaceIndex="undefined"!==typeof r?r:-1,this.mode){case s.ALL:this.hasHit=!0,c.set(a,o,e,t,n,i,l),c.hasHit=!0,this.callback(c);break;case s.CLOSEST:(l<c.distance||!c.hasHit)&&(this.hasHit=!0,c.hasHit=!0,c.set(a,o,e,t,n,i,l));break;case s.ANY:this.hasHit=!0,c.hasHit=!0,c.set(a,o,e,t,n,i,l),c.shouldStop=!0}}}],[{key:"pointInTriangle",value:function(e,t,n,i){i.vsub(t,uY),n.vsub(t,EX),e.vsub(t,zX);var r,a,o=uY.dot(uY),s=uY.dot(EX),l=uY.dot(zX),c=EX.dot(EX),u=EX.dot(zX);return(r=c*l-s*u)>=0&&(a=o*u-s*l)>=0&&r+a<o*c-s*s}}]),s}(nX.types.SPHERE,nX.types.PLANE,nX.types.BOX,nX.types.CYLINDER,nX.types.CONVEXPOLYHEDRON,nX.types.HEIGHTFIELD,nX.types.TRIMESH);TX.CLOSEST=FX,TX.ANY=NX,TX.ALL=HX;var XX=new jT,YX=[],EX=new PT,zX=new PT,LX=new PT,KX=new $T,_X=new PT,PX=new PT,DX=new PT,OX=new PT;new PT,new VX;var UX={faceList:[0]},jX=new PT,JX=new TX,QX=[],qX=new PT,$X=new PT,eY=new PT;new PT,new PT;var tY=new PT,nY=new PT,iY=new PT,rY=new PT,aY=new PT,oY=new PT,sY=new PT;new jT;var lY=[],cY=new iX,uY=new PT,gY=new PT;new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT;var dY=Xe((function e(t){ka(this,e),void 0===t&&(t={});var n="";"string"===typeof t&&(n=t,t={}),this.name=n,this.id=e.idCounter++,this.friction="undefined"!==typeof t.friction?t.friction:-1,this.restitution="undefined"!==typeof t.restitution?t.restitution:-1}));dY.idCounter=0,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new TX,new PT,new PT,new PT,new PT(1,0,0),new PT(0,1,0),new PT(0,0,1),new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT;new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT;new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT;new PT,new jT,new PT,new jT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new jT,new PT,new iX,new jT;nX.types.SPHERE,nX.types.SPHERE,nX.types.PLANE,nX.types.BOX,nX.types.BOX,nX.types.SPHERE,nX.types.BOX,nX.types.PLANE,nX.types.BOX,nX.types.CONVEXPOLYHEDRON,nX.types.SPHERE,nX.types.CONVEXPOLYHEDRON,nX.types.PLANE,nX.types.CONVEXPOLYHEDRON,nX.types.BOX,nX.types.CONVEXPOLYHEDRON,nX.types.SPHERE,nX.types.HEIGHTFIELD,nX.types.BOX,nX.types.HEIGHTFIELD,nX.types.CONVEXPOLYHEDRON,nX.types.HEIGHTFIELD,nX.types.PARTICLE,nX.types.SPHERE,nX.types.PLANE,nX.types.PARTICLE,nX.types.BOX,nX.types.PARTICLE,nX.types.PARTICLE,nX.types.CONVEXPOLYHEDRON,nX.types.CYLINDER,nX.types.SPHERE,nX.types.CYLINDER,nX.types.PLANE,nX.types.CYLINDER,nX.types.BOX,nX.types.CYLINDER,nX.types.CONVEXPOLYHEDRON,nX.types.CYLINDER,nX.types.HEIGHTFIELD,nX.types.CYLINDER,nX.types.PARTICLE,nX.types.CYLINDER,nX.types.SPHERE,nX.types.TRIMESH,nX.types.PLANE,nX.types.TRIMESH,new PT,new PT,new PT,new PT,new PT,new $T,new $T,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new jT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new $T,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new PT,new jT,new TX;var hY=globalThis.performance||{};if(!hY.now){var fY=Date.now();hY.timing&&hY.timing.navigationStart&&(fY=hY.timing.navigationStart),hY.now=function(){return Date.now()-fY}}new PT;var pY=function(){function e(t){ka(this,e),void 0===t&&(t=[0,0,0,0,0,0,0,0,0]),this.elements=t}return Xe(e,[{key:"identity",value:function(){var e=this.elements;e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1}},{key:"setZero",value:function(){var e=this.elements;e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e[8]=0}},{key:"setTrace",value:function(e){var t=this.elements;t[0]=e.x,t[4]=e.y,t[8]=e.z}},{key:"getTrace",value:function(e){void 0===e&&(e=new CY);var t=this.elements;return e.x=t[0],e.y=t[4],e.z=t[8],e}},{key:"vmult",value:function(e,t){void 0===t&&(t=new CY);var n=this.elements,i=e.x,r=e.y,a=e.z;return t.x=n[0]*i+n[1]*r+n[2]*a,t.y=n[3]*i+n[4]*r+n[5]*a,t.z=n[6]*i+n[7]*r+n[8]*a,t}},{key:"smult",value:function(e){for(var t=0;t<this.elements.length;t++)this.elements[t]*=e}},{key:"mmult",value:function(t,n){void 0===n&&(n=new e);var i=this.elements,r=t.elements,a=n.elements,o=i[0],s=i[1],l=i[2],c=i[3],u=i[4],g=i[5],d=i[6],h=i[7],f=i[8],p=r[0],I=r[1],C=r[2],m=r[3],v=r[4],A=r[5],b=r[6],y=r[7],G=r[8];return a[0]=o*p+s*m+l*b,a[1]=o*I+s*v+l*y,a[2]=o*C+s*A+l*G,a[3]=c*p+u*m+g*b,a[4]=c*I+u*v+g*y,a[5]=c*C+u*A+g*G,a[6]=d*p+h*m+f*b,a[7]=d*I+h*v+f*y,a[8]=d*C+h*A+f*G,n}},{key:"scale",value:function(t,n){void 0===n&&(n=new e);for(var i=this.elements,r=n.elements,a=0;3!==a;a++)r[3*a+0]=t.x*i[3*a+0],r[3*a+1]=t.y*i[3*a+1],r[3*a+2]=t.z*i[3*a+2];return n}},{key:"solve",value:function(e,t){void 0===t&&(t=new CY);var n,i,r=[];for(n=0;n<12;n++)r.push(0);for(n=0;n<3;n++)for(i=0;i<3;i++)r[n+4*i]=this.elements[n+3*i];r[3]=e.x,r[7]=e.y,r[11]=e.z;var a,o,s=3,l=s;do{if(0===r[(n=l-s)+4*n])for(i=n+1;i<l;i++)if(0!==r[n+4*i]){a=4;do{r[(o=4-a)+4*n]+=r[o+4*i]}while(--a);break}if(0!==r[n+4*n])for(i=n+1;i<l;i++){var c=r[n+4*i]/r[n+4*n];a=4;do{r[(o=4-a)+4*i]=o<=n?0:r[o+4*i]-r[o+4*n]*c}while(--a)}}while(--s);if(t.z=r[11]/r[10],t.y=(r[7]-r[6]*t.z)/r[5],t.x=(r[3]-r[2]*t.z-r[1]*t.y)/r[0],isNaN(t.x)||isNaN(t.y)||isNaN(t.z)||t.x===1/0||t.y===1/0||t.z===1/0)throw"Could not solve equation! Got x=[".concat(t.toString(),"], b=[").concat(e.toString(),"], A=[").concat(this.toString(),"]");return t}},{key:"e",value:function(e,t,n){if(void 0===n)return this.elements[t+3*e];this.elements[t+3*e]=n}},{key:"copy",value:function(e){for(var t=0;t<e.elements.length;t++)this.elements[t]=e.elements[t];return this}},{key:"toString",value:function(){for(var e="",t=0;t<9;t++)e+=this.elements[t]+",";return e}},{key:"reverse",value:function(t){void 0===t&&(t=new e);var n,i,r=IY;for(n=0;n<3;n++)for(i=0;i<3;i++)r[n+6*i]=this.elements[n+3*i];r[3]=1,r[9]=0,r[15]=0,r[4]=0,r[10]=1,r[16]=0,r[5]=0,r[11]=0,r[17]=1;var a,o,s=3,l=s;do{if(0===r[(n=l-s)+6*n])for(i=n+1;i<l;i++)if(0!==r[n+6*i]){a=6;do{r[(o=6-a)+6*n]+=r[o+6*i]}while(--a);break}if(0!==r[n+6*n])for(i=n+1;i<l;i++){var c=r[n+6*i]/r[n+6*n];a=6;do{r[(o=6-a)+6*i]=o<=n?0:r[o+6*i]-r[o+6*n]*c}while(--a)}}while(--s);n=2;do{i=n-1;do{var u=r[n+6*i]/r[n+6*n];a=6;do{r[(o=6-a)+6*i]=r[o+6*i]-r[o+6*n]*u}while(--a)}while(i--)}while(--n);n=2;do{var g=1/r[n+6*n];a=6;do{r[(o=6-a)+6*n]=r[o+6*n]*g}while(--a)}while(n--);n=2;do{i=2;do{if(o=r[3+i+6*n],isNaN(o)||o===1/0)throw"Could not reverse! A=[".concat(this.toString(),"]");t.e(n,i,o)}while(i--)}while(n--);return t}},{key:"setRotationFromQuaternion",value:function(e){var t=e.x,n=e.y,i=e.z,r=e.w,a=t+t,o=n+n,s=i+i,l=t*a,c=t*o,u=t*s,g=n*o,d=n*s,h=i*s,f=r*a,p=r*o,I=r*s,C=this.elements;return C[0]=1-(g+h),C[1]=c-I,C[2]=u+p,C[3]=c+I,C[4]=1-(l+h),C[5]=d-f,C[6]=u-p,C[7]=d+f,C[8]=1-(l+g),this}},{key:"transpose",value:function(t){void 0===t&&(t=new e);var n,i=this.elements,r=t.elements;return r[0]=i[0],r[4]=i[4],r[8]=i[8],n=i[1],r[1]=i[3],r[3]=n,n=i[2],r[2]=i[6],r[6]=n,n=i[5],r[5]=i[7],r[7]=n,t}}]),e}(),IY=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],CY=function(){function e(t,n,i){ka(this,e),void 0===t&&(t=0),void 0===n&&(n=0),void 0===i&&(i=0),this.x=t,this.y=n,this.z=i}return Xe(e,[{key:"cross",value:function(t,n){void 0===n&&(n=new e);var i=t.x,r=t.y,a=t.z,o=this.x,s=this.y,l=this.z;return n.x=s*a-l*r,n.y=l*i-o*a,n.z=o*r-s*i,n}},{key:"set",value:function(e,t,n){return this.x=e,this.y=t,this.z=n,this}},{key:"setZero",value:function(){this.x=this.y=this.z=0}},{key:"vadd",value:function(t,n){if(!n)return new e(this.x+t.x,this.y+t.y,this.z+t.z);n.x=t.x+this.x,n.y=t.y+this.y,n.z=t.z+this.z}},{key:"vsub",value:function(t,n){if(!n)return new e(this.x-t.x,this.y-t.y,this.z-t.z);n.x=this.x-t.x,n.y=this.y-t.y,n.z=this.z-t.z}},{key:"crossmat",value:function(){return new pY([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])}},{key:"normalize",value:function(){var e=this.x,t=this.y,n=this.z,i=Math.sqrt(e*e+t*t+n*n);if(i>0){var r=1/i;this.x*=r,this.y*=r,this.z*=r}else this.x=0,this.y=0,this.z=0;return i}},{key:"unit",value:function(t){void 0===t&&(t=new e);var n=this.x,i=this.y,r=this.z,a=Math.sqrt(n*n+i*i+r*r);return a>0?(a=1/a,t.x=n*a,t.y=i*a,t.z=r*a):(t.x=1,t.y=0,t.z=0),t}},{key:"length",value:function(){var e=this.x,t=this.y,n=this.z;return Math.sqrt(e*e+t*t+n*n)}},{key:"lengthSquared",value:function(){return this.dot(this)}},{key:"distanceTo",value:function(e){var t=this.x,n=this.y,i=this.z,r=e.x,a=e.y,o=e.z;return Math.sqrt((r-t)*(r-t)+(a-n)*(a-n)+(o-i)*(o-i))}},{key:"distanceSquared",value:function(e){var t=this.x,n=this.y,i=this.z,r=e.x,a=e.y,o=e.z;return(r-t)*(r-t)+(a-n)*(a-n)+(o-i)*(o-i)}},{key:"scale",value:function(t,n){void 0===n&&(n=new e);var i=this.x,r=this.y,a=this.z;return n.x=t*i,n.y=t*r,n.z=t*a,n}},{key:"vmul",value:function(t,n){return void 0===n&&(n=new e),n.x=t.x*this.x,n.y=t.y*this.y,n.z=t.z*this.z,n}},{key:"addScaledVector",value:function(t,n,i){return void 0===i&&(i=new e),i.x=this.x+t*n.x,i.y=this.y+t*n.y,i.z=this.z+t*n.z,i}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"isZero",value:function(){return 0===this.x&&0===this.y&&0===this.z}},{key:"negate",value:function(t){return void 0===t&&(t=new e),t.x=-this.x,t.y=-this.y,t.z=-this.z,t}},{key:"tangents",value:function(e,t){var n=this.length();if(n>0){var i=mY,r=1/n;i.set(this.x*r,this.y*r,this.z*r);var a=vY;Math.abs(i.x)<.9?(a.set(1,0,0),i.cross(a,e)):(a.set(0,1,0),i.cross(a,e)),i.cross(e,t)}else e.set(1,0,0),t.set(0,1,0)}},{key:"toString",value:function(){return"".concat(this.x,",").concat(this.y,",").concat(this.z)}},{key:"toArray",value:function(){return[this.x,this.y,this.z]}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"lerp",value:function(e,t,n){var i=this.x,r=this.y,a=this.z;n.x=i+(e.x-i)*t,n.y=r+(e.y-r)*t,n.z=a+(e.z-a)*t}},{key:"almostEquals",value:function(e,t){return void 0===t&&(t=1e-6),!(Math.abs(this.x-e.x)>t||Math.abs(this.y-e.y)>t||Math.abs(this.z-e.z)>t)}},{key:"almostZero",value:function(e){return void 0===e&&(e=1e-6),!(Math.abs(this.x)>e||Math.abs(this.y)>e||Math.abs(this.z)>e)}},{key:"isAntiparallelTo",value:function(e,t){return this.negate(AY),AY.almostEquals(e,t)}},{key:"clone",value:function(){return new e(this.x,this.y,this.z)}}]),e}();CY.ZERO=new CY(0,0,0),CY.UNIT_X=new CY(1,0,0),CY.UNIT_Y=new CY(0,1,0),CY.UNIT_Z=new CY(0,0,1);var mY=new CY,vY=new CY,AY=new CY,bY=function(){function e(t){ka(this,e),void 0===t&&(t={}),this.lowerBound=new CY,this.upperBound=new CY,t.lowerBound&&this.lowerBound.copy(t.lowerBound),t.upperBound&&this.upperBound.copy(t.upperBound)}return Xe(e,[{key:"setFromPoints",value:function(e,t,n,i){var r=this.lowerBound,a=this.upperBound,o=n;r.copy(e[0]),o&&o.vmult(r,r),a.copy(r);for(var s=1;s<e.length;s++){var l=e[s];o&&(o.vmult(l,yY),l=yY),l.x>a.x&&(a.x=l.x),l.x<r.x&&(r.x=l.x),l.y>a.y&&(a.y=l.y),l.y<r.y&&(r.y=l.y),l.z>a.z&&(a.z=l.z),l.z<r.z&&(r.z=l.z)}return t&&(t.vadd(r,r),t.vadd(a,a)),i&&(r.x-=i,r.y-=i,r.z-=i,a.x+=i,a.y+=i,a.z+=i),this}},{key:"copy",value:function(e){return this.lowerBound.copy(e.lowerBound),this.upperBound.copy(e.upperBound),this}},{key:"clone",value:function(){return(new e).copy(this)}},{key:"extend",value:function(e){this.lowerBound.x=Math.min(this.lowerBound.x,e.lowerBound.x),this.upperBound.x=Math.max(this.upperBound.x,e.upperBound.x),this.lowerBound.y=Math.min(this.lowerBound.y,e.lowerBound.y),this.upperBound.y=Math.max(this.upperBound.y,e.upperBound.y),this.lowerBound.z=Math.min(this.lowerBound.z,e.lowerBound.z),this.upperBound.z=Math.max(this.upperBound.z,e.upperBound.z)}},{key:"overlaps",value:function(e){var t=this.lowerBound,n=this.upperBound,i=e.lowerBound,r=e.upperBound,a=i.x<=n.x&&n.x<=r.x||t.x<=r.x&&r.x<=n.x,o=i.y<=n.y&&n.y<=r.y||t.y<=r.y&&r.y<=n.y,s=i.z<=n.z&&n.z<=r.z||t.z<=r.z&&r.z<=n.z;return a&&o&&s}},{key:"volume",value:function(){var e=this.lowerBound,t=this.upperBound;return(t.x-e.x)*(t.y-e.y)*(t.z-e.z)}},{key:"contains",value:function(e){var t=this.lowerBound,n=this.upperBound,i=e.lowerBound,r=e.upperBound;return t.x<=i.x&&n.x>=r.x&&t.y<=i.y&&n.y>=r.y&&t.z<=i.z&&n.z>=r.z}},{key:"getCorners",value:function(e,t,n,i,r,a,o,s){var l=this.lowerBound,c=this.upperBound;e.copy(l),t.set(c.x,l.y,l.z),n.set(c.x,c.y,l.z),i.set(l.x,c.y,c.z),r.set(c.x,l.y,c.z),a.set(l.x,c.y,l.z),o.set(l.x,l.y,c.z),s.copy(c)}},{key:"toLocalFrame",value:function(e,t){var n=GY,i=n[0],r=n[1],a=n[2],o=n[3],s=n[4],l=n[5],c=n[6],u=n[7];this.getCorners(i,r,a,o,s,l,c,u);for(var g=0;8!==g;g++){var d=n[g];e.pointToLocal(d,d)}return t.setFromPoints(n)}},{key:"toWorldFrame",value:function(e,t){var n=GY,i=n[0],r=n[1],a=n[2],o=n[3],s=n[4],l=n[5],c=n[6],u=n[7];this.getCorners(i,r,a,o,s,l,c,u);for(var g=0;8!==g;g++){var d=n[g];e.pointToWorld(d,d)}return t.setFromPoints(n)}},{key:"overlapsRay",value:function(e){var t=e.direction,n=e.from,i=1/t.x,r=1/t.y,a=1/t.z,o=(this.lowerBound.x-n.x)*i,s=(this.upperBound.x-n.x)*i,l=(this.lowerBound.y-n.y)*r,c=(this.upperBound.y-n.y)*r,u=(this.lowerBound.z-n.z)*a,g=(this.upperBound.z-n.z)*a,d=Math.max(Math.max(Math.min(o,s),Math.min(l,c)),Math.min(u,g)),h=Math.min(Math.min(Math.max(o,s),Math.max(l,c)),Math.max(u,g));return!(h<0)&&!(d>h)}}]),e}(),yY=new CY,GY=[new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY],wY=function(){function e(t,n,i,r){ka(this,e),void 0===t&&(t=0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=1),this.x=t,this.y=n,this.z=i,this.w=r}return Xe(e,[{key:"set",value:function(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}},{key:"toString",value:function(){return"".concat(this.x,",").concat(this.y,",").concat(this.z,",").concat(this.w)}},{key:"toArray",value:function(){return[this.x,this.y,this.z,this.w]}},{key:"setFromAxisAngle",value:function(e,t){var n=Math.sin(.5*t);return this.x=e.x*n,this.y=e.y*n,this.z=e.z*n,this.w=Math.cos(.5*t),this}},{key:"toAxisAngle",value:function(e){void 0===e&&(e=new CY),this.normalize();var t=2*Math.acos(this.w),n=Math.sqrt(1-this.w*this.w);return n<.001?(e.x=this.x,e.y=this.y,e.z=this.z):(e.x=this.x/n,e.y=this.y/n,e.z=this.z/n),[e,t]}},{key:"setFromVectors",value:function(e,t){if(e.isAntiparallelTo(t)){var n=BY,i=xY;e.tangents(n,i),this.setFromAxisAngle(n,Math.PI)}else{var r=e.cross(t);this.x=r.x,this.y=r.y,this.z=r.z,this.w=Math.sqrt(Math.pow(e.length(),2)*Math.pow(t.length(),2))+e.dot(t),this.normalize()}return this}},{key:"mult",value:function(t,n){void 0===n&&(n=new e);var i=this.x,r=this.y,a=this.z,o=this.w,s=t.x,l=t.y,c=t.z,u=t.w;return n.x=i*u+o*s+r*c-a*l,n.y=r*u+o*l+a*s-i*c,n.z=a*u+o*c+i*l-r*s,n.w=o*u-i*s-r*l-a*c,n}},{key:"inverse",value:function(t){void 0===t&&(t=new e);var n=this.x,i=this.y,r=this.z,a=this.w;this.conjugate(t);var o=1/(n*n+i*i+r*r+a*a);return t.x*=o,t.y*=o,t.z*=o,t.w*=o,t}},{key:"conjugate",value:function(t){return void 0===t&&(t=new e),t.x=-this.x,t.y=-this.y,t.z=-this.z,t.w=this.w,t}},{key:"normalize",value:function(){var e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(e=1/e,this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}},{key:"normalizeFast",value:function(){var e=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}},{key:"vmult",value:function(e,t){void 0===t&&(t=new CY);var n=e.x,i=e.y,r=e.z,a=this.x,o=this.y,s=this.z,l=this.w,c=l*n+o*r-s*i,u=l*i+s*n-a*r,g=l*r+a*i-o*n,d=-a*n-o*i-s*r;return t.x=c*l+d*-a+u*-s-g*-o,t.y=u*l+d*-o+g*-a-c*-s,t.z=g*l+d*-s+c*-o-u*-a,t}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this}},{key:"toEuler",value:function(e,t){var n,i,r;void 0===t&&(t="YZX");var a=this.x,o=this.y,s=this.z,l=this.w;if("YZX"!==t)throw new Error("Euler order ".concat(t," not supported yet."));var c=a*o+s*l;if(c>.499&&(n=2*Math.atan2(a,l),i=Math.PI/2,r=0),c<-.499&&(n=-2*Math.atan2(a,l),i=-Math.PI/2,r=0),void 0===n){var u=a*a,g=o*o,d=s*s;n=Math.atan2(2*o*l-2*a*s,1-2*g-2*d),i=Math.asin(2*c),r=Math.atan2(2*a*l-2*o*s,1-2*u-2*d)}e.y=n,e.z=i,e.x=r}},{key:"setFromEuler",value:function(e,t,n,i){void 0===i&&(i="XYZ");var r=Math.cos(e/2),a=Math.cos(t/2),o=Math.cos(n/2),s=Math.sin(e/2),l=Math.sin(t/2),c=Math.sin(n/2);return"XYZ"===i?(this.x=s*a*o+r*l*c,this.y=r*l*o-s*a*c,this.z=r*a*c+s*l*o,this.w=r*a*o-s*l*c):"YXZ"===i?(this.x=s*a*o+r*l*c,this.y=r*l*o-s*a*c,this.z=r*a*c-s*l*o,this.w=r*a*o+s*l*c):"ZXY"===i?(this.x=s*a*o-r*l*c,this.y=r*l*o+s*a*c,this.z=r*a*c+s*l*o,this.w=r*a*o-s*l*c):"ZYX"===i?(this.x=s*a*o-r*l*c,this.y=r*l*o+s*a*c,this.z=r*a*c-s*l*o,this.w=r*a*o+s*l*c):"YZX"===i?(this.x=s*a*o+r*l*c,this.y=r*l*o+s*a*c,this.z=r*a*c-s*l*o,this.w=r*a*o-s*l*c):"XZY"===i&&(this.x=s*a*o-r*l*c,this.y=r*l*o-s*a*c,this.z=r*a*c+s*l*o,this.w=r*a*o+s*l*c),this}},{key:"clone",value:function(){return new e(this.x,this.y,this.z,this.w)}},{key:"slerp",value:function(t,n,i){void 0===i&&(i=new e);var r,a,o,s,l,c=this.x,u=this.y,g=this.z,d=this.w,h=t.x,f=t.y,p=t.z,I=t.w;return(a=c*h+u*f+g*p+d*I)<0&&(a=-a,h=-h,f=-f,p=-p,I=-I),1-a>1e-6?(r=Math.acos(a),o=Math.sin(r),s=Math.sin((1-n)*r)/o,l=Math.sin(n*r)/o):(s=1-n,l=n),i.x=s*c+l*h,i.y=s*u+l*f,i.z=s*g+l*p,i.w=s*d+l*I,i}},{key:"integrate",value:function(t,n,i,r){void 0===r&&(r=new e);var a=t.x*i.x,o=t.y*i.y,s=t.z*i.z,l=this.x,c=this.y,u=this.z,g=this.w,d=.5*n;return r.x+=d*(a*g+o*u-s*c),r.y+=d*(o*g+s*l-a*u),r.z+=d*(s*g+a*c-o*l),r.w+=d*(-a*l-o*c-s*u),r}}]),e}(),BY=new CY,xY=new CY,SY=function(){function e(t){ka(this,e),void 0===t&&(t={}),this.id=e.idCounter++,this.type=t.type||0,this.boundingSphereRadius=0,this.collisionResponse=!t.collisionResponse||t.collisionResponse,this.collisionFilterGroup=void 0!==t.collisionFilterGroup?t.collisionFilterGroup:1,this.collisionFilterMask=void 0!==t.collisionFilterMask?t.collisionFilterMask:-1,this.material=t.material?t.material:null,this.body=null}return Xe(e,[{key:"updateBoundingSphereRadius",value:function(){throw"computeBoundingSphereRadius() not implemented for shape type ".concat(this.type)}},{key:"volume",value:function(){throw"volume() not implemented for shape type ".concat(this.type)}},{key:"calculateLocalInertia",value:function(e,t){throw"calculateLocalInertia() not implemented for shape type ".concat(this.type)}},{key:"calculateWorldAABB",value:function(e,t,n,i){throw"calculateWorldAABB() not implemented for shape type ".concat(this.type)}}]),e}();SY.idCounter=0,SY.types={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256};var ZY=function(){function e(t){ka(this,e),void 0===t&&(t={}),this.position=new CY,this.quaternion=new wY,t.position&&this.position.copy(t.position),t.quaternion&&this.quaternion.copy(t.quaternion)}return Xe(e,[{key:"pointToLocal",value:function(t,n){return e.pointToLocalFrame(this.position,this.quaternion,t,n)}},{key:"pointToWorld",value:function(t,n){return e.pointToWorldFrame(this.position,this.quaternion,t,n)}},{key:"vectorToWorldFrame",value:function(e,t){return void 0===t&&(t=new CY),this.quaternion.vmult(e,t),t}}],[{key:"pointToLocalFrame",value:function(e,t,n,i){return void 0===i&&(i=new CY),n.vsub(e,i),t.conjugate(kY),kY.vmult(i,i),i}},{key:"pointToWorldFrame",value:function(e,t,n,i){return void 0===i&&(i=new CY),t.vmult(n,i),i.vadd(e,i),i}},{key:"vectorToWorldFrame",value:function(e,t,n){return void 0===n&&(n=new CY),e.vmult(t,n),n}},{key:"vectorToLocalFrame",value:function(e,t,n,i){return void 0===i&&(i=new CY),t.w*=-1,t.vmult(n,i),t.w*=-1,i}}]),e}(),kY=new wY;new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new wY,new bY,new pY,new pY,new pY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new wY,new CY,new CY,new CY,new CY;var RY=function(){function e(){ka(this,e),this.rayFromWorld=new CY,this.rayToWorld=new CY,this.hitNormalWorld=new CY,this.hitPointWorld=new CY,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}return Xe(e,[{key:"reset",value:function(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}},{key:"abort",value:function(){this.shouldStop=!0}},{key:"set",value:function(e,t,n,i,r,a,o){this.rayFromWorld.copy(e),this.rayToWorld.copy(t),this.hitNormalWorld.copy(n),this.hitPointWorld.copy(i),this.shape=r,this.body=a,this.distance=o}}]),e}(),WY=1,MY=2,VY=4,FY=function(e,t,n,i,r,a,o){function s(e,t){ka(this,s),void 0===e&&(e=new CY),void 0===t&&(t=new CY),this.from=e.clone(),this.to=t.clone(),this.direction=new CY,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=s.ANY,this.result=new RY,this.hasHit=!1,this.callback=function(e){}}return Xe(s,[{key:e,get:function(){return this._intersectSphere}},{key:t,get:function(){return this._intersectPlane}},{key:n,get:function(){return this._intersectBox}},{key:i,get:function(){return this._intersectConvex}},{key:r,get:function(){return this._intersectConvex}},{key:a,get:function(){return this._intersectHeightfield}},{key:o,get:function(){return this._intersectTrimesh}},{key:"intersectWorld",value:function(e,t){return this.mode=t.mode||s.ANY,this.result=t.result||new RY,this.skipBackfaces=!!t.skipBackfaces,this.collisionFilterMask="undefined"!==typeof t.collisionFilterMask?t.collisionFilterMask:-1,this.collisionFilterGroup="undefined"!==typeof t.collisionFilterGroup?t.collisionFilterGroup:-1,this.checkCollisionResponse="undefined"===typeof t.checkCollisionResponse||t.checkCollisionResponse,t.from&&this.from.copy(t.from),t.to&&this.to.copy(t.to),this.callback=t.callback||function(){},this.hasHit=!1,this.result.reset(),this.updateDirection(),this.getAABB(NY),HY.length=0,e.broadphase.aabbQuery(e,NY,HY),this.intersectBodies(HY),this.hasHit}},{key:"intersectBody",value:function(e,t){t&&(this.result=t,this.updateDirection());var n=this.checkCollisionResponse;if((!n||e.collisionResponse)&&0!==(this.collisionFilterGroup&e.collisionFilterMask)&&0!==(e.collisionFilterGroup&this.collisionFilterMask))for(var i=YY,r=EY,a=0,o=e.shapes.length;a<o;a++){var s=e.shapes[a];if((!n||s.collisionResponse)&&(e.quaternion.mult(e.shapeOrientations[a],r),e.quaternion.vmult(e.shapeOffsets[a],i),i.vadd(e.position,i),this.intersectShape(s,r,i,e),this.result.shouldStop))break}}},{key:"intersectBodies",value:function(e,t){t&&(this.result=t,this.updateDirection());for(var n=0,i=e.length;!this.result.shouldStop&&n<i;n++)this.intersectBody(e[n])}},{key:"updateDirection",value:function(){this.to.vsub(this.from,this.direction),this.direction.normalize()}},{key:"intersectShape",value:function(e,t,n,i){var r=function(e,t,n){n.vsub(e,sE);var i=sE.dot(t);t.scale(i,lE),lE.vadd(e,lE);var r=n.distanceTo(lE);return r}(this.from,this.direction,n);if(!(r>e.boundingSphereRadius)){var a=this[e.type];a&&a.call(this,e,t,n,i,e)}}},{key:"_intersectBox",value:function(e,t,n,i,r){return this._intersectConvex(e.convexPolyhedronRepresentation,t,n,i,r)}},{key:"_intersectPlane",value:function(e,t,n,i,r){var a=this.from,o=this.to,s=this.direction,l=new CY(0,0,1);t.vmult(l,l);var c=new CY;a.vsub(n,c);var u=c.dot(l);if(o.vsub(n,c),!(u*c.dot(l)>0)&&!(a.distanceTo(o)<u)){var g=l.dot(s);if(!(Math.abs(g)<this.precision)){var d=new CY,h=new CY,f=new CY;a.vsub(n,d);var p=-l.dot(d)/g;s.scale(p,h),a.vadd(h,f),this.reportIntersection(l,f,r,i,-1)}}}},{key:"getAABB",value:function(e){var t=e.lowerBound,n=e.upperBound,i=this.to,r=this.from;t.x=Math.min(i.x,r.x),t.y=Math.min(i.y,r.y),t.z=Math.min(i.z,r.z),n.x=Math.max(i.x,r.x),n.y=Math.max(i.y,r.y),n.z=Math.max(i.z,r.z)}},{key:"_intersectHeightfield",value:function(e,t,n,i,r){e.data,e.elementSize;var a=OY;a.from.copy(this.from),a.to.copy(this.to),ZY.pointToLocalFrame(n,t,a.from,a.from),ZY.pointToLocalFrame(n,t,a.to,a.to),a.updateDirection();var o,s,l,c,u=UY;o=s=0,l=c=e.data.length-1;var g=new bY;a.getAABB(g),e.getIndexOfPosition(g.lowerBound.x,g.lowerBound.y,u,!0),o=Math.max(o,u[0]),s=Math.max(s,u[1]),e.getIndexOfPosition(g.upperBound.x,g.upperBound.y,u,!0),l=Math.min(l,u[0]+1),c=Math.min(c,u[1]+1);for(var d=o;d<l;d++)for(var h=s;h<c;h++){if(this.result.shouldStop)return;if(e.getAabbAtIndex(d,h,g),g.overlapsRay(a)){if(e.getConvexTrianglePillar(d,h,!1),ZY.pointToWorldFrame(n,t,e.pillarOffset,DY),this._intersectConvex(e.pillarConvex,t,DY,i,r,PY),this.result.shouldStop)return;e.getConvexTrianglePillar(d,h,!0),ZY.pointToWorldFrame(n,t,e.pillarOffset,DY),this._intersectConvex(e.pillarConvex,t,DY,i,r,PY)}}}},{key:"_intersectSphere",value:function(e,t,n,i,r){var a=this.from,o=this.to,s=e.radius,l=Math.pow(o.x-a.x,2)+Math.pow(o.y-a.y,2)+Math.pow(o.z-a.z,2),c=2*((o.x-a.x)*(a.x-n.x)+(o.y-a.y)*(a.y-n.y)+(o.z-a.z)*(a.z-n.z)),u=Math.pow(a.x-n.x,2)+Math.pow(a.y-n.y,2)+Math.pow(a.z-n.z,2)-Math.pow(s,2),g=Math.pow(c,2)-4*l*u,d=jY,h=JY;if(!(g<0))if(0===g)a.lerp(o,g,d),d.vsub(n,h),h.normalize(),this.reportIntersection(h,d,r,i,-1);else{var f=(-c-Math.sqrt(g))/(2*l),p=(-c+Math.sqrt(g))/(2*l);if(f>=0&&f<=1&&(a.lerp(o,f,d),d.vsub(n,h),h.normalize(),this.reportIntersection(h,d,r,i,-1)),this.result.shouldStop)return;p>=0&&p<=1&&(a.lerp(o,p,d),d.vsub(n,h),h.normalize(),this.reportIntersection(h,d,r,i,-1))}}},{key:"_intersectConvex",value:function(e,t,n,i,r,a){for(var o=QY,l=qY,c=a&&a.faceList||null,u=e.faces,g=e.vertices,d=e.faceNormals,h=this.direction,f=this.from,p=this.to,I=f.distanceTo(p),C=c?c.length:u.length,m=this.result,v=0;!m.shouldStop&&v<C;v++){var A=c?c[v]:v,b=u[A],y=d[A],G=t,w=n;l.copy(g[b[0]]),G.vmult(l,l),l.vadd(w,l),l.vsub(f,l),G.vmult(y,o);var B=h.dot(o);if(!(Math.abs(B)<this.precision)){var x=o.dot(l)/B;if(!(x<0)){h.scale(x,zY),zY.vadd(f,zY),LY.copy(g[b[0]]),G.vmult(LY,LY),w.vadd(LY,LY);for(var S=1;!m.shouldStop&&S<b.length-1;S++){KY.copy(g[b[S]]),_Y.copy(g[b[S+1]]),G.vmult(KY,KY),G.vmult(_Y,_Y),w.vadd(KY,KY),w.vadd(_Y,_Y);var Z=zY.distanceTo(f);!s.pointInTriangle(zY,LY,KY,_Y)&&!s.pointInTriangle(zY,KY,LY,_Y)||Z>I||this.reportIntersection(o,zY,r,i,A)}}}}}},{key:"_intersectTrimesh",value:function(e,t,n,i,r,a){var o=$Y,l=aE,c=oE,u=qY,g=eE,d=tE,h=nE,f=rE,p=iE,I=e.indices;e.vertices;var C=this.from,m=this.to,v=this.direction;c.position.copy(n),c.quaternion.copy(t),ZY.vectorToLocalFrame(n,t,v,g),ZY.pointToLocalFrame(n,t,C,d),ZY.pointToLocalFrame(n,t,m,h),h.x*=e.scale.x,h.y*=e.scale.y,h.z*=e.scale.z,d.x*=e.scale.x,d.y*=e.scale.y,d.z*=e.scale.z,h.vsub(d,g),g.normalize();var A=d.distanceSquared(h);e.tree.rayQuery(this,c,l);for(var b=0,y=l.length;!this.result.shouldStop&&b!==y;b++){var G=l[b];e.getNormal(G,o),e.getVertex(I[3*G],LY),LY.vsub(d,u);var w=g.dot(o),B=o.dot(u)/w;if(!(B<0)){g.scale(B,zY),zY.vadd(d,zY),e.getVertex(I[3*G+1],KY),e.getVertex(I[3*G+2],_Y);var x=zY.distanceSquared(d);!s.pointInTriangle(zY,KY,LY,_Y)&&!s.pointInTriangle(zY,LY,KY,_Y)||x>A||(ZY.vectorToWorldFrame(t,o,p),ZY.pointToWorldFrame(n,t,zY,f),this.reportIntersection(p,f,r,i,G))}}l.length=0}},{key:"reportIntersection",value:function(e,t,n,i,r){var a=this.from,o=this.to,l=a.distanceTo(t),c=this.result;if(!(this.skipBackfaces&&e.dot(this.direction)>0))switch(c.hitFaceIndex="undefined"!==typeof r?r:-1,this.mode){case s.ALL:this.hasHit=!0,c.set(a,o,e,t,n,i,l),c.hasHit=!0,this.callback(c);break;case s.CLOSEST:(l<c.distance||!c.hasHit)&&(this.hasHit=!0,c.hasHit=!0,c.set(a,o,e,t,n,i,l));break;case s.ANY:this.hasHit=!0,c.hasHit=!0,c.set(a,o,e,t,n,i,l),c.shouldStop=!0}}}],[{key:"pointInTriangle",value:function(e,t,n,i){i.vsub(t,sE),n.vsub(t,TY),e.vsub(t,XY);var r,a,o=sE.dot(sE),s=sE.dot(TY),l=sE.dot(XY),c=TY.dot(TY),u=TY.dot(XY);return(r=c*l-s*u)>=0&&(a=o*u-s*l)>=0&&r+a<o*c-s*s}}]),s}(SY.types.SPHERE,SY.types.PLANE,SY.types.BOX,SY.types.CYLINDER,SY.types.CONVEXPOLYHEDRON,SY.types.HEIGHTFIELD,SY.types.TRIMESH);FY.CLOSEST=WY,FY.ANY=MY,FY.ALL=VY;var NY=new bY,HY=[],TY=new CY,XY=new CY,YY=new CY,EY=new wY,zY=new CY,LY=new CY,KY=new CY,_Y=new CY;new CY,new RY;var PY={faceList:[0]},DY=new CY,OY=new FY,UY=[],jY=new CY,JY=new CY,QY=new CY;new CY,new CY;var qY=new CY,$Y=new CY,eE=new CY,tE=new CY,nE=new CY,iE=new CY,rE=new CY;new bY;var aE=[],oE=new ZY,sE=new CY,lE=new CY;new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new FY,new CY,new CY,new CY,new CY(1,0,0),new CY(0,1,0),new CY(0,0,1),new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new bY,new CY,new bY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new bY,new CY,new ZY,new bY,SY.types.SPHERE,SY.types.SPHERE,SY.types.PLANE,SY.types.BOX,SY.types.BOX,SY.types.SPHERE,SY.types.BOX,SY.types.PLANE,SY.types.BOX,SY.types.CONVEXPOLYHEDRON,SY.types.SPHERE,SY.types.CONVEXPOLYHEDRON,SY.types.PLANE,SY.types.CONVEXPOLYHEDRON,SY.types.BOX,SY.types.CONVEXPOLYHEDRON,SY.types.SPHERE,SY.types.HEIGHTFIELD,SY.types.BOX,SY.types.HEIGHTFIELD,SY.types.CONVEXPOLYHEDRON,SY.types.HEIGHTFIELD,SY.types.PARTICLE,SY.types.SPHERE,SY.types.PLANE,SY.types.PARTICLE,SY.types.BOX,SY.types.PARTICLE,SY.types.PARTICLE,SY.types.CONVEXPOLYHEDRON,SY.types.CYLINDER,SY.types.SPHERE,SY.types.CYLINDER,SY.types.PLANE,SY.types.CYLINDER,SY.types.BOX,SY.types.CYLINDER,SY.types.CONVEXPOLYHEDRON,SY.types.CYLINDER,SY.types.HEIGHTFIELD,SY.types.CYLINDER,SY.types.PARTICLE,SY.types.CYLINDER,SY.types.SPHERE,SY.types.TRIMESH,SY.types.PLANE,SY.types.TRIMESH,new CY,new CY,new CY,new CY,new CY,new wY,new wY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new bY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new wY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new CY,new bY,new FY;var cE=globalThis.performance||{};if(!cE.now){var uE=Date.now();cE.timing&&cE.timing.navigationStart&&(uE=cE.timing.navigationStart),cE.now=function(){return Date.now()-uE}}new CY;var gE=(0,t.createContext)(null),dE=function(){return(0,t.useContext)(gE)},hE=(0,t.createContext)(null),fE=function(){var e=(0,t.useContext)(hE);if(!e)throw new Error("Physics context not found. @react-three/cannon & components can only be used within a Physics provider");return e};new _h,new Ph(1,1,1),new Ph,new yf;var pE=new Of;function IE(e){var n=(0,t.useRef)(null);return e&&"function"!==typeof e?e:n}function CE(e){return e.charAt(0).toUpperCase()+e.slice(1)}function mE(e,t){var n=void 0===t?"":"/".concat(t);return"function"===typeof e?null:e&&e.current&&"".concat(e.current.uuid).concat(n)}var vE=new Mf,AE=new _h,bE=function(e){return function(t){return e(vE.setFromQuaternion(AE.fromArray(t)).toArray())}},yE=0;function GE(e,t,n,i,r,a){return void 0===a&&(a="bodies"),function(o){var s=yE++;n[s]=ke({},i,o);var l=mE(e,r);return l&&t.subscribe({props:{id:s,target:a,type:i},uuid:l}),function(){delete n[s],t.unsubscribe({props:s})}}}function wE(e,t){var n,i,r=t.position,a=void 0===r?[0,0,0]:r,o=t.rotation,s=void 0===o?[0,0,0]:o,l=t.userData,c=void 0===l?{}:l;e.userData=c,(n=e.position).set.apply(n,We(a)),(i=e.rotation).set.apply(i,We(s)),e.updateMatrix()}function BE(e,t,n){var i=t.onCollide,r=t.onCollideBegin,a=t.onCollideEnd;e[n]={collide:i,collideBegin:r,collideEnd:a}}function xE(e,n,i,r,a){void 0===r&&(r=null),void 0===a&&(a=[]);var o=IE(r),s=fE(),l=s.events,c=s.refs,u=s.scaleOverrides,g=s.subscriptions,d=s.worker,h=dE();(0,t.useLayoutEffect)((function(){o.current||(o.current=new Of);var t=o.current,r=d,a=t instanceof jv?(t.instanceMatrix.setUsage(Pd),t.count):1,s=t instanceof jv?new Array(a).fill(0).map((function(e,n){return"".concat(t.uuid,"/").concat(n)})):[t.uuid],u=t instanceof jv?s.map((function(r,a){var o=n(a);return wE(pE,o),t.setMatrixAt(a,pE.matrix),t.instanceMatrix.needsUpdate=!0,c[r]=t,null==h||h.add(r,o,e),BE(l,o,r),Ve(Ve({},o),{},{args:i(o.args)})})):s.map((function(r,a){var o=n(a);return wE(t,o),c[r]=t,null==h||h.add(r,o,e),BE(l,o,r),Ve(Ve({},o),{},{args:i(o.args)})}));return r.addBodies({props:u.map((function(e){var t=e.onCollide,n=(e.onCollideBegin,e.onCollideEnd,Fe(e,vT));return Ve({onCollide:Boolean(t)},n)})),type:e,uuid:s}),function(){s.forEach((function(e){delete c[e],null==h||h.remove(e),delete l[e]})),r.removeBodies({uuid:s})}}),a);var f=(0,t.useMemo)((function(){var e=function(e,t){var n="set".concat(CE(e));return{set:function(e){var i=mE(o,t);i&&d[n]({props:e,uuid:i})},subscribe:GE(o,d,g,e,t)}},t=function(e){return{copy:function(t){var n=t.w,i=t.x,r=t.y,a=t.z,s=mE(o,e);s&&d.setQuaternion({props:[i,r,a,n],uuid:s})},set:function(t,n,i,r){var a=mE(o,e);a&&d.setQuaternion({props:[t,n,i,r],uuid:a})},subscribe:GE(o,d,g,"quaternion",e)}},n=function(e){return{copy:function(t){var n=t.x,i=t.y,r=t.z,a=mE(o,e);a&&d.setRotation({props:[n,i,r],uuid:a})},set:function(t,n,i){var r=mE(o,e);r&&d.setRotation({props:[t,n,i],uuid:r})},subscribe:function(t){var n=yE++,i="quaternion",r=mE(o,e);return g[n]=ke({},i,bE(t)),r&&d.subscribe({props:{id:n,target:"bodies",type:i},uuid:r}),function(){delete g[n],d.unsubscribe({props:n})}}}},i=function(e,t){var n="set".concat(CE(e));return{copy:function(e){var i=e.x,r=e.y,a=e.z,s=mE(o,t);s&&d[n]({props:[i,r,a],uuid:s})},set:function(e,i,r){var a=mE(o,t);a&&d[n]({props:[e,i,r],uuid:a})},subscribe:GE(o,d,g,e,t)}};function r(r){return{allowSleep:e("allowSleep",r),angularDamping:e("angularDamping",r),angularFactor:i("angularFactor",r),angularVelocity:i("angularVelocity",r),applyForce:function(e,t){var n=mE(o,r);n&&d.applyForce({props:[e,t],uuid:n})},applyImpulse:function(e,t){var n=mE(o,r);n&&d.applyImpulse({props:[e,t],uuid:n})},applyLocalForce:function(e,t){var n=mE(o,r);n&&d.applyLocalForce({props:[e,t],uuid:n})},applyLocalImpulse:function(e,t){var n=mE(o,r);n&&d.applyLocalImpulse({props:[e,t],uuid:n})},applyTorque:function(e){var t=mE(o,r);t&&d.applyTorque({props:[e],uuid:t})},collisionFilterGroup:e("collisionFilterGroup",r),collisionFilterMask:e("collisionFilterMask",r),collisionResponse:e("collisionResponse",r),fixedRotation:e("fixedRotation",r),isTrigger:e("isTrigger",r),linearDamping:e("linearDamping",r),linearFactor:i("linearFactor",r),mass:e("mass",r),material:e("material",r),position:i("position",r),quaternion:t(r),rotation:n(r),scaleOverride:function(e){var t=mE(o,r);t&&(u[t]=Nc(Ph,We(e)))},sleep:function(){var e=mE(o,r);e&&d.sleep({uuid:e})},sleepSpeedLimit:e("sleepSpeedLimit",r),sleepTimeLimit:e("sleepTimeLimit",r),userData:e("userData",r),velocity:i("velocity",r),wakeUp:function(){var e=mE(o,r);e&&d.wakeUp({uuid:e})}}}var a={};return Ve(Ve({},r(void 0)),{},{at:function(e){return a[e]||(a[e]=r(e))}})}),[]);return[o,f]}var SE=new Ph,ZE=new Ph(1,1,1),kE=new _h,RE=new yf;function WE(e,t,n,i,r){return void 0===i&&(i=ZE),void 0!==e?(RE.compose(SE.fromArray(t,3*e),kE.fromArray(n,4*e),i),r&&(r.matrixAutoUpdate=!1,r.matrix.copy(RE)),RE):RE.identity()}var ME=function(){var e=[];return function(t){return!e.includes(t)&&!!e.push(t)}};function VE(e){var n=e.allowSleep,i=void 0!==n&&n,r=e.axisIndex,a=void 0===r?0:r,o=e.broadphase,s=void 0===o?"Naive":o,l=e.children,g=e.defaultContactMaterial,d=void 0===g?{contactEquationStiffness:1e6}:g,h=e.frictionGravity,f=void 0===h?null:h,p=e.gravity,I=void 0===p?[0,-9.81,0]:p,C=e.isPaused,m=void 0!==C&&C,v=e.iterations,A=void 0===v?5:v,b=e.maxSubSteps,y=void 0===b?10:b,G=e.quatNormalizeFast,w=void 0!==G&&G,B=e.quatNormalizeSkip,x=void 0===B?0:B,S=e.shouldInvalidate,Z=void 0===S||S,k=e.size,R=void 0===k?1e3:k,W=e.solver,M=void 0===W?"GS":W,V=e.stepSize,F=void 0===V?1/60:V,N=e.tolerance,H=void 0===N?.001:N,T=ox().invalidate,X=c((0,t.useState)((function(){return{bodies:{},events:{},refs:{},scaleOverrides:{},subscriptions:{},worker:new LT({allowSleep:i,axisIndex:a,broadphase:s,defaultContactMaterial:d,frictionGravity:f,gravity:I,iterations:A,quatNormalizeFast:w,quatNormalizeSkip:x,size:R,solver:M,tolerance:H})}})),1)[0],Y=X.bodies,E=X.events,z=X.refs,L=X.scaleOverrides,K=X.subscriptions,_=X.worker,P=0,D=(0,t.useCallback)((function(e,t){m||(P+=t,_.step({maxSubSteps:y,stepSize:F,timeSinceLastCalled:P}),P=0)}),[m,y,F]),O=function(e){var t,n=e.body,i=e.contact,r=i.bi,a=i.bj,o=Fe(i,AT),s=e.target,l=Fe(e,bT),c=null==(t=E[s])?void 0:t.collide;c&&c(Ve({body:z[n],contact:Ve({bi:z[r],bj:z[a]},o),target:z[s]},l))},U=function(e){var t,n,i=e.bodyA,r=e.bodyB,a=null==(t=E[i])?void 0:t.collideBegin;a&&a({body:z[r],op:"event",target:z[i],type:"collideBegin"});var o=null==(n=E[r])?void 0:n.collideBegin;o&&o({body:z[i],op:"event",target:z[r],type:"collideBegin"})},j=function(e){var t,n,i=e.bodyA,r=e.bodyB,a=null==(t=E[i])?void 0:t.collideEnd;a&&a({body:z[r],op:"event",target:z[i],type:"collideEnd"});var o=null==(n=E[r])?void 0:n.collideEnd;o&&o({body:z[i],op:"event",target:z[r],type:"collideEnd"})},J=function(e){for(var t=e.active,n=e.bodies,i=void 0===n?[]:n,r=e.observations,a=e.positions,o=e.quaternions,s=0;s<i.length;s++)Y[i[s]]=s;if(r.forEach((function(e){var t=c(e,3),n=t[0],i=t[1],r=t[2],a=(K[n]||{})[r];a&&a(i)})),t){var l,u=Fc(Object.values(z).filter(ME()));try{for(u.s();!(l=u.n()).done;){var g=l.value;if(g instanceof jv)for(var d=0;d<g.count;d++){var h="".concat(g.uuid,"/").concat(d),f=Y[h];void 0!==f&&(g.setMatrixAt(d,WE(f,a,o,L[h])),g.instanceMatrix.needsUpdate=!0)}else{var p=L[g.uuid]||g.scale;WE(Y[g.uuid],a,o,p,g)}}}catch(I){u.e(I)}finally{u.f()}Z&&T()}},Q=function(e){var t,n=e.body,i=e.ray,r=i.uuid,a=Fe(i,yT),o=Fe(e,GT),s=null==(t=E[r])?void 0:t.rayhit;s&&s(Ve({body:n?z[n]:null,ray:Ve({uuid:r},a)},o))};sx(D),(0,t.useEffect)((function(){return _.connect(),_.init(),_.on("collide",O),_.on("collideBegin",U),_.on("collideEnd",j),_.on("frame",J),_.on("rayhit",Q),function(){_.terminate(),_.removeAllListeners()}}),[]),(0,t.useEffect)((function(){_.axisIndex=a}),[a]),(0,t.useEffect)((function(){_.broadphase=s}),[s]),(0,t.useEffect)((function(){_.gravity=I}),[I]),(0,t.useEffect)((function(){_.iterations=A}),[A]),(0,t.useEffect)((function(){_.tolerance=H}),[H]);var q=(0,t.useMemo)((function(){return{bodies:Y,events:E,refs:z,scaleOverrides:L,subscriptions:K,worker:_}}),[Y,E,z,K,_]);return(0,u.jsx)(hE.Provider,{value:q,children:l})}function FE(e){var n,i,r,a=c((n=function(){return Ve({},e)},i=(0,t.useRef)(),xE("Plane",n,(function(){return[]}),i,r)),1)[0],o=cx(My,"./img/grid.png");return(0,u.jsxs)("mesh",{ref:a,receiveShadow:!0,children:[(0,u.jsx)("planeGeometry",{args:[28,40]}),(0,u.jsx)("meshStandardMaterial",{map:o})]})}var NE=["args","position"];function HE(e){var n=e.args,i=e.position,r=Fe(e,NE),a=function(e,t,n){var i=[1,1,1];return xE("Box",e,(function(e){return void 0===e&&(e=i),e}),t,n)}((function(){return Ve({args:n,type:"Static",mass:10,position:i},r)}),(0,t.useRef)()),o=c(a,1)[0];return(0,u.jsx)("mesh",{ref:o,castShadow:!0,receiveShadow:!0,children:(0,u.jsx)("meshStandardMaterial",{color:"red"})})}function TE(){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(HE,{position:[14,0,12.5],args:[1,4,15],material:"ground"}),(0,u.jsx)(HE,{position:[14,0,-6.5],args:[1,4,15],material:"ground"}),(0,u.jsx)(HE,{position:[8.5,0,20],args:[1,4,12],rotation:[0,1.58,0],material:"ground"}),(0,u.jsx)(HE,{position:[8.5,0,-14.5],args:[1,4,12],rotation:[0,1.58,0],material:"ground"}),(0,u.jsx)(HE,{position:[-13.2,0,12.5],args:[1,4,15],material:"ground"}),(0,u.jsx)(HE,{position:[-13.2,0,-6.5],args:[1,4,15],material:"ground"}),(0,u.jsx)(HE,{position:[-7.8,0,20],args:[1,4,12],rotation:[0,1.58,0],material:"ground"}),(0,u.jsx)(HE,{position:[-7.8,0,-14.5],args:[1,4,12],rotation:[0,1.58,0],material:"ground"}),(0,u.jsx)(HE,{position:[0,0,-7],args:[7,4,16],rotation:[0,1.58,0],material:"ground"}),(0,u.jsx)(HE,{position:[8.9,0,0],args:[3,4,16],rotation:[0,0,0],material:"ground"}),(0,u.jsx)(HE,{position:[-8.7,0,-1],args:[3,4,16],rotation:[0,0,0],material:"ground"}),(0,u.jsx)(HE,{position:[0,0,6.8],args:[2.6,4,2.6],rotation:[0,1.58,0],material:"ground"})]})}function XE(e){var n=e.mixer,i=e.actions,r=(0,t.useRef)(),a=bZ("./models/ece.glb"),o=a.nodes,s=a.materials,l=a.animations,c=bZ("./models/ege_idle.glb").animations,g=bZ("./models/ege_walking.glb").animations,d=bZ("./models/ege_jump.glb").animations;return(0,t.useEffect)((function(){i.default=n.clipAction(l[0],r.current),i.walk=n.clipAction(g[0],r.current),i.jump=n.clipAction(d[0],r.current),i.jump.loop=rd,i.jump.clampWhenFinished=!0,i.idle=n.clipAction(c[0],r.current),i.walk.play()})),(0,u.jsx)("group",{ref:r,dispose:null,children:(0,u.jsx)("group",{name:"Scene",children:(0,u.jsxs)("group",{name:"Armature",rotation:[Math.PI/2,0,0],scale:.01,children:[(0,u.jsx)("primitive",{object:o.mixamorigHips}),(0,u.jsx)("skinnedMesh",{geometry:o.ece_gozler.geometry,material:s.ece_goz,skeleton:o.ece_gozler.skeleton}),(0,u.jsx)("skinnedMesh",{geometry:o.ece_ayak.geometry,material:s.ece_ayakkabi,skeleton:o.ece_ayak.skeleton}),(0,u.jsx)("skinnedMesh",{geometry:o.ece_tshirt.geometry,material:s.ece_tshirt,skeleton:o.ece_tshirt.skeleton}),(0,u.jsx)("skinnedMesh",{geometry:o.ece_pnt.geometry,material:s.ece_pnt,skeleton:o.ece_pnt.skeleton}),(0,u.jsx)("skinnedMesh",{geometry:o.ece_eller.geometry,material:s.ece_kol,skeleton:o.ece_eller.skeleton}),(0,u.jsx)("skinnedMesh",{geometry:o.ece_sac.geometry,material:s.ece_sac,skeleton:o.ece_sac.skeleton}),(0,u.jsx)("skinnedMesh",{geometry:o.ece_kafa.geometry,material:s.ece_kafa,skeleton:o.ece_kafa.skeleton})]})})})}function YE(e){var n=e.mixer,i=e.actions,r=(0,t.useRef)(),a=bZ("./models/ege.glb"),o=a.nodes,s=a.materials,l=a.animations,c=bZ("./models/ege_idle.glb").animations,g=bZ("./models/ege_walking.glb").animations,d=bZ("./models/ege_jump.glb").animations;return(0,t.useEffect)((function(){i.default=n.clipAction(l[0],r.current),i.walk=n.clipAction(g[0],r.current),i.jump=n.clipAction(d[0],r.current),i.jump.loop=rd,i.jump.clampWhenFinished=!0,i.idle=n.clipAction(c[0],r.current),i.walk.play()})),(0,u.jsx)("group",{ref:r,dispose:null,children:(0,u.jsx)("group",{name:"Scene",children:(0,u.jsxs)("group",{name:"Armature",rotation:[Math.PI/2,0,0],scale:.01,children:[(0,u.jsx)("primitive",{object:o.mixamorigHips}),(0,u.jsx)("skinnedMesh",{geometry:o.ege_bacak.geometry,material:s.ege_pnt,skeleton:o.ege_bacak.skeleton}),(0,u.jsx)("skinnedMesh",{geometry:o.ege_gozler.geometry,material:s.ege_goz,skeleton:o.ege_gozler.skeleton}),(0,u.jsx)("skinnedMesh",{geometry:o.ege_ayakkabi.geometry,material:s.ege_ayakkabi,skeleton:o.ege_ayakkabi.skeleton}),(0,u.jsx)("skinnedMesh",{geometry:o.ege_govde.geometry,material:s.ege_tshirt,skeleton:o.ege_govde.skeleton}),(0,u.jsx)("skinnedMesh",{geometry:o.ege_kafa.geometry,material:s.ege_kafa,skeleton:o.ege_kafa.skeleton}),(0,u.jsx)("skinnedMesh",{geometry:o.ege_kol.geometry,material:s.ege_kol,skeleton:o.ege_kol.skeleton}),(0,u.jsx)("skinnedMesh",{geometry:o.ege_sac.geometry,material:s.ege_sac,skeleton:o.ege_sac.skeleton})]})})})}bZ.preload(["./models/ece.glb","./models/ege_walking.glb","./models/ege_jump.glb","./models/ege_idle.glb"]),bZ.preload(["./models/ege.glb","./models/ege_walking.glb","./models/ege_jump.glb","./models/ege_idle.glb"]);var EE=function(){function e(t){ka(this,e),void 0===t&&(t=[0,0,0,0,0,0,0,0,0]),this.elements=t}return Xe(e,[{key:"identity",value:function(){var e=this.elements;e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1}},{key:"setZero",value:function(){var e=this.elements;e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e[8]=0}},{key:"setTrace",value:function(e){var t=this.elements;t[0]=e.x,t[4]=e.y,t[8]=e.z}},{key:"getTrace",value:function(e){void 0===e&&(e=new LE);var t=this.elements;return e.x=t[0],e.y=t[4],e.z=t[8],e}},{key:"vmult",value:function(e,t){void 0===t&&(t=new LE);var n=this.elements,i=e.x,r=e.y,a=e.z;return t.x=n[0]*i+n[1]*r+n[2]*a,t.y=n[3]*i+n[4]*r+n[5]*a,t.z=n[6]*i+n[7]*r+n[8]*a,t}},{key:"smult",value:function(e){for(var t=0;t<this.elements.length;t++)this.elements[t]*=e}},{key:"mmult",value:function(t,n){void 0===n&&(n=new e);var i=this.elements,r=t.elements,a=n.elements,o=i[0],s=i[1],l=i[2],c=i[3],u=i[4],g=i[5],d=i[6],h=i[7],f=i[8],p=r[0],I=r[1],C=r[2],m=r[3],v=r[4],A=r[5],b=r[6],y=r[7],G=r[8];return a[0]=o*p+s*m+l*b,a[1]=o*I+s*v+l*y,a[2]=o*C+s*A+l*G,a[3]=c*p+u*m+g*b,a[4]=c*I+u*v+g*y,a[5]=c*C+u*A+g*G,a[6]=d*p+h*m+f*b,a[7]=d*I+h*v+f*y,a[8]=d*C+h*A+f*G,n}},{key:"scale",value:function(t,n){void 0===n&&(n=new e);for(var i=this.elements,r=n.elements,a=0;3!==a;a++)r[3*a+0]=t.x*i[3*a+0],r[3*a+1]=t.y*i[3*a+1],r[3*a+2]=t.z*i[3*a+2];return n}},{key:"solve",value:function(e,t){void 0===t&&(t=new LE);var n,i,r=[];for(n=0;n<12;n++)r.push(0);for(n=0;n<3;n++)for(i=0;i<3;i++)r[n+4*i]=this.elements[n+3*i];r[3]=e.x,r[7]=e.y,r[11]=e.z;var a,o,s=3,l=s;do{if(0===r[(n=l-s)+4*n])for(i=n+1;i<l;i++)if(0!==r[n+4*i]){a=4;do{r[(o=4-a)+4*n]+=r[o+4*i]}while(--a);break}if(0!==r[n+4*n])for(i=n+1;i<l;i++){var c=r[n+4*i]/r[n+4*n];a=4;do{r[(o=4-a)+4*i]=o<=n?0:r[o+4*i]-r[o+4*n]*c}while(--a)}}while(--s);if(t.z=r[11]/r[10],t.y=(r[7]-r[6]*t.z)/r[5],t.x=(r[3]-r[2]*t.z-r[1]*t.y)/r[0],isNaN(t.x)||isNaN(t.y)||isNaN(t.z)||t.x===1/0||t.y===1/0||t.z===1/0)throw"Could not solve equation! Got x=[".concat(t.toString(),"], b=[").concat(e.toString(),"], A=[").concat(this.toString(),"]");return t}},{key:"e",value:function(e,t,n){if(void 0===n)return this.elements[t+3*e];this.elements[t+3*e]=n}},{key:"copy",value:function(e){for(var t=0;t<e.elements.length;t++)this.elements[t]=e.elements[t];return this}},{key:"toString",value:function(){for(var e="",t=0;t<9;t++)e+=this.elements[t]+",";return e}},{key:"reverse",value:function(t){void 0===t&&(t=new e);var n,i,r=zE;for(n=0;n<3;n++)for(i=0;i<3;i++)r[n+6*i]=this.elements[n+3*i];r[3]=1,r[9]=0,r[15]=0,r[4]=0,r[10]=1,r[16]=0,r[5]=0,r[11]=0,r[17]=1;var a,o,s=3,l=s;do{if(0===r[(n=l-s)+6*n])for(i=n+1;i<l;i++)if(0!==r[n+6*i]){a=6;do{r[(o=6-a)+6*n]+=r[o+6*i]}while(--a);break}if(0!==r[n+6*n])for(i=n+1;i<l;i++){var c=r[n+6*i]/r[n+6*n];a=6;do{r[(o=6-a)+6*i]=o<=n?0:r[o+6*i]-r[o+6*n]*c}while(--a)}}while(--s);n=2;do{i=n-1;do{var u=r[n+6*i]/r[n+6*n];a=6;do{r[(o=6-a)+6*i]=r[o+6*i]-r[o+6*n]*u}while(--a)}while(i--)}while(--n);n=2;do{var g=1/r[n+6*n];a=6;do{r[(o=6-a)+6*n]=r[o+6*n]*g}while(--a)}while(n--);n=2;do{i=2;do{if(o=r[3+i+6*n],isNaN(o)||o===1/0)throw"Could not reverse! A=[".concat(this.toString(),"]");t.e(n,i,o)}while(i--)}while(n--);return t}},{key:"setRotationFromQuaternion",value:function(e){var t=e.x,n=e.y,i=e.z,r=e.w,a=t+t,o=n+n,s=i+i,l=t*a,c=t*o,u=t*s,g=n*o,d=n*s,h=i*s,f=r*a,p=r*o,I=r*s,C=this.elements;return C[0]=1-(g+h),C[1]=c-I,C[2]=u+p,C[3]=c+I,C[4]=1-(l+h),C[5]=d-f,C[6]=u-p,C[7]=d+f,C[8]=1-(l+g),this}},{key:"transpose",value:function(t){void 0===t&&(t=new e);var n,i=this.elements,r=t.elements;return r[0]=i[0],r[4]=i[4],r[8]=i[8],n=i[1],r[1]=i[3],r[3]=n,n=i[2],r[2]=i[6],r[6]=n,n=i[5],r[5]=i[7],r[7]=n,t}}]),e}(),zE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],LE=function(){function e(t,n,i){ka(this,e),void 0===t&&(t=0),void 0===n&&(n=0),void 0===i&&(i=0),this.x=t,this.y=n,this.z=i}return Xe(e,[{key:"cross",value:function(t,n){void 0===n&&(n=new e);var i=t.x,r=t.y,a=t.z,o=this.x,s=this.y,l=this.z;return n.x=s*a-l*r,n.y=l*i-o*a,n.z=o*r-s*i,n}},{key:"set",value:function(e,t,n){return this.x=e,this.y=t,this.z=n,this}},{key:"setZero",value:function(){this.x=this.y=this.z=0}},{key:"vadd",value:function(t,n){if(!n)return new e(this.x+t.x,this.y+t.y,this.z+t.z);n.x=t.x+this.x,n.y=t.y+this.y,n.z=t.z+this.z}},{key:"vsub",value:function(t,n){if(!n)return new e(this.x-t.x,this.y-t.y,this.z-t.z);n.x=this.x-t.x,n.y=this.y-t.y,n.z=this.z-t.z}},{key:"crossmat",value:function(){return new EE([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])}},{key:"normalize",value:function(){var e=this.x,t=this.y,n=this.z,i=Math.sqrt(e*e+t*t+n*n);if(i>0){var r=1/i;this.x*=r,this.y*=r,this.z*=r}else this.x=0,this.y=0,this.z=0;return i}},{key:"unit",value:function(t){void 0===t&&(t=new e);var n=this.x,i=this.y,r=this.z,a=Math.sqrt(n*n+i*i+r*r);return a>0?(a=1/a,t.x=n*a,t.y=i*a,t.z=r*a):(t.x=1,t.y=0,t.z=0),t}},{key:"length",value:function(){var e=this.x,t=this.y,n=this.z;return Math.sqrt(e*e+t*t+n*n)}},{key:"lengthSquared",value:function(){return this.dot(this)}},{key:"distanceTo",value:function(e){var t=this.x,n=this.y,i=this.z,r=e.x,a=e.y,o=e.z;return Math.sqrt((r-t)*(r-t)+(a-n)*(a-n)+(o-i)*(o-i))}},{key:"distanceSquared",value:function(e){var t=this.x,n=this.y,i=this.z,r=e.x,a=e.y,o=e.z;return(r-t)*(r-t)+(a-n)*(a-n)+(o-i)*(o-i)}},{key:"scale",value:function(t,n){void 0===n&&(n=new e);var i=this.x,r=this.y,a=this.z;return n.x=t*i,n.y=t*r,n.z=t*a,n}},{key:"vmul",value:function(t,n){return void 0===n&&(n=new e),n.x=t.x*this.x,n.y=t.y*this.y,n.z=t.z*this.z,n}},{key:"addScaledVector",value:function(t,n,i){return void 0===i&&(i=new e),i.x=this.x+t*n.x,i.y=this.y+t*n.y,i.z=this.z+t*n.z,i}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"isZero",value:function(){return 0===this.x&&0===this.y&&0===this.z}},{key:"negate",value:function(t){return void 0===t&&(t=new e),t.x=-this.x,t.y=-this.y,t.z=-this.z,t}},{key:"tangents",value:function(e,t){var n=this.length();if(n>0){var i=KE,r=1/n;i.set(this.x*r,this.y*r,this.z*r);var a=_E;Math.abs(i.x)<.9?(a.set(1,0,0),i.cross(a,e)):(a.set(0,1,0),i.cross(a,e)),i.cross(e,t)}else e.set(1,0,0),t.set(0,1,0)}},{key:"toString",value:function(){return"".concat(this.x,",").concat(this.y,",").concat(this.z)}},{key:"toArray",value:function(){return[this.x,this.y,this.z]}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"lerp",value:function(e,t,n){var i=this.x,r=this.y,a=this.z;n.x=i+(e.x-i)*t,n.y=r+(e.y-r)*t,n.z=a+(e.z-a)*t}},{key:"almostEquals",value:function(e,t){return void 0===t&&(t=1e-6),!(Math.abs(this.x-e.x)>t||Math.abs(this.y-e.y)>t||Math.abs(this.z-e.z)>t)}},{key:"almostZero",value:function(e){return void 0===e&&(e=1e-6),!(Math.abs(this.x)>e||Math.abs(this.y)>e||Math.abs(this.z)>e)}},{key:"isAntiparallelTo",value:function(e,t){return this.negate(PE),PE.almostEquals(e,t)}},{key:"clone",value:function(){return new e(this.x,this.y,this.z)}}]),e}();LE.ZERO=new LE(0,0,0),LE.UNIT_X=new LE(1,0,0),LE.UNIT_Y=new LE(0,1,0),LE.UNIT_Z=new LE(0,0,1);var KE=new LE,_E=new LE,PE=new LE,DE=function(){function e(t){ka(this,e),void 0===t&&(t={}),this.lowerBound=new LE,this.upperBound=new LE,t.lowerBound&&this.lowerBound.copy(t.lowerBound),t.upperBound&&this.upperBound.copy(t.upperBound)}return Xe(e,[{key:"setFromPoints",value:function(e,t,n,i){var r=this.lowerBound,a=this.upperBound,o=n;r.copy(e[0]),o&&o.vmult(r,r),a.copy(r);for(var s=1;s<e.length;s++){var l=e[s];o&&(o.vmult(l,OE),l=OE),l.x>a.x&&(a.x=l.x),l.x<r.x&&(r.x=l.x),l.y>a.y&&(a.y=l.y),l.y<r.y&&(r.y=l.y),l.z>a.z&&(a.z=l.z),l.z<r.z&&(r.z=l.z)}return t&&(t.vadd(r,r),t.vadd(a,a)),i&&(r.x-=i,r.y-=i,r.z-=i,a.x+=i,a.y+=i,a.z+=i),this}},{key:"copy",value:function(e){return this.lowerBound.copy(e.lowerBound),this.upperBound.copy(e.upperBound),this}},{key:"clone",value:function(){return(new e).copy(this)}},{key:"extend",value:function(e){this.lowerBound.x=Math.min(this.lowerBound.x,e.lowerBound.x),this.upperBound.x=Math.max(this.upperBound.x,e.upperBound.x),this.lowerBound.y=Math.min(this.lowerBound.y,e.lowerBound.y),this.upperBound.y=Math.max(this.upperBound.y,e.upperBound.y),this.lowerBound.z=Math.min(this.lowerBound.z,e.lowerBound.z),this.upperBound.z=Math.max(this.upperBound.z,e.upperBound.z)}},{key:"overlaps",value:function(e){var t=this.lowerBound,n=this.upperBound,i=e.lowerBound,r=e.upperBound,a=i.x<=n.x&&n.x<=r.x||t.x<=r.x&&r.x<=n.x,o=i.y<=n.y&&n.y<=r.y||t.y<=r.y&&r.y<=n.y,s=i.z<=n.z&&n.z<=r.z||t.z<=r.z&&r.z<=n.z;return a&&o&&s}},{key:"volume",value:function(){var e=this.lowerBound,t=this.upperBound;return(t.x-e.x)*(t.y-e.y)*(t.z-e.z)}},{key:"contains",value:function(e){var t=this.lowerBound,n=this.upperBound,i=e.lowerBound,r=e.upperBound;return t.x<=i.x&&n.x>=r.x&&t.y<=i.y&&n.y>=r.y&&t.z<=i.z&&n.z>=r.z}},{key:"getCorners",value:function(e,t,n,i,r,a,o,s){var l=this.lowerBound,c=this.upperBound;e.copy(l),t.set(c.x,l.y,l.z),n.set(c.x,c.y,l.z),i.set(l.x,c.y,c.z),r.set(c.x,l.y,c.z),a.set(l.x,c.y,l.z),o.set(l.x,l.y,c.z),s.copy(c)}},{key:"toLocalFrame",value:function(e,t){var n=UE,i=n[0],r=n[1],a=n[2],o=n[3],s=n[4],l=n[5],c=n[6],u=n[7];this.getCorners(i,r,a,o,s,l,c,u);for(var g=0;8!==g;g++){var d=n[g];e.pointToLocal(d,d)}return t.setFromPoints(n)}},{key:"toWorldFrame",value:function(e,t){var n=UE,i=n[0],r=n[1],a=n[2],o=n[3],s=n[4],l=n[5],c=n[6],u=n[7];this.getCorners(i,r,a,o,s,l,c,u);for(var g=0;8!==g;g++){var d=n[g];e.pointToWorld(d,d)}return t.setFromPoints(n)}},{key:"overlapsRay",value:function(e){var t=e.direction,n=e.from,i=1/t.x,r=1/t.y,a=1/t.z,o=(this.lowerBound.x-n.x)*i,s=(this.upperBound.x-n.x)*i,l=(this.lowerBound.y-n.y)*r,c=(this.upperBound.y-n.y)*r,u=(this.lowerBound.z-n.z)*a,g=(this.upperBound.z-n.z)*a,d=Math.max(Math.max(Math.min(o,s),Math.min(l,c)),Math.min(u,g)),h=Math.min(Math.min(Math.max(o,s),Math.max(l,c)),Math.max(u,g));return!(h<0)&&!(d>h)}}]),e}(),OE=new LE,UE=[new LE,new LE,new LE,new LE,new LE,new LE,new LE,new LE],jE=function(){function e(){ka(this,e)}return Xe(e,[{key:"addEventListener",value:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;return void 0===n[e]&&(n[e]=[]),n[e].includes(t)||n[e].push(t),this}},{key:"hasEventListener",value:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return!(void 0===n[e]||!n[e].includes(t))}},{key:"hasAnyEventListener",value:function(e){return void 0!==this._listeners&&void 0!==this._listeners[e]}},{key:"removeEventListener",value:function(e,t){if(void 0===this._listeners)return this;var n=this._listeners;if(void 0===n[e])return this;var i=n[e].indexOf(t);return-1!==i&&n[e].splice(i,1),this}},{key:"dispatchEvent",value:function(e){if(void 0===this._listeners)return this;var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=0,i=t.length;n<i;n++)t[n].call(this,e)}return this}}]),e}(),JE=function(){function e(t,n,i,r){ka(this,e),void 0===t&&(t=0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=1),this.x=t,this.y=n,this.z=i,this.w=r}return Xe(e,[{key:"set",value:function(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}},{key:"toString",value:function(){return"".concat(this.x,",").concat(this.y,",").concat(this.z,",").concat(this.w)}},{key:"toArray",value:function(){return[this.x,this.y,this.z,this.w]}},{key:"setFromAxisAngle",value:function(e,t){var n=Math.sin(.5*t);return this.x=e.x*n,this.y=e.y*n,this.z=e.z*n,this.w=Math.cos(.5*t),this}},{key:"toAxisAngle",value:function(e){void 0===e&&(e=new LE),this.normalize();var t=2*Math.acos(this.w),n=Math.sqrt(1-this.w*this.w);return n<.001?(e.x=this.x,e.y=this.y,e.z=this.z):(e.x=this.x/n,e.y=this.y/n,e.z=this.z/n),[e,t]}},{key:"setFromVectors",value:function(e,t){if(e.isAntiparallelTo(t)){var n=QE,i=qE;e.tangents(n,i),this.setFromAxisAngle(n,Math.PI)}else{var r=e.cross(t);this.x=r.x,this.y=r.y,this.z=r.z,this.w=Math.sqrt(Math.pow(e.length(),2)*Math.pow(t.length(),2))+e.dot(t),this.normalize()}return this}},{key:"mult",value:function(t,n){void 0===n&&(n=new e);var i=this.x,r=this.y,a=this.z,o=this.w,s=t.x,l=t.y,c=t.z,u=t.w;return n.x=i*u+o*s+r*c-a*l,n.y=r*u+o*l+a*s-i*c,n.z=a*u+o*c+i*l-r*s,n.w=o*u-i*s-r*l-a*c,n}},{key:"inverse",value:function(t){void 0===t&&(t=new e);var n=this.x,i=this.y,r=this.z,a=this.w;this.conjugate(t);var o=1/(n*n+i*i+r*r+a*a);return t.x*=o,t.y*=o,t.z*=o,t.w*=o,t}},{key:"conjugate",value:function(t){return void 0===t&&(t=new e),t.x=-this.x,t.y=-this.y,t.z=-this.z,t.w=this.w,t}},{key:"normalize",value:function(){var e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(e=1/e,this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}},{key:"normalizeFast",value:function(){var e=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}},{key:"vmult",value:function(e,t){void 0===t&&(t=new LE);var n=e.x,i=e.y,r=e.z,a=this.x,o=this.y,s=this.z,l=this.w,c=l*n+o*r-s*i,u=l*i+s*n-a*r,g=l*r+a*i-o*n,d=-a*n-o*i-s*r;return t.x=c*l+d*-a+u*-s-g*-o,t.y=u*l+d*-o+g*-a-c*-s,t.z=g*l+d*-s+c*-o-u*-a,t}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this}},{key:"toEuler",value:function(e,t){var n,i,r;void 0===t&&(t="YZX");var a=this.x,o=this.y,s=this.z,l=this.w;if("YZX"!==t)throw new Error("Euler order ".concat(t," not supported yet."));var c=a*o+s*l;if(c>.499&&(n=2*Math.atan2(a,l),i=Math.PI/2,r=0),c<-.499&&(n=-2*Math.atan2(a,l),i=-Math.PI/2,r=0),void 0===n){var u=a*a,g=o*o,d=s*s;n=Math.atan2(2*o*l-2*a*s,1-2*g-2*d),i=Math.asin(2*c),r=Math.atan2(2*a*l-2*o*s,1-2*u-2*d)}e.y=n,e.z=i,e.x=r}},{key:"setFromEuler",value:function(e,t,n,i){void 0===i&&(i="XYZ");var r=Math.cos(e/2),a=Math.cos(t/2),o=Math.cos(n/2),s=Math.sin(e/2),l=Math.sin(t/2),c=Math.sin(n/2);return"XYZ"===i?(this.x=s*a*o+r*l*c,this.y=r*l*o-s*a*c,this.z=r*a*c+s*l*o,this.w=r*a*o-s*l*c):"YXZ"===i?(this.x=s*a*o+r*l*c,this.y=r*l*o-s*a*c,this.z=r*a*c-s*l*o,this.w=r*a*o+s*l*c):"ZXY"===i?(this.x=s*a*o-r*l*c,this.y=r*l*o+s*a*c,this.z=r*a*c+s*l*o,this.w=r*a*o-s*l*c):"ZYX"===i?(this.x=s*a*o-r*l*c,this.y=r*l*o+s*a*c,this.z=r*a*c-s*l*o,this.w=r*a*o+s*l*c):"YZX"===i?(this.x=s*a*o+r*l*c,this.y=r*l*o+s*a*c,this.z=r*a*c-s*l*o,this.w=r*a*o-s*l*c):"XZY"===i&&(this.x=s*a*o-r*l*c,this.y=r*l*o-s*a*c,this.z=r*a*c+s*l*o,this.w=r*a*o+s*l*c),this}},{key:"clone",value:function(){return new e(this.x,this.y,this.z,this.w)}},{key:"slerp",value:function(t,n,i){void 0===i&&(i=new e);var r,a,o,s,l,c=this.x,u=this.y,g=this.z,d=this.w,h=t.x,f=t.y,p=t.z,I=t.w;return(a=c*h+u*f+g*p+d*I)<0&&(a=-a,h=-h,f=-f,p=-p,I=-I),1-a>1e-6?(r=Math.acos(a),o=Math.sin(r),s=Math.sin((1-n)*r)/o,l=Math.sin(n*r)/o):(s=1-n,l=n),i.x=s*c+l*h,i.y=s*u+l*f,i.z=s*g+l*p,i.w=s*d+l*I,i}},{key:"integrate",value:function(t,n,i,r){void 0===r&&(r=new e);var a=t.x*i.x,o=t.y*i.y,s=t.z*i.z,l=this.x,c=this.y,u=this.z,g=this.w,d=.5*n;return r.x+=d*(a*g+o*u-s*c),r.y+=d*(o*g+s*l-a*u),r.z+=d*(s*g+a*c-o*l),r.w+=d*(-a*l-o*c-s*u),r}}]),e}(),QE=new LE,qE=new LE,$E=function(){function e(t){ka(this,e),void 0===t&&(t={}),this.id=e.idCounter++,this.type=t.type||0,this.boundingSphereRadius=0,this.collisionResponse=!t.collisionResponse||t.collisionResponse,this.collisionFilterGroup=void 0!==t.collisionFilterGroup?t.collisionFilterGroup:1,this.collisionFilterMask=void 0!==t.collisionFilterMask?t.collisionFilterMask:-1,this.material=t.material?t.material:null,this.body=null}return Xe(e,[{key:"updateBoundingSphereRadius",value:function(){throw"computeBoundingSphereRadius() not implemented for shape type ".concat(this.type)}},{key:"volume",value:function(){throw"volume() not implemented for shape type ".concat(this.type)}},{key:"calculateLocalInertia",value:function(e,t){throw"calculateLocalInertia() not implemented for shape type ".concat(this.type)}},{key:"calculateWorldAABB",value:function(e,t,n,i){throw"calculateWorldAABB() not implemented for shape type ".concat(this.type)}}]),e}();$E.idCounter=0,$E.types={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256};var ez=function(){function e(t){ka(this,e),void 0===t&&(t={}),this.position=new LE,this.quaternion=new JE,t.position&&this.position.copy(t.position),t.quaternion&&this.quaternion.copy(t.quaternion)}return Xe(e,[{key:"pointToLocal",value:function(t,n){return e.pointToLocalFrame(this.position,this.quaternion,t,n)}},{key:"pointToWorld",value:function(t,n){return e.pointToWorldFrame(this.position,this.quaternion,t,n)}},{key:"vectorToWorldFrame",value:function(e,t){return void 0===t&&(t=new LE),this.quaternion.vmult(e,t),t}}],[{key:"pointToLocalFrame",value:function(e,t,n,i){return void 0===i&&(i=new LE),n.vsub(e,i),t.conjugate(tz),tz.vmult(i,i),i}},{key:"pointToWorldFrame",value:function(e,t,n,i){return void 0===i&&(i=new LE),t.vmult(n,i),i.vadd(e,i),i}},{key:"vectorToWorldFrame",value:function(e,t,n){return void 0===n&&(n=new LE),e.vmult(t,n),n}},{key:"vectorToLocalFrame",value:function(e,t,n,i){return void 0===i&&(i=new LE),t.w*=-1,t.vmult(n,i),t.w*=-1,i}}]),e}(),tz=new JE,nz=function(e){kc(n,e);var t=Vc(n);function n(e){var i;ka(this,n),void 0===e&&(e={});var r=e,a=r.vertices,o=void 0===a?[]:a,s=r.faces,l=void 0===s?[]:s,c=r.normals,u=void 0===c?[]:c,g=r.axes,d=r.boundingSphereRadius;return(i=t.call(this,{type:$E.types.CONVEXPOLYHEDRON})).vertices=o,i.faces=l,i.faceNormals=u,0===i.faceNormals.length&&i.computeNormals(),d?i.boundingSphereRadius=d:i.updateBoundingSphereRadius(),i.worldVertices=[],i.worldVerticesNeedsUpdate=!0,i.worldFaceNormals=[],i.worldFaceNormalsNeedsUpdate=!0,i.uniqueAxes=g?g.slice():null,i.uniqueEdges=[],i.computeEdges(),i}return Xe(n,[{key:"computeEdges",value:function(){var e=this.faces,t=this.vertices,n=this.uniqueEdges;n.length=0;for(var i=new LE,r=0;r!==e.length;r++)for(var a=e[r],o=a.length,s=0;s!==o;s++){var l=(s+1)%o;t[a[s]].vsub(t[a[l]],i),i.normalize();for(var c=!1,u=0;u!==n.length;u++)if(n[u].almostEquals(i)||n[u].almostEquals(i)){c=!0;break}c||n.push(i.clone())}}},{key:"computeNormals",value:function(){this.faceNormals.length=this.faces.length;for(var e=0;e<this.faces.length;e++){for(var t=0;t<this.faces[e].length;t++)if(!this.vertices[this.faces[e][t]])throw new Error("Vertex ".concat(this.faces[e][t]," not found!"));var n=this.faceNormals[e]||new LE;this.getFaceNormal(e,n),n.negate(n),this.faceNormals[e]=n;var i=this.vertices[this.faces[e][0]];if(n.dot(i)<0){console.error(".faceNormals[".concat(e,"] = Vec3(").concat(n.toString(),") looks like it points into the shape? The vertices follow. Make sure they are ordered CCW around the normal, using the right hand rule."));for(var r=0;r<this.faces[e].length;r++)console.warn(".vertices[".concat(this.faces[e][r],"] = Vec3(").concat(this.vertices[this.faces[e][r]].toString(),")"))}}}},{key:"getFaceNormal",value:function(e,t){var i=this.faces[e],r=this.vertices[i[0]],a=this.vertices[i[1]],o=this.vertices[i[2]];n.computeNormal(r,a,o,t)}},{key:"clipAgainstHull",value:function(e,t,n,i,r,a,o,s,l){for(var c=new LE,u=-1,g=-Number.MAX_VALUE,d=0;d<n.faces.length;d++){c.copy(n.faceNormals[d]),r.vmult(c,c);var h=c.dot(a);h>g&&(g=h,u=d)}for(var f=[],p=0;p<n.faces[u].length;p++){var I=n.vertices[n.faces[u][p]],C=new LE;C.copy(I),r.vmult(C,C),i.vadd(C,C),f.push(C)}u>=0&&this.clipFaceAgainstHull(a,e,t,f,o,s,l)}},{key:"findSeparatingAxis",value:function(e,t,n,i,r,a,o,s){var l=new LE,c=new LE,u=new LE,g=new LE,d=new LE,h=new LE,f=Number.MAX_VALUE,p=this;if(p.uniqueAxes)for(var I=0;I!==p.uniqueAxes.length;I++){n.vmult(p.uniqueAxes[I],l);var C=p.testSepAxis(l,e,t,n,i,r);if(!1===C)return!1;C<f&&(f=C,a.copy(l))}else for(var m=o?o.length:p.faces.length,v=0;v<m;v++){var A=o?o[v]:v;l.copy(p.faceNormals[A]),n.vmult(l,l);var b=p.testSepAxis(l,e,t,n,i,r);if(!1===b)return!1;b<f&&(f=b,a.copy(l))}if(e.uniqueAxes)for(var y=0;y!==e.uniqueAxes.length;y++){r.vmult(e.uniqueAxes[y],c);var G=p.testSepAxis(c,e,t,n,i,r);if(!1===G)return!1;G<f&&(f=G,a.copy(c))}else for(var w=s?s.length:e.faces.length,B=0;B<w;B++){var x=s?s[B]:B;c.copy(e.faceNormals[x]),r.vmult(c,c);var S=p.testSepAxis(c,e,t,n,i,r);if(!1===S)return!1;S<f&&(f=S,a.copy(c))}for(var Z=0;Z!==p.uniqueEdges.length;Z++){n.vmult(p.uniqueEdges[Z],g);for(var k=0;k!==e.uniqueEdges.length;k++)if(r.vmult(e.uniqueEdges[k],d),g.cross(d,h),!h.almostZero()){h.normalize();var R=p.testSepAxis(h,e,t,n,i,r);if(!1===R)return!1;R<f&&(f=R,a.copy(h))}}return i.vsub(t,u),u.dot(a)>0&&a.negate(a),!0}},{key:"testSepAxis",value:function(e,t,i,r,a,o){n.project(this,e,i,r,iz),n.project(t,e,a,o,rz);var s=iz[0],l=iz[1],c=rz[0],u=rz[1];if(s<u||c<l)return!1;var g=s-u,d=c-l;return g<d?g:d}},{key:"calculateLocalInertia",value:function(e,t){var n=new LE,i=new LE;this.computeLocalAABB(i,n);var r=n.x-i.x,a=n.y-i.y,o=n.z-i.z;t.x=1/12*e*(2*a*2*a+2*o*2*o),t.y=1/12*e*(2*r*2*r+2*o*2*o),t.z=1/12*e*(2*a*2*a+2*r*2*r)}},{key:"getPlaneConstantOfFace",value:function(e){var t=this.faces[e],n=this.faceNormals[e],i=this.vertices[t[0]];return-n.dot(i)}},{key:"clipFaceAgainstHull",value:function(e,t,n,i,r,a,o){for(var s=new LE,l=new LE,c=new LE,u=new LE,g=new LE,d=new LE,h=new LE,f=new LE,p=this,I=i,C=[],m=-1,v=Number.MAX_VALUE,A=0;A<p.faces.length;A++){s.copy(p.faceNormals[A]),n.vmult(s,s);var b=s.dot(e);b<v&&(v=b,m=A)}if(!(m<0)){var y=p.faces[m];y.connectedFaces=[];for(var G=0;G<p.faces.length;G++)for(var w=0;w<p.faces[G].length;w++)-1!==y.indexOf(p.faces[G][w])&&G!==m&&-1===y.connectedFaces.indexOf(G)&&y.connectedFaces.push(G);for(var B=y.length,x=0;x<B;x++){var S=p.vertices[y[x]],Z=p.vertices[y[(x+1)%B]];S.vsub(Z,l),c.copy(l),n.vmult(c,c),t.vadd(c,c),u.copy(this.faceNormals[m]),n.vmult(u,u),t.vadd(u,u),c.cross(u,g),g.negate(g),d.copy(S),n.vmult(d,d),t.vadd(d,d);var k=y.connectedFaces[x];h.copy(this.faceNormals[k]);var R=this.getPlaneConstantOfFace(k);f.copy(h),n.vmult(f,f);var W=R-f.dot(t);for(this.clipFaceAgainstPlane(I,C,f,W);I.length;)I.shift();for(;C.length;)I.push(C.shift())}h.copy(this.faceNormals[m]);var M=this.getPlaneConstantOfFace(m);f.copy(h),n.vmult(f,f);for(var V=M-f.dot(t),F=0;F<I.length;F++){var N=f.dot(I[F])+V;if(N<=r&&(console.log("clamped: depth=".concat(N," to minDist=").concat(r)),N=r),N<=a){var H=I[F];if(N<=1e-6){var T={point:H,normal:f,depth:N};o.push(T)}}}}}},{key:"clipFaceAgainstPlane",value:function(e,t,n,i){var r,a,o=e.length;if(o<2)return t;var s=e[e.length-1],l=e[0];r=n.dot(s)+i;for(var c=0;c<o;c++){if(l=e[c],a=n.dot(l)+i,r<0)if(a<0){var u=new LE;u.copy(l),t.push(u)}else{var g=new LE;s.lerp(l,r/(r-a),g),t.push(g)}else if(a<0){var d=new LE;s.lerp(l,r/(r-a),d),t.push(d),t.push(l)}s=l,r=a}return t}},{key:"computeWorldVertices",value:function(e,t){for(;this.worldVertices.length<this.vertices.length;)this.worldVertices.push(new LE);for(var n=this.vertices,i=this.worldVertices,r=0;r!==this.vertices.length;r++)t.vmult(n[r],i[r]),e.vadd(i[r],i[r]);this.worldVerticesNeedsUpdate=!1}},{key:"computeLocalAABB",value:function(e,t){var n=this.vertices;e.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),t.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(var i=0;i<this.vertices.length;i++){var r=n[i];r.x<e.x?e.x=r.x:r.x>t.x&&(t.x=r.x),r.y<e.y?e.y=r.y:r.y>t.y&&(t.y=r.y),r.z<e.z?e.z=r.z:r.z>t.z&&(t.z=r.z)}}},{key:"computeWorldFaceNormals",value:function(e){for(var t=this.faceNormals.length;this.worldFaceNormals.length<t;)this.worldFaceNormals.push(new LE);for(var n=this.faceNormals,i=this.worldFaceNormals,r=0;r!==t;r++)e.vmult(n[r],i[r]);this.worldFaceNormalsNeedsUpdate=!1}},{key:"updateBoundingSphereRadius",value:function(){for(var e=0,t=this.vertices,n=0;n!==t.length;n++){var i=t[n].lengthSquared();i>e&&(e=i)}this.boundingSphereRadius=Math.sqrt(e)}},{key:"calculateWorldAABB",value:function(e,t,n,i){for(var r,a,o,s,l,c,u=this.vertices,g=new LE,d=0;d<u.length;d++){g.copy(u[d]),t.vmult(g,g),e.vadd(g,g);var h=g;(void 0===r||h.x<r)&&(r=h.x),(void 0===s||h.x>s)&&(s=h.x),(void 0===a||h.y<a)&&(a=h.y),(void 0===l||h.y>l)&&(l=h.y),(void 0===o||h.z<o)&&(o=h.z),(void 0===c||h.z>c)&&(c=h.z)}n.set(r,a,o),i.set(s,l,c)}},{key:"volume",value:function(){return 4*Math.PI*this.boundingSphereRadius/3}},{key:"getAveragePointLocal",value:function(e){void 0===e&&(e=new LE);for(var t=this.vertices,n=0;n<t.length;n++)e.vadd(t[n],e);return e.scale(1/t.length,e),e}},{key:"transformAllPoints",value:function(e,t){var n=this.vertices.length,i=this.vertices;if(t){for(var r=0;r<n;r++){var a=i[r];t.vmult(a,a)}for(var o=0;o<this.faceNormals.length;o++){var s=this.faceNormals[o];t.vmult(s,s)}}if(e)for(var l=0;l<n;l++){var c=i[l];c.vadd(e,c)}}},{key:"pointIsInside",value:function(e){var t=this.vertices,n=this.faces,i=this.faceNormals,r=new LE;this.getAveragePointLocal(r);for(var a=0;a<this.faces.length;a++){var o=i[a],s=t[n[a][0]],l=new LE;e.vsub(s,l);var c=o.dot(l),u=new LE;r.vsub(s,u);var g=o.dot(u);if(c<0&&g>0||c>0&&g<0)return!1}return-1}}],[{key:"computeNormal",value:function(e,t,n,i){var r=new LE,a=new LE;t.vsub(e,a),n.vsub(t,r),r.cross(a,i),i.isZero()||i.normalize()}},{key:"project",value:function(e,t,n,i,r){var a=e.vertices.length,o=az,s=0,l=0,c=oz,u=e.vertices;c.setZero(),ez.vectorToLocalFrame(n,i,t,o),ez.pointToLocalFrame(n,i,c,c);var g=c.dot(o);l=s=u[0].dot(o);for(var d=1;d<a;d++){var h=u[d].dot(o);h>s&&(s=h),h<l&&(l=h)}if((l-=g)>(s-=g)){var f=l;l=s,s=f}r[0]=s,r[1]=l}}]),n}($E),iz=[],rz=[],az=(new LE,new LE),oz=new LE,sz=function(e){kc(n,e);var t=Vc(n);function n(e){var i;return ka(this,n),(i=t.call(this,{type:$E.types.BOX})).halfExtents=e,i.convexPolyhedronRepresentation=null,i.updateConvexPolyhedronRepresentation(),i.updateBoundingSphereRadius(),i}return Xe(n,[{key:"updateConvexPolyhedronRepresentation",value:function(){var e=this.halfExtents.x,t=this.halfExtents.y,n=this.halfExtents.z,i=LE,r=[new i(-e,-t,-n),new i(e,-t,-n),new i(e,t,-n),new i(-e,t,-n),new i(-e,-t,n),new i(e,-t,n),new i(e,t,n),new i(-e,t,n)],a=[new i(0,0,1),new i(0,1,0),new i(1,0,0)],o=new nz({vertices:r,faces:[[3,2,1,0],[4,5,6,7],[5,4,0,1],[2,3,7,6],[0,4,7,3],[1,2,6,5]],axes:a});this.convexPolyhedronRepresentation=o,o.material=this.material}},{key:"calculateLocalInertia",value:function(e,t){return void 0===t&&(t=new LE),n.calculateInertia(this.halfExtents,e,t),t}},{key:"getSideNormals",value:function(e,t){var n=e,i=this.halfExtents;if(n[0].set(i.x,0,0),n[1].set(0,i.y,0),n[2].set(0,0,i.z),n[3].set(-i.x,0,0),n[4].set(0,-i.y,0),n[5].set(0,0,-i.z),void 0!==t)for(var r=0;r!==n.length;r++)t.vmult(n[r],n[r]);return n}},{key:"volume",value:function(){return 8*this.halfExtents.x*this.halfExtents.y*this.halfExtents.z}},{key:"updateBoundingSphereRadius",value:function(){this.boundingSphereRadius=this.halfExtents.length()}},{key:"forEachWorldCorner",value:function(e,t,n){for(var i=this.halfExtents,r=[[i.x,i.y,i.z],[-i.x,i.y,i.z],[-i.x,-i.y,i.z],[-i.x,-i.y,-i.z],[i.x,-i.y,-i.z],[i.x,i.y,-i.z],[-i.x,i.y,-i.z],[i.x,-i.y,i.z]],a=0;a<r.length;a++)lz.set(r[a][0],r[a][1],r[a][2]),t.vmult(lz,lz),e.vadd(lz,lz),n(lz.x,lz.y,lz.z)}},{key:"calculateWorldAABB",value:function(e,t,n,i){var r=this.halfExtents;cz[0].set(r.x,r.y,r.z),cz[1].set(-r.x,r.y,r.z),cz[2].set(-r.x,-r.y,r.z),cz[3].set(-r.x,-r.y,-r.z),cz[4].set(r.x,-r.y,-r.z),cz[5].set(r.x,r.y,-r.z),cz[6].set(-r.x,r.y,-r.z),cz[7].set(r.x,-r.y,r.z);var a=cz[0];t.vmult(a,a),e.vadd(a,a),i.copy(a),n.copy(a);for(var o=1;o<8;o++){var s=cz[o];t.vmult(s,s),e.vadd(s,s);var l=s.x,c=s.y,u=s.z;l>i.x&&(i.x=l),c>i.y&&(i.y=c),u>i.z&&(i.z=u),l<n.x&&(n.x=l),c<n.y&&(n.y=c),u<n.z&&(n.z=u)}}}],[{key:"calculateInertia",value:function(e,t,n){var i=e;n.x=1/12*t*(2*i.y*2*i.y+2*i.z*2*i.z),n.y=1/12*t*(2*i.x*2*i.x+2*i.z*2*i.z),n.z=1/12*t*(2*i.y*2*i.y+2*i.x*2*i.x)}}]),n}($E),lz=new LE,cz=[new LE,new LE,new LE,new LE,new LE,new LE,new LE,new LE],uz=1,gz=2,dz=4,hz=0,fz=1,pz=2,Iz=function(e){kc(n,e);var t=Vc(n);function n(e){var i;ka(this,n),void 0===e&&(e={}),(i=t.call(this)).id=n.idCounter++,i.index=-1,i.world=null,i.vlambda=new LE,i.collisionFilterGroup="number"===typeof e.collisionFilterGroup?e.collisionFilterGroup:1,i.collisionFilterMask="number"===typeof e.collisionFilterMask?e.collisionFilterMask:-1,i.collisionResponse="boolean"!==typeof e.collisionResponse||e.collisionResponse,i.position=new LE,i.previousPosition=new LE,i.interpolatedPosition=new LE,i.initPosition=new LE,e.position&&(i.position.copy(e.position),i.previousPosition.copy(e.position),i.interpolatedPosition.copy(e.position),i.initPosition.copy(e.position)),i.velocity=new LE,e.velocity&&i.velocity.copy(e.velocity),i.initVelocity=new LE,i.force=new LE;var r="number"===typeof e.mass?e.mass:0;return i.mass=r,i.invMass=r>0?1/r:0,i.material=e.material||null,i.linearDamping="number"===typeof e.linearDamping?e.linearDamping:.01,i.type=r<=0?n.STATIC:n.DYNAMIC,typeof e.type===typeof n.STATIC&&(i.type=e.type),i.allowSleep="undefined"===typeof e.allowSleep||e.allowSleep,i.sleepState=n.AWAKE,i.sleepSpeedLimit="undefined"!==typeof e.sleepSpeedLimit?e.sleepSpeedLimit:.1,i.sleepTimeLimit="undefined"!==typeof e.sleepTimeLimit?e.sleepTimeLimit:1,i.timeLastSleepy=0,i.wakeUpAfterNarrowphase=!1,i.torque=new LE,i.quaternion=new JE,i.initQuaternion=new JE,i.previousQuaternion=new JE,i.interpolatedQuaternion=new JE,e.quaternion&&(i.quaternion.copy(e.quaternion),i.initQuaternion.copy(e.quaternion),i.previousQuaternion.copy(e.quaternion),i.interpolatedQuaternion.copy(e.quaternion)),i.angularVelocity=new LE,e.angularVelocity&&i.angularVelocity.copy(e.angularVelocity),i.initAngularVelocity=new LE,i.shapes=[],i.shapeOffsets=[],i.shapeOrientations=[],i.inertia=new LE,i.invInertia=new LE,i.invInertiaWorld=new EE,i.invMassSolve=0,i.invInertiaSolve=new LE,i.invInertiaWorldSolve=new EE,i.fixedRotation="undefined"!==typeof e.fixedRotation&&e.fixedRotation,i.angularDamping="undefined"!==typeof e.angularDamping?e.angularDamping:.01,i.linearFactor=new LE(1,1,1),e.linearFactor&&i.linearFactor.copy(e.linearFactor),i.angularFactor=new LE(1,1,1),e.angularFactor&&i.angularFactor.copy(e.angularFactor),i.aabb=new DE,i.aabbNeedsUpdate=!0,i.boundingRadius=0,i.wlambda=new LE,i.isTrigger=Boolean(e.isTrigger),e.shape&&i.addShape(e.shape),i.updateMassProperties(),i}return Xe(n,[{key:"wakeUp",value:function(){var e=this.sleepState;this.sleepState=n.AWAKE,this.wakeUpAfterNarrowphase=!1,e===n.SLEEPING&&this.dispatchEvent(n.wakeupEvent)}},{key:"sleep",value:function(){this.sleepState=n.SLEEPING,this.velocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.wakeUpAfterNarrowphase=!1}},{key:"sleepTick",value:function(e){if(this.allowSleep){var t=this.sleepState,i=this.velocity.lengthSquared()+this.angularVelocity.lengthSquared(),r=Math.pow(this.sleepSpeedLimit,2);t===n.AWAKE&&i<r?(this.sleepState=n.SLEEPY,this.timeLastSleepy=e,this.dispatchEvent(n.sleepyEvent)):t===n.SLEEPY&&i>r?this.wakeUp():t===n.SLEEPY&&e-this.timeLastSleepy>this.sleepTimeLimit&&(this.sleep(),this.dispatchEvent(n.sleepEvent))}}},{key:"updateSolveMassProperties",value:function(){this.sleepState===n.SLEEPING||this.type===n.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve.setZero(),this.invInertiaWorldSolve.setZero()):(this.invMassSolve=this.invMass,this.invInertiaSolve.copy(this.invInertia),this.invInertiaWorldSolve.copy(this.invInertiaWorld))}},{key:"pointToLocalFrame",value:function(e,t){return void 0===t&&(t=new LE),e.vsub(this.position,t),this.quaternion.conjugate().vmult(t,t),t}},{key:"vectorToLocalFrame",value:function(e,t){return void 0===t&&(t=new LE),this.quaternion.conjugate().vmult(e,t),t}},{key:"pointToWorldFrame",value:function(e,t){return void 0===t&&(t=new LE),this.quaternion.vmult(e,t),t.vadd(this.position,t),t}},{key:"vectorToWorldFrame",value:function(e,t){return void 0===t&&(t=new LE),this.quaternion.vmult(e,t),t}},{key:"addShape",value:function(e,t,n){var i=new LE,r=new JE;return t&&i.copy(t),n&&r.copy(n),this.shapes.push(e),this.shapeOffsets.push(i),this.shapeOrientations.push(r),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=this,this}},{key:"removeShape",value:function(e){var t=this.shapes.indexOf(e);return-1===t?(console.warn("Shape does not belong to the body"),this):(this.shapes.splice(t,1),this.shapeOffsets.splice(t,1),this.shapeOrientations.splice(t,1),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=null,this)}},{key:"updateBoundingRadius",value:function(){for(var e=this.shapes,t=this.shapeOffsets,n=e.length,i=0,r=0;r!==n;r++){var a=e[r];a.updateBoundingSphereRadius();var o=t[r].length(),s=a.boundingSphereRadius;o+s>i&&(i=o+s)}this.boundingRadius=i}},{key:"updateAABB",value:function(){for(var e=this.shapes,t=this.shapeOffsets,n=this.shapeOrientations,i=e.length,r=Cz,a=mz,o=this.quaternion,s=this.aabb,l=vz,c=0;c!==i;c++){var u=e[c];o.vmult(t[c],r),r.vadd(this.position,r),o.mult(n[c],a),u.calculateWorldAABB(r,a,l.lowerBound,l.upperBound),0===c?s.copy(l):s.extend(l)}this.aabbNeedsUpdate=!1}},{key:"updateInertiaWorld",value:function(e){var t=this.invInertia;if(t.x!==t.y||t.y!==t.z||e){var n=Az,i=bz;n.setRotationFromQuaternion(this.quaternion),n.transpose(i),n.scale(t,n),n.mmult(i,this.invInertiaWorld)}else;}},{key:"applyForce",value:function(e,t){if(void 0===t&&(t=new LE),this.type===n.DYNAMIC){this.sleepState===n.SLEEPING&&this.wakeUp();var i=yz;t.cross(e,i),this.force.vadd(e,this.force),this.torque.vadd(i,this.torque)}}},{key:"applyLocalForce",value:function(e,t){if(void 0===t&&(t=new LE),this.type===n.DYNAMIC){var i=Gz,r=wz;this.vectorToWorldFrame(e,i),this.vectorToWorldFrame(t,r),this.applyForce(i,r)}}},{key:"applyTorque",value:function(e){this.type===n.DYNAMIC&&(this.sleepState===n.SLEEPING&&this.wakeUp(),this.torque.vadd(e,this.torque))}},{key:"applyImpulse",value:function(e,t){if(void 0===t&&(t=new LE),this.type===n.DYNAMIC){this.sleepState===n.SLEEPING&&this.wakeUp();var i=t,r=Bz;r.copy(e),r.scale(this.invMass,r),this.velocity.vadd(r,this.velocity);var a=xz;i.cross(e,a),this.invInertiaWorld.vmult(a,a),this.angularVelocity.vadd(a,this.angularVelocity)}}},{key:"applyLocalImpulse",value:function(e,t){if(void 0===t&&(t=new LE),this.type===n.DYNAMIC){var i=Sz,r=Zz;this.vectorToWorldFrame(e,i),this.vectorToWorldFrame(t,r),this.applyImpulse(i,r)}}},{key:"updateMassProperties",value:function(){var e=kz;this.invMass=this.mass>0?1/this.mass:0;var t=this.inertia,n=this.fixedRotation;this.updateAABB(),e.set((this.aabb.upperBound.x-this.aabb.lowerBound.x)/2,(this.aabb.upperBound.y-this.aabb.lowerBound.y)/2,(this.aabb.upperBound.z-this.aabb.lowerBound.z)/2),sz.calculateInertia(e,this.mass,t),this.invInertia.set(t.x>0&&!n?1/t.x:0,t.y>0&&!n?1/t.y:0,t.z>0&&!n?1/t.z:0),this.updateInertiaWorld(!0)}},{key:"getVelocityAtWorldPoint",value:function(e,t){var n=new LE;return e.vsub(this.position,n),this.angularVelocity.cross(n,t),this.velocity.vadd(t,t),t}},{key:"integrate",value:function(e,t,i){if(this.previousPosition.copy(this.position),this.previousQuaternion.copy(this.quaternion),(this.type===n.DYNAMIC||this.type===n.KINEMATIC)&&this.sleepState!==n.SLEEPING){var r=this.velocity,a=this.angularVelocity,o=this.position,s=this.force,l=this.torque,c=this.quaternion,u=this.invMass,g=this.invInertiaWorld,d=this.linearFactor,h=u*e;r.x+=s.x*h*d.x,r.y+=s.y*h*d.y,r.z+=s.z*h*d.z;var f=g.elements,p=this.angularFactor,I=l.x*p.x,C=l.y*p.y,m=l.z*p.z;a.x+=e*(f[0]*I+f[1]*C+f[2]*m),a.y+=e*(f[3]*I+f[4]*C+f[5]*m),a.z+=e*(f[6]*I+f[7]*C+f[8]*m),o.x+=r.x*e,o.y+=r.y*e,o.z+=r.z*e,c.integrate(this.angularVelocity,e,this.angularFactor,c),t&&(i?c.normalizeFast():c.normalize()),this.aabbNeedsUpdate=!0,this.updateInertiaWorld()}}}]),n}(jE);Iz.idCounter=0,Iz.COLLIDE_EVENT_NAME="collide",Iz.DYNAMIC=uz,Iz.STATIC=gz,Iz.KINEMATIC=dz,Iz.AWAKE=hz,Iz.SLEEPY=fz,Iz.SLEEPING=pz,Iz.wakeupEvent={type:"wakeup"},Iz.sleepyEvent={type:"sleepy"},Iz.sleepEvent={type:"sleep"};var Cz=new LE,mz=new JE,vz=new DE,Az=new EE,bz=new EE,yz=(new EE,new LE),Gz=new LE,wz=new LE,Bz=new LE,xz=new LE,Sz=new LE,Zz=new LE,kz=new LE;new LE;new LE,new JE,new LE;new LE;new LE;new LE;var Rz=function(){function e(){ka(this,e),this.rayFromWorld=new LE,this.rayToWorld=new LE,this.hitNormalWorld=new LE,this.hitPointWorld=new LE,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}return Xe(e,[{key:"reset",value:function(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}},{key:"abort",value:function(){this.shouldStop=!0}},{key:"set",value:function(e,t,n,i,r,a,o){this.rayFromWorld.copy(e),this.rayToWorld.copy(t),this.hitNormalWorld.copy(n),this.hitPointWorld.copy(i),this.shape=r,this.body=a,this.distance=o}}]),e}(),Wz=1,Mz=2,Vz=4,Fz=function(e,t,n,i,r,a,o){function s(e,t){ka(this,s),void 0===e&&(e=new LE),void 0===t&&(t=new LE),this.from=e.clone(),this.to=t.clone(),this.direction=new LE,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=s.ANY,this.result=new Rz,this.hasHit=!1,this.callback=function(e){}}return Xe(s,[{key:e,get:function(){return this._intersectSphere}},{key:t,get:function(){return this._intersectPlane}},{key:n,get:function(){return this._intersectBox}},{key:i,get:function(){return this._intersectConvex}},{key:r,get:function(){return this._intersectConvex}},{key:a,get:function(){return this._intersectHeightfield}},{key:o,get:function(){return this._intersectTrimesh}},{key:"intersectWorld",value:function(e,t){return this.mode=t.mode||s.ANY,this.result=t.result||new Rz,this.skipBackfaces=!!t.skipBackfaces,this.collisionFilterMask="undefined"!==typeof t.collisionFilterMask?t.collisionFilterMask:-1,this.collisionFilterGroup="undefined"!==typeof t.collisionFilterGroup?t.collisionFilterGroup:-1,this.checkCollisionResponse="undefined"===typeof t.checkCollisionResponse||t.checkCollisionResponse,t.from&&this.from.copy(t.from),t.to&&this.to.copy(t.to),this.callback=t.callback||function(){},this.hasHit=!1,this.result.reset(),this.updateDirection(),this.getAABB(Nz),Hz.length=0,e.broadphase.aabbQuery(e,Nz,Hz),this.intersectBodies(Hz),this.hasHit}},{key:"intersectBody",value:function(e,t){t&&(this.result=t,this.updateDirection());var n=this.checkCollisionResponse;if((!n||e.collisionResponse)&&0!==(this.collisionFilterGroup&e.collisionFilterMask)&&0!==(e.collisionFilterGroup&this.collisionFilterMask))for(var i=Yz,r=Ez,a=0,o=e.shapes.length;a<o;a++){var s=e.shapes[a];if((!n||s.collisionResponse)&&(e.quaternion.mult(e.shapeOrientations[a],r),e.quaternion.vmult(e.shapeOffsets[a],i),i.vadd(e.position,i),this.intersectShape(s,r,i,e),this.result.shouldStop))break}}},{key:"intersectBodies",value:function(e,t){t&&(this.result=t,this.updateDirection());for(var n=0,i=e.length;!this.result.shouldStop&&n<i;n++)this.intersectBody(e[n])}},{key:"updateDirection",value:function(){this.to.vsub(this.from,this.direction),this.direction.normalize()}},{key:"intersectShape",value:function(e,t,n,i){var r=function(e,t,n){n.vsub(e,sL);var i=sL.dot(t);t.scale(i,lL),lL.vadd(e,lL);var r=n.distanceTo(lL);return r}(this.from,this.direction,n);if(!(r>e.boundingSphereRadius)){var a=this[e.type];a&&a.call(this,e,t,n,i,e)}}},{key:"_intersectBox",value:function(e,t,n,i,r){return this._intersectConvex(e.convexPolyhedronRepresentation,t,n,i,r)}},{key:"_intersectPlane",value:function(e,t,n,i,r){var a=this.from,o=this.to,s=this.direction,l=new LE(0,0,1);t.vmult(l,l);var c=new LE;a.vsub(n,c);var u=c.dot(l);if(o.vsub(n,c),!(u*c.dot(l)>0)&&!(a.distanceTo(o)<u)){var g=l.dot(s);if(!(Math.abs(g)<this.precision)){var d=new LE,h=new LE,f=new LE;a.vsub(n,d);var p=-l.dot(d)/g;s.scale(p,h),a.vadd(h,f),this.reportIntersection(l,f,r,i,-1)}}}},{key:"getAABB",value:function(e){var t=e.lowerBound,n=e.upperBound,i=this.to,r=this.from;t.x=Math.min(i.x,r.x),t.y=Math.min(i.y,r.y),t.z=Math.min(i.z,r.z),n.x=Math.max(i.x,r.x),n.y=Math.max(i.y,r.y),n.z=Math.max(i.z,r.z)}},{key:"_intersectHeightfield",value:function(e,t,n,i,r){e.data,e.elementSize;var a=Oz;a.from.copy(this.from),a.to.copy(this.to),ez.pointToLocalFrame(n,t,a.from,a.from),ez.pointToLocalFrame(n,t,a.to,a.to),a.updateDirection();var o,s,l,c,u=Uz;o=s=0,l=c=e.data.length-1;var g=new DE;a.getAABB(g),e.getIndexOfPosition(g.lowerBound.x,g.lowerBound.y,u,!0),o=Math.max(o,u[0]),s=Math.max(s,u[1]),e.getIndexOfPosition(g.upperBound.x,g.upperBound.y,u,!0),l=Math.min(l,u[0]+1),c=Math.min(c,u[1]+1);for(var d=o;d<l;d++)for(var h=s;h<c;h++){if(this.result.shouldStop)return;if(e.getAabbAtIndex(d,h,g),g.overlapsRay(a)){if(e.getConvexTrianglePillar(d,h,!1),ez.pointToWorldFrame(n,t,e.pillarOffset,Dz),this._intersectConvex(e.pillarConvex,t,Dz,i,r,Pz),this.result.shouldStop)return;e.getConvexTrianglePillar(d,h,!0),ez.pointToWorldFrame(n,t,e.pillarOffset,Dz),this._intersectConvex(e.pillarConvex,t,Dz,i,r,Pz)}}}},{key:"_intersectSphere",value:function(e,t,n,i,r){var a=this.from,o=this.to,s=e.radius,l=Math.pow(o.x-a.x,2)+Math.pow(o.y-a.y,2)+Math.pow(o.z-a.z,2),c=2*((o.x-a.x)*(a.x-n.x)+(o.y-a.y)*(a.y-n.y)+(o.z-a.z)*(a.z-n.z)),u=Math.pow(a.x-n.x,2)+Math.pow(a.y-n.y,2)+Math.pow(a.z-n.z,2)-Math.pow(s,2),g=Math.pow(c,2)-4*l*u,d=jz,h=Jz;if(!(g<0))if(0===g)a.lerp(o,g,d),d.vsub(n,h),h.normalize(),this.reportIntersection(h,d,r,i,-1);else{var f=(-c-Math.sqrt(g))/(2*l),p=(-c+Math.sqrt(g))/(2*l);if(f>=0&&f<=1&&(a.lerp(o,f,d),d.vsub(n,h),h.normalize(),this.reportIntersection(h,d,r,i,-1)),this.result.shouldStop)return;p>=0&&p<=1&&(a.lerp(o,p,d),d.vsub(n,h),h.normalize(),this.reportIntersection(h,d,r,i,-1))}}},{key:"_intersectConvex",value:function(e,t,n,i,r,a){for(var o=Qz,l=qz,c=a&&a.faceList||null,u=e.faces,g=e.vertices,d=e.faceNormals,h=this.direction,f=this.from,p=this.to,I=f.distanceTo(p),C=c?c.length:u.length,m=this.result,v=0;!m.shouldStop&&v<C;v++){var A=c?c[v]:v,b=u[A],y=d[A],G=t,w=n;l.copy(g[b[0]]),G.vmult(l,l),l.vadd(w,l),l.vsub(f,l),G.vmult(y,o);var B=h.dot(o);if(!(Math.abs(B)<this.precision)){var x=o.dot(l)/B;if(!(x<0)){h.scale(x,zz),zz.vadd(f,zz),Lz.copy(g[b[0]]),G.vmult(Lz,Lz),w.vadd(Lz,Lz);for(var S=1;!m.shouldStop&&S<b.length-1;S++){Kz.copy(g[b[S]]),_z.copy(g[b[S+1]]),G.vmult(Kz,Kz),G.vmult(_z,_z),w.vadd(Kz,Kz),w.vadd(_z,_z);var Z=zz.distanceTo(f);!s.pointInTriangle(zz,Lz,Kz,_z)&&!s.pointInTriangle(zz,Kz,Lz,_z)||Z>I||this.reportIntersection(o,zz,r,i,A)}}}}}},{key:"_intersectTrimesh",value:function(e,t,n,i,r,a){var o=$z,l=aL,c=oL,u=qz,g=eL,d=tL,h=nL,f=rL,p=iL,I=e.indices;e.vertices;var C=this.from,m=this.to,v=this.direction;c.position.copy(n),c.quaternion.copy(t),ez.vectorToLocalFrame(n,t,v,g),ez.pointToLocalFrame(n,t,C,d),ez.pointToLocalFrame(n,t,m,h),h.x*=e.scale.x,h.y*=e.scale.y,h.z*=e.scale.z,d.x*=e.scale.x,d.y*=e.scale.y,d.z*=e.scale.z,h.vsub(d,g),g.normalize();var A=d.distanceSquared(h);e.tree.rayQuery(this,c,l);for(var b=0,y=l.length;!this.result.shouldStop&&b!==y;b++){var G=l[b];e.getNormal(G,o),e.getVertex(I[3*G],Lz),Lz.vsub(d,u);var w=g.dot(o),B=o.dot(u)/w;if(!(B<0)){g.scale(B,zz),zz.vadd(d,zz),e.getVertex(I[3*G+1],Kz),e.getVertex(I[3*G+2],_z);var x=zz.distanceSquared(d);!s.pointInTriangle(zz,Kz,Lz,_z)&&!s.pointInTriangle(zz,Lz,Kz,_z)||x>A||(ez.vectorToWorldFrame(t,o,p),ez.pointToWorldFrame(n,t,zz,f),this.reportIntersection(p,f,r,i,G))}}l.length=0}},{key:"reportIntersection",value:function(e,t,n,i,r){var a=this.from,o=this.to,l=a.distanceTo(t),c=this.result;if(!(this.skipBackfaces&&e.dot(this.direction)>0))switch(c.hitFaceIndex="undefined"!==typeof r?r:-1,this.mode){case s.ALL:this.hasHit=!0,c.set(a,o,e,t,n,i,l),c.hasHit=!0,this.callback(c);break;case s.CLOSEST:(l<c.distance||!c.hasHit)&&(this.hasHit=!0,c.hasHit=!0,c.set(a,o,e,t,n,i,l));break;case s.ANY:this.hasHit=!0,c.hasHit=!0,c.set(a,o,e,t,n,i,l),c.shouldStop=!0}}}],[{key:"pointInTriangle",value:function(e,t,n,i){i.vsub(t,sL),n.vsub(t,Tz),e.vsub(t,Xz);var r,a,o=sL.dot(sL),s=sL.dot(Tz),l=sL.dot(Xz),c=Tz.dot(Tz),u=Tz.dot(Xz);return(r=c*l-s*u)>=0&&(a=o*u-s*l)>=0&&r+a<o*c-s*s}}]),s}($E.types.SPHERE,$E.types.PLANE,$E.types.BOX,$E.types.CYLINDER,$E.types.CONVEXPOLYHEDRON,$E.types.HEIGHTFIELD,$E.types.TRIMESH);Fz.CLOSEST=Wz,Fz.ANY=Mz,Fz.ALL=Vz;var Nz=new DE,Hz=[],Tz=new LE,Xz=new LE,Yz=new LE,Ez=new JE,zz=new LE,Lz=new LE,Kz=new LE,_z=new LE;new LE,new Rz;var Pz={faceList:[0]},Dz=new LE,Oz=new Fz,Uz=[],jz=new LE,Jz=new LE,Qz=new LE,qz=(new LE,new LE,new LE),$z=new LE,eL=new LE,tL=new LE,nL=new LE,iL=new LE,rL=new LE;new DE;var aL=[],oL=new ez,sL=new LE,lL=new LE;var cL=function(){function e(){ka(this,e)}return Xe(e,null,[{key:"defaults",value:function(e,t){for(var n in void 0===e&&(e={}),t)n in e||(e[n]=t[n]);return e}}]),e}(),uL=function(){function e(t,n,i){ka(this,e),void 0===i&&(i={}),i=cL.defaults(i,{collideConnected:!0,wakeUpBodies:!0}),this.equations=[],this.bodyA=t,this.bodyB=n,this.id=e.idCounter++,this.collideConnected=i.collideConnected,i.wakeUpBodies&&(t&&t.wakeUp(),n&&n.wakeUp())}return Xe(e,[{key:"update",value:function(){throw new Error("method update() not implmemented in this Constraint subclass!")}},{key:"enable",value:function(){for(var e=this.equations,t=0;t<e.length;t++)e[t].enabled=!0}},{key:"disable",value:function(){for(var e=this.equations,t=0;t<e.length;t++)e[t].enabled=!1}}]),e}();uL.idCounter=0;var gL=function(){function e(){ka(this,e),this.spatial=new LE,this.rotational=new LE}return Xe(e,[{key:"multiplyElement",value:function(e){return e.spatial.dot(this.spatial)+e.rotational.dot(this.rotational)}},{key:"multiplyVectors",value:function(e,t){return e.dot(this.spatial)+t.dot(this.rotational)}}]),e}(),dL=function(){function e(t,n,i,r){ka(this,e),void 0===i&&(i=-1e6),void 0===r&&(r=1e6),this.id=e.idCounter++,this.minForce=i,this.maxForce=r,this.bi=t,this.bj=n,this.a=0,this.b=0,this.eps=0,this.jacobianElementA=new gL,this.jacobianElementB=new gL,this.enabled=!0,this.multiplier=0,this.setSpookParams(1e7,4,1/60)}return Xe(e,[{key:"setSpookParams",value:function(e,t,n){var i=t,r=e,a=n;this.a=4/(a*(1+4*i)),this.b=4*i/(1+4*i),this.eps=4/(a*a*r*(1+4*i))}},{key:"computeB",value:function(e,t,n){var i=this.computeGW();return-this.computeGq()*e-i*t-this.computeGiMf()*n}},{key:"computeGq",value:function(){var e=this.jacobianElementA,t=this.jacobianElementB,n=this.bi,i=this.bj,r=n.position,a=i.position;return e.spatial.dot(r)+t.spatial.dot(a)}},{key:"computeGW",value:function(){var e=this.jacobianElementA,t=this.jacobianElementB,n=this.bi,i=this.bj,r=n.velocity,a=i.velocity,o=n.angularVelocity,s=i.angularVelocity;return e.multiplyVectors(r,o)+t.multiplyVectors(a,s)}},{key:"computeGWlambda",value:function(){var e=this.jacobianElementA,t=this.jacobianElementB,n=this.bi,i=this.bj,r=n.vlambda,a=i.vlambda,o=n.wlambda,s=i.wlambda;return e.multiplyVectors(r,o)+t.multiplyVectors(a,s)}},{key:"computeGiMf",value:function(){var e=this.jacobianElementA,t=this.jacobianElementB,n=this.bi,i=this.bj,r=n.force,a=n.torque,o=i.force,s=i.torque,l=n.invMassSolve,c=i.invMassSolve;return r.scale(l,hL),o.scale(c,fL),n.invInertiaWorldSolve.vmult(a,pL),i.invInertiaWorldSolve.vmult(s,IL),e.multiplyVectors(hL,pL)+t.multiplyVectors(fL,IL)}},{key:"computeGiMGt",value:function(){var e=this.jacobianElementA,t=this.jacobianElementB,n=this.bi,i=this.bj,r=n.invMassSolve,a=i.invMassSolve,o=n.invInertiaWorldSolve,s=i.invInertiaWorldSolve,l=r+a;return o.vmult(e.rotational,CL),l+=CL.dot(e.rotational),s.vmult(t.rotational,CL),l+=CL.dot(t.rotational)}},{key:"addToWlambda",value:function(e){var t=this.jacobianElementA,n=this.jacobianElementB,i=this.bi,r=this.bj,a=mL;i.vlambda.addScaledVector(i.invMassSolve*e,t.spatial,i.vlambda),r.vlambda.addScaledVector(r.invMassSolve*e,n.spatial,r.vlambda),i.invInertiaWorldSolve.vmult(t.rotational,a),i.wlambda.addScaledVector(e,a,i.wlambda),r.invInertiaWorldSolve.vmult(n.rotational,a),r.wlambda.addScaledVector(e,a,r.wlambda)}},{key:"computeC",value:function(){return this.computeGiMGt()+this.eps}}]),e}();dL.idCounter=0;var hL=new LE,fL=new LE,pL=new LE,IL=new LE,CL=new LE,mL=new LE;new LE,new LE,new LE,new LE,new LE,new LE,new LE,new LE,new LE,new LE,new LE,new LE;new LE,new LE;new LE,new LE,new LE,new LE,new LE,new LE;var vL=Xe((function e(t,n,i){ka(this,e),i=cL.defaults(i,{friction:.3,restitution:.3,contactEquationStiffness:1e7,contactEquationRelaxation:3,frictionEquationStiffness:1e7,frictionEquationRelaxation:3}),this.id=e.idCounter++,this.materials=[t,n],this.friction=i.friction,this.restitution=i.restitution,this.contactEquationStiffness=i.contactEquationStiffness,this.contactEquationRelaxation=i.contactEquationRelaxation,this.frictionEquationStiffness=i.frictionEquationStiffness,this.frictionEquationRelaxation=i.frictionEquationRelaxation}));vL.idCounter=0;var AL=Xe((function e(t){ka(this,e),void 0===t&&(t={});var n="";"string"===typeof t&&(n=t,t={}),this.name=n,this.id=e.idCounter++,this.friction="undefined"!==typeof t.friction?t.friction:-1,this.restitution="undefined"!==typeof t.restitution?t.restitution:-1}));AL.idCounter=0;new LE,new LE,new LE,new LE,new LE,new LE,new LE,new LE,new LE,new LE,new LE,new LE,new LE;new LE,new LE,new LE;new LE,new LE,new LE;new Fz,new LE;new LE,new LE,new LE(1,0,0),new LE(0,1,0),new LE(0,0,1),new LE,new LE,new LE,new LE;new LE,new LE,new LE,new LE;new LE,new LE,new LE;new LE,new LE,new LE,new LE,new LE,new LE,new LE,new LE,new LE,new LE,new LE,new LE,new LE,new LE,new LE,new LE,new LE,new LE,new LE;new LE,new DE,new LE,new DE,new LE,new LE,new LE,new LE,new LE,new LE,new LE,new DE,new LE,new ez,new DE,Iz.STATIC;$E.types.SPHERE,$E.types.SPHERE,$E.types.PLANE,$E.types.BOX,$E.types.BOX,$E.types.SPHERE,$E.types.BOX,$E.types.PLANE,$E.types.BOX,$E.types.CONVEXPOLYHEDRON,$E.types.SPHERE,$E.types.CONVEXPOLYHEDRON,$E.types.PLANE,$E.types.CONVEXPOLYHEDRON,$E.types.BOX,$E.types.CONVEXPOLYHEDRON,$E.types.SPHERE,$E.types.HEIGHTFIELD,$E.types.BOX,$E.types.HEIGHTFIELD,$E.types.CONVEXPOLYHEDRON,$E.types.HEIGHTFIELD,$E.types.PARTICLE,$E.types.SPHERE,$E.types.PLANE,$E.types.PARTICLE,$E.types.BOX,$E.types.PARTICLE,$E.types.PARTICLE,$E.types.CONVEXPOLYHEDRON,$E.types.CYLINDER,$E.types.SPHERE,$E.types.CYLINDER,$E.types.PLANE,$E.types.CYLINDER,$E.types.BOX,$E.types.CYLINDER,$E.types.CONVEXPOLYHEDRON,$E.types.CYLINDER,$E.types.HEIGHTFIELD,$E.types.CYLINDER,$E.types.PARTICLE,$E.types.CYLINDER,$E.types.SPHERE,$E.types.TRIMESH,$E.types.PLANE,$E.types.TRIMESH,new LE,new LE,new LE,new LE,new LE,new JE,new JE,new LE,new LE,new LE,new LE,new LE;new LE;new LE,new LE,new LE,new LE,new LE,new LE,new LE,new LE,new LE,new LE,new LE,new DE,new LE,new LE,new LE,new LE,new LE;new LE,new LE,new LE,new LE,new LE,new LE,new LE,new LE,new LE,new LE,new LE,new LE,new LE,new LE,new LE,new LE,new LE,new LE,new LE,new LE,new LE,new LE,new LE,new LE;new LE,new LE;new LE,new LE,new LE,new LE,new LE,new LE,new LE,new LE,new LE,new LE,new JE,new LE;new LE;new LE,new LE,new LE,new LE,new LE,new LE,new LE;new DE;new Fz;var bL=globalThis.performance||{};if(!bL.now){var yL=Date.now();bL.timing&&bL.timing.navigationStart&&(yL=bL.timing.navigationStart),bL.now=function(){return Date.now()-yL}}new LE;Iz.COLLIDE_EVENT_NAME;function GL(e){var n=e.cinsiyet;console.log("gelen cinsiyet Player metaworld: ",e.cinsiyet);var i,r,a,o=function(){var e=ox(),n=e.scene,i=e.camera,r=(0,t.useMemo)((function(){return new Of}),[]),a=(0,t.useMemo)((function(){var e=new Of;return e.position.set(0,1,1.5),e}),[]),o=function(e){if(1===e.buttons&&!document.pointerLockElement){r.rotation.y-=.0025*e.movementX;var t=a.rotation.x-.0015*e.movementY;t>=-1&&t<=.8&&(a.rotation.x=t,a.position.y=-t*a.position.z+1)}return!1},s=function(e){if(!document.pointerLockElement){var t=a.position.z+.0015*e.deltaY;t>=.5&&t<=4&&(a.position.z=t)}return!1};return(0,t.useEffect)((function(){return i.position.set(0,.5,.6),a.add(i),r.add(a),n.add(r),document.addEventListener("mousemove",o),document.addEventListener("mousewheel",s),function(){document.removeEventListener("mousemove",o),document.removeEventListener("mousewheel",s)}})),{pivot:r}}(),s=o.pivot,l=(0,t.useRef)(!1),g=(0,t.useRef)(),d=(0,t.useMemo)((function(){return new Ph}),[]),h=(0,t.useMemo)((function(){return new Ph}),[]),f=(0,t.useMemo)((function(){return new Mf}),[]),p=(0,t.useMemo)((function(){return new _h}),[]),I=(0,t.useMemo)((function(){return new _h}),[]),C=(0,t.useMemo)((function(){return new Ph}),[]),m=(0,t.useMemo)((function(){return new LE(0,0,0)}),[]),v=(0,t.useMemo)((function(){return new LE(0,-1,0)}),[]),A=(0,t.useMemo)((function(){return new zG}),[]),b={},y=function(){var e=(0,t.useRef)({});return(0,t.useEffect)((function(){var t=function(t){e.current[t.code]="keydown"===t.type};return document.addEventListener("keydown",t),document.addEventListener("keyup",t),function(){document.removeEventListener("keydown",t),document.removeEventListener("keyup",t)}})),e.current}(),G=c((i=function(){return Ve({mass:1,shapes:[{args:[.5],position:[0,.5,0],type:"Sphere"},{args:[.5],position:[0,1.5,0],type:"Sphere"}],onCollide:function(e){e.contact.bi.id===e.body.id?e.contact.ni.negate(m):m.set.apply(m,We(e.contact.ni)),m.dot(v)>.5&&(l.current||(b.jump.fadeOut(.1),b.idle.stop(),b.walk.reset().fadeIn(.1).play(),l.current=!0))}},e)},r=(0,t.useRef)(),xE("Compound",i,(function(e){return e}),r,a)),2),w=G[0],B=G[1];return sx((function(e,t){B.angularFactor.set(0,0,0),w.current.getWorldPosition(C);var n=C.distanceTo(g.current.position);l.current?A.update(t*n*3):A.update(t);var i=new yf;i.lookAt(C,g.current.position,g.current.up),I.setFromRotationMatrix(i),g.current.quaternion.equals(I)||(I.z=0,I.x=0,I.normalize(),g.current.quaternion.rotateTowards(I,10*t)),document.pointerLockElement||(h.set(0,0,0),y.KeyW&&(h.z=-10*t,console.log("delta: ",t)),y.KeyS&&(h.z=10*t),y.KeyA&&(h.x=-10*t),y.KeyD&&(h.x=10*t),y.KeyW&&y.KeyA&&(h.z=-10*t/1.5,h.x=-10*t/1.5),y.KeyW&&y.KeyD&&(h.z=-10*t/1.5,h.x=10*t/1.5),y.KeyS&&y.KeyA&&(h.z=10*t/1.5,h.x=-10*t/1.5),y.KeyS&&y.KeyD&&(h.z=10*t/1.5,h.x=10*t/1.5),y.Space&&l.current&&(l.current=!1,h.y=9,b.walk.fadeOut(.1).stop(),b.jump.reset().fadeIn(.1).play()),f.y=s.rotation.y,f.order="XYZ",p.setFromEuler(f),h.applyQuaternion(p),d.set(h.x,h.y,h.z),B.applyImpulse([d.x,d.y,d.z],[0,0,0])),g.current.position.lerp(C,.1),s.position.lerp(C,.2)})),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("group",{ref:g,children:"1"===n?(0,u.jsx)(YE,{mixer:A,actions:b}):(0,u.jsx)(XE,{mixer:A,actions:b})})})}function wL(e){var t=bZ("./models/city_c.glb"),n=t.nodes,i=t.materials;return(0,u.jsxs)("group",Ve(Ve({},e),{},{dispose:null,children:[(0,u.jsxs)("group",{position:[-19.27,0,-117],rotation:[-Math.PI/2,0,0],children:[(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Strada_stop005_texture_mat_0001_1.geometry,material:i["texture_mat.001"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Strada_stop005_texture_mat_0001_2.geometry,material:i["Colore.002"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Strada_stop005_texture_mat_0001_3.geometry,material:i["Segnali_e_scritte.001"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Strada_stop005_texture_mat_0001_4.geometry,material:i["Vetro.002"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Strada_stop005_texture_mat_0001_5.geometry,material:i["Vetro_alternate_less_transparent.001"]})]}),(0,u.jsxs)("group",{position:[64.83,0,13.57],rotation:[-Math.PI/2,0,0],children:[(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["(base)003_Colore_0_1"].geometry,material:i["Colore.001"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["(base)003_Colore_0_2"].geometry,material:i["Vetro.001"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["(base)003_Colore_0_3"].geometry,material:i.texture_mat}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["(base)003_Colore_0_4"].geometry,material:i.Segnali_e_scritte}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["(base)003_Colore_0_5"].geometry,material:i.Vetro_alternate_less_transparent})]}),(0,u.jsxs)("group",{position:[-94.05,0,-33.35],rotation:[-Math.PI/2,0,0],children:[(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Strada_stop005_texture_mat_0002_1.geometry,material:i["texture_mat.002"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Strada_stop005_texture_mat_0002_2.geometry,material:i["Colore.003"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Strada_stop005_texture_mat_0002_3.geometry,material:i["Segnali_e_scritte.002"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Strada_stop005_texture_mat_0002_4.geometry,material:i["Vetro.003"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Strada_stop005_texture_mat_0002_5.geometry,material:i["Vetro_alternate_less_transparent.002"]})]}),(0,u.jsxs)("group",{position:[31.09,0,54.79],rotation:[-Math.PI/2,0,0],children:[(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane047_Texture_Strada_0_1.geometry,material:i.Texture_Strada}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane047_Texture_Strada_0_2.geometry,material:i.Colore}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane047_Texture_Strada_0_3.geometry,material:i.Vetro}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane047_Texture_Strada_0_4.geometry,material:i.Texture_Varie}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane047_Texture_Strada_0_5.geometry,material:i.Tubes__0}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane047_Texture_Strada_0_6.geometry,material:i.ContornoEdifici}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane047_Texture_Strada_0_7.geometry,material:i.Marcapiede}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane047_Texture_Strada_0_8.geometry,material:i["Material.001"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane047_Texture_Strada_0_9.geometry,material:i.Color})]}),(0,u.jsxs)("group",{position:[13.45,0,-16.68],rotation:[-Math.PI/2,0,0],children:[(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_1.geometry,material:i.strada2}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_2.geometry,material:i.TEXTURE_FINALE}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_3.geometry,material:i.LEGNO}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_4.geometry,material:i.BIANCO}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_5.geometry,material:i.NERO}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_6.geometry,material:i.GIALLO}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_7.geometry,material:i["CESPUGLI.002"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_8.geometry,material:i["VASI.001"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_9.geometry,material:i["TERRA.001"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_10.geometry,material:i["Cube.002__0"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_11.geometry,material:i["VETRI_FINALE.001"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_12.geometry,material:i["texture.001"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_13.geometry,material:i.BASI_EDIFICI}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_14.geometry,material:i.palette}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_15.geometry,material:i["Material.004"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_16.geometry,material:i["vetri.001"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_17.geometry,material:i.foglie}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_18.geometry,material:i.vasi}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_19.geometry,material:i.terra}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_20.geometry,material:i.cocktail}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_21.geometry,material:i.pavimentop_terrazza}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_22.geometry,material:i["Material.005"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_23.geometry,material:i.poster}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_24.geometry,material:i.vetri}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_25.geometry,material:i["TEXTURE_FINALE.001"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_26.geometry,material:i.postermuro}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_27.geometry,material:i.CESPUGLI}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_28.geometry,material:i.VASI}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_29.geometry,material:i.TERRA}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_30.geometry,material:i["foglie.001"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_31.geometry,material:i["vasi.001"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_32.geometry,material:i["terra.001"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_33.geometry,material:i["vetri.002"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_34.geometry,material:i["vasi.002"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_35.geometry,material:i["tubo.001"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_36.geometry,material:i["nero.002"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_37.geometry,material:i["terra.002"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_38.geometry,material:i["foglie.002"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_39.geometry,material:i["texture.002"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_40.geometry,material:i.benzinaio}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_41.geometry,material:i["nero.004"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_42.geometry,material:i["nero.003"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_43.geometry,material:i.insegna}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_44.geometry,material:i["vetri.003"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_45.geometry,material:i.nero}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_46.geometry,material:i.tubo}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_47.geometry,material:i.porta_e_serramenti}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_48.geometry,material:i["vetri.004"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_49.geometry,material:i["CESPUGLI.003"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_50.geometry,material:i["VASI.003"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_51.geometry,material:i["TERRA.003"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_52.geometry,material:i["CESPUGLI.001"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_53.geometry,material:i["VASI.002"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_54.geometry,material:i["TERRA.002"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_55.geometry,material:i.lowpolytex}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_56.geometry,material:i["Material.003"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_57.geometry,material:i.terriccio}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_58.geometry,material:i.parcheggio_gelati}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_59.geometry,material:i["texture_FINALE.002"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_60.geometry,material:i["VETRI.002"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_61.geometry,material:i["texture_FINALE.001"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_62.geometry,material:i.TEXTURE}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_63.geometry,material:i["VETRI.001"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_64.geometry,material:i["foglie.003"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_65.geometry,material:i["vasi.003"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_66.geometry,material:i["terra.003"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_67.geometry,material:i.material}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_68.geometry,material:i["texture.003"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_69.geometry,material:i.camion}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_70.geometry,material:i.rosa_gelato}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_71.geometry,material:i.pallina_gelato}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_72.geometry,material:i.finestrini}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_73.geometry,material:i["insegna.001"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_74.geometry,material:i.viola}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_75.geometry,material:i["texture.004"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_76.geometry,material:i.SEGNALE_PARCHEGGIO}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_77.geometry,material:i["texture.005"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_78.geometry,material:i["grigio_scuro.001"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_79.geometry,material:i.color}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_strada2_0_80.geometry,material:i["casa.005__0"]})]})]}))}function BL(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.forEach((function(t){return function(e,t){"function"===typeof e?e(t):null!==e&&void 0!==e&&(e.current=t)}(t,e)}))}}function xL(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return(0,t.useCallback)(BL.apply(void 0,n),n)}bZ.preload("./models/city_c.glb");var SL=["children"],ZL=["children"],kL=(0,t.forwardRef)((function(e,n){var i=e.children,r=Fe(e,SL),a=t.Children.toArray(i),o=a.find(ML);if(o){var s=o.props.children,l=a.map((function(e){return e===o?t.Children.count(s)>1?t.Children.only(null):(0,t.isValidElement)(s)?s.props.children:null:e}));return(0,t.createElement)(RL,v({},r,{ref:n}),(0,t.isValidElement)(s)?(0,t.cloneElement)(s,void 0,l):null)}return(0,t.createElement)(RL,v({},r,{ref:n}),i)}));kL.displayName="Slot";var RL=(0,t.forwardRef)((function(e,n){var i=e.children,r=Fe(e,ZL);return(0,t.isValidElement)(i)?(0,t.cloneElement)(i,Ve(Ve({},function(e,t){var n=Ve({},t),i=function(){var i=e[r],a=t[r];/^on[A-Z]/.test(r)?i&&a?n[r]=function(){a.apply(void 0,arguments),i.apply(void 0,arguments)}:i&&(n[r]=i):"style"===r?n[r]=Ve(Ve({},i),a):"className"===r&&(n[r]=[i,a].filter(Boolean).join(" "))};for(var r in t)i();return Ve(Ve({},e),n)}(r,i.props)),{},{ref:n?BL(n,i.ref):i.ref})):t.Children.count(i)>1?t.Children.only(null):null}));RL.displayName="SlotClone";var WL=function(e){var n=e.children;return(0,t.createElement)(t.Fragment,null,n)};function ML(e){return(0,t.isValidElement)(e)&&e.type===WL}var VL=["asChild"],FL=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((function(e,n){var i=(0,t.forwardRef)((function(e,i){var r=e.asChild,a=Fe(e,VL),o=r?kL:n;return(0,t.useEffect)((function(){window[Symbol.for("radix-ui")]=!0}),[]),(0,t.createElement)(o,v({},a,{ref:i}))}));return i.displayName="Primitive.".concat(n),Ve(Ve({},e),{},ke({},n,i))}),{});var NL=["container"],HL=(0,t.forwardRef)((function(e,n){var i,a=e.container,o=void 0===a?null===globalThis||void 0===globalThis||null===(i=globalThis.document)||void 0===i?void 0:i.body:a,s=Fe(e,NL);return o?r.createPortal((0,t.createElement)(FL.div,v({},s,{ref:n})),o):null})),TL=HL,XL=Object.prototype.hasOwnProperty;function YL(e,t){var n,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((i=e.length)===t.length)for(;i--&&YL(e[i],t[i]););return-1===i}if(!n||"object"===typeof e){for(n in i=0,e){if(XL.call(e,n)&&++i&&!XL.call(t,n))return!1;if(!(n in t)||!YL(e[n],t[n]))return!1}return Object.keys(t).length===i}}return e!==e&&t!==t}function EL(e,t){if(Object.is(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(var i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!Object.is(e[n[i]],t[n[i]]))return!1;return!0}var zL=function(e,t,n,i){this.name=e,this.fn=t,this.args=n,this.modifiers=i};function LL(e,t){return void 0===t&&(t="simple"),"object"===typeof e?e[t]:e}function KL(e,t,n){if(e.length){var i=e.shift(),r=KL(e,t,n);return i.perform(r,n)}return LL(t)}function _L(e,t,n){if(e.length){var i=e.shift(),r=_L(e,t,n);return i.performAsync(r,n)}return function(e){return Promise.resolve(LL(t,"async")(e))}}zL.prototype._test=function(e){var t=this.fn;try{KL(this.modifiers.slice(),t,this)(e)}catch(n){t=function(){return!1}}try{return KL(this.modifiers.slice(),t,this)(e)}catch(i){return!1}},zL.prototype._check=function(e){try{KL(this.modifiers.slice(),this.fn,this)(e)}catch(t){if(KL(this.modifiers.slice(),(function(e){return e}),this)(!1))return}if(!KL(this.modifiers.slice(),this.fn,this)(e))throw null},zL.prototype._testAsync=function(e){var t=this;return new Promise((function(n,i){_L(t.modifiers.slice(),t.fn,t)(e).then((function(t){t?n(e):i(null)})).catch((function(e){return i(e)}))}))};var PL=function(e,t,n){this.name=e,this.perform=t,this.performAsync=n},DL=function(e){function t(n,i,r,a){for(var o=[],s=arguments.length-4;s-- >0;)o[s]=arguments[s+4];e.call(this,o),e.captureStackTrace&&e.captureStackTrace(this,t),this.rule=n,this.value=i,this.cause=r,this.target=a}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error),OL=function(e,t){void 0===e&&(e=[]),void 0===t&&(t=[]),this.chain=e,this.nextRuleModifiers=t};function UL(e,t,n,i){if(t.length){var r=t.shift();r._testAsync(e).then((function(){UL(e,t,n,i)}),(function(t){i(new DL(r,e,t))}))}else n(e)}OL.prototype._applyRule=function(e,t){var n=this;return function(){for(var i=[],r=arguments.length;r--;)i[r]=arguments[r];return n.chain.push(new zL(t,e.apply(n,i),i,n.nextRuleModifiers)),n.nextRuleModifiers=[],n}},OL.prototype._applyModifier=function(e,t){return this.nextRuleModifiers.push(new PL(t,e.simple,e.async)),this},OL.prototype._clone=function(){return new OL(this.chain.slice(),this.nextRuleModifiers.slice())},OL.prototype.test=function(e){return this.chain.every((function(t){return t._test(e)}))},OL.prototype.testAll=function(e){var t=[];return this.chain.forEach((function(n){try{n._check(e)}catch(i){t.push(new DL(n,e,i))}})),t},OL.prototype.check=function(e){this.chain.forEach((function(t){try{t._check(e)}catch(n){throw new DL(t,e,n)}}))},OL.prototype.testAsync=function(e){var t=this;return new Promise((function(n,i){UL(e,t.chain.slice(),n,i)}))};var jL=function(e,t){return!(!t||"string"!==typeof e||0!==e.trim().length)||(void 0===e||null===e)};function JL(){return"undefined"!==typeof Proxy?qL(new OL):$L(new OL)}var QL={};function qL(e){return new Proxy(e,{get:function(t,n){if(n in t)return t[n];var i=qL(e._clone());return n in eK?i._applyModifier(eK[n],n):n in QL?i._applyRule(QL[n],n):n in iK?i._applyRule(iK[n],n):void 0}})}function $L(e){var t=function(e,t){return Object.keys(e).forEach((function(n){t[n]=function(){for(var i=[],r=arguments.length;r--;)i[r]=arguments[r];return $L(t._clone())._applyRule(e[n],n).apply(void 0,i)}})),t},n=t(iK,e),i=t(QL,n);return Object.keys(eK).forEach((function(e){Object.defineProperty(i,e,{get:function(){return $L(i._clone())._applyModifier(eK[e],e)}})})),i}JL.extend=function(e){Object.assign(QL,e)},JL.clearCustomRules=function(){QL={}};var eK={not:{simple:function(e){return function(t){return!e(t)}},async:function(e){return function(t){return Promise.resolve(e(t)).then((function(e){return!e})).catch((function(){return!0}))}}},some:{simple:function(e){return function(t){return nK(t).some((function(t){try{return e(t)}catch(n){return!1}}))}},async:function(e){return function(t){return Promise.all(nK(t).map((function(t){try{return e(t).catch((function(){return!1}))}catch(n){return!1}}))).then((function(e){return e.some(Boolean)}))}}},every:{simple:function(e){return function(t){return!1!==t&&nK(t).every(e)}},async:function(e){return function(t){return Promise.all(nK(t).map(e)).then((function(e){return e.every(Boolean)}))}}},strict:{simple:function(e,t){return function(n){return tK(t)&&n&&"object"===typeof n?Object.keys(t.args[0]).length===Object.keys(n).length&&e(n):e(n)}},async:function(e,t){return function(n){return Promise.resolve(e(n)).then((function(e){return tK(t)&&n&&"object"===typeof n?Object.keys(t.args[0]).length===Object.keys(n).length&&e:e})).catch((function(){return!1}))}}}};function tK(e){return e&&"schema"===e.name&&e.args.length>0&&"object"===typeof e.args[0]}function nK(e){return"string"===typeof e?e.split(""):e}var iK={equal:function(e){return function(t){return t==e}},exact:function(e){return function(t){return t===e}},number:function(e){return void 0===e&&(e=!0),function(t){return"number"===typeof t&&(e||isFinite(t))}},integer:function(){return function(e){return(Number.isInteger||aK)(e)}},numeric:function(){return function(e){return!isNaN(parseFloat(e))&&isFinite(e)}},string:function(){return rK("string")},boolean:function(){return rK("boolean")},undefined:function(){return rK("undefined")},null:function(){return rK("null")},array:function(){return rK("array")},object:function(){return rK("object")},instanceOf:function(e){return function(t){return t instanceof e}},pattern:function(e){return function(t){return e.test(t)}},lowercase:function(){return function(e){return"boolean"===typeof e||e===e.toLowerCase()&&""!==e.trim()}},uppercase:function(){return function(e){return e===e.toUpperCase()&&""!==e.trim()}},vowel:function(){return function(e){return/^[aeiou]+$/i.test(e)}},consonant:function(){return function(e){return/^(?=[^aeiou])([a-z]+)$/i.test(e)}},first:function(e){return function(t){return t[0]==e}},last:function(e){return function(t){return t[t.length-1]==e}},empty:function(){return function(e){return 0===e.length}},length:function(e,t){return function(n){return n.length>=e&&n.length<=(t||e)}},minLength:function(e){return function(t){return t.length>=e}},maxLength:function(e){return function(t){return t.length<=e}},negative:function(){return function(e){return e<0}},positive:function(){return function(e){return e>=0}},between:function(e,t){return function(n){return n>=e&&n<=t}},range:function(e,t){return function(n){return n>=e&&n<=t}},lessThan:function(e){return function(t){return t<e}},lessThanOrEqual:function(e){return function(t){return t<=e}},greaterThan:function(e){return function(t){return t>e}},greaterThanOrEqual:function(e){return function(t){return t>=e}},even:function(){return function(e){return e%2===0}},odd:function(){return function(e){return e%2!==0}},includes:function(e){return function(t){return~t.indexOf(e)}},schema:function(e){return function(e){return{simple:function(t){var n=[];if(Object.keys(e).forEach((function(i){var r=e[i];try{r.check((t||{})[i])}catch(a){a.target=i,n.push(a)}})),n.length>0)throw n;return!0},async:function(t){var n=[],i=Object.keys(e).map((function(i){return e[i].testAsync((t||{})[i]).catch((function(e){e.target=i,n.push(e)}))}));return Promise.all(i).then((function(){if(n.length>0)throw n;return!0}))}}}(e)},passesAnyOf:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return function(t){return e.some((function(e){return e.test(t)}))}},optional:function(e,t){return void 0===t&&(t=!1),{simple:function(n){return jL(n,t)||void 0===e.check(n)},async:function(n){return jL(n,t)||e.testAsync(n)}}}};function rK(e){return function(t){return Array.isArray(t)&&"array"===e||null===t&&"null"===e||typeof t===e}}function aK(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e}var oK=JL,sK=["variants","compoundVariants","defaultVariants"],lK=["css"],cK=["css"],uK="colors",gK="sizes",dK="space",hK={gap:dK,gridGap:dK,columnGap:dK,gridColumnGap:dK,rowGap:dK,gridRowGap:dK,inset:dK,insetBlock:dK,insetBlockEnd:dK,insetBlockStart:dK,insetInline:dK,insetInlineEnd:dK,insetInlineStart:dK,margin:dK,marginTop:dK,marginRight:dK,marginBottom:dK,marginLeft:dK,marginBlock:dK,marginBlockEnd:dK,marginBlockStart:dK,marginInline:dK,marginInlineEnd:dK,marginInlineStart:dK,padding:dK,paddingTop:dK,paddingRight:dK,paddingBottom:dK,paddingLeft:dK,paddingBlock:dK,paddingBlockEnd:dK,paddingBlockStart:dK,paddingInline:dK,paddingInlineEnd:dK,paddingInlineStart:dK,top:dK,right:dK,bottom:dK,left:dK,scrollMargin:dK,scrollMarginTop:dK,scrollMarginRight:dK,scrollMarginBottom:dK,scrollMarginLeft:dK,scrollMarginX:dK,scrollMarginY:dK,scrollMarginBlock:dK,scrollMarginBlockEnd:dK,scrollMarginBlockStart:dK,scrollMarginInline:dK,scrollMarginInlineEnd:dK,scrollMarginInlineStart:dK,scrollPadding:dK,scrollPaddingTop:dK,scrollPaddingRight:dK,scrollPaddingBottom:dK,scrollPaddingLeft:dK,scrollPaddingX:dK,scrollPaddingY:dK,scrollPaddingBlock:dK,scrollPaddingBlockEnd:dK,scrollPaddingBlockStart:dK,scrollPaddingInline:dK,scrollPaddingInlineEnd:dK,scrollPaddingInlineStart:dK,fontSize:"fontSizes",background:uK,backgroundColor:uK,backgroundImage:uK,borderImage:uK,border:uK,borderBlock:uK,borderBlockEnd:uK,borderBlockStart:uK,borderBottom:uK,borderBottomColor:uK,borderColor:uK,borderInline:uK,borderInlineEnd:uK,borderInlineStart:uK,borderLeft:uK,borderLeftColor:uK,borderRight:uK,borderRightColor:uK,borderTop:uK,borderTopColor:uK,caretColor:uK,color:uK,columnRuleColor:uK,fill:uK,outline:uK,outlineColor:uK,stroke:uK,textDecorationColor:uK,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:gK,minBlockSize:gK,maxBlockSize:gK,inlineSize:gK,minInlineSize:gK,maxInlineSize:gK,width:gK,minWidth:gK,maxWidth:gK,height:gK,minHeight:gK,maxHeight:gK,flexBasis:gK,gridTemplateColumns:gK,gridTemplateRows:gK,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},fK=function(e,t){return"function"==typeof t?{"()":Function.prototype.toString.call(t)}:t},pK=function(){var e=Object.create(null);return function(t,n){for(var i=function(e){return JSON.stringify(e,fK)}(t),r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];return i in e?e[i]:e[i]=n.apply(void 0,[t].concat(a))}},IK=Symbol.for("sxs.internal"),CK=function(e,t){return Object.defineProperties(e,Object.getOwnPropertyDescriptors(t))},mK=function(e){for(var t in e)return!0;return!1},vK=Object.prototype.hasOwnProperty,AK=function(e){return e.includes("-")?e:e.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()}))},bK=/\s+(?![^()]*\))/,yK=function(e){return function(t){return e.apply(void 0,We("string"==typeof t?String(t).split(bK):[t]))}},GK={appearance:function(e){return{WebkitAppearance:e,appearance:e}},backfaceVisibility:function(e){return{WebkitBackfaceVisibility:e,backfaceVisibility:e}},backdropFilter:function(e){return{WebkitBackdropFilter:e,backdropFilter:e}},backgroundClip:function(e){return{WebkitBackgroundClip:e,backgroundClip:e}},boxDecorationBreak:function(e){return{WebkitBoxDecorationBreak:e,boxDecorationBreak:e}},clipPath:function(e){return{WebkitClipPath:e,clipPath:e}},content:function(e){return{content:e.includes('"')||e.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(e)?e:'"'.concat(e,'"')}},hyphens:function(e){return{WebkitHyphens:e,hyphens:e}},maskImage:function(e){return{WebkitMaskImage:e,maskImage:e}},maskSize:function(e){return{WebkitMaskSize:e,maskSize:e}},tabSize:function(e){return{MozTabSize:e,tabSize:e}},textSizeAdjust:function(e){return{WebkitTextSizeAdjust:e,textSizeAdjust:e}},userSelect:function(e){return{WebkitUserSelect:e,userSelect:e}},marginBlock:yK((function(e,t){return{marginBlockStart:e,marginBlockEnd:t||e}})),marginInline:yK((function(e,t){return{marginInlineStart:e,marginInlineEnd:t||e}})),maxSize:yK((function(e,t){return{maxBlockSize:e,maxInlineSize:t||e}})),minSize:yK((function(e,t){return{minBlockSize:e,minInlineSize:t||e}})),paddingBlock:yK((function(e,t){return{paddingBlockStart:e,paddingBlockEnd:t||e}})),paddingInline:yK((function(e,t){return{paddingInlineStart:e,paddingInlineEnd:t||e}}))},wK=/([\d.]+)([^]*)/,BK=function(e,t){return e.length?e.reduce((function(e,n){return e.push.apply(e,We(t.map((function(e){return e.includes("&")?e.replace(/&/g,/[ +>|~]/.test(n)&&/&.*&/.test(e)?":is(".concat(n,")"):n):n+" "+e})))),e}),[]):t},xK=function(e,t){return e in SK&&"string"==typeof t?t.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(function(t,n,i,r){return n+("stretch"===i?"-moz-available".concat(r,";").concat(AK(e),":").concat(n,"-webkit-fill-available"):"-moz-fit-content".concat(r,";").concat(AK(e),":").concat(n,"fit-content"))+r})):String(t)},SK={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},ZK=function(e){return e?e+"-":""},kK=function(e,t,n){return e.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(function(e,i,r,a,o){return"$"==a==!!r?e:(i||"--"==a?"calc(":"")+"var(--"+("$"===a?ZK(t)+(o.includes("$")?"":ZK(n))+o.replace(/\$/g,"-"):o)+")"+(i||"--"==a?"*"+(i||"")+(r||"1")+")":"")}))},RK=/\s*,\s*(?![^()]*\))/,WK=Object.prototype.toString,MK=function(e,t,n,i,r){var a,o,s;!function e(t,n,l){var u,g;(function t(d){for(u in d){var h,f=64===u.charCodeAt(0),p=Fc(f&&Array.isArray(d[u])?d[u]:[d[u]]);try{for(p.s();!(h=p.n()).done;){g=h.value;var I=/[A-Z]/.test(G=u)?G:G.replace(/-[^]/g,(function(e){return e[1].toUpperCase()})),C="object"==typeof g&&g&&g.toString===WK&&(!i.utils[I]||!n.length);if(I in i.utils&&!C){var m=i.utils[I];if(m!==o){o=m,t(m(g)),o=null;continue}}else if(I in GK){var v=GK[I];if(v!==s){s=v,t(v(g)),s=null;continue}}if(f&&(y=u.slice(1)in i.media?"@media "+i.media[u.slice(1)]:u,u=y.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(function(e,t,n,i,r,a){var o=wK.test(t),s=.0625*(o?-1:1),l=c(o?[i,t]:[t,i],2),u=l[0],g=l[1];return"("+("="===n[0]?"":">"===n[0]===o?"max-":"min-")+u+":"+("="!==n[0]&&1===n.length?g.replace(wK,(function(e,t,i){return Number(t)+s*(">"===n?1:-1)+i})):g)+(r?") and ("+(">"===r[0]?"min-":"max-")+u+":"+(1===r.length?a.replace(wK,(function(e,t,n){return Number(t)+s*(">"===r?-1:1)+n})):a):"")+")"}))),C){var A=f?l.concat(u):We(l),b=f?We(n):BK(n,u.split(RK));void 0!==a&&r(VK.apply(void 0,We(a))),a=void 0,e(g,b,A)}else void 0===a&&(a=[[],n,l]),u=f||36!==u.charCodeAt(0)?u:"--".concat(ZK(i.prefix)).concat(u.slice(1).replace(/\$/g,"-")),g=C?g:"number"==typeof g?g&&I in FK?String(g)+"px":String(g):kK(xK(I,null==g?"":g),i.prefix,i.themeMap[I]),a[0].push("".concat(f?"".concat(u," "):"".concat(AK(u),":")).concat(g))}}catch(w){p.e(w)}finally{p.f()}}var y,G})(t),void 0!==a&&r(VK.apply(void 0,We(a))),a=void 0}(e,t,n)},VK=function(e,t,n){return"".concat(n.map((function(e){return"".concat(e,"{")})).join("")).concat(t.length?"".concat(t.join(","),"{"):"").concat(e.join(";")).concat(t.length?"}":"").concat(Array(n.length?n.length+1:0).join("}"))},FK={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},NK=function(e){return String.fromCharCode(e+(e>25?39:97))},HK=function(e){return function(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=NK(t%52)+n;return NK(t%52)+n}(function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e}(5381,JSON.stringify(e))>>>0)},TK=["themed","global","styled","onevar","resonevar","allvar","inline"],XK=function(e){if(e.href&&!e.href.startsWith(location.origin))return!1;try{return!!e.cssRules}catch(e){return!1}},YK=function(e){var t=e.group,n=t.cssRules.length;e.apply=function(e){try{t.insertRule(e,n),++n}catch(e){}}},EK=Symbol(),zK=pK(),LK=function(e,t){return zK(e,(function(){return function(){for(var n={type:null,composers:new Set},i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];for(var o=0,s=r;o<s.length;o++){var l=s[o];if(null!=l)if(l[IK]){null==n.type&&(n.type=l[IK].type);var c,u=Fc(l[IK].composers);try{for(u.s();!(c=u.n()).done;){var g=c.value;n.composers.add(g)}}catch(d){u.e(d)}finally{u.f()}}else l.constructor!==Object||l.$$typeof?null==n.type&&(n.type=l):n.composers.add(KK(l,e))}return null==n.type&&(n.type="span"),n.composers.size||n.composers.add(["PJLV",{},[],[],{},[]]),_K(e,n,t)}}))},KK=function(e,t){var n,i,r=e.variants,a=e.compoundVariants,o=e.defaultVariants,s=Fe(e,sK),l="".concat(ZK(t.prefix),"c-").concat(HK(s)),c=[],u=[],g=Object.create(null),d=[];for(var h in o)g[h]=String(o[h]);if("object"==typeof r&&r)for(var f in r){n=g,i=f,vK.call(n,i)||(g[f]="undefined");var p=r[f];for(var I in p){var C=ke({},f,String(I));"undefined"===String(I)&&d.push(f);var m=p[I],v=[C,m,!mK(m)];c.push(v)}}if("object"==typeof a&&a){var A,b=Fc(a);try{for(b.s();!(A=b.n()).done;){var y=A.value,G=y.css,w=Fe(y,lK);for(var B in G="object"==typeof G&&G||{},w)w[B]=String(w[B]);var x=[w,G,!mK(G)];u.push(x)}}catch(S){b.e(S)}finally{b.f()}}return[l,s,c,u,g,d]},_K=function(e,t,n){var i,r=c(PK(t.composers),4),a=r[0],o=r[1],s=r[2],l=r[3],u="function"==typeof t.type||t.type.$$typeof?function(e){function t(){for(var n=0;n<t[EK].length;n++){var i=c(t[EK][n],2),r=i[0],a=i[1];e.rules[r].apply(a)}return t[EK]=[],null}return t[EK]=[],t.rules={},TK.forEach((function(e){return t.rules[e]={apply:function(n){return t[EK].push([e,n])}}})),t}(n):null,g=(u||n).rules,d=".".concat(a).concat(o.length>1?":where(.".concat(o.slice(1).join("."),")"):""),h=function(i){var r=i="object"==typeof i&&i||OK,h=r.css,f=Fe(r,cK),p={};for(var I in s)if(delete f[I],I in i){var C=i[I];"object"==typeof C&&C?p[I]=Ve({"@initial":s[I]},C):(C=String(C),p[I]="undefined"!==C||l.has(I)?C:s[I])}else p[I]=s[I];var m,v=new Set(We(o)),A=Fc(t.composers);try{for(A.s();!(m=A.n()).done;){var b=c(m.value,4),y=b[0],G=b[1],w=b[2],B=b[3];n.rules.styled.cache.has(y)||(n.rules.styled.cache.add(y),MK(G,[".".concat(y)],[],e,(function(e){g.styled.apply(e)})));var x,S=DK(w,p,e.media),Z=DK(B,p,e.media,!0),k=Fc(S);try{for(k.s();!(x=k.n()).done;){var R=x.value;if(void 0!==R){var W,M=Fc(R);try{var V=function(){var t=c(W.value,3),i=t[0],r=t[1],a=t[2],o="".concat(y,"-").concat(HK(r),"-").concat(i);v.add(o);var s=(a?n.rules.resonevar:n.rules.onevar).cache,l=a?g.resonevar:g.onevar;s.has(o)||(s.add(o),MK(r,[".".concat(o)],[],e,(function(e){l.apply(e)})))};for(M.s();!(W=M.n()).done;)V()}catch(U){M.e(U)}finally{M.f()}}}}catch(U){k.e(U)}finally{k.f()}var F,N=Fc(Z);try{for(N.s();!(F=N.n()).done;){var H=F.value;if(void 0!==H){var T,X=Fc(H);try{for(X.s();!(T=X.n()).done;){var Y=c(T.value,2),E=Y[0],z=Y[1],L="".concat(y,"-").concat(HK(z),"-").concat(E);v.add(L),n.rules.allvar.cache.has(L)||(n.rules.allvar.cache.add(L),MK(z,[".".concat(L)],[],e,(function(e){g.allvar.apply(e)})))}}catch(U){X.e(U)}finally{X.f()}}}}catch(U){N.e(U)}finally{N.f()}}}catch(U){A.e(U)}finally{A.f()}if("object"==typeof h&&h){var K="".concat(a,"-i").concat(HK(h),"-css");v.add(K),n.rules.inline.cache.has(K)||(n.rules.inline.cache.add(K),MK(h,[".".concat(K)],[],e,(function(e){g.inline.apply(e)})))}var _,P=Fc(String(i.className||"").trim().split(/\s+/));try{for(P.s();!(_=P.n()).done;){var D=_.value;D&&v.add(D)}}catch(U){P.e(U)}finally{P.f()}var O=f.className=We(v).join(" ");return{type:t.type,className:O,selector:d,props:f,toString:function(){return O},deferredInjector:u}};return CK(h,(ke(i={className:a,selector:d},IK,t),ke(i,"toString",(function(){return n.rules.styled.cache.has(a)||h(),a})),i))},PK=function(e){var t,n="",i=[],r={},a=[],o=Fc(e);try{for(o.s();!(t=o.n()).done;){var s=c(t.value,6),l=s[0],u=s[4],g=s[5];for(var d in""===n&&(n=l),i.push(l),a.push.apply(a,We(g)),u){var h=u[d];(void 0===r[d]||"undefined"!==h||g.includes(h))&&(r[d]=h)}}}catch(f){o.e(f)}finally{o.f()}return[n,i,r,new Set(a)]},DK=function(e,t,n,i){var r,a=[],o=Fc(e);try{e:for(o.s();!(r=o.n()).done;){var s=c(r.value,3),l=s[0],u=s[1];if(!s[2]){var g=void 0,d=0,h=!1;for(g in l){var f=l[g],p=t[g];if(p!==f){if("object"!=typeof p||!p)continue e;var I=void 0,C=void 0,m=0;for(var v in p){if(f===String(p[v])){if("@initial"!==v){var A=v.slice(1);(C=C||[]).push(A in n?n[A]:v.replace(/^@media ?/,"")),h=!0}d+=m,I=!0}++m}if(C&&C.length&&(u=ke({},"@media "+C.join(", "),u)),!I)continue e}}(a[d]=a[d]||[]).push([i?"cv":"".concat(g,"-").concat(l[g]),u,h])}}}catch(b){o.e(b)}finally{o.f()}return a},OK={},UK=pK(),jK=function(e,t){return UK(e,(function(){return function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];var a=function(){for(var n=0,r=i;n<r.length;n++){var a=r[n],o=HK(a="object"==typeof a&&a||{});if(!t.rules.global.cache.has(o)){if(t.rules.global.cache.add(o),"@import"in a){var s,l=[].indexOf.call(t.sheet.cssRules,t.rules.themed.group)-1,c=Fc([].concat(a["@import"]));try{for(c.s();!(s=c.n()).done;){var u=s.value;u=u.includes('"')||u.includes("'")?u:'"'.concat(u,'"'),t.sheet.insertRule("@import ".concat(u,";"),l++)}}catch(g){c.e(g)}finally{c.f()}delete a["@import"]}MK(a,[],[],e,(function(e){t.rules.global.apply(e)}))}}return""};return CK(a,{toString:a})}}))},JK=pK(),QK=function(e,t){return JK(e,(function(){return function(n){var i="".concat(ZK(e.prefix),"k-").concat(HK(n)),r=function(){if(!t.rules.global.cache.has(i)){t.rules.global.cache.add(i);var r=[];MK(n,[],[],e,(function(e){return r.push(e)}));var a="@keyframes ".concat(i,"{").concat(r.join(""),"}");t.rules.global.apply(a)}return i};return CK(r,{get name(){return r()},toString:r})}}))},qK=function(){function e(t,n,i,r){ka(this,e),this.token=null==t?"":String(t),this.value=null==n?"":String(n),this.scale=null==i?"":String(i),this.prefix=null==r?"":String(r)}return Xe(e,[{key:"computedValue",get:function(){return"var("+this.variable+")"}},{key:"variable",get:function(){return"--"+ZK(this.prefix)+ZK(this.scale)+this.token}},{key:"toString",value:function(){return this.computedValue}}]),e}(),$K=pK(),e_=function(e,t){return $K(e,(function(){return function(n,i){i="object"==typeof n&&n||Object(i);var r=".".concat(n=(n="string"==typeof n?n:"")||"".concat(ZK(e.prefix),"t-").concat(HK(i))),a={},o=[];for(var s in i)for(var l in a[s]={},i[s]){var c="--".concat(ZK(e.prefix)).concat(s,"-").concat(l),u=kK(String(i[s][l]),e.prefix,s);a[s][l]=new qK(l,u,s,e.prefix),o.push("".concat(c,":").concat(u))}var g=function(){if(o.length&&!t.rules.themed.cache.has(n)){t.rules.themed.cache.add(n);var r="".concat(i===e.theme?":root,":"",".").concat(n,"{").concat(o.join(";"),"}");t.rules.themed.apply(r)}return n};return Ve(Ve({},a),{},{get className(){return g()},selector:r,toString:g})}}))},t_=pK(),n_=pK(),i_=function(e){var n=function(e){var t=!1,n=t_(e,(function(e){t=!0;var n="prefix"in(e="object"==typeof e&&e||{})?String(e.prefix):"",i="object"==typeof e.media&&e.media||{},r="object"==typeof e.root?e.root||null:globalThis.document||null,a="object"==typeof e.theme&&e.theme||{},o={prefix:n,media:i,theme:a,themeMap:"object"==typeof e.themeMap&&e.themeMap||Ve({},hK),utils:"object"==typeof e.utils&&e.utils||{}},s=function(e){var t,n=function(){var e=t.sheet.cssRules;return[].map.call(e,(function(n,i){var r=n.cssText,a="";if(r.startsWith("--sxs"))return"";if(e[i-1]&&(a=e[i-1].cssText).startsWith("--sxs")){if(!n.cssRules.length)return"";for(var o in t.rules)if(t.rules[o].group===n)return"--sxs{--sxs:".concat(We(t.rules[o].cache).join(" "),"}").concat(r);return n.cssRules.length?"".concat(a).concat(r):""}return r})).join("")};return function i(){if(t){var r=t,a=r.rules,o=r.sheet;if(!o.deleteRule){for(;3===Object(Object(o.cssRules)[0]).type;)o.cssRules.splice(0,1);o.cssRules=[]}for(var s in a)delete a[s]}var l,c=Fc(Object(e).styleSheets||[]);try{for(c.s();!(l=c.n()).done;){var u=l.value;if(XK(u)){for(var g=0,d=u.cssRules;d[g];++g){var h=Object(d[g]);if(1===h.type){var f=Object(d[g+1]);if(4===f.type){++g;var p=h.cssText;if(p.startsWith("--sxs")){var I=p.slice(14,-3).trim().split(/\s+/),C=TK[I[0]];C&&(t||(t={sheet:u,reset:i,rules:{},toString:n}),t.rules[C]={group:f,index:g,cache:new Set(I)})}}}}if(t)break}}}catch(B){c.e(B)}finally{c.f()}t||(t={sheet:e?(e.head||e).appendChild(document.createElement("style")).sheet:function e(t,n){return{type:n,cssRules:[],insertRule:function(t,n){this.cssRules.splice(n,0,e(t,{import:3,undefined:1}[(t.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return"@media{}"===t?"@media{".concat([].map.call(this.cssRules,(function(e){return e.cssText})).join(""),"}"):t}}}("","text/css"),rules:{},reset:i,toString:n});for(var m=t,v=m.sheet,A=m.rules,b=TK.length-1;b>=0;--b){var y=TK[b];if(!A[y]){var G=TK[b+1],w=A[G]?A[G].index:v.cssRules.length;v.insertRule("@media{}",w),v.insertRule("--sxs{--sxs:".concat(b,"}"),w),A[y]={group:v.cssRules[w+1],index:w,cache:new Set([b])}}YK(A[y])}}(),t}(r),l={css:LK(o,s),globalCss:jK(o,s),keyframes:QK(o,s),createTheme:e_(o,s),reset:function(){s.reset(),l.theme.toString()},theme:{},sheet:s,config:o,prefix:n,getCssText:s.toString,toString:s.toString};return String(l.theme=l.createTheme(a)),l}));return t||n.reset(),n}(e);return n.styled=function(e){var n=e.config,i=e.sheet;return n_(n,(function(){var e=LK(n,i);return function(){var n=e.apply(void 0,arguments),i=n[IK].type,r=t.forwardRef((function(e,r){var a=e&&e.as||i,o=n(e),s=o.props,l=o.deferredInjector;return delete s.as,s.ref=r,l?t.createElement(t.Fragment,null,t.createElement(a,s),t.createElement(l,null)):t.createElement(a,s)}));return r.className=n.className,r.displayName="Styled.".concat(i.displayName||i.name||i),r.selector=n.selector,r.toString=function(){return n.selector},r[IK]=n[IK],r}}))}(n),n};var r_=function(e,t){return void 0===e&&(e=t),Array.isArray(e)?e:[e,e]},a_=function(e,t){return[e[0]+t[0],e[1]+t[1]]},o_=function(e,t){return[e[0]-t[0],e[1]-t[1]]},s_=function(e,t){e[0]+=t[0],e[1]+=t[1]};function l_(e,t,n){return 0===t||Math.abs(t)===1/0?Math.pow(e,5*n):e*t*n/(t+n*e)}function c_(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.15;return 0===i?function(e,t,n){return Math.max(t,Math.min(e,n))}(e,t,n):e<t?-l_(t-e,n-t,i)+t:e>n?+l_(e-n,n-t,i)+n:e}function u_(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function g_(e,t,n){return(t=u_(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function h_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d_(Object(n),!0).forEach((function(t){g_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f_={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function p_(e){return e?e[0].toUpperCase()+e.slice(1):""}var I_=["enter","leave"];function C_(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=f_[e],r=i&&i[t]||t;return"on"+p_(e)+p_(r)+(function(){var e=arguments.length>1?arguments[1]:void 0;return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&!I_.includes(e)}(n,r)?"Capture":"")}var m_=["gotpointercapture","lostpointercapture"];function v_(e){var t=e.substring(2).toLowerCase(),n=!!~t.indexOf("passive");n&&(t=t.replace("passive",""));var i=m_.includes(t)?"capturecapture":"capture",r=!!~t.indexOf(i);return r&&(t=t.replace("capture","")),{device:t,capture:r,passive:n}}function A_(e){return"touches"in e}function b_(e){return A_(e)?"touch":"pointerType"in e?e.pointerType:"mouse"}function y_(e){return A_(e)?function(e){return"touchend"===e.type||"touchcancel"===e.type?e.changedTouches:e.targetTouches}(e)[0]:e}function G_(e){return function(e){return Array.from(e.touches).filter((function(t){var n,i;return t.target===e.currentTarget||(null===(n=e.currentTarget)||void 0===n||null===(i=n.contains)||void 0===i?void 0:i.call(n,t.target))}))}(e).map((function(e){return e.identifier}))}function w_(e){var t=y_(e);return A_(e)?t.identifier:t.pointerId}function B_(e){var t=y_(e);return[t.clientX,t.clientY]}function x_(e){if("function"===typeof e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return e.apply(void 0,n)}return e}function S_(){}function Z_(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?S_:1===t.length?t[0]:function(){for(var e,n=0,i=t;n<i.length;n++){e=i[n].apply(this,arguments)||e}return e}}function k_(e,t){return Object.assign({},t,e||{})}var R_=function(){function e(t,n,i){ka(this,e),this.ctrl=t,this.args=n,this.key=i,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}return Xe(e,[{key:"state",get:function(){return this.ctrl.state[this.key]},set:function(e){this.ctrl.state[this.key]=e}},{key:"shared",get:function(){return this.ctrl.state.shared}},{key:"eventStore",get:function(){return this.ctrl.gestureEventStores[this.key]}},{key:"timeoutStore",get:function(){return this.ctrl.gestureTimeoutStores[this.key]}},{key:"config",get:function(){return this.ctrl.config[this.key]}},{key:"sharedConfig",get:function(){return this.ctrl.config.shared}},{key:"handler",get:function(){return this.ctrl.handlers[this.key]}},{key:"reset",value:function(){var e=this.state,t=this.shared,n=this.ingKey,i=this.args;t[n]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=i,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}},{key:"start",value:function(e){var t=this.state,n=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=n.from?x_(n.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}},{key:"computeValues",value:function(e){var t=this.state;t._values=e,t.values=this.config.transform(e)}},{key:"computeInitial",value:function(){var e=this.state;e._initial=e._values,e.initial=e.values}},{key:"compute",value:function(e){var t=this.state,n=this.config,i=this.shared;t.args=this.args;var r=0;if(e&&(t.event=e,n.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,i.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,i.locked=!!document.pointerLockElement,Object.assign(i,function(e){var t={};if("buttons"in e&&(t.buttons=e.buttons),"shiftKey"in e){var n=e.shiftKey,i=e.altKey,r=e.metaKey,a=e.ctrlKey;Object.assign(t,{shiftKey:n,altKey:i,metaKey:r,ctrlKey:a})}return t}(e)),i.down=i.pressed=i.buttons%2===1||i.touches>0,r=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){var a=t._delta.map(Math.abs);s_(t._distance,a)}this.axisIntent&&this.axisIntent(e);var o=c(t._movement,2),s=o[0],l=o[1],u=c(n.threshold,2),g=u[0],d=u[1],h=t._step,f=t.values;if(n.hasCustomTransform?(!1===h[0]&&(h[0]=Math.abs(s)>=g&&f[0]),!1===h[1]&&(h[1]=Math.abs(l)>=d&&f[1])):(!1===h[0]&&(h[0]=Math.abs(s)>=g&&Math.sign(s)*g),!1===h[1]&&(h[1]=Math.abs(l)>=d&&Math.sign(l)*d)),t.intentional=!1!==h[0]||!1!==h[1],t.intentional){var p=[0,0];if(n.hasCustomTransform){var I=c(f,2),C=I[0],m=I[1];p[0]=!1!==h[0]?C-h[0]:0,p[1]=!1!==h[1]?m-h[1]:0}else p[0]=!1!==h[0]?s-h[0]:0,p[1]=!1!==h[1]?l-h[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(p);var v=t.offset,A=t._active&&!t._blocked||t.active;A&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=i[this.ingKey]=t._active,e&&(t.first&&("bounds"in n&&(t._bounds=x_(n.bounds,t)),this.setup&&this.setup()),t.movement=p,this.computeOffset()));var b=c(t.offset,2),y=b[0],G=b[1],w=c(t._bounds,2),B=c(w[0],2),x=B[0],S=B[1],Z=c(w[1],2),k=Z[0],R=Z[1];t.overflow=[y<x?-1:y>S?1:0,G<k?-1:G>R?1:0],t._movementBound[0]=!!t.overflow[0]&&(!1===t._movementBound[0]?t._movement[0]:t._movementBound[0]),t._movementBound[1]=!!t.overflow[1]&&(!1===t._movementBound[1]?t._movement[1]:t._movementBound[1]);var W=t._active&&n.rubberband||[0,0];if(t.offset=function(e,t,n){var i=c(t,2),r=i[0],a=i[1],o=c(n,2),s=o[0],l=o[1],u=c(e,2),g=c(u[0],2),d=g[0],h=g[1],f=c(u[1],2),p=f[0],I=f[1];return[c_(r,d,h,s),c_(a,p,I,l)]}(t._bounds,t.offset,W),t.delta=o_(t.offset,v),this.computeMovement(),A&&(!t.last||r>32)){t.delta=o_(t.offset,v);var M=t.delta.map(Math.abs);s_(t.distance,M),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&r>0&&(t.velocity=[M[0]/r,M[1]/r],t.timeDelta=r)}}}},{key:"emit",value:function(){var e=this.state,t=this.shared,n=this.config;if(e._active||this.clean(),!e._blocked&&e.intentional||e._force||n.triggerAllEvents){var i=this.handler(h_(h_(h_({},t),e),{},ke({},this.aliasKey,e.values)));void 0!==i&&(e.memo=i)}}},{key:"clean",value:function(){this.eventStore.clean(),this.timeoutStore.clean()}}]),e}();var W_=function(e){kc(n,e);var t=Vc(n);function n(){var e;ka(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return g_(Ye(e=t.call.apply(t,[this].concat(r))),"aliasKey","xy"),e}return Xe(n,[{key:"reset",value:function(){Yc(Rc(n.prototype),"reset",this).call(this),this.state.axis=void 0}},{key:"init",value:function(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}},{key:"computeOffset",value:function(){this.state.offset=a_(this.state.lastOffset,this.state.movement)}},{key:"computeMovement",value:function(){this.state.movement=o_(this.state.offset,this.state.lastOffset)}},{key:"axisIntent",value:function(e){var t=this.state,n=this.config;if(!t.axis&&e){var i="object"===typeof n.axisThreshold?n.axisThreshold[b_(e)]:n.axisThreshold;t.axis=function(e,t){var n=c(e,2),i=n[0],r=n[1],a=Math.abs(i),o=Math.abs(r);return a>o&&a>t?"x":o>a&&o>t?"y":void 0}(t._movement,i)}t._blocked=(n.lockDirection||!!n.axis)&&!t.axis||!!n.axis&&n.axis!==t.axis}},{key:"restrictToAxis",value:function(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0}}}]),n}(R_),M_=function(e){return e},V_={enabled:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]},eventOptions:function(e,t,n){return h_(h_({},n.shared.eventOptions),e)},preventDefault:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]},triggerAllEvents:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]},rubberband:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch(e){case!0:return[.15,.15];case!1:return[0,0];default:return r_(e)}},from:function(e){return"function"===typeof e?e:null!=e?r_(e):void 0},transform:function(e,t,n){var i=e||n.shared.transform;return this.hasCustomTransform=!!i,i||M_},threshold:function(e){return r_(e,0)}};var F_=h_(h_({},V_),{},{axis:function(e,t,n){var i=n.axis;if(this.lockDirection="lock"===i,!this.lockDirection)return i},axisThreshold:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:0},bounds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("function"===typeof e)return function(t){return F_.bounds(e(t))};if("current"in e)return function(){return e.current};if("function"===typeof HTMLElement&&e instanceof HTMLElement)return e;var t=e.left,n=void 0===t?-1/0:t,i=e.right,r=void 0===i?1/0:i,a=e.top,o=void 0===a?-1/0:a,s=e.bottom;return[[n,r],[o,void 0===s?1/0:s]]}}),N_={ArrowRight:function(e){return[e*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),0]},ArrowLeft:function(e){return[-1*e*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),0]},ArrowUp:function(e){return[0,-1*e*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)]},ArrowDown:function(e){return[0,e*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)]}},H_=function(e){kc(n,e);var t=Vc(n);function n(){var e;ka(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return g_(Ye(e=t.call.apply(t,[this].concat(r))),"ingKey","dragging"),e}return Xe(n,[{key:"reset",value:function(){Yc(Rc(n.prototype),"reset",this).call(this);var e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}},{key:"setup",value:function(){var e=this.state;if(e._bounds instanceof HTMLElement){var t=e._bounds.getBoundingClientRect(),n=e.currentTarget.getBoundingClientRect(),i={left:t.left-n.left+e.offset[0],right:t.right-n.right+e.offset[0],top:t.top-n.top+e.offset[1],bottom:t.bottom-n.bottom+e.offset[1]};e._bounds=F_.bounds(i)}}},{key:"cancel",value:function(){var e=this,t=this.state;t.canceled||(t.canceled=!0,t._active=!1,setTimeout((function(){e.compute(),e.emit()}),0))}},{key:"setActive",value:function(){this.state._active=this.state._pointerActive||this.state._keyboardActive}},{key:"clean",value:function(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,Yc(Rc(n.prototype),"clean",this).call(this)}},{key:"pointerDown",value:function(e){var t=this.config,n=this.state;if(null==e.buttons||(Array.isArray(t.pointerButtons)?t.pointerButtons.includes(e.buttons):-1===t.pointerButtons||t.pointerButtons===e.buttons)){var i=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),i&&i.size>1&&n._pointerActive||(this.start(e),this.setupPointer(e),n._pointerId=w_(e),n._pointerActive=!0,this.computeValues(B_(e)),this.computeInitial(),t.preventScrollAxis&&"mouse"!==b_(e)?(n._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}}},{key:"startPointerDrag",value:function(e){var t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}},{key:"pointerMove",value:function(e){var t=this.state,n=this.config;if(t._pointerActive){var i=w_(e);if(void 0===t._pointerId||i===t._pointerId){var r=B_(e);return document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=o_(r,t._values),this.computeValues(r)),s_(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional?(this.timeoutStore.remove("dragDelay"),t.active=!1,void this.startPointerDrag(e)):n.preventScrollAxis&&!t._preventScroll?t.axis?t.axis===n.preventScrollAxis||"xy"===n.preventScrollAxis?(t._active=!1,void this.clean()):(this.timeoutStore.remove("startPointerDrag"),void this.startPointerDrag(e)):void 0:void this.emit()}}}},{key:"pointerUp",value:function(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch(G){0}var t=this.state,n=this.config;if(t._active&&t._pointerActive){var i=w_(e);if(void 0===t._pointerId||i===t._pointerId){this.state._pointerActive=!1,this.setActive(),this.compute(e);var r=c(t._distance,2),a=r[0],o=r[1];if(t.tap=a<=n.tapsThreshold&&o<=n.tapsThreshold,t.tap&&n.filterTaps)t._force=!0;else{var s=c(t._delta,2),l=s[0],u=s[1],g=c(t._movement,2),d=g[0],h=g[1],f=c(n.swipe.velocity,2),p=f[0],I=f[1],C=c(n.swipe.distance,2),m=C[0],v=C[1],A=n.swipe.duration;if(t.elapsedTime<A){var b=Math.abs(l/t.timeDelta),y=Math.abs(u/t.timeDelta);b>p&&Math.abs(d)>m&&(t.swipe[0]=Math.sign(l)),y>I&&Math.abs(h)>v&&(t.swipe[1]=Math.sign(u))}}this.emit()}}}},{key:"pointerClick",value:function(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}},{key:"setupPointer",value:function(e){var t=this.config,n=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,n,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"cancel",this.pointerUp.bind(this)))}},{key:"pointerClean",value:function(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}},{key:"preventScroll",value:function(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}},{key:"setupScrollPrevention",value:function(e){this.state._preventScroll=!1,function(e){"persist"in e&&"function"===typeof e.persist&&e.persist()}(e);var t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}},{key:"setupDelayTrigger",value:function(e){var t=this;this.state._delayed=!0,this.timeoutStore.add("dragDelay",(function(){t.state._step=[0,0],t.startPointerDrag(e)}),this.config.delay)}},{key:"keyDown",value:function(e){var t=N_[e.key];if(t){var n=this.state,i=e.shiftKey?10:e.altKey?.1:1;this.start(e),n._delta=t(this.config.keyboardDisplacement,i),n._keyboardActive=!0,s_(n._movement,n._delta),this.compute(e),this.emit()}}},{key:"keyUp",value:function(e){e.key in N_&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}},{key:"bind",value:function(e){var t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}]),n}(W_);var T_="undefined"!==typeof window&&window.document&&window.document.createElement;function X_(){return T_&&"ontouchstart"in window||T_&&window.navigator.maxTouchPoints>1}var Y_={isBrowser:T_,gesture:function(){try{return"constructor"in GestureEvent}catch(e){return!1}}(),touch:X_(),touchscreen:X_(),pointer:T_&&"onpointerdown"in window,pointerLock:T_&&"exitPointerLock"in window.document},E_={mouse:0,touch:0,pen:8},z_=h_(h_({},F_),{},{device:function(e,t,n){var i=n.pointer,r=void 0===i?{}:i,a=r.touch,o=void 0!==a&&a,s=r.lock,l=void 0!==s&&s,c=r.mouse,u=void 0!==c&&c;return this.pointerLock=l&&Y_.pointerLock,Y_.touch&&o?"touch":this.pointerLock?"mouse":Y_.pointer&&!u?"pointer":Y_.touch?"touch":"mouse"},preventScrollAxis:function(e,t,n){var i=n.preventScroll;if(this.preventScrollDelay="number"===typeof i?i:i||void 0===i&&e?250:void 0,Y_.touchscreen&&!1!==i)return e||(void 0!==i?"y":void 0)},pointerCapture:function(e,t,n){var i=n.pointer,r=void 0===i?{}:i,a=r.capture,o=void 0===a||a,s=r.buttons,l=void 0===s?1:s,c=r.keys,u=void 0===c||c;return this.pointerButtons=l,this.keys=u,!this.pointerLock&&"pointer"===this.device&&o},threshold:function(e,t,n){var i=n.filterTaps,r=void 0!==i&&i,a=n.tapsThreshold,o=void 0===a?3:a,s=n.axis,l=r_(e,r?o:(void 0===s?void 0:s)?1:0);return this.filterTaps=r,this.tapsThreshold=o,l},swipe:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.velocity,n=void 0===t?.5:t,i=e.distance,r=void 0===i?50:i,a=e.duration,o=void 0===a?250:a;return{velocity:this.transform(r_(n)),distance:this.transform(r_(r)),duration:o}},delay:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch(e){case!0:return 180;case!1:return 0;default:return e}},axisThreshold:function(e){return e?h_(h_({},E_),e):E_},keyboardDisplacement:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:10}});h_(h_({},V_),{},{device:function(e,t,n){var i=n.shared,r=n.pointer,a=(void 0===r?{}:r).touch,o=void 0!==a&&a;if(i.target&&!Y_.touch&&Y_.gesture)return"gesture";if(Y_.touch&&o)return"touch";if(Y_.touchscreen){if(Y_.pointer)return"pointer";if(Y_.touch)return"touch"}},bounds:function(e,t,n){var i=n.scaleBounds,r=void 0===i?{}:i,a=n.angleBounds,o=void 0===a?{}:a,s=function(e){var t=k_(x_(r,e),{min:-1/0,max:1/0});return[t.min,t.max]},l=function(e){var t=k_(x_(o,e),{min:-1/0,max:1/0});return[t.min,t.max]};return"function"!==typeof r&&"function"!==typeof o?[s(),l()]:function(e){return[s(e),l(e)]}},threshold:function(e,t,n){this.lockDirection="lock"===n.axis;var i=r_(e,this.lockDirection?[.1,3]:0);return i},modifierKey:function(e){return void 0===e?"ctrlKey":e},pinchOnWheel:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}}),h_(h_({},F_),{},{mouseOnly:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}}),h_(h_({},F_),{},{mouseOnly:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}});var L_=new Map,K_=new Map;var __={key:"drag",engine:H_,resolver:z_};function P_(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var D_={target:function(e){if(e)return function(){return"current"in e?e.current:e}},enabled:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]},window:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y_.isBrowser?window:void 0})),eventOptions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.passive,n=void 0===t||t,i=e.capture;return{passive:n,capture:void 0!==i&&i}},transform:function(e){return e}},O_=["target","eventOptions","window","enabled","transform"];function U_(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n={},i=0,r=Object.entries(t);i<r.length;i++){var a=c(r[i],2),o=a[0],s=a[1];switch(typeof s){case"function":n[o]=s.call(n,e[o],o,e);break;case"object":n[o]=U_(e[o],s);break;case"boolean":s&&(n[o]=e[o])}}return n}var j_=function(){function e(t,n){ka(this,e),g_(this,"_listeners",new Set),this._ctrl=t,this._gestureKey=n}return Xe(e,[{key:"add",value:function(e,t,n,i,r){var a=this._listeners,o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=f_[e];return e+(n&&n[t]||t)}(t,n),s=h_(h_({},this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{}),r);e.addEventListener(o,i,s);var l=function t(){e.removeEventListener(o,i,s),a.delete(t)};return a.add(l),l}},{key:"clean",value:function(){this._listeners.forEach((function(e){return e()})),this._listeners.clear()}}]),e}(),J_=function(){function e(){ka(this,e),g_(this,"_timeouts",new Map)}return Xe(e,[{key:"add",value:function(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:140;this.remove(e);for(var r=arguments.length,a=new Array(r>3?r-3:0),o=3;o<r;o++)a[o-3]=arguments[o];this._timeouts.set(e,(n=window).setTimeout.apply(n,[t,i].concat(a)))}},{key:"remove",value:function(e){var t=this._timeouts.get(e);t&&window.clearTimeout(t)}},{key:"clean",value:function(){this._timeouts.forEach((function(e){window.clearTimeout(e)})),this._timeouts.clear()}}]),e}(),Q_=function(){function e(t){ka(this,e),g_(this,"gestures",new Set),g_(this,"_targetEventStore",new j_(this)),g_(this,"gestureEventStores",{}),g_(this,"gestureTimeoutStores",{}),g_(this,"handlers",{}),g_(this,"config",{}),g_(this,"pointerIds",new Set),g_(this,"touchIds",new Set),g_(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),function(e,t){t.drag&&q_(e,"drag");t.wheel&&q_(e,"wheel");t.scroll&&q_(e,"scroll");t.move&&q_(e,"move");t.pinch&&q_(e,"pinch");t.hover&&q_(e,"hover")}(this,t)}return Xe(e,[{key:"setEventIds",value:function(e){return A_(e)?(this.touchIds=new Set(G_(e)),this.touchIds):"pointerId"in e?("pointerup"===e.type||"pointercancel"===e.type?this.pointerIds.delete(e.pointerId):"pointerdown"===e.type&&this.pointerIds.add(e.pointerId),this.pointerIds):void 0}},{key:"applyHandlers",value:function(e,t){this.handlers=e,this.nativeHandlers=t}},{key:"applyConfig",value:function(e,t){this.config=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=e,r=i.target,a=i.eventOptions,o=i.window,s=i.enabled,l=i.transform,c=P_(i,O_);if(n.shared=U_({target:r,eventOptions:a,window:o,enabled:s,transform:l},D_),t){var u=K_.get(t);n[t]=U_(h_({shared:n.shared},c),u)}else for(var g in c){var d=K_.get(g);d&&(n[g]=U_(h_({shared:n.shared},c[g]),d))}return n}(e,t,this.config)}},{key:"clean",value:function(){this._targetEventStore.clean();var e,t=Fc(this.gestures);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.gestureEventStores[n].clean(),this.gestureTimeoutStores[n].clean()}}catch(i){t.e(i)}finally{t.f()}}},{key:"effect",value:function(){var e=this;return this.config.shared.target&&this.bind(),function(){return e._targetEventStore.clean()}}},{key:"bind",value:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var r,a=this.config.shared,o={};if(!a.target||(r=a.target())){if(a.enabled){var s,l=Fc(this.gestures);try{for(l.s();!(s=l.n()).done;){var c=s.value,u=this.config[c],g=$_(o,u.eventOptions,!!r);if(u.enabled)new(L_.get(c))(this,n,c).bind(g)}}catch(b){l.e(b)}finally{l.f()}var d=$_(o,a.eventOptions,!!r),h=function(t){d(t,"",(function(i){return e.nativeHandlers[t](h_(h_({},e.state.shared),{},{event:i,args:n}))}),void 0,!0)};for(var f in this.nativeHandlers)h(f)}for(var p in o)o[p]=Z_.apply(void 0,We(o[p]));if(!r)return o;for(var I in o){var C=v_(I),m=C.device,v=C.capture,A=C.passive;this._targetEventStore.add(r,m,"",o[I],{capture:v,passive:A})}}}}]),e}();function q_(e,t){e.gestures.add(t),e.gestureEventStores[t]=new j_(e,t),e.gestureTimeoutStores[t]=new J_}var $_=function(e,t,n){return function(i,r,a){var o,s,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=null!==(o=l.capture)&&void 0!==o?o:t.capture,g=null!==(s=l.passive)&&void 0!==s?s:t.passive,d=c?i:C_(i,r,u);n&&g&&(d+="Passive"),e[d]=e[d]||[],e[d].push(a)}};function eP(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=t.useMemo((function(){return new Q_(e)}),[]);if(a.applyHandlers(e,r),a.applyConfig(n,i),t.useEffect(a.effect.bind(a)),t.useEffect((function(){return a.clean.bind(a)}),[]),void 0===n.target)return a.bind.bind(a)}function tP(e,t){var n;return n=__,L_.set(n.key,n.engine),K_.set(n.key,n.resolver),eP({drag:e},t||{},"drag")}function nP(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).checkForDefaultPrevented,i=void 0===n||n;return function(n){if(null===e||void 0===e||e(n),!1===i||!n.defaultPrevented)return null===t||void 0===t?void 0:t(n)}}var iP=["scope","children"];function rP(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=[];var r=function(){var n=i.map((function(e){return(0,t.createContext)(e)}));return function(i){var r=(null===i||void 0===i?void 0:i[e])||n;return(0,t.useMemo)((function(){return ke({},"__scope".concat(e),Ve(Ve({},i),{},ke({},e,r)))}),[i,r])}};return r.scopeName=e,[function(n,r){var a=(0,t.createContext)(r),o=i.length;function s(n){var i=n.scope,r=n.children,s=Fe(n,iP),l=(null===i||void 0===i?void 0:i[e][o])||a,c=(0,t.useMemo)((function(){return s}),Object.values(s));return(0,t.createElement)(l.Provider,{value:c},r)}return i=[].concat(We(i),[r]),s.displayName=n+"Provider",[s,function(i,s){var l=(null===s||void 0===s?void 0:s[e][o])||a,c=(0,t.useContext)(l);if(c)return c;if(void 0!==r)return r;throw new Error("`".concat(i,"` must be used within `").concat(n,"`"))}]},aP.apply(void 0,[r].concat(We(n)))]}function aP(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var r=n[0];if(1===n.length)return r;var a=function(){var e=n.map((function(e){return{useScope:e(),scopeName:e.scopeName}}));return function(n){var i=e.reduce((function(e,t){var i=t.useScope,r=t.scopeName,a=i(n)["__scope".concat(r)];return Ve(Ve({},e),a)}),{});return(0,t.useMemo)((function(){return ke({},"__scope".concat(r.scopeName),i)}),[i])}};return a.scopeName=r.scopeName,a}function oP(e){var n=(0,t.useRef)(e);return(0,t.useEffect)((function(){n.current=e})),(0,t.useMemo)((function(){return function(){for(var e,t,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return null===(t=n.current)||void 0===t?void 0:(e=t).call.apply(e,[n].concat(r))}}),[])}var sP,lP=["disableOutsidePointerEvents","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss"],cP="dismissableLayer.update",uP="dismissableLayer.pointerDownOutside",gP="dismissableLayer.focusOutside",dP=(0,t.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),hP=(0,t.forwardRef)((function(e,n){var i,r=e.disableOutsidePointerEvents,a=void 0!==r&&r,o=e.onEscapeKeyDown,s=e.onPointerDownOutside,l=e.onFocusOutside,u=e.onInteractOutside,g=e.onDismiss,d=Fe(e,lP),h=(0,t.useContext)(dP),f=c((0,t.useState)(null),2),p=f[0],I=f[1],C=null!==(i=null===p||void 0===p?void 0:p.ownerDocument)&&void 0!==i?i:null===globalThis||void 0===globalThis?void 0:globalThis.document,m=c((0,t.useState)({}),2)[1],A=xL(n,(function(e){return I(e)})),b=Array.from(h.layers),y=c(We(h.layersWithOutsidePointerEventsDisabled).slice(-1),1)[0],G=b.indexOf(y),w=p?b.indexOf(p):-1,B=h.layersWithOutsidePointerEventsDisabled.size>0,x=w>=G,S=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document,i=oP(e),r=(0,t.useRef)(!1),a=(0,t.useRef)((function(){}));return(0,t.useEffect)((function(){var e=function(e){if(e.target&&!r.current){var t=function(){pP(uP,i,o,{discrete:!0})},o={originalEvent:e};"touch"===e.pointerType?(n.removeEventListener("click",a.current),a.current=t,n.addEventListener("click",a.current,{once:!0})):t()}r.current=!1},t=window.setTimeout((function(){n.addEventListener("pointerdown",e)}),0);return function(){window.clearTimeout(t),n.removeEventListener("pointerdown",e),n.removeEventListener("click",a.current)}}),[n,i]),{onPointerDownCapture:function(){return r.current=!0}}}((function(e){var t=e.target,n=We(h.branches).some((function(e){return e.contains(t)}));x&&!n&&(null===s||void 0===s||s(e),null===u||void 0===u||u(e),e.defaultPrevented||null===g||void 0===g||g())}),C),Z=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document,i=oP(e),r=(0,t.useRef)(!1);return(0,t.useEffect)((function(){var e=function(e){e.target&&!r.current&&pP(gP,i,{originalEvent:e},{discrete:!1})};return n.addEventListener("focusin",e),function(){return n.removeEventListener("focusin",e)}}),[n,i]),{onFocusCapture:function(){return r.current=!0},onBlurCapture:function(){return r.current=!1}}}((function(e){var t=e.target;We(h.branches).some((function(e){return e.contains(t)}))||(null===l||void 0===l||l(e),null===u||void 0===u||u(e),e.defaultPrevented||null===g||void 0===g||g())}),C);return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document,i=oP(e);(0,t.useEffect)((function(){var e=function(e){"Escape"===e.key&&i(e)};return n.addEventListener("keydown",e),function(){return n.removeEventListener("keydown",e)}}),[i,n])}((function(e){w===h.layers.size-1&&(null===o||void 0===o||o(e),!e.defaultPrevented&&g&&(e.preventDefault(),g()))}),C),(0,t.useEffect)((function(){if(p)return a&&(0===h.layersWithOutsidePointerEventsDisabled.size&&(sP=C.body.style.pointerEvents,C.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(p)),h.layers.add(p),fP(),function(){a&&1===h.layersWithOutsidePointerEventsDisabled.size&&(C.body.style.pointerEvents=sP)}}),[p,C,a,h]),(0,t.useEffect)((function(){return function(){p&&(h.layers.delete(p),h.layersWithOutsidePointerEventsDisabled.delete(p),fP())}}),[p,h]),(0,t.useEffect)((function(){var e=function(){return m({})};return document.addEventListener(cP,e),function(){return document.removeEventListener(cP,e)}}),[]),(0,t.createElement)(FL.div,v({},d,{ref:A,style:Ve({pointerEvents:B?x?"auto":"none":void 0},e.style),onFocusCapture:nP(e.onFocusCapture,Z.onFocusCapture),onBlurCapture:nP(e.onBlurCapture,Z.onBlurCapture),onPointerDownCapture:nP(e.onPointerDownCapture,S.onPointerDownCapture)}))}));function fP(){var e=new CustomEvent(cP);document.dispatchEvent(e)}function pP(e,t,n,i){var a=i.discrete,o=n.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&o.addEventListener(e,t,{once:!0}),a?function(e,t){e&&(0,r.flushSync)((function(){return e.dispatchEvent(t)}))}(o,s):o.dispatchEvent(s)}var IP=Boolean(null===globalThis||void 0===globalThis?void 0:globalThis.document)?t.useLayoutEffect:function(){},CP=i["useId".toString()]||function(){},mP=0;var vP=["top","right","bottom","left"],AP=Math.min,bP=Math.max,yP=Math.round,GP=Math.floor,wP=function(e){return{x:e,y:e}},BP={left:"right",right:"left",bottom:"top",top:"bottom"},xP={start:"end",end:"start"};function SP(e,t,n){return bP(e,AP(t,n))}function ZP(e,t){return"function"===typeof e?e(t):e}function kP(e){return e.split("-")[0]}function RP(e){return e.split("-")[1]}function WP(e){return"x"===e?"y":"x"}function MP(e){return"y"===e?"height":"width"}function VP(e){return["top","bottom"].includes(kP(e))?"y":"x"}function FP(e){return WP(VP(e))}function NP(e,t,n){void 0===n&&(n=!1);var i=RP(e),r=FP(e),a=MP(r),o="x"===r?i===(n?"end":"start")?"right":"left":"start"===i?"bottom":"top";return t.reference[a]>t.floating[a]&&(o=YP(o)),[o,YP(o)]}function HP(e){var t=YP(e);return[TP(e),t,TP(t)]}function TP(e){return e.replace(/start|end/g,(function(e){return xP[e]}))}function XP(e,t,n,i){var r=RP(e),a=function(e,t,n){var i=["left","right"],r=["right","left"];switch(e){case"top":case"bottom":return n?t?r:i:t?i:r;case"left":case"right":return t?["top","bottom"]:["bottom","top"];default:return[]}}(kP(e),"start"===n,i);return r&&(a=a.map((function(e){return e+"-"+r})),t&&(a=a.concat(a.map(TP)))),a}function YP(e){return e.replace(/left|right|bottom|top/g,(function(e){return BP[e]}))}function EP(e){return"number"!==typeof e?function(e){return Ve({top:0,right:0,bottom:0,left:0},e)}(e):{top:e,right:e,bottom:e,left:e}}function zP(e){return Ve(Ve({},e),{},{top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height})}var LP=["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","flipAlignment"],KP=["strategy"],_P=["mainAxis","crossAxis","limiter"],PP=["apply"];function DP(e,t,n){var i,r=e.reference,a=e.floating,o=VP(t),s=FP(t),l=MP(s),c=kP(t),u="y"===o,g=r.x+r.width/2-a.width/2,d=r.y+r.height/2-a.height/2,h=r[l]/2-a[l]/2;switch(c){case"top":i={x:g,y:r.y-a.height};break;case"bottom":i={x:g,y:r.y+r.height};break;case"right":i={x:r.x+r.width,y:d};break;case"left":i={x:r.x-a.width,y:d};break;default:i={x:r.x,y:r.y}}switch(RP(t)){case"start":i[s]-=h*(n&&u?-1:1);break;case"end":i[s]+=h*(n&&u?-1:1)}return i}var OP=function(){var e=Xc(Ec().mark((function e(t,n,i){var r,a,o,s,l,c,u,g,d,h,f,p,I,C,m,v,A,b,y,G,w,B,x,S,Z,k;return Ec().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.placement,a=void 0===r?"bottom":r,o=i.strategy,s=void 0===o?"absolute":o,l=i.middleware,c=void 0===l?[]:l,u=i.platform,g=c.filter(Boolean),e.next=4,null==u.isRTL?void 0:u.isRTL(n);case 4:return d=e.sent,e.next=7,u.getElementRects({reference:t,floating:n,strategy:s});case 7:h=e.sent,f=DP(h,a,d),p=f.x,I=f.y,C=a,m={},v=0,A=0;case 13:if(!(A<g.length)){e.next=46;break}return b=g[A],y=b.name,G=b.fn,e.next=17,G({x:p,y:I,initialPlacement:a,placement:C,strategy:s,middlewareData:m,rects:h,platform:u,elements:{reference:t,floating:n}});case 17:if(w=e.sent,B=w.x,x=w.y,S=w.data,Z=w.reset,p=null!=B?B:p,I=null!=x?x:I,m=Ve(Ve({},m),{},ke({},y,Ve(Ve({},m[y]),S))),!(Z&&v<=50)){e.next=43;break}if(v++,"object"!==typeof Z){e.next=41;break}if(Z.placement&&(C=Z.placement),!Z.rects){e.next=38;break}if(!0!==Z.rects){e.next=36;break}return e.next=33,u.getElementRects({reference:t,floating:n,strategy:s});case 33:e.t0=e.sent,e.next=37;break;case 36:e.t0=Z.rects;case 37:h=e.t0;case 38:k=DP(h,C,d),p=k.x,I=k.y;case 41:return A=-1,e.abrupt("continue",43);case 43:A++,e.next=13;break;case 46:return e.abrupt("return",{x:p,y:I,placement:C,strategy:s,middlewareData:m});case 47:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}();function UP(e,t){return jP.apply(this,arguments)}function jP(){return jP=Xc(Ec().mark((function e(t,n){var i,r,a,o,s,l,c,u,g,d,h,f,p,I,C,m,v,A,b,y,G,w,B,x,S;return Ec().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n={}),r=t.x,a=t.y,o=t.platform,s=t.rects,l=t.elements,c=t.strategy,u=ZP(n,t),g=u.boundary,d=void 0===g?"clippingAncestors":g,h=u.rootBoundary,f=void 0===h?"viewport":h,p=u.elementContext,I=void 0===p?"floating":p,C=u.altBoundary,m=void 0!==C&&C,v=u.padding,A=EP(void 0===v?0:v),b="floating"===I?"reference":"floating",y=l[m?b:I],e.t0=zP,e.t1=o,e.next=10,null==o.isElement?void 0:o.isElement(y);case 10:if(e.t2=i=e.sent,null==e.t2){e.next=15;break}e.t3=i,e.next=16;break;case 15:e.t3=!0;case 16:if(!e.t3){e.next=20;break}e.t4=y,e.next=26;break;case 20:if(e.t5=y.contextElement,e.t5){e.next=25;break}return e.next=24,null==o.getDocumentElement?void 0:o.getDocumentElement(l.floating);case 24:e.t5=e.sent;case 25:e.t4=e.t5;case 26:return e.t6=e.t4,e.t7=d,e.t8=f,e.t9=c,e.t10={element:e.t6,boundary:e.t7,rootBoundary:e.t8,strategy:e.t9},e.next=33,e.t1.getClippingRect.call(e.t1,e.t10);case 33:return e.t11=e.sent,G=(0,e.t0)(e.t11),w="floating"===I?Ve(Ve({},s.floating),{},{x:r,y:a}):s.reference,e.next=38,null==o.getOffsetParent?void 0:o.getOffsetParent(l.floating);case 38:return B=e.sent,e.next=41,null==o.isElement?void 0:o.isElement(B);case 41:if(!e.sent){e.next=50;break}return e.next=44,null==o.getScale?void 0:o.getScale(B);case 44:if(e.t13=e.sent,e.t13){e.next=47;break}e.t13={x:1,y:1};case 47:e.t12=e.t13,e.next=51;break;case 50:e.t12={x:1,y:1};case 51:if(x=e.t12,e.t14=zP,!o.convertOffsetParentRelativeRectToViewportRelativeRect){e.next=59;break}return e.next=56,o.convertOffsetParentRelativeRectToViewportRelativeRect({rect:w,offsetParent:B,strategy:c});case 56:e.t15=e.sent,e.next=60;break;case 59:e.t15=w;case 60:return e.t16=e.t15,S=(0,e.t14)(e.t16),e.abrupt("return",{top:(G.top-S.top+A.top)/x.y,bottom:(S.bottom-G.bottom+A.bottom)/x.y,left:(G.left-S.left+A.left)/x.x,right:(S.right-G.right+A.right)/x.x});case 63:case"end":return e.stop()}}),e)}))),jP.apply(this,arguments)}var JP=function(e){return{name:"arrow",options:e,fn:function(t){return Xc(Ec().mark((function n(){var i,r,a,o,s,l,c,u,g,d,h,f,p,I,C,m,v,A,b,y,G,w,B,x,S,Z,k,R,W,M,V,F,N,H,T,X;return Ec().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=t.x,o=t.y,s=t.placement,l=t.rects,c=t.platform,u=t.elements,g=t.middlewareData,d=ZP(e,t)||{},h=d.element,f=d.padding,p=void 0===f?0:f,null!=h){n.next=4;break}return n.abrupt("return",{});case 4:return I=EP(p),C={x:a,y:o},m=FP(s),v=MP(m),n.next=10,c.getDimensions(h);case 10:return A=n.sent,y=(b="y"===m)?"top":"left",G=b?"bottom":"right",w=b?"clientHeight":"clientWidth",B=l.reference[v]+l.reference[m]-C[m]-l.floating[v],x=C[m]-l.reference[m],n.next=19,null==c.getOffsetParent?void 0:c.getOffsetParent(h);case 19:if(S=n.sent,Z=S?S[w]:0,n.t0=!Z,n.t0){n.next=26;break}return n.next=25,null==c.isElement?void 0:c.isElement(S);case 25:n.t0=!n.sent;case 26:if(!n.t0){n.next=28;break}Z=u.floating[w]||l.floating[v];case 28:return k=B/2-x/2,R=Z/2-A[v]/2-1,W=AP(I[y],R),M=AP(I[G],R),V=W,F=Z-A[v]-M,N=Z/2-A[v]/2+k,H=SP(V,N,F),T=!g.arrow&&null!=RP(s)&&N!=H&&l.reference[v]/2-(N<V?W:M)-A[v]/2<0,X=T?N<V?N-V:N-F:0,n.abrupt("return",(ke(r={},m,C[m]+X),ke(r,"data",Ve((ke(i={},m,H),ke(i,"centerOffset",N-H-X),i),T&&{alignmentOffset:X})),ke(r,"reset",T),r));case 39:case"end":return n.stop()}}),n)})))()}}};var QP=function(e){return void 0===e&&(e={}),{name:"flip",options:e,fn:function(t){return Xc(Ec().mark((function n(){var i,r,a,o,s,l,c,u,g,d,h,f,p,I,C,m,v,A,b,y,G,w,B,x,S,Z,k,R,W,M,V,F,N,H,T,X,Y;return Ec().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=t.placement,o=t.middlewareData,s=t.rects,l=t.initialPlacement,c=t.platform,u=t.elements,g=ZP(e,t),d=g.mainAxis,h=void 0===d||d,f=g.crossAxis,p=void 0===f||f,I=g.fallbackPlacements,C=g.fallbackStrategy,m=void 0===C?"bestFit":C,v=g.fallbackAxisSideDirection,A=void 0===v?"none":v,b=g.flipAlignment,y=void 0===b||b,G=Fe(g,LP),null==(i=o.arrow)||!i.alignmentOffset){n.next=4;break}return n.abrupt("return",{});case 4:return w=kP(a),B=kP(l)===l,n.next=8,null==c.isRTL?void 0:c.isRTL(u.floating);case 8:return x=n.sent,S=I||(B||!y?[YP(l)]:HP(l)),I||"none"===A||S.push.apply(S,We(XP(l,y,A,x))),Z=[l].concat(We(S)),n.next=14,UP(t,G);case 14:if(k=n.sent,R=[],W=(null==(r=o.flip)?void 0:r.overflows)||[],h&&R.push(k[w]),p&&(M=NP(a,s,x),R.push(k[M[0]],k[M[1]])),W=[].concat(We(W),[{placement:a,overflows:R}]),R.every((function(e){return e<=0}))){n.next=37;break}if(N=((null==(V=o.flip)?void 0:V.index)||0)+1,!(H=Z[N])){n.next=25;break}return n.abrupt("return",{data:{index:N,overflows:W},reset:{placement:H}});case 25:if(T=null==(F=W.filter((function(e){return e.overflows[0]<=0})).sort((function(e,t){return e.overflows[1]-t.overflows[1]}))[0])?void 0:F.placement,T){n.next=35;break}n.t0=m,n.next="bestFit"===n.t0?30:"initialPlacement"===n.t0?33:35;break;case 30:return Y=null==(X=W.map((function(e){return[e.placement,e.overflows.filter((function(e){return e>0})).reduce((function(e,t){return e+t}),0)]})).sort((function(e,t){return e[1]-t[1]}))[0])?void 0:X[0],Y&&(T=Y),n.abrupt("break",35);case 33:return T=l,n.abrupt("break",35);case 35:if(a===T){n.next=37;break}return n.abrupt("return",{reset:{placement:T}});case 37:return n.abrupt("return",{});case 38:case"end":return n.stop()}}),n)})))()}}};function qP(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function $P(e){return vP.some((function(t){return e[t]>=0}))}var eD=function(e){return void 0===e&&(e={}),{name:"hide",options:e,fn:function(t){return Xc(Ec().mark((function n(){var i,r,a,o,s,l,c,u,g;return Ec().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i=t.rects,r=ZP(e,t),a=r.strategy,o=void 0===a?"referenceHidden":a,s=Fe(r,KP),n.t0=o,n.next="referenceHidden"===n.t0?5:"escaped"===n.t0?10:15;break;case 5:return n.next=7,UP(t,Ve(Ve({},s),{},{elementContext:"reference"}));case 7:return l=n.sent,c=qP(l,i.reference),n.abrupt("return",{data:{referenceHiddenOffsets:c,referenceHidden:$P(c)}});case 10:return n.next=12,UP(t,Ve(Ve({},s),{},{altBoundary:!0}));case 12:return u=n.sent,g=qP(u,i.floating),n.abrupt("return",{data:{escapedOffsets:g,escaped:$P(g)}});case 15:return n.abrupt("return",{});case 16:case"end":return n.stop()}}),n)})))()}}};function tD(e,t){return nD.apply(this,arguments)}function nD(){return nD=Xc(Ec().mark((function e(t,n){var i,r,a,o,s,l,c,u,g,d,h,f,p,I;return Ec().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.placement,r=t.platform,a=t.elements,e.next=3,null==r.isRTL?void 0:r.isRTL(a.floating);case 3:return o=e.sent,s=kP(i),l=RP(i),c="y"===VP(i),u=["left","top"].includes(s)?-1:1,g=o&&c?-1:1,d=ZP(n,t),h="number"===typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:Ve({mainAxis:0,crossAxis:0,alignmentAxis:null},d),f=h.mainAxis,p=h.crossAxis,I=h.alignmentAxis,l&&"number"===typeof I&&(p="end"===l?-1*I:I),e.abrupt("return",c?{x:p*g,y:f*u}:{x:f*u,y:p*g});case 13:case"end":return e.stop()}}),e)}))),nD.apply(this,arguments)}var iD=function(e){return void 0===e&&(e={}),{name:"shift",options:e,fn:function(t){return Xc(Ec().mark((function n(){var i,r,a,o,s,l,c,u,g,d,h,f,p,I,C,m,v,A,b,y,G,w,B,x,S;return Ec().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.x,a=t.y,o=t.placement,s=ZP(e,t),l=s.mainAxis,c=void 0===l||l,u=s.crossAxis,g=void 0!==u&&u,d=s.limiter,h=void 0===d?{fn:function(e){return{x:e.x,y:e.y}}}:d,f=Fe(s,_P),p={x:r,y:a},n.next=5,UP(t,f);case 5:return I=n.sent,C=VP(kP(o)),m=WP(C),v=p[m],A=p[C],c&&(b="y"===m?"bottom":"right",y=v+I["y"===m?"top":"left"],G=v-I[b],v=SP(y,v,G)),g&&(w="y"===C?"bottom":"right",B=A+I["y"===C?"top":"left"],x=A-I[w],A=SP(B,A,x)),S=h.fn(Ve(Ve({},t),{},(ke(i={},m,v),ke(i,C,A),i))),n.abrupt("return",Ve(Ve({},S),{},{data:{x:S.x-r,y:S.y-a}}));case 14:case"end":return n.stop()}}),n)})))()}}},rD=function(e){return void 0===e&&(e={}),{options:e,fn:function(t){var n,i=t.x,r=t.y,a=t.placement,o=t.rects,s=t.middlewareData,l=ZP(e,t),c=l.offset,u=void 0===c?0:c,g=l.mainAxis,d=void 0===g||g,h=l.crossAxis,f=void 0===h||h,p={x:i,y:r},I=VP(a),C=WP(I),m=p[C],v=p[I],A=ZP(u,t),b="number"===typeof A?{mainAxis:A,crossAxis:0}:Ve({mainAxis:0,crossAxis:0},A);if(d){var y="y"===C?"height":"width",G=o.reference[C]-o.floating[y]+b.mainAxis,w=o.reference[C]+o.reference[y]-b.mainAxis;m<G?m=G:m>w&&(m=w)}if(f){var B,x,S="y"===C?"width":"height",Z=["top","left"].includes(kP(a)),k=o.reference[I]-o.floating[S]+(Z&&(null==(B=s.offset)?void 0:B[I])||0)+(Z?0:b.crossAxis),R=o.reference[I]+o.reference[S]+(Z?0:(null==(x=s.offset)?void 0:x[I])||0)-(Z?b.crossAxis:0);v<k?v=k:v>R&&(v=R)}return ke(n={},C,m),ke(n,I,v),n}}},aD=function(e){return void 0===e&&(e={}),{name:"size",options:e,fn:function(t){return Xc(Ec().mark((function n(){var i,r,a,o,s,l,c,u,g,d,h,f,p,I,C,m,v,A,b,y,G,w,B,x,S,Z,k,R,W;return Ec().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.placement,r=t.rects,a=t.platform,o=t.elements,s=ZP(e,t),l=s.apply,c=void 0===l?function(){}:l,u=Fe(s,PP),n.next=4,UP(t,u);case 4:if(g=n.sent,d=kP(i),h=RP(i),f="y"===VP(i),p=r.floating,I=p.width,C=p.height,"top"!==d&&"bottom"!==d){n.next=28;break}return m=d,n.t0=h,n.next=14,null==a.isRTL?void 0:a.isRTL(o.floating);case 14:if(!n.sent){n.next=18;break}n.t1="start",n.next=19;break;case 18:n.t1="end";case 19:if(n.t2=n.t1,n.t0!==n.t2){n.next=24;break}n.t3="left",n.next=25;break;case 24:n.t3="right";case 25:v=n.t3,n.next=30;break;case 28:v=d,m="end"===h?"top":"bottom";case 30:return A=C-g[m],b=I-g[v],y=!t.middlewareData.shift,G=A,w=b,f?(B=I-g.left-g.right,w=h||y?AP(b,B):B):(x=C-g.top-g.bottom,G=h||y?AP(A,x):x),y&&!h&&(S=bP(g.left,0),Z=bP(g.right,0),k=bP(g.top,0),R=bP(g.bottom,0),f?w=I-2*(0!==S||0!==Z?S+Z:bP(g.left,g.right)):G=C-2*(0!==k||0!==R?k+R:bP(g.top,g.bottom))),n.next=39,c(Ve(Ve({},t),{},{availableWidth:w,availableHeight:G}));case 39:return n.next=41,a.getDimensions(o.floating);case 41:if(W=n.sent,I===W.width&&C===W.height){n.next=44;break}return n.abrupt("return",{reset:{rects:!0}});case 44:return n.abrupt("return",{});case 45:case"end":return n.stop()}}),n)})))()}}};function oD(e){return cD(e)?(e.nodeName||"").toLowerCase():"#document"}function sD(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function lD(e){var t;return null==(t=(cD(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function cD(e){return e instanceof Node||e instanceof sD(e).Node}function uD(e){return e instanceof Element||e instanceof sD(e).Element}function gD(e){return e instanceof HTMLElement||e instanceof sD(e).HTMLElement}function dD(e){return"undefined"!==typeof ShadowRoot&&(e instanceof ShadowRoot||e instanceof sD(e).ShadowRoot)}function hD(e){var t=mD(e),n=t.overflow,i=t.overflowX,r=t.overflowY,a=t.display;return/auto|scroll|overlay|hidden|clip/.test(n+r+i)&&!["inline","contents"].includes(a)}function fD(e){return["table","td","th"].includes(oD(e))}function pD(e){var t=ID(),n=mD(e);return"none"!==n.transform||"none"!==n.perspective||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||["transform","perspective","filter"].some((function(e){return(n.willChange||"").includes(e)}))||["paint","layout","strict","content"].some((function(e){return(n.contain||"").includes(e)}))}function ID(){return!("undefined"===typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function CD(e){return["html","body","#document"].includes(oD(e))}function mD(e){return sD(e).getComputedStyle(e)}function vD(e){return uD(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function AD(e){if("html"===oD(e))return e;var t=e.assignedSlot||e.parentNode||dD(e)&&e.host||lD(e);return dD(t)?t.host:t}function bD(e){var t=AD(e);return CD(t)?e.ownerDocument?e.ownerDocument.body:e.body:gD(t)&&hD(t)?t:bD(t)}function yD(e,t,n){var i;void 0===t&&(t=[]),void 0===n&&(n=!0);var r=bD(e),a=r===(null==(i=e.ownerDocument)?void 0:i.body),o=sD(r);return a?t.concat(o,o.visualViewport||[],hD(r)?r:[],o.frameElement&&n?yD(o.frameElement):[]):t.concat(r,yD(r,[],n))}function GD(e){var t=mD(e),n=parseFloat(t.width)||0,i=parseFloat(t.height)||0,r=gD(e),a=r?e.offsetWidth:n,o=r?e.offsetHeight:i,s=yP(n)!==a||yP(i)!==o;return s&&(n=a,i=o),{width:n,height:i,$:s}}function wD(e){return uD(e)?e:e.contextElement}function BD(e){var t=wD(e);if(!gD(t))return wP(1);var n=t.getBoundingClientRect(),i=GD(t),r=i.width,a=i.height,o=i.$,s=(o?yP(n.width):n.width)/r,l=(o?yP(n.height):n.height)/a;return s&&Number.isFinite(s)||(s=1),l&&Number.isFinite(l)||(l=1),{x:s,y:l}}var xD=wP(0);function SD(e){var t=sD(e);return ID()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:xD}function ZD(e,t,n,i){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=e.getBoundingClientRect(),a=wD(e),o=wP(1);t&&(i?uD(i)&&(o=BD(i)):o=BD(e));var s=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==sD(e))&&t}(a,n,i)?SD(a):wP(0),l=(r.left+s.x)/o.x,c=(r.top+s.y)/o.y,u=r.width/o.x,g=r.height/o.y;if(a)for(var d=sD(a),h=i&&uD(i)?sD(i):i,f=d.frameElement;f&&i&&h!==d;){var p=BD(f),I=f.getBoundingClientRect(),C=mD(f),m=I.left+(f.clientLeft+parseFloat(C.paddingLeft))*p.x,v=I.top+(f.clientTop+parseFloat(C.paddingTop))*p.y;l*=p.x,c*=p.y,u*=p.x,g*=p.y,l+=m,c+=v,f=sD(f).frameElement}return zP({width:u,height:g,x:l,y:c})}function kD(e){return ZD(lD(e)).left+vD(e).scrollLeft}function RD(e,t,n){var i;if("viewport"===t)i=function(e,t){var n=sD(e),i=lD(e),r=n.visualViewport,a=i.clientWidth,o=i.clientHeight,s=0,l=0;if(r){a=r.width,o=r.height;var c=ID();(!c||c&&"fixed"===t)&&(s=r.offsetLeft,l=r.offsetTop)}return{width:a,height:o,x:s,y:l}}(e,n);else if("document"===t)i=function(e){var t=lD(e),n=vD(e),i=e.ownerDocument.body,r=bP(t.scrollWidth,t.clientWidth,i.scrollWidth,i.clientWidth),a=bP(t.scrollHeight,t.clientHeight,i.scrollHeight,i.clientHeight),o=-n.scrollLeft+kD(e),s=-n.scrollTop;return"rtl"===mD(i).direction&&(o+=bP(t.clientWidth,i.clientWidth)-r),{width:r,height:a,x:o,y:s}}(lD(e));else if(uD(t))i=function(e,t){var n=ZD(e,!0,"fixed"===t),i=n.top+e.clientTop,r=n.left+e.clientLeft,a=gD(e)?BD(e):wP(1);return{width:e.clientWidth*a.x,height:e.clientHeight*a.y,x:r*a.x,y:i*a.y}}(t,n);else{var r=SD(e);i=Ve(Ve({},t),{},{x:t.x-r.x,y:t.y-r.y})}return zP(i)}function WD(e,t){var n=AD(e);return!(n===t||!uD(n)||CD(n))&&("fixed"===mD(n).position||WD(n,t))}function MD(e,t,n){var i=gD(t),r=lD(t),a="fixed"===n,o=ZD(e,!0,a,t),s={scrollLeft:0,scrollTop:0},l=wP(0);if(i||!i&&!a)if(("body"!==oD(t)||hD(r))&&(s=vD(t)),i){var c=ZD(t,!0,a,t);l.x=c.x+t.clientLeft,l.y=c.y+t.clientTop}else r&&(l.x=kD(r));return{x:o.left+s.scrollLeft-l.x,y:o.top+s.scrollTop-l.y,width:o.width,height:o.height}}function VD(e,t){return gD(e)&&"fixed"!==mD(e).position?t?t(e):e.offsetParent:null}function FD(e,t){var n=sD(e);if(!gD(e))return n;for(var i=VD(e,t);i&&fD(i)&&"static"===mD(i).position;)i=VD(i,t);return i&&("html"===oD(i)||"body"===oD(i)&&"static"===mD(i).position&&!pD(i))?n:i||function(e){for(var t=AD(e);gD(t)&&!CD(t);){if(pD(t))return t;t=AD(t)}return null}(e)||n}var ND=function(){var e=Xc(Ec().mark((function e(t){var n,i,r,a,o;return Ec().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.reference,i=t.floating,r=t.strategy,a=this.getOffsetParent||FD,o=this.getDimensions,e.t0=MD,e.t1=n,e.next=7,a(i);case 7:return e.t2=e.sent,e.t3=r,e.t4=(0,e.t0)(e.t1,e.t2,e.t3),e.t5=Ve,e.t6={x:0,y:0},e.next=14,o(i);case 14:return e.t7=e.sent,e.t8=(0,e.t5)(e.t6,e.t7),e.abrupt("return",{reference:e.t4,floating:e.t8});case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();var HD={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){var t=e.rect,n=e.offsetParent,i=e.strategy,r=gD(n),a=lD(n);if(n===a)return t;var o={scrollLeft:0,scrollTop:0},s=wP(1),l=wP(0);if((r||!r&&"fixed"!==i)&&(("body"!==oD(n)||hD(a))&&(o=vD(n)),gD(n))){var c=ZD(n);s=BD(n),l.x=c.x+n.clientLeft,l.y=c.y+n.clientTop}return{width:t.width*s.x,height:t.height*s.y,x:t.x*s.x-o.scrollLeft*s.x+l.x,y:t.y*s.y-o.scrollTop*s.y+l.y}},getDocumentElement:lD,getClippingRect:function(e){var t=e.element,n=e.boundary,i=e.rootBoundary,r=e.strategy,a="clippingAncestors"===n?function(e,t){var n=t.get(e);if(n)return n;for(var i=yD(e,[],!1).filter((function(e){return uD(e)&&"body"!==oD(e)})),r=null,a="fixed"===mD(e).position,o=a?AD(e):e;uD(o)&&!CD(o);){var s=mD(o),l=pD(o);l||"fixed"!==s.position||(r=null),(a?!l&&!r:!l&&"static"===s.position&&r&&["absolute","fixed"].includes(r.position)||hD(o)&&!l&&WD(e,o))?i=i.filter((function(e){return e!==o})):r=s,o=AD(o)}return t.set(e,i),i}(t,this._c):[].concat(n),o=[].concat(We(a),[i]),s=o[0],l=o.reduce((function(e,n){var i=RD(t,n,r);return e.top=bP(i.top,e.top),e.right=AP(i.right,e.right),e.bottom=AP(i.bottom,e.bottom),e.left=bP(i.left,e.left),e}),RD(t,s,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},getOffsetParent:FD,getElementRects:ND,getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){return GD(e)},getScale:BD,isElement:uD,isRTL:function(e){return"rtl"===mD(e).direction}};function TD(e,t,n,i){void 0===i&&(i={});var r=i,a=r.ancestorScroll,o=void 0===a||a,s=r.ancestorResize,l=void 0===s||s,u=r.elementResize,g=void 0===u?"function"===typeof ResizeObserver:u,d=r.layoutShift,h=void 0===d?"function"===typeof IntersectionObserver:d,f=r.animationFrame,p=void 0!==f&&f,I=wD(e),C=o||l?[].concat(We(I?yD(I):[]),We(yD(t))):[];C.forEach((function(e){o&&e.addEventListener("scroll",n,{passive:!0}),l&&e.addEventListener("resize",n)}));var m,v=I&&h?function(e,t){var n,i=null,r=lD(e);function a(){clearTimeout(n),i&&i.disconnect(),i=null}return function o(s,l){void 0===s&&(s=!1),void 0===l&&(l=1),a();var c=e.getBoundingClientRect(),u=c.left,g=c.top,d=c.width,h=c.height;if(s||t(),d&&h){var f={rootMargin:-GP(g)+"px "+-GP(r.clientWidth-(u+d))+"px "+-GP(r.clientHeight-(g+h))+"px "+-GP(u)+"px",threshold:bP(0,AP(1,l))||1},p=!0;try{i=new IntersectionObserver(I,Ve(Ve({},f),{},{root:r.ownerDocument}))}catch(C){i=new IntersectionObserver(I,f)}i.observe(e)}function I(e){var t=e[0].intersectionRatio;if(t!==l){if(!p)return o();t?o(!1,t):n=setTimeout((function(){o(!1,1e-7)}),100)}p=!1}}(!0),a}(I,n):null,A=-1,b=null;g&&(b=new ResizeObserver((function(e){var i=c(e,1)[0];i&&i.target===I&&b&&(b.unobserve(t),cancelAnimationFrame(A),A=requestAnimationFrame((function(){b&&b.observe(t)}))),n()})),I&&!p&&b.observe(I),b.observe(t));var y=p?ZD(e):null;return p&&function t(){var i=ZD(e);!y||i.x===y.x&&i.y===y.y&&i.width===y.width&&i.height===y.height||n();y=i,m=requestAnimationFrame(t)}(),n(),function(){C.forEach((function(e){o&&e.removeEventListener("scroll",n),l&&e.removeEventListener("resize",n)})),v&&v(),b&&b.disconnect(),b=null,p&&cancelAnimationFrame(m)}}var XD=function(e,t,n){var i=new Map,r=Ve({platform:HD},n),a=Ve(Ve({},r.platform),{},{_c:i});return OP(e,t,Ve(Ve({},r),{},{platform:a}))},YD=function(e){return{name:"arrow",options:e,fn:function(t){var n="function"===typeof e?e(t):e,i=n.element,r=n.padding;return i&&function(e){return{}.hasOwnProperty.call(e,"current")}(i)?null!=i.current?JP({element:i.current,padding:r}).fn(t):{}:i?JP({element:i,padding:r}).fn(t):{}}}},ED="undefined"!==typeof document?t.useLayoutEffect:t.useEffect;function zD(e,t){if(e===t)return!0;if(typeof e!==typeof t)return!1;if("function"===typeof e&&e.toString()===t.toString())return!0;var n,i,r;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if((n=e.length)!=t.length)return!1;for(i=n;0!==i--;)if(!zD(e[i],t[i]))return!1;return!0}if((n=(r=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(i=n;0!==i--;)if(!{}.hasOwnProperty.call(t,r[i]))return!1;for(i=n;0!==i--;){var a=r[i];if(("_owner"!==a||!e.$$typeof)&&!zD(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function LD(e){return"undefined"===typeof window?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function KD(e,t){var n=LD(e);return Math.round(t*n)/n}function _D(e){var n=t.useRef(e);return ED((function(){n.current=e})),n}var PD=["children","width","height"],DD=(0,t.forwardRef)((function(e,n){var i=e.children,r=e.width,a=void 0===r?10:r,o=e.height,s=void 0===o?5:o,l=Fe(e,PD);return(0,t.createElement)(FL.svg,v({},l,{ref:n,width:a,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),e.asChild?i:(0,t.createElement)("polygon",{points:"0,0 30,0 15,10"}))})),OD=DD;var UD=["__scopePopper","virtualRef"],jD=["__scopePopper","side","sideOffset","align","alignOffset","arrowPadding","collisionBoundary","collisionPadding","sticky","hideWhenDetached","avoidCollisions","onPlaced"],JD=["__scopePopper"],QD="Popper",qD=c(rP(QD),2),$D=qD[0],eO=qD[1],tO=c($D(QD),2),nO=tO[0],iO=tO[1],rO=function(e){var n=e.__scopePopper,i=e.children,r=c((0,t.useState)(null),2),a=r[0],o=r[1];return(0,t.createElement)(nO,{scope:n,anchor:a,onAnchorChange:o},i)},aO="PopperAnchor",oO=(0,t.forwardRef)((function(e,n){var i=e.__scopePopper,r=e.virtualRef,a=Fe(e,UD),o=iO(aO,i),s=(0,t.useRef)(null),l=xL(n,s);return(0,t.useEffect)((function(){o.onAnchorChange((null===r||void 0===r?void 0:r.current)||s.current)})),r?null:(0,t.createElement)(FL.div,v({},a,{ref:l}))})),sO="PopperContent",lO=c($D(sO),2),cO=lO[0],uO=lO[1],gO=(0,t.forwardRef)((function(e,n){var i,a,o,s,l,u,g,d,h,f=e.__scopePopper,p=e.side,I=void 0===p?"bottom":p,C=e.sideOffset,m=void 0===C?0:C,A=e.align,b=void 0===A?"center":A,y=e.alignOffset,G=void 0===y?0:y,w=e.arrowPadding,B=void 0===w?0:w,x=e.collisionBoundary,S=void 0===x?[]:x,Z=e.collisionPadding,k=void 0===Z?0:Z,R=e.sticky,W=void 0===R?"partial":R,M=e.hideWhenDetached,V=void 0!==M&&M,F=e.avoidCollisions,N=void 0===F||F,H=e.onPlaced,T=Fe(e,jD),X=iO(sO,f),Y=c((0,t.useState)(null),2),E=Y[0],z=Y[1],L=xL(n,(function(e){return z(e)})),K=c((0,t.useState)(null),2),_=K[0],P=K[1],D=function(e){var n=c((0,t.useState)(void 0),2),i=n[0],r=n[1];return IP((function(){if(e){r({width:e.offsetWidth,height:e.offsetHeight});var t=new ResizeObserver((function(t){if(Array.isArray(t)&&t.length){var n,i,a=t[0];if("borderBoxSize"in a){var o=a.borderBoxSize,s=Array.isArray(o)?o[0]:o;n=s.inlineSize,i=s.blockSize}else n=e.offsetWidth,i=e.offsetHeight;r({width:n,height:i})}}));return t.observe(e,{box:"border-box"}),function(){return t.unobserve(e)}}r(void 0)}),[e]),i}(_),O=null!==(i=null===D||void 0===D?void 0:D.width)&&void 0!==i?i:0,U=null!==(a=null===D||void 0===D?void 0:D.height)&&void 0!==a?a:0,j=I+("center"!==b?"-"+b:""),J="number"===typeof k?k:Ve({top:0,right:0,bottom:0,left:0},k),Q=Array.isArray(S)?S:[S],q=Q.length>0,$={padding:J,boundary:Q.filter(pO),altBoundary:q},ee=function(e){void 0===e&&(e={});var n=e,i=n.placement,a=void 0===i?"bottom":i,o=n.strategy,s=void 0===o?"absolute":o,l=n.middleware,u=void 0===l?[]:l,g=n.platform,d=n.elements,h=void 0===d?{}:d,f=h.reference,p=h.floating,I=n.transform,C=void 0===I||I,m=n.whileElementsMounted,v=n.open,A=c(t.useState({x:0,y:0,strategy:s,placement:a,middlewareData:{},isPositioned:!1}),2),b=A[0],y=A[1],G=c(t.useState(u),2),w=G[0],B=G[1];zD(w,u)||B(u);var x=c(t.useState(null),2),S=x[0],Z=x[1],k=c(t.useState(null),2),R=k[0],W=k[1],M=t.useCallback((function(e){e!=H.current&&(H.current=e,Z(e))}),[Z]),V=t.useCallback((function(e){e!==T.current&&(T.current=e,W(e))}),[W]),F=f||S,N=p||R,H=t.useRef(null),T=t.useRef(null),X=t.useRef(b),Y=_D(m),E=_D(g),z=t.useCallback((function(){if(H.current&&T.current){var e={placement:a,strategy:s,middleware:w};E.current&&(e.platform=E.current),XD(H.current,T.current,e).then((function(e){var t=Ve(Ve({},e),{},{isPositioned:!0});L.current&&!zD(X.current,t)&&(X.current=t,r.flushSync((function(){y(t)})))}))}}),[w,a,s,E]);ED((function(){!1===v&&X.current.isPositioned&&(X.current.isPositioned=!1,y((function(e){return Ve(Ve({},e),{},{isPositioned:!1})})))}),[v]);var L=t.useRef(!1);ED((function(){return L.current=!0,function(){L.current=!1}}),[]),ED((function(){if(F&&(H.current=F),N&&(T.current=N),F&&N){if(Y.current)return Y.current(F,N,z);z()}}),[F,N,z,Y]);var K=t.useMemo((function(){return{reference:H,floating:T,setReference:M,setFloating:V}}),[M,V]),_=t.useMemo((function(){return{reference:F,floating:N}}),[F,N]),P=t.useMemo((function(){var e={position:s,left:0,top:0};if(!_.floating)return e;var t=KD(_.floating,b.x),n=KD(_.floating,b.y);return C?Ve(Ve({},e),{},{transform:"translate("+t+"px, "+n+"px)"},LD(_.floating)>=1.5&&{willChange:"transform"}):{position:s,left:t,top:n}}),[s,C,_.floating,b.x,b.y]);return t.useMemo((function(){return Ve(Ve({},b),{},{update:z,refs:K,elements:_,floatingStyles:P})}),[b,z,K,_,P])}({strategy:"fixed",placement:j,whileElementsMounted:TD,elements:{reference:X.anchor},middleware:[(h={mainAxis:m+U,alignmentAxis:G},void 0===h&&(h=0),{name:"offset",options:h,fn:function(e){return Xc(Ec().mark((function t(){var n,i,r,a,o,s,l;return Ec().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.x,a=e.y,o=e.placement,s=e.middlewareData,t.next=3,tD(e,h);case 3:if(l=t.sent,o!==(null==(n=s.offset)?void 0:n.placement)||null==(i=s.arrow)||!i.alignmentOffset){t.next=6;break}return t.abrupt("return",{});case 6:return t.abrupt("return",{x:r+l.x,y:a+l.y,data:Ve(Ve({},l),{},{placement:o})});case 7:case"end":return t.stop()}}),t)})))()}}),N&&iD(Ve({mainAxis:!0,crossAxis:!1,limiter:"partial"===W?rD():void 0},$)),N&&QP(Ve({},$)),aD(Ve(Ve({},$),{},{apply:function(e){var t=e.elements,n=e.rects,i=e.availableWidth,r=e.availableHeight,a=n.reference,o=a.width,s=a.height,l=t.floating.style;l.setProperty("--radix-popper-available-width","".concat(i,"px")),l.setProperty("--radix-popper-available-height","".concat(r,"px")),l.setProperty("--radix-popper-anchor-width","".concat(o,"px")),l.setProperty("--radix-popper-anchor-height","".concat(s,"px"))}})),_&&YD({element:_,padding:B}),IO({arrowWidth:O,arrowHeight:U}),V&&eD({strategy:"referenceHidden"})]}),te=ee.refs,ne=ee.floatingStyles,ie=ee.placement,re=ee.isPositioned,ae=ee.middlewareData,oe=c(CO(ie),2),se=oe[0],le=oe[1],ce=oP(H);IP((function(){re&&(null===ce||void 0===ce||ce())}),[re,ce]);var ue=null===(o=ae.arrow)||void 0===o?void 0:o.x,ge=null===(s=ae.arrow)||void 0===s?void 0:s.y,de=0!==(null===(l=ae.arrow)||void 0===l?void 0:l.centerOffset),he=c((0,t.useState)(),2),fe=he[0],pe=he[1];return IP((function(){E&&pe(window.getComputedStyle(E).zIndex)}),[E]),(0,t.createElement)("div",{ref:te.setFloating,"data-radix-popper-content-wrapper":"",style:Ve(Ve({},ne),{},ke({transform:re?ne.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:fe},"--radix-popper-transform-origin",[null===(u=ae.transformOrigin)||void 0===u?void 0:u.x,null===(g=ae.transformOrigin)||void 0===g?void 0:g.y].join(" "))),dir:e.dir},(0,t.createElement)(cO,{scope:f,placedSide:se,onArrowChange:P,arrowX:ue,arrowY:ge,shouldHideArrow:de},(0,t.createElement)(FL.div,v({"data-side":se,"data-align":le},T,{ref:L,style:Ve(Ve({},T.style),{},{animation:re?void 0:"none",opacity:null!==(d=ae.hide)&&void 0!==d&&d.referenceHidden?0:void 0})}))))})),dO="PopperArrow",hO={top:"bottom",right:"left",bottom:"top",left:"right"},fO=(0,t.forwardRef)((function(e,n){var i,r=e.__scopePopper,a=Fe(e,JD),o=uO(dO,r),s=hO[o.placedSide];return(0,t.createElement)("span",{ref:o.onArrowChange,style:(i={position:"absolute",left:o.arrowX,top:o.arrowY},ke(i,s,0),ke(i,"transformOrigin",{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide]),ke(i,"transform",{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide]),ke(i,"visibility",o.shouldHideArrow?"hidden":void 0),i)},(0,t.createElement)(OD,v({},a,{ref:n,style:Ve(Ve({},a.style),{},{display:"block"})})))}));function pO(e){return null!==e}var IO=function(e){return{name:"transformOrigin",options:e,fn:function(t){var n,i,r,a,o,s=t.placement,l=t.rects,u=t.middlewareData,g=0!==(null===(n=u.arrow)||void 0===n?void 0:n.centerOffset),d=g?0:e.arrowWidth,h=g?0:e.arrowHeight,f=c(CO(s),2),p=f[0],I={start:"0%",center:"50%",end:"100%"}[f[1]],C=(null!==(i=null===(r=u.arrow)||void 0===r?void 0:r.x)&&void 0!==i?i:0)+d/2,m=(null!==(a=null===(o=u.arrow)||void 0===o?void 0:o.y)&&void 0!==a?a:0)+h/2,v="",A="";return"bottom"===p?(v=g?I:"".concat(C,"px"),A="".concat(-h,"px")):"top"===p?(v=g?I:"".concat(C,"px"),A="".concat(l.floating.height+h,"px")):"right"===p?(v="".concat(-h,"px"),A=g?I:"".concat(m,"px")):"left"===p&&(v="".concat(l.floating.width+h,"px"),A=g?I:"".concat(m,"px")),{data:{x:v,y:A}}}}};function CO(e){var t=c(e.split("-"),2),n=t[0],i=t[1];return[n,void 0===i?"center":i]}var mO=rO,vO=oO,AO=gO,bO=fO;var yO=function(e){var n=e.present,i=e.children,a=function(e){var n=c((0,t.useState)(),2),i=n[0],a=n[1],o=(0,t.useRef)({}),s=(0,t.useRef)(e),l=(0,t.useRef)("none"),u=e?"mounted":"unmounted",g=function(e,n){return(0,t.useReducer)((function(e,t){var i=n[e][t];return null!==i&&void 0!==i?i:e}),e)}(u,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}}),d=c(g,2),h=d[0],f=d[1];return(0,t.useEffect)((function(){var e=GO(o.current);l.current="mounted"===h?e:"none"}),[h]),IP((function(){var t=o.current,n=s.current;if(n!==e){var i=l.current,r=GO(t);if(e)f("MOUNT");else if("none"===r||"none"===(null===t||void 0===t?void 0:t.display))f("UNMOUNT");else{f(n&&i!==r?"ANIMATION_OUT":"UNMOUNT")}s.current=e}}),[e,f]),IP((function(){if(i){var e=function(e){var t=GO(o.current).includes(e.animationName);e.target===i&&t&&(0,r.flushSync)((function(){return f("ANIMATION_END")}))},t=function(e){e.target===i&&(l.current=GO(o.current))};return i.addEventListener("animationstart",t),i.addEventListener("animationcancel",e),i.addEventListener("animationend",e),function(){i.removeEventListener("animationstart",t),i.removeEventListener("animationcancel",e),i.removeEventListener("animationend",e)}}f("ANIMATION_END")}),[i,f]),{isPresent:["mounted","unmountSuspended"].includes(h),ref:(0,t.useCallback)((function(e){e&&(o.current=getComputedStyle(e)),a(e)}),[])}}(n),o="function"===typeof i?i({present:a.isPresent}):t.Children.only(i),s=xL(a.ref,o.ref);return"function"===typeof i||a.isPresent?(0,t.cloneElement)(o,{ref:s}):null};function GO(e){return(null===e||void 0===e?void 0:e.animationName)||"none"}function wO(e){var n=e.prop,i=e.defaultProp,r=e.onChange,a=void 0===r?function(){}:r,o=function(e){var n=e.defaultProp,i=e.onChange,r=(0,t.useState)(n),a=c(r,1)[0],o=(0,t.useRef)(a),s=oP(i);return(0,t.useEffect)((function(){o.current!==a&&(s(a),o.current=a)}),[a,o,s]),r}({defaultProp:i,onChange:a}),s=c(o,2),l=s[0],u=s[1],g=void 0!==n,d=g?n:l,h=oP(a),f=(0,t.useCallback)((function(e){if(g){var t="function"===typeof e?e(n):e;t!==n&&h(t)}else u(e)}),[g,n,u,h]);return[d,f]}yO.displayName="Presence";var BO=(0,t.forwardRef)((function(e,n){return(0,t.createElement)(FL.span,v({},e,{ref:n,style:Ve({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"},e.style)}))})),xO=BO,SO=["__scopeTooltip"],ZO=["forceMount","side"],kO=["__scopeTooltip","children","aria-label","onEscapeKeyDown","onPointerDownOutside"],RO=["__scopeTooltip"],WO=c(rP("Tooltip",[eO]),2),MO=WO[0],VO=(WO[1],eO()),FO="TooltipProvider",NO="tooltip.open",HO=c(MO(FO),2),TO=(HO[0],HO[1]),XO="Tooltip",YO=c(MO(XO),2),EO=YO[0],zO=YO[1],LO=function(e){var n=e.__scopeTooltip,i=e.children,r=e.open,a=e.defaultOpen,o=void 0!==a&&a,s=e.onOpenChange,l=e.disableHoverableContent,u=e.delayDuration,g=TO(XO,e.__scopeTooltip),d=VO(n),h=c((0,t.useState)(null),2),f=h[0],p=h[1],I=function(e){var n=c(t.useState(CP()),2),i=n[0],r=n[1];return IP((function(){e||r((function(e){return null!==e&&void 0!==e?e:String(mP++)}))}),[e]),e||(i?"radix-".concat(i):"")}(),C=(0,t.useRef)(0),m=null!==l&&void 0!==l?l:g.disableHoverableContent,v=null!==u&&void 0!==u?u:g.delayDuration,A=(0,t.useRef)(!1),b=c(wO({prop:r,defaultProp:o,onChange:function(e){e?(g.onOpen(),document.dispatchEvent(new CustomEvent(NO))):g.onClose(),null===s||void 0===s||s(e)}}),2),y=b[0],G=void 0!==y&&y,w=b[1],B=(0,t.useMemo)((function(){return G?A.current?"delayed-open":"instant-open":"closed"}),[G]),x=(0,t.useCallback)((function(){window.clearTimeout(C.current),A.current=!1,w(!0)}),[w]),S=(0,t.useCallback)((function(){window.clearTimeout(C.current),w(!1)}),[w]),Z=(0,t.useCallback)((function(){window.clearTimeout(C.current),C.current=window.setTimeout((function(){A.current=!0,w(!0)}),v)}),[v,w]);return(0,t.useEffect)((function(){return function(){return window.clearTimeout(C.current)}}),[]),(0,t.createElement)(mO,d,(0,t.createElement)(EO,{scope:n,contentId:I,open:G,stateAttribute:B,trigger:f,onTriggerChange:p,onTriggerEnter:(0,t.useCallback)((function(){g.isOpenDelayed?Z():x()}),[g.isOpenDelayed,Z,x]),onTriggerLeave:(0,t.useCallback)((function(){m?S():window.clearTimeout(C.current)}),[S,m]),onOpen:x,onClose:S,disableHoverableContent:m},i))},KO="TooltipTrigger",_O=(0,t.forwardRef)((function(e,n){var i=e.__scopeTooltip,r=Fe(e,SO),a=zO(KO,i),o=TO(KO,i),s=VO(i),l=xL(n,(0,t.useRef)(null),a.onTriggerChange),c=(0,t.useRef)(!1),u=(0,t.useRef)(!1),g=(0,t.useCallback)((function(){return c.current=!1}),[]);return(0,t.useEffect)((function(){return function(){return document.removeEventListener("pointerup",g)}}),[g]),(0,t.createElement)(vO,v({asChild:!0},s),(0,t.createElement)(FL.button,v({"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute},r,{ref:l,onPointerMove:nP(e.onPointerMove,(function(e){"touch"!==e.pointerType&&(u.current||o.isPointerInTransitRef.current||(a.onTriggerEnter(),u.current=!0))})),onPointerLeave:nP(e.onPointerLeave,(function(){a.onTriggerLeave(),u.current=!1})),onPointerDown:nP(e.onPointerDown,(function(){c.current=!0,document.addEventListener("pointerup",g,{once:!0})})),onFocus:nP(e.onFocus,(function(){c.current||a.onOpen()})),onBlur:nP(e.onBlur,a.onClose),onClick:nP(e.onClick,a.onClose)})))})),PO="TooltipPortal",DO=c(MO(PO,{forceMount:void 0}),2),OO=(DO[0],DO[1]),UO="TooltipContent",jO=(0,t.forwardRef)((function(e,n){var i=OO(UO,e.__scopeTooltip),r=e.forceMount,a=void 0===r?i.forceMount:r,o=e.side,s=void 0===o?"top":o,l=Fe(e,ZO),c=zO(UO,e.__scopeTooltip);return(0,t.createElement)(yO,{present:a||c.open},c.disableHoverableContent?(0,t.createElement)(eU,v({side:s},l,{ref:n})):(0,t.createElement)(JO,v({side:s},l,{ref:n})))})),JO=(0,t.forwardRef)((function(e,n){var i=zO(UO,e.__scopeTooltip),r=TO(UO,e.__scopeTooltip),a=(0,t.useRef)(null),o=xL(n,a),s=c((0,t.useState)(null),2),l=s[0],u=s[1],g=i.trigger,d=i.onClose,h=a.current,f=r.onPointerInTransitChange,p=(0,t.useCallback)((function(){u(null),f(!1)}),[f]),I=(0,t.useCallback)((function(e,t){var n=e.currentTarget,i={x:e.clientX,y:e.clientY},r=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,i=[];switch(t){case"top":i.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":i.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":i.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":i.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n})}return i}(i,function(e,t){var n=Math.abs(t.top-e.y),i=Math.abs(t.bottom-e.y),r=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(n,i,r,a)){case a:return"left";case r:return"right";case n:return"top";case i:return"bottom";default:throw new Error("unreachable")}}(i,n.getBoundingClientRect())),a=function(e){var t=e.top,n=e.right,i=e.bottom,r=e.left;return[{x:r,y:t},{x:n,y:t},{x:n,y:i},{x:r,y:i}]}(t.getBoundingClientRect()),o=function(e){var t=e.slice();return t.sort((function(e,t){return e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0})),function(e){if(e.length<=1)return e.slice();for(var t=[],n=0;n<e.length;n++){for(var i=e[n];t.length>=2;){var r=t[t.length-1],a=t[t.length-2];if(!((r.x-a.x)*(i.y-a.y)>=(r.y-a.y)*(i.x-a.x)))break;t.pop()}t.push(i)}t.pop();for(var o=[],s=e.length-1;s>=0;s--){for(var l=e[s];o.length>=2;){var c=o[o.length-1],u=o[o.length-2];if(!((c.x-u.x)*(l.y-u.y)>=(c.y-u.y)*(l.x-u.x)))break;o.pop()}o.push(l)}return o.pop(),1===t.length&&1===o.length&&t[0].x===o[0].x&&t[0].y===o[0].y?t:t.concat(o)}(t)}([].concat(We(r),We(a)));u(o),f(!0)}),[f]);return(0,t.useEffect)((function(){return function(){return p()}}),[p]),(0,t.useEffect)((function(){if(g&&h){var e=function(e){return I(e,h)},t=function(e){return I(e,g)};return g.addEventListener("pointerleave",e),h.addEventListener("pointerleave",t),function(){g.removeEventListener("pointerleave",e),h.removeEventListener("pointerleave",t)}}}),[g,h,I,p]),(0,t.useEffect)((function(){if(l){var e=function(e){var t=e.target,n={x:e.clientX,y:e.clientY},i=(null===g||void 0===g?void 0:g.contains(t))||(null===h||void 0===h?void 0:h.contains(t)),r=!function(e,t){for(var n=e.x,i=e.y,r=!1,a=0,o=t.length-1;a<t.length;o=a++){var s=t[a].x,l=t[a].y,c=t[o].x,u=t[o].y;l>i!==u>i&&n<(c-s)*(i-l)/(u-l)+s&&(r=!r)}return r}(n,l);i?p():r&&(p(),d())};return document.addEventListener("pointermove",e),function(){return document.removeEventListener("pointermove",e)}}}),[g,h,l,d,p]),(0,t.createElement)(eU,v({},e,{ref:o}))})),QO=c(MO(XO,{isInside:!1}),2),qO=QO[0],$O=QO[1],eU=(0,t.forwardRef)((function(e,n){var i=e.__scopeTooltip,r=e.children,a=e["aria-label"],o=e.onEscapeKeyDown,s=e.onPointerDownOutside,l=Fe(e,kO),c=zO(UO,i),u=VO(i),g=c.onClose;return(0,t.useEffect)((function(){return document.addEventListener(NO,g),function(){return document.removeEventListener(NO,g)}}),[g]),(0,t.useEffect)((function(){if(c.trigger){var e=function(e){var t=e.target;null!==t&&void 0!==t&&t.contains(c.trigger)&&g()};return window.addEventListener("scroll",e,{capture:!0}),function(){return window.removeEventListener("scroll",e,{capture:!0})}}}),[c.trigger,g]),(0,t.createElement)(hP,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:s,onFocusOutside:function(e){return e.preventDefault()},onDismiss:g},(0,t.createElement)(AO,v({"data-state":c.stateAttribute},u,l,{ref:n,style:Ve(Ve({},l.style),{},{"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"})}),(0,t.createElement)(WL,null,r),(0,t.createElement)(qO,{scope:i,isInside:!0},(0,t.createElement)(xO,{id:c.contentId,role:"tooltip"},a||r))))})),tU="TooltipArrow",nU=(0,t.forwardRef)((function(e,n){var i=e.__scopeTooltip,r=Fe(e,RO),a=VO(i);return $O(tU,i).isInside?null:(0,t.createElement)(bO,v({},a,r,{ref:n}))}));var iU,rU,aU,oU,sU,lU=LO,cU=_O,uU=jO,gU=nU;function dU(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}!function(e){e[e.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",e[e.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",e[e.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",e[e.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",e[e.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",e[e.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",e[e.THEME_ERROR=6]="THEME_ERROR",e[e.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",e[e.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",e[e.EMPTY_KEY=9]="EMPTY_KEY"}(sU||(sU={}));var hU=(ke(iU={},sU.UNSUPPORTED_INPUT,(function(e,t){return["An input with type `".concat(e,"` input was found at path `").concat(t,"` but it's not supported yet.")]})),ke(iU,sU.NO_COMPONENT_FOR_TYPE,(function(e,t){return["Type `".concat(e,"` found at path `").concat(t,"` can't be displayed in panel because no component supports it yet.")]})),ke(iU,sU.UNKNOWN_INPUT,(function(e,t){return["input at path `".concat(e,"` is not recognized."),t]})),ke(iU,sU.DUPLICATE_KEYS,(function(e,t,n){return["Key `".concat(e,"` of path `").concat(t,"` already exists at path `").concat(n,"`. Even nested keys need to be unique. Rename one of the keys.")]})),ke(iU,sU.ALREADY_REGISTERED_TYPE,(function(e){return["Type ".concat(e," has already been registered. You can't register a component with the same type.")]})),ke(iU,sU.CLIPBOARD_ERROR,(function(e){return["Error copying the value",e]})),ke(iU,sU.THEME_ERROR,(function(e,t){return["Error accessing the theme `".concat(e,".").concat(t,"` value.")]})),ke(iU,sU.PATH_DOESNT_EXIST,(function(e){return["Error getting the value at path `".concat(e,"`. There is probably an error in your `render` function.")]})),ke(iU,sU.PATH_DOESNT_EXIST,(function(e){return["Error accessing the value at path `".concat(e,"`")]})),ke(iU,sU.INPUT_TYPE_OVERRIDE,(function(e,t,n){return["Input at path `".concat(e,"` already exists with type: `").concat(t,"`. Its type cannot be overridden with type `").concat(n,"`.")]})),ke(iU,sU.EMPTY_KEY,(function(){return["Keys can not be empty, if you want to hide a label use whitespace."]})),iU);function fU(e,t){for(var n,i=arguments.length,r=new Array(i>2?i-2:0),a=2;a<i;a++)r[a-2]=arguments[a];var o=Zc(hU[t].apply(hU,r)),s=o[0],l=o.slice(1);(n=console)[e].apply(n,["LEVA: "+s].concat(We(l)))}var pU=fU.bind(null,"warn"),IU=fU.bind(null,"log"),CU=["value"],mU=["schema"],vU=["value"],AU=[],bU={};function yU(e){var t,n=e.value,i=dU(e,CU),r=Fc(AU);try{for(r.s();!(t=r.n()).done;){var a=(0,t.value)(n,i);if(a)return a}}catch(o){r.e(o)}finally{r.f()}}function GU(e,t){var n=t.schema,i=dU(t,mU);e in bU?pU(sU.ALREADY_REGISTERED_TYPE,e):(AU.push((function(t,i){return n(t,i)&&e})),bU[e]=i)}function wU(e,t,n,i){var r=bU[e].normalize;return r?r(t,n,i):"object"===typeof t&&"value"in t?{value:t.value,settings:dU(t,vU)}:{value:t}}function BU(e,t,n){var i=bU[e].format;return i?i(t,n):t}function xU(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function SU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ZU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SU(Object(n),!0).forEach((function(t){xU(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var kU=function(e,t,n){return e>n?n:e<t?t:e},RU=function(e){if(""===e||"number"===typeof e)return e;try{var t=zU(e);if(!isNaN(t))return t}catch(n){}return parseFloat(e)},WU=Math.log(10);function MU(e){var t=Math.abs(+String(e).replace(".",""));if(0===t)return.01;for(;0!==t&&t%10===0;)t/=10;var n=Math.floor(Math.log(t)/WU)+1,i=Math.floor(Math.log10(Math.abs(e))),r=Math.pow(10,i-n);return Math.max(r,.001)}var VU=function(e,t,n){return n===t?0:(kU(e,t,n)-t)/(n-t)},FU=function(e,t,n){return e*(n-t)+t},NU=/\(([0-9+\-*/^ .]+)\)/,HU=/(\d+(?:\.\d+)?) ?\^ ?(\d+(?:\.\d+)?)/,TU=/(\d+(?:\.\d+)?) ?\* ?(\d+(?:\.\d+)?)/,XU=/(\d+(?:\.\d+)?) ?\/ ?(\d+(?:\.\d+)?)/,YU=/(\d+(?:\.\d+)?) ?\+ ?(\d+(?:\.\d+)?)/,EU=/(\d+(?:\.\d+)?) ?- ?(\d+(?:\.\d+)?)/;function zU(e){if(isNaN(Number(e))){if(NU.test(e)){var t=e.replace(NU,(function(e,t){return String(zU(t))}));return zU(t)}if(HU.test(e))return zU(e.replace(HU,(function(e,t,n){return String(Math.pow(Number(t),Number(n)))})));if(TU.test(e)){var n=e.replace(TU,(function(e,t,n){return String(Number(t)*Number(n))}));return zU(n)}if(XU.test(e)){var i=e.replace(XU,(function(e,t,n){if(0!=n)return String(Number(t)/Number(n));throw new Error("Division by zero")}));return zU(i)}if(YU.test(e)){var r=e.replace(YU,(function(e,t,n){return String(Number(t)+Number(n))}));return zU(r)}if(EU.test(e)){var a=e.replace(EU,(function(e,t,n){return String(Number(t)-Number(n))}));return zU(a)}return Number(e)}return Number(e)}function LU(e){return"[object Object]"===Object.prototype.toString.call(e)}var KU,_U,PU=function(e){return LU(e)&&0===Object.keys(e).length};!function(e){e.BUTTON="BUTTON",e.BUTTON_GROUP="BUTTON_GROUP",e.MONITOR="MONITOR",e.FOLDER="FOLDER"}(KU||(KU={})),function(e){e.SELECT="SELECT",e.IMAGE="IMAGE",e.NUMBER="NUMBER",e.COLOR="COLOR",e.STRING="STRING",e.BOOLEAN="BOOLEAN",e.INTERVAL="INTERVAL",e.VECTOR3D="VECTOR3D",e.VECTOR2D="VECTOR2D"}(_U||(_U={}));var DU=["type","__customInput"],OU=["render","label","optional","order","disabled","hint","onChange","onEditStart","onEditEnd","transient"],UU=["type"];function jU(e,t){var n,i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;if("object"!==typeof e||Array.isArray(e))return{type:a,input:e,options:ZU({key:t,label:t,optional:!1,disabled:!1,order:0},r)};if("__customInput"in e){var o=e.type;return jU(e.__customInput,t,dU(e,DU),o)}var s=e.render,l=e.label,c=e.optional,u=e.order,g=void 0===u?0:u,d=e.disabled,h=e.hint,f=e.onChange,p=e.onEditStart,I=e.onEditEnd,C=e.transient,m=dU(e,OU),v=ZU({render:s,key:t,label:null!==l&&void 0!==l?l:t,hint:h,transient:null!==C&&void 0!==C?C:!!f,onEditStart:p,onEditEnd:I,disabled:d,optional:c,order:g},r),A=m.type,b=dU(m,UU);return(A=null!==a&&void 0!==a?a:A)in KU?{type:A,input:b,options:v}:{type:A,input:a&&LU(b)&&"value"in b?b.value:PU(b)?void 0:b,options:ZU(ZU({},v),{},{onChange:f,optional:null!==(n=v.optional)&&void 0!==n&&n,disabled:null!==(i=v.disabled)&&void 0!==i&&i})}}function JU(e,t,n,i){var r=jU(e,t),a=r.type,o=r.input,s=r.options;if(a)return a in KU?r:{type:a,input:wU(a,o,n,i),options:s};var l=yU(o);return l?{type:l,input:wU(l,o,n,i),options:s}:!!(l=yU({value:o}))&&{type:l,input:wU(l,{value:o},n,i),options:s}}function QU(e,t,n,i,r){var a=e.value,o=e.type,s=e.settings;e.value=$U({type:o,value:a,settings:s},t,n,i),e.fromPanel=r}var qU=function(e,t,n){this.type="LEVA_ERROR",this.message="LEVA: "+e,this.previousValue=t,this.error=n};function $U(e,t,n,i){var r,a=e.type,o=e.value,s=e.settings,l="SELECT"!==a&&"function"===typeof t?t(o):t;try{r=function(e,t,n,i,r,a){var o=bU[e].sanitize;return o?o(t,n,i,r,a):t}(a,l,s,o,n,i)}catch(c){throw new qU("The value `".concat(t,"` did not result in a correct value."),o,c)}return YL(r,o)?o:r}var ej=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=0;return function(){var r=this,a=arguments,o=n&&!i,s=function(){return e.apply(r,a)};window.clearTimeout(i),i=window.setTimeout(s,t),o&&s()}},tj=function(e){return e.shiftKey?5:e.altKey?.2:1};var nj=["value"],ij=["min","max"],rj=function(e,t){var n=t.min,i=void 0===n?-1/0:n,r=t.max,a=void 0===r?1/0:r,o=t.suffix,s=parseFloat(e);if(""===e||isNaN(s))throw Error("Invalid number");var l=kU(s,i,a);return o?l+o:l},aj=function(e){var t=e.value,n=dU(e,nj),i=n.min,r=void 0===i?-1/0:i,a=n.max,o=void 0===a?1/0:a,s=dU(n,ij),l=parseFloat(t),c="string"===typeof t?t.substring((""+l).length):void 0;l=kU(l,r,o);var u=n.step;u||(Number.isFinite(r)?u=Number.isFinite(o)?+(Math.abs(o-r)/100).toPrecision(1):+(Math.abs(l-r)/100).toPrecision(1):Number.isFinite(o)&&(u=+(Math.abs(o-l)/100).toPrecision(1)));var g=u?10*MU(u):MU(l);return{value:c?l+c:l,settings:ZU({initialValue:l,step:u=u||g/10,pad:Math.round(kU(Math.log10(1/g),0,2)),min:r,max:o,suffix:c},s)}},oj=function(e,t){var n=t.step,i=t.initialValue;return i+Math.round((e-i)/n)*n},sj=Object.freeze({__proto__:null,schema:function(e){if("number"===typeof e)return!0;if("string"===typeof e){var t=parseFloat(e);return!isNaN(t)&&e.substring((""+t).length).trim().length<4}return!1},sanitize:rj,format:function(e,t){var n=t.pad,i=void 0===n?0:n,r=t.suffix,a=parseFloat(e).toFixed(i);return r?a+r:a},normalize:aj,sanitizeStep:oj});function lj(){return lj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},lj.apply(this,arguments)}var cj=(0,t.createContext)({});function uj(){return(0,t.useContext)(cj)}var gj=(0,t.createContext)(null),dj=(0,t.createContext)(null),hj=(0,t.createContext)(null);function fj(){return(0,t.useContext)(dj)}function pj(e,t){var n=c(e.split(" "),2),i=n[0],r=n[1],a={};return"none"!==i&&(a.boxShadow="".concat(t.inset?"inset ":"","0 0 0 $borderWidths").concat([t.key]," $colors").concat("default"!==i&&i||t.borderColor)),r&&(a.backgroundColor=r),a}var Ij={$inputStyle:function(){return function(e){return pj(e,{key:"$input",borderColor:"$highlight1",inset:!0})}},$focusStyle:function(){return function(e){return pj(e,{key:"$focus",borderColor:"$accent2"})}},$hoverStyle:function(){return function(e){return pj(e,{key:"$hover",borderColor:"$accent1",inset:!0})}},$activeStyle:function(){return function(e){return pj(e,{key:"$active",borderColor:"$accent1",inset:!0})}}},Cj=i_({prefix:"leva",theme:{colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}},utils:ZU(ZU({},Ij),{},{$flex:function(){return{display:"flex",alignItems:"center"}},$flexCenter:function(){return{display:"flex",alignItems:"center",justifyContent:"center"}},$reset:function(){return{outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}},$draggable:function(){return{touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}},$focus:function(e){return{"&:focus":Ij.$focusStyle()(e)}},$focusWithin:function(e){return{"&:focus-within":Ij.$focusStyle()(e)}},$hover:function(e){return{"&:hover":Ij.$hoverStyle()(e)}},$active:function(e){return{"&:active":Ij.$activeStyle()(e)}}})}),mj=Cj.styled,vj=(Cj.css,Cj.createTheme,Cj.globalCss),Aj=(Cj.keyframes,vj({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}}));function bj(e,n){var i=(0,t.useContext)(gj).theme;if(!(e in i)||!(n in i[e]))return pU(sU.THEME_ERROR,e,n),"";for(var r=n;;){var a=i[e][r];if("string"!==typeof a||"$"!==a.charAt(0))return a;r=a.substr(1)}}var yj=mj("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),Gj=mj("div",ke({$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none"},"& + ".concat(yj),{paddingLeft:0})),wj=mj(Gj,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),Bj=mj("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),xj=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],Sj=["onUpdate"];function Zj(e){var n=e.innerLabel,i=e.value,r=e.onUpdate,a=e.onChange,o=e.onKeyDown,s=e.type,l=e.id,c=e.inputType,u=void 0===c?"text":c,g=e.rows,d=void 0===g?0:g,h=dU(e,xj),f=uj(),p=f.id,I=f.emitOnEditStart,C=f.emitOnEditEnd,m=f.disabled,v=l||p,A=(0,t.useRef)(null),b=d>0,y=b?"textarea":"input",G=(0,t.useCallback)((function(e){return function(t){var n=t.currentTarget.value;e(n)}}),[]);t.useEffect((function(){var e=A.current,t=G((function(e){r(e),C()}));return null===e||void 0===e||e.addEventListener("blur",t),function(){return null===e||void 0===e?void 0:e.removeEventListener("blur",t)}}),[G,r,C]);var w=(0,t.useCallback)((function(e){"Enter"===e.key&&G(r)(e)}),[G,r]),B=Object.assign({as:y},b?{rows:d}:{},h);return t.createElement(Bj,{textArea:b},n&&"string"===typeof n?t.createElement(Gj,null,n):n,t.createElement(yj,lj({levaType:s,ref:A,id:v,type:u,autoComplete:"off",spellCheck:"false",value:i,onChange:G(a),onFocus:function(){return I()},onKeyPress:w,onKeyDown:o,disabled:m},B)))}function kj(e){var n=e.onUpdate,i=dU(e,Sj),r=(0,t.useCallback)((function(e){return n(RU(e))}),[n]),a=(0,t.useCallback)((function(e){var t="ArrowUp"===e.key?1:"ArrowDown"===e.key?-1:0;if(t){e.preventDefault();var i=e.altKey?.1:e.shiftKey?10:1;n((function(e){return parseFloat(e)+t*i}))}}),[n]);return t.createElement(Zj,lj({},i,{onUpdate:r,onKeyDown:a,type:"number"}))}var Rj=mj("div",{}),Wj=mj("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]}),Mj=mj("div",(ke(rU={$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"}},"&:hover + ".concat(Wj,"::after"),{opacity:.6}),ke(rU,"".concat(Rj,":hover > & + ").concat(Wj,"::after"),{opacity:.6}),ke(rU,"".concat(Rj,":hover > & > svg"),{opacity:1}),rU)),Vj=mj("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:ke({"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"}},"> ".concat(Rj,":not(:first-of-type)"),{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"})}}}),Fj=mj("div",(ke(aU={position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2"},"".concat(Vj," > &"),{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}}),ke(aU,"variants",{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}),aU)),Nj=mj(Fj,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),Hj=mj("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),Tj=mj("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),Xj=mj("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}}),Yj=mj("div",{opacity:1,variants:{disabled:{true:ke({opacity:.6,pointerEvents:"none"},"& ".concat(Xj),{pointerEvents:"auto"})}}}),Ej=mj("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"}),zj=mj("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),Lj=mj(gU,{fill:"$toolTipBackground"});function Kj(e){var n=e.children,i=(0,t.useContext)(gj).className;return t.createElement(TL,{className:i},n)}var _j=["align"];function Pj(){var e=uj(),n=e.id,i=e.disable,r=e.disabled;return t.createElement(t.Fragment,null,t.createElement(Tj,{id:n+"__disable",type:"checkbox",checked:!r,onChange:function(){return i(!r)}}),t.createElement("label",{htmlFor:n+"__disable"}))}function Dj(e){var n=uj(),i=n.id,r=n.optional,a=n.hint,o=e.htmlFor||(i?{htmlFor:i}:null),s=a||"string"!==typeof e.children?null:{title:e.children};return t.createElement(t.Fragment,null,r&&t.createElement(Pj,null),void 0!==a?t.createElement(lU,null,t.createElement(cU,{asChild:!0},t.createElement(Xj,lj({},o,e))),t.createElement(uU,{side:"top",sideOffset:2},t.createElement(zj,null,a,t.createElement(Lj,null)))):t.createElement(Xj,lj({},o,s,e)))}function Oj(e){var n=e.align,i=dU(e,_j),r=uj(),a=r.value,o=r.label,s=r.key,l=r.disabled,u=!(0,t.useContext)(hj).hideCopyButton&&void 0!==s,g=c((0,t.useState)(!1),2),d=g[0],h=g[1],f=function(){var e=Xc(Ec().mark((function e(){return Ec().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.clipboard.writeText(JSON.stringify(ke({},s,null!==a&&void 0!==a?a:"")));case 3:h(!0),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),pU(sU.CLIPBOARD_ERROR,ke({},s,a));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return t.createElement(Hj,{align:n,onPointerLeave:function(){return h(!1)}},t.createElement(Dj,i),u&&!l&&t.createElement("div",{title:"Click to copy ".concat("string"===typeof o?o:s," value")},d?t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},t.createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),t.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):t.createElement("svg",{onClick:f,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},t.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),t.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}var Uj=["toggled"],jj=mj("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function Jj(e){var n=e.toggled,i=dU(e,Uj);return t.createElement(jj,lj({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(".concat(n?0:-90,"deg)")}},i),t.createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}var Qj=["input"];function qj(e){var n=e.input,i=dU(e,Qj);return n?t.createElement(Nj,i):t.createElement(Fj,i)}function $j(e){var n=e.value,i=e.type,r=e.settings,a=e.setValue,o=c((0,t.useState)(BU(i,n,r)),2),s=o[0],l=o[1],u=(0,t.useRef)(n),g=(0,t.useRef)(r);g.current=r;var d=(0,t.useCallback)((function(e){return l(BU(i,e,g.current))}),[i]),h=(0,t.useCallback)((function(e){try{a(e)}catch(i){var t=i.type,n=i.previousValue;if("LEVA_ERROR"!==t)throw i;d(n)}}),[d,a]);return(0,t.useEffect)((function(){YL(n,u.current)||d(n),u.current=n}),[n,d]),{displayValue:s,onChange:l,onUpdate:h}}function eJ(e,t){var n=uj(),i=n.emitOnEditStart,r=n.emitOnEditEnd;return tP((function(t){t.first&&(document.body.classList.add("leva__panel__dragged"),null===i||void 0===i||i());var n=e(t);return t.last&&(document.body.classList.remove("leva__panel__dragged"),null===r||void 0===r||r()),n}),t)}function tJ(){var e=(0,t.useRef)(null),n=(0,t.useRef)({x:0,y:0}),i=(0,t.useCallback)((function(t){Object.assign(n.current,t),e.current&&(e.current.style.transform="translate3d(".concat(n.current.x,"px, ").concat(n.current.y,"px, 0)"))}),[]);return[e,i]}var nJ=["__refCount"],iJ=function(e,t){return e[t]?dU(e[t],nJ):null};var rJ=mj("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),aJ=mj("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),oJ=mj("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),sJ=mj("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),lJ=mj("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function cJ(e){var n=e.value,i=e.min,r=e.max,a=e.onDrag,o=e.step,s=e.initialValue,l=(0,t.useRef)(null),u=(0,t.useRef)(null),g=(0,t.useRef)(0),d=bj("sizes","scrubberWidth"),h=eJ((function(e){var t=e.event,h=e.first,f=c(e.xy,1)[0],p=c(e.movement,1)[0],I=e.memo;if(h){var C=l.current.getBoundingClientRect(),m=C.width,v=C.left;g.current=m-parseFloat(d),I=(null===t||void 0===t?void 0:t.target)===u.current?n:FU((f-v)/m,i,r)}var A=I+FU(p/g.current,0,r-i);return a(oj(A,{step:o,initialValue:s})),I})),f=VU(n,i,r);return t.createElement(sJ,lj({ref:l},h()),t.createElement(aJ,null,t.createElement(lJ,{style:{left:0,right:"".concat(100*(1-f),"%")}})),t.createElement(oJ,{ref:u,style:{left:"calc(".concat(f," * (100% - ").concat(d,"))")}}))}var uJ=t.memo((function(e){var n=e.label,i=e.onUpdate,r=e.step,a=e.innerLabelTrim,o=c((0,t.useState)(!1),2),s=o[0],l=o[1],u=eJ((function(e){var t=e.active,n=c(e.delta,1)[0],a=e.event,o=e.memo,s=void 0===o?0:o;return l(t),s+=n/2,Math.abs(s)>=1&&(i((function(e){return parseFloat(e)+Math.floor(s)*r*tj(a)})),s=0),s}));return t.createElement(wj,lj({dragging:s,title:n.length>1?n:""},u()),n.slice(0,a))}));function gJ(e){var n=e.label,i=e.id,r=e.displayValue,a=e.onUpdate,o=e.onChange,s=e.settings,l=e.innerLabelTrim,c=void 0===l?1:l,u=c>0&&t.createElement(uJ,{label:n,step:s.step,onUpdate:a,innerLabelTrim:c});return t.createElement(kj,{id:i,value:String(r),onUpdate:a,onChange:o,innerLabel:u})}var dJ=sj.sanitizeStep,hJ=ZU({component:function(){var e=uj(),n=e.label,i=e.value,r=e.onUpdate,a=e.settings,o=e.id,s=a.min,l=a.max!==1/0&&s!==-1/0;return t.createElement(qj,{input:!0},t.createElement(Oj,null,n),t.createElement(rJ,{hasRange:l},l&&t.createElement(cJ,lj({value:parseFloat(i),onDrag:r},a)),t.createElement(gJ,lj({},e,{id:o,label:"value",innerLabelTrim:l?0:1}))))}},dU(sj,["sanitizeStep"])),fJ=Object.freeze({__proto__:null,schema:function(e,t){return oK().schema({options:oK().passesAnyOf(oK().object(),oK().array())}).test(t)},sanitize:function(e,t){if(t.values.indexOf(e)<0)throw Error("Selected value doesn't match Select options");return e},format:function(e,t){return t.values.indexOf(e)},normalize:function(e){var t,n,i=e.value,r=e.options;return Array.isArray(r)?(n=r,t=r.map((function(e){return String(e)}))):(n=Object.values(r),t=Object.keys(r)),"value"in e?n.includes(i)||(t.unshift(String(i)),n.unshift(i)):i=n[0],Object.values(r).includes(i)||(r[String(i)]=i),{value:i,settings:{keys:t,values:n}}}}),pJ=mj("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),IJ=mj("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),CJ=mj("div",(ke(oU={display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer"},"".concat(IJ,":focus + &"),{$focusStyle:""}),ke(oU,"".concat(IJ,":hover + &"),{$hoverStyle:""}),oU));function mJ(e){var n=e.displayValue,i=e.value,r=e.onUpdate,a=e.id,o=e.settings,s=e.disabled,l=o.keys,c=o.values,u=(0,t.useRef)();return i===c[n]&&(u.current=l[n]),t.createElement(pJ,null,t.createElement(IJ,{id:a,value:n,onChange:function(e){return r(c[Number(e.currentTarget.value)])},disabled:s},l.map((function(e,n){return t.createElement("option",{key:e,value:n},e)}))),t.createElement(CJ,null,u.current),t.createElement(Jj,{toggled:!0}))}var vJ=ZU({component:function(){var e=uj(),n=e.label,i=e.value,r=e.displayValue,a=e.onUpdate,o=e.id,s=e.disabled,l=e.settings;return t.createElement(qj,{input:!0},t.createElement(Oj,null,n),t.createElement(mJ,{id:o,value:i,displayValue:r,onUpdate:a,settings:l,disabled:s}))}},fJ),AJ=Object.freeze({__proto__:null,schema:function(e){return oK().string().test(e)},sanitize:function(e){if("string"!==typeof e)throw Error("Invalid string");return e},normalize:function(e){var t=e.value,n=e.editable,i=void 0===n||n,r=e.rows,a=void 0!==r&&r;return{value:t,settings:{editable:i,rows:"number"===typeof a?a:a?5:0}}}}),bJ=["displayValue","onUpdate","onChange","editable"],yJ=mj("div",{whiteSpace:"pre-wrap"});function GJ(e){var n=e.displayValue,i=e.onUpdate,r=e.onChange,a=e.editable,o=void 0===a||a,s=dU(e,bJ);return o?t.createElement(Zj,lj({value:n,onUpdate:i,onChange:r},s)):t.createElement(yJ,null,n)}var wJ=ZU({component:function(){var e=uj(),n=e.label,i=e.settings,r=e.displayValue,a=e.onUpdate,o=e.onChange;return t.createElement(qj,{input:!0},t.createElement(Oj,null,n),t.createElement(GJ,lj({displayValue:r,onUpdate:a,onChange:o},i)))}},AJ),BJ=Object.freeze({__proto__:null,schema:function(e){return oK().boolean().test(e)},sanitize:function(e){if("boolean"!==typeof e)throw Error("Invalid boolean");return e}}),xJ=mj("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function SJ(e){var n=e.value,i=e.onUpdate,r=e.id,a=e.disabled;return t.createElement(xJ,null,t.createElement("input",{id:r,type:"checkbox",checked:n,onChange:function(e){return i(e.currentTarget.checked)},disabled:a}),t.createElement("label",{htmlFor:r},t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}var ZJ=ZU({component:function(){var e=uj(),n=e.label,i=e.value,r=e.onUpdate,a=e.disabled,o=e.id;return t.createElement(qj,{input:!0},t.createElement(Oj,null,n),t.createElement(SJ,{value:i,onUpdate:r,id:o,disabled:a}))}},BJ),kJ=["locked"];function RJ(e){var n=e.value,i=e.id,r=e.valueKey,a=e.settings,o=e.onUpdate,s=e.innerLabelTrim,l=(0,t.useRef)(n[r]);l.current=n[r];var c=(0,t.useCallback)((function(e){return o(ke({},r,$U({type:"NUMBER",value:l.current,settings:a},e)))}),[o,a,r]),u=$j({type:"NUMBER",value:n[r],settings:a,setValue:c});return t.createElement(gJ,{id:i,label:r,value:n[r],displayValue:u.displayValue,onUpdate:u.onUpdate,onChange:u.onChange,settings:a,innerLabelTrim:s})}var WJ=mj("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});function MJ(e){var n=e.locked,i=dU(e,kJ);return t.createElement("svg",lj({width:"10",height:"10",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i),n?t.createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}):t.createElement("path",{d:"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function VJ(e){var n=e.value,i=e.onUpdate,r=e.settings,a=e.innerLabelTrim,o=uj(),s=o.id,l=o.setSettings,c=r.lock,u=r.locked;return t.createElement(WJ,{withLock:c},c&&t.createElement(MJ,{locked:u,onClick:function(){return l({locked:!u})}}),Object.keys(n).map((function(e,o){return t.createElement(RJ,{id:0===o?s:"".concat(s,".").concat(e),key:e,valueKey:e,value:n,settings:r[e],onUpdate:i,innerLabelTrim:a})})))}var FJ=function(e,t){var n={},i=0,r=1/0;for(var a in Object.entries(e).forEach((function(e){var a=c(e,2),o=a[0],s=a[1];n[o]=aj(ZU({value:s},t[o])).settings,i=Math.max(i,n[o].step),r=Math.min(r,n[o].pad)})),n){var o=t[a]||{},s=o.step,l=o.min,u=o.max;isFinite(s)||isFinite(l)&&isFinite(u)||(n[a].step=i,n[a].pad=r)}return n},NJ=["lock"],HJ=["value"];function TJ(e){var t=oK().array().length(e).every.number();return function(n){return t.test(n)||function(t){if(!t||"object"!==typeof t)return!1;var n=Object.values(t);return n.length===e&&n.every((function(e){return isFinite(e)}))}(n)}}function XJ(e,t,n){return function(e){return Array.isArray(e)?"array":"object"}(e)===t?e:"array"===t?Object.values(e):function(e,t){return e.reduce((function(e,n,i){return Object.assign(e,ke({},t[i],n))}),{})}(e,n)}var YJ=function(e){return!!e&&("step"in e||"min"in e||"max"in e)};function EJ(e){return{schema:TJ(e.length),normalize:function(t){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=t.lock,r=void 0!==i&&i,a=dU(t,NJ),o=Array.isArray(e)?"array":"object",s="object"===o?Object.keys(e):n,l=XJ(e,"object",s),c=YJ(a)?s.reduce((function(e,t){return Object.assign(e,ke({},t,a))}),{}):a;return{value:"array"===o?e:l,settings:ZU(ZU({},FJ(l,c)),{},{format:o,keys:s,lock:r,locked:!1})}}(t.value,dU(t,HJ),e)},format:function(e,t){return function(e,t){return XJ(e,"object",t.keys)}(e,t)},sanitize:function(e,t,n){return function(e,t,n){var i=XJ(e,"object",t.keys);for(var r in i)i[r]=rj(i[r],t[r]);var a=Object.keys(i),o={};if(a.length===t.keys.length)o=i;else{var s=XJ(n,"object",t.keys);if(1===a.length&&t.locked){var l=a[0],c=i[l],u=s[l],g=0!==u?c/u:1;for(var d in s)d===l?o[l]=c:o[d]=s[d]*g}else o=ZU(ZU({},s),i)}return XJ(o,t.format,t.keys)}(e,t,n)}}}var zJ={grad:.9,turn:360,rad:360/(2*Math.PI)},LJ=function(e){return"string"==typeof e?e.length>0:"number"==typeof e},KJ=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=Math.pow(10,t)),Math.round(n*e)/n+0},_J=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),e>n?n:e>t?e:t},PJ=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},DJ=function(e){return{r:_J(e.r,0,255),g:_J(e.g,0,255),b:_J(e.b,0,255),a:_J(e.a)}},OJ=function(e){return{r:KJ(e.r),g:KJ(e.g),b:KJ(e.b),a:KJ(e.a,3)}},UJ=/^#([0-9a-f]{3,8})$/i,jJ=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},JJ=function(e){var t=e.r,n=e.g,i=e.b,r=e.a,a=Math.max(t,n,i),o=a-Math.min(t,n,i),s=o?a===t?(n-i)/o:a===n?2+(i-t)/o:4+(t-n)/o:0;return{h:60*(s<0?s+6:s),s:a?o/a*100:0,v:a/255*100,a:r}},QJ=function(e){var t=e.h,n=e.s,i=e.v,r=e.a;t=t/360*6,n/=100,i/=100;var a=Math.floor(t),o=i*(1-n),s=i*(1-(t-a)*n),l=i*(1-(1-t+a)*n),c=a%6;return{r:255*[i,s,o,o,l,i][c],g:255*[l,i,i,s,o,o][c],b:255*[o,o,l,i,i,s][c],a:r}},qJ=function(e){return{h:PJ(e.h),s:_J(e.s,0,100),l:_J(e.l,0,100),a:_J(e.a)}},$J=function(e){return{h:KJ(e.h),s:KJ(e.s),l:KJ(e.l),a:KJ(e.a,3)}},eQ=function(e){return QJ((n=(t=e).s,{h:t.h,s:(n*=((i=t.l)<50?i:100-i)/100)>0?2*n/(i+n)*100:0,v:i+n,a:t.a}));var t,n,i},tQ=function(e){return{h:(t=JJ(e)).h,s:(r=(200-(n=t.s))*(i=t.v)/100)>0&&r<200?n*i/100/(r<=100?r:200-r)*100:0,l:r/2,a:t.a};var t,n,i,r},nQ=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,iQ=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,rQ=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,aQ=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,oQ={string:[[function(e){var t=UJ.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:4===e.length?KJ(parseInt(e[3]+e[3],16)/255,2):1}:6===e.length||8===e.length?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:8===e.length?KJ(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=rQ.exec(e)||aQ.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:DJ({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:void 0===t[7]?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=nQ.exec(e)||iQ.exec(e);if(!t)return null;var n,i,r=qJ({h:(n=t[1],i=t[2],void 0===i&&(i="deg"),Number(n)*(zJ[i]||1)),s:Number(t[3]),l:Number(t[4]),a:void 0===t[5]?1:Number(t[5])/(t[6]?100:1)});return eQ(r)},"hsl"]],object:[[function(e){var t=e.r,n=e.g,i=e.b,r=e.a,a=void 0===r?1:r;return LJ(t)&&LJ(n)&&LJ(i)?DJ({r:Number(t),g:Number(n),b:Number(i),a:Number(a)}):null},"rgb"],[function(e){var t=e.h,n=e.s,i=e.l,r=e.a,a=void 0===r?1:r;if(!LJ(t)||!LJ(n)||!LJ(i))return null;var o=qJ({h:Number(t),s:Number(n),l:Number(i),a:Number(a)});return eQ(o)},"hsl"],[function(e){var t=e.h,n=e.s,i=e.v,r=e.a,a=void 0===r?1:r;if(!LJ(t)||!LJ(n)||!LJ(i))return null;var o=function(e){return{h:PJ(e.h),s:_J(e.s,0,100),v:_J(e.v,0,100),a:_J(e.a)}}({h:Number(t),s:Number(n),v:Number(i),a:Number(a)});return QJ(o)},"hsv"]]},sQ=function(e,t){for(var n=0;n<t.length;n++){var i=t[n][0](e);if(i)return[i,t[n][1]]}return[null,void 0]},lQ=function(e){return"string"==typeof e?sQ(e.trim(),oQ.string):"object"==typeof e&&null!==e?sQ(e,oQ.object):[null,void 0]},cQ=function(e,t){var n=tQ(e);return{h:n.h,s:_J(n.s+100*t,0,100),l:n.l,a:n.a}},uQ=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},gQ=function(e,t){var n=tQ(e);return{h:n.h,s:n.s,l:_J(n.l+100*t,0,100),a:n.a}},dQ=function(){function e(e){this.parsed=lQ(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return null!==this.parsed},e.prototype.brightness=function(){return KJ(uQ(this.rgba),2)},e.prototype.isDark=function(){return uQ(this.rgba)<.5},e.prototype.isLight=function(){return uQ(this.rgba)>=.5},e.prototype.toHex=function(){return t=(e=OJ(this.rgba)).r,n=e.g,i=e.b,a=(r=e.a)<1?jJ(KJ(255*r)):"","#"+jJ(t)+jJ(n)+jJ(i)+a;var e,t,n,i,r,a},e.prototype.toRgb=function(){return OJ(this.rgba)},e.prototype.toRgbString=function(){return t=(e=OJ(this.rgba)).r,n=e.g,i=e.b,(r=e.a)<1?"rgba("+t+", "+n+", "+i+", "+r+")":"rgb("+t+", "+n+", "+i+")";var e,t,n,i,r},e.prototype.toHsl=function(){return $J(tQ(this.rgba))},e.prototype.toHslString=function(){return t=(e=$J(tQ(this.rgba))).h,n=e.s,i=e.l,(r=e.a)<1?"hsla("+t+", "+n+"%, "+i+"%, "+r+")":"hsl("+t+", "+n+"%, "+i+"%)";var e,t,n,i,r},e.prototype.toHsv=function(){return e=JJ(this.rgba),{h:KJ(e.h),s:KJ(e.s),v:KJ(e.v),a:KJ(e.a,3)};var e},e.prototype.invert=function(){return hQ({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},e.prototype.saturate=function(e){return void 0===e&&(e=.1),hQ(cQ(this.rgba,e))},e.prototype.desaturate=function(e){return void 0===e&&(e=.1),hQ(cQ(this.rgba,-e))},e.prototype.grayscale=function(){return hQ(cQ(this.rgba,-1))},e.prototype.lighten=function(e){return void 0===e&&(e=.1),hQ(gQ(this.rgba,e))},e.prototype.darken=function(e){return void 0===e&&(e=.1),hQ(gQ(this.rgba,-e))},e.prototype.rotate=function(e){return void 0===e&&(e=15),this.hue(this.hue()+e)},e.prototype.alpha=function(e){return"number"==typeof e?hQ({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):KJ(this.rgba.a,3);var t},e.prototype.hue=function(e){var t=tQ(this.rgba);return"number"==typeof e?hQ({h:e,s:t.s,l:t.l,a:t.a}):KJ(t.h)},e.prototype.isEqual=function(e){return this.toHex()===hQ(e).toHex()},e}(),hQ=function(e){return e instanceof dQ?e:new dQ(e)},fQ=[];function pQ(){return(pQ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function IQ(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)t.indexOf(n=a[i])>=0||(r[n]=e[n]);return r}function CQ(e){var n=(0,t.useRef)(e),i=(0,t.useRef)((function(e){n.current&&n.current(e)}));return n.current=e,i.current}var mQ=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),e>n?n:e<t?t:e},vQ=function(e){return"touches"in e},AQ=function(e){return e&&e.ownerDocument.defaultView||self},bQ=function(e,t,n){var i=e.getBoundingClientRect(),r=vQ(t)?function(e,t){for(var n=0;n<e.length;n++)if(e[n].identifier===t)return e[n];return e[0]}(t.touches,n):t;return{left:mQ((r.pageX-(i.left+AQ(e).pageXOffset))/i.width),top:mQ((r.pageY-(i.top+AQ(e).pageYOffset))/i.height)}},yQ=function(e){!vQ(e)&&e.preventDefault()},GQ=t.memo((function(e){var n=e.onMove,i=e.onKey,r=IQ(e,["onMove","onKey"]),a=(0,t.useRef)(null),o=CQ(n),s=CQ(i),l=(0,t.useRef)(null),c=(0,t.useRef)(!1),u=(0,t.useMemo)((function(){var e=function(e){yQ(e),(vQ(e)?e.touches.length>0:e.buttons>0)&&a.current?o(bQ(a.current,e,l.current)):n(!1)},t=function(){return n(!1)};function n(n){var i=c.current,r=AQ(a.current),o=n?r.addEventListener:r.removeEventListener;o(i?"touchmove":"mousemove",e),o(i?"touchend":"mouseup",t)}return[function(e){var t=e.nativeEvent,i=a.current;if(i&&(yQ(t),!function(e,t){return t&&!vQ(e)}(t,c.current)&&i)){if(vQ(t)){c.current=!0;var r=t.changedTouches||[];r.length&&(l.current=r[0].identifier)}i.focus(),o(bQ(i,t,l.current)),n(!0)}},function(e){var t=e.which||e.keyCode;t<37||t>40||(e.preventDefault(),s({left:39===t?.05:37===t?-.05:0,top:40===t?.05:38===t?-.05:0}))},n]}),[s,o]),g=u[0],d=u[1],h=u[2];return(0,t.useEffect)((function(){return h}),[h]),t.createElement("div",pQ({},r,{onTouchStart:g,onMouseDown:g,className:"react-colorful__interactive",ref:a,onKeyDown:d,tabIndex:0,role:"slider"}))})),wQ=function(e){return e.filter(Boolean).join(" ")},BQ=function(e){var n=e.color,i=e.left,r=e.top,a=void 0===r?.5:r,o=wQ(["react-colorful__pointer",e.className]);return t.createElement("div",{className:o,style:{top:100*a+"%",left:100*i+"%"}},t.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:n}}))},xQ=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=Math.pow(10,t)),Math.round(n*e)/n},SQ=(Math.PI,function(e){var t=e.s,n=e.v,i=e.a,r=(200-t)*n/100;return{h:xQ(e.h),s:xQ(r>0&&r<200?t*n/100/(r<=100?r:200-r)*100:0),l:xQ(r/2),a:xQ(i,2)}}),ZQ=function(e){var t=SQ(e);return"hsl("+t.h+", "+t.s+"%, "+t.l+"%)"},kQ=function(e){var t=SQ(e);return"hsla("+t.h+", "+t.s+"%, "+t.l+"%, "+t.a+")"},RQ=function(e){var t=e.h,n=e.s,i=e.v,r=e.a;t=t/360*6,n/=100,i/=100;var a=Math.floor(t),o=i*(1-n),s=i*(1-(t-a)*n),l=i*(1-(1-t+a)*n),c=a%6;return{r:xQ(255*[i,s,o,o,l,i][c]),g:xQ(255*[l,i,i,s,o,o][c]),b:xQ(255*[o,o,l,i,i,s][c]),a:xQ(r,2)}},WQ=function(e){var t=e.r,n=e.g,i=e.b,r=e.a,a=Math.max(t,n,i),o=a-Math.min(t,n,i),s=o?a===t?(n-i)/o:a===n?2+(i-t)/o:4+(t-n)/o:0;return{h:xQ(60*(s<0?s+6:s)),s:xQ(a?o/a*100:0),v:xQ(a/255*100),a:r}},MQ=t.memo((function(e){var n=e.hue,i=e.onChange,r=wQ(["react-colorful__hue",e.className]);return t.createElement("div",{className:r},t.createElement(GQ,{onMove:function(e){i({h:360*e.left})},onKey:function(e){i({h:mQ(n+360*e.left,0,360)})},"aria-label":"Hue","aria-valuenow":xQ(n),"aria-valuemax":"360","aria-valuemin":"0"},t.createElement(BQ,{className:"react-colorful__hue-pointer",left:n/360,color:ZQ({h:n,s:100,v:100,a:1})})))})),VQ=t.memo((function(e){var n=e.hsva,i=e.onChange,r={backgroundColor:ZQ({h:n.h,s:100,v:100,a:1})};return t.createElement("div",{className:"react-colorful__saturation",style:r},t.createElement(GQ,{onMove:function(e){i({s:100*e.left,v:100-100*e.top})},onKey:function(e){i({s:mQ(n.s+100*e.left,0,100),v:mQ(n.v-100*e.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+xQ(n.s)+"%, Brightness "+xQ(n.v)+"%"},t.createElement(BQ,{className:"react-colorful__saturation-pointer",top:1-n.v/100,left:n.s/100,color:ZQ(n)})))})),FQ=function(e,t){if(e===t)return!0;for(var n in e)if(e[n]!==t[n])return!1;return!0};function NQ(e,n,i){var r=CQ(i),a=(0,t.useState)((function(){return e.toHsva(n)})),o=a[0],s=a[1],l=(0,t.useRef)({color:n,hsva:o});(0,t.useEffect)((function(){if(!e.equal(n,l.current.color)){var t=e.toHsva(n);l.current={hsva:t,color:n},s(t)}}),[n,e]),(0,t.useEffect)((function(){var t;FQ(o,l.current.hsva)||e.equal(t=e.fromHsva(o),l.current.color)||(l.current={hsva:o,color:t},r(t))}),[o,e,r]);var c=(0,t.useCallback)((function(e){s((function(t){return Object.assign({},t,e)}))}),[]);return[o,c]}var HQ,TQ="undefined"!=typeof window?t.useLayoutEffect:t.useEffect,XQ=new Map,YQ=function(e){TQ((function(){var t=e.current?e.current.ownerDocument:document;if(void 0!==t&&!XQ.has(t)){var i=t.createElement("style");i.innerHTML='.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>\')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}',XQ.set(t,i);var r=HQ||n.nc;r&&i.setAttribute("nonce",r),t.head.appendChild(i)}}),[])},EQ=function(e){var n=e.className,i=e.colorModel,r=e.color,a=void 0===r?i.defaultColor:r,o=e.onChange,s=IQ(e,["className","colorModel","color","onChange"]),l=(0,t.useRef)(null);YQ(l);var c=NQ(i,a,o),u=c[0],g=c[1],d=wQ(["react-colorful",n]);return t.createElement("div",pQ({},s,{ref:l,className:d}),t.createElement(VQ,{hsva:u,onChange:g}),t.createElement(MQ,{hue:u.h,onChange:g,className:"react-colorful__last-control"}))},zQ=function(e){var n=e.className,i=e.hsva,r=e.onChange,a={backgroundImage:"linear-gradient(90deg, "+kQ(Object.assign({},i,{a:0}))+", "+kQ(Object.assign({},i,{a:1}))+")"},o=wQ(["react-colorful__alpha",n]),s=xQ(100*i.a);return t.createElement("div",{className:o},t.createElement("div",{className:"react-colorful__alpha-gradient",style:a}),t.createElement(GQ,{onMove:function(e){r({a:e.left})},onKey:function(e){r({a:mQ(i.a+e.left)})},"aria-label":"Alpha","aria-valuetext":s+"%","aria-valuenow":s,"aria-valuemin":"0","aria-valuemax":"100"},t.createElement(BQ,{className:"react-colorful__alpha-pointer",left:i.a,color:kQ(i)})))},LQ=function(e){var n=e.className,i=e.colorModel,r=e.color,a=void 0===r?i.defaultColor:r,o=e.onChange,s=IQ(e,["className","colorModel","color","onChange"]),l=(0,t.useRef)(null);YQ(l);var c=NQ(i,a,o),u=c[0],g=c[1],d=wQ(["react-colorful",n]);return t.createElement("div",pQ({},s,{ref:l,className:d}),t.createElement(VQ,{hsva:u,onChange:g}),t.createElement(MQ,{hue:u.h,onChange:g}),t.createElement(zQ,{hsva:u,onChange:g,className:"react-colorful__last-control"}))},KQ={defaultColor:{r:0,g:0,b:0,a:1},toHsva:WQ,fromHsva:RQ,equal:FQ},_Q=function(e){return t.createElement(LQ,pQ({},e,{colorModel:KQ}))},PQ={defaultColor:{r:0,g:0,b:0},toHsva:function(e){return WQ({r:e.r,g:e.g,b:e.b,a:1})},fromHsva:function(e){return{r:(t=RQ(e)).r,g:t.g,b:t.b};var t},equal:FQ},DQ=function(e){return t.createElement(EQ,pQ({},e,{colorModel:PQ}))},OQ=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function UQ(e,t){var n=function(e){var t=e.name;if(t&&-1!==t.lastIndexOf(".")&&!e.type){var n=t.split(".").pop().toLowerCase(),i=OQ.get(n);i&&Object.defineProperty(e,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return e}(e);if("string"!==typeof n.path){var i=e.webkitRelativePath;Object.defineProperty(n,"path",{value:"string"===typeof t?t:"string"===typeof i&&i.length>0?i:e.name,writable:!1,configurable:!1,enumerable:!0})}return n}var jQ=[".DS_Store","Thumbs.db"];function JQ(e){return"object"===typeof e&&null!==e}function QQ(e){return tq(e.target.files).map((function(e){return UQ(e)}))}function qQ(e){return PZ(this,void 0,void 0,(function(){return DZ(this,(function(t){switch(t.label){case 0:return[4,Promise.all(e.map((function(e){return e.getFile()})))];case 1:return[2,t.sent().map((function(e){return UQ(e)}))]}}))}))}function $Q(e,t){return PZ(this,void 0,void 0,(function(){var n;return DZ(this,(function(i){switch(i.label){case 0:return null===e?[2,[]]:e.items?(n=tq(e.items).filter((function(e){return"file"===e.kind})),"drop"!==t?[2,n]:[4,Promise.all(n.map(nq))]):[3,2];case 1:return[2,eq(iq(i.sent()))];case 2:return[2,eq(tq(e.files).map((function(e){return UQ(e)})))]}}))}))}function eq(e){return e.filter((function(e){return-1===jQ.indexOf(e.name)}))}function tq(e){if(null===e)return[];for(var t=[],n=0;n<e.length;n++){var i=e[n];t.push(i)}return t}function nq(e){if("function"!==typeof e.webkitGetAsEntry)return rq(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?oq(t):rq(e)}function iq(e){return e.reduce((function(e,t){return UZ(e,Array.isArray(t)?iq(t):[t])}),[])}function rq(e){var t=e.getAsFile();if(!t)return Promise.reject(e+" is not a File");var n=UQ(t);return Promise.resolve(n)}function aq(e){return PZ(this,void 0,void 0,(function(){return DZ(this,(function(t){return[2,e.isDirectory?oq(e):sq(e)]}))}))}function oq(e){var t=e.createReader();return new Promise((function(e,n){var i=[];!function r(){var a=this;t.readEntries((function(t){return PZ(a,void 0,void 0,(function(){var a,o,s;return DZ(this,(function(l){switch(l.label){case 0:if(t.length)return[3,5];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,Promise.all(i)];case 2:return a=l.sent(),e(a),[3,4];case 3:return o=l.sent(),n(o),[3,4];case 4:return[3,6];case 5:s=Promise.all(t.map(aq)),i.push(s),r(),l.label=6;case 6:return[2]}}))}))}),(function(e){n(e)}))}()}))}function sq(e){return PZ(this,void 0,void 0,(function(){return DZ(this,(function(t){return[2,new Promise((function(t,n){e.file((function(n){var i=UQ(n,e.fullPath);t(i)}),(function(e){n(e)}))}))]}))}))}var lq=n(9998);function cq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function uq(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cq(Object(n),!0).forEach((function(t){gq(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cq(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gq(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dq(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var i,r,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(a.push(i.value),!t||a.length!==t);o=!0);}catch(l){s=!0,r=l}finally{try{o||null==n.return||n.return()}finally{if(s)throw r}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return hq(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hq(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hq(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var fq="file-invalid-type",pq="file-too-large",Iq="file-too-small",Cq="too-many-files",mq=function(e){e=Array.isArray(e)&&1===e.length?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:fq,message:"File type must be ".concat(t)}},vq=function(e){return{code:pq,message:"File is larger than ".concat(e," ").concat(1===e?"byte":"bytes")}},Aq=function(e){return{code:Iq,message:"File is smaller than ".concat(e," ").concat(1===e?"byte":"bytes")}},bq={code:Cq,message:"Too many files"};function yq(e,t){var n="application/x-moz-file"===e.type||(0,lq.Z)(e,t);return[n,n?null:mq(t)]}function Gq(e,t,n){if(wq(e.size))if(wq(t)&&wq(n)){if(e.size>n)return[!1,vq(n)];if(e.size<t)return[!1,Aq(t)]}else{if(wq(t)&&e.size<t)return[!1,Aq(t)];if(wq(n)&&e.size>n)return[!1,vq(n)]}return[!0,null]}function wq(e){return void 0!==e&&null!==e}function Bq(e){return"function"===typeof e.isPropagationStopped?e.isPropagationStopped():"undefined"!==typeof e.cancelBubble&&e.cancelBubble}function xq(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,(function(e){return"Files"===e||"application/x-moz-file"===e})):!!e.target&&!!e.target.files}function Sq(e){e.preventDefault()}function Zq(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return t.some((function(t){return!Bq(e)&&t&&t.apply(void 0,[e].concat(i)),Bq(e)}))}}function kq(e){return e="string"===typeof e?e.split(","):e,[{description:"everything",accept:Array.isArray(e)?e.filter((function(e){return"audio/*"===e||"video/*"===e||"image/*"===e||"text/*"===e||/\w+\/[-+.\w]+/g.test(e)})).reduce((function(e,t){return uq(uq({},e),{},gq({},t,[]))}),{}):{}}]}var Rq=["children"],Wq=["open"],Mq=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],Vq=["refKey","onChange","onClick"];function Fq(e){return function(e){if(Array.isArray(e))return Tq(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Hq(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nq(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var i,r,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(a.push(i.value),!t||a.length!==t);o=!0);}catch(l){s=!0,r=l}finally{try{o||null==n.return||n.return()}finally{if(s)throw r}}return a}(e,t)||Hq(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hq(e,t){if(e){if("string"===typeof e)return Tq(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Tq(e,t):void 0}}function Tq(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Xq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Yq(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xq(Object(n),!0).forEach((function(t){Eq(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xq(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Eq(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zq(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Lq=(0,t.forwardRef)((function(e,n){var i=e.children,r=Pq(zq(e,Rq)),a=r.open,o=zq(r,Wq);return(0,t.useImperativeHandle)(n,(function(){return{open:a}}),[a]),t.createElement(t.Fragment,null,i(Yq(Yq({},o),{},{open:a})))}));Lq.displayName="Dropzone";var Kq={disabled:!1,getFilesFromEvent:function(e){return PZ(this,void 0,void 0,(function(){return DZ(this,(function(t){return JQ(e)&&function(e){return JQ(e.dataTransfer)}(e)?[2,$Q(e.dataTransfer,e.type)]:function(e){return JQ(e)&&JQ(e.target)}(e)?[2,QQ(e)]:Array.isArray(e)&&e.every((function(e){return"getFile"in e&&"function"===typeof e.getFile}))?[2,qQ(e)]:[2,[]]}))}))},maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};Lq.defaultProps=Kq,Lq.propTypes={children:m().func,accept:m().oneOfType([m().string,m().arrayOf(m().string)]),multiple:m().bool,preventDropOnDocument:m().bool,noClick:m().bool,noKeyboard:m().bool,noDrag:m().bool,noDragEventsBubbling:m().bool,minSize:m().number,maxSize:m().number,maxFiles:m().number,disabled:m().bool,getFilesFromEvent:m().func,onFileDialogCancel:m().func,onFileDialogOpen:m().func,useFsAccessApi:m().bool,onDragEnter:m().func,onDragLeave:m().func,onDragOver:m().func,onDrop:m().func,onDropAccepted:m().func,onDropRejected:m().func,validator:m().func};var _q={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function Pq(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Yq(Yq({},Kq),e),i=n.accept,r=n.disabled,a=n.getFilesFromEvent,o=n.maxSize,s=n.minSize,l=n.multiple,c=n.maxFiles,u=n.onDragEnter,g=n.onDragLeave,d=n.onDragOver,h=n.onDrop,f=n.onDropAccepted,p=n.onDropRejected,I=n.onFileDialogCancel,C=n.onFileDialogOpen,m=n.useFsAccessApi,v=n.preventDropOnDocument,A=n.noClick,b=n.noKeyboard,y=n.noDrag,G=n.noDragEventsBubbling,w=n.validator,B=(0,t.useMemo)((function(){return"function"===typeof C?C:Oq}),[C]),x=(0,t.useMemo)((function(){return"function"===typeof I?I:Oq}),[I]),S=(0,t.useRef)(null),Z=(0,t.useRef)(null),k=Nq((0,t.useReducer)(Dq,_q),2),R=k[0],W=k[1],M=R.isFocused,V=R.isFileDialogActive,F=R.draggedFiles,N=(0,t.useRef)("undefined"!==typeof window&&window.isSecureContext&&m&&"showOpenFilePicker"in window),H=function(){!N.current&&V&&setTimeout((function(){Z.current&&(Z.current.files.length||(W({type:"closeDialog"}),x()))}),300)};(0,t.useEffect)((function(){return window.addEventListener("focus",H,!1),function(){window.removeEventListener("focus",H,!1)}}),[Z,V,x,N]);var T=(0,t.useRef)([]),X=function(e){S.current&&S.current.contains(e.target)||(e.preventDefault(),T.current=[])};(0,t.useEffect)((function(){return v&&(document.addEventListener("dragover",Sq,!1),document.addEventListener("drop",X,!1)),function(){v&&(document.removeEventListener("dragover",Sq),document.removeEventListener("drop",X))}}),[S,v]);var Y=(0,t.useCallback)((function(e){e.preventDefault(),e.persist(),q(e),T.current=[].concat(Fq(T.current),[e.target]),xq(e)&&Promise.resolve(a(e)).then((function(t){Bq(e)&&!G||(W({draggedFiles:t,isDragActive:!0,type:"setDraggedFiles"}),u&&u(e))}))}),[a,u,G]),E=(0,t.useCallback)((function(e){e.preventDefault(),e.persist(),q(e);var t=xq(e);if(t&&e.dataTransfer)try{e.dataTransfer.dropEffect="copy"}catch(n){}return t&&d&&d(e),!1}),[d,G]),z=(0,t.useCallback)((function(e){e.preventDefault(),e.persist(),q(e);var t=T.current.filter((function(e){return S.current&&S.current.contains(e)})),n=t.indexOf(e.target);-1!==n&&t.splice(n,1),T.current=t,t.length>0||(W({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),xq(e)&&g&&g(e))}),[S,g,G]),L=(0,t.useCallback)((function(e,t){var n=[],r=[];e.forEach((function(e){var t=Nq(yq(e,i),2),a=t[0],l=t[1],c=Nq(Gq(e,s,o),2),u=c[0],g=c[1],d=w?w(e):null;if(a&&u&&!d)n.push(e);else{var h=[l,g];d&&(h=h.concat(d)),r.push({file:e,errors:h.filter((function(e){return e}))})}})),(!l&&n.length>1||l&&c>=1&&n.length>c)&&(n.forEach((function(e){r.push({file:e,errors:[bq]})})),n.splice(0)),W({acceptedFiles:n,fileRejections:r,type:"setFiles"}),h&&h(n,r,t),r.length>0&&p&&p(r,t),n.length>0&&f&&f(n,t)}),[W,l,i,s,o,c,h,f,p,w]),K=(0,t.useCallback)((function(e){e.preventDefault(),e.persist(),q(e),T.current=[],xq(e)&&Promise.resolve(a(e)).then((function(t){Bq(e)&&!G||L(t,e)})),W({type:"reset"})}),[a,L,G]),_=(0,t.useCallback)((function(){if(N.current){W({type:"openDialog"}),B();var e={multiple:l,types:kq(i)};window.showOpenFilePicker(e).then((function(e){return a(e)})).then((function(e){L(e,null),W({type:"closeDialog"})})).catch((function(e){!function(e){return e instanceof DOMException&&("AbortError"===e.name||e.code===e.ABORT_ERR)}(e)?function(e){return e instanceof DOMException&&("SecurityError"===e.name||e.code===e.SECURITY_ERR)}(e)&&(N.current=!1,Z.current&&(Z.current.value=null,Z.current.click())):(x(e),W({type:"closeDialog"}))}))}else Z.current&&(W({type:"openDialog"}),B(),Z.current.value=null,Z.current.click())}),[W,B,x,m,L,i,l]),P=(0,t.useCallback)((function(e){S.current&&S.current.isEqualNode(e.target)&&(" "!==e.key&&"Enter"!==e.key&&32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),_()))}),[S,_]),D=(0,t.useCallback)((function(){W({type:"focus"})}),[]),O=(0,t.useCallback)((function(){W({type:"blur"})}),[]),U=(0,t.useCallback)((function(){A||(!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return function(e){return-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")}(e)||function(e){return-1!==e.indexOf("Edge/")}(e)}()?_():setTimeout(_,0))}),[A,_]),j=function(e){return r?null:e},J=function(e){return b?null:j(e)},Q=function(e){return y?null:j(e)},q=function(e){G&&e.stopPropagation()},$=(0,t.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,n=void 0===t?"ref":t,i=e.role,a=e.onKeyDown,o=e.onFocus,s=e.onBlur,l=e.onClick,c=e.onDragEnter,u=e.onDragOver,g=e.onDragLeave,d=e.onDrop,h=zq(e,Mq);return Yq(Yq(Eq({onKeyDown:J(Zq(a,P)),onFocus:J(Zq(o,D)),onBlur:J(Zq(s,O)),onClick:j(Zq(l,U)),onDragEnter:Q(Zq(c,Y)),onDragOver:Q(Zq(u,E)),onDragLeave:Q(Zq(g,z)),onDrop:Q(Zq(d,K)),role:"string"===typeof i&&""!==i?i:"button"},n,S),r||b?{}:{tabIndex:0}),h)}}),[S,P,D,O,U,Y,E,z,K,b,y,r]),ee=(0,t.useCallback)((function(e){e.stopPropagation()}),[]),te=(0,t.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,n=void 0===t?"ref":t,r=e.onChange,a=e.onClick,o=zq(e,Vq);return Yq(Yq({},Eq({accept:i,multiple:l,type:"file",style:{display:"none"},onChange:j(Zq(r,K)),onClick:j(Zq(a,ee)),tabIndex:-1},n,Z)),o)}}),[Z,i,l,K,r]),ne=F.length,ie=ne>0&&function(e){var t=e.files,n=e.accept,i=e.minSize,r=e.maxSize,a=e.multiple,o=e.maxFiles;return!(!a&&t.length>1||a&&o>=1&&t.length>o)&&t.every((function(e){var t=dq(yq(e,n),1)[0],a=dq(Gq(e,i,r),1)[0];return t&&a}))}({files:F,accept:i,minSize:s,maxSize:o,multiple:l,maxFiles:c}),re=ne>0&&!ie;return Yq(Yq({},R),{},{isDragAccept:ie,isDragReject:re,isFocused:M&&!r,getRootProps:$,getInputProps:te,rootRef:S,inputRef:Z,open:j(_)})}function Dq(e,t){switch(t.type){case"focus":return Yq(Yq({},e),{},{isFocused:!0});case"blur":return Yq(Yq({},e),{},{isFocused:!1});case"openDialog":return Yq(Yq({},_q),{},{isFileDialogActive:!0});case"closeDialog":return Yq(Yq({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":var n=t.isDragActive,i=t.draggedFiles;return Yq(Yq({},e),{},{draggedFiles:i,isDragActive:n});case"setFiles":return Yq(Yq({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections});case"reset":return Yq({},_q);default:return e}}function Oq(){}Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;var Uq,jq,Jq=n(8089),Qq=n.n(Jq),qq=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(".")};function $q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,n=(0,t.useRef)(null),i=(0,t.useRef)(null),r=c((0,t.useState)(!1),2),a=r[0],o=r[1],s=(0,t.useCallback)((function(){return o(!0)}),[]),l=(0,t.useCallback)((function(){return o(!1)}),[]);return(0,t.useLayoutEffect)((function(){if(a){var t=n.current.getBoundingClientRect(),r=t.bottom,o=t.top,s=t.left,l=r+i.current.getBoundingClientRect().height>window.innerHeight-40?"up":"down";i.current.style.position="fixed",i.current.style.zIndex="10000",i.current.style.left=s+"px","down"===l?i.current.style.top=r+e+"px":i.current.style.bottom=window.innerHeight-o+e+"px"}}),[e,a]),{popinRef:n,wrapperRef:i,shown:a,show:s,hide:l}}!function(e){e.forEach((function(e){fQ.indexOf(e)<0&&(e(dQ,oQ),fQ.push(e))}))}([function(e,t){var n={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},i={};for(var r in n)i[n[r]]=r;var a={};e.prototype.toName=function(t){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var r,o,s=i[this.toHex()];if(s)return s;if(null==t?void 0:t.closest){var l=this.toRgb(),c=1/0,u="black";if(!a.length)for(var g in n)a[g]=new e(n[g]).toRgb();for(var d in n){var h=(r=l,o=a[d],Math.pow(r.r-o.r,2)+Math.pow(r.g-o.g,2)+Math.pow(r.b-o.b,2));h<c&&(c=h,u=d)}return u}},t.string.push([function(t){var i=t.toLowerCase(),r="transparent"===i?"#0000":n[i];return r?new e(r).toRgb():null},"name"])}]);var e$={rgb:"toRgb",hsl:"toHsl",hsv:"toHsv",hex:"toHex"};oK.extend({color:function(){return function(e){return hQ(e).isValid()}}});function t$(e,t){var n=t.format,i=t.hasAlpha,r=t.isString,a=e[e$[n]+(r&&"hex"!==n?"String":"")]();return"object"!==typeof a||i?a:function(e,t){var n=ZU({},e);return t.forEach((function(t){return t in e&&delete n[t]})),n}(a,["a"])}var n$=function(e,t){var n=hQ(e);if(!n.isValid())throw Error("Invalid color");return t$(n,t)},i$=Object.freeze({__proto__:null,schema:function(e){return oK().color().test(e)},sanitize:n$,format:function(e,t){return t$(hQ(e),ZU(ZU({},t),{},{isString:!0,format:"hex"}))},normalize:function(e){var t=e.value,n=function(e){return lQ(e)[1]}(t),i={format:"name"===n?"hex":n,hasAlpha:"object"===typeof t?"a"in t:"hex"===n&&8===t.length||/^(rgba)|(hsla)|(hsva)/.test(t),isString:"string"===typeof t};return{value:n$(t,i),settings:i}}}),r$=mj("div",{position:"relative",boxSizing:"border-box",borderRadius:"$sm",overflow:"hidden",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",backgroundColor:"#fff",backgroundImage:'url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>\')',$inputStyle:"",$hover:"",zIndex:1,variants:{active:{true:{$inputStyle:"$accent1"}}},"&::before":{content:'""',position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"currentColor",zIndex:1}}),a$=mj("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto",columnGap:"$colGap",alignItems:"center"}),o$=mj("div",{width:"$colorPickerWidth",height:"$colorPickerHeight",".react-colorful":{width:"100%",height:"100%",boxShadow:"$level2",cursor:"crosshair"},".react-colorful__saturation":{borderRadius:"$sm $sm 0 0"},".react-colorful__alpha, .react-colorful__hue":{height:10},".react-colorful__last-control":{borderRadius:"0 0 $sm $sm"},".react-colorful__pointer":{height:12,width:12}});function s$(e,t){return"rgb"!==t?hQ(e).toRgb():e}function l$(e){var n=e.value,i=e.displayValue,r=e.settings,a=e.onUpdate,o=uj(),s=o.emitOnEditStart,l=o.emitOnEditEnd,u=r.format,g=r.hasAlpha,d=$q(),h=d.popinRef,f=d.wrapperRef,p=d.shown,I=d.show,C=d.hide,m=(0,t.useRef)(0),v=c((0,t.useState)((function(){return s$(n,u)})),2),A=v[0],b=v[1],y=g?_Q:DQ,G=function(){C(),l(),window.clearTimeout(m.current)};return(0,t.useEffect)((function(){return function(){return window.clearTimeout(m.current)}}),[]),t.createElement(t.Fragment,null,t.createElement(r$,{ref:h,active:p,onClick:function(){return b(s$(n,u)),I(),void s()},style:{color:i}}),p&&t.createElement(Kj,null,t.createElement(Ej,{onPointerUp:G}),t.createElement(o$,{ref:f,onMouseEnter:function(){return window.clearTimeout(m.current)},onMouseLeave:function(e){return 0===e.buttons&&void(m.current=window.setTimeout(G,500))}},t.createElement(y,{color:A,onChange:a}))))}var c$=ZU({component:function(){var e=uj(),n=e.value,i=e.displayValue,r=e.label,a=e.onChange,o=e.onUpdate,s=e.settings;return t.createElement(qj,{input:!0},t.createElement(Oj,null,r),t.createElement(a$,null,t.createElement(l$,{value:n,displayValue:i,onChange:a,onUpdate:o,settings:s}),t.createElement(Zj,{value:i,onChange:a,onUpdate:o})))}},i$);var u$=ZU({component:function(){var e=uj(),n=e.label,i=e.displayValue,r=e.onUpdate,a=e.settings;return t.createElement(qj,{input:!0},t.createElement(Oj,null,n),t.createElement(VJ,{value:i,settings:a,onUpdate:r}))}},EJ(["x","y","z"])),g$=mj("div",{$flexCenter:"",position:"relative",backgroundColor:"$elevation3",borderRadius:"$sm",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",touchAction:"none",$draggable:"",$hover:"","&:active":{cursor:"none"},"&::after":{content:'""',backgroundColor:"$accent2",height:4,width:4,borderRadius:2}}),d$=mj("div",{$flexCenter:"",width:"$joystickWidth",height:"$joystickHeight",borderRadius:"$sm",boxShadow:"$level2",position:"fixed",zIndex:1e4,overflow:"hidden",$draggable:"",transform:"translate(-50%, -50%)",variants:{isOutOfBounds:{true:{backgroundColor:"$elevation1"},false:{backgroundColor:"$elevation3"}}},"> div":{position:"absolute",$flexCenter:"",borderStyle:"solid",borderWidth:1,borderColor:"$highlight1",backgroundColor:"$elevation3",width:"80%",height:"80%","&::after,&::before":{content:'""',position:"absolute",zindex:10,backgroundColor:"$highlight1"},"&::before":{width:"100%",height:1},"&::after":{height:"100%",width:1}},"> span":{position:"relative",zindex:100,width:10,height:10,backgroundColor:"$accent2",borderRadius:"50%"}});function h$(e){var n=e.value,i=e.settings,r=e.onUpdate,a=(0,t.useRef)(),o=(0,t.useRef)(0),s=(0,t.useRef)(0),l=(0,t.useRef)(1),u=c((0,t.useState)(!1),2),g=u[0],d=u[1],h=c((0,t.useState)(!1),2),f=h[0],p=h[1],I=c(tJ(),2),C=I[0],m=I[1],v=(0,t.useRef)(null),A=(0,t.useRef)(null);(0,t.useLayoutEffect)((function(){if(g){var e=v.current.getBoundingClientRect(),t=e.top,n=e.left,i=e.width,r=e.height;A.current.style.left=n+i/2+"px",A.current.style.top=t+r/2+"px"}}),[g]);var b=c(i.keys,2),y=b[0],G=b[1],w="invertY"===i.joystick?1:-1,B=i[y].step,x=i[G].step,S=bj("sizes","joystickWidth"),Z=bj("sizes","joystickHeight"),k=.8*parseFloat(S)/2,R=.8*parseFloat(Z)/2,W=(0,t.useCallback)((function(){a.current||(p(!0),o.current&&m({x:o.current*k}),s.current&&m({y:s.current*-R}),a.current=window.setInterval((function(){r((function(e){var t,n,i=B*o.current*l.current,r=w*x*s.current*l.current;return Array.isArray(e)?(ke(t={},y,e[0]+i),ke(t,G,e[1]+r),t):(ke(n={},y,e[y]+i),ke(n,G,e[G]+r),n)}))}),16))}),[k,R,r,m,B,x,y,G,w]),M=(0,t.useCallback)((function(){window.clearTimeout(a.current),a.current=void 0,p(!1)}),[]);(0,t.useEffect)((function(){function e(e){l.current=tj(e)}return window.addEventListener("keydown",e),window.addEventListener("keyup",e),function(){window.clearTimeout(a.current),window.removeEventListener("keydown",e),window.removeEventListener("keyup",e)}}),[]);var V=eJ((function(e){var t=e.first,i=e.active,a=c(e.delta,2),u=a[0],g=a[1],h=c(e.movement,2),f=h[0],p=h[1];t&&d(!0);var I=kU(f,-k,k),C=kU(p,-R,R);o.current=Math.abs(f)>Math.abs(I)?Math.sign(f-I):0,s.current=Math.abs(p)>Math.abs(C)?Math.sign(C-p):0;var v,A=n[y],b=n[G];i?(o.current||(A+=u*B*l.current,m({x:I})),s.current||(b-=w*g*x*l.current,m({y:C})),o.current||s.current?W():M(),r((ke(v={},y,A),ke(v,G,b),v))):(d(!1),o.current=0,s.current=0,m({x:0,y:0}),M())}));return t.createElement(g$,lj({ref:v},V()),g&&t.createElement(Kj,null,t.createElement(d$,{ref:A,isOutOfBounds:f},t.createElement("div",null),t.createElement("span",{ref:C}))))}var f$=mj("div",{display:"grid",columnGap:"$colGap",variants:{withJoystick:{true:{gridTemplateColumns:"$sizes$rowHeight auto"},false:{gridTemplateColumns:"auto"}}}});var p$=["joystick"],I$=EJ(["x","y"]),C$=ZU(ZU({component:function(){var e=uj(),n=e.label,i=e.displayValue,r=e.onUpdate,a=e.settings;return t.createElement(qj,{input:!0},t.createElement(Oj,null,n),t.createElement(f$,{withJoystick:!!a.joystick},a.joystick&&t.createElement(h$,{value:i,settings:a,onUpdate:r}),t.createElement(VJ,{value:i,settings:a,onUpdate:r})))}},I$),{},{normalize:function(e){var t=e.joystick,n=void 0===t||t,i=dU(e,p$),r=I$.normalize(i);return{value:r.value,settings:ZU(ZU({},r.settings),{},{joystick:n})}}}),m$=Object.freeze({__proto__:null,sanitize:function(e){if(void 0!==e){if(e instanceof File)try{return URL.createObjectURL(e)}catch(t){return}if("string"===typeof e&&0===e.indexOf("blob:"))return e;throw Error("Invalid image format [undefined | blob |\xa0File].")}},schema:function(e,t){return"object"===typeof t&&"image"in t},normalize:function(e){return{value:e.image}}}),v$=mj("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto 20px",columnGap:"$colGap",alignItems:"center"}),A$=mj("div",{$flexCenter:"",overflow:"hidden",height:"$rowHeight",background:"$elevation3",textAlign:"center",color:"inherit",borderRadius:"$sm",outline:"none",userSelect:"none",cursor:"pointer",$inputStyle:"",$hover:"",$focusWithin:"",$active:"$accent1 $elevation1",variants:{isDragAccept:{true:{$inputStyle:"$accent1",backgroundColor:"$elevation1"}}}}),b$=mj("div",{boxSizing:"border-box",borderRadius:"$sm",height:"$rowHeight",width:"$rowHeight",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center",variants:{hasImage:{true:{cursor:"pointer",$hover:"",$active:""}}}}),y$=mj("div",{$flexCenter:"",width:"$imagePreviewWidth",height:"$imagePreviewHeight",borderRadius:"$sm",boxShadow:"$level2",pointerEvents:"none",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center"}),G$=mj("div",{fontSize:"0.8em",height:"100%",padding:"$rowGap $md"}),w$=mj("div",{$flexCenter:"",top:"0",right:"0",marginRight:"$sm",height:"100%",cursor:"pointer",variants:{disabled:{true:{color:"$elevation3",cursor:"default"}}},"&::after,&::before":{content:'""',position:"absolute",height:2,width:10,borderRadius:1,backgroundColor:"currentColor"},"&::after":{transform:"rotate(45deg)"},"&::before":{transform:"rotate(-45deg)"}});var B$=ZU({component:function(){var e=uj(),n=e.label,i=e.value,r=e.onUpdate,a=e.disabled,o=$q(),s=o.popinRef,l=o.wrapperRef,c=o.shown,u=o.show,g=o.hide,d=(0,t.useCallback)((function(e){e.length&&r(e[0])}),[r]),h=(0,t.useCallback)((function(e){e.stopPropagation(),r(void 0)}),[r]),f=Pq({maxFiles:1,accept:"image/*",onDrop:d,disabled:a}),p=f.getRootProps,I=f.getInputProps,C=f.isDragAccept;return t.createElement(qj,{input:!0},t.createElement(Oj,null,n),t.createElement(v$,null,t.createElement(b$,{ref:s,hasImage:!!i,onPointerDown:function(){return!!i&&u()},onPointerUp:g,style:{backgroundImage:i?"url(".concat(i,")"):"none"}}),c&&!!i&&t.createElement(Kj,null,t.createElement(Ej,{onPointerUp:g,style:{cursor:"pointer"}}),t.createElement(y$,{ref:l,style:{backgroundImage:"url(".concat(i,")")}})),t.createElement(A$,p({isDragAccept:C}),t.createElement("input",I()),t.createElement(G$,null,C?"drop image":"click or drop")),t.createElement(w$,{onClick:h,disabled:!i})))}},m$),x$=oK().number(),S$=function(e){return{min:e[0],max:e[1]}},Z$=function(e,t,n){var i=c(t.bounds,2),r=i[0],a=i[1],o=Array.isArray(e)?S$(e):e,s=ZU(ZU({},{min:n[0],max:n[1]}),o),l=s.min,u=s.max;return[kU(Number(l),r,Math.max(r,u)),kU(Number(u),Math.min(a,l),a)]},k$=Object.freeze({__proto__:null,schema:function(e,t){return oK().array().length(2).every.number().test(e)&&oK().schema({min:x$,max:x$}).test(t)},format:S$,sanitize:Z$,normalize:function(e){var t=e.value,n=e.min,i=e.max,r={min:n,max:i},a=[n,i],o=ZU(ZU({},FJ(S$(t),{min:r,max:r})),{},{bounds:a});return{value:Z$(S$(t),o,t),settings:o}}}),R$=["value","bounds","onDrag"],W$=["bounds"],M$=mj("div",{display:"grid",columnGap:"$colGap",gridTemplateColumns:"auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)"});function V$(e){var n=e.value,i=c(e.bounds,2),r=i[0],a=i[1],o=e.onDrag,s=dU(e,R$),l=(0,t.useRef)(null),u=(0,t.useRef)(null),g=(0,t.useRef)(null),d=(0,t.useRef)(0),h=bj("sizes","scrubberWidth"),f=eJ((function(e){var t=e.event,i=e.first,f=c(e.xy,1)[0],p=c(e.movement,1)[0],I=e.memo,C=void 0===I?{}:I;if(i){var m=l.current.getBoundingClientRect(),v=m.width,A=m.left;d.current=v-parseFloat(h);var b=(null===t||void 0===t?void 0:t.target)===u.current||(null===t||void 0===t?void 0:t.target)===g.current;C.pos=FU((f-A)/v,r,a);var y=Math.abs(C.pos-n.min)-Math.abs(C.pos-n.max);C.key=y<0||0===y&&C.pos<=n.min?"min":"max",b&&(C.pos=n[C.key])}var G=C.pos+FU(p/d.current,0,a-r);return o(ke({},C.key,dJ(G,s[C.key]))),C})),p="calc(".concat(VU(n.min,r,a)," * (100% - ").concat(h," - 8px) + 4px)"),I="calc(".concat(1-VU(n.max,r,a)," * (100% - ").concat(h," - 8px) + 4px)");return t.createElement(sJ,lj({ref:l},f()),t.createElement(aJ,null,t.createElement(lJ,{style:{left:p,right:I}})),t.createElement(oJ,{position:"left",ref:u,style:{left:p}}),t.createElement(oJ,{position:"right",ref:g,style:{right:I}}))}var F$=ZU({component:function(){var e=uj(),n=e.label,i=e.displayValue,r=e.onUpdate,a=e.settings,o=dU(a,W$);return t.createElement(t.Fragment,null,t.createElement(qj,{input:!0},t.createElement(Oj,null,n),t.createElement(M$,null,t.createElement(V$,lj({value:i},a,{onDrag:r})),t.createElement(VJ,{value:i,settings:o,onUpdate:r,innerLabelTrim:0}))))}},k$),N$=["type","value"],H$=["onChange","transient","onEditStart","onEditEnd"],T$=function(){var e,t=this,n=iB((e=function(){return{data:{}}},function(t,n,i){var r=i.subscribe;return i.subscribe=function(e,t,n){var a=e;if(t){var o=(null==n?void 0:n.equalityFn)||Object.is,s=e(i.getState());a=function(n){var i=e(n);if(!o(s,i)){var r=s;t(s=i,r)}},(null==n?void 0:n.fireImmediately)&&t(s,s)}return r(a)},e(t,n,i)})),i=function(){var e=new Map;return{on:function(t,n){var i=e.get(t);void 0===i&&(i=new Set,e.set(t,i)),i.add(n)},off:function(t,n){var i=e.get(t);void 0!==i&&(i.delete(n),0===i.size&&e.delete(t))},emit:function(t){var n=e.get(t);if(void 0!==n){for(var i=arguments.length,r=new Array(i>1?i-1:0),a=1;a<i;a++)r[a-1]=arguments[a];var o,s=Fc(n);try{for(s.s();!(o=s.n()).done;)o.value.apply(void 0,r)}catch(l){s.e(l)}finally{s.f()}}}}}();this.storeId="_"+Math.random().toString(36).substr(2,9),this.useStore=n;var r={},a=new Set;this.getVisiblePaths=function(){var e=t.getData(),n=Object.keys(e),i=[];Object.entries(r).forEach((function(e){var r=c(e,2),a=r[0],o=r[1];o.render&&n.some((function(e){return 0===e.indexOf(a)}))&&!o.render(t.get)&&i.push(a+".")}));var o=[];return a.forEach((function(n){n in e&&e[n].__refCount>0&&i.every((function(e){return-1===n.indexOf(e)}))&&(!e[n].render||e[n].render(t.get))&&o.push(n)})),o},this.setOrderedPaths=function(e){e.forEach((function(e){return a.add(e)}))},this.orderPaths=function(e){return t.setOrderedPaths(e),e},this.disposePaths=function(e){n.setState((function(t){var n=t.data;return e.forEach((function(e){if(e in n){var t=n[e];t.__refCount--,0===t.__refCount&&t.type in KU&&delete n[e]}})),{data:n}}))},this.dispose=function(){n.setState((function(){return{data:{}}}))},this.getFolderSettings=function(e){return r[e]||{}},this.getData=function(){return n.getState().data},this.addData=function(e,t){n.setState((function(n){var i=n.data;return Object.entries(e).forEach((function(e){var n=c(e,2),r=n[0],a=n[1],o=i[r];if(o){var s=a.type,l=(a.value,dU(a,N$));s!==o.type?pU(sU.INPUT_TYPE_OVERRIDE,s):((0===o.__refCount||t)&&Object.assign(o,l),o.__refCount++)}else i[r]=ZU(ZU({},a),{},{__refCount:1})})),{data:i}}))},this.setValueAtPath=function(e,i,r){n.setState((function(n){var a=n.data;return QU(a[e],i,e,t,r),{data:a}}))},this.setSettingsAtPath=function(e,t){n.setState((function(n){var i=n.data;return i[e].settings=ZU(ZU({},i[e].settings),t),{data:i}}))},this.disableInputAtPath=function(e,t){n.setState((function(n){var i=n.data;return i[e].disabled=t,{data:i}}))},this.set=function(e,t){n.setState((function(n){var i=n.data;return Object.entries(e).forEach((function(e){var n=c(e,2),r=n[0],a=n[1];try{QU(i[r],a,void 0,void 0,t)}catch(o){0}})),{data:i}}))},this.getInput=function(e){try{return t.getData()[e]}catch(n){pU(sU.PATH_DOESNT_EXIST,e)}},this.get=function(e){var n;return null===(n=t.getInput(e))||void 0===n?void 0:n.value},this.emitOnEditStart=function(e){i.emit("onEditStart:".concat(e),t.get(e),e,ZU(ZU({},t.getInput(e)),{},{get:t.get}))},this.emitOnEditEnd=function(e){i.emit("onEditEnd:".concat(e),t.get(e),e,ZU(ZU({},t.getInput(e)),{},{get:t.get}))},this.subscribeToEditStart=function(e,t){var n="onEditStart:".concat(e);return i.on(n,t),function(){return i.off(n,t)}},this.subscribeToEditEnd=function(e,t){var n="onEditEnd:".concat(e);return i.on(n,t),function(){return i.off(n,t)}};var o=function e(t,n,i){var a={};return Object.entries(t).forEach((function(t){var o=c(t,2),s=o[0],l=o[1];if(""===s)return pU(sU.EMPTY_KEY);var u=qq(n,s);if(l.type===KU.FOLDER){var g=e(l.schema,u,i);Object.assign(a,g),u in r||(r[u]=l.settings)}else if(s in i)pU(sU.DUPLICATE_KEYS,s,u,i[s].path);else{var d=JU(l,s,u,a);if(d){var h=d.type,f=d.options,p=d.input,I=f.onChange,C=f.transient,m=f.onEditStart,v=f.onEditEnd,A=dU(f,H$);a[u]=ZU(ZU(ZU({type:h},A),p),{},{fromPanel:!0}),i[s]={path:u,onChange:I,transient:C,onEditStart:m,onEditEnd:v}}else pU(sU.UNKNOWN_INPUT,u,l)}})),a};this.getDataFromSchema=function(e){var t={};return[o(e,"",t),t]}};new T$;var X$=function(e){return"__levaInput"in e},Y$=["type","label","path","valueKey","value","settings","setValue","disabled"];function E$(e){var n=e.type,i=e.label,r=e.path,a=e.valueKey,o=e.value,s=e.settings,l=e.setValue,c=e.disabled,u=dU(e,Y$),g=$j({type:n,value:o,settings:s,setValue:l}),d=g.displayValue,h=g.onChange,f=g.onUpdate,p=bU[n].component;return p?t.createElement(cj.Provider,{value:ZU({key:a,path:r,id:""+r,label:i,displayValue:d,value:o,onChange:h,onUpdate:f,settings:s,setValue:l,disabled:c},u)},t.createElement(Yj,{disabled:c},t.createElement(p,null))):(pU(sU.NO_COMPONENT_FOR_TYPE,n,r),null)}var z$=mj("button",{display:"block",$reset:"",fontWeight:"$button",height:"$rowHeight",borderStyle:"none",borderRadius:"$sm",backgroundColor:"$elevation1",color:"$highlight1","&:not(:disabled)":{color:"$highlight3",backgroundColor:"$accent2",cursor:"pointer",$hover:"$accent3",$active:"$accent3 $accent1",$focus:""}});var L$=mj("div",{$flex:"",justifyContent:"flex-end",gap:"$colGap"}),K$=mj("button",{$reset:"",cursor:"pointer",borderRadius:"$xs","&:hover":{backgroundColor:"$elevation3"}});var _$=mj("canvas",{height:"$monitorHeight",width:"100%",display:"block",borderRadius:"$sm"});var P$=(0,t.forwardRef)((function(e,n){var i=e.initialValue,r=bj("colors","highlight3"),a=bj("colors","elevation2"),o=bj("colors","highlight1"),s=c((0,t.useMemo)((function(){return[hQ(o).alpha(.4).toRgbString(),hQ(o).alpha(.1).toRgbString()]}),[o]),2),l=s[0],u=s[1],g=(0,t.useRef)([i]),d=(0,t.useRef)(i),h=(0,t.useRef)(i),f=(0,t.useRef)(),p=(0,t.useCallback)((function(e,t){if(e){for(var n=e.width,i=e.height,o=new Path2D,s=n/100,c=.05*i,f=0;f<g.current.length;f++){var p=s*f,I=i-VU(g.current[f],d.current,h.current)*(i-2*c)-c;o.lineTo(p,I)}t.clearRect(0,0,n,i);var C=new Path2D(o);C.lineTo(s*(g.current.length+1),i),C.lineTo(0,i),C.lineTo(0,0);var m=t.createLinearGradient(0,0,0,i);m.addColorStop(0,l),m.addColorStop(1,u),t.fillStyle=m,t.fill(C),t.strokeStyle=a,t.lineJoin="round",t.lineWidth=14,t.stroke(o),t.strokeStyle=r,t.lineWidth=2,t.stroke(o)}}),[r,a,l,u]),I=function(e){var n=(0,t.useRef)(null),i=(0,t.useRef)(null),r=(0,t.useRef)(!1);return(0,t.useEffect)((function(){var t=ej((function(){n.current.width=n.current.offsetWidth*window.devicePixelRatio,n.current.height=n.current.offsetHeight*window.devicePixelRatio,e(n.current,i.current)}),250);return window.addEventListener("resize",t),r.current||(t(),r.current=!0),function(){return window.removeEventListener("resize",t)}}),[e]),(0,t.useEffect)((function(){i.current=n.current.getContext("2d")}),[]),[n,i]}(p),C=c(I,2),m=C[0],v=C[1];return(0,t.useImperativeHandle)(n,(function(){return{frame:function(e){(void 0===d.current||e<d.current)&&(d.current=e),(void 0===h.current||e>h.current)&&(h.current=e),function(e,t){e.push(t),e.length>100&&e.shift()}(g.current,e),f.current=requestAnimationFrame((function(){return p(m.current,v.current)}))}}}),[m,v,p]),(0,t.useEffect)((function(){return function(){return cancelAnimationFrame(f.current)}}),[]),t.createElement(_$,{ref:m})})),D$=function(e){return Number.isFinite(e)?e.toPrecision(2):e.toString()},O$=(0,t.forwardRef)((function(e,n){var i=e.initialValue,r=c((0,t.useState)(D$(i)),2),a=r[0],o=r[1];return(0,t.useImperativeHandle)(n,(function(){return{frame:function(e){return o(D$(e))}}}),[]),t.createElement("div",null,a)}));function U$(e){return"function"===typeof e?e():e.current}var j$=["type","label","key"],J$=(ke(Uq={},KU.BUTTON,(function(e){var n=e.onClick,i=e.settings,r=e.label,a=fj();return t.createElement(qj,null,t.createElement(z$,{disabled:i.disabled,onClick:function(){return n(a.get)}},r))})),ke(Uq,KU.BUTTON_GROUP,(function(e){var n=function(e){var t=e.label,n=e.opts,i="string"===typeof t&&""===t.trim()?null:t,r=n;return"object"===typeof n.opts&&(void 0!==r.label&&(i=n.label),r=n.opts),{label:i,opts:r}}(e),i=n.label,r=n.opts,a=fj();return t.createElement(qj,{input:!!i},i&&t.createElement(Oj,null,i),t.createElement(L$,null,Object.entries(r).map((function(e){var n=c(e,2),i=n[0],r=n[1];return t.createElement(K$,{key:i,onClick:function(){return r(a.get)}},i)}))))})),ke(Uq,KU.MONITOR,(function(e){var n=e.label,i=e.objectOrFn,r=e.settings,a=(0,t.useRef)(),o=(0,t.useRef)(U$(i));return(0,t.useEffect)((function(){var e=window.setInterval((function(){var e;document.hidden||null===(e=a.current)||void 0===e||e.frame(U$(i))}),r.interval);return function(){return window.clearInterval(e)}}),[i,r.interval]),t.createElement(qj,{input:!0},t.createElement(Oj,{align:"top"},n),r.graph?t.createElement(P$,{ref:a,initialValue:o.current}):t.createElement(O$,{ref:a,initialValue:o.current}))})),Uq),Q$=t.memo((function(e){var n=e.path,i=function(e){var n=fj(),i=c((0,t.useState)(iJ(n.getData(),e)),2),r=i[0],a=i[1],o=(0,t.useCallback)((function(t){return n.setValueAtPath(e,t,!0)}),[e,n]),s=(0,t.useCallback)((function(t){return n.setSettingsAtPath(e,t)}),[e,n]),l=(0,t.useCallback)((function(t){return n.disableInputAtPath(e,t)}),[e,n]),u=(0,t.useCallback)((function(){return n.emitOnEditStart(e)}),[e,n]),g=(0,t.useCallback)((function(){return n.emitOnEditEnd(e)}),[e,n]);return(0,t.useEffect)((function(){a(iJ(n.getData(),e));var t=n.useStore.subscribe((function(t){return iJ(t.data,e)}),a,{equalityFn:EL});return function(){return t()}}),[n,e]),[r,{set:o,setSettings:s,disable:l,storeId:n.storeId,emitOnEditStart:u,emitOnEditEnd:g}]}(n),r=c(i,2),a=r[0],o=r[1],s=o.set,l=o.setSettings,u=o.disable,g=o.storeId,d=o.emitOnEditStart,h=o.emitOnEditEnd;if(!a)return null;var f=a.type,p=a.label,I=a.key,C=dU(a,j$);if(f in KU){var m=J$[f];return t.createElement(m,lj({label:p,path:n},C))}return f in bU?t.createElement(E$,lj({key:g+n,type:f,label:p,storeId:g,path:n,valueKey:I,setValue:s,setSettings:l,disable:u,emitOnEditStart:d,emitOnEditEnd:h},C)):(IU(sU.UNSUPPORTED_INPUT,f,n),null)}));function q$(e){var n=e.toggle,i=e.toggled,r=e.name;return t.createElement(Mj,{onClick:function(){return n()}},t.createElement(Jj,{toggled:i}),t.createElement("div",null,r))}var $$=function(e){var n=e.name,i=e.path,r=e.tree,a=fj(),o=qq(i,n),s=a.getFolderSettings(o),l=s.collapsed,u=s.color,g=c((0,t.useState)(!l),2),d=g[0],h=g[1],f=(0,t.useRef)(null),p=bj("colors","folderWidgetColor"),I=bj("colors","folderTextColor");return(0,t.useLayoutEffect)((function(){f.current.style.setProperty("--leva-colors-folderWidgetColor",u||p),f.current.style.setProperty("--leva-colors-folderTextColor",u||I)}),[u,p,I]),t.createElement(Rj,{ref:f},t.createElement(q$,{name:n,toggled:d,toggle:function(){return h((function(e){return!e}))}}),t.createElement(e0,{parent:o,tree:r,toggled:d}))},e0=t.memo((function(e){var n=e.isRoot,i=void 0!==n&&n,r=e.fill,a=void 0!==r&&r,o=e.flat,s=void 0!==o&&o,l=e.parent,u=e.tree,g=e.toggled,d=function(e){var n=(0,t.useRef)(null),i=(0,t.useRef)(null),r=(0,t.useRef)(!0);return(0,t.useLayoutEffect)((function(){e||(n.current.style.height="0px",n.current.style.overflow="hidden")}),[]),(0,t.useEffect)((function(){if(!r.current){var t,a=n.current,o=function(){e&&(a.style.removeProperty("height"),a.style.removeProperty("overflow"),i.current.scrollIntoView({behavior:"smooth",block:"nearest"}))};a.addEventListener("transitionend",o,{once:!0});var s=i.current.getBoundingClientRect().height;return a.style.height=s+"px",e||(a.style.overflow="hidden",t=window.setTimeout((function(){return a.style.height="0px"}),50)),function(){a.removeEventListener("transitionend",o),clearTimeout(t)}}r.current=!1}),[e]),{wrapperRef:n,contentRef:i}}(g),h=d.wrapperRef,f=d.contentRef,p=fj(),I=function(e){var t,n=c(e,2),i=n[0],r=n[1];return(X$(r)?null===(t=p.getInput(r.path))||void 0===t?void 0:t.order:p.getFolderSettings(qq(l,i)).order)||0},C=Object.entries(u).sort((function(e,t){return I(e)-I(t)}));return t.createElement(Wj,{ref:h,isRoot:i,fill:a,flat:s},t.createElement(Vj,{ref:f,isRoot:i,toggled:g},C.map((function(e){var n=c(e,2),i=n[0],r=n[1];return X$(r)?t.createElement(Q$,{key:r.path,valueKey:r.valueKey,path:r.path}):t.createElement($$,{key:i,name:i,path:l,tree:r})}))))})),t0=mj("div",{position:"relative",fontFamily:"$mono",fontSize:"$root",color:"$rootText",backgroundColor:"$elevation1",variants:{fill:{false:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:"$rootWidth"},true:{position:"relative",width:"100%"}},flat:{false:{borderRadius:"$lg",boxShadow:"$level1"}},oneLineLabels:{true:ke({},"".concat(Nj),{gridTemplateColumns:"auto",gridAutoColumns:"minmax(max-content, 1fr)",gridAutoRows:"minmax($sizes$rowHeight), auto)",rowGap:0,columnGap:0,marginTop:"$rowGap"})},hideTitleBar:{true:{$$titleBarHeight:"0px"},false:{$$titleBarHeight:"$sizes$titleBarHeight"}}},"&,*,*:after,*:before":{boxSizing:"border-box"},"*::selection":{backgroundColor:"$accent2"}}),n0=mj("i",{$flexCenter:"",width:40,userSelect:"none",cursor:"pointer","> svg":{fill:"$highlight1",transition:"transform 350ms ease, fill 250ms ease"},"&:hover > svg":{fill:"$highlight3"},variants:{active:{true:{"> svg":{fill:"$highlight2"}}}}}),i0=mj("div",{display:"flex",alignItems:"stretch",justifyContent:"space-between",height:"$titleBarHeight",variants:{mode:{drag:{cursor:"grab"}}}}),r0=mj("div",(ke(jq={$flex:"",position:"relative",width:"100%",overflow:"hidden",transition:"height 250ms ease",color:"$highlight3",paddingLeft:"$md"},"> ".concat(n0),{height:30}),ke(jq,"variants",{toggled:{true:{height:30},false:{height:0}}}),jq)),a0=mj("input",{$reset:"",flex:1,position:"relative",height:30,width:"100%",backgroundColor:"transparent",fontSize:"10px",borderRadius:"$root","&:focus":{},"&::placeholder":{color:"$highlight2"}}),o0=mj("div",{touchAction:"none",$flexCenter:"",flex:1,"> svg":{fill:"$highlight1"},color:"$highlight1",variants:{drag:{true:{$draggable:"","> svg":{transition:"fill 250ms ease"},"&:hover":{color:"$highlight3"},"&:hover > svg":{fill:"$highlight3"}}},filterEnabled:{false:{paddingRight:40}}}}),s0=t.forwardRef((function(e,n){var i=e.setFilter,r=e.toggle,a=c((0,t.useState)(""),2),o=a[0],s=a[1],l=(0,t.useMemo)((function(){return ej(i,250)}),[i]);return(0,t.useEffect)((function(){l(o)}),[o,l]),t.createElement(t.Fragment,null,t.createElement(a0,{ref:n,value:o,placeholder:"[Open filter with CMD+SHIFT+L]",onPointerDown:function(e){return e.stopPropagation()},onChange:function(e){var t=e.currentTarget.value;r(!0),s(t)}}),t.createElement(n0,{onClick:function(){return i(""),void s("")},style:{visibility:o?"visible":"hidden"}},t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 20 20",fill:"currentColor"},t.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))))}));function l0(e){var n=e.setFilter,i=e.onDrag,r=e.onDragStart,a=e.onDragEnd,o=e.toggle,s=e.toggled,l=e.title,u=e.drag,g=e.filterEnabled,d=e.from,h=c((0,t.useState)(!1),2),f=h[0],p=h[1],I=(0,t.useRef)(null);(0,t.useEffect)((function(){var e,t;f?null===(e=I.current)||void 0===e||e.focus():null===(t=I.current)||void 0===t||t.blur()}),[f]);var C=eJ((function(e){var t=c(e.offset,2),n=t[0],o=t[1],s=e.first,l=e.last;i({x:n,y:o}),s&&r({x:n,y:o}),l&&a({x:n,y:o})}),{filterTaps:!0,from:function(e){var t=c(e.offset,2),n=t[0],i=t[1];return[(null===d||void 0===d?void 0:d.x)||n,(null===d||void 0===d?void 0:d.y)||i]}});return(0,t.useEffect)((function(){var e=function(e){"L"===e.key&&e.shiftKey&&e.metaKey&&p((function(e){return!e}))};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}}),[]),t.createElement(t.Fragment,null,t.createElement(i0,{mode:u?"drag":void 0},t.createElement(n0,{active:!s,onClick:function(){return o()}},t.createElement(Jj,{toggled:s,width:12,height:8})),t.createElement(o0,lj({},u?C():{},{drag:u,filterEnabled:g}),void 0===l&&u?t.createElement("svg",{width:"20",height:"10",viewBox:"0 0 28 14",xmlns:"http://www.w3.org/2000/svg"},t.createElement("circle",{cx:"2",cy:"2",r:"2"}),t.createElement("circle",{cx:"14",cy:"2",r:"2"}),t.createElement("circle",{cx:"26",cy:"2",r:"2"}),t.createElement("circle",{cx:"2",cy:"12",r:"2"}),t.createElement("circle",{cx:"14",cy:"12",r:"2"}),t.createElement("circle",{cx:"26",cy:"12",r:"2"})):l),g&&t.createElement(n0,{active:f,onClick:function(){return p((function(e){return!e}))}},t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 20 20"},t.createElement("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),t.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})))),t.createElement(r0,{toggled:f},t.createElement(s0,{ref:I,setFilter:n,toggle:o})))}t.memo((function(e){var n,i,r=e.store,a=e.rootClass,o=e.fill,s=void 0!==o&&o,l=e.flat,u=void 0!==l&&l,g=e.neverHide,d=void 0!==g&&g,h=e.oneLineLabels,f=void 0!==h&&h,p=e.titleBar,I=void 0===p?{title:void 0,drag:!0,filter:!0,position:void 0,onDrag:void 0,onDragStart:void 0,onDragEnd:void 0}:p,C=e.hideCopyButton,m=void 0!==C&&C,v=e.toggled,A=e.setToggle,b=function(e){var n=c((0,t.useState)(e.getVisiblePaths()),2),i=n[0],r=n[1];return(0,t.useEffect)((function(){r(e.getVisiblePaths());var t=e.useStore.subscribe(e.getVisiblePaths,r,{equalityFn:EL});return function(){return t()}}),[e]),i}(r),y=c((0,t.useState)(""),2),G=y[0],w=y[1],B=(0,t.useMemo)((function(){return function(e,t){var n={},i=t?t.toLowerCase():null;return e.forEach((function(e){var t=function(e){var t=e.split(".");return[t.pop(),t.join(".")||void 0]}(e),r=c(t,2),a=r[0],o=r[1];(!i||a.toLowerCase().indexOf(i)>-1)&&Qq()(n,o,ke({},a,{__levaInput:!0,path:e}))})),n}(b,G)}),[b,G]),x=c(tJ(),2),S=x[0],Z=x[1],k=d||b.length>0,R="object"===typeof I&&I.title||void 0,W="object"!==typeof I||(null===(n=I.drag)||void 0===n||n),M="object"!==typeof I||(null===(i=I.filter)||void 0===i||i),V="object"===typeof I&&I.position||void 0,F="object"===typeof I&&I.onDrag||void 0,N="object"===typeof I&&I.onDragStart||void 0,H="object"===typeof I&&I.onDragEnd||void 0;return t.useEffect((function(){Z({x:null===V||void 0===V?void 0:V.x,y:null===V||void 0===V?void 0:V.y})}),[V,Z]),Aj(),t.createElement(hj.Provider,{value:{hideCopyButton:m}},t.createElement(t0,{ref:S,className:a,fill:s,flat:u,oneLineLabels:f,hideTitleBar:!I,style:{display:k?"block":"none"}},I&&t.createElement(l0,{onDrag:function(e){Z(e),null===F||void 0===F||F(e)},onDragStart:function(e){return null===N||void 0===N?void 0:N(e)},onDragEnd:function(e){return null===H||void 0===H?void 0:H(e)},setFilter:w,toggle:function(e){return A((function(t){return null!==e&&void 0!==e?e:!t}))},toggled:v,title:R,drag:W,filterEnabled:M,from:V}),k&&t.createElement(dj.Provider,{value:r},t.createElement(e0,{isRoot:!0,fill:s,flat:u,tree:B,toggled:v}))))}));function c0(e){var n=e.cinsiyet;return function(e,n,i,r){void 0===r&&(r=[]);var a=fE().worker,o=c((0,t.useState)((function(){return Ih.generateUUID()})),1)[0];(0,t.useEffect)((function(){return a.addContactMaterial({props:[e,n,i],uuid:o}),function(){a.removeContactMaterial({uuid:o})}}),r)}("ground","slippery",{friction:0,restitution:.3,contactEquationStiffness:1e8,contactEquationRelaxation:3}),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(FE,{rotation:[-Math.PI/2,0,0],position:[0,-.0295,0],material:"ground"}),(0,u.jsx)(TE,{}),(0,u.jsx)(wL,{position:[.5,-.1,3],scale:[1.2,1.2,1.2]}),(0,u.jsx)(GL,{position:[0,1,0],linearDamping:.95,material:"slippery",cinsiyet:n})]})}GU(_U.SELECT,vJ),GU(_U.IMAGE,B$),GU(_U.NUMBER,hJ),GU(_U.COLOR,c$),GU(_U.STRING,wJ),GU(_U.BOOLEAN,ZJ),GU(_U.INTERVAL,F$),GU(_U.VECTOR3D,u$),GU(_U.VECTOR2D,C$);var u0=n.p+"static/media/g5m.77c65e5e64595dfb4424.png";n(9049);var g0=Object.defineProperty,d0=function(e,t,n){return function(e,t,n){t in e?g0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!==typeof t?t+"":t,n),n},h0={uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new Ph},up:{value:new Ph(0,1,0)}},vertexShader:"\n      uniform vec3 sunPosition;\n      uniform float rayleigh;\n      uniform float turbidity;\n      uniform float mieCoefficient;\n      uniform vec3 up;\n\n      varying vec3 vWorldPosition;\n      varying vec3 vSunDirection;\n      varying float vSunfade;\n      varying vec3 vBetaR;\n      varying vec3 vBetaM;\n      varying float vSunE;\n\n      // constants for atmospheric scattering\n      const float e = 2.71828182845904523536028747135266249775724709369995957;\n      const float pi = 3.141592653589793238462643383279502884197169;\n\n      // wavelength of used primaries, according to preetham\n      const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );\n      // this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:\n      // (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))\n      const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );\n\n      // mie stuff\n      // K coefficient for the primaries\n      const float v = 4.0;\n      const vec3 K = vec3( 0.686, 0.678, 0.666 );\n      // MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K\n      const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );\n\n      // earth shadow hack\n      // cutoffAngle = pi / 1.95;\n      const float cutoffAngle = 1.6110731556870734;\n      const float steepness = 1.5;\n      const float EE = 1000.0;\n\n      float sunIntensity( float zenithAngleCos ) {\n        zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );\n        return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );\n      }\n\n      vec3 totalMie( float T ) {\n        float c = ( 0.2 * T ) * 10E-18;\n        return 0.434 * c * MieConst;\n      }\n\n      void main() {\n\n        vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n        vWorldPosition = worldPosition.xyz;\n\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n        gl_Position.z = gl_Position.w; // set z to camera.far\n\n        vSunDirection = normalize( sunPosition );\n\n        vSunE = sunIntensity( dot( vSunDirection, up ) );\n\n        vSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );\n\n        float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );\n\n      // extinction (absorbtion + out scattering)\n      // rayleigh coefficients\n        vBetaR = totalRayleigh * rayleighCoefficient;\n\n      // mie coefficients\n        vBetaM = totalMie( turbidity ) * mieCoefficient;\n\n      }\n    ",fragmentShader:"\n      varying vec3 vWorldPosition;\n      varying vec3 vSunDirection;\n      varying float vSunfade;\n      varying vec3 vBetaR;\n      varying vec3 vBetaM;\n      varying float vSunE;\n\n      uniform float mieDirectionalG;\n      uniform vec3 up;\n\n      const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );\n\n      // constants for atmospheric scattering\n      const float pi = 3.141592653589793238462643383279502884197169;\n\n      const float n = 1.0003; // refractive index of air\n      const float N = 2.545E25; // number of molecules per unit volume for air at 288.15K and 1013mb (sea level -45 celsius)\n\n      // optical length at zenith for molecules\n      const float rayleighZenithLength = 8.4E3;\n      const float mieZenithLength = 1.25E3;\n      // 66 arc seconds -> degrees, and the cosine of that\n      const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;\n\n      // 3.0 / ( 16.0 * pi )\n      const float THREE_OVER_SIXTEENPI = 0.05968310365946075;\n      // 1.0 / ( 4.0 * pi )\n      const float ONE_OVER_FOURPI = 0.07957747154594767;\n\n      float rayleighPhase( float cosTheta ) {\n        return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );\n      }\n\n      float hgPhase( float cosTheta, float g ) {\n        float g2 = pow( g, 2.0 );\n        float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );\n        return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );\n      }\n\n      void main() {\n\n        vec3 direction = normalize( vWorldPosition - cameraPos );\n\n      // optical length\n      // cutoff angle at 90 to avoid singularity in next formula.\n        float zenithAngle = acos( max( 0.0, dot( up, direction ) ) );\n        float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );\n        float sR = rayleighZenithLength * inverse;\n        float sM = mieZenithLength * inverse;\n\n      // combined extinction factor\n        vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );\n\n      // in scattering\n        float cosTheta = dot( direction, vSunDirection );\n\n        float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );\n        vec3 betaRTheta = vBetaR * rPhase;\n\n        float mPhase = hgPhase( cosTheta, mieDirectionalG );\n        vec3 betaMTheta = vBetaM * mPhase;\n\n        vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );\n        Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );\n\n      // nightsky\n        float theta = acos( direction.y ); // elevation --\x3e y-axis, [-pi/2, pi/2]\n        float phi = atan( direction.z, direction.x ); // azimuth --\x3e x-axis [-pi/2, pi/2]\n        vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );\n        vec3 L0 = vec3( 0.1 ) * Fex;\n\n      // composition + solar disc\n        float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );\n        L0 += ( vSunE * 19000.0 * Fex ) * sundisk;\n\n        vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );\n\n        vec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );\n\n        gl_FragColor = vec4( retColor, 1.0 );\n\n      #include <tonemapping_fragment>\n      #include <encodings_fragment>\n\n      }\n    "},f0=new gI({name:"SkyShader",fragmentShader:h0.fragmentShader,vertexShader:h0.vertexShader,uniforms:uI.clone(h0.uniforms),side:$c,depthWrite:!1}),p0=function(e){kc(n,e);var t=Vc(n);function n(){return ka(this,n),t.call(this,new oI(1,1,1),f0)}return Xe(n)}(rI);d0(p0,"SkyShader",h0),d0(p0,"material",f0);var I0=["inclination","azimuth","distance","mieCoefficient","mieDirectionalG","rayleigh","turbidity","sunPosition"];var C0=t.forwardRef((function(e,n){var i=e.inclination,r=void 0===i?.6:i,a=e.azimuth,o=void 0===a?.1:a,s=e.distance,l=void 0===s?1e3:s,u=e.mieCoefficient,g=void 0===u?.005:u,d=e.mieDirectionalG,h=void 0===d?.8:d,f=e.rayleigh,p=void 0===f?.5:f,I=e.turbidity,C=void 0===I?10:I,m=e.sunPosition,A=void 0===m?function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Ph,i=Math.PI*(e-.5),r=2*Math.PI*(t-.5);return n.x=Math.cos(r),n.y=Math.sin(i),n.z=Math.sin(r),n}(r,o):m,b=Fe(e,I0),y=t.useMemo((function(){return(new Ph).setScalar(l)}),[l]),G=c(t.useState((function(){return new p0})),1)[0];return t.createElement("primitive",v({object:G,ref:n,"material-uniforms-mieCoefficient-value":g,"material-uniforms-mieDirectionalG-value":h,"material-uniforms-rayleigh-value":p,"material-uniforms-sunPosition-value":A,"material-uniforms-turbidity-value":C,scale:y},b))}));function m0(){var e=Object.create(null);function t(i,r){var a=i.id,o=i.name,s=i.dependencies;void 0===s&&(s=[]);var l=i.init;void 0===l&&(l=function(){});var c=i.getTransferables;if(void 0===c&&(c=null),!e[a])try{s=s.map((function(n){return n&&n.isWorkerModule&&(t(n,(function(e){if(e instanceof Error)throw e})),n=e[n.id].value),n})),l=n("<"+o+">.init",l),c&&(c=n("<"+o+">.getTransferables",c));var u=null;"function"===typeof l?u=l.apply(void 0,s):console.error("worker module init function failed to rehydrate"),e[a]={id:a,value:u,getTransferables:c},r(u)}catch(g){g&&g.noLog||console.error(g),r(g)}}function n(e,t){var n=void 0;self.troikaDefine=function(e){return n=e};var i=URL.createObjectURL(new Blob(["/** "+e.replace(/\*/g,"")+" **/\n\ntroikaDefine(\n"+t+"\n)"],{type:"application/javascript"}));try{importScripts(i)}catch(r){console.error(r)}return URL.revokeObjectURL(i),delete self.troikaDefine,n}self.addEventListener("message",(function(n){var i=n.data,r=i.messageId,a=i.action,o=i.data;try{"registerModule"===a&&t(o,(function(e){e instanceof Error?postMessage({messageId:r,success:!1,error:e.message}):postMessage({messageId:r,success:!0,result:{isCallable:"function"===typeof e}})})),"callModule"===a&&function(t,n){var i,r=t.id,a=t.args;e[r]&&"function"===typeof e[r].value||n(new Error("Worker module "+r+": not found or its 'init' did not return a function"));try{var o=(i=e[r]).value.apply(i,a);o&&"function"===typeof o.then?o.then(s,(function(e){return n(e instanceof Error?e:new Error(""+e))})):s(o)}catch(l){n(l)}function s(t){try{var i=e[r].getTransferables&&e[r].getTransferables(t);i&&Array.isArray(i)&&i.length||(i=void 0),n(t,i)}catch(l){console.error(l),n(l)}}}(o,(function(e,t){e instanceof Error?postMessage({messageId:r,success:!1,error:e.message}):postMessage({messageId:r,success:!0,result:e},t||void 0)}))}catch(s){postMessage({messageId:r,success:!1,error:s.stack})}}))}var v0=function(){var e=!1;if("undefined"!==typeof window&&"undefined"!==typeof window.document)try{new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"}))).terminate(),e=!0}catch(t){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return v0=function(){return e},e},A0=0,b0=0,y0=!1,G0=Object.create(null),w0=Object.create(null),B0=Object.create(null);function x0(e){if((!e||"function"!==typeof e.init)&&!y0)throw new Error("requires `options.init` function");var t=e.dependencies,n=e.init,i=e.getTransferables,r=e.workerId;if(!v0())return function(e){var t=function e(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return e._getInitResult().then((function(e){if("function"===typeof e)return e.apply(void 0,t);throw new Error("Worker module function was called but `init` did not return a callable function")}))};return t._getInitResult=function(){var n=e.dependencies,i=e.init;n=Array.isArray(n)?n.map((function(e){return e&&e._getInitResult?e._getInitResult():e})):[];var r=Promise.all(n).then((function(e){return i.apply(null,e)}));return t._getInitResult=function(){return r},r},t}(e);null==r&&(r="#default");var a="workerModule"+ ++A0,o=e.name||a,s=null;function l(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(!s){s=Z0(r,"registerModule",l.workerModuleData);(w0[r]||(w0[r]=new Set)).add((function e(){s=null,w0[r].delete(e)}))}return s.then((function(t){if(t.isCallable)return Z0(r,"callModule",{id:a,args:e});throw new Error("Worker module function was called but `init` did not return a callable function")}))}return t=t&&t.map((function(e){return"function"!==typeof e||e.workerModuleData||(y0=!0,e=x0({workerId:r,name:"<"+o+"> function dependency: "+e.name,init:"function(){return (\n"+S0(e)+"\n)}"}),y0=!1),e&&e.workerModuleData&&(e=e.workerModuleData),e})),l.workerModuleData={isWorkerModule:!0,id:a,name:o,dependencies:t,init:S0(n),getTransferables:i&&S0(i)},l}function S0(e){var t=e.toString();return!/^function/.test(t)&&/^\w+\s*\(/.test(t)&&(t="function "+t),t}function Z0(e,t,n){return new Promise((function(i,r){var a=++b0;B0[a]=function(e){e.success?i(e.result):r(new Error("Error in worker "+t+" call: "+e.error))},function(e){var t=G0[e];if(!t){var n=S0(m0);(t=G0[e]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+e.replace(/\*/g,"")+" **/\n\n;("+n+")()"],{type:"application/javascript"})))).onmessage=function(e){var t=e.data,n=t.messageId,i=B0[n];if(!i)throw new Error("WorkerModule response with empty or unknown messageId");delete B0[n],i(t)}}return t}(e).postMessage({messageId:a,action:t,data:n})}))}function k0(){var e=function(e){function t(e,t,n,i,r,a,o,s){var l=1-o;s.x=l*l*e+2*l*o*n+o*o*r,s.y=l*l*t+2*l*o*i+o*o*a}function n(e,t,n,i,r,a,o,s,l,c){var u=1-l;c.x=u*u*u*e+3*u*u*l*n+3*u*l*l*r+l*l*l*o,c.y=u*u*u*t+3*u*u*l*i+3*u*l*l*a+l*l*l*s}function i(e,t){for(var n,i,r,a,o,s=/([MLQCZ])([^MLQCZ]*)/g;n=s.exec(e);){var l=n[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map((function(e){return parseFloat(e)}));switch(n[1]){case"M":a=i=l[0],o=r=l[1];break;case"L":l[0]===a&&l[1]===o||t("L",a,o,a=l[0],o=l[1]);break;case"Q":t("Q",a,o,a=l[2],o=l[3],l[0],l[1]);break;case"C":t("C",a,o,a=l[4],o=l[5],l[0],l[1],l[2],l[3]);break;case"Z":a===i&&o===r||t("L",a,o,i,r)}}}function r(e,r,a){void 0===a&&(a=16);var o={x:0,y:0};i(e,(function(e,i,s,l,c,u,g,d,h){switch(e){case"L":r(i,s,l,c);break;case"Q":for(var f=i,p=s,I=1;I<a;I++)t(i,s,u,g,l,c,I/(a-1),o),r(f,p,o.x,o.y),f=o.x,p=o.y;break;case"C":for(var C=i,m=s,v=1;v<a;v++)n(i,s,u,g,d,h,l,c,v/(a-1),o),r(C,m,o.x,o.y),C=o.x,m=o.y}}))}var a="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",o="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",s=new WeakMap,l={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function c(e,t){var n=e.getContext?e.getContext("webgl",l):e,i=s.get(n);if(!i){var r=function(e){var t=u[e];if(!t&&!(t=u[e]=n.getExtension(e)))throw new Error(e+" not supported");return t},a=function(e,t){var i=n.createShader(t);return n.shaderSource(i,e),n.compileShader(i),i},o=function(){u={},g={},d={},h=-1,f.length=0},c="undefined"!==typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext,u={},g={},d={},h=-1,f=[];n.canvas.addEventListener("webglcontextlost",(function(e){o(),e.preventDefault()}),!1),s.set(n,i={gl:n,isWebGL2:c,getExtension:r,withProgram:function(e,t,i,o){if(!g[e]){var s={},l={},u=n.createProgram();n.attachShader(u,a(t,n.VERTEX_SHADER)),n.attachShader(u,a(i,n.FRAGMENT_SHADER)),n.linkProgram(u),g[e]={program:u,transaction:function(e){n.useProgram(u),e({setUniform:function(e,t){for(var i=[],r=arguments.length-2;r-- >0;)i[r]=arguments[r+2];var a=l[t]||(l[t]=n.getUniformLocation(u,t));n["uniform"+e].apply(n,[a].concat(i))},setAttribute:function(e,t,i,a,o){var l=s[e];l||(l=s[e]={buf:n.createBuffer(),loc:n.getAttribLocation(u,e),data:null}),n.bindBuffer(n.ARRAY_BUFFER,l.buf),n.vertexAttribPointer(l.loc,t,n.FLOAT,!1,0,0),n.enableVertexAttribArray(l.loc),c?n.vertexAttribDivisor(l.loc,a):r("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(l.loc,a),o!==l.data&&(n.bufferData(n.ARRAY_BUFFER,o,i),l.data=o)}})}}}g[e].transaction(o)},withTexture:function(e,t){h++;try{n.activeTexture(n.TEXTURE0+h);var i=d[e];i||(i=d[e]=n.createTexture(),n.bindTexture(n.TEXTURE_2D,i),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST)),n.bindTexture(n.TEXTURE_2D,i),t(i,h)}finally{h--}},withTextureFramebuffer:function(e,t,i){var r=n.createFramebuffer();f.push(r),n.bindFramebuffer(n.FRAMEBUFFER,r),n.activeTexture(n.TEXTURE0+t),n.bindTexture(n.TEXTURE_2D,e),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e,0);try{i(r)}finally{n.deleteFramebuffer(r),n.bindFramebuffer(n.FRAMEBUFFER,f[--f.length-1]||null)}},handleContextLoss:o})}t(i)}function u(e,t,n,i,r,s,l,u){void 0===l&&(l=15),void 0===u&&(u=null),c(e,(function(e){var c=e.gl,g=e.withProgram;(0,e.withTexture)("copy",(function(e,d){c.texImage2D(c.TEXTURE_2D,0,c.RGBA,r,s,0,c.RGBA,c.UNSIGNED_BYTE,t),g("copy",a,o,(function(e){var t=e.setUniform;(0,e.setAttribute)("aUV",2,c.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),t("1i","image",d),c.bindFramebuffer(c.FRAMEBUFFER,u||null),c.disable(c.BLEND),c.colorMask(8&l,4&l,2&l,1&l),c.viewport(n,i,r,s),c.scissor(n,i,r,s),c.drawArrays(c.TRIANGLES,0,3)}))}))}))}var g=Object.freeze({__proto__:null,withWebGLContext:c,renderImageData:u,resizeWebGLCanvasWithoutClearing:function(e,t,n){var i=e.width,r=e.height;c(e,(function(a){var o=a.gl,s=new Uint8Array(i*r*4);o.readPixels(0,0,i,r,o.RGBA,o.UNSIGNED_BYTE,s),e.width=t,e.height=n,u(o,s,0,0,i,r)}))}});function d(e,t,n,i,a,o){void 0===o&&(o=1);var s=new Uint8Array(e*t),l=i[2]-i[0],c=i[3]-i[1],u=[];r(n,(function(e,t,n,i){u.push({x1:e,y1:t,x2:n,y2:i,minX:Math.min(e,n),minY:Math.min(t,i),maxX:Math.max(e,n),maxY:Math.max(t,i)})})),u.sort((function(e,t){return e.maxX-t.maxX}));for(var g=0;g<e;g++)for(var d=0;d<t;d++){var h=I(i[0]+l*(g+.5)/e,i[1]+c*(d+.5)/t),f=Math.pow(1-Math.abs(h)/a,o)/2;h<0&&(f=1-f),f=Math.max(0,Math.min(255,Math.round(255*f))),s[d*e+g]=f}return s;function I(e,t){for(var n=1/0,i=1/0,r=u.length;r--;){var a=u[r];if(a.maxX+i<=e)break;if(e+i>a.minX&&t-i<a.maxY&&t+i>a.minY){var o=p(e,t,a.x1,a.y1,a.x2,a.y2);o<n&&(n=o,i=Math.sqrt(n))}}return function(e,t){for(var n=0,i=u.length;i--;){var r=u[i];if(r.maxX<=e)break;r.y1>t!==r.y2>t&&e<(r.x2-r.x1)*(t-r.y1)/(r.y2-r.y1)+r.x1&&(n+=r.y1<r.y2?1:-1)}return 0!==n}(e,t)&&(i=-i),i}}function h(e,t,n,i,r,a,o,s,l,c){void 0===a&&(a=1),void 0===s&&(s=0),void 0===l&&(l=0),void 0===c&&(c=0),f(e,t,n,i,r,a,o,null,s,l,c)}function f(e,t,n,i,r,a,o,s,l,c,g){void 0===a&&(a=1),void 0===l&&(l=0),void 0===c&&(c=0),void 0===g&&(g=0);for(var h=d(e,t,n,i,r,a),f=new Uint8Array(4*h.length),p=0;p<h.length;p++)f[4*p+g]=h[p];u(o,f,l,c,e,t,1<<3-g,s)}function p(e,t,n,i,r,a){var o=r-n,s=a-i,l=o*o+s*s,c=l?Math.max(0,Math.min(1,((e-n)*o+(t-i)*s)/l)):0,u=e-(n+c*o),g=t-(i+c*s);return u*u+g*g}var I=Object.freeze({__proto__:null,generate:d,generateIntoCanvas:h,generateIntoFramebuffer:f}),C="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",m="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",v="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",A=new Float32Array([0,0,2,0,0,2]),b=null,y=!1,G={},w=new WeakMap;function B(e){if(!y&&!k(e))throw new Error("WebGL generation not supported")}function x(e,t,n,i,r,a,o){if(void 0===a&&(a=1),void 0===o&&(o=null),!o&&!(o=b)){var s="function"===typeof OffscreenCanvas?new OffscreenCanvas(1,1):"undefined"!==typeof document?document.createElement("canvas"):null;if(!s)throw new Error("OffscreenCanvas or DOM canvas not supported");o=b=s.getContext("webgl",{depth:!1})}B(o);var l=new Uint8Array(e*t*4);c(o,(function(o){var s=o.gl,c=o.withTexture,u=o.withTextureFramebuffer;c("readable",(function(o,c){s.texImage2D(s.TEXTURE_2D,0,s.RGBA,e,t,0,s.RGBA,s.UNSIGNED_BYTE,null),u(o,c,(function(o){Z(e,t,n,i,r,a,s,o,0,0,0),s.readPixels(0,0,e,t,s.RGBA,s.UNSIGNED_BYTE,l)}))}))}));for(var u=new Uint8Array(e*t),g=0,d=0;g<l.length;g+=4)u[d++]=l[g];return u}function S(e,t,n,i,r,a,o,s,l,c){void 0===a&&(a=1),void 0===s&&(s=0),void 0===l&&(l=0),void 0===c&&(c=0),Z(e,t,n,i,r,a,o,null,s,l,c)}function Z(e,t,n,i,o,s,l,u,g,d,h){void 0===s&&(s=1),void 0===g&&(g=0),void 0===d&&(d=0),void 0===h&&(h=0),B(l);var f=[];r(n,(function(e,t,n,i){f.push(e,t,n,i)})),f=new Float32Array(f),c(l,(function(n){var r=n.gl,l=n.isWebGL2,c=n.getExtension,p=n.withProgram,I=n.withTexture,b=n.withTextureFramebuffer,y=n.handleContextLoss;if(I("rawDistances",(function(n,I){e===n._lastWidth&&t===n._lastHeight||r.texImage2D(r.TEXTURE_2D,0,r.RGBA,n._lastWidth=e,n._lastHeight=t,0,r.RGBA,r.UNSIGNED_BYTE,null),p("main",C,m,(function(a){var u=a.setAttribute,g=a.setUniform,d=!l&&c("ANGLE_instanced_arrays"),h=!l&&c("EXT_blend_minmax");u("aUV",2,r.STATIC_DRAW,0,A),u("aLineSegment",4,r.DYNAMIC_DRAW,1,f),g.apply(void 0,["4f","uGlyphBounds"].concat(i)),g("1f","uMaxDistance",o),g("1f","uExponent",s),b(n,I,(function(n){r.enable(r.BLEND),r.colorMask(!0,!0,!0,!0),r.viewport(0,0,e,t),r.scissor(0,0,e,t),r.blendFunc(r.ONE,r.ONE),r.blendEquationSeparate(r.FUNC_ADD,l?r.MAX:h.MAX_EXT),r.clear(r.COLOR_BUFFER_BIT),l?r.drawArraysInstanced(r.TRIANGLES,0,3,f.length/4):d.drawArraysInstancedANGLE(r.TRIANGLES,0,3,f.length/4)}))})),p("post",a,v,(function(n){n.setAttribute("aUV",2,r.STATIC_DRAW,0,A),n.setUniform("1i","tex",I),r.bindFramebuffer(r.FRAMEBUFFER,u),r.disable(r.BLEND),r.colorMask(0===h,1===h,2===h,3===h),r.viewport(g,d,e,t),r.scissor(g,d,e,t),r.drawArrays(r.TRIANGLES,0,3)}))})),r.isContextLost())throw y(),new Error("webgl context lost")}))}function k(e){var t=e&&e!==b?e.canvas||e:G,n=w.get(t);if(void 0===n){y=!0;var i=null;try{var r=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],a=x(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,e);n=a&&r.length===a.length&&a.every((function(e,t){return e===r[t]})),n||(i="bad trial run results",console.info(r,a))}catch(o){n=!1,i=o.message}i&&console.warn("WebGL SDF generation not supported:",i),y=!1,w.set(t,n)}return n}var R=Object.freeze({__proto__:null,generate:x,generateIntoCanvas:S,generateIntoFramebuffer:Z,isSupported:k});return e.forEachPathCommand=i,e.generate=function(e,t,n,i,r,a){void 0===r&&(r=Math.max(i[2]-i[0],i[3]-i[1])/2),void 0===a&&(a=1);try{return x.apply(R,arguments)}catch(o){return console.info("WebGL SDF generation failed, falling back to JS",o),d.apply(I,arguments)}},e.generateIntoCanvas=function(e,t,n,i,r,a,o,s,l,c){void 0===r&&(r=Math.max(i[2]-i[0],i[3]-i[1])/2),void 0===a&&(a=1),void 0===s&&(s=0),void 0===l&&(l=0),void 0===c&&(c=0);try{return S.apply(R,arguments)}catch(u){return console.info("WebGL SDF generation failed, falling back to JS",u),h.apply(I,arguments)}},e.javascript=I,e.pathToLineSegments=r,e.webgl=R,e.webglUtils=g,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return e}var R0=function(){var e=function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},n={},i={};n.L=1,i[1]="L",Object.keys(t).forEach((function(e,t){n[e]=1<<t+1,i[n[e]]=e})),Object.freeze(n);var r=n.LRI|n.RLI|n.FSI,a=n.L|n.R|n.AL,o=n.B|n.S|n.WS|n.ON|n.FSI|n.LRI|n.RLI|n.PDI,s=n.BN|n.RLE|n.LRE|n.RLO|n.LRO|n.PDF,l=n.S|n.WS|n.B|r|n.PDI|s,c=null;function u(e){return function(){if(!c){c=new Map;var e=function(e){if(t.hasOwnProperty(e)){var i=0;t[e].split(",").forEach((function(t){var r=t.split("+"),a=r[0],o=r[1];a=parseInt(a,36),o=o?parseInt(o,36):0,c.set(i+=a,n[e]);for(var s=0;s<o;s++)c.set(++i,n[e])}))}};for(var i in t)e(i)}}(),c.get(e.codePointAt(0))||n.L}var g,d,h,f={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function p(e,t){var n,i=0,r=new Map,a=t&&new Map;return e.split(",").forEach((function e(o){if(-1!==o.indexOf("+"))for(var s=+o;s--;)e(n);else{n=o;var l=o.split(">"),c=l[0],u=l[1];c=String.fromCodePoint(i+=parseInt(c,36)),u=String.fromCodePoint(i+=parseInt(u,36)),r.set(c,u),t&&a.set(u,c)}})),{map:r,reverseMap:a}}function I(){if(!g){var e=p(f.pairs,!0),t=e.map,n=e.reverseMap;g=t,d=n,h=p(f.canonical,!1).map}}function C(e){return I(),g.get(e)||null}function m(e){return I(),d.get(e)||null}function v(e){return I(),h.get(e)||null}var A=n.L,b=n.R,y=n.EN,G=n.ES,w=n.ET,B=n.AN,x=n.CS,S=n.B,Z=n.S,k=n.ON,R=n.BN,W=n.NSM,M=n.AL,V=n.LRO,F=n.RLO,N=n.LRE,H=n.RLE,T=n.PDF,X=n.LRI,Y=n.RLI,E=n.FSI,z=n.PDI;var L,K="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1";function _(e){return function(){if(!L){var e=p(K,!0),t=e.map;e.reverseMap.forEach((function(e,n){t.set(n,e)})),L=t}}(),L.get(e)||null}function P(e,t,n,i){var r=e.length;n=Math.max(0,null==n?0:+n),i=Math.min(r-1,null==i?r-1:+i);var a=[];return t.paragraphs.forEach((function(r){var o=Math.max(n,r.start),s=Math.min(i,r.end);if(o<s){for(var c=t.levels.slice(o,s+1),g=s;g>=o&&u(e[g])&l;g--)c[g]=r.level;for(var d=r.level,h=1/0,f=0;f<c.length;f++){var p=c[f];p>d&&(d=p),p<h&&(h=1|p)}for(var I=d;I>=h;I--)for(var C=0;C<c.length;C++)if(c[C]>=I){for(var m=C;C+1<c.length&&c[C+1]>=I;)C++;C>m&&a.push([m+n,C+n])}}})),a}function D(e,t,n,i){for(var r=P(e,t,n,i),a=[],o=0;o<e.length;o++)a[o]=o;return r.forEach((function(e){for(var t=e[0],n=e[1],i=a.slice(t,n+1),r=i.length;r--;)a[n-r]=i[r]})),a}return e.closingToOpeningBracket=m,e.getBidiCharType=u,e.getBidiCharTypeName=function(e){return i[u(e)]},e.getCanonicalBracket=v,e.getEmbeddingLevels=function(e,t){for(var n=new Uint32Array(e.length),i=0;i<e.length;i++)n[i]=u(e[i]);var c=new Map;function g(e,t){var i=n[e];n[e]=t,c.set(i,c.get(i)-1),i&o&&c.set(o,c.get(o)-1),c.set(t,(c.get(t)||0)+1),t&o&&c.set(o,(c.get(o)||0)+1)}for(var d=new Uint8Array(e.length),h=new Map,f=[],p=null,I=0;I<e.length;I++)p||f.push(p={start:I,end:e.length-1,level:"rtl"===t?1:"ltr"===t?0:zt(I,!1)}),n[I]&S&&(p.end=I,p=null);for(var L=H|N|F|V|r|z|T|S,K=function(e){return e+(1&e?1:2)},_=function(e){return e+(1&e?2:1)},P=0;P<f.length;P++){var D=[{_level:(p=f[P]).level,_override:0,_isolate:0}],O=void 0,U=0,j=0,J=0;c.clear();for(var Q=p.start;Q<=p.end;Q++){var q=n[Q];if(O=D[D.length-1],c.set(q,(c.get(q)||0)+1),q&o&&c.set(o,(c.get(o)||0)+1),q&L)if(q&(H|N)){d[Q]=O._level;var $=(q===H?_:K)(O._level);$<=125&&!U&&!j?D.push({_level:$,_override:0,_isolate:0}):U||j++}else if(q&(F|V)){d[Q]=O._level;var ee=(q===F?_:K)(O._level);ee<=125&&!U&&!j?D.push({_level:ee,_override:q&F?b:A,_isolate:0}):U||j++}else if(q&r){q&E&&(q=1===zt(Q+1,!0)?Y:X),d[Q]=O._level,O._override&&g(Q,O._override);var te=(q===Y?_:K)(O._level);te<=125&&0===U&&0===j?(J++,D.push({_level:te,_override:0,_isolate:1,_isolInitIndex:Q})):U++}else if(q&z){if(U>0)U--;else if(J>0){for(j=0;!D[D.length-1]._isolate;)D.pop();var ne=D[D.length-1]._isolInitIndex;null!=ne&&(h.set(ne,Q),h.set(Q,ne)),D.pop(),J--}O=D[D.length-1],d[Q]=O._level,O._override&&g(Q,O._override)}else q&T?(0===U&&(j>0?j--:!O._isolate&&D.length>1&&(D.pop(),O=D[D.length-1])),d[Q]=O._level):q&S&&(d[Q]=p.level);else d[Q]=O._level,O._override&&q!==R&&g(Q,O._override)}for(var ie=[],re=null,ae=p.start;ae<=p.end;ae++){var oe=n[ae];if(!(oe&s)){var se=d[ae],le=oe&r,ce=oe===z;re&&se===re._level?(re._end=ae,re._endsWithIsolInit=le):ie.push(re={_start:ae,_end:ae,_level:se,_startsWithPDI:ce,_endsWithIsolInit:le})}}for(var ue=[],ge=0;ge<ie.length;ge++){var de=ie[ge];if(!de._startsWithPDI||de._startsWithPDI&&!h.has(de._start)){for(var he=[re=de],fe=void 0;re&&re._endsWithIsolInit&&null!=(fe=h.get(re._end));)for(var pe=ge+1;pe<ie.length;pe++)if(ie[pe]._start===fe){he.push(re=ie[pe]);break}for(var Ie=[],Ce=0;Ce<he.length;Ce++)for(var me=he[Ce],ve=me._start;ve<=me._end;ve++)Ie.push(ve);for(var Ae=d[Ie[0]],be=p.level,ye=Ie[0]-1;ye>=0;ye--)if(!(n[ye]&s)){be=d[ye];break}var Ge=Ie[Ie.length-1],we=d[Ge],Be=p.level;if(!(n[Ge]&r))for(var xe=Ge+1;xe<=p.end;xe++)if(!(n[xe]&s)){Be=d[xe];break}ue.push({_seqIndices:Ie,_sosType:Math.max(be,Ae)%2?b:A,_eosType:Math.max(Be,we)%2?b:A})}}for(var Se=0;Se<ue.length;Se++){var Ze=ue[Se],ke=Ze._seqIndices,Re=Ze._sosType,We=Ze._eosType;if(c.get(W))for(var Me=0;Me<ke.length;Me++){var Ve=ke[Me];if(n[Ve]&W){for(var Fe=Re,Ne=Me-1;Ne>=0;Ne--)if(!(n[ke[Ne]]&s)){Fe=n[ke[Ne]];break}g(Ve,Fe&(r|z)?k:Fe)}}if(c.get(y))for(var He=0;He<ke.length;He++){var Te=ke[He];if(n[Te]&y)for(var Xe=He-1;Xe>=-1;Xe--){var Ye=-1===Xe?Re:n[ke[Xe]];if(Ye&a){Ye===M&&g(Te,B);break}}}if(c.get(M))for(var Ee=0;Ee<ke.length;Ee++){var ze=ke[Ee];n[ze]&M&&g(ze,b)}if(c.get(G)||c.get(x))for(var Le=1;Le<ke.length-1;Le++){var Ke=ke[Le];if(n[Ke]&(G|x)){for(var _e=0,Pe=0,De=Le-1;De>=0&&(_e=n[ke[De]])&s;De--);for(var Oe=Le+1;Oe<ke.length&&(Pe=n[ke[Oe]])&s;Oe++);_e===Pe&&(n[Ke]===G?_e===y:_e&(y|B))&&g(Ke,_e)}}if(c.get(y))for(var Ue=0;Ue<ke.length;Ue++){var je=ke[Ue];if(n[je]&y){for(var Je=Ue-1;Je>=0&&n[ke[Je]]&(w|s);Je--)g(ke[Je],y);for(var Qe=Ue+1;Qe<ke.length&&n[ke[Qe]]&(w|s);Qe++)g(ke[Qe],y)}}if(c.get(w)||c.get(G)||c.get(x))for(var qe=0;qe<ke.length;qe++){var $e=ke[qe];if(n[$e]&(w|G|x)){g($e,k);for(var et=qe-1;et>=0&&n[ke[et]]&s;et--)g(ke[et],k);for(var tt=qe+1;tt<ke.length&&n[ke[tt]]&s;tt++)g(ke[tt],k)}}if(c.get(y))for(var nt=0,it=Re;nt<ke.length;nt++){var rt=ke[nt],at=n[rt];at&y?it===A&&g(rt,A):at&a&&(it=at)}if(c.get(o)){for(var ot=b|y|B,st=ot|A,lt=[],ct=[],ut=0;ut<ke.length;ut++)if(n[ke[ut]]&o){var gt=e[ke[ut]],dt=void 0;if(null!==C(gt)){if(!(ct.length<63))break;ct.push({char:gt,seqIndex:ut})}else if(null!==(dt=m(gt)))for(var ht=ct.length-1;ht>=0;ht--){var ft=ct[ht].char;if(ft===dt||ft===m(v(gt))||C(v(ft))===gt){lt.push([ct[ht].seqIndex,ut]),ct.length=ht;break}}}lt.sort((function(e,t){return e[0]-t[0]}));for(var pt=0;pt<lt.length;pt++){for(var It=lt[pt],Ct=It[0],mt=It[1],vt=!1,At=0,bt=Ct+1;bt<mt;bt++){var yt=ke[bt];if(n[yt]&st){vt=!0;var Gt=n[yt]&ot?b:A;if(Gt===Kt(yt)){At=Gt;break}}}if(vt&&!At){At=Re;for(var wt=Ct-1;wt>=0;wt--){var Bt=ke[wt];if(n[Bt]&st){var xt=n[Bt]&ot?b:A;At=xt!==Kt(Bt)?xt:Kt(Bt);break}}}if(At){if(n[ke[Ct]]=n[ke[mt]]=At,At!==Kt(ke[Ct]))for(var St=Ct+1;St<ke.length;St++)if(!(n[ke[St]]&s)){u(e[ke[St]])&W&&(n[ke[St]]=At);break}if(At!==Kt(ke[mt]))for(var Zt=mt+1;Zt<ke.length;Zt++)if(!(n[ke[Zt]]&s)){u(e[ke[Zt]])&W&&(n[ke[Zt]]=At);break}}}for(var kt=0;kt<ke.length;kt++)if(n[ke[kt]]&o){for(var Rt=kt,Wt=kt,Mt=Re,Vt=kt-1;Vt>=0;Vt--){if(!(n[ke[Vt]]&s)){Mt=n[ke[Vt]]&ot?b:A;break}Rt=Vt}for(var Ft=We,Nt=kt+1;Nt<ke.length;Nt++){if(!(n[ke[Nt]]&(o|s))){Ft=n[ke[Nt]]&ot?b:A;break}Wt=Nt}for(var Ht=Rt;Ht<=Wt;Ht++)n[ke[Ht]]=Mt===Ft?Mt:Kt(ke[Ht]);kt=Wt}}}for(var Tt=p.start;Tt<=p.end;Tt++){var Xt=d[Tt],Yt=n[Tt];if(1&Xt?Yt&(A|y|B)&&d[Tt]++:Yt&b?d[Tt]++:Yt&(B|y)&&(d[Tt]+=2),Yt&s&&(d[Tt]=0===Tt?p.level:d[Tt-1]),Tt===p.end||u(e[Tt])&(Z|S))for(var Et=Tt;Et>=0&&u(e[Et])&l;Et--)d[Et]=p.level}}return{levels:d,paragraphs:f};function zt(t,i){for(var a=t;a<e.length;a++){var o=n[a];if(o&(b|M))return 1;if(o&(S|A)||i&&o===z)return 0;if(o&r){var s=Lt(a);a=-1===s?e.length:s}}return 0}function Lt(t){for(var i=1,a=t+1;a<e.length;a++){var o=n[a];if(o&S)break;if(o&z){if(0===--i)return a}else o&r&&i++}return-1}function Kt(e){return 1&d[e]?b:A}},e.getMirroredCharacter=_,e.getMirroredCharactersMap=function(e,t,n,i){var r=e.length;n=Math.max(0,null==n?0:+n),i=Math.min(r-1,null==i?r-1:+i);for(var a=new Map,o=n;o<=i;o++)if(1&t[o]){var s=_(e[o]);null!==s&&a.set(o,s)}return a},e.getReorderSegments=P,e.getReorderedIndices=D,e.getReorderedString=function(e,t,n,i){var r=D(e,t,n,i),a=[].concat(e);return r.forEach((function(n,i){a[i]=(1&t.levels[n]?_(e[n]):null)||e[n]})),a.join("")},e.openingToClosingBracket=C,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return e},W0=/\bvoid\s+main\s*\(\s*\)\s*{/g;function M0(e){return e.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,(function(e,t){var n=ZI[t];return n?M0(n):e}))}for(var V0=[],F0=0;F0<256;F0++)V0[F0]=(F0<16?"0":"")+F0.toString(16);var N0=Object.assign||function(){for(var e=arguments[0],t=1,n=arguments.length;t<n;t++){var i=arguments[t];if(i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},H0=Date.now(),T0=new WeakMap,X0=new Map,Y0=1e10;function E0(e,t){var n=function(e){var t=JSON.stringify(e,L0),n=_0.get(t);null==n&&_0.set(t,n=++K0);return n}(t),i=T0.get(e);if(i||T0.set(e,i=Object.create(null)),i[n])return new i[n];var r="_onBeforeCompile".concat(n),a=function(i,a){e.onBeforeCompile.call(this,i,a);var o=this.customProgramCacheKey()+"|"+i.vertexShader+"|"+i.fragmentShader,s=X0[o];if(!s){var l=function(e,t,n,i){var r=t.vertexShader,a=t.fragmentShader,o=n.vertexDefs,s=n.vertexMainIntro,l=n.vertexMainOutro,c=n.vertexTransform,u=n.fragmentDefs,g=n.fragmentMainIntro,d=n.fragmentMainOutro,h=n.fragmentColorTransform,f=n.customRewriter,p=n.timeUniform;o=o||"",s=s||"",l=l||"",u=u||"",g=g||"",d=d||"",(c||f)&&(r=M0(r));(h||f)&&(a=M0(a=a.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,"\n//!BEGIN_POST_CHUNK $1\n$&\n//!END_POST_CHUNK\n")));if(f){var I=f({vertexShader:r,fragmentShader:a});r=I.vertexShader,a=I.fragmentShader}if(h){var C=[];a=a.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,(function(e){return C.push(e),""})),d="".concat(h,"\n").concat(C.join("\n"),"\n").concat(d)}if(p){var m="\nuniform float ".concat(p,";\n");o=m+o,u=m+u}c&&(r="vec3 troika_position_".concat(i,";\nvec3 troika_normal_").concat(i,";\nvec2 troika_uv_").concat(i,";\n").concat(r,"\n"),o="".concat(o,"\nvoid troikaVertexTransform").concat(i,"(inout vec3 position, inout vec3 normal, inout vec2 uv) {\n  ").concat(c,"\n}\n"),s="\ntroika_position_".concat(i," = vec3(position);\ntroika_normal_").concat(i," = vec3(normal);\ntroika_uv_").concat(i," = vec2(uv);\ntroikaVertexTransform").concat(i,"(troika_position_").concat(i,", troika_normal_").concat(i,", troika_uv_").concat(i,");\n").concat(s,"\n"),r=r.replace(/\b(position|normal|uv)\b/g,(function(e,t,n,r){return/\battribute\s+vec[23]\s+$/.test(r.substr(0,n))?t:"troika_".concat(t,"_").concat(i)})),e.map&&e.map.channel>0||(r=r.replace(/\bMAP_UV\b/g,"troika_uv_".concat(i))));return r=z0(r,i,o,s,l),a=z0(a,i,u,g,d),{vertexShader:r,fragmentShader:a}}(this,i,t,n);s=X0[o]=l}i.vertexShader=s.vertexShader,i.fragmentShader=s.fragmentShader,N0(i.uniforms,this.uniforms),t.timeUniform&&(i.uniforms[t.timeUniform]={get value(){return Date.now()-H0}}),this[r]&&this[r](i)},o=function(){return s(t.chained?e:e.clone())},s=function(i){var r=Object.create(i,l);return Object.defineProperty(r,"baseMaterial",{value:e}),Object.defineProperty(r,"id",{value:Y0++}),r.uuid=function(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(V0[255&e]+V0[e>>8&255]+V0[e>>16&255]+V0[e>>24&255]+"-"+V0[255&t]+V0[t>>8&255]+"-"+V0[t>>16&15|64]+V0[t>>24&255]+"-"+V0[63&n|128]+V0[n>>8&255]+"-"+V0[n>>16&255]+V0[n>>24&255]+V0[255&i]+V0[i>>8&255]+V0[i>>16&255]+V0[i>>24&255]).toUpperCase()}(),r.uniforms=N0({},i.uniforms,t.uniforms),r.defines=N0({},i.defines,t.defines),r.defines["TROIKA_DERIVED_MATERIAL_".concat(n)]="",r.extensions=N0({},i.extensions,t.extensions),r._listeners=void 0,r},l={constructor:{value:o},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return e.customProgramCacheKey()+"|"+n}},onBeforeCompile:{get:function(){return a},set:function(e){this[r]=e}},copy:{writable:!0,configurable:!0,value:function(t){return e.copy.call(this,t),e.isShaderMaterial||e.isDerivedMaterial||(N0(this.extensions,t.extensions),N0(this.defines,t.defines),N0(this.uniforms,uI.clone(t.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){var t=new e.constructor;return s(t).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){var n=this._depthMaterial;return n||((n=this._depthMaterial=E0(e.isDerivedMaterial?e.getDepthMaterial():new Lm({depthPacking:bd}),t)).defines.IS_DEPTH_MATERIAL="",n.uniforms=this.uniforms),n}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){var n=this._distanceMaterial;return n||((n=this._distanceMaterial=E0(e.isDerivedMaterial?e.getDistanceMaterial():new Km,t)).defines.IS_DISTANCE_MATERIAL="",n.uniforms=this.uniforms),n}},dispose:{writable:!0,configurable:!0,value:function(){var t=this._depthMaterial,n=this._distanceMaterial;t&&t.dispose(),n&&n.dispose(),e.dispose.call(this)}}};return i[n]=o,new o}function z0(e,t,n,i,r){return(i||r||n)&&(e=e.replace(W0,"\n".concat(n,"\nvoid troikaOrigMain").concat(t,"() {")),e+="\nvoid main() {\n  ".concat(i,"\n  troikaOrigMain").concat(t,"();\n  ").concat(r,"\n}")),e}function L0(e,t){return"uniforms"===e?void 0:"function"===typeof t?t.toString():t}var K0=0,_0=new Map;var P0,D0=function(){return(self.performance||Date).now()},O0=k0();var U0=[],j0=0;function J0(){for(var e=D0();U0.length&&D0()-e<5;)U0.shift()();j0=U0.length?setTimeout(J0,0):0}var Q0=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Promise((function(e,n){U0.push((function(){var i=D0();try{var r;(r=O0.webgl).generateIntoCanvas.apply(r,t),e({timing:D0()-i})}catch(a){n(a)}})),j0||(j0=setTimeout(J0,0))}))},q0=4,$0=2e3,e1={},t1=0;function n1(e,t,n,i,r,a,o,s,l,c){var u="TroikaTextSDFGenerator_JS_"+t1++%q0,g=e1[u];return g||(g=e1[u]={workerModule:x0({name:u,workerId:u,dependencies:[k0,D0],init:function(e,t){var n=e().javascript.generate;return function(){var e=t();return{textureData:n.apply(void 0,arguments),timing:t()-e}}},getTransferables:function(e){return[e.textureData.buffer]}}),requests:0,idleTimer:null}),g.requests++,clearTimeout(g.idleTimer),g.workerModule(e,t,n,i,r,a).then((function(n){for(var i=n.textureData,r=n.timing,a=D0(),d=new Uint8Array(4*i.length),h=0;h<i.length;h++)d[4*h+c]=i[h];return O0.webglUtils.renderImageData(o,d,s,l,e,t,1<<3-c),r+=D0()-a,0===--g.requests&&(g.idleTimer=setTimeout((function(){!function(e){w0[e]&&w0[e].forEach((function(e){e()})),G0[e]&&(G0[e].terminate(),delete G0[e])}(u)}),$0)),{timing:r}}))}var i1=O0.webglUtils.resizeWebGLCanvasWithoutClearing;var r1=x0({name:"Typr Font Parser",dependencies:[function(){return"undefined"==typeof window&&(self.window=self),function(e){var t={parse:function(e){var n=t._bin,i=new Uint8Array(e);if("ttcf"==n.readASCII(i,0,4)){var r=4;n.readUshort(i,r),r+=2,n.readUshort(i,r),r+=2;var a=n.readUint(i,r);r+=4;for(var o=[],s=0;s<a;s++){var l=n.readUint(i,r);r+=4,o.push(t._readFont(i,l))}return o}return[t._readFont(i,0)]},_readFont:function(e,n){var i=t._bin,r=n;i.readFixed(e,n),n+=4;var a=i.readUshort(e,n);n+=2,i.readUshort(e,n),n+=2,i.readUshort(e,n),n+=2,i.readUshort(e,n),n+=2;for(var o=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],s={_data:e,_offset:r},l={},c=0;c<a;c++){var u=i.readASCII(e,n,4);n+=4,i.readUint(e,n),n+=4;var g=i.readUint(e,n);n+=4;var d=i.readUint(e,n);n+=4,l[u]={offset:g,length:d}}for(c=0;c<o.length;c++){var h=o[c];l[h]&&(s[h.trim()]=t[h.trim()].parse(e,l[h].offset,l[h].length,s))}return s},_tabOffset:function(e,n,i){for(var r=t._bin,a=r.readUshort(e,i+4),o=i+12,s=0;s<a;s++){var l=r.readASCII(e,o,4);o+=4,r.readUint(e,o),o+=4;var c=r.readUint(e,o);if(o+=4,r.readUint(e,o),o+=4,l==n)return c}return 0}};t._bin={readFixed:function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<8|e[t+3])/65540},readF2dot14:function(e,n){return t._bin.readShort(e,n)/16384},readInt:function(e,n){return t._bin._view(e).getInt32(n)},readInt8:function(e,n){return t._bin._view(e).getInt8(n)},readShort:function(e,n){return t._bin._view(e).getInt16(n)},readUshort:function(e,n){return t._bin._view(e).getUint16(n)},readUshorts:function(e,n,i){for(var r=[],a=0;a<i;a++)r.push(t._bin.readUshort(e,n+2*a));return r},readUint:function(e,n){return t._bin._view(e).getUint32(n)},readUint64:function(e,n){return 4294967296*t._bin.readUint(e,n)+t._bin.readUint(e,n+4)},readASCII:function(e,t,n){for(var i="",r=0;r<n;r++)i+=String.fromCharCode(e[t+r]);return i},readUnicode:function(e,t,n){for(var i="",r=0;r<n;r++){var a=e[t++]<<8|e[t++];i+=String.fromCharCode(a)}return i},_tdec:"undefined"!=typeof window&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(e,n,i){var r=t._bin._tdec;return r&&0==n&&i==e.length?r.decode(e):t._bin.readASCII(e,n,i)},readBytes:function(e,t,n){for(var i=[],r=0;r<n;r++)i.push(e[t+r]);return i},readASCIIArray:function(e,t,n){for(var i=[],r=0;r<n;r++)i.push(String.fromCharCode(e[t+r]));return i},_view:function(e){return e._dataView||(e._dataView=e.buffer?new DataView(e.buffer,e.byteOffset,e.byteLength):new DataView(new Uint8Array(e).buffer))}},t._lctf={},t._lctf.parse=function(e,n,i,r,a){var o=t._bin,s={},l=n;o.readFixed(e,n),n+=4;var c=o.readUshort(e,n);n+=2;var u=o.readUshort(e,n);n+=2;var g=o.readUshort(e,n);return n+=2,s.scriptList=t._lctf.readScriptList(e,l+c),s.featureList=t._lctf.readFeatureList(e,l+u),s.lookupList=t._lctf.readLookupList(e,l+g,a),s},t._lctf.readLookupList=function(e,n,i){var r=t._bin,a=n,o=[],s=r.readUshort(e,n);n+=2;for(var l=0;l<s;l++){var c=r.readUshort(e,n);n+=2;var u=t._lctf.readLookupTable(e,a+c,i);o.push(u)}return o},t._lctf.readLookupTable=function(e,n,i){var r=t._bin,a=n,o={tabs:[]};o.ltype=r.readUshort(e,n),n+=2,o.flag=r.readUshort(e,n),n+=2;var s=r.readUshort(e,n);n+=2;for(var l=o.ltype,c=0;c<s;c++){var u=r.readUshort(e,n);n+=2;var g=i(e,l,a+u,o);o.tabs.push(g)}return o},t._lctf.numOfOnes=function(e){for(var t=0,n=0;n<32;n++)0!=(e>>>n&1)&&t++;return t},t._lctf.readClassDef=function(e,n){var i=t._bin,r=[],a=i.readUshort(e,n);if(n+=2,1==a){var o=i.readUshort(e,n);n+=2;var s=i.readUshort(e,n);n+=2;for(var l=0;l<s;l++)r.push(o+l),r.push(o+l),r.push(i.readUshort(e,n)),n+=2}if(2==a){var c=i.readUshort(e,n);for(n+=2,l=0;l<c;l++)r.push(i.readUshort(e,n)),n+=2,r.push(i.readUshort(e,n)),n+=2,r.push(i.readUshort(e,n)),n+=2}return r},t._lctf.getInterval=function(e,t){for(var n=0;n<e.length;n+=3){var i=e[n],r=e[n+1];if(e[n+2],i<=t&&t<=r)return n}return-1},t._lctf.readCoverage=function(e,n){var i=t._bin,r={};r.fmt=i.readUshort(e,n),n+=2;var a=i.readUshort(e,n);return n+=2,1==r.fmt&&(r.tab=i.readUshorts(e,n,a)),2==r.fmt&&(r.tab=i.readUshorts(e,n,3*a)),r},t._lctf.coverageIndex=function(e,n){var i=e.tab;if(1==e.fmt)return i.indexOf(n);if(2==e.fmt){var r=t._lctf.getInterval(i,n);if(-1!=r)return i[r+2]+(n-i[r])}return-1},t._lctf.readFeatureList=function(e,n){var i=t._bin,r=n,a=[],o=i.readUshort(e,n);n+=2;for(var s=0;s<o;s++){var l=i.readASCII(e,n,4);n+=4;var c=i.readUshort(e,n);n+=2;var u=t._lctf.readFeatureTable(e,r+c);u.tag=l.trim(),a.push(u)}return a},t._lctf.readFeatureTable=function(e,n){var i=t._bin,r=n,a={},o=i.readUshort(e,n);n+=2,o>0&&(a.featureParams=r+o);var s=i.readUshort(e,n);n+=2,a.tab=[];for(var l=0;l<s;l++)a.tab.push(i.readUshort(e,n+2*l));return a},t._lctf.readScriptList=function(e,n){var i=t._bin,r=n,a={},o=i.readUshort(e,n);n+=2;for(var s=0;s<o;s++){var l=i.readASCII(e,n,4);n+=4;var c=i.readUshort(e,n);n+=2,a[l.trim()]=t._lctf.readScriptTable(e,r+c)}return a},t._lctf.readScriptTable=function(e,n){var i=t._bin,r=n,a={},o=i.readUshort(e,n);n+=2,a.default=t._lctf.readLangSysTable(e,r+o);var s=i.readUshort(e,n);n+=2;for(var l=0;l<s;l++){var c=i.readASCII(e,n,4);n+=4;var u=i.readUshort(e,n);n+=2,a[c.trim()]=t._lctf.readLangSysTable(e,r+u)}return a},t._lctf.readLangSysTable=function(e,n){var i=t._bin,r={};i.readUshort(e,n),n+=2,r.reqFeature=i.readUshort(e,n),n+=2;var a=i.readUshort(e,n);return n+=2,r.features=i.readUshorts(e,n,a),r},t.CFF={},t.CFF.parse=function(e,n,i){var r=t._bin;(e=new Uint8Array(e.buffer,n,i))[n=0],e[++n],e[++n],e[++n],n++;var a=[];n=t.CFF.readIndex(e,n,a);for(var o=[],s=0;s<a.length-1;s++)o.push(r.readASCII(e,n+a[s],a[s+1]-a[s]));n+=a[a.length-1];var l=[];n=t.CFF.readIndex(e,n,l);var c=[];for(s=0;s<l.length-1;s++)c.push(t.CFF.readDict(e,n+l[s],n+l[s+1]));n+=l[l.length-1];var u=c[0],g=[];n=t.CFF.readIndex(e,n,g);var d=[];for(s=0;s<g.length-1;s++)d.push(r.readASCII(e,n+g[s],g[s+1]-g[s]));if(n+=g[g.length-1],t.CFF.readSubrs(e,n,u),u.CharStrings){n=u.CharStrings,g=[],n=t.CFF.readIndex(e,n,g);var h=[];for(s=0;s<g.length-1;s++)h.push(r.readBytes(e,n+g[s],g[s+1]-g[s]));u.CharStrings=h}if(u.ROS){n=u.FDArray;var f=[];for(n=t.CFF.readIndex(e,n,f),u.FDArray=[],s=0;s<f.length-1;s++){var p=t.CFF.readDict(e,n+f[s],n+f[s+1]);t.CFF._readFDict(e,p,d),u.FDArray.push(p)}n+=f[f.length-1],n=u.FDSelect,u.FDSelect=[];var I=e[n];if(n++,3!=I)throw I;var C=r.readUshort(e,n);for(n+=2,s=0;s<C+1;s++)u.FDSelect.push(r.readUshort(e,n),e[n+2]),n+=3}return u.Encoding&&(u.Encoding=t.CFF.readEncoding(e,u.Encoding,u.CharStrings.length)),u.charset&&(u.charset=t.CFF.readCharset(e,u.charset,u.CharStrings.length)),t.CFF._readFDict(e,u,d),u},t.CFF._readFDict=function(e,n,i){var r;for(var a in n.Private&&(r=n.Private[1],n.Private=t.CFF.readDict(e,r,r+n.Private[0]),n.Private.Subrs&&t.CFF.readSubrs(e,r+n.Private.Subrs,n.Private)),n)-1!=["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(a)&&(n[a]=i[n[a]-426+35])},t.CFF.readSubrs=function(e,n,i){var r=t._bin,a=[];n=t.CFF.readIndex(e,n,a);var o,s=a.length;o=s<1240?107:s<33900?1131:32768,i.Bias=o,i.Subrs=[];for(var l=0;l<a.length-1;l++)i.Subrs.push(r.readBytes(e,n+a[l],a[l+1]-a[l]))},t.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],t.CFF.glyphByUnicode=function(e,t){for(var n=0;n<e.charset.length;n++)if(e.charset[n]==t)return n;return-1},t.CFF.glyphBySE=function(e,n){return n<0||n>255?-1:t.CFF.glyphByUnicode(e,t.CFF.tableSE[n])},t.CFF.readEncoding=function(e,n,i){t._bin;var r=[".notdef"],a=e[n];if(n++,0!=a)throw"error: unknown encoding format: "+a;var o=e[n];n++;for(var s=0;s<o;s++)r.push(e[n+s]);return r},t.CFF.readCharset=function(e,n,i){var r=t._bin,a=[".notdef"],o=e[n];if(n++,0==o)for(var s=0;s<i;s++){var l=r.readUshort(e,n);n+=2,a.push(l)}else{if(1!=o&&2!=o)throw"error: format: "+o;for(;a.length<i;){l=r.readUshort(e,n),n+=2;var c=0;for(1==o?(c=e[n],n++):(c=r.readUshort(e,n),n+=2),s=0;s<=c;s++)a.push(l),l++}}return a},t.CFF.readIndex=function(e,n,i){var r=t._bin,a=r.readUshort(e,n)+1,o=e[n+=2];if(n++,1==o)for(var s=0;s<a;s++)i.push(e[n+s]);else if(2==o)for(s=0;s<a;s++)i.push(r.readUshort(e,n+2*s));else if(3==o)for(s=0;s<a;s++)i.push(16777215&r.readUint(e,n+3*s-1));else if(1!=a)throw"unsupported offset size: "+o+", count: "+a;return(n+=a*o)-1},t.CFF.getCharString=function(e,n,i){var r=t._bin,a=e[n],o=e[n+1];e[n+2],e[n+3],e[n+4];var s=1,l=null,c=null;a<=20&&(l=a,s=1),12==a&&(l=100*a+o,s=2),21<=a&&a<=27&&(l=a,s=1),28==a&&(c=r.readShort(e,n+1),s=3),29<=a&&a<=31&&(l=a,s=1),32<=a&&a<=246&&(c=a-139,s=1),247<=a&&a<=250&&(c=256*(a-247)+o+108,s=2),251<=a&&a<=254&&(c=256*-(a-251)-o-108,s=2),255==a&&(c=r.readInt(e,n+1)/65535,s=5),i.val=null!=c?c:"o"+l,i.size=s},t.CFF.readCharString=function(e,n,i){for(var r=n+i,a=t._bin,o=[];n<r;){var s=e[n],l=e[n+1];e[n+2],e[n+3],e[n+4];var c=1,u=null,g=null;s<=20&&(u=s,c=1),12==s&&(u=100*s+l,c=2),19!=s&&20!=s||(u=s,c=2),21<=s&&s<=27&&(u=s,c=1),28==s&&(g=a.readShort(e,n+1),c=3),29<=s&&s<=31&&(u=s,c=1),32<=s&&s<=246&&(g=s-139,c=1),247<=s&&s<=250&&(g=256*(s-247)+l+108,c=2),251<=s&&s<=254&&(g=256*-(s-251)-l-108,c=2),255==s&&(g=a.readInt(e,n+1)/65535,c=5),o.push(null!=g?g:"o"+u),n+=c}return o},t.CFF.readDict=function(e,n,i){for(var r=t._bin,a={},o=[];n<i;){var s=e[n],l=e[n+1];e[n+2],e[n+3],e[n+4];var c=1,u=null,g=null;if(28==s&&(g=r.readShort(e,n+1),c=3),29==s&&(g=r.readInt(e,n+1),c=5),32<=s&&s<=246&&(g=s-139,c=1),247<=s&&s<=250&&(g=256*(s-247)+l+108,c=2),251<=s&&s<=254&&(g=256*-(s-251)-l-108,c=2),255==s)throw g=r.readInt(e,n+1)/65535,c=5,"unknown number";if(30==s){var d=[];for(c=1;;){var h=e[n+c];c++;var f=h>>4,p=15&h;if(15!=f&&d.push(f),15!=p&&d.push(p),15==p)break}for(var I="",C=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],m=0;m<d.length;m++)I+=C[d[m]];g=parseFloat(I)}s<=21&&(u=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][s],c=1,12==s&&(u=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][l],c=2)),null!=u?(a[u]=1==o.length?o[0]:o,o=[]):o.push(g),n+=c}return a},t.cmap={},t.cmap.parse=function(e,n,i){e=new Uint8Array(e.buffer,n,i),n=0;var r=t._bin,a={};r.readUshort(e,n),n+=2;var o=r.readUshort(e,n);n+=2;var s=[];a.tables=[];for(var l=0;l<o;l++){var c=r.readUshort(e,n);n+=2;var u=r.readUshort(e,n);n+=2;var g=r.readUint(e,n);n+=4;var d="p"+c+"e"+u,h=s.indexOf(g);if(-1==h){var f;h=a.tables.length,s.push(g);var p=r.readUshort(e,g);0==p?f=t.cmap.parse0(e,g):4==p?f=t.cmap.parse4(e,g):6==p?f=t.cmap.parse6(e,g):12==p?f=t.cmap.parse12(e,g):console.debug("unknown format: "+p,c,u,g),a.tables.push(f)}if(null!=a[d])throw"multiple tables for one platform+encoding";a[d]=h}return a},t.cmap.parse0=function(e,n){var i=t._bin,r={};r.format=i.readUshort(e,n),n+=2;var a=i.readUshort(e,n);n+=2,i.readUshort(e,n),n+=2,r.map=[];for(var o=0;o<a-6;o++)r.map.push(e[n+o]);return r},t.cmap.parse4=function(e,n){var i=t._bin,r=n,a={};a.format=i.readUshort(e,n),n+=2;var o=i.readUshort(e,n);n+=2,i.readUshort(e,n),n+=2;var s=i.readUshort(e,n);n+=2;var l=s/2;a.searchRange=i.readUshort(e,n),n+=2,a.entrySelector=i.readUshort(e,n),n+=2,a.rangeShift=i.readUshort(e,n),n+=2,a.endCount=i.readUshorts(e,n,l),n+=2*l,n+=2,a.startCount=i.readUshorts(e,n,l),n+=2*l,a.idDelta=[];for(var c=0;c<l;c++)a.idDelta.push(i.readShort(e,n)),n+=2;for(a.idRangeOffset=i.readUshorts(e,n,l),n+=2*l,a.glyphIdArray=[];n<r+o;)a.glyphIdArray.push(i.readUshort(e,n)),n+=2;return a},t.cmap.parse6=function(e,n){var i=t._bin,r={};r.format=i.readUshort(e,n),n+=2,i.readUshort(e,n),n+=2,i.readUshort(e,n),n+=2,r.firstCode=i.readUshort(e,n),n+=2;var a=i.readUshort(e,n);n+=2,r.glyphIdArray=[];for(var o=0;o<a;o++)r.glyphIdArray.push(i.readUshort(e,n)),n+=2;return r},t.cmap.parse12=function(e,n){var i=t._bin,r={};r.format=i.readUshort(e,n),n+=2,n+=2,i.readUint(e,n),n+=4,i.readUint(e,n),n+=4;var a=i.readUint(e,n);n+=4,r.groups=[];for(var o=0;o<a;o++){var s=n+12*o,l=i.readUint(e,s+0),c=i.readUint(e,s+4),u=i.readUint(e,s+8);r.groups.push([l,c,u])}return r},t.glyf={},t.glyf.parse=function(e,t,n,i){for(var r=[],a=0;a<i.maxp.numGlyphs;a++)r.push(null);return r},t.glyf._parseGlyf=function(e,n){var i=t._bin,r=e._data,a=t._tabOffset(r,"glyf",e._offset)+e.loca[n];if(e.loca[n]==e.loca[n+1])return null;var o={};if(o.noc=i.readShort(r,a),a+=2,o.xMin=i.readShort(r,a),a+=2,o.yMin=i.readShort(r,a),a+=2,o.xMax=i.readShort(r,a),a+=2,o.yMax=i.readShort(r,a),a+=2,o.xMin>=o.xMax||o.yMin>=o.yMax)return null;if(o.noc>0){o.endPts=[];for(var s=0;s<o.noc;s++)o.endPts.push(i.readUshort(r,a)),a+=2;var l=i.readUshort(r,a);if(a+=2,r.length-a<l)return null;o.instructions=i.readBytes(r,a,l),a+=l;var c=o.endPts[o.noc-1]+1;for(o.flags=[],s=0;s<c;s++){var u=r[a];if(a++,o.flags.push(u),0!=(8&u)){var g=r[a];a++;for(var d=0;d<g;d++)o.flags.push(u),s++}}for(o.xs=[],s=0;s<c;s++){var h=0!=(2&o.flags[s]),f=0!=(16&o.flags[s]);h?(o.xs.push(f?r[a]:-r[a]),a++):f?o.xs.push(0):(o.xs.push(i.readShort(r,a)),a+=2)}for(o.ys=[],s=0;s<c;s++)h=0!=(4&o.flags[s]),f=0!=(32&o.flags[s]),h?(o.ys.push(f?r[a]:-r[a]),a++):f?o.ys.push(0):(o.ys.push(i.readShort(r,a)),a+=2);var p=0,I=0;for(s=0;s<c;s++)p+=o.xs[s],I+=o.ys[s],o.xs[s]=p,o.ys[s]=I}else{var C;o.parts=[];do{C=i.readUshort(r,a),a+=2;var m={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(o.parts.push(m),m.glyphIndex=i.readUshort(r,a),a+=2,1&C){var v=i.readShort(r,a);a+=2;var A=i.readShort(r,a);a+=2}else v=i.readInt8(r,a),a++,A=i.readInt8(r,a),a++;2&C?(m.m.tx=v,m.m.ty=A):(m.p1=v,m.p2=A),8&C?(m.m.a=m.m.d=i.readF2dot14(r,a),a+=2):64&C?(m.m.a=i.readF2dot14(r,a),a+=2,m.m.d=i.readF2dot14(r,a),a+=2):128&C&&(m.m.a=i.readF2dot14(r,a),a+=2,m.m.b=i.readF2dot14(r,a),a+=2,m.m.c=i.readF2dot14(r,a),a+=2,m.m.d=i.readF2dot14(r,a),a+=2)}while(32&C);if(256&C){var b=i.readUshort(r,a);for(a+=2,o.instr=[],s=0;s<b;s++)o.instr.push(r[a]),a++}}return o},t.GPOS={},t.GPOS.parse=function(e,n,i,r){return t._lctf.parse(e,n,i,r,t.GPOS.subt)},t.GPOS.subt=function(e,n,i,r){var a=t._bin,o=i,s={};if(s.fmt=a.readUshort(e,i),i+=2,1==n||2==n||3==n||7==n||8==n&&s.fmt<=2){var l=a.readUshort(e,i);i+=2,s.coverage=t._lctf.readCoverage(e,l+o)}if(1==n&&1==s.fmt){var c=a.readUshort(e,i);i+=2;var u=t._lctf.numOfOnes(c);0!=c&&(s.pos=t.GPOS.readValueRecord(e,i,c))}else if(2==n&&s.fmt>=1&&s.fmt<=2){c=a.readUshort(e,i),i+=2;var g=a.readUshort(e,i);i+=2,u=t._lctf.numOfOnes(c);var d=t._lctf.numOfOnes(g);if(1==s.fmt){s.pairsets=[];var h=a.readUshort(e,i);i+=2;for(var f=0;f<h;f++){var p=o+a.readUshort(e,i);i+=2;var I=a.readUshort(e,p);p+=2;for(var C=[],m=0;m<I;m++){var v=a.readUshort(e,p);p+=2,0!=c&&(B=t.GPOS.readValueRecord(e,p,c),p+=2*u),0!=g&&(x=t.GPOS.readValueRecord(e,p,g),p+=2*d),C.push({gid2:v,val1:B,val2:x})}s.pairsets.push(C)}}if(2==s.fmt){var A=a.readUshort(e,i);i+=2;var b=a.readUshort(e,i);i+=2;var y=a.readUshort(e,i);i+=2;var G=a.readUshort(e,i);for(i+=2,s.classDef1=t._lctf.readClassDef(e,o+A),s.classDef2=t._lctf.readClassDef(e,o+b),s.matrix=[],f=0;f<y;f++){var w=[];for(m=0;m<G;m++){var B=null,x=null;0!=c&&(B=t.GPOS.readValueRecord(e,i,c),i+=2*u),0!=g&&(x=t.GPOS.readValueRecord(e,i,g),i+=2*d),w.push({val1:B,val2:x})}s.matrix.push(w)}}}else{if(9==n&&1==s.fmt){var S=a.readUshort(e,i);i+=2;var Z=a.readUint(e,i);if(i+=4,9==r.ltype)r.ltype=S;else if(r.ltype!=S)throw"invalid extension substitution";return t.GPOS.subt(e,r.ltype,o+Z)}console.debug("unsupported GPOS table LookupType",n,"format",s.fmt)}return s},t.GPOS.readValueRecord=function(e,n,i){var r=t._bin,a=[];return a.push(1&i?r.readShort(e,n):0),n+=1&i?2:0,a.push(2&i?r.readShort(e,n):0),n+=2&i?2:0,a.push(4&i?r.readShort(e,n):0),n+=4&i?2:0,a.push(8&i?r.readShort(e,n):0),n+=8&i?2:0,a},t.GSUB={},t.GSUB.parse=function(e,n,i,r){return t._lctf.parse(e,n,i,r,t.GSUB.subt)},t.GSUB.subt=function(e,n,i,r){var a=t._bin,o=i,s={};if(s.fmt=a.readUshort(e,i),i+=2,1!=n&&4!=n&&5!=n&&6!=n)return null;if(1==n||4==n||5==n&&s.fmt<=2||6==n&&s.fmt<=2){var l=a.readUshort(e,i);i+=2,s.coverage=t._lctf.readCoverage(e,o+l)}if(1==n&&s.fmt>=1&&s.fmt<=2){if(1==s.fmt)s.delta=a.readShort(e,i),i+=2;else if(2==s.fmt){var c=a.readUshort(e,i);i+=2,s.newg=a.readUshorts(e,i,c),i+=2*s.newg.length}}else if(4==n){s.vals=[],c=a.readUshort(e,i),i+=2;for(var u=0;u<c;u++){var g=a.readUshort(e,i);i+=2,s.vals.push(t.GSUB.readLigatureSet(e,o+g))}}else if(5==n&&2==s.fmt){if(2==s.fmt){var d=a.readUshort(e,i);i+=2,s.cDef=t._lctf.readClassDef(e,o+d),s.scset=[];var h=a.readUshort(e,i);for(i+=2,u=0;u<h;u++){var f=a.readUshort(e,i);i+=2,s.scset.push(0==f?null:t.GSUB.readSubClassSet(e,o+f))}}}else if(6==n&&3==s.fmt){if(3==s.fmt){for(u=0;u<3;u++){c=a.readUshort(e,i),i+=2;for(var p=[],I=0;I<c;I++)p.push(t._lctf.readCoverage(e,o+a.readUshort(e,i+2*I)));i+=2*c,0==u&&(s.backCvg=p),1==u&&(s.inptCvg=p),2==u&&(s.ahedCvg=p)}c=a.readUshort(e,i),i+=2,s.lookupRec=t.GSUB.readSubstLookupRecords(e,i,c)}}else{if(7==n&&1==s.fmt){var C=a.readUshort(e,i);i+=2;var m=a.readUint(e,i);if(i+=4,9==r.ltype)r.ltype=C;else if(r.ltype!=C)throw"invalid extension substitution";return t.GSUB.subt(e,r.ltype,o+m)}console.debug("unsupported GSUB table LookupType",n,"format",s.fmt)}return s},t.GSUB.readSubClassSet=function(e,n){var i=t._bin.readUshort,r=n,a=[],o=i(e,n);n+=2;for(var s=0;s<o;s++){var l=i(e,n);n+=2,a.push(t.GSUB.readSubClassRule(e,r+l))}return a},t.GSUB.readSubClassRule=function(e,n){var i=t._bin.readUshort,r={},a=i(e,n),o=i(e,n+=2);n+=2,r.input=[];for(var s=0;s<a-1;s++)r.input.push(i(e,n)),n+=2;return r.substLookupRecords=t.GSUB.readSubstLookupRecords(e,n,o),r},t.GSUB.readSubstLookupRecords=function(e,n,i){for(var r=t._bin.readUshort,a=[],o=0;o<i;o++)a.push(r(e,n),r(e,n+2)),n+=4;return a},t.GSUB.readChainSubClassSet=function(e,n){var i=t._bin,r=n,a=[],o=i.readUshort(e,n);n+=2;for(var s=0;s<o;s++){var l=i.readUshort(e,n);n+=2,a.push(t.GSUB.readChainSubClassRule(e,r+l))}return a},t.GSUB.readChainSubClassRule=function(e,n){for(var i=t._bin,r={},a=["backtrack","input","lookahead"],o=0;o<a.length;o++){var s=i.readUshort(e,n);n+=2,1==o&&s--,r[a[o]]=i.readUshorts(e,n,s),n+=2*r[a[o]].length}return s=i.readUshort(e,n),n+=2,r.subst=i.readUshorts(e,n,2*s),n+=2*r.subst.length,r},t.GSUB.readLigatureSet=function(e,n){var i=t._bin,r=n,a=[],o=i.readUshort(e,n);n+=2;for(var s=0;s<o;s++){var l=i.readUshort(e,n);n+=2,a.push(t.GSUB.readLigature(e,r+l))}return a},t.GSUB.readLigature=function(e,n){var i=t._bin,r={chain:[]};r.nglyph=i.readUshort(e,n),n+=2;var a=i.readUshort(e,n);n+=2;for(var o=0;o<a-1;o++)r.chain.push(i.readUshort(e,n)),n+=2;return r},t.head={},t.head.parse=function(e,n,i){var r=t._bin,a={};return r.readFixed(e,n),n+=4,a.fontRevision=r.readFixed(e,n),n+=4,r.readUint(e,n),n+=4,r.readUint(e,n),n+=4,a.flags=r.readUshort(e,n),n+=2,a.unitsPerEm=r.readUshort(e,n),n+=2,a.created=r.readUint64(e,n),n+=8,a.modified=r.readUint64(e,n),n+=8,a.xMin=r.readShort(e,n),n+=2,a.yMin=r.readShort(e,n),n+=2,a.xMax=r.readShort(e,n),n+=2,a.yMax=r.readShort(e,n),n+=2,a.macStyle=r.readUshort(e,n),n+=2,a.lowestRecPPEM=r.readUshort(e,n),n+=2,a.fontDirectionHint=r.readShort(e,n),n+=2,a.indexToLocFormat=r.readShort(e,n),n+=2,a.glyphDataFormat=r.readShort(e,n),n+=2,a},t.hhea={},t.hhea.parse=function(e,n,i){var r=t._bin,a={};return r.readFixed(e,n),n+=4,a.ascender=r.readShort(e,n),n+=2,a.descender=r.readShort(e,n),n+=2,a.lineGap=r.readShort(e,n),n+=2,a.advanceWidthMax=r.readUshort(e,n),n+=2,a.minLeftSideBearing=r.readShort(e,n),n+=2,a.minRightSideBearing=r.readShort(e,n),n+=2,a.xMaxExtent=r.readShort(e,n),n+=2,a.caretSlopeRise=r.readShort(e,n),n+=2,a.caretSlopeRun=r.readShort(e,n),n+=2,a.caretOffset=r.readShort(e,n),n+=2,n+=8,a.metricDataFormat=r.readShort(e,n),n+=2,a.numberOfHMetrics=r.readUshort(e,n),n+=2,a},t.hmtx={},t.hmtx.parse=function(e,n,i,r){for(var a=t._bin,o={aWidth:[],lsBearing:[]},s=0,l=0,c=0;c<r.maxp.numGlyphs;c++)c<r.hhea.numberOfHMetrics&&(s=a.readUshort(e,n),n+=2,l=a.readShort(e,n),n+=2),o.aWidth.push(s),o.lsBearing.push(l);return o},t.kern={},t.kern.parse=function(e,n,i,r){var a=t._bin,o=a.readUshort(e,n);if(n+=2,1==o)return t.kern.parseV1(e,n-2,i,r);var s=a.readUshort(e,n);n+=2;for(var l={glyph1:[],rval:[]},c=0;c<s;c++){n+=2,i=a.readUshort(e,n),n+=2;var u=a.readUshort(e,n);n+=2;var g=u>>>8;if(0!=(g&=15))throw"unknown kern table format: "+g;n=t.kern.readFormat0(e,n,l)}return l},t.kern.parseV1=function(e,n,i,r){var a=t._bin;a.readFixed(e,n),n+=4;var o=a.readUint(e,n);n+=4;for(var s={glyph1:[],rval:[]},l=0;l<o;l++){a.readUint(e,n),n+=4;var c=a.readUshort(e,n);n+=2,a.readUshort(e,n),n+=2;var u=c>>>8;if(0!=(u&=15))throw"unknown kern table format: "+u;n=t.kern.readFormat0(e,n,s)}return s},t.kern.readFormat0=function(e,n,i){var r=t._bin,a=-1,o=r.readUshort(e,n);n+=2,r.readUshort(e,n),n+=2,r.readUshort(e,n),n+=2,r.readUshort(e,n),n+=2;for(var s=0;s<o;s++){var l=r.readUshort(e,n);n+=2;var c=r.readUshort(e,n);n+=2;var u=r.readShort(e,n);n+=2,l!=a&&(i.glyph1.push(l),i.rval.push({glyph2:[],vals:[]}));var g=i.rval[i.rval.length-1];g.glyph2.push(c),g.vals.push(u),a=l}return n},t.loca={},t.loca.parse=function(e,n,i,r){var a=t._bin,o=[],s=r.head.indexToLocFormat,l=r.maxp.numGlyphs+1;if(0==s)for(var c=0;c<l;c++)o.push(a.readUshort(e,n+(c<<1))<<1);if(1==s)for(c=0;c<l;c++)o.push(a.readUint(e,n+(c<<2)));return o},t.maxp={},t.maxp.parse=function(e,n,i){var r=t._bin,a={},o=r.readUint(e,n);return n+=4,a.numGlyphs=r.readUshort(e,n),n+=2,65536==o&&(a.maxPoints=r.readUshort(e,n),n+=2,a.maxContours=r.readUshort(e,n),n+=2,a.maxCompositePoints=r.readUshort(e,n),n+=2,a.maxCompositeContours=r.readUshort(e,n),n+=2,a.maxZones=r.readUshort(e,n),n+=2,a.maxTwilightPoints=r.readUshort(e,n),n+=2,a.maxStorage=r.readUshort(e,n),n+=2,a.maxFunctionDefs=r.readUshort(e,n),n+=2,a.maxInstructionDefs=r.readUshort(e,n),n+=2,a.maxStackElements=r.readUshort(e,n),n+=2,a.maxSizeOfInstructions=r.readUshort(e,n),n+=2,a.maxComponentElements=r.readUshort(e,n),n+=2,a.maxComponentDepth=r.readUshort(e,n),n+=2),a},t.name={},t.name.parse=function(e,n,i){var r=t._bin,a={};r.readUshort(e,n),n+=2;var o=r.readUshort(e,n);n+=2,r.readUshort(e,n);for(var s,l=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],c=n+=2,u=0;u<o;u++){var g=r.readUshort(e,n);n+=2;var d=r.readUshort(e,n);n+=2;var h=r.readUshort(e,n);n+=2;var f=r.readUshort(e,n);n+=2;var p=r.readUshort(e,n);n+=2;var I=r.readUshort(e,n);n+=2;var C,m=l[f],v=c+12*o+I;if(0==g)C=r.readUnicode(e,v,p/2);else if(3==g&&0==d)C=r.readUnicode(e,v,p/2);else if(0==d)C=r.readASCII(e,v,p);else if(1==d)C=r.readUnicode(e,v,p/2);else if(3==d)C=r.readUnicode(e,v,p/2);else{if(1!=g)throw"unknown encoding "+d+", platformID: "+g;C=r.readASCII(e,v,p),console.debug("reading unknown MAC encoding "+d+" as ASCII")}var A="p"+g+","+h.toString(16);null==a[A]&&(a[A]={}),a[A][void 0!==m?m:f]=C,a[A]._lang=h}for(var b in a)if(null!=a[b].postScriptName&&1033==a[b]._lang)return a[b];for(var b in a)if(null!=a[b].postScriptName&&0==a[b]._lang)return a[b];for(var b in a)if(null!=a[b].postScriptName&&3084==a[b]._lang)return a[b];for(var b in a)if(null!=a[b].postScriptName)return a[b];for(var b in a){s=b;break}return console.debug("returning name table with languageID "+a[s]._lang),a[s]},t["OS/2"]={},t["OS/2"].parse=function(e,n,i){var r=t._bin.readUshort(e,n);n+=2;var a={};if(0==r)t["OS/2"].version0(e,n,a);else if(1==r)t["OS/2"].version1(e,n,a);else if(2==r||3==r||4==r)t["OS/2"].version2(e,n,a);else{if(5!=r)throw"unknown OS/2 table version: "+r;t["OS/2"].version5(e,n,a)}return a},t["OS/2"].version0=function(e,n,i){var r=t._bin;return i.xAvgCharWidth=r.readShort(e,n),n+=2,i.usWeightClass=r.readUshort(e,n),n+=2,i.usWidthClass=r.readUshort(e,n),n+=2,i.fsType=r.readUshort(e,n),n+=2,i.ySubscriptXSize=r.readShort(e,n),n+=2,i.ySubscriptYSize=r.readShort(e,n),n+=2,i.ySubscriptXOffset=r.readShort(e,n),n+=2,i.ySubscriptYOffset=r.readShort(e,n),n+=2,i.ySuperscriptXSize=r.readShort(e,n),n+=2,i.ySuperscriptYSize=r.readShort(e,n),n+=2,i.ySuperscriptXOffset=r.readShort(e,n),n+=2,i.ySuperscriptYOffset=r.readShort(e,n),n+=2,i.yStrikeoutSize=r.readShort(e,n),n+=2,i.yStrikeoutPosition=r.readShort(e,n),n+=2,i.sFamilyClass=r.readShort(e,n),n+=2,i.panose=r.readBytes(e,n,10),n+=10,i.ulUnicodeRange1=r.readUint(e,n),n+=4,i.ulUnicodeRange2=r.readUint(e,n),n+=4,i.ulUnicodeRange3=r.readUint(e,n),n+=4,i.ulUnicodeRange4=r.readUint(e,n),n+=4,i.achVendID=[r.readInt8(e,n),r.readInt8(e,n+1),r.readInt8(e,n+2),r.readInt8(e,n+3)],n+=4,i.fsSelection=r.readUshort(e,n),n+=2,i.usFirstCharIndex=r.readUshort(e,n),n+=2,i.usLastCharIndex=r.readUshort(e,n),n+=2,i.sTypoAscender=r.readShort(e,n),n+=2,i.sTypoDescender=r.readShort(e,n),n+=2,i.sTypoLineGap=r.readShort(e,n),n+=2,i.usWinAscent=r.readUshort(e,n),n+=2,i.usWinDescent=r.readUshort(e,n),n+2},t["OS/2"].version1=function(e,n,i){var r=t._bin;return n=t["OS/2"].version0(e,n,i),i.ulCodePageRange1=r.readUint(e,n),n+=4,i.ulCodePageRange2=r.readUint(e,n),n+4},t["OS/2"].version2=function(e,n,i){var r=t._bin;return n=t["OS/2"].version1(e,n,i),i.sxHeight=r.readShort(e,n),n+=2,i.sCapHeight=r.readShort(e,n),n+=2,i.usDefault=r.readUshort(e,n),n+=2,i.usBreak=r.readUshort(e,n),n+=2,i.usMaxContext=r.readUshort(e,n),n+2},t["OS/2"].version5=function(e,n,i){var r=t._bin;return n=t["OS/2"].version2(e,n,i),i.usLowerOpticalPointSize=r.readUshort(e,n),n+=2,i.usUpperOpticalPointSize=r.readUshort(e,n),n+2},t.post={},t.post.parse=function(e,n,i){var r=t._bin,a={};return a.version=r.readFixed(e,n),n+=4,a.italicAngle=r.readFixed(e,n),n+=4,a.underlinePosition=r.readShort(e,n),n+=2,a.underlineThickness=r.readShort(e,n),n+=2,a},null==t&&(t={}),null==t.U&&(t.U={}),t.U.codeToGlyph=function(e,t){var n=e.cmap,i=-1;if(null!=n.p0e4?i=n.p0e4:null!=n.p3e1?i=n.p3e1:null!=n.p1e0?i=n.p1e0:null!=n.p0e3&&(i=n.p0e3),-1==i)throw"no familiar platform and encoding!";var r=n.tables[i];if(0==r.format)return t>=r.map.length?0:r.map[t];if(4==r.format){for(var a=-1,o=0;o<r.endCount.length;o++)if(t<=r.endCount[o]){a=o;break}return-1==a||r.startCount[a]>t?0:65535&(0!=r.idRangeOffset[a]?r.glyphIdArray[t-r.startCount[a]+(r.idRangeOffset[a]>>1)-(r.idRangeOffset.length-a)]:t+r.idDelta[a])}if(12==r.format){if(t>r.groups[r.groups.length-1][1])return 0;for(o=0;o<r.groups.length;o++){var s=r.groups[o];if(s[0]<=t&&t<=s[1])return s[2]+(t-s[0])}return 0}throw"unknown cmap table format "+r.format},t.U.glyphToPath=function(e,n){var i={cmds:[],crds:[]};if(e.SVG&&e.SVG.entries[n]){var r=e.SVG.entries[n];return null==r?i:("string"==typeof r&&(r=t.SVG.toPath(r),e.SVG.entries[n]=r),r)}if(e.CFF){var a={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:e.CFF.Private?e.CFF.Private.defaultWidthX:0,open:!1},o=e.CFF,s=e.CFF.Private;if(o.ROS){for(var l=0;o.FDSelect[l+2]<=n;)l+=2;s=o.FDArray[o.FDSelect[l+1]].Private}t.U._drawCFF(e.CFF.CharStrings[n],a,o,s,i)}else e.glyf&&t.U._drawGlyf(n,e,i);return i},t.U._drawGlyf=function(e,n,i){var r=n.glyf[e];null==r&&(r=n.glyf[e]=t.glyf._parseGlyf(n,e)),null!=r&&(r.noc>-1?t.U._simpleGlyph(r,i):t.U._compoGlyph(r,n,i))},t.U._simpleGlyph=function(e,n){for(var i=0;i<e.noc;i++){for(var r=0==i?0:e.endPts[i-1]+1,a=e.endPts[i],o=r;o<=a;o++){var s=o==r?a:o-1,l=o==a?r:o+1,c=1&e.flags[o],u=1&e.flags[s],g=1&e.flags[l],d=e.xs[o],h=e.ys[o];if(o==r)if(c){if(!u){t.U.P.moveTo(n,d,h);continue}t.U.P.moveTo(n,e.xs[s],e.ys[s])}else u?t.U.P.moveTo(n,e.xs[s],e.ys[s]):t.U.P.moveTo(n,(e.xs[s]+d)/2,(e.ys[s]+h)/2);c?u&&t.U.P.lineTo(n,d,h):g?t.U.P.qcurveTo(n,d,h,e.xs[l],e.ys[l]):t.U.P.qcurveTo(n,d,h,(d+e.xs[l])/2,(h+e.ys[l])/2)}t.U.P.closePath(n)}},t.U._compoGlyph=function(e,n,i){for(var r=0;r<e.parts.length;r++){var a={cmds:[],crds:[]},o=e.parts[r];t.U._drawGlyf(o.glyphIndex,n,a);for(var s=o.m,l=0;l<a.crds.length;l+=2){var c=a.crds[l],u=a.crds[l+1];i.crds.push(c*s.a+u*s.b+s.tx),i.crds.push(c*s.c+u*s.d+s.ty)}for(l=0;l<a.cmds.length;l++)i.cmds.push(a.cmds[l])}},t.U._getGlyphClass=function(e,n){var i=t._lctf.getInterval(n,e);return-1==i?0:n[i+2]},t.U.getPairAdjustment=function(e,n,i){var r=!1;if(e.GPOS)for(var a=e.GPOS,o=a.lookupList,s=a.featureList,l=[],c=0;c<s.length;c++){var u=s[c];if("kern"==u.tag){r=!0;for(var g=0;g<u.tab.length;g++)if(!l[u.tab[g]]){l[u.tab[g]]=!0;for(var d=o[u.tab[g]],h=0;h<d.tabs.length;h++)if(null!=d.tabs[h]){var f,p=d.tabs[h];if(!p.coverage||-1!=(f=t._lctf.coverageIndex(p.coverage,n)))if(1==d.ltype);else if(2==d.ltype){var I=null;if(1==p.fmt){var C=p.pairsets[f];for(c=0;c<C.length;c++)C[c].gid2==i&&(I=C[c])}else if(2==p.fmt){var m=t.U._getGlyphClass(n,p.classDef1),v=t.U._getGlyphClass(i,p.classDef2);I=p.matrix[m][v]}if(I){var A=0;return I.val1&&I.val1[2]&&(A+=I.val1[2]),I.val2&&I.val2[0]&&(A+=I.val2[0]),A}}}}}}if(e.kern&&!r){var b=e.kern.glyph1.indexOf(n);if(-1!=b){var y=e.kern.rval[b].glyph2.indexOf(i);if(-1!=y)return e.kern.rval[b].vals[y]}}return 0},t.U._applySubs=function(e,n,i,r){for(var a=e.length-n-1,o=0;o<i.tabs.length;o++)if(null!=i.tabs[o]){var s,l=i.tabs[o];if(!l.coverage||-1!=(s=t._lctf.coverageIndex(l.coverage,e[n])))if(1==i.ltype)e[n],1==l.fmt?e[n]=e[n]+l.delta:e[n]=l.newg[s];else if(4==i.ltype)for(var c=l.vals[s],u=0;u<c.length;u++){var g=c[u],d=g.chain.length;if(!(d>a)){for(var h=!0,f=0,p=0;p<d;p++){for(;-1==e[n+f+(1+p)];)f++;g.chain[p]!=e[n+f+(1+p)]&&(h=!1)}if(h){for(e[n]=g.nglyph,p=0;p<d+f;p++)e[n+p+1]=-1;break}}}else if(5==i.ltype&&2==l.fmt)for(var I=t._lctf.getInterval(l.cDef,e[n]),C=l.cDef[I+2],m=l.scset[C],v=0;v<m.length;v++){var A=m[v],b=A.input;if(!(b.length>a)){for(h=!0,p=0;p<b.length;p++){var y=t._lctf.getInterval(l.cDef,e[n+1+p]);if(-1==I&&l.cDef[y+2]!=b[p]){h=!1;break}}if(h){var G=A.substLookupRecords;for(u=0;u<G.length;u+=2)G[u],G[u+1]}}}else if(6==i.ltype&&3==l.fmt){if(!t.U._glsCovered(e,l.backCvg,n-l.backCvg.length))continue;if(!t.U._glsCovered(e,l.inptCvg,n))continue;if(!t.U._glsCovered(e,l.ahedCvg,n+l.inptCvg.length))continue;var w=l.lookupRec;for(v=0;v<w.length;v+=2){I=w[v];var B=r[w[v+1]];t.U._applySubs(e,n+I,B,r)}}}},t.U._glsCovered=function(e,n,i){for(var r=0;r<n.length;r++)if(-1==t._lctf.coverageIndex(n[r],e[i+r]))return!1;return!0},t.U.glyphsToPath=function(e,n,i){for(var r={cmds:[],crds:[]},a=0,o=0;o<n.length;o++){var s=n[o];if(-1!=s){for(var l=o<n.length-1&&-1!=n[o+1]?n[o+1]:0,c=t.U.glyphToPath(e,s),u=0;u<c.crds.length;u+=2)r.crds.push(c.crds[u]+a),r.crds.push(c.crds[u+1]);for(i&&r.cmds.push(i),u=0;u<c.cmds.length;u++)r.cmds.push(c.cmds[u]);i&&r.cmds.push("X"),a+=e.hmtx.aWidth[s],o<n.length-1&&(a+=t.U.getPairAdjustment(e,s,l))}}return r},t.U.P={},t.U.P.moveTo=function(e,t,n){e.cmds.push("M"),e.crds.push(t,n)},t.U.P.lineTo=function(e,t,n){e.cmds.push("L"),e.crds.push(t,n)},t.U.P.curveTo=function(e,t,n,i,r,a,o){e.cmds.push("C"),e.crds.push(t,n,i,r,a,o)},t.U.P.qcurveTo=function(e,t,n,i,r){e.cmds.push("Q"),e.crds.push(t,n,i,r)},t.U.P.closePath=function(e){e.cmds.push("Z")},t.U._drawCFF=function(e,n,i,r,a){for(var o=n.stack,s=n.nStems,l=n.haveWidth,c=n.width,u=n.open,g=0,d=n.x,h=n.y,f=0,p=0,I=0,C=0,m=0,v=0,A=0,b=0,y=0,G=0,w={val:0,size:0};g<e.length;){t.CFF.getCharString(e,g,w);var B=w.val;if(g+=w.size,"o1"==B||"o18"==B)o.length%2!=0&&!l&&(c=o.shift()+r.nominalWidthX),s+=o.length>>1,o.length=0,l=!0;else if("o3"==B||"o23"==B)o.length%2!=0&&!l&&(c=o.shift()+r.nominalWidthX),s+=o.length>>1,o.length=0,l=!0;else if("o4"==B)o.length>1&&!l&&(c=o.shift()+r.nominalWidthX,l=!0),u&&t.U.P.closePath(a),h+=o.pop(),t.U.P.moveTo(a,d,h),u=!0;else if("o5"==B)for(;o.length>0;)d+=o.shift(),h+=o.shift(),t.U.P.lineTo(a,d,h);else if("o6"==B||"o7"==B)for(var x=o.length,S="o6"==B,Z=0;Z<x;Z++){var k=o.shift();S?d+=k:h+=k,S=!S,t.U.P.lineTo(a,d,h)}else if("o8"==B||"o24"==B){x=o.length;for(var R=0;R+6<=x;)f=d+o.shift(),p=h+o.shift(),I=f+o.shift(),C=p+o.shift(),d=I+o.shift(),h=C+o.shift(),t.U.P.curveTo(a,f,p,I,C,d,h),R+=6;"o24"==B&&(d+=o.shift(),h+=o.shift(),t.U.P.lineTo(a,d,h))}else{if("o11"==B)break;if("o1234"==B||"o1235"==B||"o1236"==B||"o1237"==B)"o1234"==B&&(p=h,I=(f=d+o.shift())+o.shift(),G=C=p+o.shift(),v=C,b=h,d=(A=(m=(y=I+o.shift())+o.shift())+o.shift())+o.shift(),t.U.P.curveTo(a,f,p,I,C,y,G),t.U.P.curveTo(a,m,v,A,b,d,h)),"o1235"==B&&(f=d+o.shift(),p=h+o.shift(),I=f+o.shift(),C=p+o.shift(),y=I+o.shift(),G=C+o.shift(),m=y+o.shift(),v=G+o.shift(),A=m+o.shift(),b=v+o.shift(),d=A+o.shift(),h=b+o.shift(),o.shift(),t.U.P.curveTo(a,f,p,I,C,y,G),t.U.P.curveTo(a,m,v,A,b,d,h)),"o1236"==B&&(f=d+o.shift(),p=h+o.shift(),I=f+o.shift(),G=C=p+o.shift(),v=C,A=(m=(y=I+o.shift())+o.shift())+o.shift(),b=v+o.shift(),d=A+o.shift(),t.U.P.curveTo(a,f,p,I,C,y,G),t.U.P.curveTo(a,m,v,A,b,d,h)),"o1237"==B&&(f=d+o.shift(),p=h+o.shift(),I=f+o.shift(),C=p+o.shift(),y=I+o.shift(),G=C+o.shift(),m=y+o.shift(),v=G+o.shift(),A=m+o.shift(),b=v+o.shift(),Math.abs(A-d)>Math.abs(b-h)?d=A+o.shift():h=b+o.shift(),t.U.P.curveTo(a,f,p,I,C,y,G),t.U.P.curveTo(a,m,v,A,b,d,h));else if("o14"==B){if(o.length>0&&!l&&(c=o.shift()+i.nominalWidthX,l=!0),4==o.length){var W=o.shift(),M=o.shift(),V=o.shift(),F=o.shift(),N=t.CFF.glyphBySE(i,V),H=t.CFF.glyphBySE(i,F);t.U._drawCFF(i.CharStrings[N],n,i,r,a),n.x=W,n.y=M,t.U._drawCFF(i.CharStrings[H],n,i,r,a)}u&&(t.U.P.closePath(a),u=!1)}else if("o19"==B||"o20"==B)o.length%2!=0&&!l&&(c=o.shift()+r.nominalWidthX),s+=o.length>>1,o.length=0,l=!0,g+=s+7>>3;else if("o21"==B)o.length>2&&!l&&(c=o.shift()+r.nominalWidthX,l=!0),h+=o.pop(),d+=o.pop(),u&&t.U.P.closePath(a),t.U.P.moveTo(a,d,h),u=!0;else if("o22"==B)o.length>1&&!l&&(c=o.shift()+r.nominalWidthX,l=!0),d+=o.pop(),u&&t.U.P.closePath(a),t.U.P.moveTo(a,d,h),u=!0;else if("o25"==B){for(;o.length>6;)d+=o.shift(),h+=o.shift(),t.U.P.lineTo(a,d,h);f=d+o.shift(),p=h+o.shift(),I=f+o.shift(),C=p+o.shift(),d=I+o.shift(),h=C+o.shift(),t.U.P.curveTo(a,f,p,I,C,d,h)}else if("o26"==B)for(o.length%2&&(d+=o.shift());o.length>0;)f=d,p=h+o.shift(),d=I=f+o.shift(),h=(C=p+o.shift())+o.shift(),t.U.P.curveTo(a,f,p,I,C,d,h);else if("o27"==B)for(o.length%2&&(h+=o.shift());o.length>0;)p=h,I=(f=d+o.shift())+o.shift(),C=p+o.shift(),d=I+o.shift(),h=C,t.U.P.curveTo(a,f,p,I,C,d,h);else if("o10"==B||"o29"==B){var T="o10"==B?r:i;if(0==o.length)console.debug("error: empty stack");else{var X=o.pop(),Y=T.Subrs[X+T.Bias];n.x=d,n.y=h,n.nStems=s,n.haveWidth=l,n.width=c,n.open=u,t.U._drawCFF(Y,n,i,r,a),d=n.x,h=n.y,s=n.nStems,l=n.haveWidth,c=n.width,u=n.open}}else if("o30"==B||"o31"==B){var E=o.length,z=(R=0,"o31"==B);for(R+=E-(x=-3&E);R<x;)z?(p=h,I=(f=d+o.shift())+o.shift(),h=(C=p+o.shift())+o.shift(),x-R==5?(d=I+o.shift(),R++):d=I,z=!1):(f=d,p=h+o.shift(),I=f+o.shift(),C=p+o.shift(),d=I+o.shift(),x-R==5?(h=C+o.shift(),R++):h=C,z=!0),t.U.P.curveTo(a,f,p,I,C,d,h),R+=4}else{if("o"==(B+"").charAt(0))throw console.debug("Unknown operation: "+B,e),B;o.push(B)}}}n.x=d,n.y=h,n.nStems=s,n.haveWidth=l,n.width=c,n.open=u};var n=t,i={Typr:n};return e.Typr=n,e.default=i,Object.defineProperty(e,"__esModule",{value:!0}),e}({}).Typr},function(){return function(e){var t=Uint8Array,n=Uint16Array,i=Uint32Array,r=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),a=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(e,t){for(var r=new n(31),a=0;a<31;++a)r[a]=t+=1<<e[a-1];var o=new i(r[30]);for(a=1;a<30;++a)for(var s=r[a];s<r[a+1];++s)o[s]=s-r[a]<<5|a;return[r,o]},l=s(r,2),c=l[0],u=l[1];c[28]=258,u[258]=28;for(var g=s(a,0)[0],d=new n(32768),h=0;h<32768;++h){var f=(43690&h)>>>1|(21845&h)<<1;f=(61680&(f=(52428&f)>>>2|(13107&f)<<2))>>>4|(3855&f)<<4,d[h]=((65280&f)>>>8|(255&f)<<8)>>>1}var p=function(e,t,i){for(var r=e.length,a=0,o=new n(t);a<r;++a)++o[e[a]-1];var s,l=new n(t);for(a=0;a<t;++a)l[a]=l[a-1]+o[a-1]<<1;if(i){s=new n(1<<t);var c=15-t;for(a=0;a<r;++a)if(e[a])for(var u=a<<4|e[a],g=t-e[a],h=l[e[a]-1]++<<g,f=h|(1<<g)-1;h<=f;++h)s[d[h]>>>c]=u}else for(s=new n(r),a=0;a<r;++a)e[a]&&(s[a]=d[l[e[a]-1]++]>>>15-e[a]);return s},I=new t(288);for(h=0;h<144;++h)I[h]=8;for(h=144;h<256;++h)I[h]=9;for(h=256;h<280;++h)I[h]=7;for(h=280;h<288;++h)I[h]=8;var C=new t(32);for(h=0;h<32;++h)C[h]=5;var m=p(I,9,1),v=p(C,5,1),A=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},b=function(e,t,n){var i=t/8|0;return(e[i]|e[i+1]<<8)>>(7&t)&n},y=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},G=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],w=function e(t,n,i){var r=new Error(n||G[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,e),!i)throw r;return r},B=function(e,s,l){var u=e.length;if(!u||l&&!l.l&&u<5)return s||new t(0);var d=!s||l,h=!l||l.i;l||(l={}),s||(s=new t(3*u));var f,I=function(e){var n=s.length;if(e>n){var i=new t(Math.max(2*n,e));i.set(s),s=i}},C=l.f||0,G=l.p||0,B=l.b||0,x=l.l,S=l.d,Z=l.m,k=l.n,R=8*u;do{if(!x){l.f=C=b(e,G,1);var W=b(e,G+1,3);if(G+=3,!W){var M=e[(K=((f=G)/8|0)+(7&f&&1)+4)-4]|e[K-3]<<8,V=K+M;if(V>u){h&&w(0);break}d&&I(B+M),s.set(e.subarray(K,V),B),l.b=B+=M,l.p=G=8*V;continue}if(1==W)x=m,S=v,Z=9,k=5;else if(2==W){var F=b(e,G,31)+257,N=b(e,G+10,15)+4,H=F+b(e,G+5,31)+1;G+=14;for(var T=new t(H),X=new t(19),Y=0;Y<N;++Y)X[o[Y]]=b(e,G+3*Y,7);G+=3*N;var E=A(X),z=(1<<E)-1,L=p(X,E,1);for(Y=0;Y<H;){var K,_=L[b(e,G,z)];if(G+=15&_,(K=_>>>4)<16)T[Y++]=K;else{var P=0,D=0;for(16==K?(D=3+b(e,G,3),G+=2,P=T[Y-1]):17==K?(D=3+b(e,G,7),G+=3):18==K&&(D=11+b(e,G,127),G+=7);D--;)T[Y++]=P}}var O=T.subarray(0,F),U=T.subarray(F);Z=A(O),k=A(U),x=p(O,Z,1),S=p(U,k,1)}else w(1);if(G>R){h&&w(0);break}}d&&I(B+131072);for(var j=(1<<Z)-1,J=(1<<k)-1,Q=G;;Q=G){var q=(P=x[y(e,G)&j])>>>4;if((G+=15&P)>R){h&&w(0);break}if(P||w(2),q<256)s[B++]=q;else{if(256==q){Q=G,x=null;break}var $=q-254;if(q>264){var ee=r[Y=q-257];$=b(e,G,(1<<ee)-1)+c[Y],G+=ee}var te=S[y(e,G)&J],ne=te>>>4;if(te||w(3),G+=15&te,U=g[ne],ne>3&&(ee=a[ne],U+=y(e,G)&(1<<ee)-1,G+=ee),G>R){h&&w(0);break}d&&I(B+131072);for(var ie=B+$;B<ie;B+=4)s[B]=s[B-U],s[B+1]=s[B+1-U],s[B+2]=s[B+2-U],s[B+3]=s[B+3-U];B=ie}}l.l=x,l.p=Q,l.b=B,x&&(C=1,l.m=Z,l.d=S,l.n=k)}while(!C);return B==s.length?s:function(e,r,a){(null==r||r<0)&&(r=0),(null==a||a>e.length)&&(a=e.length);var o=new(e instanceof n?n:e instanceof i?i:t)(a-r);return o.set(e.subarray(r,a)),o}(s,0,B)},x=new t(0),S="undefined"!=typeof TextDecoder&&new TextDecoder;try{S.decode(x,{stream:!0})}catch(e){}return e.convert_streams=function(e){var t=new DataView(e),n=0;function i(){var e=t.getUint16(n);return n+=2,e}function r(){var e=t.getUint32(n);return n+=4,e}function a(e){C.setUint16(m,e),m+=2}function o(e){C.setUint32(m,e),m+=4}for(var s={signature:r(),flavor:r(),length:r(),numTables:i(),reserved:i(),totalSfntSize:r(),majorVersion:i(),minorVersion:i(),metaOffset:r(),metaLength:r(),metaOrigLength:r(),privOffset:r(),privLength:r()},l=0;Math.pow(2,l)<=s.numTables;)l++;l--;for(var c=16*Math.pow(2,l),u=16*s.numTables-c,g=12,d=[],h=0;h<s.numTables;h++)d.push({tag:r(),offset:r(),compLength:r(),origLength:r(),origChecksum:r()}),g+=16;var f,p=new Uint8Array(12+16*d.length+d.reduce((function(e,t){return e+t.origLength+4}),0)),I=p.buffer,C=new DataView(I),m=0;return o(s.flavor),a(s.numTables),a(c),a(l),a(u),d.forEach((function(e){o(e.tag),o(e.origChecksum),o(g),o(e.origLength),e.outOffset=g,(g+=e.origLength)%4!=0&&(g+=4-g%4)})),d.forEach((function(t){var n,i=e.slice(t.offset,t.offset+t.compLength);if(t.compLength!=t.origLength){var r=new Uint8Array(t.origLength);n=new Uint8Array(i,2),B(n,r)}else r=new Uint8Array(i);p.set(r,t.outOffset);var a=0;(g=t.outOffset+t.origLength)%4!=0&&(a=4-g%4),p.set(new Uint8Array(a).buffer,t.outOffset+t.origLength),f=g+a})),I.slice(0,f)},Object.defineProperty(e,"__esModule",{value:!0}),e}({}).convert_streams},function(e,t){var n,i={M:2,L:2,Q:4,C:6,Z:0},r={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},a=1,o=2,s=4,l=8,u=16,g=32;function d(e){if(!n){var t={R:o,L:a,D:s,C:u,U:g,T:l};n=new Map;var i=function(e){var i=0;r[e].split(",").forEach((function(r){var a=c(r.split("+"),2),o=a[0],s=a[1];o=parseInt(o,36),s=s?parseInt(s,36):0,n.set(i+=o,t[e]);for(var l=s;l--;)n.set(++i,t[e])}))};for(var d in r)i(d)}return n.get(e)||g}var h=1,f=2,p=3,I=4,C=[null,"isol","init","fina","medi"];function m(e){for(var t=new Uint8Array(e.length),n=g,i=h,r=-1,c=0;c<e.length;c++){var C=e.codePointAt(c),m=0|d(C),v=h;m&l||(n&(a|s|u)?m&(o|s|u)?(v=p,i!==h&&i!==p||t[r]++):m&(a|g)&&(i!==f&&i!==I||t[r]--):n&(o|g)&&(i!==f&&i!==I||t[r]--),i=t[c]=v,n=m,r=c,C>65535&&c++)}return t}function v(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var i=0;i<t.length;i++)if("number"===typeof t[i])return t[i]}function A(t){var n=Object.create(null),r=t["OS/2"],a=t.hhea,o=t.head.unitsPerEm,s=v(r&&r.sTypoAscender,a&&a.ascender,o),l={unitsPerEm:o,ascender:s,descender:v(r&&r.sTypoDescender,a&&a.descender,0),capHeight:v(r&&r.sCapHeight,s),xHeight:v(r&&r.sxHeight,s),lineGap:v(r&&r.sTypoLineGap,a&&a.lineGap),forEachGlyph:function(r,a,o,s){var c=0,u=1/l.unitsPerEm*a,g=function(t,n){for(var i=[],r=0;r<n.length;r++){var a=n.codePointAt(r);a>65535&&r++,i.push(e.U.codeToGlyph(t,a))}var o=t.GSUB;if(o){var s,l=o.lookupList,c=o.featureList,u=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,g=[];c.forEach((function(t){if(u.test(t.tag))for(var r=0;r<t.tab.length;r++)if(!g[t.tab[r]]){g[t.tab[r]]=!0;var a=l[t.tab[r]],o=/^(isol|init|fina|medi)$/.test(t.tag);o&&!s&&(s=m(n));for(var c=0;c<i.length;c++)s&&o&&C[s[c]]!==t.tag||e.U._applySubs(i,c,a,l)}}))}return i}(t,r),d=0,h=-1;return g.forEach((function(l,g){if(-1!==l){var f=n[l];if(!f){for(var p,I,C,m,v=e.U.glyphToPath(t,l),A=v.cmds,b=v.crds,y="",G=0,w=0,B=A.length;w<B;w++){var x=i[A[w]];y+=A[w];for(var S=1;S<=x;S++)y+=(S>1?",":"")+b[G++]}if(b.length){p=I=1/0,C=m=-1/0;for(var Z=0,k=b.length;Z<k;Z+=2){var R=b[Z],W=b[Z+1];R<p&&(p=R),W<I&&(I=W),R>C&&(C=R),W>m&&(m=W)}}else p=C=I=m=0;f=n[l]={index:l,advanceWidth:t.hmtx.aWidth[l],xMin:p,yMin:I,xMax:C,yMax:m,path:y,pathCommandCount:A.length}}-1!==h&&(c+=e.U.getPairAdjustment(t,h,l)*u),s.call(null,f,c,d),f.advanceWidth&&(c+=f.advanceWidth*u),o&&(c+=o*a),h=l}d+=r.codePointAt(d)>65535?2:1})),c}};return l}return function(n){var i=new Uint8Array(n,0,4),r=e._bin.readASCII(i,0,4);if("wOFF"===r)n=t(n);else if("wOF2"===r)throw new Error("woff2 fonts not supported");return A(e.parse(n)[0])}}],init:function(e,t,n){return n(e(),t())}}),a1={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},o1=new dp;function s1(){return(self.performance||Date).now()}var l1,c1=Object.create(null);function u1(e,t){!0,e=d1({},e);var n=s1();if(e.font=function(e){l1||(l1="undefined"===typeof document?{}:document.createElement("a"));return l1.href=e,l1.href}(e.font||a1.defaultFontURL),e.text=""+e.text,e.sdfGlyphSize=e.sdfGlyphSize||a1.sdfGlyphSize,null!=e.colorRanges){var i={};for(var r in e.colorRanges)if(e.colorRanges.hasOwnProperty(r)){var a=e.colorRanges[r];"number"!==typeof a&&(a=o1.set(a).getHex()),i[r]=a}e.colorRanges=i}Object.freeze(e);var o=a1.textureWidth,s=a1.sdfExponent,l=e.sdfGlyphSize,c=o/l*4,u=c1[l];if(!u){var g=document.createElement("canvas");g.width=o,g.height=256*l/c,(u=c1[l]={glyphCount:0,sdfGlyphSize:l,sdfCanvas:g,sdfTexture:new Hh(g,void 0,void 0,void 0,tg,tg),contextLost:!1,glyphsByFont:new Map}).sdfTexture.generateMipmaps=!1,function(e){var t=e.sdfCanvas;t.addEventListener("webglcontextlost",(function(t){console.log("Context Lost",t),t.preventDefault(),e.contextLost=!0})),t.addEventListener("webglcontextrestored",(function(t){console.log("Context Restored",t),e.contextLost=!1;var n=[];e.glyphsByFont.forEach((function(t){t.forEach((function(t){n.push(g1(t,e,!0))}))})),Promise.all(n).then((function(){h1(e),e.sdfTexture.needsUpdate=!0}))}))}(u)}var d=u,h=d.sdfTexture,f=d.sdfCanvas,p=u.glyphsByFont.get(e.font);p||u.glyphsByFont.set(e.font,p=new Map),p1(e).then((function(i){var r=i.glyphIds,a=i.glyphPositions,g=i.fontSize,d=i.unitsPerEm,I=i.timings,C=[],m=new Float32Array(4*r.length),v=g/d,A=0,b=0,y=s1();r.forEach((function(e,t){var n=p.get(e);if(!n){var o=i.glyphData[e],s=o.path,c=o.pathBounds,g=Math.max(c[2]-c[0],c[3]-c[1])/l*(a1.sdfMargin*l+.5),d=u.glyphCount++,h=[c[0]-g,c[1]-g,c[2]+g,c[3]+g];p.set(e,n={path:s,atlasIndex:d,sdfViewBox:h}),C.push(n)}var f=n.sdfViewBox,I=a[b++],y=a[b++];m[A++]=I+f[0]*v,m[A++]=y+f[1]*v,m[A++]=I+f[2]*v,m[A++]=y+f[3]*v,r[t]=n.atlasIndex})),I.quads=(I.quads||0)+(s1()-y);var G=s1();I.sdf={};var w=f.height,B=Math.ceil(u.glyphCount/c),x=Math.pow(2,Math.ceil(Math.log2(B*l)));x>w&&(console.info("Increasing SDF texture size ".concat(w,"->").concat(x)),i1(f,o,x),h.dispose()),Promise.all(C.map((function(t){return g1(t,u,e.gpuAccelerateSDF).then((function(e){var n=e.timing;I.sdf[t.atlasIndex]=n}))}))).then((function(){C.length&&!u.contextLost&&(h1(u),h.needsUpdate=!0),I.sdfTotal=s1()-G,I.total=s1()-n,t(Object.freeze({parameters:e,sdfTexture:h,sdfGlyphSize:l,sdfExponent:s,glyphBounds:m,glyphAtlasIndices:r,glyphColors:i.glyphColors,caretPositions:i.caretPositions,caretHeight:i.caretHeight,chunkedBounds:i.chunkedBounds,ascender:i.ascender,descender:i.descender,lineHeight:i.lineHeight,capHeight:i.capHeight,xHeight:i.xHeight,topBaseline:i.topBaseline,blockBounds:i.blockBounds,visibleBounds:i.visibleBounds,timings:i.timings}))}))})),Promise.resolve().then((function(){u.contextLost||function(e){e._warm||(O0.webgl.isSupported(e),e._warm=!0)}(f)}))}function g1(e,t,n){var i=e.path,r=e.atlasIndex,a=e.sdfViewBox,o=t.sdfGlyphSize,s=t.sdfCanvas;if(t.contextLost)return Promise.resolve({timing:-1});var l=a1.textureWidth,c=a1.sdfExponent,u=Math.max(a[2]-a[0],a[3]-a[1]),g=Math.floor(r/4);return function(e,t,n,i,r,a,o,s,l,c){return arguments.length>10&&void 0!==arguments[10]&&!arguments[10]?n1(e,t,n,i,r,a,o,s,l,c):Q0(e,t,n,i,r,a,o,s,l,c).then(null,(function(u){return P0||(console.warn("WebGL SDF generation failed, falling back to JS",u),P0=!0),n1(e,t,n,i,r,a,o,s,l,c)}))}(o,o,i,a,u,c,s,g%(l/o)*o,Math.floor(g/(l/o))*o,r%4,n)}function d1(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function h1(e){if("function"!==typeof createImageBitmap){console.info("Safari<15: applying SDF canvas workaround");var t=e.sdfCanvas,n=e.sdfTexture,i=t.width,r=t.height,a=e.sdfCanvas.getContext("webgl"),o=n.image.data;o&&o.length===i*r*4||(o=new Uint8Array(i*r*4),n.image={width:i,height:r,data:o},n.flipY=!1,n.isDataTexture=!0),a.readPixels(0,0,i,r,a.RGBA,a.UNSIGNED_BYTE,o)}}var f1=x0({name:"Typesetter",dependencies:[a1,r1,function(e,t,n){var i=n.defaultFontURL,r=Object.create(null),a=1/0,o=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,s="[^\\S\\u00A0]",l=new RegExp("".concat(s,"|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]"));function u(t,n){t||(t=i);var a=r[t];a?a.pending?a.pending.push(n):n(a):(r[t]={pending:[n]},function(t,n){!function r(){var a=function(e){console.error("Failure loading font ".concat(t).concat(t===i?"":"; trying fallback"),e),t!==i&&(t=i,r())};try{var o=new XMLHttpRequest;o.open("get",t,!0),o.responseType="arraybuffer",o.onload=function(){if(o.status>=400)a(new Error(o.statusText));else if(o.status>0)try{var t=e(o.response);n(t)}catch(i){a(i)}},o.onerror=a,o.send()}catch(s){a(s)}}()}(t,(function(e){var n=r[t].pending;r[t]=e,n.forEach((function(t){return t(e)}))})))}function g(e,n){var r=e.text,g=void 0===r?"":r,I=e.font,C=void 0===I?i:I,m=(e.sdfGlyphSize,e.fontSize),v=void 0===m?1:m,A=e.letterSpacing,b=void 0===A?0:A,y=e.lineHeight,G=void 0===y?"normal":y,w=e.maxWidth,B=void 0===w?a:w,x=e.direction,S=e.textAlign,Z=void 0===S?"left":S,k=e.textIndent,R=void 0===k?0:k,W=e.whiteSpace,M=void 0===W?"normal":W,V=e.overflowWrap,F=void 0===V?"normal":V,N=e.anchorX,H=void 0===N?0:N,T=e.anchorY,X=void 0===T?0:T,Y=e.includeCaretPositions,E=void 0!==Y&&Y,z=e.chunkedBoundsSize,L=void 0===z?8192:z,K=e.colorRanges,_=void 0===K?null:K,P=arguments.length>2&&void 0!==arguments[2]&&arguments[2],D=f(),O={fontLoad:0,typesetting:0};g.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),g=g.replace(/\r\n/g,"\n").replace(/\r/g,"\n")),v=+v,b=+b,B=+B,G=G||"normal",R=+R,u(C,(function(e){var i=isFinite(B),r=null,u=null,I=null,C=null,m=null,A=null,y=null,w=0,S=0,k="nowrap"!==M,W=e.ascender,V=e.descender,N=e.unitsPerEm,T=e.lineGap,Y=e.capHeight,z=e.xHeight;O.fontLoad=f()-D;var K=f(),U=v/N;"normal"===G&&(G=(W-V+T)/N);var j=((G*=v)-(W-V)*U)/2,J=-(W*U+j),Q=Math.min(G,(W-V)*U),q=(W+V)/2*U-Q/2,$=R,ee=new p,te=[ee];e.forEachGlyph(g,v,b,(function(e,t,n){var r,a=g.charAt(n),c=e.advanceWidth*U,u=ee.count;if("isEmpty"in e||(e.isWhitespace=!!a&&new RegExp(s).test(a),e.canBreakAfter=!!a&&l.test(a),e.isEmpty=e.xMin===e.xMax||e.yMin===e.yMax||o.test(a)),e.isWhitespace||e.isEmpty||S++,k&&i&&!e.isWhitespace&&t+c+$>B&&u){if(ee.glyphAt(u-1).glyphObj.canBreakAfter)r=new p,$=-t;else for(var d=u;d--;){if(0===d&&"break-word"===F){r=new p,$=-t;break}if(ee.glyphAt(d).glyphObj.canBreakAfter){var h=(r=ee.splitAt(d+1)).glyphAt(0).x;$-=h;for(var f=r.count;f--;)r.glyphAt(f).x-=h;break}}r&&(ee.isSoftWrapped=!0,ee=r,te.push(ee),w=B)}var I=ee.glyphAt(ee.count);I.glyphObj=e,I.x=t+$,I.width=c,I.charIndex=n,"\n"===a&&(ee=new p,te.push(ee),$=-(t+c+b*v)+R)})),te.forEach((function(e){for(var t=e.count;t--;){var n=e.glyphAt(t),i=n.glyphObj,r=n.x,a=n.width;if(!i.isWhitespace)return e.width=r+a,void(e.width>w&&(w=e.width))}}));var ne=0,ie=0;if(H&&("number"===typeof H?ne=-H:"string"===typeof H&&(ne=-w*("left"===H?0:"center"===H?.5:"right"===H?1:d(H)))),X)if("number"===typeof X)ie=-X;else if("string"===typeof X){var re=te.length*G;ie="top"===X?0:"top-baseline"===X?-J:"top-cap"===X?-J-Y*U:"top-ex"===X?-J-z*U:"middle"===X?re/2:"bottom"===X?re:"bottom-baseline"===X?re-j+V*U:d(X)*re}if(!P){var ae=t.getEmbeddingLevels(g,x);r=new Uint16Array(S),u=new Float32Array(2*S),I={},A=[a,a,-a,-a],y=[];var oe=J;E&&(m=new Float32Array(3*g.length)),_&&(C=new Uint8Array(3*S));var se,le,ce=0,ue=-1,ge=-1;if(te.forEach((function(n,i){var o=n.count,s=n.width;if(o>0){for(var l=0,d=o;d--&&n.glyphAt(d).glyphObj.isWhitespace;)l++;var f=0,p=0;if("center"===Z)f=(w-s)/2;else if("right"===Z)f=w-s;else if("justify"===Z&&n.isSoftWrapped){for(var v=0,b=o-l;b--;)n.glyphAt(b).glyphObj.isWhitespace&&v++;p=(w-s)/v}if(p||f)for(var B=0,x=0;x<o;x++){var S=n.glyphAt(x),k=S.glyphObj;S.x+=f+B,0!==p&&k.isWhitespace&&x<o-l&&(B+=p,S.width+=p)}for(var R,W=t.getReorderSegments(g,ae,n.glyphAt(0).charIndex,n.glyphAt(n.count-1).charIndex),M=0;M<W.length;M++)for(var V=c(W[M],2),F=V[0],N=V[1],H=1/0,T=-1/0,X=0;X<o;X++)if(n.glyphAt(X).charIndex>=F){for(var Y=X,z=X;z<o;z++){var K=n.glyphAt(z);if(K.charIndex>N)break;z<o-l&&(H=Math.min(H,K.x),T=Math.max(T,K.x+K.width))}for(var P=Y;P<z;P++){var D=n.glyphAt(P);D.x=T-(D.x+D.width-H)}break}for(var O=function(e){return R=e},j=0;j<o;j++){var J=n.glyphAt(j),Q=(R=J.glyphObj).index,$=1&ae.levels[J.charIndex];if($){var ee=t.getMirroredCharacter(g[J.charIndex]);ee&&e.forEachGlyph(ee,0,0,O)}if(E){var te=J.charIndex,re=J.x+ne,de=J.x+J.width+ne;m[3*te]=$?de:re,m[3*te+1]=$?re:de,m[3*te+2]=oe+q+ie;var he=te-ue;he>1&&h(m,ue,he),ue=te}if(_)for(var fe=J.charIndex;fe>ge;)ge++,_.hasOwnProperty(ge)&&(le=_[ge]);if(!R.isWhitespace&&!R.isEmpty){var pe=ce++;I[Q]||(I[Q]={path:R.path,pathBounds:[R.xMin,R.yMin,R.xMax,R.yMax]});var Ie=J.x+ne,Ce=oe+ie;u[2*pe]=Ie,u[2*pe+1]=Ce;var me=Ie+R.xMin*U,ve=Ce+R.yMin*U,Ae=Ie+R.xMax*U,be=Ce+R.yMax*U;me<A[0]&&(A[0]=me),ve<A[1]&&(A[1]=ve),Ae>A[2]&&(A[2]=Ae),be>A[3]&&(A[3]=be),pe%L===0&&(se={start:pe,end:pe,rect:[a,a,-a,-a]},y.push(se)),se.end++;var ye=se.rect;if(me<ye[0]&&(ye[0]=me),ve<ye[1]&&(ye[1]=ve),Ae>ye[2]&&(ye[2]=Ae),be>ye[3]&&(ye[3]=be),r[pe]=Q,_){var Ge=3*pe;C[Ge]=le>>16&255,C[Ge+1]=le>>8&255,C[Ge+2]=255&le}}}}oe-=G})),m){var de=g.length-ue;de>1&&h(m,ue,de)}}O.typesetting=f()-K,n({glyphIds:r,glyphPositions:u,glyphData:I,caretPositions:m,caretHeight:Q,glyphColors:C,chunkedBounds:y,fontSize:v,unitsPerEm:N,ascender:W*U,descender:V*U,capHeight:Y*U,xHeight:z*U,lineHeight:G,topBaseline:J,blockBounds:[ne,ie-te.length*G,ne+w,ie],visibleBounds:A,timings:O})}))}function d(e){var t=e.match(/^([\d.]+)%$/),n=t?parseFloat(t[1]):NaN;return isNaN(n)?0:n/100}function h(e,t,n){for(var i=e[3*t],r=e[3*t+1],a=e[3*t+2],o=(r-i)/n,s=0;s<n;s++){var l=3*(t+s);e[l]=i+o*s,e[l+1]=i+o*(s+1),e[l+2]=a}}function f(){return(self.performance||Date).now()}function p(){this.data=[]}var I=["glyphObj","x","width","charIndex"];return p.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/I.length)},glyphAt:function(e){var t=p.flyweight;return t.data=this.data,t.index=e,t},splitAt:function(e){var t=new p;return t.data=this.data.splice(e*I.length),t}},p.flyweight=I.reduce((function(e,t,n,i){return Object.defineProperty(e,t,{get:function(){return this.data[this.index*I.length+n]},set:function(e){this.data[this.index*I.length+n]=e}}),e}),{data:null,index:0}),{typeset:g,measure:function(e,t){g(e,(function(e){var n=c(e.blockBounds,4),i=n[0],r=n[1],a=n[2],o=n[3];t({width:a-i,height:o-r})}),{metricsOnly:!0})},loadFont:u}},R0],init:function(e,t,n,i){var r=e.defaultFontURL;return n(t,i(),{defaultFontURL:r})}}),p1=x0({name:"Typesetter",dependencies:[f1],init:function(e){return function(t){return new Promise((function(n){e.typeset(t,n)}))}},getTransferables:function(e){var t=[e.glyphPositions.buffer,e.glyphIds.buffer];return e.caretPositions&&t.push(e.caretPositions.buffer),e.glyphColors&&t.push(e.glyphColors.buffer),t}});var I1={};var C1="aTroikaGlyphIndex",m1=function(e){kc(n,e);var t=Vc(n);function n(){var e;return ka(this,n),(e=t.call(this)).detail=1,e.curveRadius=0,e.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],e.boundingSphere=new hf,e.boundingBox=new Uh,e}return Xe(n,[{key:"computeBoundingSphere",value:function(){}},{key:"computeBoundingBox",value:function(){}},{key:"setSide",value:function(e){var t=this.getIndex().count;this.setDrawRange(e===$c?t/2:0,e===eu?t:t/2)}},{key:"detail",get:function(){return this._detail},set:function(e){var t=this;if(e!==this._detail){this._detail=e,("number"!==typeof e||e<1)&&(e=1);var n=function(e){var t=I1[e];if(!t){for(var n=new SI(1,1,e,e),i=n.clone(),r=n.attributes,a=i.attributes,o=new Ep,s=r.uv.count,l=0;l<s;l++)a.position.array[3*l]*=-1,a.normal.array[3*l+2]*=-1;["position","normal","uv"].forEach((function(e){o.setAttribute(e,new Wp([].concat(We(r[e].array),We(a[e].array)),r[e].itemSize))})),o.setIndex([].concat(We(n.index.array),We(i.index.array.map((function(e){return e+s}))))),o.translate(.5,.5,0),t=I1[e]=o}return t}(e);["position","normal","uv"].forEach((function(e){t.attributes[e]=n.attributes[e].clone()})),this.setIndex(n.getIndex().clone())}}},{key:"curveRadius",get:function(){return this._curveRadius},set:function(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}},{key:"updateGlyphs",value:function(e,t,n,i,r){v1(this,"aTroikaGlyphBounds",e,4),v1(this,C1,t,1),v1(this,"aTroikaGlyphColor",r,3),this._blockBounds=n,this._chunkedBounds=i,this.instanceCount=t.length,this._updateBounds()}},{key:"_updateBounds",value:function(){var e=this._blockBounds;if(e){var t=this.curveRadius,n=this.boundingBox;if(t){var i=Math.PI,r=Math.floor,a=Math.min,o=Math.max,s=Math.sin,l=Math.cos,c=i/2,u=2*i,g=Math.abs(t),d=e[0]/g,h=e[2]/g,f=r((d+c)/u)!==r((h+c)/u)?-g:a(s(d)*g,s(h)*g),p=r((d-c)/u)!==r((h-c)/u)?g:o(s(d)*g,s(h)*g),I=r((d+i)/u)!==r((h+i)/u)?2*g:o(g-l(d)*g,g-l(h)*g);n.min.set(f,e[1],t<0?-I:0),n.max.set(p,e[3],t<0?0:I)}else n.min.set(e[0],e[1],0),n.max.set(e[2],e[3],0);n.getBoundingSphere(this.boundingSphere)}}},{key:"applyClipRect",value:function(e){var t=this.getAttribute(C1).count,n=this._chunkedBounds;if(n)for(var i=n.length;i--;){t=n[i].end;var r=n[i].rect;if(r[1]<e.w&&r[3]>e.y&&r[0]<e.z&&r[2]>e.x)break}this.instanceCount=t}}]),n}(eG);function v1(e,t,n,i){var r=e.getAttribute(t);n?r&&r.array.length===n.length?(r.array.set(n),r.needsUpdate=!0):(e.setAttribute(t,new zv(n,i)),delete e._maxInstanceCount,e.dispose()):r&&e.deleteAttribute(t)}var A1="\nvec4 bounds = aTroikaGlyphBounds;\nbounds.xz += uTroikaPositionOffset.x;\nbounds.yw -= uTroikaPositionOffset.y;\n\nvec4 outlineBounds = vec4(\n  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,\n  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius\n);\nvec4 clippedBounds = vec4(\n  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),\n  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)\n);\n\nvec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);\n\nposition.xy = mix(bounds.xy, bounds.zw, clippedXY);\n\nuv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);\n\nfloat rad = uTroikaCurveRadius;\nif (rad != 0.0) {\n  float angle = position.x / rad;\n  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);\n  normal.xz = vec2(sin(angle), cos(angle));\n}\n  \nposition = uTroikaOrient * position;\nnormal = uTroikaOrient * normal;\n\nvTroikaGlyphUV = clippedXY.xy;\nvTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);\n\n".concat("\nfloat txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;\nvec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;\nvec2 txStartUV = txUvPerSquare * vec2(\n  mod(floor(aTroikaGlyphIndex / 4.0), txCols),\n  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)\n);\nvTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);\nvTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);\n"),b1="\nuniform sampler2D uTroikaSDFTexture;\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform float uTroikaSDFExponent;\nuniform float uTroikaDistanceOffset;\nuniform float uTroikaFillOpacity;\nuniform float uTroikaOutlineOpacity;\nuniform float uTroikaBlurRadius;\nuniform vec3 uTroikaStrokeColor;\nuniform float uTroikaStrokeWidth;\nuniform float uTroikaStrokeOpacity;\nuniform bool uTroikaSDFDebug;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying float vTroikaTextureChannel;\nvarying vec2 vTroikaGlyphDimensions;\n\nfloat troikaSdfValueToSignedDistance(float alpha) {\n  // Inverse of exponential encoding in webgl-sdf-generator\n  ".concat("\n  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);\n  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;\n  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);\n  return signedDist;\n}\n\nfloat troikaGlyphUvToSdfValue(vec2 glyphUV) {\n  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);\n  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);\n  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1\n  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;\n}\n\nfloat troikaGlyphUvToDistance(vec2 uv) {\n  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));\n}\n\nfloat troikaGetAADist() {\n  ","\n  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300\n  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;\n  #else\n  return vTroikaGlyphDimensions.x / 64.0;\n  #endif\n}\n\nfloat troikaGetFragDistValue() {\n  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);\n  float distance = troikaGlyphUvToDistance(clampedGlyphUV);\n \n  // Extrapolate distance when outside bounds:\n  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : \n    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);\n\n  ","\n\n  return distance;\n}\n\nfloat troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {\n  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)\n  float alpha = step(-distanceOffset, -distance);\n  #else\n\n  float alpha = smoothstep(\n    distanceOffset + aaDist,\n    distanceOffset - aaDist,\n    distance\n  );\n  #endif\n\n  return alpha;\n}\n");var y1=new fp({color:16777215,side:eu,transparent:!0}),G1=8421504,w1=new yf,B1=new Ph,x1=new Ph,S1=[],Z1=new Ph,k1="+x+y";function R1(e){return Array.isArray(e)?e[0]:e}var W1=function(){var e=new rI(new SI(1,1),y1);return W1=function(){return e},e},M1=function(){var e=new rI(new SI(1,1,32,1),y1);return M1=function(){return e},e},V1={type:"syncstart"},F1={type:"synccomplete"},N1=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],H1=N1.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail"),T1=function(e){kc(n,e);var t=Vc(n);function n(){var e;ka(this,n);var i=new m1;return(e=t.call(this,i,null)).text="",e.anchorX=0,e.anchorY=0,e.curveRadius=0,e.direction="auto",e.font=null,e.fontSize=.1,e.letterSpacing=0,e.lineHeight="normal",e.maxWidth=1/0,e.overflowWrap="normal",e.textAlign="left",e.textIndent=0,e.whiteSpace="normal",e.material=null,e.color=null,e.colorRanges=null,e.outlineWidth=0,e.outlineColor=0,e.outlineOpacity=1,e.outlineBlur=0,e.outlineOffsetX=0,e.outlineOffsetY=0,e.strokeWidth=0,e.strokeColor=G1,e.strokeOpacity=1,e.fillOpacity=1,e.depthOffset=0,e.clipRect=null,e.orientation=k1,e.glyphGeometryDetail=1,e.sdfGlyphSize=null,e.gpuAccelerateSDF=!0,e.debugSDF=!1,e}return Xe(n,[{key:"sync",value:function(e){var t=this;this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(V1),u1({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},(function(n){t._isSyncing=!1,t._textRenderInfo=n,t.geometry.updateGlyphs(n.glyphBounds,n.glyphAtlasIndices,n.blockBounds,n.chunkedBounds,n.glyphColors);var i=t._queuedSyncs;i&&(t._queuedSyncs=null,t._needsSync=!0,t.sync((function(){i.forEach((function(e){return e&&e()}))}))),t.dispatchEvent(F1),e&&e()}))))}},{key:"onBeforeRender",value:function(e,t,n,i,r,a){this.sync(),r.isTroikaTextMaterial&&this._prepareForRender(r),r._hadOwnSide=r.hasOwnProperty("side"),this.geometry.setSide(r._actualSide=r.side),r.side=qc}},{key:"onAfterRender",value:function(e,t,n,i,r,a){r._hadOwnSide?r.side=r._actualSide:delete r.side}},{key:"dispose",value:function(){this.geometry.dispose()}},{key:"textRenderInfo",get:function(){return this._textRenderInfo||null}},{key:"material",get:function(){var e=this._derivedMaterial,t=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=y1.clone());if(e&&e.baseMaterial===t||(e=this._derivedMaterial=function(e){var t=E0(e,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new Ch},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new Th(0,0,0,0)},uTroikaClipRect:{value:new Th(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new Ch},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new dp},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new mh},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:"\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform vec4 uTroikaTotalBounds;\nuniform vec4 uTroikaClipRect;\nuniform mat3 uTroikaOrient;\nuniform bool uTroikaUseGlyphColors;\nuniform float uTroikaDistanceOffset;\nuniform float uTroikaBlurRadius;\nuniform vec2 uTroikaPositionOffset;\nuniform float uTroikaCurveRadius;\nattribute vec4 aTroikaGlyphBounds;\nattribute float aTroikaGlyphIndex;\nattribute vec3 aTroikaGlyphColor;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying float vTroikaTextureChannel;\nvarying vec3 vTroikaGlyphColor;\nvarying vec2 vTroikaGlyphDimensions;\n",vertexTransform:A1,fragmentDefs:b1,fragmentColorTransform:"\nfloat aaDist = troikaGetAADist();\nfloat fragDistance = troikaGetFragDistValue();\nfloat edgeAlpha = uTroikaSDFDebug ?\n  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :\n  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));\n\n#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)\nvec4 fillRGBA = gl_FragColor;\nfillRGBA.a *= uTroikaFillOpacity;\nvec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);\nif (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;\ngl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(\n  -uTroikaStrokeWidth - aaDist,\n  -uTroikaStrokeWidth + aaDist,\n  fragDistance\n));\ngl_FragColor.a *= edgeAlpha;\n#endif\n\nif (edgeAlpha == 0.0) {\n  discard;\n}\n",customRewriter:function(e){var t=e.vertexShader,n=e.fragmentShader,i=/\buniform\s+vec3\s+diffuse\b/;return i.test(n)&&(n=n.replace(i,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),i.test(t)||(t=t.replace(W0,"uniform vec3 diffuse;\n$&\nvTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;\n"))),{vertexShader:t,fragmentShader:n}}});return t.transparent=!0,Object.defineProperties(t,{isTroikaTextMaterial:{value:!0},shadowSide:{get:function(){return this.side},set:function(){}}}),t}(t),t.addEventListener("dispose",(function n(){t.removeEventListener("dispose",n),e.dispose()}))),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){var n=e._outlineMtl;return n||((n=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}})).isTextOutlineMaterial=!0,n.depthWrite=!1,n.map=null,e.addEventListener("dispose",(function t(){e.removeEventListener("dispose",t),n.dispose()}))),[n,e]}return e},set:function(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}},{key:"glyphGeometryDetail",get:function(){return this.geometry.detail},set:function(e){this.geometry.detail=e}},{key:"curveRadius",get:function(){return this.geometry.curveRadius},set:function(e){this.geometry.curveRadius=e}},{key:"customDepthMaterial",get:function(){return R1(this.material).getDepthMaterial()}},{key:"customDistanceMaterial",get:function(){return R1(this.material).getDistanceMaterial()}},{key:"_prepareForRender",value:function(e){var t=e.isTextOutlineMaterial,n=e.uniforms,i=this.textRenderInfo;if(i){var r=i.sdfTexture,a=i.blockBounds;n.uTroikaSDFTexture.value=r,n.uTroikaSDFTextureSize.value.set(r.image.width,r.image.height),n.uTroikaSDFGlyphSize.value=i.sdfGlyphSize,n.uTroikaSDFExponent.value=i.sdfExponent,n.uTroikaTotalBounds.value.fromArray(a),n.uTroikaUseGlyphColors.value=!t&&!!i.glyphColors;var o,s,l,u=0,g=0,d=0,h=0,f=0;if(t){var p=this.outlineWidth,I=this.outlineOffsetX,C=this.outlineOffsetY,m=this.outlineBlur,v=this.outlineOpacity;u=this._parsePercent(p)||0,g=Math.max(0,this._parsePercent(m)||0),o=v,h=this._parsePercent(I)||0,f=this._parsePercent(C)||0}else(d=Math.max(0,this._parsePercent(this.strokeWidth)||0))&&(l=this.strokeColor,n.uTroikaStrokeColor.value.set(null==l?G1:l),null==(s=this.strokeOpacity)&&(s=1)),o=this.fillOpacity;n.uTroikaDistanceOffset.value=u,n.uTroikaPositionOffset.value.set(h,f),n.uTroikaBlurRadius.value=g,n.uTroikaStrokeWidth.value=d,n.uTroikaStrokeOpacity.value=s,n.uTroikaFillOpacity.value=null==o?1:o,n.uTroikaCurveRadius.value=this.curveRadius||0;var A=this.clipRect;if(A&&Array.isArray(A)&&4===A.length)n.uTroikaClipRect.value.fromArray(A);else{var b=100*(this.fontSize||.1);n.uTroikaClipRect.value.set(a[0]-b,a[1]-b,a[2]+b,a[3]+b)}this.geometry.applyClipRect(n.uTroikaClipRect.value)}n.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;var y=t?this.outlineColor||0:this.color;if(null==y)delete e.color;else{var G=e.hasOwnProperty("color")?e.color:e.color=new dp;y===G._input&&"object"!==typeof y||G.set(G._input=y)}var w=this.orientation||k1;if(w!==e._orientation){var B=n.uTroikaOrient.value,x=(w=w.replace(/[^-+xyz]/g,""))!==k1&&w.match(/^([-+])([xyz])([-+])([xyz])$/);if(x){var S=c(x,5),Z=S[1],k=S[2],R=S[3],W=S[4];B1.set(0,0,0)[k]="-"===Z?1:-1,x1.set(0,0,0)[W]="-"===R?-1:1,w1.lookAt(Z1,B1.cross(x1),x1),B.setFromMatrix4(w1)}else B.identity();e._orientation=w}}},{key:"_parsePercent",value:function(e){if("string"===typeof e){var t=e.match(/^(-?[\d.]+)%$/),n=t?parseFloat(t[1]):NaN;e=(isNaN(n)?0:n/100)*this.fontSize}return e}},{key:"localPositionToTextCoords",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ch;t.copy(e);var n=this.curveRadius;return n&&(t.x=Math.atan2(e.x,Math.abs(n)-Math.abs(e.z))*Math.abs(n)),t}},{key:"worldPositionToTextCoords",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ch;return B1.copy(e),this.localPositionToTextCoords(this.worldToLocal(B1),t)}},{key:"raycast",value:function(e,t){var n=this.textRenderInfo,i=this.curveRadius;if(n){for(var r=n.blockBounds,a=i?M1():W1(),o=a.geometry,s=o.attributes,l=s.position,c=s.uv,u=0;u<c.count;u++){var g=r[0]+c.getX(u)*(r[2]-r[0]),d=r[1]+c.getY(u)*(r[3]-r[1]),h=0;i&&(h=i-Math.cos(g/i)*i,g=Math.sin(g/i)*i),l.setXYZ(u,g,d,h)}o.boundingSphere=this.geometry.boundingSphere,o.boundingBox=this.geometry.boundingBox,a.matrixWorld=this.matrixWorld,a.material.side=this.material.side,S1.length=0,a.raycast(e,S1);for(var f=0;f<S1.length;f++)S1[f].object=this,t.push(S1[f])}}},{key:"copy",value:function(e){var t=this,i=this.geometry;return Yc(Rc(n.prototype),"copy",this).call(this,e),this.geometry=i,H1.forEach((function(n){t[n]=e[n]})),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}(rI);N1.forEach((function(e){var t="_private_"+e;Object.defineProperty(T1.prototype,e,{get:function(){return this[t]},set:function(e){e!==this[t]&&(this[t]=e,this._needsSync=!0)}})}));new WeakMap;new WeakMap;var X1=["sdfGlyphSize","anchorX","anchorY","font","fontSize","children","characters","onSync"],Y1=t.forwardRef((function(e,n){var i=e.sdfGlyphSize,r=void 0===i?64:i,a=e.anchorX,o=void 0===a?"center":a,s=e.anchorY,l=void 0===s?"middle":s,u=e.font,g=e.fontSize,d=void 0===g?1:g,h=e.children,f=e.characters,p=e.onSync,I=Fe(e,X1),C=ox((function(e){return e.invalidate})),m=c(t.useState((function(){return new T1})),1)[0],A=t.useMemo((function(){var e=[],n="";return t.Children.forEach(h,(function(t){"string"===typeof t||"number"===typeof t?n+=t:e.push(t)})),[e,n]}),[h]),b=c(A,2),y=b[0],G=b[1];return dB((function(){return new Promise((function(e){return function(e,t){var n=e.font,i=e.characters;u1({font:n,sdfGlyphSize:e.sdfGlyphSize,text:Array.isArray(i)?i.join("\n"):""+i},t)}({font:u,characters:f},e)}))}),["troika-text",u,f]),t.useLayoutEffect((function(){m.sync((function(){C(),p&&p(m)}))})),t.useEffect((function(){return function(){return m.dispose()}}),[m]),t.createElement("primitive",v({object:m,ref:n,font:u,text:G,anchorX:o,anchorY:l,fontSize:d,sdfGlyphSize:r},I),y)}));function E1(e){var t=bZ("./models/kontrol_odasi2.glb"),n=t.nodes,i=t.materials;return(0,u.jsxs)("group",Ve(Ve({},e),{},{dispose:null,children:[(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Hud_Screen_Backing_01_(9)"].geometry,material:i.FX_HUD,position:[7.81,1.1,-1.88],rotation:[1.57,1.37,-1.57],scale:[.75,.83,.77],children:(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Hud_Barrier_01_(4)004"].geometry,material:i.FX_HUD_02,position:[.57,0,0],rotation:[0,0,-1.57],scale:[.95,.94,.91]})}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Hud_Screen_Backing_01_(8)"].geometry,material:i.FX_HUD,position:[-6.83,.38,7.59],rotation:[.28,-.77,.2],scale:[.99,1.09,1.02]}),(0,u.jsxs)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Hud_Screen_Backing_01_(7)"].geometry,material:i.FX_HUD,position:[-7.26,1.08,-1.88],rotation:[1.57,-1.37,1.57],scale:[.75,.83,.77],children:[(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Hud_Text_Arrow_01_(2)006"].geometry,material:i.FX_HUD_02,position:[-.32,-.12,0],rotation:[0,0,1.57],scale:[.93,1.03,1]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Hud_Text_Arrow_01_(3)006"].geometry,material:i.FX_HUD_02,position:[-.32,-.21,0],rotation:[0,0,1.57],scale:[.93,1.03,1]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Hud_Text_04_(2)006"].geometry,material:i.FX_HUD_02,position:[-.44,-.12,0],scale:[1.03,.93,1]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Hud_Text_04_(3)006"].geometry,material:i.FX_HUD_02,position:[-.41,-.21,0],scale:[.61,.93,1]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Hud_Text_02_(1)006"].geometry,material:i.FX_HUD_02,position:[-.41,.17,0],rotation:[0,0,-Math.PI],scale:[1.03,.93,1]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Hud_Box_03_(1)006"].geometry,material:i.FX_HUD_02,position:[-.41,.16,0],scale:[.72,.65,.7]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Hud_Barrier_01_(5)006"].geometry,material:i.FX_HUD_02,position:[-.56,0,0],rotation:[0,0,1.57],scale:[.95,.94,.91]})]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Hud_Screen_Backing_01_(6)"].geometry,material:i.FX_HUD,position:[-7.18,1.12,2.3],rotation:[1.57,-1.37,1.57],scale:[.8,.89,.82]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Hud_Screen_Backing_01_(5)"].geometry,material:i.FX_HUD,position:[1.82,1.05,7.36],rotation:[.2,0,0],scale:[.98,1.09,1.01]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Hud_Screen_Backing_01_(3)"].geometry,material:i.FX_HUD,position:[-1.34,1.05,7.36],rotation:[.2,0,0],scale:[.98,1.09,1.01]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Hud_Screen_Backing_01_(11)"].geometry,material:i.FX_HUD,position:[7.34,.32,7.62],rotation:[.28,.77,-.2],scale:[.98,1.09,1.01]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Hud_Screen_Backing_01_(10)"].geometry,material:i.FX_HUD,position:[7.88,1.14,2.3],rotation:[1.57,1.37,-1.57],scale:[.8,.89,.82]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Bld_Bridge_Rear_Wall_01002.geometry,material:i.Material,position:[6.98,1.8,9.28],rotation:[Math.PI,-.59,Math.PI]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Bld_Bridge_Rear_Wall_01003.geometry,material:i.Material,position:[9.22,1.8,4.93],rotation:[Math.PI,-1.56,Math.PI]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Bld_Bridge_Rear_Wall_01004.geometry,material:i.Material,position:[-8.49,2.09,4.92],rotation:[0,1.56,0]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Bld_Bridge_Rear_Wall_01005.geometry,material:i.Material,position:[-6.18,2.09,9.23],rotation:[-Math.PI,.62,-Math.PI]}),(0,u.jsxs)("group",{position:[6.73,1.59,8.86],rotation:[Math.PI/2,0,2.55],scale:.17,children:[(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane_1.geometry,material:i["Material.002"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane_2.geometry,material:i["Material.003"]})]}),(0,u.jsxs)("group",{position:[8.8,1.68,4.64],rotation:[Math.PI/2,0,1.59],scale:.14,children:[(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane001_1.geometry,material:i["Material.002"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane001_2.geometry,material:i["Material.003"]})]}),(0,u.jsxs)("group",{position:[-5.82,1.48,8.86],rotation:[Math.PI/2,0,-2.52],scale:.18,children:[(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_1.geometry,material:i["Material.002"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane002_2.geometry,material:i["Material.003"]})]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Cube014.geometry,material:i.MAT_Monitors02,position:[.77,1.01,-3.14],rotation:[Math.PI/2,0,0],scale:[.38,.38,.41]}),(0,u.jsxs)("group",{position:[-7.96,1.68,4.92],rotation:[Math.PI/2,0,-1.54],scale:.14,children:[(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane005.geometry,material:i["Material.008"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane005_1.geometry,material:i["Material.007"]})]}),(0,u.jsxs)("group",{position:[.13,1.51,8.59],scale:.87,children:[(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.defaultMaterial020_1.geometry,material:i["Material.001"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.defaultMaterial020_2.geometry,material:i.MAT_Monitors02})]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.Plane004.geometry,material:i["Material.001"],position:[.34,1.82,-3.14],rotation:[Math.PI/2,0,0],scale:.38}),(0,u.jsxs)("group",{position:[-6.24,1.18,8.83],rotation:[0,-.59,0],scale:.87,children:[(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.defaultMaterial001_1.geometry,material:i["Material.004"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.defaultMaterial001_2.geometry,material:i["MAT_Monitors02.001"]})]}),(0,u.jsxs)("group",{position:[6.81,1.18,9.08],rotation:[0,.59,0],scale:.87,children:[(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.defaultMaterial002_1.geometry,material:i["Material.005"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.defaultMaterial002_2.geometry,material:i["MAT_Monitors02.002"]})]}),(0,u.jsxs)("group",{position:[8.94,1.48,4.92],rotation:[0,1.55,0],scale:.87,children:[(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.defaultMaterial003_1.geometry,material:i["Material.006"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.defaultMaterial003_2.geometry,material:i["MAT_Monitors02.003"]})]}),(0,u.jsxs)("group",{position:[-8.1,1.48,4.64],rotation:[Math.PI,-1.54,Math.PI],scale:.87,children:[(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.defaultMaterial004_1.geometry,material:i["Material.009"]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.defaultMaterial004_2.geometry,material:i["MAT_Monitors02.004"]})]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Prop_Screen_Small_02_(3)"].geometry,material:i.PolygonScifiSpace_Material_01_A,position:[1.33,.62,-4.04],rotation:[-2.38,.69,2.6]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Prop_MapTable_01.geometry,material:i.PolygonScifiSpace_Material_01_A,position:[.25,-.16,-3.17],rotation:[0,.27,0]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Bld_Floor_Small_Hatch_Door_01001.geometry,material:i.PolygonScifiSpace_Material_01_A,position:[-4.29,-.13,.38]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Bld_Floor_Small_Hatch_Door_01.geometry,material:i.PolygonScifiSpace_Material_01_A,position:[4.83,-.13,.38]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Bld_Floor_Small_Hatch_01_(1)"].geometry,material:i.PolygonScifiSpace_Material_01_A,position:[3.57,-.12,-.05]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Bld_Floor_Small_Hatch_01.geometry,material:i.PolygonScifiSpace_Material_01_A,position:[-5.55,-.12,-.05]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Bld_Bridge_Floor_01.geometry,material:i.PolygonScifiSpace_Material_01_A,position:[-7.21,0,-4.26]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Bld_Bridge_Console_Corner_02.geometry,material:i.PolygonScifiSpace_Material_01_A,position:[-7.21,0,-4.26]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Bld_Bridge_Console_Corner_01.geometry,material:i.PolygonScifiSpace_Material_01_A,position:[-7.21,0,-4.26]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Bld_Bridge_Console_02.geometry,material:i.PolygonScifiSpace_Material_01_A,position:[-7.21,0,-4.26]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Bld_Bridge_Console_01.geometry,material:i.PolygonScifiSpace_Material_01_A,position:[-7.21,0,-4.26]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Bld_Bridge_Chair_01_(9)"].geometry,material:i.PolygonScifiSpace_Material_01_A,position:[6.78,-.93,6.91],rotation:[0,.78,0]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Bld_Bridge_Chair_01_(8)"].geometry,material:i.PolygonScifiSpace_Material_01_A,position:[-6.29,-.93,6.95],rotation:[0,-.77,0]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Bld_Bridge_Chair_01_(7)"].geometry,material:i.PolygonScifiSpace_Material_01_A,position:[-6.15,-.18,-1.79],rotation:[0,-Math.PI/2,0]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Bld_Bridge_Chair_01_(6)"].geometry,material:i.PolygonScifiSpace_Material_01_A,position:[-6.15,-.18,2.34],rotation:[0,-Math.PI/2,0]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Bld_Bridge_Chair_01_(5)"].geometry,material:i.PolygonScifiSpace_Material_01_A,position:[6.82,-.18,-1.79],rotation:[0,1.57,0]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Bld_Bridge_Chair_01_(4)"].geometry,material:i.PolygonScifiSpace_Material_01_A,position:[6.71,-.18,2.24],rotation:[0,1.57,0]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Bld_Bridge_Chair_01_(3)"].geometry,material:i.PolygonScifiSpace_Material_01_A,position:[1.82,-.18,6.3]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Bld_Bridge_Chair_01_(2)"].geometry,material:i.PolygonScifiSpace_Material_01_A,position:[-1.31,-.18,6.3]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Bld_Bridge_Rear_Wall_01001.geometry,material:i.PolygonScifiSpace_Material_01_A,position:[.32,1.8,10.71],rotation:[Math.PI,0,Math.PI],scale:[1.57,1.14,1.14]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Hud_Text_Arrow_01006.geometry,material:i.FX_HUD_02,position:[-.85,1.31,7.41],rotation:[.2,0,1.57],scale:1.01}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Hud_Text_Arrow_01005.geometry,material:i.FX_HUD_02,position:[2.31,1.31,7.41],rotation:[.2,0,1.57],scale:1.01}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Hud_Text_Arrow_01004.geometry,material:i.FX_HUD_02,position:[-7.22,1.33,2.69],rotation:[1.57,-1.37,3.14],scale:.82}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Hud_Text_Arrow_01003.geometry,material:i.FX_HUD_02,position:[7.92,1.35,1.91],rotation:[1.57,1.37,0],scale:.82}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Hud_Text_Arrow_01_(3)005"].geometry,material:i.FX_HUD_02,position:[-7.02,.16,7.34],rotation:[.28,-.77,1.77],scale:1.02}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Hud_Text_Arrow_01_(3)004"].geometry,material:i.FX_HUD_02,position:[7.78,.93,-1.64],rotation:[1.57,1.37,0],scale:.77}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Hud_Text_Arrow_01_(2)005"].geometry,material:i.FX_HUD_02,position:[-7.04,.26,7.35],rotation:[.28,-.77,1.77],scale:1.02}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Hud_Text_Arrow_01_(2)004"].geometry,material:i.FX_HUD_02,position:[7.79,1,-1.64],rotation:[1.57,1.37,0],scale:.77}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Hud_Text_Arrow_01_(1)006"].geometry,material:i.FX_HUD_02,position:[-.85,1.23,7.4],rotation:[.2,0,1.57],scale:1.01}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Hud_Text_Arrow_01_(1)005"].geometry,material:i.FX_HUD_02,position:[2.31,1.23,7.4],rotation:[.2,0,1.57],scale:1.01}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Hud_Text_Arrow_01_(1)004"].geometry,material:i.FX_HUD_02,position:[-7.21,1.26,2.69],rotation:[1.57,-1.37,3.14],scale:.82}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Hud_Text_Arrow_01_(1)003"].geometry,material:i.FX_HUD_02,position:[7.91,1.28,1.91],rotation:[1.57,1.37,0],scale:.82}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Hud_Text_04006.geometry,material:i.FX_HUD_02,position:[-.98,1.31,7.41],rotation:[.2,0,0],scale:1.01}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Hud_Text_04005.geometry,material:i.FX_HUD_02,position:[2.18,1.31,7.41],rotation:[.2,0,0],scale:1.01}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Hud_Text_04004.geometry,material:i.FX_HUD_02,position:[-7.22,1.33,2.59],rotation:[1.57,-1.37,1.57],scale:.82}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Hud_Text_04003.geometry,material:i.FX_HUD_02,position:[7.92,1.35,2.01],rotation:[1.57,1.37,-1.57],scale:.82}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Hud_Text_04_(3)005"].geometry,material:i.FX_HUD_02,position:[-7.09,.16,7.27],rotation:[.28,-.77,.2],scale:[.6,1.02,1.02]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Hud_Text_04_(3)004"].geometry,material:i.FX_HUD_02,position:[7.78,.93,-1.57],rotation:[1.57,1.37,-1.57],scale:[.46,.77,.77]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Hud_Text_04_(2)005"].geometry,material:i.FX_HUD_02,position:[-7.12,.26,7.27],rotation:[.28,-.77,.2],scale:1.02}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Hud_Text_04_(2)004"].geometry,material:i.FX_HUD_02,position:[7.79,1,-1.55],rotation:[1.57,1.37,-1.57],scale:.77}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Hud_Text_04_(1)006"].geometry,material:i.FX_HUD_02,position:[-1.03,1.23,7.4],rotation:[.2,0,0],scale:[1.75,1.01,1.01]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Hud_Text_04_(1)005"].geometry,material:i.FX_HUD_02,position:[2.13,1.23,7.4],rotation:[.2,0,0],scale:[1.75,1.01,1.01]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Hud_Text_04_(1)004"].geometry,material:i.FX_HUD_02,position:[-7.21,1.26,2.55],rotation:[1.57,-1.37,1.57],scale:[1.42,.82,.82]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Hud_Text_04_(1)003"].geometry,material:i.FX_HUD_02,position:[7.91,1.28,2.05],rotation:[1.57,1.37,-1.57],scale:[1.42,.82,.82]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Hud_Text_03013.geometry,material:i.FX_HUD_02,position:[-7.24,1,-1.57],rotation:[1.57,-1.37,-1.57],scale:[.92,1.09,1.09]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Hud_Text_03012.geometry,material:i.FX_HUD_02,position:[-6.53,.28,7.87],rotation:[.28,-.77,-2.95],scale:[1.22,1.45,1.45]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Hud_Text_03011.geometry,material:i.FX_HUD_02,position:[7.79,1.02,-2.2],rotation:[1.57,1.37,1.57],scale:[.92,1.09,1.09]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Hud_Text_03010.geometry,material:i.FX_HUD_02,position:[7.54,.39,7.44],rotation:[-2.86,-.77,-2.95],scale:[2.18,1.01,1.01]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Hud_Text_02021.geometry,material:i.FX_HUD_02,position:[-.96,1.06,7.36],rotation:[.2,0,-Math.PI],scale:1.01}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Hud_Text_02019.geometry,material:i.FX_HUD_02,position:[2.2,1.06,7.36],rotation:[.2,0,-Math.PI],scale:1.01}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Hud_Text_02018.geometry,material:i.FX_HUD_02,position:[-7.18,1.12,2.61],rotation:[1.57,-1.37,-1.57],scale:.82}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Hud_Text_02017.geometry,material:i.FX_HUD_02,position:[-7.29,1.24,-1.59],rotation:[1.57,-1.37,-1.57],scale:[1.27,1.04,.77]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Hud_Text_02016.geometry,material:i.FX_HUD_02,position:[-6.59,.59,7.89],rotation:[.28,-.77,-2.95],scale:[1.68,1.38,1.02]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Hud_Text_02015.geometry,material:i.FX_HUD_02,position:[7.84,1.26,-2.17],rotation:[1.57,1.37,1.57],scale:[1.27,1.04,.77]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Hud_Text_02014.geometry,material:i.FX_HUD_02,position:[7.88,1.14,1.99],rotation:[1.57,1.37,1.57],scale:.82}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Hud_Text_02013.geometry,material:i.FX_HUD_02,position:[7.58,.14,7.33],rotation:[.28,.77,-.2],scale:1.01}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Hud_Text_02_(1)005"].geometry,material:i.FX_HUD_02,position:[-7.14,.57,7.33],rotation:[.28,-.77,-2.95],scale:1.02}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Hud_Text_02_(1)004"].geometry,material:i.FX_HUD_02,position:[7.84,1.24,-1.58],rotation:[1.57,1.37,1.57],scale:.77}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Hud_Text_01006.geometry,material:i.FX_HUD_02,position:[-1.68,1.22,7.39],rotation:[.2,0,-Math.PI],scale:[.79,1.01,1.01]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Hud_Text_01005.geometry,material:i.FX_HUD_02,position:[1.48,1.22,7.39],rotation:[.2,0,-Math.PI],scale:[.79,1.01,1.01]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Hud_Text_01004.geometry,material:i.FX_HUD_02,position:[-7.21,1.26,2.02],rotation:[1.57,-1.37,-1.57],scale:[.64,.82,.82]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Hud_Text_01003.geometry,material:i.FX_HUD_02,position:[7.91,1.28,2.58],rotation:[1.57,1.37,1.57],scale:[.64,.82,.82]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Hud_Rings_04007.geometry,material:i.FX_HUD_02,position:[-1.69,.95,7.34],rotation:[.2,0,0],scale:1.01}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Hud_Rings_04006.geometry,material:i.FX_HUD_02,position:[1.47,.95,7.34],rotation:[.2,0,0],scale:1.01}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Hud_Rings_04005.geometry,material:i.FX_HUD_02,position:[-7.17,1.03,2.01],rotation:[1.57,-1.37,1.57],scale:.82}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Hud_Rings_04004.geometry,material:i.FX_HUD_02,position:[7.86,1.05,2.59],rotation:[1.57,1.37,-1.57],scale:.82}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Hud_Rings_01006.geometry,material:i.FX_HUD_02,position:[7.11,.45,7.89],rotation:[.28,.77,-.2],scale:1.01}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Hud_Reticle_08006.geometry,material:i.FX_HUD_02,position:[-7.25,1.07,-1.88],rotation:[1.57,-1.37,1.57],scale:[.86,1.02,.97]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Hud_Reticle_08005.geometry,material:i.FX_HUD_02,position:[-6.83,.38,7.59],rotation:[.28,-.77,.2],scale:[1.14,1.35,1.29]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Hud_Reticle_08004.geometry,material:i.FX_HUD_02,position:[7.81,1.09,-1.88],rotation:[1.57,1.37,-1.57],scale:[.86,1.02,.97]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Hud_Reticle_03007.geometry,material:i.FX_HUD_02,position:[-7.26,1.08,-1.88],rotation:[1.57,-1.37,1.57],scale:.48}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Hud_Reticle_03006.geometry,material:i.FX_HUD_02,position:[-6.83,.39,7.59],rotation:[.28,-.77,.2],scale:.64}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Hud_Reticle_03005.geometry,material:i.FX_HUD_02,position:[7.81,1.1,-1.88],rotation:[1.57,1.37,-1.57],scale:.48}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Hud_Box_03006.geometry,material:i.FX_HUD_02,position:[-.99,1.01,7.35],rotation:[.2,0,0],scale:1.01}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Hud_Box_03005.geometry,material:i.FX_HUD_02,position:[2.17,1.01,7.35],rotation:[.2,0,0],scale:1.01}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Hud_Box_03004.geometry,material:i.FX_HUD_02,position:[-7.17,1.08,2.58],rotation:[1.57,-1.37,1.57],scale:.82}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Hud_Box_03003.geometry,material:i.FX_HUD_02,position:[7.87,1.1,2.02],rotation:[1.57,1.37,-1.57],scale:.82}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Hud_Box_03_(1)005"].geometry,material:i.FX_HUD_02,position:[-7.14,.56,7.33],rotation:[.28,-.77,.2],scale:.71}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Hud_Box_03_(1)004"].geometry,material:i.FX_HUD_02,position:[7.84,1.23,-1.58],rotation:[1.57,1.37,-1.57],scale:.54}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Hud_Box_02006.geometry,material:i.FX_HUD_02,position:[7.14,.15,7.78],rotation:[.28,.77,-.2],scale:1.01}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Hud_Box_01005.geometry,material:i.FX_HUD_02,position:[7.58,.39,7.41],rotation:[.28,.77,-.2],scale:1.01}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Hud_Barrier_02006.geometry,material:i.FX_HUD_02,position:[7.38,.61,7.66],rotation:[.28,.77,-.2],scale:[1.13,1.09,.94]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Hud_Barrier_02_(3)006"].geometry,material:i.FX_HUD_02,position:[-1.34,1.34,7.42],rotation:[.2,0,0],scale:[1.13,1.09,.94]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Hud_Barrier_02_(3)005"].geometry,material:i.FX_HUD_02,position:[1.82,1.34,7.42],rotation:[.2,0,0],scale:[1.13,1.09,.94]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Hud_Barrier_02_(3)004"].geometry,material:i.FX_HUD_02,position:[-7.23,1.36,2.3],rotation:[1.57,-1.37,1.57],scale:[.92,.89,.76]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Hud_Barrier_02_(3)003"].geometry,material:i.FX_HUD_02,position:[7.93,1.38,2.3],rotation:[1.56,1.11,-1.54],scale:[.92,.88,.77]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Hud_Barrier_02_(2)006"].geometry,material:i.FX_HUD_02,position:[-1.34,.77,7.3],rotation:[.2,0,-Math.PI],scale:[1.13,1.09,.94]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Hud_Barrier_02_(2)005"].geometry,material:i.FX_HUD_02,position:[1.82,.77,7.3],rotation:[.2,0,-Math.PI],scale:[1.13,1.09,.94]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Hud_Barrier_02_(2)004"].geometry,material:i.FX_HUD_02,position:[-7.14,.89,2.3],rotation:[1.57,-1.37,-1.57],scale:[.92,.89,.76]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Hud_Barrier_02_(2)003"].geometry,material:i.FX_HUD_02,position:[7.83,.91,2.3],rotation:[1.56,1.11,1.6],scale:[.92,.88,.77]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Hud_Barrier_02_(1)006"].geometry,material:i.FX_HUD_02,position:[7.3,.03,7.58],rotation:[.28,.77,2.95],scale:[1.13,1.09,.94]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Hud_Barrier_01006.geometry,material:i.FX_HUD_02,position:[7.73,.32,7.23],rotation:[.28,.77,-1.77],scale:[1.03,.92,.92]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Hud_Barrier_01_(5)005"].geometry,material:i.FX_HUD_02,position:[-7.22,.38,7.2],rotation:[.28,-.77,1.77],scale:[1.04,.92,.92]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Hud_Barrier_01_(5)004"].geometry,material:i.FX_HUD_02,position:[7.81,1.1,-1.46],rotation:[1.57,1.37,0],scale:[.78,.7,.7]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Hud_Barrier_01_(4)006"].geometry,material:i.FX_HUD_02,position:[-7.26,1.08,-1.46],rotation:[1.57,-1.37,0],scale:[.78,.7,.7]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Hud_Barrier_01_(4)005"].geometry,material:i.FX_HUD_02,position:[-6.44,.38,7.99],rotation:[.28,-.77,-1.38],scale:[1.04,.92,.92]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Hud_Barrier_01_(3)006"].geometry,material:i.FX_HUD_02,position:[-.78,1.05,7.36],rotation:[.2,0,-1.57],scale:[1.03,.92,.92]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Hud_Barrier_01_(3)005"].geometry,material:i.FX_HUD_02,position:[2.38,1.05,7.36],rotation:[.2,0,-1.57],scale:[1.03,.92,.92]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Hud_Barrier_01_(3)004"].geometry,material:i.FX_HUD_02,position:[-7.18,1.12,2.75],rotation:[1.57,-1.37,0],scale:[.84,.75,.75]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Hud_Barrier_01_(3)003"].geometry,material:i.FX_HUD_02,position:[7.88,1.14,1.85],rotation:[1.57,1.37,-3.14],scale:[.84,.75,.75]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Hud_Barrier_01_(2)006"].geometry,material:i.FX_HUD_02,position:[-1.89,1.05,7.36],rotation:[.2,0,1.57],scale:[1.03,.92,.92]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Hud_Barrier_01_(2)005"].geometry,material:i.FX_HUD_02,position:[1.27,1.05,7.36],rotation:[.2,0,1.57],scale:[1.03,.92,.92]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Hud_Barrier_01_(2)004"].geometry,material:i.FX_HUD_02,position:[-7.18,1.12,1.85],rotation:[1.57,-1.37,3.14],scale:[.84,.75,.75]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Hud_Barrier_01_(2)003"].geometry,material:i.FX_HUD_02,position:[7.88,1.14,2.75],rotation:[1.57,1.37,0],scale:[.84,.75,.75]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n["SM_Hud_Barrier_01_(1)006"].geometry,material:i.FX_HUD_02,position:[6.95,.32,8.01],rotation:[.28,.77,1.38],scale:[1.03,.92,.92]}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Hud_Arrows_01007.geometry,material:i.FX_HUD_02,position:[-1.34,.95,7.34],rotation:[.2,0,0],scale:1.01}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Hud_Arrows_01006.geometry,material:i.FX_HUD_02,position:[1.82,.95,7.34],rotation:[.2,0,0],scale:1.01}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Hud_Arrows_01005.geometry,material:i.FX_HUD_02,position:[-7.17,1.04,2.3],rotation:[1.57,-1.37,1.57],scale:.82}),(0,u.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:n.SM_Hud_Arrows_01004.geometry,material:i.FX_HUD_02,position:[7.86,1.06,2.3],rotation:[1.57,1.37,-1.57],scale:.82})]}))}bZ.preload("./models/kontrol_odasi2.glb"),bZ.preload("./models/city_c.glb");var z1=function(){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("div",{style:{background:"white",width:"90vh",height:"90vh",borderRadius:8},children:(0,u.jsx)("iframe",{style:{border:"none",width:"100%",height:"100%"},src:"https://p.interacty.me/9285f6a950744d01/iframe.html"})})})};new Ph,new Ph(0,1,0),new _h,new Ph,n(5277);function L1(){var e=Qx().progress;return(0,u.jsxs)(cS,{center:!0,children:[" ",(0,u.jsxs)("div",{style:{fontSize:30,color:"white"},children:[Math.round(e)," % y\xfckleniyor"]})]})}var K1=function(e){console.log("state is:",e.cinsiyet);var n=e.cinsiyet,i=c((0,t.useState)(!1),2),r=i[0],a=i[1],o=c((0,t.useState)(!1),2),s=(o[0],o[1],(0,t.useRef)(),c((0,t.useState)(!1),2)),l=(s[0],s[1],c((0,t.useState)(!1),2)),g=l[0],d=l[1],h=new My,f=h.load(u0);return h.load(EZ),h.load(YZ),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{style:{position:"absolute",marginTop:"70vh",marginLeft:"10vh",fontSize:"24px",color:"lightblue",zIndex:1,textAlign:"center"},children:["W",(0,u.jsx)("br",{}),"A - S - D",(0,u.jsx)("br",{}),"veya Ok tu\u015flar\u0131 ",(0,u.jsx)("br",{}),"ile hareket ettirebilirsiniz.",(0,u.jsx)("br",{}),"ESC ile \xe7\u0131k\u0131\u015f yapabilirsiniz."]}),(0,u.jsx)("div",{className:"canvas-container",children:(0,u.jsx)(jx,{children:(0,u.jsxs)(t.Suspense,{fallback:(0,u.jsx)(L1,{}),children:[null,null,null,(0,u.jsx)("ambientLight",{intensity:.4}),(0,u.jsx)("pointLight",{color:"white",intensity:.75,position:[10,10,10]}),(0,u.jsx)("spotLight",{position:[-2.5,5,5],angle:Math.PI/3,penumbra:.5,castShadow:!0,"shadow-mapSize-height":2048,"shadow-mapSize-width":2048}),(0,u.jsxs)(VE,{children:[(0,u.jsx)(C0,Ve({distance:45e4,sunPosition:[5,1,8],inclination:0,azimuth:.25},e)),(0,u.jsx)(c0,{cinsiyet:n})]}),(0,u.jsx)(Y1,{scale:[.25,.25,.25],position:[.5,3.5,-7],color:"black",anchorX:"center",anchorY:"middle",children:"T\xfcik \xc7ocuk der ki;"}),(0,u.jsx)(Y1,{scale:[.25,.25,.25],position:[.5,3,-7],color:"black",anchorX:"center",anchorY:"middle",children:"\xe7ok yak\u0131nda oyunlar burada olacak."}),(0,u.jsx)(E1,{position:[.5,.15,3],rotation:[0,3.1,0],scale:[1.2,1.2,1.2]}),(0,u.jsxs)("mesh",Ve(Ve({position:[.6,2.1,-7]},e),{},{visible:!0,scale:g?1.2:1,onClick:function(e){return a(!r)},onPointerOver:function(e){return d(!0)},onPointerOut:function(e){return d(!1)},children:[(0,u.jsx)("boxGeometry",{args:[1,1,.01],children:(0,u.jsx)("bufferAttribute",{attachObject:["attributes","uv"],array:[0,0,1,0,1,1,0,1],count:4,itemSize:2})}),(0,u.jsx)("meshStandardMaterial",{map:f,color:g?"#B4DAD9":"#CCEBEA"})]}))]})})}),r&&(0,u.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"24px",color:"lightblue",zIndex:2,padding:"20px",borderRadius:"5px",boxShadow:"0 0 10px rgba(0, 0, 0, 0.3)"},children:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(z1,{}),(0,u.jsx)("button",{style:{position:"absolute",top:"0",right:"0",color:"red",zIndex:"1",cursor:"pointer"},onClick:function(e){return a(!1)},children:"X"}),(0,u.jsx)("button",{style:{position:"absolute",bottom:"2vh",marginLeft:"-2vh",width:"100%",height:"50px",cursor:"pointer",backgroundColor:"#ffd9b3"},children:"Kartlar\u0131 \xe7evirerek ayn\u0131 olan kartlar\u0131 bul."})]})})]})},_1=n(4569),P1=n.n(_1),D1=n.p+"static/media/tkc_basla.544c64600f351613552d.png",O1=n.p+"static/media/tkc_oyun_oynayalim.ed0f4700ab347f567e14.png",U1=n.p+"static/media/tkc_istatistik_ogrenelim.0052219b7f66b85734d6.png",j1=n.p+"static/media/tkc_cocuk_haklari.142210905c2762770fc5.png",J1=n.p+"static/media/tkc_tuiki_taniyalim.be6b880e00961fad4409.png",Q1=n.p+"static/media/tkc_sdg_amaclari.ee3bebe8f67e5326659f.png",q1=n.p+"static/media/tkc_balon.bd79604d5436aa8bf3bb.png",$1=function(e){var t=e.img,n=e.onClick;return(0,u.jsx)("div",{className:"floatingDivForIntroRight",onClick:n,children:(0,u.jsx)("img",{src:t,alt:""})})};function e2(e){return e.charAt(0).toUpperCase()+e.slice(1)}var t2=function(){return(0,u.jsxs)("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",style:{width:"100%",height:"200px"},viewBox:"0 0 100 100",enableBackground:"new 0 0 100 100",xmlSpace:"preserve",children:[(0,u.jsx)("path",{fill:"#fdc50f",d:"M31.6,3.5C5.9,13.6-6.6,42.7,3.5,68.4c10.1,25.7,39.2,38.3,64.9,28.1l-3.1-7.9c-21.3,8.4-45.4-2-53.8-23.3\r c-8.4-21.3,2-45.4,23.3-53.8L31.6,3.5z",children:(0,u.jsx)("animateTransform",{attributeName:"transform",attributeType:"XML",type:"rotate",dur:"2s",from:"0 50 50",to:"360 50 50",repeatCount:"indefinite"})}),(0,u.jsx)("path",{fill:"#fdc50f",d:"M42.3,39.6c5.7-4.3,13.9-3.1,18.1,2.7c4.3,5.7,3.1,13.9-2.7,18.1l4.1,5.5c8.8-6.5,10.6-19,4.1-27.7\r c-6.5-8.8-19-10.6-27.7-4.1L42.3,39.6z",children:(0,u.jsx)("animateTransform",{attributeName:"transform",attributeType:"XML",type:"rotate",dur:"1s",from:"0 50 50",to:"-360 50 50",repeatCount:"indefinite"})}),(0,u.jsx)("path",{fill:"#fff",d:"M82,35.7C74.1,18,53.4,10.1,35.7,18S10.1,46.6,18,64.3l7.6-3.4c-6-13.5,0-29.3,13.5-35.3s29.3,0,35.3,13.5\r L82,35.7z",children:(0,u.jsx)("animateTransform",{attributeName:"transform",attributeType:"XML",type:"rotate",dur:"2s",from:"0 50 50",to:"360 50 50",repeatCount:"indefinite"})})]})},n2=function(e){var n={duration:2,type:"spring"},i={duration:3,ease:"easeInOut",loop:1/0},r={duration:3.5,ease:"easeInOut",loop:1/0},a={duration:4,ease:"easeInOut",loop:1/0},o={duration:3.8,ease:"easeInOut",loop:1/0},s={duration:3.2,ease:"easeInOut",loop:1/0},l={duration:4.1,ease:"easeInOut",loop:1/0},d=(0,t.useContext)(g).state.darkMode,h=e.setShowMetaverse,f=e.ad,p=e.dogumGunu,I=e.dogumAyi,C=e.dogumYili,m=e.boy,v=e.kilo,A=e.sehir,b=e.cinsiyet,y=e.onButtonClick,G=function(){y(),h(!0)};console.log("gelen cinsiyet intro: ",b);var w=c((0,t.useState)({infoText:"",loading:!1,adi:"",yilYas:"",ayYas:"",gunYas:"",il:"",ayniIsimdeIlSayi:"",ayniIsimdeTurkiyeSayi:"",ayniTarihDoganIlSayi:"",ayniTarihDoganTurkiyeSayi:"",boyOrtancaDeger:"",kiloOrtancaDeger:""}),2),B=w[0],x=w[1],S=(B.infoText,B.loading),Z=(B.adi,B.yilYas),k=B.ayYas,R=B.gunYas,W=B.il,M=B.ayniIsimdeIlSayi,V=B.ayniIsimdeTurkiyeSayi,F=B.ayniTarihDoganIlSayi,N=B.ayniTarihDoganTurkiyeSayi,H=B.boyOrtancaDeger,T=B.kiloOrtancaDeger,X=function(){var e=Xc(Ec().mark((function e(){var t,n;return Ec().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={ad:f,gun:p,ay:I,dogumyil:C,boy:m,kilo:v,ilKodu:A,cinsiyet:b},x(Ve(Ve({},B),{},{loading:!1})),e.next=5,P1().get("".concat("/Home/","GetDashboard"),{params:t});case 5:(n=e.sent).data&&x(Ve(Ve({},B),{},{adi:n.data.Ad,yilYas:n.data.Yil,ayYas:n.data.Ay,gunYas:n.data.Gun,il:n.data.Il,ayniIsimdeIlSayi:n.data.AyniIsimdeIlSayi,ayniIsimdeTurkiyeSayi:n.data.AyniIsimdeTurkiyeSayi,ayniTarihDoganIlSayi:n.data.AyniTarihDoganIlSayi,ayniTarihDoganTurkiyeSayi:n.data.ayniTarihDoganTurkiyeSayi,boyOrtancaDeger:n.data.BoyOrtancaDeger,kiloOrtancaDeger:n.data.KiloOrtancaDeger,loading:!0})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),x(Ve(Ve({},B),{},{adi:"Adi",yilYas:5,ayYas:11,gunYas:13,il:"Bilecik",ayniIsimdeIlSayi:0,ayniIsimdeTurkiyeSayi:140,ayniTarihDoganIlSayi:3,ayniTarihDoganTurkiyeSayi:1214,boyOrtancaDeger:13,kiloOrtancaDeger:-3,loading:!0}));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();(0,t.useEffect)((function(){X()}),[]);for(var Y=e.ad.split(" "),E=0;E<Y.length;E++)Y[E]=Y[E].charAt(0).toUpperCase()+Y[E].slice(1);var z=Y.join(" ");return(0,u.jsxs)("div",{className:"Intro",id:"Intro",children:[(0,u.jsxs)("div",{className:"i-left",children:[(0,u.jsxs)("div",{className:"i-name",children:[(0,u.jsx)("span",{children:"T\xdc\u0130K \xc7ocuk Platformu'na"}),(0,u.jsxs)("span",{style:{color:d?"white":""},children:["Ho\u015f geldin ",z," !"]}),(0,u.jsx)("div",{style:{backgroundImage:"url(".concat(TH,")"),backgroundRepeat:"no-repeat",backgroundSize:"cover",width:"769px",height:"524px",display:"flex",justifyContent:"space-between",alignItems:"center",marginLeft:"0rem",marginTop:"0rem"},children:S?(0,u.jsx)(HH,{sehir:A,kilo:v,boy:m,ad:e2(f),il:W,cinsiyet:b,yilYas:Z,ayYas:k,gunYas:R,ayniIsimdeIlSayi:M,ayniIsimdeTurkiyeSayi:V,ayniTarihDoganIlSayi:F,ayniTarihDoganTurkiyeSayi:N,boyOrtancaDeger:H,kiloOrtancaDeger:T}):(0,u.jsx)(t2,{})})]}),(0,u.jsxs)("div",{style:{display:"flex",flexDirection:"row",marginTop:"-2.5rem"},children:[(0,u.jsx)(wc.rU,{to:"/metaverse",state:{cinsiyetGonder:b},onClick:G,children:(0,u.jsx)(NZ,{img:D1})}),(0,u.jsx)(CT,{ad:e2(f),il:W,cinsiyet:b,yilYas:Z,ayYas:k,gunYas:R,ayniIsimdeIlSayi:M,ayniIsimdeTurkiyeSayi:V,ayniTarihDoganIlSayi:F,ayniTarihDoganTurkiyeSayi:N,boyOrtancaDeger:H,kiloOrtancaDeger:T})]})]}),(0,u.jsxs)("div",{className:"i-right",children:[(0,u.jsx)(FH.div,{initial:{left:"-34%",top:"-8rem"},whileInView:{left:"-6%",top:"-8rem"},style:{left:"calc(100vw * -0.32)",top:"2%"},transition:n,className:"floating-div",children:(0,u.jsx)(wc.rU,{to:"istatistik",smooth:!0,spy:!0,children:(0,u.jsx)($1,{img:U1})})}),(0,u.jsx)(FH.div,{initial:{top:"-8rem",left:"30%"},whileInView:{left:"36%",top:"-8rem"},style:{left:"calc(100vw * -0.06)",top:"30%"},transition:n,className:"floating-div",children:(0,u.jsx)(wc.rU,{to:"tuik",smooth:!0,spy:!0,children:(0,u.jsx)($1,{img:J1})})}),(0,u.jsx)(FH.div,{initial:{left:"14%",top:"38%"},whileInView:{left:"11%",top:"0rem"},style:{left:"calc(100vw * -0.01)",top:"38%"},transition:n,className:"floating-div",children:(0,u.jsx)(xe,{to:{pathname:"/cocukhaklari"},target:"_blank",children:(0,u.jsx)($1,{img:j1})})}),(0,u.jsxs)(FH.div,{initial:{left:"-6%",top:"38%"},whileInView:{left:"-18%",top:"2.5rem"},style:{left:"calc(100vw * -0.18)",top:"38%"},transition:n,className:"floating-div",children:[" ",(0,u.jsx)(wc.rU,{to:"/metaverse",state:{cinsiyetGonder:b},onClick:G,children:(0,u.jsx)($1,{img:O1})})]}),(0,u.jsx)(FH.div,{initial:{left:"48%",top:"2%"},whileInView:{left:"40%",top:"6rem"},style:{left:"calc(100vw * 0.04)",top:"2%"},transition:n,className:"floating-div",children:(0,u.jsx)(xe,{to:{pathname:"/sdg"},target:"_blank",children:(0,u.jsx)($1,{img:Q1})})}),(0,u.jsx)(FH.img,{style:{marginLeft:"18rem",marginTop:"14rem",width:"160px",height:"234px"},animate:{top:["-2%","2%","-2%"]},transition:i,src:q1,alt:""}),(0,u.jsx)(FH.img,{style:{marginLeft:"-8rem",marginTop:"8rem",width:"70px",height:"50px"},animate:{top:["-2%","2%","-2%"],left:["-1%","1%","-1%"]},transition:r,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGEAAABLCAYAAABgMenzAAAACXBIWXMAACE4AAAhOAFFljFgAAAHqWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDYgNzkuZGFiYWNiYiwgMjAyMS8wNC8xNC0wMDozOTo0NCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIyLjQgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMy0wNS0xMFQwNjowNDo0MyswMzowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMy0wNS0xMFQwNjo0MDoyOCswMzowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjMtMDUtMTBUMDY6NDA6MjgrMDM6MDAiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NTNiZTAyZWEtOTYyNS01MzQ2LWEzOTMtZDQ5MmE4Y2FkOWMxIiB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6YzA5NGRlYjgtYTI0Yy1jMjQ0LWFhZjEtOGUwZDIzOTJhMTMxIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6ZTQ3ZTdkNmItZDJhZS00MTRmLTkzOGYtYmEwNzU3NDgzNzU2IiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDplNDdlN2Q2Yi1kMmFlLTQxNGYtOTM4Zi1iYTA3NTc0ODM3NTYiIHN0RXZ0OndoZW49IjIwMjMtMDUtMTBUMDY6MDQ6NDMrMDM6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMi40IChXaW5kb3dzKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6ZTdiMjg1YTgtNjFlYy0wMDRjLTgwYTUtYWIzNmViY2FjZjAyIiBzdEV2dDp3aGVuPSIyMDIzLTA1LTEwVDA2OjA0OjQzKzAzOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjIuNCAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjUzYmUwMmVhLTk2MjUtNTM0Ni1hMzkzLWQ0OTJhOGNhZDljMSIgc3RFdnQ6d2hlbj0iMjAyMy0wNS0xMFQwNjo0MDoyOCswMzowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIyLjQgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8cGhvdG9zaG9wOkRvY3VtZW50QW5jZXN0b3JzPiA8cmRmOkJhZz4gPHJkZjpsaT5hZG9iZTpkb2NpZDpwaG90b3Nob3A6NjdiYmNjNGItNTEzOC0xYzRjLWJjOTEtOTc4YjNhNDVmMWM0PC9yZGY6bGk+IDxyZGY6bGk+YWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOmVlOGIzNDE0LTE0YjgtZmQ0NC04NGI4LWE4OTFmYjNlODczMzwvcmRmOmxpPiA8L3JkZjpCYWc+IDwvcGhvdG9zaG9wOkRvY3VtZW50QW5jZXN0b3JzPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pnvxh1sAAAgMSURBVHja7ZxdbBxXFcf/596Z2dndsZumiT+aOI4Ibpu2uyvxQCQKlQBViKdKIMQLUqGOmpYGKLHhDSEhHkCNU74UJPLRIngACQkESFRV4AVFQkgV2mxIaiEIbuLEjpMie2d3ZnZm7uFhZ5V1urbXznrjTe55sWyNV6v7m//5n3PunSFmho67G6QhaAg6NAQNQYeGoCHo0BA0BB13AmF/bvzBEGY1ENawgvivggCDll0joAAAV4uv6dXdDAhjuUN2lqteSAZiiH9FZJxlUDEis8QQlxh8OYIRNq5n4H2Q2vpSt/3XteIxDaE5Pph/0bLZD5AsMAFQ9SULAVyLYLwL4AqB5yMyFmLIGwT2ACwCqAAwgGVrLBkoA1gCIAksIzIWY8gygf3Z4g9u7iq8guWqY8zdQ2A27AmP5Q7+zkD8bONubyxQIx3duqvXDn7f78QMihNwNxk0H5O8pEAXIhhvz5z7yZmhwgQYwHxx6v6F8HDh6zARkaVq3zMQfVZA7WtaxGU/N5KOVvubAt2IYLwZkflcQJaKITFfPHp/VkeDhUkQGAYiSI4LBqKPS6gDkuM8gDEBZdKthcPtkDYeDJk4Tgz5tk/2hz1KKQb1pDI6UqIOFSaW3bHXisewu/C13QZH+wR4jMB7DY5GAQwzaFhC7ZCItzFgtV5iahsUgSHACGGcmS6deGawMNlzqtiUPmG4cCRJHreSiEy8gkGQHPdLxIMAbWfQgwJqu4FoG4ABgjpqcJwWUCkCLtcNee1ofL5HtlWldMggzPWIKrrerNUB0Yr3NUHhWvEYRvOHyeQwZSLqk4jTCmJmLXXUVaEQwvztdOnEZ3pFFVu2Yx5MUtx8cQofyH/ZSHFwXiJ+tFWDeHsIKDBotkKZEZ9s3uogemJsMViYhEQMm33T5uAhAhsK4nI7qvAonapSpsbAlk1PPTU7aqSXsfyhdIprVQYtq7pae0WMEMZb06WTn9qq6aknB3hDhQmkOKAsewMEZa6liiQ9Xa+KzLAHWzX3HK16kka665ZyenaK2rirH8m/kLW45qqkc1gZRL2v8Mj+Ro1SP5IcP21weEBCjTKwA4AEEBLoakTy/H/OHf/ZUGGiKyB6fpQ9VJhAmj0jw54PQCqIVX2CwLEClQV421qfHcHony6dKG82jHtiP2GwMAmbfcpydYbAI6uBaMBopxmUiEcZFP2z9PrVzQRxz2zqNNLTY7mDfzYQfSKG3PBnicTuFWgXgeFS9lpAKdYQ2kxNAgpZrh43OXxpvTOqZFgShTD+EJLx+0vnjr+hjXkDMVCYBIiwLV581UQ4uVZqagagIP5eFs7TEWTQwKeNeZ3piMCYK05hX/7Fb1kcHgSwZz0qUKAFj9LPB5T6Yzcbu3uiOporTmFv/mVpIvylydGzAirdznijFQgJhQApxxXZiurSELCnIYzmD5PFtayBqE+AJZKp652GgIKC+MfF0qkPDRQmcX2Tu+yehvDkk198WJCajSGx0uJT01CdUN9KbQdU0mUvVimz3aOUmtd9QuvYm39ZWhxmBGJbgi0AV5bvWNOIAtUURC0mEYQwDxiIn7LZ/y7agNE0BLQqlAl1ibqCHzROXuzJf4UAfIwAB/XzBczAn94992OuX3sEDAECw+IaZdgrGYieaMc76kNAq39JZMsKouNbqPdMddS8xdocre7ewcIkBBTS7Jk2+zsF2IghZ9YGYZydLp38aKensff1McjBwgTmi1MYyx3KpFCrrOUXiU9ccUV2TwCLO6UIfRY1UZHFNUqz/1cD4VO8SopKzlVVXcr2+WSrTihCQ2hSBQFIsy/T7O1cbfcumcaiQlnpdQCEhtDCL+aLRzGWeyGbQs1dybg7CUJDWCVF2ezLDHvXCby9lVc0QLjkiICsDU9ZNYQ2VLE/N35WIv5Iq/F40l3vuFg6dVMrYRMVIaDgcDVrceC2AiERj7qUnfXIjjdSMWkIbcOYhKPclA3fvx1EcuDMWRJOZSNH9jWEdarCYTdtc1BtBpGcQR++UDo9p9NRl0A8oBZ/ZSL+fNxk1hJq1KXMrEfpeL2VkoawAQhzxSk8nhufBviR5odjArIyLjneeqskDWGDVVOafeGwGzfSUrI9+tA7pZPv6XTURUX0q/IbJsLnGj2EgBopkzNbW2fPoCHcAQSLa9THbqwgKClV4VF6okKZYxpC10AcQb9yf2Ei/IKCaJSqfWXhuOt57FdDuGNv8KTD1V0xxExysm/gYunUgvaELsfjufFBgOcYBAE14lL2akAp1W5K0hA6k5KyJkJXQUBCwSP72xXKfEdD6G5KEg5XdseQM4kvnCkL55l2fUFD6FDsz43vIPBC/VUTXLlQOu20e5JbQ+hQuZrlqpVmP4ghIBGjQpnPVSnzm3ZGGBpCR0cZz7+XPJeNAKm0K7K+VkK3O2guf9/k8JvJGwl2XiyduqE9oasGXT8+80TuS4GCsOqlqjPbzranhtBhNfSx+6rFtUkA8Mlua4ShIWyON8wTeCCC8WZZOJ9e61V0GsIm9A0Ou19Ns//D5KFDc61SVUPYBDUIxHhAlf9mIDpQpcy4S5nT8xpC99Vgs0/9XFY1WH8pC+eTq6UkDWETq6V+dl+z2X+lVPo5NaonDaGraekIBBjb1f8WamT9eon6Ds9pCHdHDWkOyOHKO+dLrz+6kkFrCF3whz52U8RMS6LPbzVL0hC6FGP5Q1YNVjiTPL6lIdylJm5f/iXx73M/VRrCFgwNQUPQoSFoCDoa8X/RIKynFlm21QAAAABJRU5ErkJggg==",alt:""}),(0,u.jsx)("div",{className:"blur",style:{background:"#C1F5FF",top:"14rem",width:"91rem",height:"31rem",left:"-48rem",zIndex:"-999"}}),(0,u.jsx)(FH.img,{style:{marginLeft:"1rem",marginTop:"18rem",width:"40px",height:"20px"},animate:{top:["-2%","2%","-2%"],left:["-2%","2%","-2%"],rotate:[0,0,8,8,0]},transition:a,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAAdCAYAAAAU0BSYAAAACXBIWXMAACE4AAAhOAFFljFgAAAHqWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDYgNzkuZGFiYWNiYiwgMjAyMS8wNC8xNC0wMDozOTo0NCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIyLjQgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMy0wNS0xMFQwNjowNTowNiswMzowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMy0wNS0xMFQwNjo0MTowMiswMzowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjMtMDUtMTBUMDY6NDE6MDIrMDM6MDAiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NzM2NGFiMjItZjA3My0zNjQ0LTkzMDMtNjZiMGE2YWFhYWEyIiB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6MGNhY2QyYWUtZDc3Ny1mMDQ5LWFjNjUtZWViNmM4Y2QxYzlkIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6ZjIzMDUzNDctMzczNy1lMTQ2LTgyM2ItZDIwOGNiMWQ1Y2I0IiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpmMjMwNTM0Ny0zNzM3LWUxNDYtODIzYi1kMjA4Y2IxZDVjYjQiIHN0RXZ0OndoZW49IjIwMjMtMDUtMTBUMDY6MDU6MDYrMDM6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMi40IChXaW5kb3dzKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6Njk4NzMzYTEtN2QxNS0yZDQ2LTljYmQtY2I2OTE4ZjMxY2IzIiBzdEV2dDp3aGVuPSIyMDIzLTA1LTEwVDA2OjA1OjA2KzAzOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjIuNCAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjczNjRhYjIyLWYwNzMtMzY0NC05MzAzLTY2YjBhNmFhYWFhMiIgc3RFdnQ6d2hlbj0iMjAyMy0wNS0xMFQwNjo0MTowMiswMzowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIyLjQgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8cGhvdG9zaG9wOkRvY3VtZW50QW5jZXN0b3JzPiA8cmRmOkJhZz4gPHJkZjpsaT5hZG9iZTpkb2NpZDpwaG90b3Nob3A6NjdiYmNjNGItNTEzOC0xYzRjLWJjOTEtOTc4YjNhNDVmMWM0PC9yZGY6bGk+IDxyZGY6bGk+YWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOmVlOGIzNDE0LTE0YjgtZmQ0NC04NGI4LWE4OTFmYjNlODczMzwvcmRmOmxpPiA8L3JkZjpCYWc+IDwvcGhvdG9zaG9wOkRvY3VtZW50QW5jZXN0b3JzPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PvbmOpgAAAYaSURBVFjD1ZhPiGRXFcZ/59z7qrpqqjs6CmbakGCyiSIzhqigLmwQBFFjRBBEBBeSLETMuIibLBTRjUhEXbgJZiWoEAMGRIhDEnfxD44LM9E4iZshEmeS9J/qqnrvnuOiXtXcfvO6ujrpnsELr9/j9a1773e+c75zzhN35zBj/cxZOcR02efu9bPPrkvnHz7cQd7AiEcAas88Ryx7vsaUiiN4yMByPYACSJPZBSAlBwG4c+3UQELw6Mha9PTWQDrp8BZAQV6rJLxQUlwGRLEA2A1ntul2jpgDhhCm7BC9KsDfFbHbI+l2hzsKL28D3gHcIvgJxaXeJzoITlVK/MlQ+g8lQiW4cp2GuHuTTZm54xSSoBiBhGJ3BE/vj169V/G7Aundgr9tyhoiOI4Gr13UEa3Xm10IXgXScFdWHtyWwSOKxevFrpw6/cAeoFaDjCSC282B6uMdJh9T9w3BTwVP7iKeCc3UaAiGBkAVcwGdvhOvjTGbXwk+MvTcpq7e64jU7L4hoWoJO8nORa4JOVgBLJDWOz75atfLLwev1mu23EQEqBLhH45cMOSlSuK/gZeBV0C2SomvCRC9OgncUnj52YLyi46I5yEPY8Evb+nq6ZJ4RbFixu5BgNu8sE0os73mIpjHrDlCz0efX/HxN0viy7vae1zw84nwfEm8KPi/koT/ztzbGutrbdCJRBx5VqX7WM/Hj/Z9+DuQ4FcP1VHsZPTywxMpnmgwb+tnzi6bztpSGo20Nmc67jkrsCP9H+3Kyg8NJRFadpobXQPWtqGEqSipI+WO9H+v2Fd6PvpZmmNCDe10vPzSWOwJRyxz5T35dx8GpeWdt7Cr+TpNN56nlRqY7uMeNIqDpqU1i+WJI3aTbf48Un3BrgImYLYj/Y2h9P4QSCdyV26Apbm2I6UjicYkxVXwYuYl2X0OdpkCohn4vo9r5QqsU9HTYYfy1lXbes7Qfu4lhjzzut700Vr1Z4Cb6+eGSw7EaYa4LXh1t+B3gg9ALk6k+8uKsKlYt15rbsCmGi8K9j0HyEUkE40cbMgZT4ThwLe/0fPRD/LwUIyJdB7aksF3HSGQVjLDmqHlbF/FiF7dWXh1T0F5j2If1CmL8+MlwoVtObFRSvyP4h0gHQR237GEUmp2zcE7sgOwZpu/Kag+lQMOJMbS+fFQeg8aYcQey6U1xU53vNyIXn0mkO6WqSbMZ1ktmIAHUlURH31d1+4DQj3XAJdFjcD6mbNymLxXg50BDNkzgCZ0O5L6a7b1pGIfyuNXMRx5pSI+7cglYKDYrYq9R7Gb60MLCAm9nAhPJ4l/dPhz4eXXAunTjiB4Zeg/N3X1LkfGgselwB52HAAWIDiy7eADH97f9clPr01fljcVNWdOIlypiL8uJT5WSXwqEYaOkAj0ffiBgW8/awQErxL64paunnFkNwcbj6Mq2yfWS0OrWfkJfqrtx3vVOpEIF0bS/X4pxa8q4laW/nqKRcG3KokvmYdNwdfeTCPwZgGLIWOQJDiRaq3wyedWfPwdxd9ptPcAWpcrY7rfGmr/29WUMa3VOmRCObvvOvJqDVaAXaBqpMSjYzZzYcly9m7XJ5/o+OSTin+koHyfumNytcFoGxXxmZGufH1M569ADKRBraptKYlMDGfgXgDKJpnH6cbuCF3G9/Z9975KIiPpPlJK5xfgV4BZ4h/ULeFa3SD8pZTib9NW0gY1k9ZW4LeFjOI+kfCcodQd1cxIEo+B1bnrCBZ35MQDlRaPJwkXx3SeX85avhKwlawgWGZ4/UdLiiezxuPo3bjF0i5QGFrtSP+3gotivazYWMSQZJXUMmMAvF1xKsK5UoqnalaPVaB8Lqr1gQXXuioi+1+zlvYFZaksiNVc1DqC+Uj630soAes0DXZcYL2lS2l2LNICWFo6nYPcOABXgL+P6fxpJN1zinfbfhePGeh+PWiz2NAF7dzCWl3wriO2qasbhu4IdOqvl80OiiOtoJb8fNLWCi6KYV2GaUfGdS0cG+E0B3zdwO6j3gfF6UFfJGj5QtF8P28ZbwjYQ36IlwVAFub5fO6l8w/fWLBHYZRZV7bMnP8LsEc1/gdXAQSS2EwS8wAAAABJRU5ErkJggg==",alt:""}),(0,u.jsx)(FH.img,{style:{marginLeft:"21rem",marginTop:"24rem",width:"40px",height:"20px"},animate:{top:["-2%","2%","-2%"],left:["-2%","2%","-2%"],rotate:[0,0,8,8,0]},transition:o,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAAbCAYAAAAzgqwIAAAACXBIWXMAACE4AAAhOAFFljFgAAAHqWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDYgNzkuZGFiYWNiYiwgMjAyMS8wNC8xNC0wMDozOTo0NCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIyLjQgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMy0wNS0xMFQwNjowNzozNSswMzowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMy0wNS0xMFQwNjo0MTozNCswMzowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjMtMDUtMTBUMDY6NDE6MzQrMDM6MDAiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6YTEyMjI0MGMtZmQyZi1iYzQ1LWFlOWEtY2VjMzZlYzNiNjBmIiB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6MzNlYmUzOGMtZGQ2OS04NDQ0LTg4N2ItYmU2YjVkYjYxZDRmIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6ZjczM2ZlY2YtYTMwMy03ZjQ3LWFmYmUtMTY0OTg1YjU1ZDkyIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpmNzMzZmVjZi1hMzAzLTdmNDctYWZiZS0xNjQ5ODViNTVkOTIiIHN0RXZ0OndoZW49IjIwMjMtMDUtMTBUMDY6MDc6MzUrMDM6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMi40IChXaW5kb3dzKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NTAzNzgwM2QtMWIxYS0xMTQwLTg2MjYtNGViODhlZWZmMTMwIiBzdEV2dDp3aGVuPSIyMDIzLTA1LTEwVDA2OjA3OjM1KzAzOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjIuNCAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmExMjIyNDBjLWZkMmYtYmM0NS1hZTlhLWNlYzM2ZWMzYjYwZiIgc3RFdnQ6d2hlbj0iMjAyMy0wNS0xMFQwNjo0MTozNCswMzowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIyLjQgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8cGhvdG9zaG9wOkRvY3VtZW50QW5jZXN0b3JzPiA8cmRmOkJhZz4gPHJkZjpsaT5hZG9iZTpkb2NpZDpwaG90b3Nob3A6MzYzYTQ0MWMtNTRlOS0zZTQ5LThhMmQtYzVmYTE5NzgwMGFlPC9yZGY6bGk+IDxyZGY6bGk+YWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjY3YmJjYzRiLTUxMzgtMWM0Yy1iYzkxLTk3OGIzYTQ1ZjFjNDwvcmRmOmxpPiA8L3JkZjpCYWc+IDwvcGhvdG9zaG9wOkRvY3VtZW50QW5jZXN0b3JzPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PmMJeVMAAAdoSURBVFjDvZhJjBRVGMer3quq3qaX6Z6NZcgAMjACTmBQjBdxwxijHgjEg9GYGE046MGDnoyaGMGLHiTqwUQvRiEhakS9aIxLiAoiCEoQiaDgTHfPQk93V9f2nv9XVPe8rulZEYs8qqaqXtX3e9//W6rVWx9+Rvnq3T3KXNu2R56ddk7Mk8/P5zmzPF+V/hTHRNrXz4mNB4MFg+O9vDGRc+4btRCoqzF8DohWMDIQl4YngTWgfKD/YwsZLwNMQagKV4nqqaraMAr24ayiY69jX5/DAqCGl4Jx7YDmATAFwhVCo7TmW2ozwjwWw7moMBKAtkrVMtHBS1XFs7wId3kUM90QFLsmQBJIq7067W+uUC2mVcyxWn/pwuRuGLueM57DSOG6DgiLUPUygE5HM5FPEksSHxCDKG7VTWEuC8DqXmL/CdAMEGEAMu0aYGiMlpyy0zV8JH/Us1mSGlRXiUJxnQbeEzaq3OOQn8IjKeO7VF9yT6Infsgz3WRgvrsooBYymg2CzHC+cR1ycohGKiPHCt/Uxq2tRkL3jZeAVcgviA5/BiTpMeZxr3Nj7qHkssR+p+pmZOnNGyiAUeeIByp5g4SyVvMxVzQ9oeVLF8qPjv429rYOmMYdMM21XAXJQdHi2l+Q3LC4wlzeC6l1M4cxSJF1b+kairZHTuBcO+YJKG9eQBLMNCn5WYngMYxTDL0hldC9eA/ERIs0Qh2OVXctrwPyKhaOF4+Yo7UhxJF/J2JI8RxPiXfEPmpblnhVi+tnIMGSvwYez9iTzlB1pPrE5T9L25O9ya97tnTeAS+lAy/ODSTJjPjGIiNhdWwY5mcVZB0F2qfUIJ6ficiV24XmIZck9gm8g2oRbcSpOr3li5UHjbRxNrMydQDeubvwy+jnWoT6TxcwAFWy/Znd6ZXJN4SReHaXWAxfTqpaxXsnmMsUs2DeibkHs2szjydXJN93BdRckgt5hvqGRTUTnlCqefN2a8K6Cw8axEvTNEIsrPgw0u9pI2kcw4svalF6Dis/4afbmpdErBzG6q4X3ui8IXcPnvFYZdjcocVpQ2bpvtTz7f2ZF1zT7QVgLJDSVGeAIzyvaiT14sS50gOIvcHcQPseQOr+tZmAQp4horDpMb3q2R4tnhz90By1tgtMomHdKJIRZARvCLmp8JKKYFcAdSaSMT5O9ra9WRuzbhr9dfw9o01XxAqL9xJKRKlURaxYJVuBxD7t3tR5LzzZBxgjgGGBHZ7UIfjHWMC8U3EyqijIOrHmA0SC1KnBON8zWOVvsSq3CMOCF0xPENyv8L7s4D2AAc6gl/D30rq/xTV/QSBRt+ZxeP5816aObbivDBl3SoUzDMKkYxcJw2KMCxv9bqElkATjSw0rzlDMnMLx0f2VkepOuHsqlc611Y0X9mtq87wgCQCI9Qx13h/rih2yJ+2N8JgZ1BYZSu4KWp1r3fpIcVOXGkVMmOW/K7flTxS/DDyDlfe4MBR65pCXWk8GIY/NCYpY4YiZFxE7e92a2wezBISN4QR7N9S78VC709xty58PoSTgA6ka8RTGvfzPxVNIjwNIoRz1gEezke8hjxHIYzl0vAGGEaJTQnWQqU21Z8YNGY2nVrS9nu1vfxIw/fCWaFBFT2cFww7JLjwUGabJQy1qjZ+i9TbdHD97effE7xP74AkGT1jZdZmdcchDVG4YkUAQrzGLte21sdp9TtndjHStibYG3kPCwBLgcURrdpxnMcVo0/7o2dK1GTHQgaY0FsCIYQZ7NwQjf3u1FH39eyjcvtSzlSsKZ+FE8UQlb65HH3WqY0NuVywXOe1U3CyShCGuo/5MArYGL2Xtkj2ImBjAiq9BjzYEL/TDlDbcG2/IEf8DXMmsSu2D3J6Gh9cGHhEQ1QDIlnq0GQFmA1JDH1dUj+tm+Z/K0PDR/I/os8o9N3YtA9QkqnWPVB/qi3EleeikAq/U/D7M9toRJ1nPZWmk7AMAXiE6ZbQu/szuoa6tely7iHjMBDAykIghNl8QOYbC3rkChD5QM6g7/FPhh2rB3Lj05p4tiJtTbsXNhYodb+okFEUTbT+G8B4R3gOUixj8Ap4YFC0nYlHJrWt/Kb0y9QogVwXesCQYcewChi20858RCHXHro3XBi4dHjmGzvapzHXptyCntFQTmKTv+lZv+40AKiqyIOLMQ5vyGerXalGIM6vTewHzMhJKX9D/WZKH6knBW6h3ZpOcSAZW8eTYa6gLvUu3du9AXMS4KGDNtYAp0yqLP18LoCKq6PyIWkUcvgNvZHLXZ5+L5aKHEVvLARoJCqgrQdnBYFcL1PRtj3+x0vnJXWhHDiKWLmM1Y1IrwmZ6oVSUZempmJ+C/Cz0cXmALfF/H1CbPO1I9ccN15erAhKZC6lYBDSNZqMFZKwoErBckWddPcnjmj+4ogMGhnLCHP/3AB5KxY1WRvb8ooFafEZTkRTQZ3n4OjRCv4XNK41KUOHvo1bbrNV/UUAtimurH/cW9KJZnieDhI8XVHdmBZqhY1gUzDx+i2i5LfYd9e1flviTbJiYsKcAAAAASUVORK5CYII=",alt:""}),(0,u.jsx)(FH.img,{style:{marginLeft:"26rem",marginTop:"20rem",width:"50px",height:"25px"},animate:{top:["-2%","2%","-2%"],left:["-2%","2%","-2%"],rotate:[0,0,8,8,0]},transition:s,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADoAAAAZCAYAAABggz2wAAAACXBIWXMAACE4AAAhOAFFljFgAAAHqWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDYgNzkuZGFiYWNiYiwgMjAyMS8wNC8xNC0wMDozOTo0NCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIyLjQgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMy0wNS0xMFQwNjowNTo0MiswMzowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMy0wNS0xMFQwNjo0MDowNCswMzowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjMtMDUtMTBUMDY6NDA6MDQrMDM6MDAiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ZDU2NWMyYTQtZTFkZi1iZTQxLTkyNzUtYzQ5N2U2ZDY3YWVjIiB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6NWIzMDJhNGEtY2VlNi0xOTQ3LTg5NjgtOWIzMmFkZjViNjE4IiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6MTZlNjQ3OGMtNzcwNy1hYjRhLWIxMzEtNDgxMzBhZGIxZWI5IiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDoxNmU2NDc4Yy03NzA3LWFiNGEtYjEzMS00ODEzMGFkYjFlYjkiIHN0RXZ0OndoZW49IjIwMjMtMDUtMTBUMDY6MDU6NDIrMDM6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMi40IChXaW5kb3dzKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NGU1ZWExYzAtZjk1Mi05YzRiLWE0NzctNDhkNDBkNmZmMWQzIiBzdEV2dDp3aGVuPSIyMDIzLTA1LTEwVDA2OjA1OjQyKzAzOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjIuNCAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmQ1NjVjMmE0LWUxZGYtYmU0MS05Mjc1LWM0OTdlNmQ2N2FlYyIgc3RFdnQ6d2hlbj0iMjAyMy0wNS0xMFQwNjo0MDowNCswMzowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIyLjQgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8cGhvdG9zaG9wOkRvY3VtZW50QW5jZXN0b3JzPiA8cmRmOkJhZz4gPHJkZjpsaT5hZG9iZTpkb2NpZDpwaG90b3Nob3A6NjdiYmNjNGItNTEzOC0xYzRjLWJjOTEtOTc4YjNhNDVmMWM0PC9yZGY6bGk+IDxyZGY6bGk+YWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOmVlOGIzNDE0LTE0YjgtZmQ0NC04NGI4LWE4OTFmYjNlODczMzwvcmRmOmxpPiA8L3JkZjpCYWc+IDwvcGhvdG9zaG9wOkRvY3VtZW50QW5jZXN0b3JzPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PrXt5eAAAAMwSURBVFjD7ZfPax1VFMc/59477/UlaNO0Me9VsamFUkt9IxQFFay4EEQQcePSheCPZmOT4NaVSEvbVX8sajf9A9wWCuKiIrpR3wRsDDVGG+hPKFWTl7w3954uZqZGTWxaE2lxzmoY7tx7P+ec7/feEVXl/xBSgpagJWgJeqdRj0cAAcDii9cPAL1O036DbgL6gfXARqfpgCFsF/QFh7/ym/Tu/Dk5ovc0aD0e5VLrEFube191+Fes+m2SgTWAAUsQ0fAHAIoiqBhS7FcT4588U8yxKqCNeOTW88XW4X8NOBiPYfD0aDuqaue8oI8uhikiYLzHTgk6mYqbCpgfFc79lBw704hHUORvkCsG3RzvQxFCvqRBsSgKWTYRQt5sBr1j8Ho8SlUXpEfbX1v8UwED2VxbPKbtxc51ca8HzETAnPdir2fQ2Z4kX3spwBWB1uNRFMEQiOj2WfVPK7LD4h+ONN2giIBGqbjZgJlU5Jvp5OjZzfE+PDZPwfLgg/EYlkCvzlYr2pnPK4bFEzAz87JuaCo55uvx6J83fRfJXBa0EY9wsXWYx5p736/QeSvS7i6WyUnRWooQxNAV96XHfprizqTixj0Gzc0lGwcWpaJdqWn7C0f6bJYYMHg6Ep2aTE68+VA8xpXWwbV13e1PvF2t0rkgGgY8lq64aYEfgJmuuF8C5pKgV+GWLTacprst/uVI00dUipa2E6nY0yn2W2AGCCCNSLuvVei8kY0xGALA722p9c1JzXObVlw10K3NYRMwexRNAva6FxuKyvlcQ0tV1hKw+P5amP/I4t8tNC15Jcn1VGi++C5gP58YP/HiYDzG5VWq4opAl9LFSlx205MfUNHUrg83PhN0z+KWXS45ATn7q3nw+Y5EXPvuwP1xYRhqDpsebZ92+Jc8Bsnd8Z+A82onC1LZPZUcT+9p0MK8tjXfcwofKqal8D2wcZ0ufOxInwt/MaXsCAkEzOWAedzio1npubogVV1Nfa5JRbMjiUUOKzg8NZ2PKtrpM4QqcCFv2y0eO3du/OS1tdLmf34FLECGmsMGeAfYAOyfTo76pa5s5d9LCVqClqAlaAl6H8RN90er3kRZBMcAAAAASUVORK5CYII=",alt:""}),(0,u.jsx)(FH.img,{style:{marginLeft:"18rem",marginTop:"18rem",width:"50px",height:"25px"},animate:{top:["-2%","2%","-2%"],left:["-2%","2%","-2%"],rotate:[0,0,8,8,0]},transition:l,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEQAAAApCAYAAACMeY82AAAACXBIWXMAACE4AAAhOAFFljFgAAAHqWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDYgNzkuZGFiYWNiYiwgMjAyMS8wNC8xNC0wMDozOTo0NCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIyLjQgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMy0wNS0xMFQwNjowNjowOCswMzowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMy0wNS0xMFQwNjo0MDoxNiswMzowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjMtMDUtMTBUMDY6NDA6MTYrMDM6MDAiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6YzhlNDk4NDEtYmU4ZS1mMjQwLWExMjktMWJiYjFkMWIyZGY1IiB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6N2QwNzgzMjYtOTYwNy01YjQ0LTk4YWItNTljNzMyZGY5YmJmIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6OTgxOTgzMzAtMGZmNi0zZTQ4LWFiNjgtNTg5YWE3MmJiYzJhIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo5ODE5ODMzMC0wZmY2LTNlNDgtYWI2OC01ODlhYTcyYmJjMmEiIHN0RXZ0OndoZW49IjIwMjMtMDUtMTBUMDY6MDY6MDgrMDM6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMi40IChXaW5kb3dzKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6N2M2N2EwNGQtMTAxNC04NjQwLWE5ZjYtYmM5ODUzNzBiNGE1IiBzdEV2dDp3aGVuPSIyMDIzLTA1LTEwVDA2OjA2OjA4KzAzOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjIuNCAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmM4ZTQ5ODQxLWJlOGUtZjI0MC1hMTI5LTFiYmIxZDFiMmRmNSIgc3RFdnQ6d2hlbj0iMjAyMy0wNS0xMFQwNjo0MDoxNiswMzowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIyLjQgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8cGhvdG9zaG9wOkRvY3VtZW50QW5jZXN0b3JzPiA8cmRmOkJhZz4gPHJkZjpsaT5hZG9iZTpkb2NpZDpwaG90b3Nob3A6NjdiYmNjNGItNTEzOC0xYzRjLWJjOTEtOTc4YjNhNDVmMWM0PC9yZGY6bGk+IDxyZGY6bGk+YWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOmVlOGIzNDE0LTE0YjgtZmQ0NC04NGI4LWE4OTFmYjNlODczMzwvcmRmOmxpPiA8L3JkZjpCYWc+IDwvcGhvdG9zaG9wOkRvY3VtZW50QW5jZXN0b3JzPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PnLQQ30AAARnSURBVGje7ZlNbBVVGIaf78yZe2khgBt7C9FQMDEh4Y4ulI0J0ehGF4ghKiZsDC6gxkjbuNcVCwoahRqjQRaYAKEqRNmpOxM1mHvF6IJSAoQWVshPf2bOOZ+Le6de+VMILWmZL5ndTDLnyfu933vOEVWlqH9KCiAFkAJIAaQAUgApgMwokGXVLcaAjEmbV8CgjNR23N8KWbnq9T2KJFelfVMm8TFFABit9d9/QCpJL4bAwnD5YEnT9ZnEtQkpvzdc3z1YSXpQ5L5RzZRCKkkvAO06Fs8PY6mgOLEXHfaLVEqfpxL/HDCNj+YwnOtMtSPp43xtO49W3xgsaboOQDE4zLCTeF+G3e8kPu6acOaacm44ZSpJL4JS1lTKOvl9TLYGtKkNwWOOO+xgJvEhJ7buieaMcm45djuSPgyBsk5KiewTq26DIcxvLB4Cgif6w4ndn2GPOLHHXBPObFXO/8ohub+M1vpZXt38mlW/NsI/F+EfkOY7ASFghjPsgdSUvj5d+/DHzqSHgEHQWTOtbiuYXTtxuqrdT0f4pyJ1L1j8akMAJIdzxkv0VUo8eKq+64dK0stsyDh3nFRz1TTaI3CutpMVqzZvLZFuivArGzlGEAIBcyEjPuzEfjlc3/VtA478SzmdTdj3OvvcteieK8DiidWZeTrxi8U97qc8JSCAx1zwEh3OsIPD9d1HcwMfqe1gWfXNFafqHw11Jj33TEXTspfpSPqI8LTreKmsk5N5fmFqTjUeT3Quk3ifqC6O8M9b3FJFGJc2Oy7z/L2AMq2buweTPhboVdumE1krlNbKfUeh6U8Bh+2/aBb1AZyvbZ9bu93OpIeF4fJBi18fkP/+IZSAGU4lfvdkfWBvY1IJ52fIV2YEyIJwZX+J7OWbqeR6KA3lBOSKwx5IpbQpk1gd0bSP8GkHsjR5m0Xh0k+CPnEzILmntJZO7ZtCM+dEx1OJPxuqD7xfSXoAmRYw0w6kkvRQIpP5YezXCJ/o9W3zUMCkmcSXAuZFBWfVf2NxCwyhDJzJvzEoAZl02EOpxBszKQXfBHe34MzIiVkl6SUiEGtqYnXbBH2koQI5mYl951R9V2jNNQKM1PrpqnYbq9mnMW6dQRfnOsrVFIj+TCXeO1Qf2Ha3vGZGjxDzzNFat1pER9Lbkoq3bCxptsHinhU0zoe3oCiSOqIjmcSvDNd3+zz43cmEmhVnqrl68gC3fNXm7pjsJYt/RqAVcd5+f52ofzy5JNmKxyC30VKz7pA5T8QRAYuTWF23Vbc2wq8RNG5VoMPWMuI9Q78NfLAk2cq1pi4ERmo7ZzeQGyunsbCu6pZXY/yRSF27IZSNhjPNXIOXaNSJPZphvwuY31XkhCO63DrnRmv9c+ca4tq2Auiqdm+M8I9ZdauBJ626WFBURBU564mGgNOCjnmi3glTHp+z9zJ5awmKQTlX28nD1bc6DGGJwkKBNkHnARYoGcKBofqAKy6qZrupFkAKIAWQAkgBpABSAJkz9Tcb7YWI0+RkRgAAAABJRU5ErkJggg==",alt:""})]})]})};function i2(e){return null!==e&&"object"===typeof e&&"constructor"in e&&e.constructor===Object}function r2(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.keys(t).forEach((function(n){"undefined"===typeof e[n]?e[n]=t[n]:i2(t[n])&&i2(e[n])&&Object.keys(t[n]).length>0&&r2(e[n],t[n])}))}var a2={body:{},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}},createElementNS:function(){return{}},importNode:function(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function o2(){var e="undefined"!==typeof document?document:{};return r2(e,a2),e}var s2={document:a2,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState:function(){},pushState:function(){},go:function(){},back:function(){}},CustomEvent:function(){return this},addEventListener:function(){},removeEventListener:function(){},getComputedStyle:function(){return{getPropertyValue:function(){return""}}},Image:function(){},Date:function(){},screen:{},setTimeout:function(){},clearTimeout:function(){},matchMedia:function(){return{}},requestAnimationFrame:function(e){return"undefined"===typeof setTimeout?(e(),null):setTimeout(e,0)},cancelAnimationFrame:function(e){"undefined"!==typeof setTimeout&&clearTimeout(e)}};function l2(){var e="undefined"!==typeof window?window:{};return r2(e,s2),e}var c2=function(e){kc(n,e);var t=Vc(n);function n(e){var i;return ka(this,n),"number"===typeof e?i=t.call(this,e):function(e){var t=e.__proto__;Object.defineProperty(e,"__proto__",{get:function(){return t},set:function(e){t.__proto__=e}})}(Ye(i=t.call.apply(t,[this].concat(We(e||[]))))),Mc(i)}return Xe(n)}(Hc(Array));function u2(){var e=[];return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((function(t){Array.isArray(t)?e.push.apply(e,We(u2(t))):e.push(t)})),e}function g2(e,t){return Array.prototype.filter.call(e,t)}function d2(e,t){var n=l2(),i=o2(),r=[];if(!t&&e instanceof c2)return e;if(!e)return new c2(r);if("string"===typeof e){var a=e.trim();if(a.indexOf("<")>=0&&a.indexOf(">")>=0){var o="div";0===a.indexOf("<li")&&(o="ul"),0===a.indexOf("<tr")&&(o="tbody"),0!==a.indexOf("<td")&&0!==a.indexOf("<th")||(o="tr"),0===a.indexOf("<tbody")&&(o="table"),0===a.indexOf("<option")&&(o="select");var s=i.createElement(o);s.innerHTML=a;for(var l=0;l<s.childNodes.length;l+=1)r.push(s.childNodes[l])}else r=function(e,t){if("string"!==typeof e)return[e];for(var n=[],i=t.querySelectorAll(e),r=0;r<i.length;r+=1)n.push(i[r]);return n}(e.trim(),t||i)}else if(e.nodeType||e===n||e===i)r.push(e);else if(Array.isArray(e)){if(e instanceof c2)return e;r=e}return new c2(function(e){for(var t=[],n=0;n<e.length;n+=1)-1===t.indexOf(e[n])&&t.push(e[n]);return t}(r))}d2.fn=c2.prototype;var h2="resize scroll".split(" ");function f2(e){return function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];if("undefined"===typeof n[0]){for(var r=0;r<this.length;r+=1)h2.indexOf(e)<0&&(e in this[r]?this[r][e]():d2(this[r]).trigger(e));return this}return this.on.apply(this,[e].concat(n))}}f2("click"),f2("blur"),f2("focus"),f2("focusin"),f2("focusout"),f2("keyup"),f2("keydown"),f2("keypress"),f2("submit"),f2("change"),f2("mousedown"),f2("mousemove"),f2("mouseup"),f2("mouseenter"),f2("mouseleave"),f2("mouseout"),f2("mouseover"),f2("touchstart"),f2("touchend"),f2("touchmove"),f2("resize"),f2("scroll");var p2={addClass:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=u2(t.map((function(e){return e.split(" ")})));return this.forEach((function(e){var t;(t=e.classList).add.apply(t,We(i))})),this},removeClass:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=u2(t.map((function(e){return e.split(" ")})));return this.forEach((function(e){var t;(t=e.classList).remove.apply(t,We(i))})),this},hasClass:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=u2(t.map((function(e){return e.split(" ")})));return g2(this,(function(e){return i.filter((function(t){return e.classList.contains(t)})).length>0})).length>0},toggleClass:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=u2(t.map((function(e){return e.split(" ")})));this.forEach((function(e){i.forEach((function(t){e.classList.toggle(t)}))}))},attr:function(e,t){if(1===arguments.length&&"string"===typeof e)return this[0]?this[0].getAttribute(e):void 0;for(var n=0;n<this.length;n+=1)if(2===arguments.length)this[n].setAttribute(e,t);else for(var i in e)this[n][i]=e[i],this[n].setAttribute(i,e[i]);return this},removeAttr:function(e){for(var t=0;t<this.length;t+=1)this[t].removeAttribute(e);return this},transform:function(e){for(var t=0;t<this.length;t+=1)this[t].style.transform=e;return this},transition:function(e){for(var t=0;t<this.length;t+=1)this[t].style.transitionDuration="string"!==typeof e?"".concat(e,"ms"):e;return this},on:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t[0],r=t[1],a=t[2],o=t[3];function s(e){var t=e.target;if(t){var n=e.target.dom7EventData||[];if(n.indexOf(e)<0&&n.unshift(e),d2(t).is(r))a.apply(t,n);else for(var i=d2(t).parents(),o=0;o<i.length;o+=1)d2(i[o]).is(r)&&a.apply(i[o],n)}}function l(e){var t=e&&e.target&&e.target.dom7EventData||[];t.indexOf(e)<0&&t.unshift(e),a.apply(this,t)}"function"===typeof t[1]&&(i=t[0],a=t[1],o=t[2],r=void 0),o||(o=!1);for(var c,u=i.split(" "),g=0;g<this.length;g+=1){var d=this[g];if(r)for(c=0;c<u.length;c+=1){var h=u[c];d.dom7LiveListeners||(d.dom7LiveListeners={}),d.dom7LiveListeners[h]||(d.dom7LiveListeners[h]=[]),d.dom7LiveListeners[h].push({listener:a,proxyListener:s}),d.addEventListener(h,s,o)}else for(c=0;c<u.length;c+=1){var f=u[c];d.dom7Listeners||(d.dom7Listeners={}),d.dom7Listeners[f]||(d.dom7Listeners[f]=[]),d.dom7Listeners[f].push({listener:a,proxyListener:l}),d.addEventListener(f,l,o)}}return this},off:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t[0],r=t[1],a=t[2],o=t[3];"function"===typeof t[1]&&(i=t[0],a=t[1],o=t[2],r=void 0),o||(o=!1);for(var s=i.split(" "),l=0;l<s.length;l+=1)for(var c=s[l],u=0;u<this.length;u+=1){var g=this[u],d=void 0;if(!r&&g.dom7Listeners?d=g.dom7Listeners[c]:r&&g.dom7LiveListeners&&(d=g.dom7LiveListeners[c]),d&&d.length)for(var h=d.length-1;h>=0;h-=1){var f=d[h];a&&f.listener===a||a&&f.listener&&f.listener.dom7proxy&&f.listener.dom7proxy===a?(g.removeEventListener(c,f.proxyListener,o),d.splice(h,1)):a||(g.removeEventListener(c,f.proxyListener,o),d.splice(h,1))}}return this},trigger:function(){for(var e=l2(),t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(var r=n[0].split(" "),a=n[1],o=0;o<r.length;o+=1)for(var s=r[o],l=0;l<this.length;l+=1){var c=this[l];if(e.CustomEvent){var u=new e.CustomEvent(s,{detail:a,bubbles:!0,cancelable:!0});c.dom7EventData=n.filter((function(e,t){return t>0})),c.dispatchEvent(u),c.dom7EventData=[],delete c.dom7EventData}}return this},transitionEnd:function(e){var t=this;return e&&t.on("transitionend",(function n(i){i.target===this&&(e.call(this,i),t.off("transitionend",n))})),this},outerWidth:function(e){if(this.length>0){if(e){var t=this.styles();return this[0].offsetWidth+parseFloat(t.getPropertyValue("margin-right"))+parseFloat(t.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null},outerHeight:function(e){if(this.length>0){if(e){var t=this.styles();return this[0].offsetHeight+parseFloat(t.getPropertyValue("margin-top"))+parseFloat(t.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null},styles:function(){var e=l2();return this[0]?e.getComputedStyle(this[0],null):{}},offset:function(){if(this.length>0){var e=l2(),t=o2(),n=this[0],i=n.getBoundingClientRect(),r=t.body,a=n.clientTop||r.clientTop||0,o=n.clientLeft||r.clientLeft||0,s=n===e?e.scrollY:n.scrollTop,l=n===e?e.scrollX:n.scrollLeft;return{top:i.top+s-a,left:i.left+l-o}}return null},css:function(e,t){var n,i=l2();if(1===arguments.length){if("string"!==typeof e){for(n=0;n<this.length;n+=1)for(var r in e)this[n].style[r]=e[r];return this}if(this[0])return i.getComputedStyle(this[0],null).getPropertyValue(e)}if(2===arguments.length&&"string"===typeof e){for(n=0;n<this.length;n+=1)this[n].style[e]=t;return this}return this},each:function(e){return e?(this.forEach((function(t,n){e.apply(t,[t,n])})),this):this},html:function(e){if("undefined"===typeof e)return this[0]?this[0].innerHTML:null;for(var t=0;t<this.length;t+=1)this[t].innerHTML=e;return this},text:function(e){if("undefined"===typeof e)return this[0]?this[0].textContent.trim():null;for(var t=0;t<this.length;t+=1)this[t].textContent=e;return this},is:function(e){var t,n,i=l2(),r=o2(),a=this[0];if(!a||"undefined"===typeof e)return!1;if("string"===typeof e){if(a.matches)return a.matches(e);if(a.webkitMatchesSelector)return a.webkitMatchesSelector(e);if(a.msMatchesSelector)return a.msMatchesSelector(e);for(t=d2(e),n=0;n<t.length;n+=1)if(t[n]===a)return!0;return!1}if(e===r)return a===r;if(e===i)return a===i;if(e.nodeType||e instanceof c2){for(t=e.nodeType?[e]:e,n=0;n<t.length;n+=1)if(t[n]===a)return!0;return!1}return!1},index:function(){var e,t=this[0];if(t){for(e=0;null!==(t=t.previousSibling);)1===t.nodeType&&(e+=1);return e}},eq:function(e){if("undefined"===typeof e)return this;var t=this.length;if(e>t-1)return d2([]);if(e<0){var n=t+e;return d2(n<0?[]:[this[n]])}return d2([this[e]])},append:function(){for(var e,t=o2(),n=0;n<arguments.length;n+=1){e=n<0||arguments.length<=n?void 0:arguments[n];for(var i=0;i<this.length;i+=1)if("string"===typeof e){var r=t.createElement("div");for(r.innerHTML=e;r.firstChild;)this[i].appendChild(r.firstChild)}else if(e instanceof c2)for(var a=0;a<e.length;a+=1)this[i].appendChild(e[a]);else this[i].appendChild(e)}return this},prepend:function(e){var t,n,i=o2();for(t=0;t<this.length;t+=1)if("string"===typeof e){var r=i.createElement("div");for(r.innerHTML=e,n=r.childNodes.length-1;n>=0;n-=1)this[t].insertBefore(r.childNodes[n],this[t].childNodes[0])}else if(e instanceof c2)for(n=0;n<e.length;n+=1)this[t].insertBefore(e[n],this[t].childNodes[0]);else this[t].insertBefore(e,this[t].childNodes[0]);return this},next:function(e){return this.length>0?e?this[0].nextElementSibling&&d2(this[0].nextElementSibling).is(e)?d2([this[0].nextElementSibling]):d2([]):this[0].nextElementSibling?d2([this[0].nextElementSibling]):d2([]):d2([])},nextAll:function(e){var t=[],n=this[0];if(!n)return d2([]);for(;n.nextElementSibling;){var i=n.nextElementSibling;e?d2(i).is(e)&&t.push(i):t.push(i),n=i}return d2(t)},prev:function(e){if(this.length>0){var t=this[0];return e?t.previousElementSibling&&d2(t.previousElementSibling).is(e)?d2([t.previousElementSibling]):d2([]):t.previousElementSibling?d2([t.previousElementSibling]):d2([])}return d2([])},prevAll:function(e){var t=[],n=this[0];if(!n)return d2([]);for(;n.previousElementSibling;){var i=n.previousElementSibling;e?d2(i).is(e)&&t.push(i):t.push(i),n=i}return d2(t)},parent:function(e){for(var t=[],n=0;n<this.length;n+=1)null!==this[n].parentNode&&(e?d2(this[n].parentNode).is(e)&&t.push(this[n].parentNode):t.push(this[n].parentNode));return d2(t)},parents:function(e){for(var t=[],n=0;n<this.length;n+=1)for(var i=this[n].parentNode;i;)e?d2(i).is(e)&&t.push(i):t.push(i),i=i.parentNode;return d2(t)},closest:function(e){var t=this;return"undefined"===typeof e?d2([]):(t.is(e)||(t=t.parents(e).eq(0)),t)},find:function(e){for(var t=[],n=0;n<this.length;n+=1)for(var i=this[n].querySelectorAll(e),r=0;r<i.length;r+=1)t.push(i[r]);return d2(t)},children:function(e){for(var t=[],n=0;n<this.length;n+=1)for(var i=this[n].children,r=0;r<i.length;r+=1)e&&!d2(i[r]).is(e)||t.push(i[r]);return d2(t)},filter:function(e){return d2(g2(this,e))},remove:function(){for(var e=0;e<this.length;e+=1)this[e].parentNode&&this[e].parentNode.removeChild(this[e]);return this}};Object.keys(p2).forEach((function(e){Object.defineProperty(d2.fn,e,{value:p2[e],writable:!0})}));var I2,C2,m2,v2=d2;function A2(e){return setTimeout(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)}function b2(){return Date.now()}function y2(e){var t,n,i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x",a=l2(),o=function(e){var t,n=l2();return n.getComputedStyle&&(t=n.getComputedStyle(e,null)),!t&&e.currentStyle&&(t=e.currentStyle),t||(t=e.style),t}(e);return a.WebKitCSSMatrix?((n=o.transform||o.webkitTransform).split(",").length>6&&(n=n.split(", ").map((function(e){return e.replace(",",".")})).join(", ")),i=new a.WebKitCSSMatrix("none"===n?"":n)):t=(i=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,")).toString().split(","),"x"===r&&(n=a.WebKitCSSMatrix?i.m41:16===t.length?parseFloat(t[12]):parseFloat(t[4])),"y"===r&&(n=a.WebKitCSSMatrix?i.m42:16===t.length?parseFloat(t[13]):parseFloat(t[5])),n||0}function G2(e){return"object"===typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function w2(){for(var e,t=Object(arguments.length<=0?void 0:arguments[0]),n=["__proto__","constructor","prototype"],i=1;i<arguments.length;i+=1){var r=i<0||arguments.length<=i?void 0:arguments[i];if(void 0!==r&&null!==r&&(e=r,!("undefined"!==typeof window&&"undefined"!==typeof window.HTMLElement?e instanceof HTMLElement:e&&(1===e.nodeType||11===e.nodeType))))for(var a=Object.keys(Object(r)).filter((function(e){return n.indexOf(e)<0})),o=0,s=a.length;o<s;o+=1){var l=a[o],c=Object.getOwnPropertyDescriptor(r,l);void 0!==c&&c.enumerable&&(G2(t[l])&&G2(r[l])?r[l].__swiper__?t[l]=r[l]:w2(t[l],r[l]):!G2(t[l])&&G2(r[l])?(t[l]={},r[l].__swiper__?t[l]=r[l]:w2(t[l],r[l])):t[l]=r[l])}}return t}function B2(e,t,n){e.style.setProperty(t,n)}function x2(e){var t,n=e.swiper,i=e.targetPosition,r=e.side,a=l2(),o=-n.translate,s=null,l=n.params.speed;n.wrapperEl.style.scrollSnapType="none",a.cancelAnimationFrame(n.cssModeFrameID);var c=i>o?"next":"prev",u=function(e,t){return"next"===c&&e>=t||"prev"===c&&e<=t};!function e(){t=(new Date).getTime(),null===s&&(s=t);var c=Math.max(Math.min((t-s)/l,1),0),g=.5-Math.cos(c*Math.PI)/2,d=o+g*(i-o);if(u(d,i)&&(d=i),n.wrapperEl.scrollTo(ke({},r,d)),u(d,i))return n.wrapperEl.style.overflow="hidden",n.wrapperEl.style.scrollSnapType="",setTimeout((function(){n.wrapperEl.style.overflow="",n.wrapperEl.scrollTo(ke({},r,d))})),void a.cancelAnimationFrame(n.cssModeFrameID);n.cssModeFrameID=a.requestAnimationFrame(e)}()}function S2(){return I2||(I2=function(){var e=l2(),t=o2();return{smoothScroll:t.documentElement&&"scrollBehavior"in t.documentElement.style,touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch),passiveListener:function(){var t=!1;try{var n=Object.defineProperty({},"passive",{get:function(){t=!0}});e.addEventListener("testPassiveListener",null,n)}catch(i){}return t}(),gestures:"ongesturestart"in e}}()),I2}function Z2(){return C2||(C2=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).userAgent,t=S2(),n=l2(),i=n.navigator.platform,r=e||n.navigator.userAgent,a={ios:!1,android:!1},o=n.screen.width,s=n.screen.height,l=r.match(/(Android);?[\s\/]+([\d.]+)?/),c=r.match(/(iPad).*OS\s([\d_]+)/),u=r.match(/(iPod)(.*OS\s([\d_]+))?/),g=!c&&r.match(/(iPhone\sOS|iOS)\s([\d_]+)/),d="Win32"===i,h="MacIntel"===i;return!c&&h&&t.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf("".concat(o,"x").concat(s))>=0&&((c=r.match(/(Version)\/([\d.]+)/))||(c=[0,1,"13_0_0"]),h=!1),l&&!d&&(a.os="android",a.android=!0),(c||g||u)&&(a.os="ios",a.ios=!0),a}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})),C2}function k2(){return m2||(m2=function(){var e=l2();return{isSafari:function(){var t=e.navigator.userAgent.toLowerCase();return t.indexOf("safari")>=0&&t.indexOf("chrome")<0&&t.indexOf("android")<0}(),isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent)}}()),m2}var R2={on:function(e,t,n){var i=this;if(!i.eventsListeners||i.destroyed)return i;if("function"!==typeof t)return i;var r=n?"unshift":"push";return e.split(" ").forEach((function(e){i.eventsListeners[e]||(i.eventsListeners[e]=[]),i.eventsListeners[e][r](t)})),i},once:function(e,t,n){var i=this;if(!i.eventsListeners||i.destroyed)return i;if("function"!==typeof t)return i;function r(){i.off(e,r),r.__emitterProxy&&delete r.__emitterProxy;for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];t.apply(i,a)}return r.__emitterProxy=t,i.on(e,r,n)},onAny:function(e,t){var n=this;if(!n.eventsListeners||n.destroyed)return n;if("function"!==typeof e)return n;var i=t?"unshift":"push";return n.eventsAnyListeners.indexOf(e)<0&&n.eventsAnyListeners[i](e),n},offAny:function(e){var t=this;if(!t.eventsListeners||t.destroyed)return t;if(!t.eventsAnyListeners)return t;var n=t.eventsAnyListeners.indexOf(e);return n>=0&&t.eventsAnyListeners.splice(n,1),t},off:function(e,t){var n=this;return!n.eventsListeners||n.destroyed?n:n.eventsListeners?(e.split(" ").forEach((function(e){"undefined"===typeof t?n.eventsListeners[e]=[]:n.eventsListeners[e]&&n.eventsListeners[e].forEach((function(i,r){(i===t||i.__emitterProxy&&i.__emitterProxy===t)&&n.eventsListeners[e].splice(r,1)}))})),n):n},emit:function(){var e,t,n,i=this;if(!i.eventsListeners||i.destroyed)return i;if(!i.eventsListeners)return i;for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return"string"===typeof a[0]||Array.isArray(a[0])?(e=a[0],t=a.slice(1,a.length),n=i):(e=a[0].events,t=a[0].data,n=a[0].context||i),t.unshift(n),(Array.isArray(e)?e:e.split(" ")).forEach((function(e){i.eventsAnyListeners&&i.eventsAnyListeners.length&&i.eventsAnyListeners.forEach((function(i){i.apply(n,[e].concat(We(t)))})),i.eventsListeners&&i.eventsListeners[e]&&i.eventsListeners[e].forEach((function(e){e.apply(n,t)}))})),i}};var W2={updateSize:function(){var e,t,n=this,i=n.$el;e="undefined"!==typeof n.params.width&&null!==n.params.width?n.params.width:i[0].clientWidth,t="undefined"!==typeof n.params.height&&null!==n.params.height?n.params.height:i[0].clientHeight,0===e&&n.isHorizontal()||0===t&&n.isVertical()||(e=e-parseInt(i.css("padding-left")||0,10)-parseInt(i.css("padding-right")||0,10),t=t-parseInt(i.css("padding-top")||0,10)-parseInt(i.css("padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),Object.assign(n,{width:e,height:t,size:n.isHorizontal()?e:t}))},updateSlides:function(){var e=this;function t(t){return e.isHorizontal()?t:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[t]}function n(e,n){return parseFloat(e.getPropertyValue(t(n))||0)}var i=e.params,r=e.$wrapperEl,a=e.size,o=e.rtlTranslate,s=e.wrongRTL,l=e.virtual&&i.virtual.enabled,c=l?e.virtual.slides.length:e.slides.length,u=r.children(".".concat(e.params.slideClass)),g=l?e.virtual.slides.length:u.length,d=[],h=[],f=[],p=i.slidesOffsetBefore;"function"===typeof p&&(p=i.slidesOffsetBefore.call(e));var I=i.slidesOffsetAfter;"function"===typeof I&&(I=i.slidesOffsetAfter.call(e));var C=e.snapGrid.length,m=e.slidesGrid.length,v=i.spaceBetween,A=-p,b=0,y=0;if("undefined"!==typeof a){"string"===typeof v&&v.indexOf("%")>=0&&(v=parseFloat(v.replace("%",""))/100*a),e.virtualSize=-v,o?u.css({marginLeft:"",marginBottom:"",marginTop:""}):u.css({marginRight:"",marginBottom:"",marginTop:""}),i.centeredSlides&&i.cssMode&&(B2(e.wrapperEl,"--swiper-centered-offset-before",""),B2(e.wrapperEl,"--swiper-centered-offset-after",""));var G,w=i.grid&&i.grid.rows>1&&e.grid;w&&e.grid.initSlides(g);for(var B="auto"===i.slidesPerView&&i.breakpoints&&Object.keys(i.breakpoints).filter((function(e){return"undefined"!==typeof i.breakpoints[e].slidesPerView})).length>0,x=0;x<g;x+=1){G=0;var S=u.eq(x);if(w&&e.grid.updateSlide(x,S,g,t),"none"!==S.css("display")){if("auto"===i.slidesPerView){B&&(u[x].style[t("width")]="");var Z=getComputedStyle(S[0]),k=S[0].style.transform,R=S[0].style.webkitTransform;if(k&&(S[0].style.transform="none"),R&&(S[0].style.webkitTransform="none"),i.roundLengths)G=e.isHorizontal()?S.outerWidth(!0):S.outerHeight(!0);else{var W=n(Z,"width"),M=n(Z,"padding-left"),V=n(Z,"padding-right"),F=n(Z,"margin-left"),N=n(Z,"margin-right"),H=Z.getPropertyValue("box-sizing");if(H&&"border-box"===H)G=W+F+N;else{var T=S[0],X=T.clientWidth;G=W+M+V+F+N+(T.offsetWidth-X)}}k&&(S[0].style.transform=k),R&&(S[0].style.webkitTransform=R),i.roundLengths&&(G=Math.floor(G))}else G=(a-(i.slidesPerView-1)*v)/i.slidesPerView,i.roundLengths&&(G=Math.floor(G)),u[x]&&(u[x].style[t("width")]="".concat(G,"px"));u[x]&&(u[x].swiperSlideSize=G),f.push(G),i.centeredSlides?(A=A+G/2+b/2+v,0===b&&0!==x&&(A=A-a/2-v),0===x&&(A=A-a/2-v),Math.abs(A)<.001&&(A=0),i.roundLengths&&(A=Math.floor(A)),y%i.slidesPerGroup===0&&d.push(A),h.push(A)):(i.roundLengths&&(A=Math.floor(A)),(y-Math.min(e.params.slidesPerGroupSkip,y))%e.params.slidesPerGroup===0&&d.push(A),h.push(A),A=A+G+v),e.virtualSize+=G+v,b=G,y+=1}}if(e.virtualSize=Math.max(e.virtualSize,a)+I,o&&s&&("slide"===i.effect||"coverflow"===i.effect)&&r.css({width:"".concat(e.virtualSize+i.spaceBetween,"px")}),i.setWrapperSize&&r.css(ke({},t("width"),"".concat(e.virtualSize+i.spaceBetween,"px"))),w&&e.grid.updateWrapperSize(G,d,t),!i.centeredSlides){for(var Y=[],E=0;E<d.length;E+=1){var z=d[E];i.roundLengths&&(z=Math.floor(z)),d[E]<=e.virtualSize-a&&Y.push(z)}d=Y,Math.floor(e.virtualSize-a)-Math.floor(d[d.length-1])>1&&d.push(e.virtualSize-a)}if(0===d.length&&(d=[0]),0!==i.spaceBetween){var L=e.isHorizontal()&&o?"marginLeft":t("marginRight");u.filter((function(e,t){return!i.cssMode||t!==u.length-1})).css(ke({},L,"".concat(v,"px")))}if(i.centeredSlides&&i.centeredSlidesBounds){var K=0;f.forEach((function(e){K+=e+(i.spaceBetween?i.spaceBetween:0)}));var _=(K-=i.spaceBetween)-a;d=d.map((function(e){return e<0?-p:e>_?_+I:e}))}if(i.centerInsufficientSlides){var P=0;if(f.forEach((function(e){P+=e+(i.spaceBetween?i.spaceBetween:0)})),(P-=i.spaceBetween)<a){var D=(a-P)/2;d.forEach((function(e,t){d[t]=e-D})),h.forEach((function(e,t){h[t]=e+D}))}}if(Object.assign(e,{slides:u,snapGrid:d,slidesGrid:h,slidesSizesGrid:f}),i.centeredSlides&&i.cssMode&&!i.centeredSlidesBounds){B2(e.wrapperEl,"--swiper-centered-offset-before","".concat(-d[0],"px")),B2(e.wrapperEl,"--swiper-centered-offset-after","".concat(e.size/2-f[f.length-1]/2,"px"));var O=-e.snapGrid[0],U=-e.slidesGrid[0];e.snapGrid=e.snapGrid.map((function(e){return e+O})),e.slidesGrid=e.slidesGrid.map((function(e){return e+U}))}if(g!==c&&e.emit("slidesLengthChange"),d.length!==C&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),h.length!==m&&e.emit("slidesGridLengthChange"),i.watchSlidesProgress&&e.updateSlidesOffset(),!l&&!i.cssMode&&("slide"===i.effect||"fade"===i.effect)){var j="".concat(i.containerModifierClass,"backface-hidden"),J=e.$el.hasClass(j);g<=i.maxBackfaceHiddenSlides?J||e.$el.addClass(j):J&&e.$el.removeClass(j)}}},updateAutoHeight:function(e){var t,n=this,i=[],r=n.virtual&&n.params.virtual.enabled,a=0;"number"===typeof e?n.setTransition(e):!0===e&&n.setTransition(n.params.speed);var o=function(e){return r?n.slides.filter((function(t){return parseInt(t.getAttribute("data-swiper-slide-index"),10)===e}))[0]:n.slides.eq(e)[0]};if("auto"!==n.params.slidesPerView&&n.params.slidesPerView>1)if(n.params.centeredSlides)(n.visibleSlides||v2([])).each((function(e){i.push(e)}));else for(t=0;t<Math.ceil(n.params.slidesPerView);t+=1){var s=n.activeIndex+t;if(s>n.slides.length&&!r)break;i.push(o(s))}else i.push(o(n.activeIndex));for(t=0;t<i.length;t+=1)if("undefined"!==typeof i[t]){var l=i[t].offsetHeight;a=l>a?l:a}(a||0===a)&&n.$wrapperEl.css("height","".concat(a,"px"))},updateSlidesOffset:function(){for(var e=this.slides,t=0;t<e.length;t+=1)e[t].swiperSlideOffset=this.isHorizontal()?e[t].offsetLeft:e[t].offsetTop},updateSlidesProgress:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this&&this.translate||0,t=this,n=t.params,i=t.slides,r=t.rtlTranslate,a=t.snapGrid;if(0!==i.length){"undefined"===typeof i[0].swiperSlideOffset&&t.updateSlidesOffset();var o=-e;r&&(o=e),i.removeClass(n.slideVisibleClass),t.visibleSlidesIndexes=[],t.visibleSlides=[];for(var s=0;s<i.length;s+=1){var l=i[s],c=l.swiperSlideOffset;n.cssMode&&n.centeredSlides&&(c-=i[0].swiperSlideOffset);var u=(o+(n.centeredSlides?t.minTranslate():0)-c)/(l.swiperSlideSize+n.spaceBetween),g=(o-a[0]+(n.centeredSlides?t.minTranslate():0)-c)/(l.swiperSlideSize+n.spaceBetween),d=-(o-c),h=d+t.slidesSizesGrid[s];(d>=0&&d<t.size-1||h>1&&h<=t.size||d<=0&&h>=t.size)&&(t.visibleSlides.push(l),t.visibleSlidesIndexes.push(s),i.eq(s).addClass(n.slideVisibleClass)),l.progress=r?-u:u,l.originalProgress=r?-g:g}t.visibleSlides=v2(t.visibleSlides)}},updateProgress:function(e){var t=this;if("undefined"===typeof e){var n=t.rtlTranslate?-1:1;e=t&&t.translate&&t.translate*n||0}var i=t.params,r=t.maxTranslate()-t.minTranslate(),a=t.progress,o=t.isBeginning,s=t.isEnd,l=o,c=s;0===r?(a=0,o=!0,s=!0):(o=(a=(e-t.minTranslate())/r)<=0,s=a>=1),Object.assign(t,{progress:a,isBeginning:o,isEnd:s}),(i.watchSlidesProgress||i.centeredSlides&&i.autoHeight)&&t.updateSlidesProgress(e),o&&!l&&t.emit("reachBeginning toEdge"),s&&!c&&t.emit("reachEnd toEdge"),(l&&!o||c&&!s)&&t.emit("fromEdge"),t.emit("progress",a)},updateSlidesClasses:function(){var e,t=this,n=t.slides,i=t.params,r=t.$wrapperEl,a=t.activeIndex,o=t.realIndex,s=t.virtual&&i.virtual.enabled;n.removeClass("".concat(i.slideActiveClass," ").concat(i.slideNextClass," ").concat(i.slidePrevClass," ").concat(i.slideDuplicateActiveClass," ").concat(i.slideDuplicateNextClass," ").concat(i.slideDuplicatePrevClass)),(e=s?t.$wrapperEl.find(".".concat(i.slideClass,'[data-swiper-slide-index="').concat(a,'"]')):n.eq(a)).addClass(i.slideActiveClass),i.loop&&(e.hasClass(i.slideDuplicateClass)?r.children(".".concat(i.slideClass,":not(.").concat(i.slideDuplicateClass,')[data-swiper-slide-index="').concat(o,'"]')).addClass(i.slideDuplicateActiveClass):r.children(".".concat(i.slideClass,".").concat(i.slideDuplicateClass,'[data-swiper-slide-index="').concat(o,'"]')).addClass(i.slideDuplicateActiveClass));var l=e.nextAll(".".concat(i.slideClass)).eq(0).addClass(i.slideNextClass);i.loop&&0===l.length&&(l=n.eq(0)).addClass(i.slideNextClass);var c=e.prevAll(".".concat(i.slideClass)).eq(0).addClass(i.slidePrevClass);i.loop&&0===c.length&&(c=n.eq(-1)).addClass(i.slidePrevClass),i.loop&&(l.hasClass(i.slideDuplicateClass)?r.children(".".concat(i.slideClass,":not(.").concat(i.slideDuplicateClass,')[data-swiper-slide-index="').concat(l.attr("data-swiper-slide-index"),'"]')).addClass(i.slideDuplicateNextClass):r.children(".".concat(i.slideClass,".").concat(i.slideDuplicateClass,'[data-swiper-slide-index="').concat(l.attr("data-swiper-slide-index"),'"]')).addClass(i.slideDuplicateNextClass),c.hasClass(i.slideDuplicateClass)?r.children(".".concat(i.slideClass,":not(.").concat(i.slideDuplicateClass,')[data-swiper-slide-index="').concat(c.attr("data-swiper-slide-index"),'"]')).addClass(i.slideDuplicatePrevClass):r.children(".".concat(i.slideClass,".").concat(i.slideDuplicateClass,'[data-swiper-slide-index="').concat(c.attr("data-swiper-slide-index"),'"]')).addClass(i.slideDuplicatePrevClass)),t.emitSlidesClasses()},updateActiveIndex:function(e){var t,n=this,i=n.rtlTranslate?n.translate:-n.translate,r=n.slidesGrid,a=n.snapGrid,o=n.params,s=n.activeIndex,l=n.realIndex,c=n.snapIndex,u=e;if("undefined"===typeof u){for(var g=0;g<r.length;g+=1)"undefined"!==typeof r[g+1]?i>=r[g]&&i<r[g+1]-(r[g+1]-r[g])/2?u=g:i>=r[g]&&i<r[g+1]&&(u=g+1):i>=r[g]&&(u=g);o.normalizeSlideIndex&&(u<0||"undefined"===typeof u)&&(u=0)}if(a.indexOf(i)>=0)t=a.indexOf(i);else{var d=Math.min(o.slidesPerGroupSkip,u);t=d+Math.floor((u-d)/o.slidesPerGroup)}if(t>=a.length&&(t=a.length-1),u!==s){var h=parseInt(n.slides.eq(u).attr("data-swiper-slide-index")||u,10);Object.assign(n,{snapIndex:t,realIndex:h,previousIndex:s,activeIndex:u}),n.emit("activeIndexChange"),n.emit("snapIndexChange"),l!==h&&n.emit("realIndexChange"),(n.initialized||n.params.runCallbacksOnInit)&&n.emit("slideChange")}else t!==c&&(n.snapIndex=t,n.emit("snapIndexChange"))},updateClickedSlide:function(e){var t,n=this,i=n.params,r=v2(e).closest(".".concat(i.slideClass))[0],a=!1;if(r)for(var o=0;o<n.slides.length;o+=1)if(n.slides[o]===r){a=!0,t=o;break}if(!r||!a)return n.clickedSlide=void 0,void(n.clickedIndex=void 0);n.clickedSlide=r,n.virtual&&n.params.virtual.enabled?n.clickedIndex=parseInt(v2(r).attr("data-swiper-slide-index"),10):n.clickedIndex=t,i.slideToClickedSlide&&void 0!==n.clickedIndex&&n.clickedIndex!==n.activeIndex&&n.slideToClickedSlide()}};var M2={getTranslate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.isHorizontal()?"x":"y",t=this,n=t.params,i=t.rtlTranslate,r=t.translate,a=t.$wrapperEl;if(n.virtualTranslate)return i?-r:r;if(n.cssMode)return r;var o=y2(a[0],e);return i&&(o=-o),o||0},setTranslate:function(e,t){var n=this,i=n.rtlTranslate,r=n.params,a=n.$wrapperEl,o=n.wrapperEl,s=n.progress,l=0,c=0;n.isHorizontal()?l=i?-e:e:c=e,r.roundLengths&&(l=Math.floor(l),c=Math.floor(c)),r.cssMode?o[n.isHorizontal()?"scrollLeft":"scrollTop"]=n.isHorizontal()?-l:-c:r.virtualTranslate||a.transform("translate3d(".concat(l,"px, ").concat(c,"px, ").concat(0,"px)")),n.previousTranslate=n.translate,n.translate=n.isHorizontal()?l:c;var u=n.maxTranslate()-n.minTranslate();(0===u?0:(e-n.minTranslate())/u)!==s&&n.updateProgress(e),n.emit("setTranslate",n.translate,t)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.params.speed,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=arguments.length>4?arguments[4]:void 0,a=this,o=a.params,s=a.wrapperEl;if(a.animating&&o.preventInteractionOnTransition)return!1;var l,c=a.minTranslate(),u=a.maxTranslate();if(l=i&&e>c?c:i&&e<u?u:e,a.updateProgress(l),o.cssMode){var g=a.isHorizontal();if(0===t)s[g?"scrollLeft":"scrollTop"]=-l;else{var d;if(!a.support.smoothScroll)return x2({swiper:a,targetPosition:-l,side:g?"left":"top"}),!0;s.scrollTo((ke(d={},g?"left":"top",-l),ke(d,"behavior","smooth"),d))}return!0}return 0===t?(a.setTransition(0),a.setTranslate(l),n&&(a.emit("beforeTransitionStart",t,r),a.emit("transitionEnd"))):(a.setTransition(t),a.setTranslate(l),n&&(a.emit("beforeTransitionStart",t,r),a.emit("transitionStart")),a.animating||(a.animating=!0,a.onTranslateToWrapperTransitionEnd||(a.onTranslateToWrapperTransitionEnd=function(e){a&&!a.destroyed&&e.target===this&&(a.$wrapperEl[0].removeEventListener("transitionend",a.onTranslateToWrapperTransitionEnd),a.$wrapperEl[0].removeEventListener("webkitTransitionEnd",a.onTranslateToWrapperTransitionEnd),a.onTranslateToWrapperTransitionEnd=null,delete a.onTranslateToWrapperTransitionEnd,n&&a.emit("transitionEnd"))}),a.$wrapperEl[0].addEventListener("transitionend",a.onTranslateToWrapperTransitionEnd),a.$wrapperEl[0].addEventListener("webkitTransitionEnd",a.onTranslateToWrapperTransitionEnd))),!0}};function V2(e){var t=e.swiper,n=e.runCallbacks,i=e.direction,r=e.step,a=t.activeIndex,o=t.previousIndex,s=i;if(s||(s=a>o?"next":a<o?"prev":"reset"),t.emit("transition".concat(r)),n&&a!==o){if("reset"===s)return void t.emit("slideResetTransition".concat(r));t.emit("slideChangeTransition".concat(r)),"next"===s?t.emit("slideNextTransition".concat(r)):t.emit("slidePrevTransition".concat(r))}}var F2={setTransition:function(e,t){var n=this;n.params.cssMode||n.$wrapperEl.transition(e),n.emit("setTransition",e,t)},transitionStart:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=this,i=n.params;i.cssMode||(i.autoHeight&&n.updateAutoHeight(),V2({swiper:n,runCallbacks:e,direction:t,step:"Start"}))},transitionEnd:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=this,i=n.params;n.animating=!1,i.cssMode||(n.setTransition(0),V2({swiper:n,runCallbacks:e,direction:t,step:"End"}))}};var N2={slideTo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.params.speed,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;if("number"!==typeof e&&"string"!==typeof e)throw new Error("The 'index' argument cannot have type other than 'number' or 'string'. [".concat(typeof e,"] given."));if("string"===typeof e){var a=parseInt(e,10);if(!isFinite(a))throw new Error("The passed-in 'index' (string) couldn't be converted to 'number'. [".concat(e,"] given."));e=a}var o=this,s=e;s<0&&(s=0);var l=o.params,c=o.snapGrid,u=o.slidesGrid,g=o.previousIndex,d=o.activeIndex,h=o.rtlTranslate,f=o.wrapperEl,p=o.enabled;if(o.animating&&l.preventInteractionOnTransition||!p&&!i&&!r)return!1;var I=Math.min(o.params.slidesPerGroupSkip,s),C=I+Math.floor((s-I)/o.params.slidesPerGroup);C>=c.length&&(C=c.length-1);var m,v=-c[C];if(l.normalizeSlideIndex)for(var A=0;A<u.length;A+=1){var b=-Math.floor(100*v),y=Math.floor(100*u[A]),G=Math.floor(100*u[A+1]);"undefined"!==typeof u[A+1]?b>=y&&b<G-(G-y)/2?s=A:b>=y&&b<G&&(s=A+1):b>=y&&(s=A)}if(o.initialized&&s!==d){if(!o.allowSlideNext&&v<o.translate&&v<o.minTranslate())return!1;if(!o.allowSlidePrev&&v>o.translate&&v>o.maxTranslate()&&(d||0)!==s)return!1}if(s!==(g||0)&&n&&o.emit("beforeSlideChangeStart"),o.updateProgress(v),m=s>d?"next":s<d?"prev":"reset",h&&-v===o.translate||!h&&v===o.translate)return o.updateActiveIndex(s),l.autoHeight&&o.updateAutoHeight(),o.updateSlidesClasses(),"slide"!==l.effect&&o.setTranslate(v),"reset"!==m&&(o.transitionStart(n,m),o.transitionEnd(n,m)),!1;if(l.cssMode){var w=o.isHorizontal(),B=h?v:-v;if(0===t){var x=o.virtual&&o.params.virtual.enabled;x&&(o.wrapperEl.style.scrollSnapType="none",o._immediateVirtual=!0),f[w?"scrollLeft":"scrollTop"]=B,x&&requestAnimationFrame((function(){o.wrapperEl.style.scrollSnapType="",o._swiperImmediateVirtual=!1}))}else{var S;if(!o.support.smoothScroll)return x2({swiper:o,targetPosition:B,side:w?"left":"top"}),!0;f.scrollTo((ke(S={},w?"left":"top",B),ke(S,"behavior","smooth"),S))}return!0}return o.setTransition(t),o.setTranslate(v),o.updateActiveIndex(s),o.updateSlidesClasses(),o.emit("beforeTransitionStart",t,i),o.transitionStart(n,m),0===t?o.transitionEnd(n,m):o.animating||(o.animating=!0,o.onSlideToWrapperTransitionEnd||(o.onSlideToWrapperTransitionEnd=function(e){o&&!o.destroyed&&e.target===this&&(o.$wrapperEl[0].removeEventListener("transitionend",o.onSlideToWrapperTransitionEnd),o.$wrapperEl[0].removeEventListener("webkitTransitionEnd",o.onSlideToWrapperTransitionEnd),o.onSlideToWrapperTransitionEnd=null,delete o.onSlideToWrapperTransitionEnd,o.transitionEnd(n,m))}),o.$wrapperEl[0].addEventListener("transitionend",o.onSlideToWrapperTransitionEnd),o.$wrapperEl[0].addEventListener("webkitTransitionEnd",o.onSlideToWrapperTransitionEnd)),!0},slideToLoop:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.params.speed,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3?arguments[3]:void 0;if("string"===typeof e){var r=parseInt(e,10);if(!isFinite(r))throw new Error("The passed-in 'index' (string) couldn't be converted to 'number'. [".concat(e,"] given."));e=r}var a=this,o=e;return a.params.loop&&(o+=a.loopedSlides),a.slideTo(o,t,n,i)},slideNext:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.params.speed,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,i=this,r=i.animating,a=i.enabled,o=i.params;if(!a)return i;var s=o.slidesPerGroup;"auto"===o.slidesPerView&&1===o.slidesPerGroup&&o.slidesPerGroupAuto&&(s=Math.max(i.slidesPerViewDynamic("current",!0),1));var l=i.activeIndex<o.slidesPerGroupSkip?1:s;if(o.loop){if(r&&o.loopPreventsSlide)return!1;i.loopFix(),i._clientLeft=i.$wrapperEl[0].clientLeft}return o.rewind&&i.isEnd?i.slideTo(0,e,t,n):i.slideTo(i.activeIndex+l,e,t,n)},slidePrev:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.params.speed,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,i=this,r=i.params,a=i.animating,o=i.snapGrid,s=i.slidesGrid,l=i.rtlTranslate;if(!i.enabled)return i;if(r.loop){if(a&&r.loopPreventsSlide)return!1;i.loopFix(),i._clientLeft=i.$wrapperEl[0].clientLeft}function c(e){return e<0?-Math.floor(Math.abs(e)):Math.floor(e)}var u,g=c(l?i.translate:-i.translate),d=o.map((function(e){return c(e)})),h=o[d.indexOf(g)-1];"undefined"===typeof h&&r.cssMode&&(o.forEach((function(e,t){g>=e&&(u=t)})),"undefined"!==typeof u&&(h=o[u>0?u-1:u]));var f=0;if("undefined"!==typeof h&&((f=s.indexOf(h))<0&&(f=i.activeIndex-1),"auto"===r.slidesPerView&&1===r.slidesPerGroup&&r.slidesPerGroupAuto&&(f=f-i.slidesPerViewDynamic("previous",!0)+1,f=Math.max(f,0))),r.rewind&&i.isBeginning){var p=i.params.virtual&&i.params.virtual.enabled&&i.virtual?i.virtual.slides.length-1:i.slides.length-1;return i.slideTo(p,e,t,n)}return i.slideTo(f,e,t,n)},slideReset:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.params.speed,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;return this.slideTo(this.activeIndex,e,t,n)},slideToClosest:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.params.speed,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,r=this,a=r.activeIndex,o=Math.min(r.params.slidesPerGroupSkip,a),s=o+Math.floor((a-o)/r.params.slidesPerGroup),l=r.rtlTranslate?r.translate:-r.translate;if(l>=r.snapGrid[s]){var c=r.snapGrid[s];l-c>(r.snapGrid[s+1]-c)*i&&(a+=r.params.slidesPerGroup)}else{var u=r.snapGrid[s-1];l-u<=(r.snapGrid[s]-u)*i&&(a-=r.params.slidesPerGroup)}return a=Math.max(a,0),a=Math.min(a,r.slidesGrid.length-1),r.slideTo(a,e,t,n)},slideToClickedSlide:function(){var e,t=this,n=t.params,i=t.$wrapperEl,r="auto"===n.slidesPerView?t.slidesPerViewDynamic():n.slidesPerView,a=t.clickedIndex;if(n.loop){if(t.animating)return;e=parseInt(v2(t.clickedSlide).attr("data-swiper-slide-index"),10),n.centeredSlides?a<t.loopedSlides-r/2||a>t.slides.length-t.loopedSlides+r/2?(t.loopFix(),a=i.children(".".concat(n.slideClass,'[data-swiper-slide-index="').concat(e,'"]:not(.').concat(n.slideDuplicateClass,")")).eq(0).index(),A2((function(){t.slideTo(a)}))):t.slideTo(a):a>t.slides.length-r?(t.loopFix(),a=i.children(".".concat(n.slideClass,'[data-swiper-slide-index="').concat(e,'"]:not(.').concat(n.slideDuplicateClass,")")).eq(0).index(),A2((function(){t.slideTo(a)}))):t.slideTo(a)}else t.slideTo(a)}};var H2={loopCreate:function(){var e=this,t=o2(),n=e.params,i=e.$wrapperEl,r=i.children().length>0?v2(i.children()[0].parentNode):i;r.children(".".concat(n.slideClass,".").concat(n.slideDuplicateClass)).remove();var a=r.children(".".concat(n.slideClass));if(n.loopFillGroupWithBlank){var o=n.slidesPerGroup-a.length%n.slidesPerGroup;if(o!==n.slidesPerGroup){for(var s=0;s<o;s+=1){var l=v2(t.createElement("div")).addClass("".concat(n.slideClass," ").concat(n.slideBlankClass));r.append(l)}a=r.children(".".concat(n.slideClass))}}"auto"!==n.slidesPerView||n.loopedSlides||(n.loopedSlides=a.length),e.loopedSlides=Math.ceil(parseFloat(n.loopedSlides||n.slidesPerView,10)),e.loopedSlides+=n.loopAdditionalSlides,e.loopedSlides>a.length&&e.params.loopedSlidesLimit&&(e.loopedSlides=a.length);var c=[],u=[];a.each((function(e,t){v2(e).attr("data-swiper-slide-index",t)}));for(var g=0;g<e.loopedSlides;g+=1){var d=g-Math.floor(g/a.length)*a.length;u.push(a.eq(d)[0]),c.unshift(a.eq(a.length-d-1)[0])}for(var h=0;h<u.length;h+=1)r.append(v2(u[h].cloneNode(!0)).addClass(n.slideDuplicateClass));for(var f=c.length-1;f>=0;f-=1)r.prepend(v2(c[f].cloneNode(!0)).addClass(n.slideDuplicateClass))},loopFix:function(){var e=this;e.emit("beforeLoopFix");var t,n=e.activeIndex,i=e.slides,r=e.loopedSlides,a=e.allowSlidePrev,o=e.allowSlideNext,s=e.snapGrid,l=e.rtlTranslate;e.allowSlidePrev=!0,e.allowSlideNext=!0;var c=-s[n]-e.getTranslate();if(n<r)t=i.length-3*r+n,t+=r,e.slideTo(t,0,!1,!0)&&0!==c&&e.setTranslate((l?-e.translate:e.translate)-c);else if(n>=i.length-r){t=-i.length+n+r,t+=r,e.slideTo(t,0,!1,!0)&&0!==c&&e.setTranslate((l?-e.translate:e.translate)-c)}e.allowSlidePrev=a,e.allowSlideNext=o,e.emit("loopFix")},loopDestroy:function(){var e=this,t=e.$wrapperEl,n=e.params,i=e.slides;t.children(".".concat(n.slideClass,".").concat(n.slideDuplicateClass,",.").concat(n.slideClass,".").concat(n.slideBlankClass)).remove(),i.removeAttr("data-swiper-slide-index")}};var T2={setGrabCursor:function(e){var t=this;if(!(t.support.touch||!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)){var n="container"===t.params.touchEventsTarget?t.el:t.wrapperEl;n.style.cursor="move",n.style.cursor=e?"grabbing":"grab"}},unsetGrabCursor:function(){var e=this;e.support.touch||e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e["container"===e.params.touchEventsTarget?"el":"wrapperEl"].style.cursor="")}};function X2(e){var t=this,n=o2(),i=l2(),r=t.touchEventsData,a=t.params,o=t.touches;if(t.enabled&&(!t.animating||!a.preventInteractionOnTransition)){!t.animating&&a.cssMode&&a.loop&&t.loopFix();var s=e;s.originalEvent&&(s=s.originalEvent);var l=v2(s.target);if(("wrapper"!==a.touchEventsTarget||l.closest(t.wrapperEl).length)&&(r.isTouchEvent="touchstart"===s.type,(r.isTouchEvent||!("which"in s)||3!==s.which)&&!(!r.isTouchEvent&&"button"in s&&s.button>0)&&(!r.isTouched||!r.isMoved))){var c=!!a.noSwipingClass&&""!==a.noSwipingClass,u=e.composedPath?e.composedPath():e.path;c&&s.target&&s.target.shadowRoot&&u&&(l=v2(u[0]));var g=a.noSwipingSelector?a.noSwipingSelector:".".concat(a.noSwipingClass),d=!(!s.target||!s.target.shadowRoot);if(a.noSwiping&&(d?function(e){return function t(n){if(!n||n===o2()||n===l2())return null;n.assignedSlot&&(n=n.assignedSlot);var i=n.closest(e);return i||n.getRootNode?i||t(n.getRootNode().host):null}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this)}(g,l[0]):l.closest(g)[0]))t.allowClick=!0;else if(!a.swipeHandler||l.closest(a.swipeHandler)[0]){o.currentX="touchstart"===s.type?s.targetTouches[0].pageX:s.pageX,o.currentY="touchstart"===s.type?s.targetTouches[0].pageY:s.pageY;var h=o.currentX,f=o.currentY,p=a.edgeSwipeDetection||a.iOSEdgeSwipeDetection,I=a.edgeSwipeThreshold||a.iOSEdgeSwipeThreshold;if(p&&(h<=I||h>=i.innerWidth-I)){if("prevent"!==p)return;e.preventDefault()}if(Object.assign(r,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),o.startX=h,o.startY=f,r.touchStartTime=b2(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,a.threshold>0&&(r.allowThresholdMove=!1),"touchstart"!==s.type){var C=!0;l.is(r.focusableElements)&&(C=!1,"SELECT"===l[0].nodeName&&(r.isTouched=!1)),n.activeElement&&v2(n.activeElement).is(r.focusableElements)&&n.activeElement!==l[0]&&n.activeElement.blur();var m=C&&t.allowTouchMove&&a.touchStartPreventDefault;!a.touchStartForcePreventDefault&&!m||l[0].isContentEditable||s.preventDefault()}t.params.freeMode&&t.params.freeMode.enabled&&t.freeMode&&t.animating&&!a.cssMode&&t.freeMode.onTouchStart(),t.emit("touchStart",s)}}}}function Y2(e){var t=o2(),n=this,i=n.touchEventsData,r=n.params,a=n.touches,o=n.rtlTranslate;if(n.enabled){var s=e;if(s.originalEvent&&(s=s.originalEvent),i.isTouched){if(!i.isTouchEvent||"touchmove"===s.type){var l="touchmove"===s.type&&s.targetTouches&&(s.targetTouches[0]||s.changedTouches[0]),c="touchmove"===s.type?l.pageX:s.pageX,u="touchmove"===s.type?l.pageY:s.pageY;if(s.preventedByNestedSwiper)return a.startX=c,void(a.startY=u);if(!n.allowTouchMove)return v2(s.target).is(i.focusableElements)||(n.allowClick=!1),void(i.isTouched&&(Object.assign(a,{startX:c,startY:u,currentX:c,currentY:u}),i.touchStartTime=b2()));if(i.isTouchEvent&&r.touchReleaseOnEdges&&!r.loop)if(n.isVertical()){if(u<a.startY&&n.translate<=n.maxTranslate()||u>a.startY&&n.translate>=n.minTranslate())return i.isTouched=!1,void(i.isMoved=!1)}else if(c<a.startX&&n.translate<=n.maxTranslate()||c>a.startX&&n.translate>=n.minTranslate())return;if(i.isTouchEvent&&t.activeElement&&s.target===t.activeElement&&v2(s.target).is(i.focusableElements))return i.isMoved=!0,void(n.allowClick=!1);if(i.allowTouchCallbacks&&n.emit("touchMove",s),!(s.targetTouches&&s.targetTouches.length>1)){a.currentX=c,a.currentY=u;var g=a.currentX-a.startX,d=a.currentY-a.startY;if(!(n.params.threshold&&Math.sqrt(Math.pow(g,2)+Math.pow(d,2))<n.params.threshold)){var h;if("undefined"===typeof i.isScrolling)n.isHorizontal()&&a.currentY===a.startY||n.isVertical()&&a.currentX===a.startX?i.isScrolling=!1:g*g+d*d>=25&&(h=180*Math.atan2(Math.abs(d),Math.abs(g))/Math.PI,i.isScrolling=n.isHorizontal()?h>r.touchAngle:90-h>r.touchAngle);if(i.isScrolling&&n.emit("touchMoveOpposite",s),"undefined"===typeof i.startMoving&&(a.currentX===a.startX&&a.currentY===a.startY||(i.startMoving=!0)),i.isScrolling)i.isTouched=!1;else if(i.startMoving){n.allowClick=!1,!r.cssMode&&s.cancelable&&s.preventDefault(),r.touchMoveStopPropagation&&!r.nested&&s.stopPropagation(),i.isMoved||(r.loop&&!r.cssMode&&n.loopFix(),i.startTranslate=n.getTranslate(),n.setTransition(0),n.animating&&n.$wrapperEl.trigger("webkitTransitionEnd transitionend"),i.allowMomentumBounce=!1,!r.grabCursor||!0!==n.allowSlideNext&&!0!==n.allowSlidePrev||n.setGrabCursor(!0),n.emit("sliderFirstMove",s)),n.emit("sliderMove",s),i.isMoved=!0;var f=n.isHorizontal()?g:d;a.diff=f,f*=r.touchRatio,o&&(f=-f),n.swipeDirection=f>0?"prev":"next",i.currentTranslate=f+i.startTranslate;var p=!0,I=r.resistanceRatio;if(r.touchReleaseOnEdges&&(I=0),f>0&&i.currentTranslate>n.minTranslate()?(p=!1,r.resistance&&(i.currentTranslate=n.minTranslate()-1+Math.pow(-n.minTranslate()+i.startTranslate+f,I))):f<0&&i.currentTranslate<n.maxTranslate()&&(p=!1,r.resistance&&(i.currentTranslate=n.maxTranslate()+1-Math.pow(n.maxTranslate()-i.startTranslate-f,I))),p&&(s.preventedByNestedSwiper=!0),!n.allowSlideNext&&"next"===n.swipeDirection&&i.currentTranslate<i.startTranslate&&(i.currentTranslate=i.startTranslate),!n.allowSlidePrev&&"prev"===n.swipeDirection&&i.currentTranslate>i.startTranslate&&(i.currentTranslate=i.startTranslate),n.allowSlidePrev||n.allowSlideNext||(i.currentTranslate=i.startTranslate),r.threshold>0){if(!(Math.abs(f)>r.threshold||i.allowThresholdMove))return void(i.currentTranslate=i.startTranslate);if(!i.allowThresholdMove)return i.allowThresholdMove=!0,a.startX=a.currentX,a.startY=a.currentY,i.currentTranslate=i.startTranslate,void(a.diff=n.isHorizontal()?a.currentX-a.startX:a.currentY-a.startY)}r.followFinger&&!r.cssMode&&((r.freeMode&&r.freeMode.enabled&&n.freeMode||r.watchSlidesProgress)&&(n.updateActiveIndex(),n.updateSlidesClasses()),n.params.freeMode&&r.freeMode.enabled&&n.freeMode&&n.freeMode.onTouchMove(),n.updateProgress(i.currentTranslate),n.setTranslate(i.currentTranslate))}}}}}else i.startMoving&&i.isScrolling&&n.emit("touchMoveOpposite",s)}}function E2(e){var t=this,n=t.touchEventsData,i=t.params,r=t.touches,a=t.rtlTranslate,o=t.slidesGrid;if(t.enabled){var s=e;if(s.originalEvent&&(s=s.originalEvent),n.allowTouchCallbacks&&t.emit("touchEnd",s),n.allowTouchCallbacks=!1,!n.isTouched)return n.isMoved&&i.grabCursor&&t.setGrabCursor(!1),n.isMoved=!1,void(n.startMoving=!1);i.grabCursor&&n.isMoved&&n.isTouched&&(!0===t.allowSlideNext||!0===t.allowSlidePrev)&&t.setGrabCursor(!1);var l,c=b2(),u=c-n.touchStartTime;if(t.allowClick){var g=s.path||s.composedPath&&s.composedPath();t.updateClickedSlide(g&&g[0]||s.target),t.emit("tap click",s),u<300&&c-n.lastClickTime<300&&t.emit("doubleTap doubleClick",s)}if(n.lastClickTime=b2(),A2((function(){t.destroyed||(t.allowClick=!0)})),!n.isTouched||!n.isMoved||!t.swipeDirection||0===r.diff||n.currentTranslate===n.startTranslate)return n.isTouched=!1,n.isMoved=!1,void(n.startMoving=!1);if(n.isTouched=!1,n.isMoved=!1,n.startMoving=!1,l=i.followFinger?a?t.translate:-t.translate:-n.currentTranslate,!i.cssMode)if(t.params.freeMode&&i.freeMode.enabled)t.freeMode.onTouchEnd({currentPos:l});else{for(var d=0,h=t.slidesSizesGrid[0],f=0;f<o.length;f+=f<i.slidesPerGroupSkip?1:i.slidesPerGroup){var p=f<i.slidesPerGroupSkip-1?1:i.slidesPerGroup;"undefined"!==typeof o[f+p]?l>=o[f]&&l<o[f+p]&&(d=f,h=o[f+p]-o[f]):l>=o[f]&&(d=f,h=o[o.length-1]-o[o.length-2])}var I=null,C=null;i.rewind&&(t.isBeginning?C=t.params.virtual&&t.params.virtual.enabled&&t.virtual?t.virtual.slides.length-1:t.slides.length-1:t.isEnd&&(I=0));var m=(l-o[d])/h,v=d<i.slidesPerGroupSkip-1?1:i.slidesPerGroup;if(u>i.longSwipesMs){if(!i.longSwipes)return void t.slideTo(t.activeIndex);"next"===t.swipeDirection&&(m>=i.longSwipesRatio?t.slideTo(i.rewind&&t.isEnd?I:d+v):t.slideTo(d)),"prev"===t.swipeDirection&&(m>1-i.longSwipesRatio?t.slideTo(d+v):null!==C&&m<0&&Math.abs(m)>i.longSwipesRatio?t.slideTo(C):t.slideTo(d))}else{if(!i.shortSwipes)return void t.slideTo(t.activeIndex);t.navigation&&(s.target===t.navigation.nextEl||s.target===t.navigation.prevEl)?s.target===t.navigation.nextEl?t.slideTo(d+v):t.slideTo(d):("next"===t.swipeDirection&&t.slideTo(null!==I?I:d+v),"prev"===t.swipeDirection&&t.slideTo(null!==C?C:d))}}}}function z2(){var e=this,t=e.params,n=e.el;if(!n||0!==n.offsetWidth){t.breakpoints&&e.setBreakpoint();var i=e.allowSlideNext,r=e.allowSlidePrev,a=e.snapGrid;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses(),("auto"===t.slidesPerView||t.slidesPerView>1)&&e.isEnd&&!e.isBeginning&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.run(),e.allowSlidePrev=r,e.allowSlideNext=i,e.params.watchOverflow&&a!==e.snapGrid&&e.checkOverflow()}}function L2(e){var t=this;t.enabled&&(t.allowClick||(t.params.preventClicks&&e.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(e.stopPropagation(),e.stopImmediatePropagation())))}function K2(){var e=this,t=e.wrapperEl,n=e.rtlTranslate;if(e.enabled){e.previousTranslate=e.translate,e.isHorizontal()?e.translate=-t.scrollLeft:e.translate=-t.scrollTop,0===e.translate&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses();var i=e.maxTranslate()-e.minTranslate();(0===i?0:(e.translate-e.minTranslate())/i)!==e.progress&&e.updateProgress(n?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1)}}var _2=!1;function P2(){}var D2=function(e,t){var n=o2(),i=e.params,r=e.touchEvents,a=e.el,o=e.wrapperEl,s=e.device,l=e.support,c=!!i.nested,u="on"===t?"addEventListener":"removeEventListener",g=t;if(l.touch){var d=!("touchstart"!==r.start||!l.passiveListener||!i.passiveListeners)&&{passive:!0,capture:!1};a[u](r.start,e.onTouchStart,d),a[u](r.move,e.onTouchMove,l.passiveListener?{passive:!1,capture:c}:c),a[u](r.end,e.onTouchEnd,d),r.cancel&&a[u](r.cancel,e.onTouchEnd,d)}else a[u](r.start,e.onTouchStart,!1),n[u](r.move,e.onTouchMove,c),n[u](r.end,e.onTouchEnd,!1);(i.preventClicks||i.preventClicksPropagation)&&a[u]("click",e.onClick,!0),i.cssMode&&o[u]("scroll",e.onScroll),i.updateOnWindowResize?e[g](s.ios||s.android?"resize orientationchange observerUpdate":"resize observerUpdate",z2,!0):e[g]("observerUpdate",z2,!0)};var O2={attachEvents:function(){var e=this,t=o2(),n=e.params,i=e.support;e.onTouchStart=X2.bind(e),e.onTouchMove=Y2.bind(e),e.onTouchEnd=E2.bind(e),n.cssMode&&(e.onScroll=K2.bind(e)),e.onClick=L2.bind(e),i.touch&&!_2&&(t.addEventListener("touchstart",P2),_2=!0),D2(e,"on")},detachEvents:function(){D2(this,"off")}},U2=function(e,t){return e.grid&&t.grid&&t.grid.rows>1};var j2={setBreakpoint:function(){var e=this,t=e.activeIndex,n=e.initialized,i=e.loopedSlides,r=void 0===i?0:i,a=e.params,o=e.$el,s=a.breakpoints;if(s&&(!s||0!==Object.keys(s).length)){var l=e.getBreakpoint(s,e.params.breakpointsBase,e.el);if(l&&e.currentBreakpoint!==l){var c=(l in s?s[l]:void 0)||e.originalParams,u=U2(e,a),g=U2(e,c),d=a.enabled;u&&!g?(o.removeClass("".concat(a.containerModifierClass,"grid ").concat(a.containerModifierClass,"grid-column")),e.emitContainerClasses()):!u&&g&&(o.addClass("".concat(a.containerModifierClass,"grid")),(c.grid.fill&&"column"===c.grid.fill||!c.grid.fill&&"column"===a.grid.fill)&&o.addClass("".concat(a.containerModifierClass,"grid-column")),e.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach((function(t){var n=a[t]&&a[t].enabled,i=c[t]&&c[t].enabled;n&&!i&&e[t].disable(),!n&&i&&e[t].enable()}));var h=c.direction&&c.direction!==a.direction,f=a.loop&&(c.slidesPerView!==a.slidesPerView||h);h&&n&&e.changeDirection(),w2(e.params,c);var p=e.params.enabled;Object.assign(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),d&&!p?e.disable():!d&&p&&e.enable(),e.currentBreakpoint=l,e.emit("_beforeBreakpoint",c),f&&n&&(e.loopDestroy(),e.loopCreate(),e.updateSlides(),e.slideTo(t-r+e.loopedSlides,0,!1)),e.emit("breakpoint",c)}}},getBreakpoint:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"window",n=arguments.length>2?arguments[2]:void 0;if(e&&("container"!==t||n)){var i=!1,r=l2(),a="window"===t?r.innerHeight:n.clientHeight,o=Object.keys(e).map((function(e){if("string"===typeof e&&0===e.indexOf("@")){var t=parseFloat(e.substr(1));return{value:a*t,point:e}}return{value:e,point:e}}));o.sort((function(e,t){return parseInt(e.value,10)-parseInt(t.value,10)}));for(var s=0;s<o.length;s+=1){var l=o[s],c=l.point,u=l.value;"window"===t?r.matchMedia("(min-width: ".concat(u,"px)")).matches&&(i=c):u<=n.clientWidth&&(i=c)}return i||"max"}}};var J2={addClasses:function(){var e=this,t=e.classNames,n=e.params,i=e.rtl,r=e.$el,a=e.device,o=e.support,s=function(e,t){var n=[];return e.forEach((function(e){"object"===typeof e?Object.keys(e).forEach((function(i){e[i]&&n.push(t+i)})):"string"===typeof e&&n.push(t+e)})),n}(["initialized",n.direction,{"pointer-events":!o.touch},{"free-mode":e.params.freeMode&&n.freeMode.enabled},{autoheight:n.autoHeight},{rtl:i},{grid:n.grid&&n.grid.rows>1},{"grid-column":n.grid&&n.grid.rows>1&&"column"===n.grid.fill},{android:a.android},{ios:a.ios},{"css-mode":n.cssMode},{centered:n.cssMode&&n.centeredSlides},{"watch-progress":n.watchSlidesProgress}],n.containerModifierClass);t.push.apply(t,We(s)),r.addClass(We(t).join(" ")),e.emitContainerClasses()},removeClasses:function(){var e=this,t=e.$el,n=e.classNames;t.removeClass(n.join(" ")),e.emitContainerClasses()}};var Q2={init:!0,direction:"horizontal",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopedSlidesLimit:!0,loopFillGroupWithBlank:!1,loopPreventsSlide:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0,_emitClasses:!1};function q2(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=Object.keys(n)[0],r=n[i];"object"===typeof r&&null!==r?(["navigation","pagination","scrollbar"].indexOf(i)>=0&&!0===e[i]&&(e[i]={auto:!0}),i in e&&"enabled"in r?(!0===e[i]&&(e[i]={enabled:!0}),"object"!==typeof e[i]||"enabled"in e[i]||(e[i].enabled=!0),e[i]||(e[i]={enabled:!1}),w2(t,n)):w2(t,n)):w2(t,n)}}var $2={eventsEmitter:R2,update:W2,translate:M2,transition:F2,slide:N2,loop:H2,grabCursor:T2,events:O2,breakpoints:j2,checkOverflow:{checkOverflow:function(){var e=this,t=e.isLocked,n=e.params,i=n.slidesOffsetBefore;if(i){var r=e.slides.length-1,a=e.slidesGrid[r]+e.slidesSizesGrid[r]+2*i;e.isLocked=e.size>a}else e.isLocked=1===e.snapGrid.length;!0===n.allowSlideNext&&(e.allowSlideNext=!e.isLocked),!0===n.allowSlidePrev&&(e.allowSlidePrev=!e.isLocked),t&&t!==e.isLocked&&(e.isEnd=!1),t!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock")}},classes:J2,images:{loadImage:function(e,t,n,i,r,a){var o,s=l2();function l(){a&&a()}v2(e).parent("picture")[0]||e.complete&&r?l():t?((o=new s.Image).onload=l,o.onerror=l,i&&(o.sizes=i),n&&(o.srcset=n),t&&(o.src=t)):l()},preloadImages:function(){var e=this;function t(){"undefined"!==typeof e&&null!==e&&e&&!e.destroyed&&(void 0!==e.imagesLoaded&&(e.imagesLoaded+=1),e.imagesLoaded===e.imagesToLoad.length&&(e.params.updateOnImagesReady&&e.update(),e.emit("imagesReady")))}e.imagesToLoad=e.$el.find("img");for(var n=0;n<e.imagesToLoad.length;n+=1){var i=e.imagesToLoad[n];e.loadImage(i,i.currentSrc||i.getAttribute("src"),i.srcset||i.getAttribute("srcset"),i.sizes||i.getAttribute("sizes"),!0,t)}}}},e3={},t3=function(){function e(){var t,n;ka(this,e);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];if(1===r.length&&r[0].constructor&&"Object"===Object.prototype.toString.call(r[0]).slice(8,-1)?n=r[0]:(t=r[0],n=r[1]),n||(n={}),n=w2({},n),t&&!n.el&&(n.el=t),n.el&&v2(n.el).length>1){var o=[];return v2(n.el).each((function(t){var i=w2({},n,{el:t});o.push(new e(i))})),o}var s,l=this;(l.__swiper__=!0,l.support=S2(),l.device=Z2({userAgent:n.userAgent}),l.browser=k2(),l.eventsListeners={},l.eventsAnyListeners=[],l.modules=We(l.__modules__),n.modules&&Array.isArray(n.modules))&&(s=l.modules).push.apply(s,We(n.modules));var c={};l.modules.forEach((function(e){e({swiper:l,extendParams:q2(n,c),on:l.on.bind(l),once:l.once.bind(l),off:l.off.bind(l),emit:l.emit.bind(l)})}));var u=w2({},Q2,c);return l.params=w2({},u,e3,n),l.originalParams=w2({},l.params),l.passedParams=w2({},n),l.params&&l.params.on&&Object.keys(l.params.on).forEach((function(e){l.on(e,l.params.on[e])})),l.params&&l.params.onAny&&l.onAny(l.params.onAny),l.$=v2,Object.assign(l,{enabled:l.params.enabled,el:t,classNames:[],slides:v2(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:function(){return"horizontal"===l.params.direction},isVertical:function(){return"vertical"===l.params.direction},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:l.params.allowSlideNext,allowSlidePrev:l.params.allowSlidePrev,touchEvents:function(){var e=["touchstart","touchmove","touchend","touchcancel"],t=["pointerdown","pointermove","pointerup"];return l.touchEventsTouch={start:e[0],move:e[1],end:e[2],cancel:e[3]},l.touchEventsDesktop={start:t[0],move:t[1],end:t[2]},l.support.touch||!l.params.simulateTouch?l.touchEventsTouch:l.touchEventsDesktop}(),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:l.params.focusableElements,lastClickTime:b2(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:l.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),l.emit("_swiper"),l.params.init&&l.init(),l}return Xe(e,[{key:"enable",value:function(){var e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}},{key:"disable",value:function(){var e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}},{key:"setProgress",value:function(e,t){var n=this;e=Math.min(Math.max(e,0),1);var i=n.minTranslate(),r=(n.maxTranslate()-i)*e+i;n.translateTo(r,"undefined"===typeof t?0:t),n.updateActiveIndex(),n.updateSlidesClasses()}},{key:"emitContainerClasses",value:function(){var e=this;if(e.params._emitClasses&&e.el){var t=e.el.className.split(" ").filter((function(t){return 0===t.indexOf("swiper")||0===t.indexOf(e.params.containerModifierClass)}));e.emit("_containerClasses",t.join(" "))}}},{key:"getSlideClasses",value:function(e){var t=this;return t.destroyed?"":e.className.split(" ").filter((function(e){return 0===e.indexOf("swiper-slide")||0===e.indexOf(t.params.slideClass)})).join(" ")}},{key:"emitSlidesClasses",value:function(){var e=this;if(e.params._emitClasses&&e.el){var t=[];e.slides.each((function(n){var i=e.getSlideClasses(n);t.push({slideEl:n,classNames:i}),e.emit("_slideClass",n,i)})),e.emit("_slideClasses",t)}}},{key:"slidesPerViewDynamic",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"current",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this,i=n.params,r=n.slides,a=n.slidesGrid,o=n.slidesSizesGrid,s=n.size,l=n.activeIndex,c=1;if(i.centeredSlides){for(var u,g=r[l].swiperSlideSize,d=l+1;d<r.length;d+=1)r[d]&&!u&&(c+=1,(g+=r[d].swiperSlideSize)>s&&(u=!0));for(var h=l-1;h>=0;h-=1)r[h]&&!u&&(c+=1,(g+=r[h].swiperSlideSize)>s&&(u=!0))}else if("current"===e)for(var f=l+1;f<r.length;f+=1){(t?a[f]+o[f]-a[l]<s:a[f]-a[l]<s)&&(c+=1)}else for(var p=l-1;p>=0;p-=1){a[l]-a[p]<s&&(c+=1)}return c}},{key:"update",value:function(){var e=this;if(e&&!e.destroyed){var t=e.snapGrid,n=e.params;n.breakpoints&&e.setBreakpoint(),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.params.freeMode&&e.params.freeMode.enabled?(i(),e.params.autoHeight&&e.updateAutoHeight()):(("auto"===e.params.slidesPerView||e.params.slidesPerView>1)&&e.isEnd&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0))||i(),n.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}function i(){var t=e.rtlTranslate?-1*e.translate:e.translate,n=Math.min(Math.max(t,e.maxTranslate()),e.minTranslate());e.setTranslate(n),e.updateActiveIndex(),e.updateSlidesClasses()}}},{key:"changeDirection",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this,i=n.params.direction;return e||(e="horizontal"===i?"vertical":"horizontal"),e===i||"horizontal"!==e&&"vertical"!==e||(n.$el.removeClass("".concat(n.params.containerModifierClass).concat(i)).addClass("".concat(n.params.containerModifierClass).concat(e)),n.emitContainerClasses(),n.params.direction=e,n.slides.each((function(t){"vertical"===e?t.style.width="":t.style.height=""})),n.emit("changeDirection"),t&&n.update()),n}},{key:"changeLanguageDirection",value:function(e){var t=this;t.rtl&&"rtl"===e||!t.rtl&&"ltr"===e||(t.rtl="rtl"===e,t.rtlTranslate="horizontal"===t.params.direction&&t.rtl,t.rtl?(t.$el.addClass("".concat(t.params.containerModifierClass,"rtl")),t.el.dir="rtl"):(t.$el.removeClass("".concat(t.params.containerModifierClass,"rtl")),t.el.dir="ltr"),t.update())}},{key:"mount",value:function(e){var t=this;if(t.mounted)return!0;var n=v2(e||t.params.el);if(!(e=n[0]))return!1;e.swiper=t;var i=function(){return".".concat((t.params.wrapperClass||"").trim().split(" ").join("."))},r=function(){if(e&&e.shadowRoot&&e.shadowRoot.querySelector){var t=v2(e.shadowRoot.querySelector(i()));return t.children=function(e){return n.children(e)},t}return n.children?n.children(i()):v2(n).children(i())}();if(0===r.length&&t.params.createElements){var a=o2().createElement("div");r=v2(a),a.className=t.params.wrapperClass,n.append(a),n.children(".".concat(t.params.slideClass)).each((function(e){r.append(e)}))}return Object.assign(t,{$el:n,el:e,$wrapperEl:r,wrapperEl:r[0],mounted:!0,rtl:"rtl"===e.dir.toLowerCase()||"rtl"===n.css("direction"),rtlTranslate:"horizontal"===t.params.direction&&("rtl"===e.dir.toLowerCase()||"rtl"===n.css("direction")),wrongRTL:"-webkit-box"===r.css("display")}),!0}},{key:"init",value:function(e){var t=this;return t.initialized||!1===t.mount(e)||(t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.params.loop&&t.loopCreate(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.preloadImages&&t.preloadImages(),t.params.loop?t.slideTo(t.params.initialSlide+t.loopedSlides,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.attachEvents(),t.initialized=!0,t.emit("init"),t.emit("afterInit")),t}},{key:"destroy",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this,i=n.params,r=n.$el,a=n.$wrapperEl,o=n.slides;return"undefined"===typeof n.params||n.destroyed||(n.emit("beforeDestroy"),n.initialized=!1,n.detachEvents(),i.loop&&n.loopDestroy(),t&&(n.removeClasses(),r.removeAttr("style"),a.removeAttr("style"),o&&o.length&&o.removeClass([i.slideVisibleClass,i.slideActiveClass,i.slideNextClass,i.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),n.emit("destroy"),Object.keys(n.eventsListeners).forEach((function(e){n.off(e)})),!1!==e&&(n.$el[0].swiper=null,function(e){var t=e;Object.keys(t).forEach((function(e){try{t[e]=null}catch(n){}try{delete t[e]}catch(n){}}))}(n)),n.destroyed=!0),null}}],[{key:"extendDefaults",value:function(e){w2(e3,e)}},{key:"extendedDefaults",get:function(){return e3}},{key:"defaults",get:function(){return Q2}},{key:"installModule",value:function(t){e.prototype.__modules__||(e.prototype.__modules__=[]);var n=e.prototype.__modules__;"function"===typeof t&&n.indexOf(t)<0&&n.push(t)}},{key:"use",value:function(t){return Array.isArray(t)?(t.forEach((function(t){return e.installModule(t)})),e):(e.installModule(t),e)}}]),e}();Object.keys($2).forEach((function(e){Object.keys($2[e]).forEach((function(t){t3.prototype[t]=$2[e][t]}))})),t3.use([function(e){var t=e.swiper,n=e.on,i=e.emit,r=l2(),a=null,o=null,s=function(){t&&!t.destroyed&&t.initialized&&(i("beforeResize"),i("resize"))},l=function(){t&&!t.destroyed&&t.initialized&&i("orientationchange")};n("init",(function(){t.params.resizeObserver&&"undefined"!==typeof r.ResizeObserver?t&&!t.destroyed&&t.initialized&&(a=new ResizeObserver((function(e){o=r.requestAnimationFrame((function(){var n=t.width,i=t.height,r=n,a=i;e.forEach((function(e){var n=e.contentBoxSize,i=e.contentRect,o=e.target;o&&o!==t.el||(r=i?i.width:(n[0]||n).inlineSize,a=i?i.height:(n[0]||n).blockSize)})),r===n&&a===i||s()}))})),a.observe(t.el)):(r.addEventListener("resize",s),r.addEventListener("orientationchange",l))})),n("destroy",(function(){o&&r.cancelAnimationFrame(o),a&&a.unobserve&&t.el&&(a.unobserve(t.el),a=null),r.removeEventListener("resize",s),r.removeEventListener("orientationchange",l)}))},function(e){var t=e.swiper,n=e.extendParams,i=e.on,r=e.emit,a=[],o=l2(),s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new(o.MutationObserver||o.WebkitMutationObserver)((function(e){if(1!==e.length){var t=function(){r("observerUpdate",e[0])};o.requestAnimationFrame?o.requestAnimationFrame(t):o.setTimeout(t,0)}else r("observerUpdate",e[0])}));n.observe(e,{attributes:"undefined"===typeof t.attributes||t.attributes,childList:"undefined"===typeof t.childList||t.childList,characterData:"undefined"===typeof t.characterData||t.characterData}),a.push(n)};n({observer:!1,observeParents:!1,observeSlideChildren:!1}),i("init",(function(){if(t.params.observer){if(t.params.observeParents)for(var e=t.$el.parents(),n=0;n<e.length;n+=1)s(e[n]);s(t.$el[0],{childList:t.params.observeSlideChildren}),s(t.$wrapperEl[0],{attributes:!1})}})),i("destroy",(function(){a.forEach((function(e){e.disconnect()})),a.splice(0,a.length)}))}]);var n3=t3;function i3(e,t,n,i){var r=o2();return e.params.createElements&&Object.keys(i).forEach((function(a){if(!n[a]&&!0===n.auto){var o=e.$el.children(".".concat(i[a]))[0];o||((o=r.createElement("div")).className=i[a],e.$el.append(o)),n[a]=o,t[a]=o}})),n}function r3(e){var t=e.swiper,n=e.extendParams,i=e.on,r=e.emit;function a(e){var n;return e&&(n=v2(e),t.params.uniqueNavElements&&"string"===typeof e&&n.length>1&&1===t.$el.find(e).length&&(n=t.$el.find(e))),n}function o(e,n){var i=t.params.navigation;e&&e.length>0&&(e[n?"addClass":"removeClass"](i.disabledClass),e[0]&&"BUTTON"===e[0].tagName&&(e[0].disabled=n),t.params.watchOverflow&&t.enabled&&e[t.isLocked?"addClass":"removeClass"](i.lockClass))}function s(){if(!t.params.loop){var e=t.navigation,n=e.$nextEl;o(e.$prevEl,t.isBeginning&&!t.params.rewind),o(n,t.isEnd&&!t.params.rewind)}}function l(e){e.preventDefault(),(!t.isBeginning||t.params.loop||t.params.rewind)&&(t.slidePrev(),r("navigationPrev"))}function c(e){e.preventDefault(),(!t.isEnd||t.params.loop||t.params.rewind)&&(t.slideNext(),r("navigationNext"))}function u(){var e=t.params.navigation;if(t.params.navigation=i3(t,t.originalParams.navigation,t.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),e.nextEl||e.prevEl){var n=a(e.nextEl),i=a(e.prevEl);n&&n.length>0&&n.on("click",c),i&&i.length>0&&i.on("click",l),Object.assign(t.navigation,{$nextEl:n,nextEl:n&&n[0],$prevEl:i,prevEl:i&&i[0]}),t.enabled||(n&&n.addClass(e.lockClass),i&&i.addClass(e.lockClass))}}function g(){var e=t.navigation,n=e.$nextEl,i=e.$prevEl;n&&n.length&&(n.off("click",c),n.removeClass(t.params.navigation.disabledClass)),i&&i.length&&(i.off("click",l),i.removeClass(t.params.navigation.disabledClass))}n({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),t.navigation={nextEl:null,$nextEl:null,prevEl:null,$prevEl:null},i("init",(function(){!1===t.params.navigation.enabled?d():(u(),s())})),i("toEdge fromEdge lock unlock",(function(){s()})),i("destroy",(function(){g()})),i("enable disable",(function(){var e=t.navigation,n=e.$nextEl,i=e.$prevEl;n&&n[t.enabled?"removeClass":"addClass"](t.params.navigation.lockClass),i&&i[t.enabled?"removeClass":"addClass"](t.params.navigation.lockClass)})),i("click",(function(e,n){var i=t.navigation,a=i.$nextEl,o=i.$prevEl,s=n.target;if(t.params.navigation.hideOnClick&&!v2(s).is(o)&&!v2(s).is(a)){if(t.pagination&&t.params.pagination&&t.params.pagination.clickable&&(t.pagination.el===s||t.pagination.el.contains(s)))return;var l;a?l=a.hasClass(t.params.navigation.hiddenClass):o&&(l=o.hasClass(t.params.navigation.hiddenClass)),r(!0===l?"navigationShow":"navigationHide"),a&&a.toggleClass(t.params.navigation.hiddenClass),o&&o.toggleClass(t.params.navigation.hiddenClass)}}));var d=function(){t.$el.addClass(t.params.navigation.navigationDisabledClass),g()};Object.assign(t.navigation,{enable:function(){t.$el.removeClass(t.params.navigation.navigationDisabledClass),u(),s()},disable:d,update:s,init:u,destroy:g})}function a3(){return".".concat((arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").trim().replace(/([\.:!\/])/g,"\\$1").replace(/ /g,"."))}function o3(e){var t,n=e.swiper,i=e.extendParams,r=e.on,a=e.emit,o="swiper-pagination";i({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:function(e){return e},formatFractionTotal:function(e){return e},bulletClass:"".concat(o,"-bullet"),bulletActiveClass:"".concat(o,"-bullet-active"),modifierClass:"".concat(o,"-"),currentClass:"".concat(o,"-current"),totalClass:"".concat(o,"-total"),hiddenClass:"".concat(o,"-hidden"),progressbarFillClass:"".concat(o,"-progressbar-fill"),progressbarOppositeClass:"".concat(o,"-progressbar-opposite"),clickableClass:"".concat(o,"-clickable"),lockClass:"".concat(o,"-lock"),horizontalClass:"".concat(o,"-horizontal"),verticalClass:"".concat(o,"-vertical"),paginationDisabledClass:"".concat(o,"-disabled")}}),n.pagination={el:null,$el:null,bullets:[]};var s=0;function l(){return!n.params.pagination.el||!n.pagination.el||!n.pagination.$el||0===n.pagination.$el.length}function c(e,t){var i=n.params.pagination.bulletActiveClass;e[t]().addClass("".concat(i,"-").concat(t))[t]().addClass("".concat(i,"-").concat(t,"-").concat(t))}function u(){var e=n.rtl,i=n.params.pagination;if(!l()){var r,o=n.virtual&&n.params.virtual.enabled?n.virtual.slides.length:n.slides.length,u=n.pagination.$el,g=n.params.loop?Math.ceil((o-2*n.loopedSlides)/n.params.slidesPerGroup):n.snapGrid.length;if(n.params.loop?((r=Math.ceil((n.activeIndex-n.loopedSlides)/n.params.slidesPerGroup))>o-1-2*n.loopedSlides&&(r-=o-2*n.loopedSlides),r>g-1&&(r-=g),r<0&&"bullets"!==n.params.paginationType&&(r=g+r)):r="undefined"!==typeof n.snapIndex?n.snapIndex:n.activeIndex||0,"bullets"===i.type&&n.pagination.bullets&&n.pagination.bullets.length>0){var d,h,f,p=n.pagination.bullets;if(i.dynamicBullets&&(t=p.eq(0)[n.isHorizontal()?"outerWidth":"outerHeight"](!0),u.css(n.isHorizontal()?"width":"height","".concat(t*(i.dynamicMainBullets+4),"px")),i.dynamicMainBullets>1&&void 0!==n.previousIndex&&((s+=r-(n.previousIndex-n.loopedSlides||0))>i.dynamicMainBullets-1?s=i.dynamicMainBullets-1:s<0&&(s=0)),d=Math.max(r-s,0),f=((h=d+(Math.min(p.length,i.dynamicMainBullets)-1))+d)/2),p.removeClass(["","-next","-next-next","-prev","-prev-prev","-main"].map((function(e){return"".concat(i.bulletActiveClass).concat(e)})).join(" ")),u.length>1)p.each((function(e){var t=v2(e),n=t.index();n===r&&t.addClass(i.bulletActiveClass),i.dynamicBullets&&(n>=d&&n<=h&&t.addClass("".concat(i.bulletActiveClass,"-main")),n===d&&c(t,"prev"),n===h&&c(t,"next"))}));else{var I=p.eq(r),C=I.index();if(I.addClass(i.bulletActiveClass),i.dynamicBullets){for(var m=p.eq(d),v=p.eq(h),A=d;A<=h;A+=1)p.eq(A).addClass("".concat(i.bulletActiveClass,"-main"));if(n.params.loop)if(C>=p.length){for(var b=i.dynamicMainBullets;b>=0;b-=1)p.eq(p.length-b).addClass("".concat(i.bulletActiveClass,"-main"));p.eq(p.length-i.dynamicMainBullets-1).addClass("".concat(i.bulletActiveClass,"-prev"))}else c(m,"prev"),c(v,"next");else c(m,"prev"),c(v,"next")}}if(i.dynamicBullets){var y=Math.min(p.length,i.dynamicMainBullets+4),G=(t*y-t)/2-f*t,w=e?"right":"left";p.css(n.isHorizontal()?w:"top","".concat(G,"px"))}}if("fraction"===i.type&&(u.find(a3(i.currentClass)).text(i.formatFractionCurrent(r+1)),u.find(a3(i.totalClass)).text(i.formatFractionTotal(g))),"progressbar"===i.type){var B;B=i.progressbarOpposite?n.isHorizontal()?"vertical":"horizontal":n.isHorizontal()?"horizontal":"vertical";var x=(r+1)/g,S=1,Z=1;"horizontal"===B?S=x:Z=x,u.find(a3(i.progressbarFillClass)).transform("translate3d(0,0,0) scaleX(".concat(S,") scaleY(").concat(Z,")")).transition(n.params.speed)}"custom"===i.type&&i.renderCustom?(u.html(i.renderCustom(n,r+1,g)),a("paginationRender",u[0])):a("paginationUpdate",u[0]),n.params.watchOverflow&&n.enabled&&u[n.isLocked?"addClass":"removeClass"](i.lockClass)}}function g(){var e=n.params.pagination;if(!l()){var t=n.virtual&&n.params.virtual.enabled?n.virtual.slides.length:n.slides.length,i=n.pagination.$el,r="";if("bullets"===e.type){var o=n.params.loop?Math.ceil((t-2*n.loopedSlides)/n.params.slidesPerGroup):n.snapGrid.length;n.params.freeMode&&n.params.freeMode.enabled&&!n.params.loop&&o>t&&(o=t);for(var s=0;s<o;s+=1)e.renderBullet?r+=e.renderBullet.call(n,s,e.bulletClass):r+="<".concat(e.bulletElement,' class="').concat(e.bulletClass,'"></').concat(e.bulletElement,">");i.html(r),n.pagination.bullets=i.find(a3(e.bulletClass))}"fraction"===e.type&&(r=e.renderFraction?e.renderFraction.call(n,e.currentClass,e.totalClass):'<span class="'.concat(e.currentClass,'"></span>')+" / "+'<span class="'.concat(e.totalClass,'"></span>'),i.html(r)),"progressbar"===e.type&&(r=e.renderProgressbar?e.renderProgressbar.call(n,e.progressbarFillClass):'<span class="'.concat(e.progressbarFillClass,'"></span>'),i.html(r)),"custom"!==e.type&&a("paginationRender",n.pagination.$el[0])}}function d(){n.params.pagination=i3(n,n.originalParams.pagination,n.params.pagination,{el:"swiper-pagination"});var e=n.params.pagination;if(e.el){var t=v2(e.el);0!==t.length&&(n.params.uniqueNavElements&&"string"===typeof e.el&&t.length>1&&(t=n.$el.find(e.el)).length>1&&(t=t.filter((function(e){return v2(e).parents(".swiper")[0]===n.el}))),"bullets"===e.type&&e.clickable&&t.addClass(e.clickableClass),t.addClass(e.modifierClass+e.type),t.addClass(n.isHorizontal()?e.horizontalClass:e.verticalClass),"bullets"===e.type&&e.dynamicBullets&&(t.addClass("".concat(e.modifierClass).concat(e.type,"-dynamic")),s=0,e.dynamicMainBullets<1&&(e.dynamicMainBullets=1)),"progressbar"===e.type&&e.progressbarOpposite&&t.addClass(e.progressbarOppositeClass),e.clickable&&t.on("click",a3(e.bulletClass),(function(e){e.preventDefault();var t=v2(this).index()*n.params.slidesPerGroup;n.params.loop&&(t+=n.loopedSlides),n.slideTo(t)})),Object.assign(n.pagination,{$el:t,el:t[0]}),n.enabled||t.addClass(e.lockClass))}}function h(){var e=n.params.pagination;if(!l()){var t=n.pagination.$el;t.removeClass(e.hiddenClass),t.removeClass(e.modifierClass+e.type),t.removeClass(n.isHorizontal()?e.horizontalClass:e.verticalClass),n.pagination.bullets&&n.pagination.bullets.removeClass&&n.pagination.bullets.removeClass(e.bulletActiveClass),e.clickable&&t.off("click",a3(e.bulletClass))}}r("init",(function(){!1===n.params.pagination.enabled?f():(d(),g(),u())})),r("activeIndexChange",(function(){(n.params.loop||"undefined"===typeof n.snapIndex)&&u()})),r("snapIndexChange",(function(){n.params.loop||u()})),r("slidesLengthChange",(function(){n.params.loop&&(g(),u())})),r("snapGridLengthChange",(function(){n.params.loop||(g(),u())})),r("destroy",(function(){h()})),r("enable disable",(function(){var e=n.pagination.$el;e&&e[n.enabled?"removeClass":"addClass"](n.params.pagination.lockClass)})),r("lock unlock",(function(){u()})),r("click",(function(e,t){var i=t.target,r=n.pagination.$el;if(n.params.pagination.el&&n.params.pagination.hideOnClick&&r&&r.length>0&&!v2(i).hasClass(n.params.pagination.bulletClass)){if(n.navigation&&(n.navigation.nextEl&&i===n.navigation.nextEl||n.navigation.prevEl&&i===n.navigation.prevEl))return;var o=r.hasClass(n.params.pagination.hiddenClass);a(!0===o?"paginationShow":"paginationHide"),r.toggleClass(n.params.pagination.hiddenClass)}}));var f=function(){n.$el.addClass(n.params.pagination.paginationDisabledClass),n.pagination.$el&&n.pagination.$el.addClass(n.params.pagination.paginationDisabledClass),h()};Object.assign(n.pagination,{enable:function(){n.$el.removeClass(n.params.pagination.paginationDisabledClass),n.pagination.$el&&n.pagination.$el.removeClass(n.params.pagination.paginationDisabledClass),d(),g(),u()},disable:f,render:g,update:u,init:d,destroy:h})}function s3(e){return"object"===typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function l3(e,t){var n=["__proto__","constructor","prototype"];Object.keys(t).filter((function(e){return n.indexOf(e)<0})).forEach((function(n){"undefined"===typeof e[n]?e[n]=t[n]:s3(t[n])&&s3(e[n])&&Object.keys(t[n]).length>0?t[n].__swiper__?e[n]=t[n]:l3(e[n],t[n]):e[n]=t[n]}))}function c3(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.navigation&&"undefined"===typeof e.navigation.nextEl&&"undefined"===typeof e.navigation.prevEl}function u3(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.pagination&&"undefined"===typeof e.pagination.el}function g3(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.scrollbar&&"undefined"===typeof e.scrollbar.el}function d3(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(" ").map((function(e){return e.trim()})).filter((function(e){return!!e})),t=[];return e.forEach((function(e){t.indexOf(e)<0&&t.push(e)})),t.join(" ")}var h3=["modules","init","_direction","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_preloadImages","updateOnImagesReady","_loop","_loopAdditionalSlides","_loopedSlides","_loopedSlidesLimit","_loopFillGroupWithBlank","loopPreventsSlide","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideBlankClass","slideActiveClass","slideDuplicateActiveClass","slideVisibleClass","slideDuplicateClass","slideNextClass","slideDuplicateNextClass","slidePrevClass","slideDuplicatePrevClass","wrapperClass","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","lazy","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom"];var f3=function(e,t){var n=t.slidesPerView;if(t.breakpoints){var i=n3.prototype.getBreakpoint(t.breakpoints),r=i in t.breakpoints?t.breakpoints[i]:void 0;r&&r.slidesPerView&&(n=r.slidesPerView)}var a=Math.ceil(parseFloat(t.loopedSlides||n,10));return(a+=t.loopAdditionalSlides)>e.length&&t.loopedSlidesLimit&&(a=e.length),a};function p3(e){return e.type&&e.type.displayName&&e.type.displayName.includes("SwiperSlide")}function I3(e){var n=[];return t.Children.toArray(e).forEach((function(e){p3(e)?n.push(e):e.props&&e.props.children&&I3(e.props.children).forEach((function(e){return n.push(e)}))})),n}function C3(e){var n=[],i={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return t.Children.toArray(e).forEach((function(e){if(p3(e))n.push(e);else if(e.props&&e.props.slot&&i[e.props.slot])i[e.props.slot].push(e);else if(e.props&&e.props.children){var t=I3(e.props.children);t.length>0?t.forEach((function(e){return n.push(e)})):i["container-end"].push(e)}else i["container-end"].push(e)})),{slides:n,slots:i}}function m3(e){var t,n,i,r,a,o=e.swiper,s=e.slides,l=e.passedParams,c=e.changedParams,u=e.nextEl,g=e.prevEl,d=e.scrollbarEl,h=e.paginationEl,f=c.filter((function(e){return"children"!==e&&"direction"!==e})),p=o.params,I=o.pagination,C=o.navigation,m=o.scrollbar,v=o.virtual,A=o.thumbs;c.includes("thumbs")&&l.thumbs&&l.thumbs.swiper&&p.thumbs&&!p.thumbs.swiper&&(t=!0),c.includes("controller")&&l.controller&&l.controller.control&&p.controller&&!p.controller.control&&(n=!0),c.includes("pagination")&&l.pagination&&(l.pagination.el||h)&&(p.pagination||!1===p.pagination)&&I&&!I.el&&(i=!0),c.includes("scrollbar")&&l.scrollbar&&(l.scrollbar.el||d)&&(p.scrollbar||!1===p.scrollbar)&&m&&!m.el&&(r=!0),c.includes("navigation")&&l.navigation&&(l.navigation.prevEl||g)&&(l.navigation.nextEl||u)&&(p.navigation||!1===p.navigation)&&C&&!C.prevEl&&!C.nextEl&&(a=!0);(f.forEach((function(e){if(s3(p[e])&&s3(l[e]))l3(p[e],l[e]);else{var t=l[e];!0!==t&&!1!==t||"navigation"!==e&&"pagination"!==e&&"scrollbar"!==e?p[e]=l[e]:!1===t&&o[n=e]&&(o[n].destroy(),"navigation"===n?(p[n].prevEl=void 0,p[n].nextEl=void 0,o[n].prevEl=void 0,o[n].nextEl=void 0):(p[n].el=void 0,o[n].el=void 0))}var n})),f.includes("controller")&&!n&&o.controller&&o.controller.control&&p.controller&&p.controller.control&&(o.controller.control=p.controller.control),c.includes("children")&&s&&v&&p.virtual.enabled?(v.slides=s,v.update(!0)):c.includes("children")&&o.lazy&&o.params.lazy.enabled&&o.lazy.load(),t)&&(A.init()&&A.update(!0));n&&(o.controller.control=p.controller.control),i&&(h&&(p.pagination.el=h),I.init(),I.render(),I.update()),r&&(d&&(p.scrollbar.el=d),m.init(),m.updateSize(),m.setTranslate()),a&&(u&&(p.navigation.nextEl=u),g&&(p.navigation.prevEl=g),C.init(),C.update()),c.includes("allowSlideNext")&&(o.allowSlideNext=l.allowSlideNext),c.includes("allowSlidePrev")&&(o.allowSlidePrev=l.allowSlidePrev),c.includes("direction")&&o.changeDirection(l.direction,!1),o.update()}function v3(e,n){return"undefined"===typeof window?(0,t.useEffect)(e,n):(0,t.useLayoutEffect)(e,n)}var A3=(0,t.createContext)(null),b3=(0,t.createContext)(null),y3=["className","tag","wrapperTag","children","onSwiper"];function G3(){return G3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},G3.apply(this,arguments)}var w3=(0,t.forwardRef)((function(e,n){var i=void 0===e?{}:e,r=i.className,a=i.tag,o=void 0===a?"div":a,s=i.wrapperTag,l=void 0===s?"div":s,u=i.children,g=i.onSwiper,d=Fe(i,y3),h=!1,f=c((0,t.useState)("swiper"),2),p=f[0],I=f[1],C=c((0,t.useState)(null),2),m=C[0],v=C[1],A=c((0,t.useState)(!1),2),b=A[0],y=A[1],G=(0,t.useRef)(!1),w=(0,t.useRef)(null),B=(0,t.useRef)(null),x=(0,t.useRef)(null),S=(0,t.useRef)(null),Z=(0,t.useRef)(null),k=(0,t.useRef)(null),R=(0,t.useRef)(null),W=(0,t.useRef)(null),M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n={on:{}},i={},r={};l3(n,n3.defaults),l3(n,n3.extendedDefaults),n._emitClasses=!0,n.init=!1;var a={},o=h3.map((function(e){return e.replace(/_/,"")})),s=Object.assign({},e);return Object.keys(s).forEach((function(s){"undefined"!==typeof e[s]&&(o.indexOf(s)>=0?s3(e[s])?(n[s]={},r[s]={},l3(n[s],e[s]),l3(r[s],e[s])):(n[s]=e[s],r[s]=e[s]):0===s.search(/on[A-Z]/)&&"function"===typeof e[s]?t?i["".concat(s[2].toLowerCase()).concat(s.substr(3))]=e[s]:n.on["".concat(s[2].toLowerCase()).concat(s.substr(3))]=e[s]:a[s]=e[s])})),["navigation","pagination","scrollbar"].forEach((function(e){!0===n[e]&&(n[e]={}),!1===n[e]&&delete n[e]})),{params:n,passedParams:r,rest:a,events:i}}(d),V=M.params,F=M.passedParams,N=M.rest,H=M.events,T=C3(u),X=T.slides,Y=T.slots,E=function(){y(!b)};Object.assign(V.on,{_containerClasses:function(e,t){I(t)}});var z=function(){if(Object.assign(V.on,H),h=!0,B.current=new n3(V),B.current.loopCreate=function(){},B.current.loopDestroy=function(){},V.loop&&(B.current.loopedSlides=f3(X,V)),B.current.virtual&&B.current.params.virtual.enabled){B.current.virtual.slides=X;var e={cache:!1,slides:X,renderExternal:v,renderExternalUpdate:!1};l3(B.current.params.virtual,e),l3(B.current.originalParams.virtual,e)}};w.current||z(),B.current&&B.current.on("_beforeBreakpoint",E);return(0,t.useEffect)((function(){return function(){B.current&&B.current.off("_beforeBreakpoint",E)}})),(0,t.useEffect)((function(){!G.current&&B.current&&(B.current.emitSlidesClasses(),G.current=!0)})),v3((function(){if(n&&(n.current=w.current),w.current)return B.current.destroyed&&z(),function(e,t){var n=e.el,i=e.nextEl,r=e.prevEl,a=e.paginationEl,o=e.scrollbarEl,s=e.swiper;c3(t)&&i&&r&&(s.params.navigation.nextEl=i,s.originalParams.navigation.nextEl=i,s.params.navigation.prevEl=r,s.originalParams.navigation.prevEl=r),u3(t)&&a&&(s.params.pagination.el=a,s.originalParams.pagination.el=a),g3(t)&&o&&(s.params.scrollbar.el=o,s.originalParams.scrollbar.el=o),s.init(n)}({el:w.current,nextEl:Z.current,prevEl:k.current,paginationEl:R.current,scrollbarEl:W.current,swiper:B.current},V),g&&g(B.current),function(){B.current&&!B.current.destroyed&&B.current.destroy(!0,!1)}}),[]),v3((function(){!h&&H&&B.current&&Object.keys(H).forEach((function(e){B.current.on(e,H[e])}));var e=function(e,t,n,i,r){var a=[];if(!t)return a;var o=function(e){a.indexOf(e)<0&&a.push(e)};if(n&&i){var s=i.map(r),l=n.map(r);s.join("")!==l.join("")&&o("children"),i.length!==n.length&&o("children")}var c=h3.filter((function(e){return"_"===e[0]})).map((function(e){return e.replace(/_/,"")}));return c.forEach((function(n){if(n in e&&n in t)if(s3(e[n])&&s3(t[n])){var i=Object.keys(e[n]),r=Object.keys(t[n]);i.length!==r.length?o(n):(i.forEach((function(i){e[n][i]!==t[n][i]&&o(n)})),r.forEach((function(i){e[n][i]!==t[n][i]&&o(n)})))}else e[n]!==t[n]&&o(n)})),a}(F,x.current,X,S.current,(function(e){return e.key}));return x.current=F,S.current=X,e.length&&B.current&&!B.current.destroyed&&m3({swiper:B.current,slides:X,passedParams:F,changedParams:e,nextEl:Z.current,prevEl:k.current,scrollbarEl:W.current,paginationEl:R.current}),function(){H&&B.current&&Object.keys(H).forEach((function(e){B.current.off(e,H[e])}))}})),v3((function(){var e;!(e=B.current)||e.destroyed||!e.params.virtual||e.params.virtual&&!e.params.virtual.enabled||(e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.lazy&&e.params.lazy.enabled&&e.lazy.load(),e.parallax&&e.params.parallax&&e.params.parallax.enabled&&e.parallax.setTranslate())}),[m]),t.createElement(o,G3({ref:w,className:d3("".concat(p).concat(r?" ".concat(r):""))},N),t.createElement(b3.Provider,{value:B.current},Y["container-start"],t.createElement(l,{className:"swiper-wrapper"},Y["wrapper-start"],V.virtual?function(e,n,i){if(!i)return null;var r=e.isHorizontal()?ke({},e.rtlTranslate?"right":"left","".concat(i.offset,"px")):{top:"".concat(i.offset,"px")};return n.filter((function(e,t){return t>=i.from&&t<=i.to})).map((function(n){return t.cloneElement(n,{swiper:e,style:r})}))}(B.current,X,m):!V.loop||B.current&&B.current.destroyed?X.map((function(e){return t.cloneElement(e,{swiper:B.current})})):function(e,n,i){var r=n.map((function(n,i){return t.cloneElement(n,{swiper:e,"data-swiper-slide-index":i})}));function a(e,n,r){return t.cloneElement(e,{key:"".concat(e.key,"-duplicate-").concat(n,"-").concat(r),className:"".concat(e.props.className||""," ").concat(i.slideDuplicateClass)})}if(i.loopFillGroupWithBlank){var o=i.slidesPerGroup-r.length%i.slidesPerGroup;if(o!==i.slidesPerGroup)for(var s=0;s<o;s+=1){var l=t.createElement("div",{className:"".concat(i.slideClass," ").concat(i.slideBlankClass)});r.push(l)}}"auto"!==i.slidesPerView||i.loopedSlides||(i.loopedSlides=r.length);for(var c=f3(r,i),u=[],g=[],d=0;d<c;d+=1){var h=d-Math.floor(d/r.length)*r.length;g.push(a(r[h],d,"append")),u.unshift(a(r[r.length-h-1],d,"prepend"))}return e&&(e.loopedSlides=c),[].concat(u,We(r),g)}(B.current,X,V),Y["wrapper-end"]),c3(V)&&t.createElement(t.Fragment,null,t.createElement("div",{ref:k,className:"swiper-button-prev"}),t.createElement("div",{ref:Z,className:"swiper-button-next"})),g3(V)&&t.createElement("div",{ref:W,className:"swiper-scrollbar"}),u3(V)&&t.createElement("div",{ref:R,className:"swiper-pagination"}),Y["container-end"]))}));w3.displayName="Swiper";var B3=["tag","children","className","swiper","zoom","virtualIndex"];function x3(){return x3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},x3.apply(this,arguments)}var S3=(0,t.forwardRef)((function(e,n){var i=void 0===e?{}:e,r=i.tag,a=void 0===r?"div":r,o=i.children,s=i.className,l=void 0===s?"":s,u=i.swiper,g=i.zoom,d=i.virtualIndex,h=Fe(i,B3),f=(0,t.useRef)(null),p=c((0,t.useState)("swiper-slide"),2),I=p[0],C=p[1];function m(e,t,n){t===f.current&&C(n)}v3((function(){if(n&&(n.current=f.current),f.current&&u){if(!u.destroyed)return u.on("_slideClass",m),function(){u&&u.off("_slideClass",m)};"swiper-slide"!==I&&C("swiper-slide")}})),v3((function(){u&&f.current&&!u.destroyed&&C(u.getSlideClasses(f.current))}),[u]);var v={isActive:I.indexOf("swiper-slide-active")>=0||I.indexOf("swiper-slide-duplicate-active")>=0,isVisible:I.indexOf("swiper-slide-visible")>=0,isDuplicate:I.indexOf("swiper-slide-duplicate")>=0,isPrev:I.indexOf("swiper-slide-prev")>=0||I.indexOf("swiper-slide-duplicate-prev")>=0,isNext:I.indexOf("swiper-slide-next")>=0||I.indexOf("swiper-slide-duplicate-next")>=0},A=function(){return"function"===typeof o?o(v):o};return t.createElement(a,x3({ref:f,className:d3("".concat(I).concat(l?" ".concat(l):"")),"data-swiper-slide-index":d},h),t.createElement(A3.Provider,{value:v},g?t.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":"number"===typeof g?g:void 0},A()):A()))}));S3.displayName="SwiperSlide";var Z3=n.p+"static/media/sutun_grafik.f6b3477835711fb6c28f.jpg",k3=n.p+"static/media/pasta_grafik.9b26580b751cfd2c4ee3.jpg",R3=n.p+"static/media/cizgi_grafik.9cfe8a59c3d6a8ea4521.jpg",W3=n.p+"static/media/tkc_istatistik_timeline.81c219ea8fb8691e8995.png";n3.use([r3]);var M3,V3={navigation:{prevEl:".swiper-button-prev",nextEl:".swiper-button-next"}};M3="\x7f\x7f\u2022";var F3=(0,u.jsx)("span",{style:{fontSize:"12pt"},children:"\u0130statistik, \xe7evremizdeki olup bitenin say\u0131larla ifadesidir. Belirli bir ara\u015ft\u0131rmadan toplanan say\u0131sal de\u011ferler ile bu say\u0131sal de\u011ferlerden yararlanarak haz\u0131rlanan tablo, \u015fekil ve grafiklerdir."}),N3=(0,u.jsxs)("span",{style:{fontSize:"12pt"},children:["\u0130statistik ayr\u0131ca, ge\xe7mi\u015fin ve \u015fimdiki durumu \xe7e\u015fitli say\u0131sal tekniklerle analiz ederek gelecek hakk\u0131nda karar vermeyi sa\u011flayan bir bilim dal\u0131d\u0131r.",(0,u.jsx)("br",{})," ",(0,u.jsx)("br",{})," \xd6rne\u011fin,",(0,u.jsx)("br",{})," ",M3," Evde ya\u015fayan ki\u015fi say\u0131s\u0131",(0,u.jsx)("br",{})," ",M3," Okuldaki s\u0131n\u0131f say\u0131s\u0131",(0,u.jsx)("br",{})," ",M3," Trafikteki otomobil say\u0131s\u0131",(0,u.jsx)("br",{})," ",M3," G\xfcnl\xfck t\xfcketilen ekmek say\u0131s\u0131"]}),H3=(0,u.jsxs)("span",{style:{fontSize:"12pt"},children:["Bir amaca y\xf6nelik yap\u0131lan say\u0131m, anket, ara\u015ft\u0131rma veya g\xf6zlem sonucunda elde edilen de\u011ferlerin her birine veri denir.",(0,u.jsx)("br",{})," ",(0,u.jsx)("br",{})," Bir okuldaki \xf6\u011frencilerin; ya\u015f, kilo ve boylar\u0131n\u0131n incelenmesi i\xe7in bir ara\u015ft\u0131rma sonucunda elde edilen ya\u015f, kilo ve boy de\u011ferlerinin her biri ara\u015ft\u0131rman\u0131n verileridir."]}),T3=(0,u.jsxs)("span",{style:{fontSize:"12pt"},children:["Toplanan verilerin i\u015flenmesi ve de\u011ferlendirilmesi sonucu elde edilen de\u011ferlere bilgi denir.",(0,u.jsx)("br",{})," ",(0,u.jsx)("br",{}),"Bilgi verinin i\u015flenmi\u015f halidir.",(0,u.jsx)("br",{})," ",(0,u.jsx)("br",{})," \xd6rne\u011fin, bir okulda yap\u0131lan ara\u015ft\u0131rma sonucunda ula\u015f\u0131lan bilgiye \xf6rnek olarak; 12 ya\u015f\u0131ndaki k\u0131z \xf6\u011frencilerin %40\u2019\u0131n\u0131n 150 cm boyunda ve 45 kg a\u011f\u0131rl\u0131\u011f\u0131nda oldu\u011fu g\xf6sterilebilir."]}),X3=(0,u.jsxs)("span",{style:{fontSize:"12pt"},children:["Bir olay\u0131n tekrarlanma s\u0131kl\u0131\u011f\u0131n\u0131 g\xf6steren verilerden olu\u015fan tabloya s\u0131kl\u0131k (frekans) tablosu denir.",(0,u.jsx)("br",{}),(0,u.jsx)("br",{}),"\xd6rnek 1: ",(0,u.jsx)("br",{}),M3," 10 arkada\u015f\u0131m\u0131z\u0131n a\u011f\u0131rl\u0131klar\u0131n\u0131 \xf6l\xe7elim. ",(0,u.jsx)("br",{}),M3," \xc7\u0131kan de\u011ferler; 20, 23, 25, 28, 21, 20, 25, 22, 25, 27 kg olsun."," ",(0,u.jsx)("br",{}),M3," \xd6nce bu de\u011ferler a\u015fa\u011f\u0131daki gibi k\xfc\xe7\xfckten b\xfcy\xfc\u011fe s\u0131ralan\u0131r.",(0,u.jsx)("br",{}),M3," 20 20 21 22 23 25 25 25 27 28 ",(0,u.jsx)("br",{}),M3," Verileri inceledi\u011fimizde; a\u011f\u0131rl\u0131\u011f\u0131 25 kg olan 3 ki\u015fi oldu\u011fu g\xf6r\xfcl\xfcr.",(0,u.jsx)("br",{}),M3," Buradaki 3 say\u0131s\u0131 frekans\u0131 g\xf6sterir.",(0,u.jsx)("br",{})]}),Y3={backgroundColor:"#f5eccd",padding:"10px",border:"1px solid #999"},E3={width:"200px",padding:"10px",paddingLeft:"10px",border:"1px solid #999"},z3=(0,u.jsxs)("table",{style:{borderCollapse:"collapse",margin:"20px"},children:[(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{style:Y3,children:"Spor Dal\u0131"}),(0,u.jsx)("th",{style:Y3,children:"Ki\u015fi Say\u0131s\u0131"})]})}),(0,u.jsxs)("tbody",{children:[(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{style:E3,children:"Basketbol"}),(0,u.jsx)("td",{style:E3,children:"36"})]}),(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{style:E3,children:"Voleybol"}),(0,u.jsx)("td",{style:E3,children:"27"})]}),(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{style:E3,children:"Tenis"}),(0,u.jsx)("td",{style:E3,children:"45"})]}),(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{style:E3,children:"Futbol"}),(0,u.jsx)("td",{style:E3,children:"54"})]})]})]}),L3=(0,u.jsxs)(u.Fragment,{children:[" ",(0,u.jsxs)("span",{style:{fontSize:"12pt"},children:["\xd6rnek 2: ",(0,u.jsx)("br",{}),"Okulumuzdaki \xf6\u011frencilerin en sevdi\u011fi spor t\xfcrlerine ait s\u0131kl\u0131k tablosunun a\u015fa\u011f\u0131daki \u015fekilde oldu\u011funu d\xfc\u015f\xfcn\xfcrsek, okulumuzdaki en sevilen sporun futbol, frekans\u0131n\u0131n 54 oldu\u011fu g\xf6r\xfcl\xfcr."]}),z3]}),K3=(0,u.jsxs)(u.Fragment,{children:[" ",(0,u.jsxs)("span",{style:{fontSize:"12pt"},children:["Aritmetik ortalama, bir say\u0131 dizisindeki verilerin toplam\u0131n\u0131n veri say\u0131s\u0131na b\xf6l\xfcnmesi ile elde edilen de\u011ferdir. ",(0,u.jsx)("br",{})," ",(0,u.jsx)("br",{}),M3," Bir ailede bulunan fertlerin ya\u015flar\u0131 36, 40, 12, 4, 6 olsun."," ",(0,u.jsx)("br",{}),M3," Bu say\u0131 dizisinde veri say\u0131s\u0131 5\u2019tir",(0,u.jsx)("br",{}),M3," 36 + 40 + 12 + 4 + 6 = 100",(0,u.jsx)("br",{}),M3," Aritmetik ortalama = 100 \xf7 5 = 20\u2019dir"]})]}),_3=(0,u.jsxs)(u.Fragment,{children:[" ",(0,u.jsxs)("span",{style:{fontSize:"12pt"},children:["Say\u0131 dizisi, b\xfcy\xfckten k\xfc\xe7\xfc\u011fe veya k\xfc\xe7\xfckten b\xfcy\xfc\u011fe s\u0131raland\u0131ktan sonra, dizinin ortas\u0131ndaki de\u011fere medyan denir.",(0,u.jsx)("br",{}),(0,u.jsx)("br",{}),M3," Bir marketteki dondurma fiyatlar\u0131 6, 12, 15, 4, 8 TL\u2019dir",(0,u.jsx)("br",{}),M3," \xd6nce bu de\u011ferler k\xfc\xe7\xfckten b\xfcy\xfc\u011fe s\u0131ralan\u0131r (4 6 8 12 15)",(0,u.jsx)("br",{}),M3," Ortada yer alan 8 de\u011feri medyand\u0131r"]})]}),P3=(0,u.jsxs)(u.Fragment,{children:[" ",(0,u.jsxs)("span",{style:{fontSize:"12pt"},children:["Bir say\u0131 dizisinde en \xe7ok tekrarlanan de\u011ferdir.",(0,u.jsx)("br",{})," ",(0,u.jsx)("br",{}),"\xd6rnek:",(0,u.jsx)("br",{}),M3," 10 arkada\u015f\u0131m\u0131z\u0131n a\u011f\u0131rl\u0131klar\u0131n\u0131 \xf6l\xe7elim. ",(0,u.jsx)("br",{}),M3," \xc7\u0131kan de\u011ferler; 20, 23, 25, 28, 21, 20, 25, 22, 25, 27 kg olsun."," ",(0,u.jsx)("br",{}),M3," \xd6nce bu de\u011ferler a\u015fa\u011f\u0131daki gibi k\xfc\xe7\xfckten b\xfcy\xfc\u011fe s\u0131ralan\u0131r.",(0,u.jsx)("br",{}),M3," 20 20 21 22 23 25 25 25 27 28",(0,u.jsx)("br",{}),M3," Verileri inceledi\u011fimizde; en \xe7ok tekrarlanan de\u011ferin 25 oldu\u011fu g\xf6r\xfcl\xfcr.",(0,u.jsx)("br",{}),M3," En \xe7ok tekrarlanan 25 de\u011ferine mod (tepe de\u011feri) denir."]})]}),D3=(0,u.jsxs)(u.Fragment,{children:[" ",(0,u.jsxs)("span",{style:{fontSize:"12pt"},children:["Veriler aras\u0131nda kar\u015f\u0131la\u015ft\u0131rma yapmaya yarayan \u015fekle grafik denir.",(0,u.jsx)("br",{}),"Veri, grafikle g\xf6sterildi\u011finde daha kolay anla\u015f\u0131labilir.",(0,u.jsx)("br",{})," ",(0,u.jsx)("br",{}),"A\u015fa\u011f\u0131dakiler, en \xe7ok kullan\u0131lan grafik t\xfcrleridir: ",(0,u.jsx)("br",{}),M3," S\xfctun grafik ",(0,u.jsx)("br",{}),M3," Pasta grafik ",(0,u.jsx)("br",{})," ",M3," \xc7izgi grafik"]})]}),O3=(0,u.jsxs)(u.Fragment,{children:[" ",(0,u.jsxs)("span",{style:{fontSize:"12pt"},children:["Verilerin s\xfctun \u015feklinde g\xf6sterildi\u011fi grafik t\xfcr\xfcne s\xfctun grafi\u011fi denir.",(0,u.jsx)("br",{}),M3," Verinin de\u011feri artt\u0131k\xe7a s\xfctunlar\u0131n y\xfcksekli\u011fi de artar.",(0,u.jsx)("br",{}),M3," S\xfctun grafi\u011fi yatay veya dikey olabilir.",(0,u.jsx)("br",{}),(0,u.jsx)("br",{})]}),(0,u.jsx)("img",{style:{width:"90%"},src:Z3,alt:"sutun_grafik"})]}),U3=(0,u.jsxs)(u.Fragment,{children:[" ",(0,u.jsxs)("span",{style:{fontSize:"12pt"},children:["Verilerin, pastan\u0131n dilimleri \u015feklinde g\xf6sterildi\u011fi grafik t\xfcr\xfcne pasta grafi\u011fi denir.",(0,u.jsx)("br",{}),M3," Verinin de\u011feri artt\u0131k\xe7a pastan\u0131n diliminin b\xfcy\xfckl\xfc\u011f\xfc de artar.",(0,u.jsx)("br",{}),(0,u.jsx)("br",{})]}),(0,u.jsx)("img",{style:{width:"90%"},src:k3,alt:"pasta_grafik"})]}),j3=(0,u.jsxs)(u.Fragment,{children:[" ",(0,u.jsxs)("span",{style:{fontSize:"12pt"},children:["Verilerin zaman i\xe7indeki de\u011fi\u015fimini g\xf6stermek amac\u0131yla \xe7izgi \u015feklinde haz\u0131rlanan grafik t\xfcr\xfcne \xe7izgi grafik denir. ",(0,u.jsx)("br",{})," ",(0,u.jsx)("br",{})]}),(0,u.jsx)("img",{style:{width:"90%"},src:R3,alt:"cizgi_grafik"})]}),J3=function(){var e=[{header:"\u0130statistik Nedir?",review:F3},{header:"\u0130statistik Nedir?",review:N3},{header:"Veri nedir?",review:H3},{header:"Bilgi nedir?",review:T3},{header:"S\u0131kl\u0131k (frekans) tablosu nedir?",review:X3},{header:"S\u0131kl\u0131k (frekans) tablosu nedir?",review:L3},{header:"Aritmetik ortalama nedir?",review:K3},{header:"Medyan (ortanca) nedir?",review:_3},{header:"Mod (tepe de\u011feri) nedir?",review:P3},{header:"Grafik nedir?",review:D3},{header:"S\xfctun grafik nedir?",review:O3},{header:"Pasta grafik nedir?",review:U3},{header:"\xc7izgi grafik nedir?",review:j3}];return(0,u.jsxs)("div",{className:"container-istatistik",id:"istatistik",children:[(0,u.jsx)("div",{className:"left-column",children:(0,u.jsx)("img",{src:W3,alt:""})}),(0,u.jsxs)("div",{className:"right-column",children:[(0,u.jsx)(w3,Ve(Ve({},V3),{},{modules:[o3],slidesPerView:1,pagination:{clickable:!0},children:e.map((function(e,t){return(0,u.jsx)(S3,{children:(0,u.jsxs)("div",{className:"istatistik-card",children:[(0,u.jsxs)("span",{className:"istatistik-card-text",style:{color:"orange"},children:[e.header,(0,u.jsx)("br",{}),(0,u.jsx)("br",{})]}),(0,u.jsx)("span",{className:"istatistik-card-text",style:{color:"grey"},children:e.review})," "]})},t)}))})),(0,u.jsx)("div",{className:"swiper-button-prev",children:(0,u.jsx)("svg",{id:"right-arrow",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(-180deg)",zIndex:8},children:(0,u.jsx)("path",{d:"M6 18L18 12L6 6V18Z",fill:"#0099ff"})})}),(0,u.jsx)("div",{className:"swiper-button-next",children:(0,u.jsx)("svg",{id:"right-arrow",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",style:{zIndex:8},children:(0,u.jsx)("path",{d:"M6 18L18 12L6 6V18Z",fill:"#0099ff"})})}),(0,u.jsx)("div",{style:{backgroundImage:"url(".concat(HZ,")"),backgroundRepeat:"no-repeat",backgroundSize:"cover",width:"18rem",height:"8rem",display:"flex",justifyContent:"space-between",alignItems:"center",marginLeft:"-4rem",marginTop:"-4rem"}})]})]})},Q3=function(e){var t=e.videoSrc,n=e.onClose;return(0,u.jsx)("div",{className:"video-popup",children:(0,u.jsxs)("div",{className:"video-container",children:[(0,u.jsx)("video",{id:"videoElement",src:t,controls:!0,autoPlay:!0,width:"85%",height:"85%"}),(0,u.jsx)("button",{className:"close-button",onClick:n,children:"Kapat"})]})})},q3=n.p+"static/media/tkc_video_istatistiknedir.301e0a987d8ba014834a.png",$3=n.p+"static/media/tkc_video_ulkemizitaniyalim.fb18d230c9eb584b274b.png",e5=n.p+"static/media/tkc_video_cocukhaklari.6ae350895e299c12aa0f.png",t5=n.p+"static/media/tkc_video_guvenailesi.286e4c45410c2953ba4f.png",n5=n.p+"static/media/IstatistikNedir.2e113636702597fb8a0e.mp4",i5=n.p+"static/media/UlkemiziTaniyalim.0de89e48c9ac6f7c9be5.mp4",r5=n.p+"static/media/CocukHaklari.bc1863cb9e92d7aad9d2.mp4",a5=n.p+"static/media/GuvenAilesi.c8e850c5073a2ec6c240.mp4",o5=n.p+"static/media/ktp_barchart.8ee0b9377baf4c8876f5.gif",s5=n.p+"static/media/sutun-grafigi-nasil-hazirlanir.c13174f4832f85a00577.pdf",l5=n.p+"static/media/ktp_karsilastirma grafigi.093cf31b3478140de0df.gif",c5=n.p+"static/media/ktp_piechart.99ad2df1d881395996f2.gif",u5=n.p+"static/media/ktp_grupbar.5a7600ce83f09dad4e33.gif",g5=function(){var e=(0,t.useContext)(g).state.darkMode,n=c((0,t.useState)(!1),2),i=n[0],r=n[1],a=c((0,t.useState)(""),2),o=a[0],s=a[1],l=function(e){window.open(e,"_blank")},d=function(e){s(e),r(!0),console.log("click worked...")};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"videolar",children:(0,u.jsx)("span",{className:"video-izle-text",style:{color:e?"white":"#99cc33",display:"flex"},children:"Video izleyelim"})}),(0,u.jsx)("div",{className:"videorow",id:"works",children:(0,u.jsxs)("div",{className:"w-right",children:[(0,u.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},onClick:function(){return d(n5)},children:[(0,u.jsx)($1,{img:q3}),(0,u.jsx)("span",{children:"\u0130statistik Nedir?"})]}),(0,u.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},onClick:function(){return d(i5)},children:[(0,u.jsx)($1,{img:$3}),(0,u.jsx)("span",{children:"\xdclkemizi Tan\u0131yal\u0131m"})]}),(0,u.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},onClick:function(){return d(r5)},children:[(0,u.jsx)($1,{img:e5}),(0,u.jsx)("span",{children:"\xc7ocuk Haklar\u0131"})]}),(0,u.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},onClick:function(){return d(a5)},children:[(0,u.jsx)($1,{img:t5}),(0,u.jsx)("span",{children:"G\xfcven Ailesi"})]})]})}),i&&(0,u.jsx)(Q3,{videoSrc:o,onClose:function(){r(!1),s("")}})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"videolar",children:(0,u.jsx)("span",{className:"video-izle-text",style:{color:e?"white":"#99cc33",display:"flex"},children:"Kitapl\u0131k"})}),(0,u.jsx)("div",{className:"videorow",id:"works",children:(0,u.jsxs)("div",{className:"w-right",children:[(0,u.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},onClick:function(){return l(s5)},children:[(0,u.jsx)("div",{style:{transform:"scale(0.85)"},children:(0,u.jsx)($1,{img:o5})}),(0,u.jsx)("span",{children:"S\xfctun Grafi\u011fi Nas\u0131l Haz\u0131rlan\u0131r?"})]}),(0,u.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},onClick:function(){return l(s5)},children:[(0,u.jsx)("div",{style:{transform:"scale(0.85)"},children:(0,u.jsx)($1,{img:c5})}),(0,u.jsx)("span",{children:"Pasta Dilimi Grafi\u011fi Nas\u0131l Haz\u0131rlan\u0131r?"})]}),(0,u.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},onClick:function(){return l(s5)},children:[(0,u.jsx)("div",{style:{transform:"scale(0.85)"},children:(0,u.jsx)($1,{img:l5})}),(0,u.jsx)("span",{children:"Kar\u015f\u0131la\u015ft\u0131rma Grafi\u011fi Nas\u0131l Haz\u0131rlan\u0131r?"})]}),(0,u.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},onClick:function(){return l(s5)},children:[(0,u.jsx)("div",{style:{transform:"scale(0.85)"},children:(0,u.jsx)($1,{img:u5})}),(0,u.jsx)("span",{children:"Grup S\xfctun Grafi\u011fi Nas\u0131l Haz\u0131rlan\u0131r?"})]})]})})]})]})},d5=(n.p,n.p+"static/media/tkc_tuik_timeline.45469cdb865e76d8a326.png");n3.use([r3]);var h5={navigation:{prevEl:".swiper-button-prev",nextEl:".swiper-button-next"}},f5=(0,u.jsxs)("span",{children:["\xdclkemize ait \xe7e\u015fitli bilgileri toplar, toplad\u0131\u011f\u0131 bu bilgilerle hesaplamalar yapar ve a\xe7\u0131klar.",(0,u.jsx)("br",{}),"- \xdclkemizde ka\xe7 ki\u015fi ya\u015f\u0131yor, bunlar\u0131n ne kadar\u0131 \xe7ocuk, ya\u015fad\u0131\u011f\u0131m yerde ka\xe7 ki\u015fi var, benim ad\u0131m ka\xe7 ki\u015fide var gibi n\xfcfus bilgilerini ",(0,u.jsx)("br",{}),"- \xdclkemizde ka\xe7 okul, ka\xe7 \xf6\u011frenci var gibi e\u011fitim bilgilerini ",(0,u.jsx)("br",{}),"- \xdclkemizde ka\xe7 doktor ve ka\xe7 hastane var gibi sa\u011fl\u0131k bilgilerini"]}),p5=(0,u.jsxs)("span",{children:["- Cep telefonunu ve \u0130nterneti ne kadar kullan\u0131yoruz gibi teknoloji bilgilerini",(0,u.jsx)("br",{}),"- Trafikte ka\xe7 ara\xe7 var, hangi markadan ka\xe7 otomobil var, yollar\u0131m\u0131z\u0131n uzunlu\u011fu ne kadar gibi ula\u015ft\u0131rma bilgilerini",(0,u.jsx)("br",{}),"- ve daha pek \xe7ok merak etti\u011fin bilgiyi T\xdc\u0130K\u2019ten \xf6\u011frenebilirsin."]}),I5=(0,u.jsx)("span",{children:"T\xdc\u0130K ayr\u0131ca, \xfclkemizdeki di\u011fer kurumlara ve uluslararas\u0131 kurulu\u015flara istatistik \xfcretimi ile ilgili \xe7al\u0131\u015fmalarda da yard\u0131mc\u0131 olur."}),C5=function(){var e=[{header:"T\xdc\u0130K Ne \u0130\u015f Yapar?",review:f5},{header:"T\xdc\u0130K Ne \u0130\u015f Yapar?",review:p5},{header:"T\xdc\u0130K Ne \u0130\u015f Yapar?",review:I5}];return(0,u.jsxs)("div",{className:"container-istatistik",id:"tuik",children:[(0,u.jsx)("div",{className:"left-column",children:(0,u.jsx)("img",{src:d5,alt:""})}),(0,u.jsxs)("div",{className:"right-column",children:[(0,u.jsx)("div",{children:(0,u.jsx)(w3,Ve(Ve({},h5),{},{modules:[o3],slidesPerView:1,pagination:{clickable:!0},children:e.map((function(e,t){return(0,u.jsx)(S3,{children:(0,u.jsxs)("div",{className:"istatistik-card",children:[(0,u.jsxs)("span",{className:"istatistik-card-text",style:{color:"orange"},children:[e.header,(0,u.jsx)("br",{}),(0,u.jsx)("br",{})]}),(0,u.jsx)("span",{className:"istatistik-card-text",style:{color:"grey"},children:e.review})," "]})},t)}))}))}),(0,u.jsx)("div",{className:"swiper-button-prev",children:(0,u.jsx)("svg",{id:"right-arrow",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(-180deg)",zIndex:8},children:(0,u.jsx)("path",{d:"M6 18L18 12L6 6V18Z",fill:"#0099ff"})})}),(0,u.jsx)("div",{className:"swiper-button-next",children:(0,u.jsx)("svg",{id:"right-arrow",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",style:{zIndex:8},children:(0,u.jsx)("path",{d:"M6 18L18 12L6 6V18Z",fill:"#0099ff"})})}),(0,u.jsx)("div",{style:{backgroundImage:"url(".concat(HZ,")"),backgroundRepeat:"no-repeat",backgroundSize:"cover",width:"18rem",height:"8rem",display:"flex",justifyContent:"space-between",alignItems:"center",marginLeft:"-4rem",marginTop:"-4rem"}})]})]})},m5={_origin:"https://api.emailjs.com"},v5=function(e,t,n){if(!e)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!n)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0},A5=Xe((function e(t){ka(this,e),this.status=t?t.status:0,this.text=t?t.responseText:"Network Error"})),b5=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(i,r){var a=new XMLHttpRequest;a.addEventListener("load",(function(e){var t=e.target,n=new A5(t);200===n.status||"OK"===n.text?i(n):r(n)})),a.addEventListener("error",(function(e){var t=e.target;r(new A5(t))})),a.open("POST",m5._origin+e,!0),Object.keys(n).forEach((function(e){a.setRequestHeader(e,n[e])})),a.send(t)}))},y5=function(e,t,n,i){var r=i||m5._userID,a=function(e){var t;if(!(t="string"===typeof e?document.querySelector(e):e)||"FORM"!==t.nodeName)throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return t}(n);v5(r,e,t);var o=new FormData(a);return o.append("lib_version","3.11.0"),o.append("service_id",e),o.append("template_id",t),o.append("user_id",r),b5("/api/v1.0/email/send-form",o)},G5=function(){var e=(0,t.useContext)(g).state.darkMode,n=(0,t.useRef)(),i=c((0,t.useState)(!1),2),r=i[0],a=i[1],o=c((0,t.useState)(!1),2),s=o[0],l=o[1],d=c((0,t.useState)(""),2),h=d[0],f=d[1],p=c((0,t.useState)(""),2),I=p[0],C=p[1],m=c((0,t.useState)(""),2),v=m[0],A=m[1];return(0,u.jsxs)("div",{className:"contact-form",id:"contact",children:[(0,u.jsx)("div",{className:"w-left",children:(0,u.jsx)("div",{children:(0,u.jsx)("span",{className:"awesome",style:{color:e?"white":"orange",display:"flex",justifyContent:"right",marginLeft:"8rem",zIndex:"10"},children:"\u0130leti\u015fim"})})}),(0,u.jsx)("div",{className:"c-right",style:{zIndex:"10"},children:(0,u.jsxs)("form",{ref:n,onSubmit:function(e){var t;(e.preventDefault(),""!==h.trim()&&(t=I.trim(),/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))&&""!==v.trim())?(l(!0),y5("service_ycz3ujb","template_wgx6uq4",n.current,"3psXGRcvDdBWY1muI").then((function(e){console.log(e.text),l(!1),a(!0),n.reset()}),(function(e){console.log(e.text)}))):alert("L\xfctfen Gerekli Alanlar\u0131 Doldurunuz.")},children:[(0,u.jsx)("input",{type:"text",name:"user_name",className:"user",placeholder:"Ad Soyad",value:h,onChange:function(e){return f(e.target.value)}}),(0,u.jsx)("input",{type:"email",name:"user_email",className:"user",placeholder:"E-posta",value:I,onChange:function(e){return C(e.target.value)}}),(0,u.jsx)("textarea",{name:"message",className:"user",placeholder:"Mesaj",value:v,onChange:function(e){return A(e.target.value)}}),(0,u.jsxs)("div",{children:[(0,u.jsx)("input",{type:"submit",value:"G\xf6nder",className:"button ".concat(r?"button-disabled":""),disabled:r}),s&&(0,u.jsx)("div",{children:"Mesaj\u0131n\u0131z G\xf6nderiliyor..."}),r&&"Mesaj\u0131n\u0131z \u0130\xe7in Te\u015fekk\xfcr Ederiz"]})]})})]})},w5=function(){return(0,u.jsxs)("div",{className:"footer",children:[(0,u.jsx)("img",{src:SZ,alt:"",style:{width:"100%"}}),(0,u.jsx)("div",{className:"f-content",children:(0,u.jsx)("div",{className:"f-icons"})})]})},B5=function(){var e=c((0,t.useState)(!1),2),n=e[0],i=e[1],r=function(e){27===e.keyCode&&i(!1)};(0,t.useEffect)((function(){return window.addEventListener("keydown",r),function(){window.removeEventListener("keydown",r)}}),[]);var a=Ie().state.userInfo;console.log("gelen userinfo: ",a);var o=null===a||void 0===a?void 0:a.firstName,s=(null===a||void 0===a||a.lastName,null===a||void 0===a?void 0:a.birthDay),l=null===a||void 0===a?void 0:a.birthMonth,g=null===a||void 0===a?void 0:a.birthYear,d=null===a||void 0===a?void 0:a.height,h=null===a||void 0===a?void 0:a.weight,f=null===a||void 0===a?void 0:a.city,p=null===a||void 0===a?void 0:a.gender;return(0,u.jsx)("div",{children:n?(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"metaverse",children:[(0,u.jsx)("button",{className:"button i-button",onClick:function(){i(!1)},style:{position:"absolute",zIndex:2,transform:"scale(0.6)",lineHeight:1.4,fontSize:34},children:"X"}),(0,u.jsx)(K1,{cinsiyet:p})]})}):(0,u.jsxs)("div",{children:[(0,u.jsx)(XZ,{}),(0,u.jsx)(n2,{setShowMetaverse:i,ad:o,dogumGunu:s,dogumAyi:l,dogumYili:g,boy:d,kilo:h,sehir:f,cinsiyet:p,onButtonClick:function(){i(!0)}}),(0,u.jsxs)(Ce,{children:[(0,u.jsx)(J3,{}),(0,u.jsx)(g5,{}),(0,u.jsx)(C5,{}),(0,u.jsx)(G5,{}),(0,u.jsx)(w5,{})]})]})})},x5=(n.p,function(e){var n=e.src1,i=e.src2,r=e.row1,a=e.rowTitle,o=c((0,t.useState)(!1),2),s=o[0],l=o[1],g=c((0,t.useState)(!1),2);g[0],g[1];return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"imageWithRowEdit",children:(0,u.jsx)("div",{className:"imageWrapperEdit",onMouseEnter:function(){l(!0)},onMouseLeave:function(){l(!1)},children:(0,u.jsxs)("div",{className:"imageContainer",children:[(0,u.jsx)("img",{src:i,alt:"",style:{margin:"6px",span:"6px",height:"400px",position:"absolute",filter:s?"none":"blur(4px)",zIndex:s?1:-1,borderRadius:"5px",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)"}}),(0,u.jsx)("img",{src:n,alt:"",style:{margin:"6px",span:"6px",height:"150px",borderRadius:"5px",boxShadow:"0 12px 18px rgba(0, 0, 0, 0.6)"}})]})})}),s&&(0,u.jsxs)("div",{className:"textPopup",style:{pointerEvents:s?"none":"auto"},children:[(0,u.jsxs)("span",{style:{color:"orange"},children:[a,(0,u.jsx)("br",{})," ",(0,u.jsx)("br",{})]}),(0,u.jsx)("span",{children:r})]})]})}),S5=n.p+"static/media/sdg1.70b33f3d893491d9e2ee.jpg",Z5=n.p+"static/media/ss1.03b2cd85eb71b0e8bcb0.jpg",k5=n.p+"static/media/ss2.4ae32c46bca13e9a219d.jpg",R5=n.p+"static/media/sdg3.c56f3dce3aa9867c1f96.jpg",W5=n.p+"static/media/ss3.761d63792bf3bfe2ecf4.jpg",M5=n.p+"static/media/sdg4.ca375f8d70a56ec43306.jpg",V5=n.p+"static/media/ss4.4741b265d87499747d67.jpg",F5=n.p+"static/media/sdg5.5e0c500562bff3f59038.jpg",N5=n.p+"static/media/ss5.8c4245c5add96e7c6008.jpg",H5=n.p+"static/media/sdg6.64451da1da39e0a8afd8.jpg",T5=n.p+"static/media/ss6.43e70ca8918190e3ac7c.jpg",X5=n.p+"static/media/sdg7.de8b9b092da04f4677ff.jpg",Y5=n.p+"static/media/ss7.57c7bdf83ba54b300f86.jpg",E5=n.p+"static/media/sdg8.0bbbf46493a5eba9672f.jpg",z5=n.p+"static/media/ss8.002c855e342ff9aef6c1.jpg",L5=n.p+"static/media/sdg9.048667ec3ec7e5693c71.jpg",K5=n.p+"static/media/ss9.f1d885d472bbcf3f7d06.jpg",_5=n.p+"static/media/sdg10.64a2c08765f857373189.jpg",P5=n.p+"static/media/ss10.3af8492003eaee2daad9.jpg",D5=n.p+"static/media/sdg11.d409ae287f6e29aeffe6.jpg",O5=n.p+"static/media/ss11.f83995e2a3968c3b40e3.jpg",U5=n.p+"static/media/sdg12.23c55b68139401745641.jpg",j5=n.p+"static/media/ss12.dfc1aebd55977089d852.jpg",J5=n.p+"static/media/sdg13.a98bfce52d70cd04cf13.jpg",Q5=n.p+"static/media/ss13.bb71ca433f09aa844b84.jpg",q5=n.p+"static/media/sdg14.a84086f7e761bf7a45b8.jpg",$5=n.p+"static/media/ss14.c29a7dd3dfe1c8f28686.jpg",e9=n.p+"static/media/sdg15.71b8f26aae3c7bab4fba.jpg",t9=n.p+"static/media/ss15.fdeff7ecf0f7169ca871.jpg",n9=n.p+"static/media/sdg16.a66f63ef358caf12b5e9.jpg",i9=n.p+"static/media/ss16.939e5b64588114379cc3.jpg",r9=n.p+"static/media/sdg17.5017db584b1ab6ca71e9.jpg",a9=n.p+"static/media/ss17.858f70ae56e3448e16b2.jpg",o9=function(){return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"sdgGrid-container",children:[(0,u.jsx)(x5,{src1:S5,src2:Z5,rowTitle:"Yoksullu\u011fa Son",row1:"D\xfcnyan\u0131n her yerinde yoksullu\u011fu sona erdirmek birinci ama\xe7t\u0131r. Bu ama\xe7, herkesin yiyecek,\r\nbar\u0131nma, giyim, sa\u011fl\u0131k ve e\u011fitime ula\u015fmas\u0131n\u0131 b\xf6ylece topluma tam anlam\u0131yla kat\u0131labilmesini\r\nsa\u011flayacakt\u0131r. Yoksul olmak demek \xe7o\u011fu kez sosyal g\xfcvenlik, yeni teknoloji, mal-m\xfclk, arazi sahipli\u011fi\r\nve mali yard\u0131m gibi temel \u015feylere eri\u015fememek anlam\u0131na geliyor. Bu ama\xe7 bunlar\u0131n hepsini\r\nd\xfczeltmeyi hedefliyor. \u0130klimin ve di\u011fer do\u011fal afetlerin, sosyal ve ekonomik sars\u0131nt\u0131lar\u0131n etkiledi\u011fi\r\ninsanlara yard\u0131m etmemiz gerekir."})," ",(0,u.jsx)(x5,{src1:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAIBAQIBAQICAgICAgICAwUDAwMDAwYEBAMFBwYHBwcGBwcICQsJCAgKCAcHCg0KCgsMDAwMBwkODw0MDgsMDAz/2wBDAQICAgMDAwYDAwYMCAcIDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAz/wAARCADpAOoDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD74+Jv7YnxI8JfEzxFptj4hFra2Op3FtAn9n28nlpHJJGkf+r9qw/+G6vix/0NX/lLt/8A5HrjfjKMfF7xdzn/AInd3/6Mkrma/iPMuLc4p4ypSpYyp/Eqf8vD9vy/KcH9Wp/u6f8A4LPVv+G6Pit/0NI/8Fdv/wDI9H/DdHxW/wChpH/grt//AJHrymiuP/XLPP8AoMqf+DDr/sXAf9A9P/wWerf8N0fFb/oaR/4K7f8A+R6P+G6Pit/0NI/8Fdv/API9eU0Uf65Z5/0GVP8AwYH9i4D/AKB6f/gs9W/4bo+K3/Q0j/wV2/8A8j0f8N0fFb/oaR/4K7f/AOR68poo/wBcs8/6DKn/AIMD+xcB/wBA9P8A8Fnq3/DdHxW/6Gkf+Cu3/wDkej/huj4rf9DSP/BXb/8AyPXlNFH+uWef9BlT/wAGB/YuA/6B6f8A4LPVv+G6Pit/0NI/8Fdv/wDI9H/DdHxW/wChpH/grt//AJHrymij/XLPP+gyp/4MD+xcB/0D0/8AwWerf8NzfFb/AKGj/wApdv8A/I9H/Dc3xW/6Gj/yl2//AMj15TRS/wBbs9/6DKn/AIMqB/YuA/6B6f8A4LPVv+G6Pit/0NI/8Fdv/wDI9H/DdHxW/wChpH/grt//AJHrymin/rlnn/QZU/8ABgf2LgP+gen/AOCz1b/huj4rf9DSP/BXb/8AyPR/w3R8Vv8AoaR/4K7f/wCR68poo/1yzz/oMqf+DA/sXAf9A9P/AMFnq3/DdHxW/wChpH/grt//AJHo/wCG6Pit/wBDSP8AwV2//wAj15TRR/rlnn/QZU/8GB/YuA/6B6f/AILPVv8Ahuj4rf8AQ0j/AMFdv/8AI9H/AA3R8Vv+hpH/AIK7f/5Hrymij/XLPP8AoMqf+DA/sXAf9A9P/wAFnq3/AA3R8Vv+hpH/AIK7f/5Ho/4bo+K3/Q0j/wAFdv8A/I9eU0Uf65Z5/wBBlT/wYH9i4D/oHp/+Cz1b/huj4rf9DSP/AAV2/wD8j0f8N0fFb/oaR/4K7f8A+R68poo/1yzz/oMqf+DA/sXAf9A9P/wWerf8N0fFb/oaR/4K7f8A+R6P+G6Pit/0NI/8Fdv/API9eU0Uf65Z5/0GVP8AwYH9i4D/AKB6f/gs9w+Gn7aHxE1j4h+H7XUPEgubG61S3tp0/s+3i8y3kkjEn/LP3r7Q/wCFqaX/AH4/zr8z/Cs32PxHp8kf+shvI5P/ACJXuCeKbrYP9Ik6V+8eEOY4zH4LEVcRUqzftHrOpqfC8RZfhoYq0KXIux5L8aP+Sw+L/wDsOXn/AKMkrma6b40f8lh8X/8AYcvP/RklczX8553/AL5U/wCvlQ+8yv8A3amFdt4Q/Zv8beO9NS40vw3qEkMkfmpNIn2aOT/rn5n+sr0b9gL4IWvxM8eXmr6pDHcaf4d8vy0f/Vy3En+r/wC/fl/+i6+x/iL8TNE+FPho32t6gmmWbOI0fypJPMf0REy5r9S4N8N8Pj8v/tbNqns6Z83nnFVShiPq2Gp+0qH51+NfgL4y+HNh52seHdQs4IuZJwnmxxf9tI65Cv1S8JeKdH+JnhSHUNNuodS0u+jzG4T93IK+Cv20vg9Z/CT4xyx6anl6Zq8H2yCNB+7i/eCOSP8A7+H/AMi1y8deHdPKcHTzHLantKY+H+KqmLxH1bEw9nUPIqKK2vh14eHizx9pOmH7upX9vby/9tJPLr8vwuFqV6lOlSPratVU6XtWbnxX+AWvfB/QNJ1LV/s/2fXkLp5D+ZLFhI38uT/vutzwd+x/4u8ZaBp9/HJpNm2pJ5ljb3155clxH1+SOvb/ANtHVf8AhZvwv8TCPy8eCvEUFvHs6+XJbxR/+lMn/kOsD9rPxbdeCfGHwp1i1hjubjTbBLm3gf8A1csn7uv1bHcG5XgMRiKlT2lSnT9n/wCVD4zDZ3jcXTp0qX8Sp7T/AOWHiGhfATxFr2g+K76P7Pb/APCHeZ/akE8nlyRf6z93H/37qP4Z/BzVPivYa3d6XJYxx6DB9ouPPk8v93+8/wBX/wB+69y+EPi648dfB/466xeWsdjd6paCSWBE/dxyfZpKw/2G/wDkT/ih/wBgFf8A0C4rhpcLZfUxGDp0vaezqU6n/lM7/wC18bTw+Iqf8+/Z/wDuMpfs0fBufxb4Fa/1TwvouoaTdahHJp91d3506SV4/Mj8uOTy5JJI5P8AnnXnPxJ8B6xY/GO60e+0yy0vU76//wBHsoT/AKNH9ok/dxp5f/LP95XuHxQ8MTeKP2M/hbpdlJbR3F9fxmN3uPLjL+Vc/wAdVbTwr4o8Vfts+DYfGyaTHf8AkR36f2af3XkW/wBokj/8iIK9PMuH6f1fD5bTp1P+Xf7z/l3+8PPwuY1KeKqYmp/08/8AKZ4r8Y/gxq/wS8UW+la19iluLi3+0I8D+ZGI/Mkj/wDadcjX0Z+2prP/AAsv4eeGPFkfl/utU1TS/k7x+ZJ9n/8AIcf618518HxdlFPAZpUw2G/h/u6lM+myPHVMZg/aYn+IFFFFfMHqBRRRQAUUUUAFFFFABRRRQAUUUUAXNB/5DWn/APXxH/6Mr2NPuD6V45oP/Ia0/wD6+I//AEZXsafcH0r+k/BP/kXYn/r4z4Xir+ND0PN/jT/yWHxd/wBhu8/9GS1zFdP8af8AksPi7/sN3n/oyWuYr+fM2/3yp/18qH1WV/7rTPpz9iP9ojwZ8G/hvrFj4i1T+zry71D7RGgs7iTzI/Lj/wCeaSVj/t0ftB+G/jLZ+Hbfw3qhvbewknlvENvcW3l/6vy/9Ykf/TSvnuvWP2RPgO3xt+J8bXUONF03ZcX8mM+b/wA84/8Atp/6L8yvust4pzPMsvp8K4enT9nU/d/9PDxcdkeEwmIqZ1UqH1t+xT4LuPCP7OGiR3sflXGoCS88v+4jyEx/+Q/LrwH/AIKR64mo/FPRbGNvMuLDTPNf/pn5kn/2uvrj4jePNP8AhP4FvNYvXEen6bB5mEH+s/uIlfml8RfHN78SvGup69ff6/U7jzJI/wDnl/zzj/7Zx/u6/RPFLMMNl3D9LIqf8T93/wCU7f5Hy3CWGqYvMJ5hUMSu7/Zm8V6P4K+Nmj6xr00ltpmmSSSSSfZ5JP3nlyeX/q/+mlcJRX8+5bjqmExFPE0/+Xf7w/ScThvrGHqYap/y8Poe5/a9HxG8H/ETR/FepSzWWspJ/wAI7H9k/wBX+8lkjj/dx/8AXv8AvJK7DwX448H/ABqsPDPizUm1qz1b4cQRm8sbW0kk83+5J+7/AOWfmR/pXyRXUfDb4p33wqvJrzS7TS5L6SPy0vZrd5Lm3/d+XJs+fy+PM/5aRyV95lviBjKmI/4Uf3lP+qlM+bzDh3D+zvgfc/qx7N8Pf2iPCeuxfFKPxBfXOgR+NpP9H/0eSSWOPy5I8/u/+2dZvwa+Ifgf4OR+NrWDxBNqVrrOiC3gmk02SPzJ/wDScx7Mf7leB0V5n+u2M9pTqVKdP2lP2n7z/r4dn+r2H/eU/afu6n/uM990T4peCfiZ+zv4f8H+LNYvdBvPDt55hkS0kk+0x/vP3f7v/V/u5P8AyHXXXf7Ungmf48f8JhDNcGO18K/2daQSQy+abvzJJPL/AO/f8f8A00r5Uorpp+IGYQp01Tp0/aU/Z/vP/TYVOGcHU/5eVP8A94e2+L/2kv8Ahbv7Nl/pXizVJL7xNDqcdxp/+h+V5sf7uP8A5Zx+X/y0uK8Soor5vN88xGZ1KdTE/wASnT9mengcDh8JTqU8MFFFFeCd4UUUUAFFFFABRRRQAUUUUAFFFFaAXNB/5DWn/wDXxH/6Mr2NPuD6V45oP/Ia0/8A6+I//Rlexp9wfSv6T8E/+Rdif+vjPheKv40PQ83+NP8AyWHxd/2G7z/0ZLXMV0/xp/5LD4u/7Dd5/wCjJa5iv58zb/fKn/XyofVZX/utM0PDmhXXi3XbTS9PSS4ur64jt4ET/lrJX6S/An4R2PwO+Gtlolr5ck8Q8y7nX/l5lP35Pxr52/4Jt/C3T7s6v4smzcXVjcfYoFeP/VfuxJJJ/wBdP3nl/hX1F8RfDdz4z8I6hp9jqk2kT30fl/a4k8ySLP8AcFf0T4T8LvCYCeczh7SpU/h+h+e8ZZn7fEfUv+XdM+Kf25Pj+Pij43/4R3TZDJoGgz4d0P8Ax8z/APLST/rnH/q/+/leD19gf8OxLU/d8X3Tf9w6Mf8AtSvnn9of4Nx/Ar4kyaBHfSajHFbx3G+SPy/9ZX5Xxxw/n9OvPNc0p+zVSp/z8PqOG8yy/wBnTwODqHC13X7MGg6P4j+O3hyx1tI5NPluPL2Tj93LJ5cnlx/9/PLrha6T4ReBE+JvxD0vQ21CPSjfyfu7ry/M8uTy/wB3+7/66fu6+Oyj2n9oU/Z0/afvKf7v/n4e5j/9zqfvPZnsH7TvjC0tNJ8SeGfE/h2DS9esb/zPD13aWCRxzWe/jfJ5nzx+X/5E7fu69G1ibSPhR8cvB/wys/DXhu60TVrGP7fJPaRvcyySeYgk/wDIdYPxF8P6t4t/Zk8Vr46tpP7S8F3pj0nVrr93Jfx740/1n8fmf6v8Y/8AlpHXU/Ejwtqfi39sDwD4s02wvrzw/Npsb/boYt9tER9ob55P+WeUePHrmv36nhqlPEVMTT/iVPZ/8u/3ns/afvKdQ/NY1F7P2dTb956e0t/wxgfC79nvRfEcvxf8Nx2tvm3vIo7B5I/Mksc+ZInlye0mw15n8dvCEfhb9m74beZp6WWqSSX9teOlvHHcyyRyeX+8kr06Pxn/AGPpPx41fS2/fafq1ncQOn/PSOT/AOORmsP9ufxDZ+Mvg98PdYs44vJ1Rrm4/d/8s3k8uR//AB8PXl53gcu/sKpVw1P95Tp1P/Th6GVYjEfXKftf4ftPx9mfMdFFFfz6fpAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUVoBc0H/kNaf/18R/8AoyvY0+4PpXjmg/8AIa0//r4j/wDRlexp9wfSv6T8E/8AkXYn/r4z4Xir+ND0PNvjR/yWHxf/ANhy8/8ARklczXTfGj/ksPi//sOXn/oySuZr+fM7/wB8qf8AXyofVZX/ALtTPTvgl+1T4i+Avh6fTtHttGuLe6uPtEkl1bvLJ5nl+X/yzkj/AOeddv8A8PLfHrf8w3wr/wCA8/8A8fr56or28DxtnGEw9PDYfEVKdOmc+J4dy6vU9rUpn0J/w8s8e/8AQN8K/wDgPP8A/H68h+Lnxd1L40eL5Na1RbOO8kt47bZaxyRR/u/+ukklczRXPmXF2aZlh/q2NqVKlM0wORYLCVPa4amFEM0kMsckcnlyRf6uSOiivnD1Da8RfEvxF4usUtdU17VdRt45PMRLq7kkji/7+VY0j4ueLNC0QafY+IdesrER+WIUu5I44q52ivQ/tLGe09r7Sp7Q5fquG9n7L2Zbs/EOoafpl1ZWuoXkdrfeX58ME8kccnl/89I/+WlEut3t1psGnzXtxJY2XmSQQvPJJbR+Z/rPLj/5Z1Uorm+tVP4ftDT6rSCiiiuQ2CiiigAooooAKKKKACiiigAooooAKKKKACiiitALmg/8hrT/APr4j/8ARlexp9wfSvHNB/5DWn/9fEf/AKMr2NPuD6V/Sfgn/wAi7E/9fGfC8Vfxoeh5v8af+Sw+Lv8AsN3n/oyWuYrp/jT/AMlh8Xf9hu8/9GS1zFfz5m3++VP+vlQ+qyv/AHWmFFFFeWegFFFFABRRRQAUUUVoAUVb0jw5fa4Lj7DY3t59mj8yTyIJJPKjqpVezqfxACiirekeHL3xFJJHY2N5eyWyeZJ5EEknlR0U6dSp+7pgVKKKKkAoq5pGhX2uSyR2Nje3kkcfmSRwW8knlR1T/wBQP3lV7Op/EAKKKKxAKKKKACiiigAooooAKKKK0AuaD/yGtP8A+viP/wBGV7Gn3B9K8c0H/kNaf/18R/8AoyvY0+4PpX9J+Cf/ACLsT/18Z8LxV/Gh6Hm/xp/5LD4u/wCw3ef+jJa5iun+NP8AyWHxd/2G7z/0ZLXMV/Pmbf75U/6+VD6rK/8AdaYUUUV5Z6AUUUUAFFFFaAFSWdnJd3UcEcfmXF1J5cccf/LWo69S/Yx8Hx+Nv2jtAt7iPzLexkkvJP8AtnH5kf8A5E8uvQyXBVMdmGHw9P8A5eVPZnLjsV7DD1MT/wA+z7S/Zx+Edr8D/hhY6cfs/wBs8vz7+bI+eX+P5/7kf3PoK+Cvj34w07x38Ydf1XR4Y47C+vPMg8uPy/N/5Z+Z/wBtP9Z/20r7h/bd8eSeBf2e9X8mTy7jVNmnRv8A9dD+8/8AIfmV+d9fsHi/icPhKeHyHDU/4f7w+M4HwtSvVqZjUCGCSa6jSOPzJJZPLjjj/wCWtfpF+zJ8GbX4JfDK0sdsYvpo/Pv5OMySf/a/ufhXxP8AsieFU8XftD+GIZo/Mt47uS9f/tnHJJ/6Mjjr7M/bL8cN4J/Z81+aFlWe/j+xx5/6aYR//Ie+ujwpweHweAxefYj/AJdmXGeKqV8bTy6n/wAvD4g/aM8X6f47+NniTWNLSNLC6uMx7P8Alr5cfl+Z/wBtPL8z/tpXEQw+dL5af6yivQv2VvCMfjX9onwvayLtt47z7Q597eP7QP8A0XX5BT9pm2af9fKn/pyofafu8Jgv+vdM+3P2XfgpD8EfhXa2Uix/2ldRi41Jx1kk/udf+Wf+r/Cvhv8AaY8a2fjv416/qmlrHHY3Vx5aSJ/y08uPy/M/7aeX5lfcH7XfjqTwJ+z/AOIJo2WO4uofscX/AG0kEf8A6ATX5y1+t+LWIw2EoYfIcNT/AHdP94fF8G4WpXqVMxxAUUUV+Dn6EFFFFABRRRQAUUUUAFFFFaAXNB/5DWn/APXxH/6Mr2NPuD6V45oP/Ia0/wD6+I//AEZXsafcH0r+k/BP/kXYn/r4z4Xir+ND0PN/jT/yWHxd/wBhu8/9GS1zFdP8af8AksPi7/sN3n/oyWuYr+fM2/3yp/18qH1WV/7rTCiiivLPQCiiigAooooAK9q/YC1ePTv2kdNjkHlrdW1xbIP+mnl+Z/7TrxWtPwj4uuvA3ivT9Xs3zNpk8cif9s697h/HU8DmmHxtX/l3UpnDmWGdfBVMMv8Al4fcP/BRDw9Nqn7Pc81vH5kdhfwXE/8A1z/1Z/8ARlfBdfpp4Y8T6H+0N8Lo7tUjvNL1mDy7iCQ8xZxvjk/6aR/zr4F/aE+Bl58B/HUmlzGWXT5D5mn3f/PWP/45H/y0r9Y8XclqYipTz7DfvKc6Z8ZwZmNOn7TBVP4h1n7BerR6T+0lpMdx+7/tC3uLaP8A66eX5n/tOvpT/goHoM2u/s8XVxHHv/s26juXH+x/qz/6Mr4V8IeI7rwj4n0/VLF/LuNMuI7iP/rpHJX6TeA/G2h/tEfC5LpI47nTdUge3uYJP+Wb/wDLSOSu/wAM8Th8yyPGZDUqfvKntP8AyoZcXUqlDMKeY/8ALs/MmvW/2GNSh039pnw/u/dxyfaI/M/25LeTy6xv2k/gPefAD4gS2LeZLpdyfM0+7/56x/8APP8A66R1xvhzxHN4Y8R2eqWsnl3FjcR3Fu//AE0jk8yvyDA+0yXPKf1mn+8p1KZ9pU9nj8vqfVv+XlM+8v28NBbWP2cNWeCPzPsM0dy6eoEg/wAa/P2v00+GvxC0f9oT4VwXiJHc2GqQeRdwP/yzcp+8ik/lXwj+0v8AAa6/Z/8AH8lq/mS6PfeZJpk//TP/AJ5/9dI6/VfF7KamL9nn2G/eU50z4/g3HKh7TLsR/EPOaKKK/BD9CCiiigAooooAKKKKACiiitALmg/8hrT/APr4j/8ARlexp9wfSvHNB/5DWn/9fEf/AKMr2NPuD6V/Sfgn/wAi7E/9fGfC8Vfxoeh5v8af+Sw+Lv8AsN3n/oyWuYrp/jT/AMlh8Xf9hu8/9GS1zFfz5m3++VP+vlQ+qyv/AHWmFFFFeWegFFFFABRRRQAUUUUAe1fsV/Hab4V/E+z0y6eQ6J4injt3jx/qriT93HJ/7Tr6l/bX+GEfxH+BOpyRqPteixvqEDnsU+//AOQ/Mr4E8CWc2seONHtYf+Pi6vLeOP8A66eZX6UfFLxPp+l/CzxBJJc28qRaZcSOnmJ+8HlvX9FeG+N+v8P4zLsb/Dpn5nxNT+r5jTxOH/iH5h17F+xl8dpvhR8UoLGebOh67cR208D/AOrikk/dxyf5/wCWdeO1oeHNOm1fxFYWtrxPdXkdvbn/AKaSSV+J5JjcRgc0p4nD/wASmffZlhaeLw1SnVP0B/bK+Gdv8Svgpq3yg3mkRyajaP8A883jT54/+2kZkH41+d1fqN4/8Q6fZfDzV5p7m3+zxWMksnz/APLPZ1r8ua/VfGilh/rmHxtP+JUpnyPAlSp7CrSmevfse/HSb4Q/FWzhnbOi67Olldp/yzik/wCWcn/bP/0XX1x+1/8AC2H4o/A/VoI4vMvNMgl1G0Yd5I05T/tpH5kf41+eOjabPrGtWdraf8fl1cR21v8A9dJK/ULxN4p0/SvBl/NJdW/lx2kkkn7xOPkr1/C3E/X8jxmXY3+H/wDLDz+KsP8AV8wp4jD/AMQ/LWiiiv57q/xD9MCiiisQCiiigAooooAKKKK0AuaD/wAhrT/+viP/ANGV7Gn3B9K8c0H/AJDWn/8AXxH/AOjK9jT7g+lf0n4J/wDIuxP/AF8Z8LxV/Gh6Hm/xp/5LD4u/7Dd5/wCjJa5iun+NP/JYfF3/AGG7z/0ZLXMV/Pmbf75U/wCvlQ+qyv8A3WmFFFFeWegFEUPnSxxx/wCsloorrpfxAPpCP/gmd4xWLnWtB3+vmz//ABFL/wAO0vFzH/kPaD/4/wD/ABuvqX9nvxz/AMLG+DXhvVZH86e4tES4f/pqn7uT/wAiIa7zoxNf1Tg/CvhuvQhiacKn7z/p4z8ZqcUZpCc6dSofD/8Aw7O8W/8AQe0H/wAif/G6P+HZ3i3/AKD2g/8AkT/43X3Dg+tGD610f8Qg4d/kqf8Agx/5k/62Zp/z9Ph7/h2Z4u/6D2g/+P8A/wAbo/4dmeLv+g9oP/j/AP8AG6+4cH1owfWq/wCIS5B/z7qf+DP+CP8A1szT/n4fD3/Dsvxb/wBB7Qf/ACJ/8bo/4dl+Lf8AoPaD/wCRP/jdfcOD60YPrS/4hDw//JU/8GB/rZmn/Pw+Hv8Ah2Z4u/6D2g/+P/8Axuj/AIdmeLv+g9oP/j//AMbr7hwfWjB9af8AxCXIP+fdT/wZ/wAEP9bM0/5+Hw9/w7M8Xf8AQe0H/wAf/wDjdH/Dszxd/wBB7Qf/AB//AON19w4PrRg+tH/EJcg/591P/Bn/AAQ/1szT/n4fD3/Ds7xb/wBB7Qf/ACJ/8bo/4dneLf8AoPaD/wCRP/jdfcOD60YPrU/8Qg4d/kqf+DH/AJi/1szT/n6fDg/4Jp+LiP8AkO6Fz/v/APxFeZ/Hn9mjWP2ezY/2peafeR6l5nl/ZZH8yPy/L8z76f8ATSv0ont1l289Pavhj/go144/4SD4xWul27+ZFo9gm8f88riT95/6L8uvjfELgXI8qyapicNT/ef8uz3OG8/zHFY1Yao/3Z89UUUV/Op+mBRRRQAUUUVoBc0H/kNaf/18R/8AoyvY0+4PpXjmg/8AIa0//r4j/wDRlexp9wfSv6T8E/8AkXYn/r4z4Xir+ND0PN/jT/yWHxd/2G7z/wBGS1zFdP8AGn/ksPi7/sN3n/oyWuYr+fM2/wB8qf8AXyofVZX/ALrTCiiivLPQCiiigD6x/wCCbHxZ8qXUvB97Nn/l9sPM7f8APSP/ANFyf9/K+v02sh7A1+UfhDxTfeC/Fdpqmnv5d3Y3EdxA9fpZ8Fvivp/xt+HtrrmmuNkv7ueM/fik/jjNf1F4Q8WQxeE/srEfHT/h/wDXs/KOMso9hiPrNP8Ah1DuKKKK/bj4oKKKKACiiigAooooAKKKKACiiigDnvFnimz8EeF7vVLybyrSwieSR/avzA8deLpvH/jbVNYuv9fqdxJcSf8ATL/pnX0F+3z+0Hb+Ib7/AIQ3SJvNh0+4MmpSoP3e9MFI/wDtmef+umK+Za/lXxe4ohjswp5bh/4dP/04fqnBuUVKGH+s1P4lQKKKK/GT7gKKKKACiiitALmg/wDIa0//AK+I/wD0ZXsafcH0rxzQf+Q1p/8A18R/+jK9jT7g+lf0n4J/8i7E/wDXxnwvFX8aHoeb/Gn/AJLD4u/7Dd5/6MlrmK6f40/8lh8Xf9hu8/8ARktcxX8+Zt/vlT/r5UPqsr/3WmFFFFeWegFFFFABXo37Nv7Q2o/s/wDizz41mvNIvj5d/YiT/W/9NI/+mkdec0V6mW5liMBiKeJw1T2dSmcuKwtPF0/q2J/hn6kfD/4k6P8AFLwrb6totxHdWtz74kif+44/gf2/+tXSvJlT8v4Zr8xPg58dfEXwQ177Vo91/o8sn7+1k/1dz/10j/8AalfcHwH/AGvfDPxntbe186PSdakAEljPJ1f/AKZv0k/Cv6q4N8RsHm0IUMR+7qf+nPQ/I884bxGDn7Sn+8p9z2aiiiv1I+ZCiiigAooooACcU0FRQRhKyvEPiSy8J6PNfahdW9lZ2yeZJPNJ5ccYrGpUhCHPMC6wZY12rzzxmvm/9r79ruH4ZWtx4e8Ozxya/LGYp50k/d6b/wDbP/RdcT+0p+3v/a0Mmh+B3kjj/wBXcapnMn/bv/8AHK+V57yS9upJpHkkklk8ySST/lrX4Lx94pUqVOpl2S1P3n26nY++4f4TqOf1jG/+C+oSyyTS+ZJ+9klooor+cz9OCiiiswCiiigAooorQC5oP/Ia0/8A6+I//Rlexp9wfSvHNB/5DWn/APXxH/6Mr2NPuD6V/Sfgn/yLsT/18Z8LxV/Gh6Hm/wAaf+Sw+Lv+w3ef+jJa5iun+NP/ACWHxd/2G7z/ANGS1zFfz5m3++VP+vlQ+qyv/daYUUUV5Z6AUUUUAFFFFABRDN5MvmR/u5KKK3/eAexfCz9uDxt8OI7eGa6j17T4v3fkX37yTy/+mdx/rP8A0ZX2t8EfijF8ZPhXpniRLM2v9peZmDz/ADPKKSyR/fHB/wBXX5j113hL48+LvA2kR6fo/iDUNOtI33oiP+7iFfqvBPiZi8txHs8znUqU/ZnxmecLYfF0/aYH93UP1ByP736UZH979K/NL/hrD4j/APQ2at/38jo/4aw+I/8A0Nmrf9/I6/R/+I3ZT/z6qHzX+omM/wCflP7z9Lcj+9+lGR/e/SvzS/4aw+I//Q2at/38jo/4aw+I/wD0Nmrf9/I6P+I3ZT/z6qB/qJjP+flP7z6e/a+/a21T4FeILXR9D06zuLi8tftH2md3cQ5eRP8AV/8AAK+QviJ8YvEvxXv45vEWqXupeXJ+7gk/d20f+5HH+7qn4u8c6x4/1P8AtLWtQuNRvPL+zxyTv5nlR/8APOsivxjizjrF5ziajVSp7P8A5d0z7fJ+H8PgMPTbp/vAooor4M+hCiiigAooooAKKKKACiiitALmg/8AIa0//r4j/wDRlexp9wfSvHNB/wCQ1p//AF8R/wDoyvY0+4PpX9J+Cf8AyLsT/wBfGfC8Vfxoeh5v8af+Sw+Lv+w3ef8AoyWuYrp/jT/yWHxd/wBhu8/9GS1zFfz5m3++VP8Ar5UPqsr/AN1phRRRXlnoBRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFaAXNB/wCQ1p//AF8R/wDoyvY0+4PpXjmg/wDIa0//AK+I/wD0ZXsafcH0r+k/BP8A5F2J/wCvjPheKv40PQ83+NPHxh8Xf9hu8/8ARklcxX6PfH3/AJFmb/cr5F1j/j/kr5zMPDGnLFVJuv8A+SL/ADNsHxJUjhacFBfeeN0V6xRXn/8AEL6f/P8A/wDJF/mX/rRW/kR5PRXrFFH/ABC+n/z/AP8AyRf5h/rRW/kR5PRXrFFH/EL6f/P/AP8AJF/mH+tFb+RHk9FesUUf8Qvp/wDP/wD8kX+Yf60Vv5EeT0V6xRR/xC+n/wA//wDyRf5h/rRW/kR5PRXrFFH/ABC+n/z/AP8AyRf5h/rRW/kR5PRXrFFH/EL6f/P/AP8AJF/mH+tFb+RHk9FesUUf8Qvp/wDP/wD8kX+Yf60Vv5EeT0V6xRR/xC+n/wA//wDyRf5h/rRW/kR5PRXrFFH/ABC+n/z/AP8AyRf5h/rRW/kR5PRXrFFH/EL6f/P/AP8AJF/mH+tFb+RHk9FesUUf8Qvp/wDP/wD8kX+Yf60Vv5EeT0V6xRR/xC+n/wA//wDyRf5h/rRW/kR5noP/ACGdP/6+I/8A0ZXsafcH0rIh/wBdXRp9wfSv0rw/4ZpYLBSpUpu1z57iLMva1YylBbH/2Q==",src2:k5,rowTitle:"A\xe7l\u0131\u011fa Son",row1:"Herkese yetecek kadar yiyecek varken, \xe7ocuklar dahil bir\xe7ok insan hala a\xe7l\u0131k \xe7ekiyor. Ama\xe7 2, hi\xe7\r\nkimsenin a\xe7l\u0131k \xe7ekmemesini sa\u011flamak i\xe7in, yetersiz tar\u0131m uygulamalar\u0131, yiyecek israf\u0131 ve \xe7evrenin\r\nbozulmas\u0131n\u0131 ele al\u0131yor. Bug\xfcn ve gelecekte, do\u011faya zarar vermeden g\u0131da \xfcretimini te\u015fvik ediyor."}),(0,u.jsx)(x5,{src1:R5,src2:W5,rowTitle:"Sa\u011fl\u0131k ve Kaliteli Ya\u015fam",row1:"\u0130nsanlar\u0131n sa\u011fl\u0131\u011f\u0131 yerinde olunca, toplumlar\u0131n refah\u0131 artar. Son y\u0131llarda HIV/AIDS, s\u0131tma ve di\u011fer\r\nhastal\u0131klar\u0131n etkilerini azaltmak i\xe7in \xe7ok \xe7aba g\xf6sterilmekle birlikte, ger\xe7ek ilerleme ancak ve\r\nancak kad\u0131nlar ve \xe7ocuklar dahil herkes yeterli sa\u011fl\u0131k hizmetine eri\u015febildi\u011finde ger\xe7ekle\u015fmi\u015f olur.\r\nAma\xe7 3, t\xfcm d\xfcnyada anne, bebek ve \xe7ocuk \xf6l\xfcmlerini azaltma, aile planlamas\u0131n\u0131 destekleme,\r\nmadde ba\u011f\u0131ml\u0131l\u0131\u011f\u0131n\u0131 \xf6nleme ve tedavi etme, trafik kazalar\u0131n\u0131n say\u0131s\u0131n\u0131 yar\u0131 yar\u0131ya azaltma gibi\r\ntemel hedefleri i\xe7eriyor. D\xfcnyada salg\u0131nlar\u0131 sona erdirme, herkes i\xe7in eri\u015filebilir a\u015f\u0131 ve zorunlu\r\nila\xe7lara eri\u015fim sa\u011flama, kimyasal ve biyolojik kirlilik ve insanlara bula\u015fma riskini ortadan\r\nkald\u0131rmaya acilen ihtiya\xe7 var. D\xfcnyan\u0131n en k\u0131r\u0131lgan b\xf6lgelerinde doktor ve hem\u015fire say\u0131s\u0131n\u0131\r\nart\u0131rmadan bu amaca ula\u015famay\u0131z."}),(0,u.jsx)(x5,{src1:M5,src2:V5,rowTitle:"Nitelikli E\u011fitim",row1:"E\u011fitime eri\u015fim insanlar\u0131n yoksulluktan kurtulmas\u0131n\u0131, \xe7evremizdeki d\xfcnyay\u0131 daha iyi anlamas\u0131n\u0131,\r\nk\u0131zlar dahil herkes i\xe7in daha iyi olanaklar sunulmas\u0131n\u0131 sa\u011flar. Ama\xe7 4, kim ve nerede olursa olsun\r\nt\xfcm insanlar\u0131n e\u011fitime eri\u015febilmesini sa\u011flamay\u0131 hedefliyor. Zor durumdaki \xe7ocuklar, engelliler ve\r\nyerli halklar dahil k\u0131r\u0131lgan insanlar\u0131n nitelikli e\u011fitim alabilmeleri gerekiyor. Ama\xe7 4, t\xfcm insanlar\u0131n\r\ninsan haklar\u0131n\u0131, bar\u0131\u015f\u0131 ve \u015fiddetsizli\u011fi destekleyecek bi\xe7imde yeti\u015ftirilmesinin \xf6nemini ve\r\nb\xf6ylelikle uyum i\xe7inde bir arada ya\u015fayabilece\u011fimizi vurguluyor."}),(0,u.jsx)(x5,{src1:F5,src2:N5,rowTitle:"Toplumsal Cinsiyet E\u015fitli\u011fi",row1:"Kad\u0131nlar ve k\u0131z \xe7ocuklar\u0131 hala ayr\u0131mc\u0131l\u0131k ve \u015fiddete u\u011fruyor; unutmay\u0131n ki d\xfcnya n\xfcfusunun yar\u0131s\u0131n\u0131\r onlar olu\u015fturuyor! Ama\xe7 5, e\u011fitim, sa\u011fl\u0131k ve insana yak\u0131\u015f\u0131r i\u015fler de dahil olmak \xfczere her bak\u0131mdan\r toplumsal cinsiyet e\u015fitli\u011fini hedefliyor, ki bunlar\u0131n t\xfcm\xfc topluma yarar sa\u011flar. D\xfcnyan\u0131n her\r yerinde kad\u0131nlar ve k\u0131z \xe7ocuklar\u0131na y\xf6nelik, zorla evlendirme ve kad\u0131n s\xfcnneti dahil her t\xfcrl\xfc\r ayr\u0131mc\u0131l\u0131k ve \u015fiddetin ortadan kald\u0131r\u0131lmas\u0131 bu amaca ula\u015fman\u0131n temelidir. Ayr\u0131ca, kad\u0131nlar ve k\u0131z\r \xe7ocuklar\u0131n\u0131n cinsellik ve \xfcreme ile ilgili insan haklar\u0131na tam eri\u015fime sahip olmalar\u0131n\u0131 sa\u011flamam\u0131z\r gerekiyor. Kad\u0131nlar, m\xfclke sahip olabilmeli, mali hizmetler ve yeni teknolojilere eri\u015febilmeli,\r toplumlar\u0131nda siyasi, ekonomik ve kamusal ya\u015fama t\xfcm d\xfczeylerde kat\u0131labilmelidir. Y\xf6netici,\r i\u015fletme y\xf6neticisi, meclis \xfcyesi kad\u0131n say\u0131s\u0131n\u0131n art\u0131r\u0131lmas\u0131 da bu amac\u0131n temel hedeflerindendir."}),(0,u.jsx)(x5,{src1:H5,src2:T5,rowTitle:"Temiz Su ve Sanitazyon",row1:"D\xfcnyada milyarlarca insan\u0131n, \xe7o\u011fumuzun kan\u0131ksad\u0131\u011f\u0131 bir insan hakk\u0131 olan, temiz su ve tuvaletlere\r eri\u015fimi bulunmamaktad\u0131r. Su ya\u015fam\u0131n temeli ve hi\xe7bir \u015fekilde kirletilmemeli, herkes taraf\u0131ndan\r geri d\xf6n\xfc\u015ft\xfcr\xfclmeli ve yeniden kullan\u0131lmal\u0131d\u0131r."}),(0,u.jsx)(x5,{src1:X5,src2:Y5,rowTitle:"Eri\u015filebilir ve Temiz Enerji",row1:"Pi\u015firme ve \u0131s\u0131nma i\xe7in hala odun ve odun k\xf6m\xfcr\xfc kullanan milyarlarca insana kar\u015f\u0131lanabilir\r ve g\xfcvenilir enerji sa\u011flamal\u0131y\u0131z. Ama\xe7 7 ayn\u0131 zamanda, iklim de\u011fi\u015fikli\u011fi ile m\xfccadeleye\r katk\u0131da bulunmak i\xe7in temiz ve yenilenebilir enerjiye ihtiya\xe7 duydu\u011fumuzu vurguluyor.\r Enerji modern, ucuz, g\xfcvenilir ve s\xfcrd\xfcr\xfclebilir bi\xe7imde \xfcretilmeli. M\xfcmk\xfcn oldu\u011funca\r temiz olmal\u0131 ve g\xfcne\u015f ve r\xfczgar gibi kirlenme yaratmayan kaynaklardan elde edilmeli. Bu\r ama\xe7, geli\u015fmekte olan \xfclkelere modern enerji bi\xe7imleri arz\u0131n\u0131 desteklemeyi ve art\u0131rmay\u0131,\r t\xfcm \xfclkelerin bir araya gelerek, t\xfcm insanlara ve Yerk\xfcremize yarar sa\u011flayacak bi\xe7imde\r temiz enerji ara\u015ft\u0131rmalar\u0131n\u0131 desteklemesi ve teknolojiyi geli\u015ftirmesini hedefliyor."}),(0,u.jsx)(x5,{src1:E5,src2:z5,rowTitle:"\u0130nsana Yak\u0131\u015f\u0131r \u0130\u015f ve Ekonomik B\xfcy\xfcme",row1:"Bir yanda k\xfcresel i\u015fsizlik artarken, daha \xe7ok i\u015f yaratman\u0131n yollar\u0131n\u0131 bulmam\u0131z gerekiyor.\r Ama\xe7 8, ekonomiyi canland\u0131ran ve hem kad\u0131nlar hem de erkeklere e\u015fit f\u0131rsatlar sa\u011flayan,\r bir yanda da \xe7evreyi koruyan daha \xe7ok i\u015fin yarat\u0131lmas\u0131n\u0131 hedefliyor. Kad\u0131nlar, erkekler,\r gen\xe7ler, engelliler dahil herkesin i\u015f sahibi olmas\u0131n\u0131 ve e\u015fit de\u011ferde i\u015f i\xe7in e\u015fit \xfccret almas\u0131n\u0131\r sa\u011flamay\u0131 ama\xe7l\u0131yor."}),(0,u.jsx)(x5,{src1:L5,src2:K5,rowTitle:"Sanayi, Yenilik\xe7ilik ve Altyap\u0131",row1:"Basit ifadeyle, Ama\xe7 9, toplumlar\u0131n b\xfcy\xfcmesi i\xe7in, bir yanda \xe7evreyi korurken di\u011fer yanda\r herkese e\u015fit f\u0131rsatlar sa\u011flayan sekt\xf6rlerin te\u015fvik edilmesi gerekti\u011fini s\xf6yl\xfcyor. Bu\r sekt\xf6rlerin ayn\u0131 zamanda g\xfcvenilir ula\u015f\u0131m ve teknolojik yenilik\xe7ilik gibi dayan\u0131kl\u0131 altyap\u0131lar\r ile de desteklenmesini ama\xe7l\u0131yor."}),(0,u.jsx)(x5,{src1:_5,src2:P5,rowTitle:"E\u015fitsizliklerin Azalt\u0131lmas\u0131",row1:"Toplumda ger\xe7ek ilerleme sa\u011flanmas\u0131 i\xe7in, insanlar\u0131n birey olarak geli\u015fmesini\r sa\u011flayacak f\u0131rsatlara herkesin eri\u015febilmesi gerekiyor. Ancak bir\xe7ok yerde insanlar\r toplumsal cinsiyet, engellilik, etnik veya \u0131rksal grup veya ge\xe7mi\u015fi nedeniyle\r ayr\u0131mc\u0131l\u0131kla kar\u015f\u0131 kar\u015f\u0131ya kal\u0131yor. Ama\xe7 10 herkesin sa\u011fl\u0131kl\u0131 ve mutlu bir ya\u015fam\r s\xfcrme olana\u011f\u0131na sahip olmas\u0131n\u0131 hedefliyor."}),(0,u.jsx)(x5,{src1:D5,src2:O5,rowTitle:"S\xfcrd\xfcr\xfclebilir \u015eehirler ve Topluluklar",row1:"\u015eehirlerimiz ve k\xf6ylerimizin temiz ve g\xfcvenli olmas\u0131, yeterli bar\u0131nma ve elektriksu\r gibi temel hizmetlere sahip olmas\u0131 gerekiyor. Ayn\u0131 zamanda, herkesin keyifle\r kullanabilece\u011fi temiz ve verimli ula\u015f\u0131m sistemleri ve ye\u015fil alanlar olmas\u0131 gerek.\r \u0130nsanlar\u0131n afetler ve iklim de\u011fi\u015fikli\u011fi etkilerine kar\u015f\u0131 korunmas\u0131 gerek. \xd6nemli\r k\xfclt\xfcrel ve do\u011fal alanlar\u0131n herkes i\xe7in korunmas\u0131 gerek. Hava kalitesi ve at\u0131k\r y\xf6netimini iyile\u015ftirmemiz, bir yandan da geli\u015fmekte olan \xfclkelerde yerli\r malzeme ile daha iyi binalar yap\u0131lmas\u0131n\u0131 desteklememiz gerekiyor."}),(0,u.jsx)(x5,{src1:U5,src2:j5,rowTitle:"Sorumlu \xdcretim ve T\xfcketim",row1:"Ama\xe7 12, kulland\u0131\u011f\u0131m\u0131z \u015feyler, yaratt\u0131\u011f\u0131m\u0131z at\u0131klar ve bunlar\u0131n Yerk\xfcremizi nas\u0131l\r etkiledi\u011fi hakk\u0131nda iki kez d\xfc\u015f\xfcnmemizi istemektedir. Geri d\xf6n\xfc\u015f\xfcm gibi daha\r s\xfcrd\xfcr\xfclebilir eylemlere do\u011fru davran\u0131\u015flar\u0131m\u0131z\u0131 de\u011fi\u015ftirmek, bireyler, i\u015fletmeler,\r h\xfck\xfcmetler dahil herkes katk\u0131da bulununca ger\xe7ekten fark yarat\u0131r. Bu amaca\r ula\u015fmak i\xe7in hepimizin yapabilece\u011fi bir\xe7ok \u015fey var. Ama\xe7 12, d\xfcnyam\u0131zda k\xfc\xe7\xfck\r bir az\u0131nl\u0131k i\xe7in de\u011fil herkes i\xe7in ya\u015fam kalitesini y\xfckseltmeyi hedefliyor."}),(0,u.jsx)(x5,{src1:J5,src2:Q5,rowTitle:"\u0130klim Eylemi",row1:"\u0130klim s\xfcrekli de\u011fi\u015fim halindedir, ancak son 200 y\u0131lda, insan faaliyetleri nedeniyle bu\r de\u011fi\u015fiklikler daha fazla olmaktad\u0131r. \u0130klim de\u011fi\u015fikli\u011fi art\u0131k t\xfcm \xfclkeleri etkiliyor, en \xe7ok\r da en yoksul ve k\u0131r\u0131lgan insanlar etkileniyor. Ama\xe7 13, iklim de\u011fi\u015fikli\u011fi ile m\xfccadele\r i\xe7in yenilenebilir enerji ve temiz teknolojiler gibi \xe7\xf6z\xfcmler bulmay\u0131 hedefliyor.\r Geli\u015fmekte olan \xfclkeler ve k\xfc\xe7\xfck ada devletlerinin \xf6zellikle kad\u0131nlar, gen\xe7ler, yerel\r toplumlar ve dezavantajl\u0131 kesimlere odaklanarak \xe7evre de\u011fi\u015fimi sonu\xe7lar\u0131yla ba\u015fa\r \xe7\u0131kabilmeleri i\xe7in deste\u011fe ihtiya\xe7lar\u0131 var."}),(0,u.jsx)(x5,{src1:q5,src2:$5,rowTitle:"Sudaki Ya\u015fam",row1:"Ama\xe7 14 okyanuslar, denizler ve i\xe7inde ya\u015fayan t\xfcrlerin t\xfcm\xfcn\xfc korumay\u0131 hedefliyor.\r \xc7\xfcnk\xfc okyanuslar yiyecek, ila\xe7, biyo-yak\u0131t ve milyonlarca insana i\u015f sa\u011fl\u0131yor.\r Okyanuslara iyi bakarsak iklim de\u011fi\u015fikli\u011fiyle ba\u015f etmemize katk\u0131s\u0131 olacak. Bizim\r sa\u011fl\u0131kl\u0131 okyanuslara ihtiyac\u0131m\u0131z var, okyanuslar\u0131n da bizim korumam\u0131za! \xd6zellikle bitki\r ve hayvan ya\u015fam\u0131na b\xfcy\xfck zarar veren ve t\xfcrlerin neslini tehlikeye sokan plastik \xe7\xf6p\r y\u0131\u011f\u0131nlar\u0131n\u0131 azaltmak i\xe7in hep birlikte \xe7al\u0131\u015fmak zorunday\u0131z."}),(0,u.jsx)(x5,{src1:e9,src2:t9,rowTitle:"Karasal Ya\u015fam",row1:"Hepimiz k\xfcresel ekosistemin bir par\xe7as\u0131y\u0131z. Ama\xe7 15, kendi k\xfcresel evimizi tehdit\r eden faaliyetlerimizi durdurmay\u0131 hedefliyor. Durdurulmas\u0131 gerekenler aras\u0131nda\r ormanlar\u0131n yok edilmesi, arazi bozunumu, hayvan ve bitki t\xfcrlerinin kayb\u0131 var. Do\u011fa,\r insanlar\u0131n ya\u015famlar\u0131na o kadar b\xfcy\xfck katk\u0131da bulunuyor ki do\u011fay\u0131 korumak\r zorunday\u0131z. Bu ama\xe7, korunan bitki ve hayvan t\xfcrlerinin ka\xe7ak avlanmas\u0131 ve\r ka\xe7\u0131r\u0131lmas\u0131na son vermek i\xe7in acil \xf6nlemler almay\u0131, do\u011fay\u0131 korumak i\xe7in\r harcamalar\u0131m\u0131z\u0131 art\u0131rmay\u0131 ve geli\u015fmekte olan \xfclkelerin de bunu yapabilmesine yard\u0131m\r etmeyi gerektiriyor."}),(0,u.jsx)(x5,{src1:n9,src2:i9,rowTitle:"Bar\u0131\u015f, Adalet ve G\xfc\xe7l\xfc Kurumlar",row1:"Ama\xe7 16, herkesin adalete eri\u015febilece\u011fi, korku\r duymadan hayat\u0131n\u0131 s\xfcrd\xfcrece\u011fi bar\u0131\u015f\xe7\u0131l toplumlarda\r ya\u015famas\u0131n\u0131 sa\u011flayacak yollar bulmay\u0131\r hedeflemektedir. D\xfcnyan\u0131n her yerinde \xe7ocuklar,\r gen\xe7 kad\u0131nlar ve erkeklere y\xf6nelik her t\xfcrl\xfc taciz,\r istismar, ka\xe7\u0131rma, \u015fiddet ve i\u015fkenceye son vermeyi\r hedefliyor. T\xfcm insanlar kendi \xfclkelerindeki kamusal\r ya\u015fama kat\u0131lmaya te\u015fvik ediliyor."}),(0,u.jsx)(x5,{src1:r9,src2:a9,rowTitle:"Ama\xe7lar \u0130\xe7in Ortal\u0131klar",row1:"Ama\xe7lara ula\u015fmak i\xe7in h\xfck\xfcmetler, \xf6zel sekt\xf6r, sivil\r toplum ve bizim gibi insanlar dahil herkesin s\xfcrece\r kat\u0131lmas\u0131 gerekmektedir. Geli\u015fmi\u015f \xfclkeler, geli\u015fmekte\r olan \xfclkelere daha \xe7ok mali, bilimsel ve teknolojik\r yard\u0131m sa\u011flamal\u0131, \xfcr\xfcnlerini uluslararas\u0131 pazarlara\r daha \xe7ok satabilmelerine ve yerel kapasitelerini\r g\xfc\xe7lendirmelerine destek vermelidir."})]})})},s9=function(){var e=(0,t.useContext)(g).state.darkMode;return(0,u.jsxs)(u.Fragment,{children:[" ",(0,u.jsx)(Sc,{}),(0,u.jsx)("div",{className:"sdg",id:"sdg",children:(0,u.jsxs)("div",{className:"awesome",children:[(0,u.jsx)("span",{style:{color:e?"white":""},children:"S\xfcrd\xfcr\xfclebilir Kalk\u0131nma"}),(0,u.jsx)("span",{children:" Ama\xe7lar\u0131"})]})}),(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{style:{display:"flex",position:"absolute",zIndex:"-1"},children:[(0,u.jsx)("div",{className:"blur",style:{background:"#FFAAFB",top:"0rem",width:"21rem",height:"11rem",left:"18rem"}}),(0,u.jsx)("div",{className:"blur",style:{background:"#F6FFBF",top:"20rem",width:"25rem",height:"11rem",left:"58rem"}}),(0,u.jsx)("div",{className:"blur",style:{background:"#AAFFDF",top:"40rem",width:"25rem",height:"18rem",left:"8rem"}}),(0,u.jsx)("div",{className:"blur",style:{background:"#C1F5FF",top:"60rem",width:"25rem",height:"11rem",left:"58rem"}}),(0,u.jsx)("div",{className:"blur",style:{background:"#ffccdd",top:"80rem",width:"25rem",height:"18rem",left:"8rem"}}),(0,u.jsx)("div",{className:"blur",style:{background:"#F6FFBF",top:"100rem",width:"25rem",height:"11rem",left:"58rem"}}),(0,u.jsx)("div",{className:"blur",style:{background:"rgb(238 210 255)",top:"120rem",width:"25rem",height:"18rem",left:"8rem"}})]}),(0,u.jsx)("div",{style:{backgroundImage:"url(".concat(xZ,")"),backgroundRepeat:"no-repeat",backgroundSize:"cover",width:"22rem",height:"22rem",display:"flex",justifyContent:"space-between",alignItems:"center",marginLeft:"58rem",marginTop:"-18rem"}}),(0,u.jsx)(o9,{})]})]})};var l9=function(e){var t=e.onClick,n=e.nameFront,i=e.nameBack,r=e.icon;return(0,u.jsxs)("div",{className:"card",onClick:t,children:[(0,u.jsxs)("div",{className:"card-back",children:[" ",i]}),(0,u.jsx)("div",{className:"card-front",children:(0,u.jsx)("img",{src:r,alt:n,style:{width:"100%",height:"100%"}})})]})};function c9(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var u9=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return i=t,void((n=e).classList?n.classList.remove(i):"string"===typeof n.className?n.className=c9(n.className,i):n.setAttribute("class",c9(n.className&&n.className.baseVal||"",i)));var n,i}))},g9=function(e){function n(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,n){var i=t.resolveArguments(e,n),r=i[0],a=i[1];t.removeClasses(r,"exit"),t.addClass(r,a?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var i=t.resolveArguments(e,n),r=i[0],a=i[1]?"appear":"enter";t.addClass(r,a,"active"),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var i=t.resolveArguments(e,n),r=i[0],a=i[1]?"appear":"enter";t.removeClasses(r,a),t.addClass(r,a,"done"),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"appear"),t.removeClasses(n,"enter"),t.addClass(n,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var n=t.resolveArguments(e)[0];t.addClass(n,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"exit"),t.addClass(n,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,n){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,n]},t.getClassNames=function(e){var n=t.props.classNames,i="string"===typeof n,r=i?""+(i&&n?n+"-":"")+e:n[e];return{baseClassName:r,activeClassName:i?r+"-active":n[e+"Active"],doneClassName:i?r+"-done":n[e+"Done"]}},t}I(n,e);var i=n.prototype;return i.addClass=function(e,t,n){var i=this.getClassNames(t)[n+"ClassName"],r=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===n&&r&&(i+=" "+r),"active"===n&&e&&Da(e),i&&(this.appliedClasses[t][n]=i,function(e,t){e&&t&&t.split(" ").forEach((function(t){return i=t,void((n=e).classList?n.classList.add(i):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(n,i)||("string"===typeof n.className?n.className=n.className+" "+i:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+i)));var n,i}))}(e,i))},i.removeClasses=function(e,t){var n=this.appliedClasses[t],i=n.base,r=n.active,a=n.done;this.appliedClasses[t]={},i&&u9(e,i),r&&u9(e,r),a&&u9(e,a)},i.render=function(){var e=this.props,n=(e.classNames,U(e,["classNames"]));return t.createElement(eo,v({},n,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},n}(t.Component);g9.defaultProps={classNames:""},g9.propTypes={};var d9=g9;var h9=function(e){var n=e.nameFront,i=e.nameBack,r=e.icon,a=c((0,t.useState)(!0),2),o=a[0],s=a[1];return(0,u.jsx)("div",{className:"flippable-card-container",children:(0,u.jsx)(d9,{in:o,timeout:300,classNames:"flip",children:(0,u.jsx)(l9,{onClick:function(){s((function(e){return!e}))},nameFront:n,nameBack:i,icon:r})})})},f9=[{nameFront:"c1",nameBack:"18 ya\u015f\u0131n alt\u0131ndaki herkes S\xf6zle\u015fme\u2019de belirtilen t\xfcm haklara sahiptir.",icon:n.p+"static/media/c1.c1f7d25e4bf3978324d0.png"},{nameFront:"c2",nameBack:"S\xf6zle\u015fme; etnik k\xf6keni, toplumsal cinsiyeti, dini, sakatl\u0131k durumu, d\xfc\u015f\xfcnce veya s\xf6ylemleri, ailevi durumlar\u0131 her ne olursa olsun t\xfcm \xe7ocuklar i\xe7in ge\xe7erlidir.",icon:n.p+"static/media/c2.616073abc631247c39a4.png"},{nameFront:"c3",nameBack:"\xc7ocuklara y\xf6nelik t\xfcm eylemlerde \xe7ocu\u011fun y\xfcksek yarar\u0131 birinci \xf6ncelik olmal\u0131d\u0131r.",icon:n.p+"static/media/c3.fb29d96076ae20bf894a.png"},{nameFront:"c4",nameBack:"Devletler t\xfcm \xe7ocuklar\u0131n haklar\u0131n\u0131 korumak i\xe7in m\xfcmk\xfcn olan azami \xe7abay\u0131 g\xf6stermelidir.",icon:n.p+"static/media/c4.edc0f62d61a5af86cb04.png"},{nameFront:"c5",nameBack:"Devletler; \xe7ocu\u011fun sahip oldu\u011fu haklar\u0131 do\u011fru \u015fekilde kullanabilmesini sa\u011flamak i\xe7in, ana-baban\u0131n, \xe7ocu\u011fa yol g\xf6sterme ve onu y\xf6nlendirme konusundaki hak ve \xf6devlerine sayg\u0131 g\xf6sterirler.",icon:n.p+"static/media/c5.fa873d5fe21a78eda43b.png"},{nameFront:"c6",nameBack:"Her \xe7ocuk ya\u015fama hakk\u0131na sahiptir. Devletler, \xe7ocu\u011fun hayatta kalmas\u0131 ve geli\u015fmesi i\xe7in m\xfcmk\xfcn olan azami \xe7abay\u0131 g\xf6sterirler.",icon:n.p+"static/media/c6.c31bd50502f871766c86.png"},{nameFront:"c7",nameBack:"Her \xe7ocuk bir isim ve vatanda\u015fl\u0131k ile n\xfcfus k\xfct\xfc\u011f\xfcne kaydedilme ve m\xfcmk\xfcn oldu\u011fu \xf6l\xe7\xfcde ana\u2013babas\u0131 taraf\u0131ndan bak\u0131lma hakk\u0131na sahiptir.",icon:n.p+"static/media/c7.7d16b36244fa1bb8b1c8.png"},{nameFront:"c8",nameBack:"Devletler, \xe7ocu\u011fun kimli\u011fini korumal\u0131 ve ona sayg\u0131 g\xf6stermeli; ismi, uyru\u011fu ve aile ba\u011flar\u0131n\u0131n hukuka ayk\u0131r\u0131 \u015fekilde de\u011fi\u015ftirilmesini engellemelidir. \xc7ocu\u011fun, kimli\u011finin unsurlar\u0131n\u0131n baz\u0131lar\u0131ndan hukuka ayk\u0131r\u0131 olarak yoksun b\u0131rak\u0131lmas\u0131 halinde Devletler, \xe7ocu\u011fun kimli\u011fine yeniden kavu\u015fturulup gerekli yard\u0131m ve koruman\u0131n sa\u011flanmas\u0131 amac\u0131yla ivedilikle harekete ge\xe7erler.",icon:n.p+"static/media/c8.d48141ddb6a4d370220b.png"},{nameFront:"c9",nameBack:"\xc7ocu\u011fun y\xfcksek yarar\u0131na olan haller (\xf6rne\u011fin, istismar ya da ihm\xe2l) d\u0131\u015f\u0131nda \xe7ocuk anababas\u0131ndan ayr\u0131lmamal\u0131d\u0131r. Ana-baban\u0131n sorumluluklar\u0131na ili\u015fkin kararlarda \xe7ocu\u011fun g\xf6r\xfc\u015f\xfc sorulmal\u0131d\u0131r. Zarar g\xf6rece\u011fi haller d\u0131\u015f\u0131nda, \xe7ocuk her iki ebeveyni ile ki\u015fisel ili\u015fkisini s\xfcrd\xfcrme hakk\u0131na sahiptir.",icon:n.p+"static/media/c9.5a4a395800b2c3bf3cc3.png"},{nameFront:"c10",nameBack:"\xc7ocuk veya ana\u2013babas\u0131 taraf\u0131ndan, ailenin birle\u015fmesi amac\u0131yla yap\u0131lan \xfclkeye girme ba\u015fvurusu, kendisine ba\u015fvuru yap\u0131lan Taraf Devlet\xe7e olumlu, insani ve ivedi bir tutumla ele al\u0131n\u0131r. Ana-babas\u0131 ayr\u0131 devletlerde oturan bir \xe7ocuk hem ana hem de babas\u0131 ile do\u011frudan g\xf6r\xfc\u015fme hakk\u0131na sahiptir.",icon:n.p+"static/media/c10.2c4058480f9e6ae43816.png"},{nameFront:"c11",nameBack:"Devletler, \xe7ocuklar\u0131n yasad\u0131\u015f\u0131 yollarla \xfclke d\u0131\u015f\u0131na \xe7\u0131kar\u0131lmas\u0131 ve geri d\xf6nmelerinin engellenmesi halleriyle m\xfccadele i\xe7in \xf6nlemler al\u0131rlar.",icon:n.p+"static/media/c11.c14a9e174a0657b38917.png"},{nameFront:"c12",nameBack:"Her \xe7ocuk kendisini ilgilendiren her konuda g\xf6r\xfc\u015flerini serbest\xe7e ifade etme ve g\xf6r\xfc\u015flerinin dikkate al\u0131nmas\u0131 hakk\u0131na sahiptir.",icon:n.p+"static/media/c12.32477c02d674a345f899.png"},{nameFront:"c13",nameBack:"Her \xe7ocuk, g\xf6r\xfc\u015flerini \xf6zg\xfcrce ifade etme ve hukuka uygun oldu\u011fu s\xfcrece her t\xfcrl\xfc bilgiyi ara\u015ft\u0131rma ve elde etme hakk\u0131na sahiptir.",icon:n.p+"static/media/c13.35b30a90c0b0de7d01e2.png"},{nameFront:"c14",nameBack:"Her \xe7ocuk d\xfc\u015f\xfcnce ve inan\xe7 \xf6zg\xfcrl\xfc\u011f\xfcne ve ba\u015fkalar\u0131n\u0131n haklar\u0131n\u0131 engellemedi\u011fi s\xfcrece dini vecibelerini yerine getirme hakk\u0131na sahiptir. Devletler, ana\u2013baban\u0131n bu haklar\u0131n kullan\u0131lmas\u0131 konusunda \xe7ocu\u011fa yol g\xf6sterme hakk\u0131na sayg\u0131 g\xf6sterirler.",icon:n.p+"static/media/c14.873eae8ecefdebc88b9b.png"},{nameFront:"c15",nameBack:"Her \xe7ocuk- ba\u015fkalar\u0131n\u0131n haklar\u0131n\u0131 engellemedi\u011fi s\xfcrece- di\u011fer \xe7ocuk ve gen\xe7lerle bir araya gelme, grup ve kurulu\u015flara kat\u0131lma hakk\u0131na sahiptir.",icon:n.p+"static/media/c15.15383e929627b72a2acb.png"},{nameFront:"c16",nameBack:"Her \xe7ocuk mahremiyet hakk\u0131na sahiptir. Hukuk d\xfczeni \xe7ocu\u011fun \xf6zel, aile ve ev ya\u015fant\u0131s\u0131n\u0131 g\xfcvence alt\u0131na al\u0131r.",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAVUAAAHGCAYAAADE/hjDAAAACXBIWXMAABYlAAAWJQFJUiTwAAAGkmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDYgNzkuZGFiYWNiYiwgMjAyMS8wNC8xNC0wMDozOTo0NCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIyLjQgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMy0wNC0xNlQxNjo0MTowMSswMzowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjMtMDQtMTZUMTY6NDE6NDMrMDM6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjMtMDQtMTZUMTY6NDE6NDMrMDM6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OWZhOThlYzYtZGYwZi1jMDQ1LThkMTItOGM2YTNjZjZmMTM3IiB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6Y2U4YWQ0NTAtY2Q3Yi01ZTRkLWFkYWYtODE3YzU1MTM3MDM2IiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6YWMyYWUxOTYtZDIyYy1lZTRkLWE3ZGUtMGFkZGNmZTM3MmEzIj4gPHBob3Rvc2hvcDpUZXh0TGF5ZXJzPiA8cmRmOkJhZz4gPHJkZjpsaSBwaG90b3Nob3A6TGF5ZXJOYW1lPSJNYWhyZW3EsHlldCBoYWtrxLEiIHBob3Rvc2hvcDpMYXllclRleHQ9Ik1haHJlbcSweWV0IGhha2vEsSIvPiA8L3JkZjpCYWc+IDwvcGhvdG9zaG9wOlRleHRMYXllcnM+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6YWMyYWUxOTYtZDIyYy1lZTRkLWE3ZGUtMGFkZGNmZTM3MmEzIiBzdEV2dDp3aGVuPSIyMDIzLTA0LTE2VDE2OjQxOjAxKzAzOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjIuNCAoV2luZG93cykiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjlmYTk4ZWM2LWRmMGYtYzA0NS04ZDEyLThjNmEzY2Y2ZjEzNyIgc3RFdnQ6d2hlbj0iMjAyMy0wNC0xNlQxNjo0MTo0MyswMzowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIyLjQgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Phe2gpMAAB9DSURBVHja7d1/rFxVYtjxmz+8f/ArRKlRgGWL2tpNMH+4EHaxqcBNsc3iKLGlxba0gqRg0i6KIuy08EdCMND+AVXtVZUSVTYkWpQIm0g4VcximyaGZm0XArEqHl3Z/xB2gQSa1LssSIU/mnfeZt7Ou74zc+/MnTvn3Pv5SNYuxrw3njfznXPvPfecHzt41ZeOZwDU4fd+bD6q/9/zAFCLR0QVQFQBRBVAVAEQVQBRBRBVAEQVQFQBRBVAVAEQVQBRBRBVAEQVQFQBRBVAVAEQVQBRBRBVAEQVQFQBRBVAVAEQVQBRBRBVAEQVQFQBRBUAUQUQVaAml65amS275KJSf/bc3Nnss+9/NNH3u/Dzly98z0uvWZEtX3P9wD8Xvs+5uTPZB6feyD48+YaoAvG7cuMt2dp9j5f+88e33Td24K6+Y9P8r5/Plt/4z8b679/+w8PZ288dTiGwogpdHaGuO/hktuzii0r/N+NENXyfG/7TQwsj0zp8eOovstd2PZp9/N33RRVIN6jjRDWMhG/Y81Dl7zPKZx/9IDu+9b6F0wOiCszU8jXXZTftf2Ks0FWJavg+6w48ObW/R8RhFVXoihX3bM9WP3z/2P992aguu+TibNPJ52sfoeZ98u5fZUc33jnxxTNRBSoJkfvi/GH4FRtunujrlI1qGAlP+r3Kemvv/mxu/peoAo2o87xmmahO+7C/6DTAoVW3iiowXWE+6A17fmvsKUzjRjUE/OqvbCr19c4+fSB798jLC18zjKYvmw/yNTt3VJ4pcOLeBxe+jqgCUxudVpl/WldUQxg3v3ms1Nc6/cjXs7NPPVv4NTYceSa74MqfSvUUgKhC26yaH+2FEV/TUQ0T/MOc1EkP2ateUAtzV49v/ZqoAu2KatlD//eOvpJ9a8cDA/991fOyogq0MqqbTh4qddg+6nBdVIHORzVcGLv9xPOlvs6oC0vhvOqlq8pfrPrs+z+I6SYAUYUuRjWMFquGd1hUq4wuJ1mYJQGiCl2KarhI9NquxxZGine8c6q2qFYZHYsq0Iqo5ld4ElVRBcaIahidnt69d2E90n51RnXdwd8pfaPBC2u3xLx0n6gCg6MaFnc+vfvrhYuOzCqqz33hxjY//aIKbYxq2Kpkbu++oYfZoiqqQAlhSlKZ5fDqjGqVr1UU1f5pVJfdeF32aZgm9dYPp0nZowpIQgxRDVOxVt6zfeRSgeEurDNPPWuPKkBUi6IaRqard99fekWrnjCDIdziGtnC1KIKzC6qx75818JC1lVWouoXVvwPYbVHFSCq2Q+neE26aPa5t84u7FEV4YhVVEFUJ4tqlfv+6zRqtStRBZKMatNbqJQdPYsqIKrpj1ZFFUR1dlENV/M/PPl6tuzHL86W33hd5f2pgshuexVVENXZRLVoXdXwtcLMgCoXsl779cfOW9dAVIFORTWsSRCWICxSdq+rSE8BiCqIavNRPXTt+qHTocpuzRKE6VXHbrtTVIFuRrXMnlJlNxHsiWiRFlEFUW02qqM2/guq7rMV0cUqUQVRjS+qVb9mRPNVRRVEtdmolrlaL6qAqNYYwKpfc9S216IKiGrNpxREFUgiqlUXVCl7qF7l8Ykq0JqoVv1aZaJ66aqV2fpvfkNUAVGdxeG/c6qAqNYYVVf/gVZFtcoW1aZUAaJaY1TLnP+suqjKqLUERBVIKqpVbisdtkLVOF8vcO8/0KqoVhlZht1QD6/ZPPTPVBn5llmgRVSBpKJa51zVZZdcnG1+81jpr3X26QPZ6d17RRVoT1SD9S8+U3o7lGGjy6rL/kU0nUpUQVTri+qKe7Znqx++v/TXC+dWT+/++uIFpjDavWbXjkpB/eyjH2SHVt0a09MqqiCq9US16imAXhTPzZ3NLl21otK+VD0R3UklqiCq9UZ1nEP3SYQgH16zJZapVKJKvMKI54KrLl/8/+FXkbDSe2+198++H0Y8Zzx5M45q+FmtP/LMWKPOqk4/8vXs7FPPxva0iiqzjWdYOCNc3Fi+5vrswvmQlt3sbZAwXefj77yfnXvrzEJkw6ZwYttcVIOqE/fHUWauq6jSiYiG2w/Dr8vmIzppQKscJoYYfDD/68NTb4jslKM67dMA4YPy+Nb7YjvsF1WaC+kVG29ZGL2UnW4zbWE0G6bghPvPuxzYaUY1WL17Z7bi7m21PubI5qSKKs0Ik7ev3HjzwhSbWEI6LLBvH/zjhcBGshtna6IaXDn/gRpGrZOeYw0/p1d3PRrLoimiSnOj0hU7ti+MSpu4UFG3cJ4uxDWBN24yUe19yIbXxMr510bVUz7vHX1l4WcS0eR+UaWZmFadtB3uqFl2yUVRjmTDY5vbu68zcW36tdK7OBmEC5SLz/vJ1xf+tzerI9HnX1RpJqbhYlEYbbx35JUlo44Yz7mKK6JKo8Lh3Mp7tpVami0cUudDOkiYFRDi2tTk8SqnBd7as79z51wRVRoQLjyEq7rDzo31Lv6ceerAWNNexjmdMG1hpD03H9YIJ5sjqqQ6Ov3inoeyKzbcPDSmc3v2jdwqo6wwcl398M6oTguEOZJhOxBzXRFVJorbTfufGHhFP4ziwtzBumKaF6ZmrZofucYyo8CoFVFlbKMmcIdVgsY9zK8iXDEOtz7GNGoN031e3fVYrHf2IKrEdrgfRqeDtrQIV8Zf2/VooxdvwmNavfv+qM61Oh2AqFJqVBiCWnQxKoZD36qLITdxOiAs7pHQBHVElSaDuu7gk4XnL2MalTWxElJVZfazR1TpkGGhym99EfvjnZVI1/hEVIkpUDGPwGIMa8RrfSKqzDJM4Vzht3Y8EP1tmrGdYw0SWKIOUWUawhzUdQeeLAxqWAg4lavaTe6NVJZzrKJKxwy6KJVaUIMw3Sr8XWJblEVYRZWOGLRBW4pB7f+QWP/Nb0T3uI59+S7zWEWVNhs0qks5qD2rdu4otXpWk8LzemzjnVa5ElXaquj8YxuC2rP+xWeiOw0Q5vgeu+1OLz5RpW0GXelv07m/QRffZs2MAFGlZQadRw2LoszN/2qTdQd/Z+C6BbN04t4H3c4qqrRF0WFxWGkpzEVtm1hHq+E0y+E1W6xsJaqkrugCTlhU+ujGO1v7Bo91tNrWDzJEtfOH/eNuOZyKsPXL2n2PR/nYnAYQVVo2YuvKRZNNJw9V3mu+CW0/ShBVWqvo3GKX3tCjdi6YpTZeIERUOzlSa/thf79Y77IKXLQSVRJTNCc1bINyfOvXOv/BEgtzV0WVxGPywtotnbtdMsYVrLr+MxFVWjFK7eriyTEuZN3PuVVRJQFFE/27OiIKU8puP/F8tI/PuVVRJXJFV/y7vsXHHe+civrx2dtKVIlY0TnErp+3i/Xuqp4wze3wms1evKJKbMJaqZvfPLbk97p4xT/vpv1PZFdsuDnqx9ilqW6iSjKKLsq4JTLOxavz7MIqqkQof4EqXAQ5tOrWzj8vKUTVz0pUiUzRVW6Ty9OJqqMKUSWBQ3+bzqUVVacARJWI5C/GuKKcXlT9zESViGyee2nJmqlGPelF1dGFqBKJotWYnJ9LM6puBBBVIrDinu3Z6ofvX/J7h65d79bHBKNquxVRJQL586n2mV8q9juq+jmvKqpEIL/Mn/Op6UbVUYaoEoH8giHOyw1/fmLnllVRZYaKVqXypvyRmLdUGcSHoqgyQ0VbMT/3hRs9MX8v9kWqi1i4WlSZofyVbfeQLxX7dipFrCwmqkQUVW/IpfI3RYgqospQ+Svb3pA/kuL51MC0KlEloqhamepHVu/ema24e1uSj915cVElkqi6yJH2ob+oiiozll+YWlR/KMWr/qIqqkQgP7FdVItH8KKKqCKqYyq6IUJUEVVEtaOjVFEVVUTVKFVUEdV2yF/h7vqUqvyKXaKKqDLRoW6XJ/+ntBi1qIoqiUS1qwtUp3r3VBHrN4gqM5Rf9T/o2tJxyy65ONtw5JlWHPZ3/WhDVIn2kLdLu3IWfbCIKqJKrVENh5DHNt6Zffzd9zv590+ZaXGiygwNm0IUzq8e33pfa/c7Sv1W1EGs/C+qzNCFn788u/3E8wP/fVvD2tagBrbDEVVmbNTGdm0La5uDGthNVVSZsTK3ZYawvvbrjyV/8aqN51D7WaBaVEkoNOHi1bd2PJDkoWWYNrV69/3J7TdV1XtHX1n4GSGqzFDRjqrDpHZ1OUzsD4f7/evGtpWLVKJKJKO4zW8eq/TfpHI6YMU927PVD9/fmZ9ll+YXiypRy+8AUGXUeuapA9FdGAlTxVY/vLMTo9Met6eKKhGZ5AJOeDOHla3efu7wzP8eYYrYNbt2tP7caZG3//Bw9tqux7yYRZUY1LGgSLjyfGb/swtxbXrkGkamYapUF2PaE07HxPDBhqjy9+paSzSMXN898nL23pFXFv53mqPSKzbeshDTLh3mD2J+qqjSolMAowIbpmGFX5OuJRBGpJfdeN1CTIXUob+oErVRt6zWFdlzc2ezc2+dyT773kcLswg+HTC6uvSaldnnLrlo4dTEBfOPTUQHO3Hvg1M9KkBUGVMbNr3rGndRiSoRa/t98W1kqT9RJXJt2fyuK1ygElWMVqmJC1SiSgLCbaubTj6/ZOtq4vTC2i2t351BVGmFOqdXhQspH5x8PfvkO+9nH5waf4WrMJUqzAQI06oE3yhVVEnOJOdWw9SpcHdP+DWNBT5CXFfcs21hha2uBtYoVVRJzDjnVsOodG7PvuzdI680cvEknKpYOR/XFTu2dyquZ58+sLDeAqJKYqrMW53lilW9uLZ5Vf/+o4DDa7a44i+qpKjMQivhrqgTOx6I4lC0CwtSWzhFVEncsItWsU48X717Z7bi7m2t+1l8eOovsuNbv+ZFKaqkLBxarzv45Hmjv9jf4G2bbxsO+49tvNPFKVGlzacBYj8UDY87fCC04SKW/adElZYZtN9T7PsitSGsdkkVVVrqpv1PZFdsuPm8w9LjW+8T1ikJ09SOzh/2u9ovqrTQoPOrYQZACGvMb/wUw5rCBxaiypTilEpYJ92Lq0mmT4kqHQprUZxSCGsqswJcmBJVOmZQnGK6GWCQ2OexWixFVBHWJVI4Fxjr1jGCKqoI68CwhjjEuiFdjOvGCqqoiipDwxrEvIdSWDpw7b7HBRVRJc6whnOVRSO/cEtrmLwe4wWsorm3TbOUH6JKoWFzQWM9HTDr0wCmTSGqDHXh5y/P1s6P/gYtvxduuXx1Pq4xjVpncRrAxH5ElUqjv9W778+u/sqmgUGZ27M/qnmYTc4GSGE+L6JKhIadZ43t0DeMsG8/8fzUv0/MF+4QVRI5HXDDnt86bxQYRquHVt0a1WOtcxfZvLAwyqu7Hs0+PPmGFwWiyuQj1vyUqxhHbNO6aDXL/bsQVVqo6HxlrFssD1o3dhwp3LKLqJKYosVXYp/ovunkoeyCK39q4q9jQj+iSu1u2PPQebMAjm+7L+pzi3WuZBXriBxRJUHhHOXmN48t+b1wwebwms3RP/a6Rquu9iOq1Kbo/GQqdxDVdW41xlkOiCqJyo/2QmAOr9mSxFXwOmcCuBUVUWViRbd+prZwSF3zVsOCMse3fs2LAlFlfClNoxqkzrusYt/KG1ElsRilOlormr0wDtOrEFXGVrQH1Il7H4x2F4Bhlq+5Llt34MmJv05K55MRVSJSdIEnlWlUg9Q1vcoOqYgqlRVNnE89JnVNr0r9wwVRJZJR3aFr1yd92FvnBatUT4MgqsxA0fnHtlygqWsvq7DzQdivC0SVkYqulLdlKpH1ABBVZn6I3KZJ70XrGIzL7qmIKiMV3X3Uttsz6zoFYHoVospIRff5x7SQSBhJT3rIXecpAOsBIKpUik1sS96F872TXjCr8xRA2BXg2G13evEgqpwvhfv8w2M8/cjeiS+arX/xmezSa1bU8phiX6wbUWUGUtkuJUT13FtnJr5AVOeOq9YDQFQpPKxOYbuUENULr7p84juaij5EJmF6FaLKopTu8++doqhj3uzmuZdq28badiuIKotS2i6lF9U65ojWNbUq5g8hRJUZSGm7lF5U67jqXtcCK7F/ECGqNCi17VL6ZyhMeh6z7vOqtltBVCk8BI75okt/VOsYGdZ5XjWw3YqoimqHpXiff39U65jKVDQ3dxKmV4mqqHZYitul9EewjotDdc5XDawHIKqi2lGpbpeSH1lOeqqi6JzypGy3Iqqi2kGpbpeSj+qkI+s6dwNI6cMJUaVmRfe+p7BdSj6qdUy6r/tiVR2xR1RJSMrbpeSjWseFtbovVgW2WxFVOiTl7VLyAaxjvdeiC3Z1sB6AqNIBRecQU1oTdBrLE9Y9A6DHdiuiSgekvl1KUVQnXU2r6HRIHUyvElU6IPbtUsaJ6qQXq+q+XTXVDyxElYpS2C5lnKjWcZh9xzunpvJ4bbciqrRYCtuljPN3qGMGQH4EXyfbrYgqLVR0iJvitJ+iqNYx2X4a06p6rAcgqrRQKtuljBu/575wY+3PT51MrxJVWiTV+/yrRDXWaVU9tlsRVVokpe1Sxo3qpKPuuncByLMegKjSIiltlzJuVCf9kJjWXNU2fJAhqvQpWtou5Qsng6I66eF1E1G13Yqo0gKpbZcyq6iG886b3zw29cfvgpWokrDU7/OvEtU6RoHTugGgLUcJiGrnFa2+lPohaOpRtR6AqJKoomlUvZHq6UfSXTlp9cM7z1tcu64ReNHC3dNguxVRJUFF9/m33aQ3AEzzrqp+pleJKglqatQlquOxHoCokpAmpgeJ6mRstyKqJGTa97HHKvZbVet+vIgqDWhqvmWMJj2kbjqqtlsRVRLQdBjaFNWmR/ip7bqAqHbSqMWW2zqlKph0qtIsLu5ZD0BUiViZaVRtnfw/6d+t6O6zJthuRVRJNDhdiOokpwBmeXHP9CpRJUJlR1ptj2oY+R3fel+l20BnPQXNegCiSoTKjrTaHtWqYQ17d607+OR5t/M27dC1660HIKrEYtB9/l2NahBuBX1116MDD6vDc7bynm3RzJSw3YqoEpEqW4F0Jar9o9b3jry88L+fzo8Ew2mScLgfFu+e9eg0/yFgPQBRJRJV9qzvWlRTYnqVqBKBqhdZRDVetlsRVSJQtF2KqKbLegCiygyNM2FdVONmepWoMkNF26WIatpstyKqzNDmuZcqX8EW1fjZbkVUmYFxt0uZRlTDxbLCUdf3f5CdmzsjqhWZXiWqzMC4KypNI6qDdiGdxvfqQlQD6wGIKg2a5F51UU2D7VZElQZNsqKSqKbD9CpRpQGTbpciqumw3Yqo0oBJt0sR1XTYbkVUaUCV+/xFNX3WAxBVpmjcaVSimi7brYgqU1RHUEQ1PaZXiSpTUNfGdKKaHusBiCpTUNfGdKKaJtutiCo1qrJdiqi2k+1WRJUaVdkuRVTbyXoAokqNJp1GJartcOLeB7N3j7zsDSGqTKLuPelFNV22WxFValB1uxRRbTfrAYgqE6hrGpWotofpVaLKBMbZLkVU2812K6LKBMbZLkVU2896AKLKGOq4z19U28n0KlFlDONulyKq3WA9AFGlgktXrczWf/MbU/naotoOtlsRVSqo6z5/UW0306tElRIm3S5FVLvDegCiSgmTbpciqt1huxVRpYQ67/MX1fYzvUpUGeLKjbdka/c9PtXvIartYrsVUWXGwQhvwtOP1Lvt8aAFX6bxvVY/vHMqU81SduzLd2Xn5s54IkSVftO4z59usB6AqFJgmtOoaD/brYgqfercLoVuMr1KVOkzrfv86Q7rAYgqfcL51AuuutwTwUSsBSCqAKIKgKgCiCqAqAKIKgCiCiCqAKIKgKgCiCqAqAIgqgCiCiCqAKIKgKgCiCqAqAIQY1SXr7nOjwMYyyffeT/7+Lvvi2q/O9455ZUBjCWiLbpFFRBVUQUQVVEFRBUAUQUQVQBRBUBUAUQVQFQBRBUAUQUQVVK14oEd2epf3bH4zy9u+eXso9e/7YlBVD0PiCqIKqIKogogqlMc3fSc/u392dknzl9l5qbnfju74ks/u+T3Pvnw/2SHr//5od/n8m23Zf/8P+6u9N8ENzz9eHb1rbcs/P8P3/zf2fHb/1Xhn7v4+p/Obnv+9xb/+c/+3e7s/QMvDvxao8x940D2nee/WTjSy3+vMvJ/32k874NGqv/wX2/Nvvgbu0o/99f8+53Zqru2Lf7ze//zz7Nv3fGrtfzd81+7rPDzeOs395b6s3W+Zpp+Hed/Vvm/e5XHvOGVg9mPX/2FJY/1lV/5t4uv6U2v/3F2wfJ/MPIxiWpNUT176HB2+tceO+/3N3/7T7JlF1xQOaqr//ND2YrNm5b83p/s2Jn9zdGTUUZ12NeZZlQned6HHf6ve+F3s+XX/szIeH/u85dlt7/07JLv1f91uh7Vab6Ow+P5l7//5JLn/u2XXs5eu/vByo85/zg/++ST7H/82m8seZyi2nBUv/f2O9nRm7eWikmZqBZFYVBAYopq+Lsd+8W7s0+/+0EjUZ3keR8W1bIjrHz0Rr2puxbVab6O8yPLMq+FosdcNNp99T/syf7yvx5c8nui2nBUwyfboZ/+uYE/rPDvey+uUVHNv6GrxHhaUR02Wliz99ElL+78qG6cN2MTz/uoC1X5D5V8qPKj1PC9/vtX71vyNer4u496fUz6NacV1Wm+jotGlvnnvsxjLhrtDoq+qDYU1fDp2AtK/rCm/wff/+dGvaiKDpnKHjo1HdXgJzesyX5u/96JD8Gaft5HRTX/uMMb94Vbty+OwvOjyKLRYZejOq3XcdHofdDXG/aYw4fi+j96ejGU+fPhojqjqIaA9H74+UOG3sWS8GZ898Rri39uVFT7D5nCD7n/gsuow7pZRDX/mPN/dhpRreN5LzOlKh+G3vNfNErtD66oTud1nP8AH/W1hj3m/MXMolNXojqDqIYfaO9TM3/Y0HtRhR/Ax3/1Qamo5t8wIRj/9KtfWRxtFZ03ii2q+U/7aUS1jue9TFQHxfOf/Juvjhyldjmq03gdF40sR52fHfSY86PdQacPRHUGUQ0/pN6Lpz8m/Z+o4Qe/7KKLSkW1f2TUO1+YfwEMO3SK4fA//0KfRlTreN7LTv7PP//h61694V+UOkfe1ahO43WcH1mOCvOgx/zp//3eeaPdogtTojqjqIY3Yu9Ed/9Fk/6LJeEHdtmXri8V1aIRXz5aww53mo5qeGzX/+bOJReqii4G1B3VOp73slEtGiH1GzTdqstRrft1/MEb/+u886j5c/dlHnN4TVz7K3ed97MsczedqDYY1esfe3BxTmPvh9P/SR0+kf/R9s0jo1p0yNT79Ox/kQ77hB5nGlSZqJZVdKJ/nGlF+cczjee9ym2qg2YfjHpz1fF3bzKqdTzOul/H4ec26ANtVAzzz/+gr1Um0KLaYFT/8S/dsfhG7r2AepPHe6Oo/IukKKr5iyJ/tPYXFk+a5//doEOnWUZ10AtzWlGd9Hmveu9//5uqbNC6GNUmX8ejYljl+a/y8xfVKUf1qi1fXjw06R3S9D6Re5/GZaI67GJPfoLyoEOnWUQ1vLC//V9+d+ALclpRnfR5rxrV/M+gzBuri1Gd5us4fz571M9t0PMfPnTfPvqnSwI/KtCi2mBUP/eTP7F4rii8iL697/eXXCwJF21GRTX/Rhk10XzQoVMT51Tzb4yiW/rqPq84jed9nFWq7njnVKlzgl09pzqN13FP78/mL3hVecz9pyTeP3z8vFuMhz2XotpgVP/fX/9t9osn/ttiYOae/oPFP9O7iDEqqsMmSg9SdOjU1IWq/PMwbErKtKI66fMuqvW/ZqbxOu797HqLmxSttzDoOSiKav/PrUqgRbXBqIYfdP99yP0T03svmFFRLbpHepSiN3WTV//zi46UPadaV1Qnfd5Ftf7XzDRex0XhLRvD/GPOn46oEmhRbTiqRUvN9U/1GfbmHnSP9ChFh05NRrXo7pYyq1TVGdVJnndRrfc10+TruGwMyzz/ZQMtqg1Hteh+5P4Xy7A3d9krokE+IsMWAWlinmp+RFH056YZ1Umed1Gt9zXT9Ou4TAzLPP9lAy2qDUe1aPmw/juLhr25y87dK/r++Tf2LFapyp+zamry/6TPu6jW+5pp+nVc9Nobd4W0onO4+VN0otpwVMOnXe+iSdEPeNCbO/8GGXUvc/775F+8s7hNddSIYZxpRfnI1f28zyqq4/zdU4jqrF7Ho2JYNqplAi2qDUe16CR9/+HPoDd3lUOmnvwFov7HMIuojjp8mmZUx33eRbXeqMbyOs7HsMqRwqhAi+oMotp/nii/ePKgN3d/EIoWXC4zMux/c89qlapho9VpR3Wc511U643qrF7Ho2JYJaqjAi2qAIgqgKgCiCoAogogqgCiCiCqAIgqgKgCiCoAogogqgCiCiCqAIgqgKgCiCoAogogqgCiCoCoAogqgKgCiCoAogogqgCiCoCoAogqgKgCiCoAogogqgCiCoCoAogqgKgCiCoAogogqgCiCoCoAogqgKgCiKrnAUBUAUQVQFQBEFUAUQUQVQBEFUBUAUQVQFQBEFUAUQUQVQBEFUBUAUQVQFQBEFUAUQUQVQBEFUBUAUQVQFQBEFUAUQUQVQBEFUBUAUQVQFRFFUBUAUQVQFQBEFUAUQUQVQBEFUBUAUQVQFQBEFUAUQUQVQBEFUBUAUQVQFQBEFUAUQUQVQBEFUBUAUQVoLtR/Ts4Ne77JUpUsAAAAABJRU5ErkJggg=="},{nameFront:"c17",nameBack:"Her \xe7ocuk kitle ileti\u015fim ara\xe7lar\u0131 vas\u0131tas\u0131yla g\xfcvenilir bilgiye eri\u015fme hakk\u0131na sahiptir. Televizyon, radyo, gazete ve di\u011fer ileti\u015fim ara\xe7lar\u0131 \xe7ocuklar\u0131n anlayabilece\u011fi bilgiler sunmal\u0131d\u0131r. Devletler, \xe7ocuklar\u0131n, kendilerine zarar verebilecek i\xe7eriklerinden korunmas\u0131na yard\u0131mc\u0131 olmal\u0131d\u0131r.",icon:n.p+"static/media/c17.4c519e534ea70e5c195e.png"},{nameFront:"c18",nameBack:"Her iki ebeveyn de \xe7ocu\u011fun yeti\u015ftirilmesinden sorumludur ve her zaman \xe7ocu\u011fun y\xfcksek yarar\u0131n\u0131 dikkate alarak hareket etmelidir. \xd6zellikle \xe7ocu\u011fun ana-babas\u0131n\u0131n \xe7al\u0131\u015fmas\u0131 halinde, devletler \xe7ocu\u011fun yeti\u015ftirilmesi konusundaki sorumluluklar\u0131n\u0131 kullanmada gerekli hizmetleri sa\u011flayarak ana\u2013babaya destek sunmal\u0131d\u0131r.",icon:n.p+"static/media/c18.1983b4b8ded8e8554186.png"},{nameFront:"c19",nameBack:"Devletler, \xe7ocu\u011fun ana\u2013babas\u0131 ya da bak\u0131m\u0131n\u0131 \xfcstlenen herhangi bir ki\u015finin her t\xfcrl\xfc \u015fiddet veya istismar\u0131na, ihmal ya da k\xf6t\xfc muamelesine kar\u015f\u0131 korunmas\u0131 i\xe7in gereken b\xfct\xfcn \xf6nlemleri al\u0131rlar.",icon:n.p+"static/media/c19.2a13b0aef2640b22a7b3.png"},{nameFront:"c20",nameBack:"Bir \xe7ocu\u011fun ailesi taraf\u0131ndan bak\u0131lmas\u0131n\u0131n m\xfcmk\xfcn olmad\u0131\u011f\u0131 hallerde, Devletler \xe7ocu\u011fun dini, k\xfclt\xfcr\xfc ve diline sayg\u0131 g\xf6steren ki\u015filer taraf\u0131ndan gereken \u015fekilde bak\u0131lmas\u0131n\u0131 sa\u011flamal\u0131d\u0131r.",icon:n.p+"static/media/c20.25a10f52ae5418a94789.png"},{nameFront:"c21",nameBack:"Bir \xe7ocuk evlat edinildiyse en \xf6nemli \xf6ncelik, \xe7ocu\u011fun y\xfcksek yarar\u0131 olmal\u0131d\u0131r. \xc7ocu\u011fun do\u011fdu\u011fu \xfclke veya ba\u015fka bir \xfclkede evl\xe2t edinilip edinilmedi\u011fi fark etmeksizin \xe7ocu\u011fa ayn\u0131 koruma ve standartlar uygulan\u0131r.",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAVUAAAHGCAYAAADE/hjDAAAACXBIWXMAABYlAAAWJQFJUiTwAAAGiGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDYgNzkuZGFiYWNiYiwgMjAyMS8wNC8xNC0wMDozOTo0NCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIyLjQgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMy0wNC0xNlQxNjo1MDoyOCswMzowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjMtMDQtMTZUMTY6NTE6MTYrMDM6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjMtMDQtMTZUMTY6NTE6MTYrMDM6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NTlkMmE3MzQtMDRkYi00YjRmLWI5ZTctOWY4OWYzYzIwN2RlIiB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6ZTUxOTQwN2QtYjc0Ny03NTQ5LWI1NzAtNTI0M2Q5YzAwYTA0IiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6ZmMyZGJhYjAtNWM2OC01NDRmLTk5ZTQtMjUwZmZjZDBmNjMwIj4gPHBob3Rvc2hvcDpUZXh0TGF5ZXJzPiA8cmRmOkJhZz4gPHJkZjpsaSBwaG90b3Nob3A6TGF5ZXJOYW1lPSJFdmxhdCBlZMSwbm1lIiBwaG90b3Nob3A6TGF5ZXJUZXh0PSJFdmxhdCBlZMSwbm1lIi8+IDwvcmRmOkJhZz4gPC9waG90b3Nob3A6VGV4dExheWVycz4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpmYzJkYmFiMC01YzY4LTU0NGYtOTllNC0yNTBmZmNkMGY2MzAiIHN0RXZ0OndoZW49IjIwMjMtMDQtMTZUMTY6NTA6MjgrMDM6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMi40IChXaW5kb3dzKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NTlkMmE3MzQtMDRkYi00YjRmLWI5ZTctOWY4OWYzYzIwN2RlIiBzdEV2dDp3aGVuPSIyMDIzLTA0LTE2VDE2OjUxOjE2KzAzOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjIuNCAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+AYWRbwAAHa5JREFUeNrt3X3MVuV9wPHTv7BNq8naafoi/aM8mjlIWsVsU6ro3AuijdAtAW2jmBY02QhBjcmWTd2SZU5LCFui0kVr1gJ/THCt4F6sYqduq+D+0DUpD80yaG1k7Rawactf2/N78Mabm/vlnHOf+9zn5fNJGlsLPA/389zf5zrXdZ3rvOfP/+JT+xMACvGeuaj+n5cBQFQBRBVAVAEQVQBRBRBVAEQVQFQBRBVAVAEQVQBRBRBVAEQVQFQBRBVAVAEQVQBRBRBVAEQVQFQBRBVAVAEQVQBRBRBVAEQVQFQBRBVAVEUVQFSB4iy8cGmy4JwPJBecf9FZ/99bxw4lJ3/+9tw/v5ucPPm2F0tUgV7nnfeRZMniG5OZRdck5/cJ6SAnTvwwOXLkQHLo8P5kdvaFiX1+CxZ8IFl5/QPJOXP/TOO55x9Ojs1FX1SB0mO67IoNyeK5oI4rAvvSy48lr7/x9cKDevOaL2eK/c5d65MjRw+IKlCeJYs/k/z6tXfPRev9hf65R48eTPY+e19y/Pibhfx5K1c8kDn6ogqUaullN88HdVJOnvxJsmPXF8e6BO9c8s8sWp7594oqUOoI9foV90/848R0wONfWZNrMSumJVbftCXTJb+oAqWLWN2x/pnSPt7s4f3J7j2bM/2emZlr5i/5x5mWEFWgFLHgc+GFl5X6MdMGLi73r7v27kIWzUQVaNwoNctotYjRqagCpYqFqVigyiJW8rv3fEaY48/Juni0ddvVfedW48+LmBY9ehZVYOLW3bor88b+QQtNWacRdj99V9+bA5ZduSG58ooNU5tyEFUgt3vveS3Tr3/iybUDt0TFbaxr12xP/We9/Mpj8zcGiCrQCFnnU2OU+shjK4f+mk0bv5V6DnTQvKqoArWUdWSZZnEpyxRAzM3GzQCiCrQyqoMu16cR1WPHDmW+CUBUAVEdMGLeu+++ZNPGF0UVaHZUsyx8ZY1qnB3w0suPJgcO7sj8sUQVqJ2sC19vvPGN+ZOr0kS13ylXogo0WtZTrtJsqYrR6Teff7jveayiCjRa1hsJBkWuE9W4zI/oDjrRSlSBxso6PxsG3aYaf9bxE2+OPNBaVIHGunPD3uTccz+c+tfnOf5PVIFWyPPEgH3P3j/2c6tEFWicWPGPudQsx/PF4tPWbVeN/bFFFWicPAdcp9nvKqpA6+S5Rz9GqXEoS55nVIkq0Fh5VvuLHKWKKtAY8dyo22/blWm1v+hRqqgCjbF61ZbMj04JRaz4iyrQKHm2T4VBh6eIKtBaeedRw7DHsIgq0Doxjxp3TeV5XHSRi1OiCjRCnv2oIU7of+LJNRP5nEQVqKWYQ4251Kpc9osqUFszM9ckq2/6Uq7fG+egdk7pF1VRhdY7//yL5y/788yjFnEKlagCjRELUxHUrE8sDTGPGtunitrkL6pA7a1c8UCyePGNmX9f3DUVQZ3UPKqoArWzZPFnkutX3J/r9+5++q5kdvaFUj5PUQUqL+ZR1926M9fvnfTClKgCtZL3oJQw6HHToiqq0Fp5D0qZRlBFFai0vAelTPKOKVEFainvPGpZW6dEFaiNvAelTDuoogpUUp6DUk6c+GHy+FfWTDWoogpUTt4H95W1uV9UabSYd1s4N6K5YO6f8az3YaObeOPFm+6tuf/EZWJ8Ix8//mYjXof4u8dhzXH7ZrwW8boMu3SOE+/j7x6vxZG5/16FGOWNUpWCKqrUUsRjyeIb508qynOoRu8l46HZF+Y3h9ctsBHSWB3vxHQcEaa44+jQ4f2l3XlUVJTikJSig/r6G9/I/f0gqtRG3KYYl4Z5NoGnEaO3OAm+Kt/gw36oxOuQ53DmtD9oXj3wtfmwTGN+MmuUJmGc0IkqrY9pXeI66Zj2G73GLZ5FPmlUVEWVKYp5wTiVaNxL27zisnLvvvumvpoc24uuu/buXKczFSHmn+POpLLmLEVVVJmAvHfSTGK0FocaT+ubPkanK69/oLRR+jCTelCeqIoqEx6VRUTy3OvdhKBU8QdL2aN3URVVCgxq3lPdy1DmAR15D2Muazpgknctiaqo0oKglhnWKge1jLCKqqjSkqCWEdY6BHXSYRVVUWVMee7znrZJzLFWcQ41TViLPmIvFuemLe40y/vDIuvnP87HElXOkuc+76oocoQRb8S1a7bX8nWIu9FiPyv1J6o1V+eQhNhu9chjK8ceZYzzuJAm/oBBVGlpSEJsMYp9rOOIS/649K+zqhy7h6i67G+AcUZpdR+td5vGXl5ElST/qe5VFWcFxCp4HnVcpBvm0e03NOY4RVHFKLVmo9UmjVI7pvUEU0TVKLUho9RxRqt5H71cdVu3XW1uVVQpSxzjd/2K+xv5d8ty6RsHTN+x/plGvg6xvSq2WSGqlGDdrbtqc+dUVln2a9Zxo39ak7ghAFGlZaOzENuKYt9q23+4ZB21I6q49B8rJk3/4WIKQFQpSZ0OC8lr37P3j3z8SDywcPVNX2r061DETRGIKi2/5A1p5lWbuKWsV5apEESVnKpwpNukpdla1bQN/4M8+NClvulFlUlpwzxiiENWtm67qvUj9uCQFVFlgpp491DeEVobRuyiKqqIqqiKqqiKqqiKanXZViWqiKqoFshRgKKKqIqqy39R9TKIqqiKKqLaOueff3Gy7tadjf97ptlSFUcf1v0xMqIqqlSAzf+n2PyPqFKINozQ0px834QH/Y3iNlVRpQRtOFAlzTaiNpzW5UAVUaUETT6YueOJJ9cmx459d+ivcfQfokohHFL9rqZPhaT54YKoUgCPUzmlyfOq5lNFFVMApY/OmjxqdyeVqFKieET1po0vNu7vledhd03dWuX5VKJKyZq4CyDNY1R6NfGxKmm2lCGqFKxpl77jzCE2bcHKKFVUmZImLdTsfvquZHb2hVy/t0lnIhiliipTFHOrMUpbsOD9tf57pLktdZTVq7YkM4uW1/p1iDMPYrR+8uTbvrlFlWmp+5xihCQWp8a93G3CD5hxRuuIKgWq86JVnsWpJv6AcdkvqlRsGiC2FtXthoBJhKSO88yxlSymP1z2iyoVC+vtt+2qzSr4JA8LqdPIvajpD0SVCYhDrGPEWvV5xTJGZnVYuIqgxuvg/n5RpeJhjZFaVacCYoS6d999pVzqVnnEKqiiSs2mAqo4xzqNxZgqzrGaQxVVaqoqQYlRWZw8VdQqf1ZxoHW8FlWYFolTuOKgFEEVVWoq7jZaef0DU1vAio39MTqd9kJM3NYb0wHTOnwlbsN9bu4Hi32ookpDpgMuX3rz3Kj1ltJGaxGRGJFNa3Q6SOxlvW5u1FrWD5kYpR84+LXk1QM7jE5FFXFtTkz7TQksu3LDxOLaienrb3zDdilRpQ1xvWhuxDYzs7yQbUcRkLisPXR4f+0ub2N6ZMniG+dHsEX8oJmdfw32J4fmXgcjU1GlpYFduHDpXFwuSy44/+L5LVmj4hKj0Rh9HTl6IDly5OD8P5sgArtw4WXzr0G8FqNGsfHDJLZEvTX3nyNH516HIweEFFGlvwjLOXPB7Xb8xJutu5SNBa7zzv3IGf/u53PhtL8UUQUQVQBRBRBV2qffvGm3Ns6hjtJvjrWb+VZEtSUhiJXtOAsg7Qp/t7hXPQIbsWjSan+aHzqxKyJ2R0RIs5yl0L0zIF6/U/8UW1GltmLf5UWLls8HoegN7p19qbGNqOqb/PO+bkXtW+33utVxPy+i2trL+csvu3kiQRgVilcP7qjtSCxG8suu2DCV1y3uuGrLyF9UqY245TLuCprWYSEdcXhK3KJal0jElEjcqjrt1y2mB+L0qqaN+kWVWl6qlnk4SFPiWpWY9qrLuQmIaiMv8yOmVYtCv7jGcXdVmRaY9vF/dX3dENVGixHWlVdsqNXnPO2DmTunc3ndEFXOGJ1W+dlTaS5t49lUZU8JTPuQ7nHFfGsc8m3UKqoUqEqPA6nT6KuKz6fKY9qPo0FUG6UpYShz9FX3Uf0g03hwIqLaKFV+xHJVR19NGtULq6giqFONRBNH9YNG+h5xLaoI6kCxheipPZtzRyJW9z+7akvlt0oVHdYnnlzjzSKqCOrgSOSZZ429p6tv2tK4+VNTAaKKy9exxTxrXNamDWssSN285suNnT8VVlFlDLHAcv2K+1v/OkRYd+/ZPHI/q6C+a9+z99tuJaoIRP5QxJkHMU3i9XrXE0+udYOAqNKx7tZdrZwTzBNWI/r+4o61x7+yxo4AUaXt86hZwiqow8XdarH3F1Ft9WX/ult3eiFShDUI6mg7d6136LWouuyHoti/Kqqt5VKWSYkpgJgKQFRbI+4Auv22XbU9jo5qi21pjzy20qKVqLZHHQ+apl5efuWx+SMWEdVW2LTxW/ZYYrQqqhTBXCplMbcqqq1w54a95lJTig3tx4+/eca/i21oRvnpX78YrSKqjRXPS1q7ZrsXYkgEDs2+kMzO7h+61zIW+hYuXJpctGj5/C2rIjvY7qfvmns9X/BCiGoztfVYv1HiPNVYVMm7aT2mVGLxzxXA2ZxiJaqNZoHq7JFpkU9Yjdt9l115h9e4x9ZtV1uwEtXmicvU1Td9yQvRNYJ67vmHC3+zt/nQ6kEcDSiqLv0bbtKr0jHnet21d3u9TQGIapNZ9S9/1OQH2SmxZ3Xrtqu8CUW1OZxGdco0jqZzaM0pDrEW1Uax4f/UCn88f6psMRUQVwltX7xyI4CoNkrbL0Pj8jOOo+vdyO+HWnlmD++ff/YXotoIbb8ErcLhHvEMsAsvvKy1XwN3V4lqo9x7z2utHqVW4WAPd7MlyYMPXerNKKr11/ZFqio9N6ntOzA8akVUG6HtI6QqrTrHHVfxoMW2cg6AqDZCmw+krto8Xtxtdcf6Z1r7vejgalEV1Zqr4p08bT5/QVRFtRHavJ2qim/iNu8CmNZeYVHFm7ggVVwYiTnVmFsVVURVVEW1AG2ejhFVURVVURVVURVVRFVURVVUEdUJqOK+yDYvHIqqqIpqzVn9F1VRxZu4QFU8GanN5zCIqqiKas1V7cT5tt8yLKqi2ght3hcZqjSv2vavhWdViWojtHm1uWpTAG1/RLjbVEW1ETyaOkke3X7D1E7973D6v0dVi2pDeOjf9Eer8Zyq22/b1fqn2TpPVVQbo80rzlV4Q7d9LrXDyf+i2hhtfz5SmNZjVTxG5ZRjxw7NP3wRUW0EI6XpvLFj6iV+oLX98dTByr+oNorFqvLf3DGPGkFt81Nsu1mkEtVGiTf4po0veiHeEZvQn9qzeWJTAUaoZ6vCDgxRpVDrbt1l1NQlnl8VYS36oYAxzbLsyjsEtYv5VFFtpLbfBDBIPMI6NqSPO2qNh/rFCVRtXxAc9BpX5THhokqhl6Rt3686SOwMiPm+ePNnvUSN1f0li29s7XF+aVTpMeGiSqHu3LC39RvQ01yqxn7WI0cPzge2NwYR0RiVLpwbkS5cuNTrOULVHhMuqpgCwKU/olpVMcK6Y/0zXghKY9VfVBvP3VXpxLarQWJ+2ur+aFb9RbUVnJY0WNwY8Prcf9KcERCj/plFy5PLl95iXnUAG/5FtTUsWJ0pTrGKeb+8l6nxgypuBTZ6fVfVnrogqkyUBat33/hxy2oRTwZwW+qZHEgtqq0SAYjRaptHVhHUeF5S0fsn2/wI6m4WqES1ddp8ctWkgiqspziRSlRbqa3bqyYd1I7Vq7bML2QZpSKqLdLGEVVZK9JtnWM1ShVVo9UWjVbLvrunjectGKWKauu1ZSdA3IP++FfWlP44lZi3jvlro1REtSXashNgmg/+a8NZtjFXHXdPGaWKKi0YrU57BNWGh//Zlyqq9GjyXVZVmOdr8qLgtKZWENVKa+rDAasygmryoqB7/EWVAZp4gtXWbVdXZgTVxNFqnOYV+34RVVowmqraanQTR6selSKqjNCkRasq7pls0tWAxSlRJaUmLFpV9bK0KXPXFqdElQyasAWoyosnmzZ+q/b7gqe57xdRraU6n2IVG9HjCZ5VHUXV/YQwD/MTVXKIO61uv21XLacBqn67ZJ3PBHDZL6q0cBpg1KV/PP5kklMDMW866mkCdZ23dtkvqoypjrsBRu1NjbNOd+/ZPNHX7NDs/qFbjeq4Z9Vlv6hSkDodCDJq1T+mNTZtfDF58KFLJxrVMGy7Ud12AcTjpuN1ddkvqhQg5gBjf2UdVqxH7Z3sPKJ70lGdWXTN0Gfed+JeFzb5iyoF68So6kbN+XUuuycd1ZgyGTUNUZcrgLjkj0t/RJWC1WEecFTIOgtEZUR199N3DV2wqsPrOXt4/0TnnxHVVqv6c5diu0/sTx2k+977MqI6amGn6k8FsH1KVClBledXR42quheHyojqqEWzqm9ZM48qqpSkqvOroxapureHlRHVUR+nyotVzkgVVUpWxVstR4Ug9qfOLFpealRHnZR17z2vVe5r6wF+osqUVG31etTKf/fnW1ZUR31OVTsK0H5UUWWKqvYk1lEr/92jwrKiOmo7Uvfoedo8EVVUqYAqLVyNCuU0opplnnfaLEyJKhVRhYWrGGVt3XbVwP+/d6W9rKiOmp+sSlQtTIkqFTPtOGTdvlRWVEd9XlU4A8BBKaJKRU3zDqFR8eodTcdl+aREwDuLT1Xfq+qOKVGlwqZ5x9WoOExrJJ11WqJMVvpFlZqEdRpPDKjygtCwqYZpRbXqj5xBVOkyjR0BoxaEem9WiMvySYkzBrp/qFQtqhHUGKFa6RdVhDX3yKv38SVlLVSFYadVTWME7ZEookpNlb3VatBotd8CWplRHXTa0zRG9LZOiSrCmklc1r96cMf8pW1Ea8lcTPvdsVRmVDthjTnft9655L5oZnmy9LJbBBVRJbsqnhtadlSnzSEpokrDVO2U+zZFVVBFFWEVVUFFVKlTWNNGNRaSOl6fC1SaOcmqRHXU3VyIKg1RhTNE00a1+2SrUTcYVCmq7pYSVVqkCg8QbHJUBVVURVVYRVVQEVXqHNYmRlVQEVWmFtamRVVQEVWmGtYmRVVQEVWmHtamRFVQEVUqEdYmRFVQEVUqE9a6R1VQEVUqFdY6R1VQEVUqF9a6RlVQEVXGMqmzAuoYVUFFVKlsWOsWVadNIapUOqx1iqqgIqpUPqx1iaqgIqpMVFHPvKpDVNN+PBBVph7WqkfVQ/oQVUoPazxMMO/TSKscVUFFVJmKeAR17GXNE9YqRvXkyZ/Mb5k69s5jrEFUmUpYP7tqS3LuuR+udVQFFVGlMvLcfVWlqMam/t1Pb06OH3/TFxNRpTphjRFr2gcKViWq7pJCVKm0tHtZqxBVe1ARVWohTdSmHdUDB3ck33z+YV8sRJV6GLWXNQKZRnccjx49mBw5emDk71l44dKh0xC2TCGq1NI4W64mIVb4d+/ZnCrMIKpUNqwxzzqNx2B3O3Hih8lTc0G1ZQpRpfay7gwomhV+RJVGmtSB18NY4UdUabSiTrlKI1b3Y5UfRJVGi9X51au2TGwBKxakYnQ6O/uCFxtRpR3OO+8jyeqbthS+gBXzpxFUC1KIKq0TC1jXXXt3YfOss4f3J3v33WdBClGl3Yo4VNop/YgqdMk7z2r+FFGFAbLOs5o/RVRhhLTzrLH/9LnnHzZ/iqhCGsOegWX/KaIKOfSeG+D+fUQVCjAzc838Py1GIaoAogqAqAKIKoCoAiCqAKIKIKoAogqAqAKIKoCoAiCqAKIKIKoAoiqqAKIKIKoAogpAvaIajyW+4PyLfTWAXN469t3KPK68ElFdeOHSZO2a7b4zgFx27lqfHDl6QFRFFRBVUQVEVVQBUW1NVAGaQlQBRBVAVAFEFQBRBRBVAFEFQFQBRBVAVOGUy5fekVx7zfrT//uvH/9c8uMff8cLg6iCqIKoIqogqgCiOsIHP3hJ8oXbv5rp95x4+0fJI4/+5vx/v/OOf0zO/cCH5v/7yZM/TbZuWzb09/7GdX+SXPqpG07/76/t2Jh8/wcvzf/3G1ZuSX75kuVnfYy8ZhatTFav+tO+n3evTy+7J7ni19Zm/hiv/MvO5J9femjir3PHLTd/NfnYRy8Z+vv++0f/lczOvjL08xo1Uu39OINGsr1/r+df2J68euDRgR9n0K/r+J3VjyWf+MTlQ1+Hol5LRLWSUR0WyX5uX7cn+cUPfbzvN3rRUe393IZ9fk2Kandc/+7rf9g3hlmjOujvmTeqr/37M8k/PffHZ/37TRtfShYseJ+o0t6oLll8c3L9irtTReZ9770g+f3fe3bgG6voqPZ7gw56Mzcxqp0/48knP5/89GdvjRXVuArZ/uXPnvXn5I1qBP/xJ1aleo1ElVpHdfeeP0pmD+/NHa9+b5aO3gDve/bh5PU3dkwkqr2X/nneXL1/Rp7XpsjXuTd23//Bd+ZG3p8763P+9Ke/cPpqYFD4s0Z10J+TN6r9poq6vz/i/+98T42K6jhfF0S1klHtnQf7y79acdaIpvfX9XtTFRnVfpf+aaco6hzVftMs/UaZeaLa78/JGtX4odv5vHq/Dt1fs+5fJ6q0Lqq9I9BBixDdI9rvfe/V5G93b5hYVHs/Vnf0016y1zmqo74meaLa77XLGtX/+M7+01/j3iuVzg/diPfh73174PeCqNL4qPbOlfYL5sc+umzujbptaNiKimpvDOPNe/nlv3t65DNsiqIpUQ333vPawK9JlqhmuRQfFdX4unfmrnvntzs/COPvdfz4MVGlvVHt9ybsvbTvXQjqN0VQVFS7LyM7n0vvx08zBVD3qHZPAfT+IMkS1fg4p34wXnJWOLNGNf7ende0O/TdP3QjtgsWvF9UaXdUe6M16NJu2EixqKj2m2ZIM1JuWlSH/aDLGtVvf3vn6dei+2uTNarxcT5/y/b5r0/359Q9XRHfOx//+FJRpRlRTaPfN3Hvn9N9aRfTA+u/+NTp0A3a1lREVPtd+nfinnaXQhlRzfs6Z4lq9+sZHnzo0txRjY/T/e86r2ueqP72b/3B6T+n83G7ry7iKuKTn1ydOqp5X0tEtdJRHXa52btoMujSu4io9q76d08zZL1RQVTP/DjdX8fOv8sT1Us/teb016ET587H64xeh30viCqtieqgaPWb4xwVgbxRHbbDIMuNCqLa/+N035Ycn9///O9/Zo7qJb+08vRUUedr0Pm6dX4YiyqNieo433yD5i27R7CxpeaZvZsnEtXeCPZGs3caYtQUQN3nVIftC84b1e7fF//+7//hzzJH9b3n/MLp75P4wfev//Y3ZyxSxdRQlqgKJo2Nau9IMd50e/bcdcZ2q94FrCKjOmzD/yDDpgCs/vf/ON2j1Yho95+TJqo/++mPT39PROxffuWrp39N5/eLKqI6IGzd+xJ75ziLjmq/e/1HGTYFUPeoDpsKGSeqvaPV7psE0t5k0Hv10vm6d37IiSqi+o7eecvujeNZ5gCzRnXQvf6jDJsCqHNUez/3ce6o6v04vdMo3dJ+nH5H/HVPUYgqoppixDhqYWicqGZZ2e99Qw86K7TOUe2dTx3n3v9+H2fQqV5po9rv93f/gBNVRHVItNKEbtyoZtmD2u/WyX6xr2NUY7HwV3/l82e8/v32BY8b1UGj1bRR7b2i6f08RZXGRDWtYc806nfcW5rN9r1bgEbpvNl74zfo5oLuIHQvng363Ka9pWpU7NIo4jzVQSPifqPNtFHt/Rr0/t6it1SN+p5FVCsd1X5vmFGhGyeqWTf194tTv79P3aNa1Mn/g6Lab7SaZe62d5oo7aN1RJXWRbXfm3/YVqpxo9r95kzznKx+o6x+UwB1jWqs9L917HBhz6gaNnfb+zXLEtVh+2hFldpGFUBUARBVAFEFEFUARBVAVAFEFUBUARBVAFEFEFUARBVAVAFEFUBUARBVAFEFEFUARBVAVAFEFUBUARBVAFEFEFUARBVAVAFEFUBUARBVAFEFEFUARBVAVAFEFQBRBRBVAFEFEFUARBVAVAFEFQBRBRBVAFEFEFUARBVAVAFEFQBRBRBVAFEFEFUARBVAVAFEFQBRBRBVAFEFEFVRBRBVAFEFEFUARBVAVAFEFQBRBRBVAFEFEFUARBVAVAFEFQBRBRBVAFEFEFUARBVAVAFEFQBRBRBVAFEFEFUARBVAVAFEFQBRBRBVAFEFQFQBRBVAVAFEFQBRBRBVAFEFQFQBJuH/AShUvCl/urhNAAAAAElFTkSuQmCC"},{nameFront:"c22",nameBack:"Devletler, m\xfclteci say\u0131lan veya m\xfclteci stat\xfcs\xfc kazanmaya \xe7al\u0131\u015fan bir \xe7ocu\u011fun, di\u011fer t\xfcm \xe7ocuklarla e\u015fit haklardan faydalanmas\u0131n\u0131 sa\u011flamal\u0131d\u0131r. Devletler, m\xfclteci \xe7ocu\u011fun ailesi ile yeniden bir araya gelebilmesi i\xe7in y\xfcr\xfct\xfclen gayretlere destek olmal\u0131d\u0131r. Bunun m\xfcmk\xfcn olmad\u0131\u011f\u0131 hallerde, \xe7ocuk koruma alt\u0131na al\u0131nmal\u0131d\u0131r.",icon:n.p+"static/media/c22.16b2df744a76005c1e9e.png"},{nameFront:"c23",nameBack:"Engelli \xe7ocuklar, sayg\u0131nl\u0131klar\u0131n\u0131 g\xfcvence alt\u0131na alan, \xf6zg\xfcvenlerini geli\u015ftiren ve toplumsal ya\u015fama etkin bi\xe7imde kat\u0131lmalar\u0131n\u0131 kolayla\u015ft\u0131ran \u015fartlar alt\u0131nda eksiksiz bir ya\u015fam s\xfcrme hakk\u0131na sahiptir. Devletler, engelli \xe7ocuklara \xfccretsiz bak\u0131m ve yard\u0131m sunmak i\xe7in gereken azami \xe7abay\u0131 g\xf6sterirler.",icon:n.p+"static/media/c23.1880e80bac4c8bfd30df.png"},{nameFront:"c24",nameBack:"Her \xe7ocuk m\xfcmk\xfcn olan en iyi sa\u011fl\u0131k d\xfczeyine kavu\u015fma hakk\u0131na sahiptir. Devletler, \xe7ocu\u011fun sa\u011fl\u0131kl\u0131 kalmas\u0131n\u0131 sa\u011flamak amac\u0131yla kaliteli sa\u011fl\u0131k hizmetleri, temiz su, besleyici g\u0131da ve temiz bir \xe7evre sunmal\u0131d\u0131r. Bu konuda zengin devletler yoksul devletlere yard\u0131mc\u0131 olmal\u0131d\u0131r.",icon:n.p+"static/media/c24.bb6686b35b04717b9132.png"},{nameFront:"c25",nameBack:"Evinden ba\u015fka bir yere (bak\u0131mevi, hastane veya cezaevine) yerle\u015ftirilen \xe7ocuk, g\xf6rd\xfc\u011f\xfc tedavi ve yerle\u015ftirilmesine ba\u011fl\u0131 di\u011fer t\xfcm \u015fartlar\u0131n belli aral\u0131klarla g\xf6zden ge\xe7irilmesi hakk\u0131na sahiptir.",icon:n.p+"static/media/c25.289b2367447d9259744d.png"},{nameFront:"c26",nameBack:"Devletler ihtiya\xe7 sahibi ailelerin \xe7ocuklar\u0131na daha \xe7ok mali kaynak ay\u0131rmal\u0131d\u0131r.",icon:n.p+"static/media/c26.3b121a081271bcc1d824.png"},{nameFront:"c27",nameBack:"Her \xe7ocu\u011fun bedensel, toplumsal ve zihinsel geli\u015fim ihtiya\xe7lar\u0131n\u0131 kar\u015f\u0131layan yeterli bir hayat seviyesine sahip olma hakk\u0131 vard\u0131r.",icon:n.p+"static/media/c27.fcc15736b9152a8915f4.png"},{nameFront:"c28",nameBack:"Her \xe7ocuk e\u011fitim hakk\u0131na sahiptir. \u0130lk\xf6\u011fretim paras\u0131z olmal\u0131d\u0131r. Her \xe7ocuk orta\xf6\u011fretim hizmetlerine eri\u015febilmelidir. Okullardaki disiplin uygulamalar\u0131 \xe7ocuklar\u0131n insan olarak ta\u015f\u0131d\u0131\u011f\u0131 sayg\u0131nl\u0131kla ba\u011fda\u015f\u0131r bi\xe7imde olmal\u0131d\u0131r. Bu konuda zengin \xfclkeler yoksul \xfclkelere yard\u0131mc\u0131 olmal\u0131d\u0131r.",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAWcAAAHHCAYAAABjpJljAAAACXBIWXMAABYlAAAWJQFJUiTwAAAGjmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDYgNzkuZGFiYWNiYiwgMjAyMS8wNC8xNC0wMDozOTo0NCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIyLjQgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMy0wNC0xNlQxNjo1NzowMSswMzowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjMtMDQtMTZUMTY6NTc6NDIrMDM6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjMtMDQtMTZUMTY6NTc6NDIrMDM6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NjQ5ZmY4MmEtNjgxYy1lNzQyLThjZjktNTQ1M2VhYjljYmFiIiB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6NzM4NjZmY2QtMzkxMy0wNzQ3LWEzNjAtYTVlODhhMzJlYzQyIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6Y2NlNjJmNzUtM2YzYy1jZDRkLTg4MzItZDcxZDEzMDEzMjVjIj4gPHBob3Rvc2hvcDpUZXh0TGF5ZXJzPiA8cmRmOkJhZz4gPHJkZjpsaSBwaG90b3Nob3A6TGF5ZXJOYW1lPSJFxJ/EsHTEsG0gaGFra8SxIiBwaG90b3Nob3A6TGF5ZXJUZXh0PSJFxJ/EsHTEsG0gaGFra8SxIi8+IDwvcmRmOkJhZz4gPC9waG90b3Nob3A6VGV4dExheWVycz4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpjY2U2MmY3NS0zZjNjLWNkNGQtODgzMi1kNzFkMTMwMTMyNWMiIHN0RXZ0OndoZW49IjIwMjMtMDQtMTZUMTY6NTc6MDErMDM6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMi40IChXaW5kb3dzKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NjQ5ZmY4MmEtNjgxYy1lNzQyLThjZjktNTQ1M2VhYjljYmFiIiBzdEV2dDp3aGVuPSIyMDIzLTA0LTE2VDE2OjU3OjQyKzAzOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjIuNCAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+CU3CCQAAHoNJREFUeNrt3W2MVteB2PGbD+2HxCaVupGM1rhbKZTUoEpOasdgmW67rAdI1awNzDS77YJ58Uo168HGjZxAABMTu1tjG5esth5eW3kjxtjZ3e4ahh3vbrEMjq3Y0grcsKRqZUghSrXtOtl8aD+0c8Z+Js8887zd+7yde+/vJ1lgGGbu3Jn5z5lzzz33YxvXLPo7f+NvfuzeBIAo/N//8/++/bFlNy34xanf/6nTARCNfyzOAOIMgDgDiDMA4gwgzgCIM4A4izOAOAMgzgDiDIA4A4gzAOIMIM7iDCDOAIgzgDgDIM4A4gyAOAOIs3MBIM4AiDOAOAMgzgDiDIA4A4gzAOIMgDgDiDMA4gw0dMO8ecnCJYtn/dn1K1eSa1euDvzYblu2dM6fvXvuvA+aOEPxLF85lCxfNZQsXHxr8ump/5r5yQc/Ti5fvDgdxLOnzkz/vpfHFWK8cMmtyW1L72z58u+efzO5fOG9D4/t9IQ4A/kcHY88sCkZ3rJ56vc3Zn4916/+IHn1xHhy4oXDU+H+IJrjCt9ExscOde24xBnoy0h5x4FnOopfvUg/MfpIR1MMvTiuEOl9U8dVgpG0OEOeje7dMzUq3diz179v2/apkfRLhTkucQZyH+asIRzZsil5aO/u6I5LnIGeC1MGTx4d69vb27BiVVsXCxcuXpwcmzzVl2MKUxwbVgxFsepEnIFpL799Prnp5p/v29sLKye23jfc8uUOvjLe1kqMbjk1fnJ6blycgYFbPbIu2fHc/r6/3a1rRppeIOznqLna2juWFXH0LM6QN8cnT7dcv1xv5BvmZysRC9MiaeerW41Ss8yBh1UhZ09NTEc/rIEO67PT/kTw/K7HkxNjh8UZGJywbnji0oVU/+b7F99L1q9YOefPQwwPvnyi7dcT5niHFi3u2jeNcFwP3jc8a91yeP+OvzaRKtDtTrmIM9AzWYLa7KJZ2jniZlMIb1x7P9X70ugiY7e/aYgz0HObHn042bj94a5NRaSdv24075x2vrnVaDftKHxo0ZKi3TkozlDkOLdaC5w2qo1eX9rR7pH9zyaHn3624d+nnb9udbFSnIGo4txOtNJMRzSKato4tzqutOu4xRnIVZxb/bg/f8HNycm3zkUX526/PnEGoorzXfNvafr33ZqOEGdxhlILI92bFixo++VbBSvtPhiNIijO4gx00VNHDyV3r7yn7Zfv1vK3r9y/pem2n2lXkbS794c4A9HLckNLo2mStK+r26s1Wk3fiDOQG2nnr1utTZ64dLHtjfW7uc453AK+5val4gwUY9QcdrZL85SSVntYDGqKpKA704kzlNHOA88kq4bXpvo3rXZ/SztPXG/Pjyx7axTwYqA4QxmlHZm2Mw2RZTqi8noru+WFlShh9Ujaf1/ATY/EGco4nZF2ZJpmdNrvJ6GEMBdslYY4Qxllmc5IOzrtx8MASvAUbnGGssgazSxzumEE/dSxQz15lFaYq35idHtRR8ziDGUS5nOPTU6kWp2RZdRc7xtC2MQozSqORl4/fWZ6frrAo2VxhrLJ8miroNM778LFx7CeuhsPfQ1xDkv5CrgyQ5yhjLLMMwedrB8OFx7D2+3GiLlepMNxFWxzfXGGMsk6zxwuuIW77rIEsJfzzRX1nj8ozkAuhEiGZwSmnWcOWm1M1GzE/M2pt5llCkWgxRkKr5NIhmmDx+7fnOntZl2qV5F2bnp87EhyYNcecQbyIe0+FxWdTGekvfMwjHzDN4HqW8LDqpJw7Gm+qbS6rVycgSik3UC/WtbpjLSj5vBNYMOKobpRTXuXoY2PgOh1cvt0p1MEabYMbfW20oZ+aNFicQbilGUb0IpObzZJO6XRav10t1+fOAMDE1ZmZLnZo5N55opuP3g2eOPa+22/vn3btk/fPSjOQFTSxrE6zN3Y2S3N2293lB5+Cmh3rXSrx16JM9B3Ye+KJ4+OZfq33Rpxphm1txvnNK+zgBcFxRnyLOuGRt0ebQ46zgXcdF+cIc+ybmjU7ZGmOIszBR8F3rRgQXLjvHnJwiW3Vv35gqk/v3nm/69fuZpcu3Jl5v8vX3gv+fEHH0z9erHom+HMMrp3TzK8ZePAwyzO4kyBhPW4IcCfXbZ0Orzd2FKy+gs1BDtc5ArbSxbw7rHMGxr1KmK9CGmanwrEGTIKa3CXrxqajvHdK4cyzZFmdf3qD6YjffbURPLO1K95H11n3dColxsFpYlzvadu15NmKZ04Q4Ygd+tJGN0SNvYJtyjncV1s1g2Ner2DW9o11kOLljQ9ljDFdfKtc+IsznR7ZDfywKa+j5DTCmt8Q6DHxw7lZuojy65v/dhaM+1xtdrDI+20jXXO0EQ3H0k0iNF07I9AyrJvRrduMmkl7U0wrbYlTTsSf37X49MfP3GGgkS53o/HYQQWY6TT7jdRidZfTI2cu3qO6pybLMfWaLSbZRWKvTWgSpgX3DH142wRolxvZBd2TYtpuiNLAHuh0b4YaXalqw70O+fenA5+eP++MLIu9bSNXengI+Gi1KZHH8m0xjZvYprLjD3OWR8k2yn7OcNHgQhfhL18eGdswlK88MU/6KmO2OM8qOPzJBSMlksyWo51FB17nIOsj8fKyjMEKbWwSmDngf19eaJy7Oo9906cZ38T9/RtcaYPwg0k4aJfzOuV+y1cgAqB7vc0Rx7iXPlm/tSxQz2d+ip4mMWZ5rJu4F4W/X76Rl7iXBlBh2sTvZjiCCtpwjWAgm9yJc7UN6gr73nTz5UCeYpz9TF3aw18zGvQxRlhLnGgw7rycFvzoGW5KBqOfXqPlVVD09Me7UyThemjcGPJ66cmpm/1LuLuguKMMBdoBF0EN0zv2d34xpGSjI7FGWEWaMQZYRZoJwJxpnNZH3dEfQXcIQ1xpt+yPu6I5lrtVwziTENZ9gemPf3aRxlxpmDC1fLjr02UagOjfivBXWyIM93W7w1qyqrAG/MgznTbyJZNyUN7dzsRfWL+GXGmpXCn1rHJCRsZ9VGYf15z+1LTG4gzjZnOGAzTG4gzDcWycU5ZbV0z4rZkxJm5Xn77vNUZAxR2VQvL60CcmeFmkzj0ew9oxJmIhTXNYdTsIuDghYfFhouDIM54oonRM+JMjMw1Gz0jzkTGXHOc3JiCOJfc8cnTfXlMPemEh5SGJ3iDOJeQXefitvaOZWV7Lh7iTODpJnE7sv/ZTA9LRZzJuYlLFy2fi5gLg4hzCYXH0D95dMyJiNyGFatsyI84l4kpjXwwtYE4l4y1zfkQnpayfsVKJwJxLgOrNPJlaNESez0jzmXgSSf54oYUxLkkzDfni434EeeSMN+cL/Z5RpxLIGwPOnHpghORM3fNv8VJQJyLzKOo8sl6Z8S54FwMzCfPF0ScC87G+vnkZhTEueCeOnoouXvlPU6EOCPOxOTgK+PJbUvvdCJyxooNxFmcEWfEmX5749r7ToI4I86IM91gb2fEWZyJlBtREGdxRpwRZ8QZcUacxdlJEGfEGXGmG6zWQJwLznah4ow4EyE3oYgz4ow40yWnxk8mT4w+4kQgzkU1undPMrxloxORMzY+QpwLzpah+fT8rseTE2OHnQjEuaiWrxxKnjw65kTkjM32EeeCW7h4cXJs8pQTkTNDi5YkP/ngAycCcS4ya53z5Scf/HgqzoudCMS56KzYyJfXT59JHrt/sxOBOBedFRv5YqUG4lwSLgrmi4uBiHNJ3DBvXjJx6YITkQPmmxHnkjk+eTr59OJbnYjImW9GnEtmZMum5KG9u52IyO3btj159cRLTgTiXBbzF9ycnHzrnBMROeubEecSMrURN1MaiHNJmdqImykNxLmkrNqIl1UaiHPJ7TzwTLJqeK0TEZnxsSPJgV17nAjEuaxshBSntXcsS65duepEIM5lZq+NuHjqCeLMtNuWLU0OvnzCiTBqRpwxesaoGXHG6NmoGXEmr6zcGCwrNBBn6gq3dB+bnEhumHejk9FnYV3zmtuXulUbcaY+dw0Oxlfu35KcPT3hRCDONObiYH/ZQwNxpi2mN/rHdAbiTCqrR9YlO57b70T0mOkMxJnUrN7oLaszEGcyCbvWffOVcXs+98D3L76XrF+x0olAnMnG/HP3Xb/6g2T9Lw2ZZ0ac6UzYuS6s4BDozoULgFvvG04uX7zoZCDOdG75yqHkyaNjToQwI87ExgqOzmxYsUqYEWcEOqYRc7jJ5N1z550MxJneBnp07x5z0G2G2VQG4kzfuEgozIgzEQd654H91kHXEdYxPzgVZsvlEGcGItyoEu4kvHvlPU7GR8LTTJ772h5hRpwZPFuNfjiNEW7HfvXESz4hEGfiUeZpjjCN8cTodvPLiDPx2vTow8nG7Q+XZrQ8PnYoOfz0sz7wiDP5GEWPfn13oTftf/f8m8m+0Uc8kBVxJn/Cbd+jX9+T3HTzzxfmfQpTGM/tetxNJYgz+RduXNn06CO5jnTYTe7w08+44Ic4U8xIh//yNN0Rpi/CnLKRMuJM4YU56ZEHNiV3rxyK8i7DcKEvjJDDxT5zyogzpRTmpZevGhp4qEOQXz89kZw9NeG5fogzVLtt2dLks8vunP61H1MfYcoiTFecPXXGGmXEGdoVpj8WLrl1+nFZIdg3zpuX6SaXEOHpX6dCHKYpLl94T4wRZ+iFEOybFixo+PeXL1y0vwXiDIA4A4izOAOIMwDiDCDOAIgzeVVZJhd+Df91U1jnHP67fuWKW7MRZ2gm3GwS7gy8e9XQ9O/7dRt3uGU73IziLkHEGaqCHHaoC/tqxLKVaNgWNOytETY9EmrEmVIJQQ4PhI39WYOV/ZtDrN1piDhTWOHZgqtHhnO34X7lOYEnXjgs0ogzxRop5/0pKJVIH9i1x5NQEGfyragPefUMQcSZ3ApTGBu3P1zo93F87Mj0nLSpDsSZXIyWdx7YH/3Fvm4JFw0f27DZyg7EmXiFueXRvXuifCZgrz2/6/HkxNhhnwSIM3HZeeCZZNXw2lKfg1PjJ5PnvrbHNAfizODdMG9e8s1XxkszjdFKuFj44H3DAo04Mzhlm19ul3loxJmBhvng1Ii5jPPL7QhrordOjaAFGnFGmAUacUaYhVmgEWeEWaBBnJkrbHh/bHJiTpgrmwKF/SbKvnF9+MbV6FZ1gUac6bpGy+UEp/04B2EVx/pfGrLMDnGmO45Pnq67XG7ftu12aEsR58A6aMSZrmh2599d829xglLGOQh3Ej4x+ogThjiTTdgrY8dz++v+3bvn35ye0qgW9tVYuKS8N6SkefahvTgQZzKH5tjkqYZ/Xy/O7Y4c+dDWNSP2hEacaV+4AHj8tYmmTy4R586FC6prbl9q/hlxpj1PHT2U3L3ynqYv0yrO4e/LYP6CBR09fqveeQRxZo7wVOyH9u7OFJXqOJflYmE3nvhi/hlxpsUosP6NJuLc2zgHG1assl4ccaa+NHPG5py7K6x/Xr9ipROBODNbu9MZ4tw7R/Y/mxx++lknAnHmQ2mmM5rF+Y1r7zuZHQirNzasGCr9HiWIMx9pZ3WGOPeH1RuIM9NuW7Y0Ofjyia5EpDrOLghm95X7tyRnT0/45EScy+zlt89nWqcrzr2Ls93rEOeSS3sRME2c3YTSGRcHEeeSCrdoh1Fz1qeamHPuLbd2I84l1emP4+Lce7YWRZxLJsvSuXoju6FFi2f92fSWmZ+cV9rzum3v7roPJejE2juWWVqHOJdFsw3007Dl5Wy9uAnH6BlxLtGo+eRb57ryujxyqfdxNnpGnI2aMwf6sfs3i0cP42z0jDgXXFihMXHpQssQXLtyJfXrfufcm8n1qX+X90iHm3L+3uJbM82drx4Z7smyOqNnxLng2lmhYR75Q52sAe8Fo2fEucCj5nbWNYtz9Ui48QNu+826Z8S55KER59mOT57u+vK4rNw1iDgXULt7aIRHJv3FxfdKe54uX7g4a3Tai70zsgp7boTRM4hzQWTdea6MakenMU1tBPu2bU9ePfGSDxTiXARZ9msW5zi/sdnvGXEuiE5uOinjznKxxzmwrA5xLoBO5kzLuCdzHuI8PnYkObBrj09ucRbnPMu6mX5Z41w7pxtjnF0YRJxzLuwSd2zylBORQu1SwlgvpnqUlTiLc451ex8NcY6HOwbFWZxzbOLSxY72bBbneOPsjkFxFuecWr5yKHny6JgTUdA4B9Y8i7M451A3pjTKeEEwT3F+/fSZ6e1aEWdypBtTGuIcd5zrPSoMcSZi3ZrSKONNKHmKc2DVhjiLc46M7t2TDG/Z6ERkkLc4W7UhzuKcI53ceFJ2G1asSi5fvJibOJvaEGdxzs2P6J09wDU8E/DHJV6eVbupUGxPRGnnGwriTIQ6jYnN9mfLwxSRTfjFmRzodHtQcf6Z8Giv469NRD9FZBtRcSYHOl1CJ84/k6fb38uy7BFxzqVuXLwS5w+XIg4/sCm5bemduTlmHzdxJmKDfN5d2MZy/IVDyTvn3sztxakwjbFwSWcrH7bt3T2QB8KadxZnIjaox1FZa/szB18ZH8iI27yzOBOxQexCJwpxxDkw7yzORGhQG+u7fTieOJt3FmcitHpkXbLjuf0DH62Fi5KfXXZniT8OwwNbevf8rseTE2OHfTGIMzEZ1M0StXEe5EXJsjP3L874cVqcIxRuvV+/YqUTIc7E5I1r7w/k7YpzXFwUFGciMsinbDeLcxk36x80FwXFmYgM8nmB4hxXnF0UFGfEoW6Aq/ejKOOTVAZtfOxIcmDXHl8U4kwMYrrxYZDHgpuCxJmoHJ88PZD9HMQ5PmGPkzW3L3UixJkYDGqlhjjHyYoNcUac5+yGVh3nsHKgDL4wsi6qfZ+HFi1JflLiR42JM1EI21xOXLow0GMINz88dv/m5NqVq7PibLXGYFhOJ85EIJanQ4enQIcLUaNf3z0T5zCqLsvHIKapHHEWZ8R5zgg6GNTFScRZnInKIOecic+GFaty+zQaxFmce+j102dKE4dw6/wgnj7TjNUa4kwkBvEElGbKdCPEoB4NJs7iLM45EOPa4rV3LJtevVFkMayUKfM3RnEW5+jFuE1nGR5fNcgNpxqxt4Y4IxJNhady/NGJlwp93mO7+aQs3xQR51yJbd6ZwXB3oDgTmeqtOiknzxAUZyI0f8HNycm3zjkRJebmE3HG6LmtUZw55/6xSkOciXz0fGxyIoq55zJcmIrp1vkyLF1EnHNtZMum5KG9uwd6DGETpKFFi0txvmO4EOu5geJMTgx6eqN2j+ciG/Qa83CrfNiuFXEmJwb16Kowag6PSSrLcq5wl+Dx1yYG8oDXsAvgg/cNWzonzuQtGmEE3e99H8p4E8Qg5p7DBcDHNmwWZnEW57wa3bsnGd6ysS9va9+27cmrBV+h0cjqkXXJjuf29+VtuUUbcS7QyC6Monv5o3eZw1wd6PDNsFcXCMOTtcNNJtYyI84FjMemRx/paqTDj9cHvva4zd0/EvZ3rn5UV7eiPP7CISsyEOeiCxslLV81lNw99WuWUV646Pf66Ynpm0yM4hr/tBJuUun0HJ89NWEjI8S5rCO9hUtunb6BJfz+hk/Om/Myly+8NxWLv5r+NYyQ3eyQTuXchvN8w7xPTv86J8Z/9cHMua2cZxBnAHEGQJwBxBkAcQYQZwDEGQBxBhBnAMQZQJwBEGcAcQZAnAEQZwBxBkCcAcQZAHEGEGcAxHlG5ZHzAFkc+NrjRXpwbjxxDo+aP/jyCZ9hQCZb14wk7547L87iDIizOAOI8yDMX3Bzsnpknc8wIJNXT7yUXLtyVZwBEGcAcQZAnAEQZwBxBkCcAcQZAHEGEGcAxBmAQsb586vuSZ45cigZP/4fkgOP7Zz589GnnkiG1/96svGf3Ztcevu7PuSAOPfbH3//e8lPf/rXyZc3PTAd4hDsr/6bJ5OPf/wTyS9/+jNN/+3Gr3452fSbW3/2/12O+e//+XeTn/vUp6Z//58nJ5Ov/suNPv2AcsS5MkquVTuaFmdAnPssRPZLGzcmH//Ex5Of/vVPk28dOZIc+cZvtfXvxBkQZwDiivOi2z+XHPmDb6f6N//zRz9KvvgPPtdy9Pvpv/+Z5B+tWDHrz8NI9fv/5XtNR9DNRs5vXHs/0/t51/xb2ho5177tisP/7mDdY37+2y8ln7vz86nPT7OPwd5H/3Uy8WL9J9F84z8emTmn37twIdn0y6tbvv7Df/xq8pklS1q+L1mP6Vvnzia3/N1fmPX+V641pDnmdQ/+RrJt545Zf1Y9DVb7sWl2TCDOdV7fngPPzvpiref9//bfkz2jD9edrogxzq9++/eSff/qoTl/Hi58hmmbWOP8qVtuTn7vO+dm/dl33/xO8tC967pyTDt++/lk9b2/MvP/Yfpq528+lHzn1JlUxxze3sFvvTjrXLb62Igz4txmnOt9gbV6PZv/6ReTH71/Nfo4h28mX1q2vK1zF1OcG12Y/ZXPL5tz3tMeU72R7nNP7Ete+ua/T33MtaPveudbnCl1nDv5hK+OXmWE9uILYzOjqPDF/C9+44FZL1PvglzaC4LVP7a3E6wscQ4jwtolgNVxCn9f+aYUU5xrpzTandpodUz1vhE3+umi1THXG31v/dKvzfmYizPinOETvnaE1mgVRL0v6tpRXExxDiO4yojukY2bZ/24Xh2V6peLJc71pjTandpodkzh9R76w9+f84240etrdsz1Rva151mcEecOPuGr515bxan2C7L2R+GY4hz+vhKW2uOsXAwMI723z5+beblY4lx7nkNAKxcvwzH/6j9Z0XBqo9kx1V4EbTQ91eqYK3eSVmu2Dl6cEeeUn/C1c4+tbjQJI6/f/ZPJ5A9Pnkz+x5Urc+YoY4pzeF8qgav9sb3yDSm8zR9evx5dnKvPSxjZv/Lii7M+TvXmh1sdU23wG01BtDrmeqPvRtMi4ow4Z/yEr/2CbfRjabtiinM4H7ue/rdzfnSvHvWFqHzixhuiinPtlEb4JvO7v/07098UKz/hNJuKqHdM//sv/9eckW6zwDc75trRd70LgOKMOHcY59ovtOqVEXmPc3jblTny6ouC1T8thEDdNvX+xxTnRt8wqz9WzaY2ao8pvI+1F3Pb+djUO+Y//+47c+aZ27lTU5wpdZzbUftFUR3Heqsa8h7nL3/j6zOvv3Is1RcDQ/i++Kv/vGtxblez97V2SqMyKm0139/omML7VBvmdqNaHedGr6edj7M4I84dxLlRmGqX2TWLTGxxXnv/+pkQV2JWeZuVb0a1ARpknGunNKrncmv/rtHURppjavXxqT43zbQKvTgjzh3EudG0Rp7jvHLNvTOjzcrFzsrFwMqoNKY4t7oGUH3DR6OpjUbHFF7+z86cmbUuuVVUG8U5fNP4xXvumbWsstnHWpwpdZyzfMLXfvHVu/ssz3H+Wz/3t2cuhFVurKm+GBhGpd2Mc6dzzq2mmdqZ2mgU5/Cyf/af/mjWhcU0x1xR+aZWeyzNPn7ijDh3uFqjnSv4zYIaW5z/8oc/nJkKqGx9WnmZyp12scS52Y0njdSb2qgX5+olkmmiWhvn6o2RKssq2wm9OCPOKT/hh35tZGa5WfVosihxDm+7eiqg+saUypRBLHFutJdGM/WmNmqPqTbgaaJaG+faaZZ2Qy/OiHOGT/jq4LW6+yyPca63NWj1lEEscW60l0YrtT/ttHNM7Ua1ndF+O6EXZ8S5C3trNLvBoXaknYc41xuRVi9RiyHO7a7ECGpvna49D+0cU7tRbWeevJ3QizPinPETvnbbx/AFNn7s+MzrC1H+wtq1c0ageYhzve0xq6dvYohz2rn/2p92qi8ctntM9eaTa9/3dvdzrp3jrt05T5wpdZzbVS+Y4XX91uEXGq7KqKfe5uwxxrnehbbqeMQQ59opjVZ7Ntdu1Vkd83aPqZ2otntXY6vQizPinDHOlddXfUddMyGMz+7YlWqz/UHFOah96kn1ha1BxznNlEaj6aXqc5H1mOq9/+3GuVXoxRlx7iDO1V/4//Cuu2aNzCrR+K+XLk1vwtNoVBdrnGv3paieBhh0nGunNFrtDFhR/Q2n+n1Kc0ytoppmJ71moRdnShVnAMQZQJwBEGcAcQZAnAHE2bkAEGcAxBlAnAEQZwBxBkCcAcQZAHEGQJwBxBkAcQYQZwDEGUCcARBnAMQZQJwBEGcAcQZAnAHEGQBxBkCcAcQZAHEGEGcAxBlAnAEQZwDEGUCcARBnAHEGQJwBxBkAcQZAnAHEGQBxBhBnAMQZQJwBEGcAxBlAnAEQZwBxBkCcAcQZAHEGQJwBxBkAcQYQZwDEGUCcARBnAMQZQJwBEGcAcQZAnAHEGQBxBhBncQYQZwDEGUCcARBnAHEGQJwBxFmcAcQZAHEGEGcAxBlAnAEQZwBxFmcAcQZAnAHEGQBxBhBnAMQZQJydCwBxBkCcAcQZgC7E+RemfrPBuQCIxrH/D1D8FmXnXlrTAAAAAElFTkSuQmCC"},{nameFront:"c29",nameBack:"E\u011fitimin amac\u0131 \xe7ocu\u011fun ki\u015fili\u011finin, becerilerinin ve yeteneklerinin m\xfcmk\xfcn oldu\u011funca geli\u015ftirilmesi olmal\u0131d\u0131r. E\u011fitim; \xe7ocu\u011fu insan haklar\u0131na, ana-babas\u0131na, kendi k\xfclt\xfcr\xfc ile di\u011fer k\xfclt\xfcrlere ve \xe7evreye sayg\u0131 duymaya te\u015fvik etmelidir.",icon:n.p+"static/media/c29.c35be0e922a0ccc489fd.png"},{nameFront:"c30",nameBack:"Her \xe7ocuk, ya\u015fad\u0131\u011f\u0131 \xfclkedeki insanlar\u0131n \xe7o\u011funlu\u011fu taraf\u0131ndan payla\u015f\u0131lmasa bile ailesinin dili, gelenekleri ve dini hakk\u0131nda bilgi edinme ve bunlar\u0131 icra etme hakk\u0131na sahiptir.",icon:n.p+"static/media/c30.2fb5d043cd9f56d9a1a0.png"},{nameFront:"c31",nameBack:"Her \xe7ocuk dinlenme, oynama ve \xe7e\u015fitli k\xfclt\xfcrel ve sanatsal faaliyetlere kat\u0131lma hakk\u0131na sahiptir.",icon:n.p+"static/media/c31.cbc893c1be95abe79c69.png"},{nameFront:"c32",nameBack:"Devletler, \xe7ocuklar\u0131 kendileri i\xe7in tehlikeli olabilecek veya sa\u011fl\u0131klar\u0131 veya e\u011fitimlerine zarar verebilecek i\u015flerde \xe7al\u0131\u015ft\u0131r\u0131lmaktan korumal\u0131d\u0131r.",icon:n.p+"static/media/c32.5c994ee406c7a4c39cce.png"},{nameFront:"c33",nameBack:"Devletler, \xe7ocuklar\u0131 uyu\u015fturucu maddelerin yasad\u0131\u015f\u0131 kullan\u0131m\u0131na kar\u015f\u0131 korumal\u0131d\u0131r.",icon:n.p+"static/media/c33.e821b98d30045d378c20.png"},{nameFront:"c34",nameBack:"Devletler, \xe7ocuklar\u0131 cinsel istismar ve suiistimale kar\u015f\u0131 korumal\u0131d\u0131r.",icon:n.p+"static/media/c34.3878b30778b1473b5c2f.png"},{nameFront:"c35",nameBack:"Devletler, \xe7ocuklar\u0131n ka\xe7\u0131r\u0131lmas\u0131n\u0131 veya para kar\u015f\u0131l\u0131\u011f\u0131 sat\u0131lmas\u0131n\u0131 engellemelidir.",icon:n.p+"static/media/c35.74491714f3be473939b8.png"},{nameFront:"c36",nameBack:"Devletler, \xe7ocuklar\u0131 di\u011fer t\xfcm istismar \xe7e\u015fitlerine kar\u015f\u0131 korumal\u0131d\u0131r.",icon:n.p+"static/media/c36.19a15c152bd6c6ed1c53.png"},{nameFront:"c37",nameBack:"Hi\xe7bir \xe7ocuk, i\u015fkence veya di\u011fer zalimane muamele veya cezaya t\xe2bi tutulamaz. Bir \xe7ocu\u011fun tutuklanmas\u0131 veya hapsi ancak en son ba\u015fvurulacak bir \xf6nlem olarak d\xfc\u015f\xfcn\xfcl\xfcp, uygun olabilecek en k\u0131sa s\xfcre ile s\u0131n\u0131rl\u0131 tutulacakt\u0131r. Ceza infaz kurumlar\u0131nda bulunan \xe7ocuklar yeti\u015fkinlerle ayn\u0131 yerde tutulmamal\u0131 ve aileleriyle irtibatlar\u0131n\u0131 s\xfcrd\xfcrebilmelidir.",icon:n.p+"static/media/c37.4a0e8846c4b6a7175631.png"},{nameFront:"c38",nameBack:"Devletler sava\u015ftan etkilenen \xe7ocuklar\u0131n korunmas\u0131 ve bak\u0131m alt\u0131na al\u0131nmas\u0131 i\xe7in m\xfcmk\xfcn olan azami \xe7abay\u0131 g\xf6sterirler. Devletler 15 ya\u015f\u0131ndan k\xfc\xe7\xfck \xe7ocuklar\u0131n sava\u015fa kat\u0131lmas\u0131na veya silah alt\u0131na al\u0131nmas\u0131na izin vermemelidir.",icon:n.p+"static/media/c38.a554448bf69550924ba9.png"},{nameFront:"c39",nameBack:"\u0130hmal, s\xf6m\xfcr\xfc ya da istismar, i\u015fkence ya da silahl\u0131 \xe7at\u0131\u015fma ma\u011fduru olan \xe7ocuklar\u0131n sa\u011fl\u0131\u011f\u0131na yeniden kavu\u015fmas\u0131 ve onuru ve \xf6z sayg\u0131s\u0131n\u0131 yeniden kazanmas\u0131 i\xe7in \xf6zel yard\u0131m sunulmal\u0131d\u0131r.",icon:n.p+"static/media/c39.1d7c5dee047993530c11.png"},{nameFront:"c40",nameBack:"Kanunlar\u0131 ihlal etti\u011fi iddia edilen veya kabul edilen bir \xe7ocu\u011fa, insana yara\u015f\u0131r ve sayg\u0131n bir \u015fekilde muamele edilmelidir. \xc7ocuklar\u0131n avukattan destek alma ve ya\u015f veya i\xe7inde bulundu\u011fu durumu dikkate alan adil bir yarg\u0131lamaya tabi tutulma hakk\u0131 vard\u0131r. \xc7ocu\u011fun mahremiyet hakk\u0131na daima sayg\u0131 g\xf6sterilmelidir.",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAVUAAAHHCAYAAAAPostmAAAACXBIWXMAABYlAAAWJQFJUiTwAAAGjGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDYgNzkuZGFiYWNiYiwgMjAyMS8wNC8xNC0wMDozOTo0NCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIyLjQgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMy0wNC0xNlQxNzozNjoxNiswMzowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjMtMDQtMTZUMTc6Mzg6MTcrMDM6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjMtMDQtMTZUMTc6Mzg6MTcrMDM6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6Yjc2NDNlNWMtN2M0YS1jYzQ0LWFjZGUtMmNkNjMwOTEwZTA0IiB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6Njc5YTFhZDUtYWFhNS0wMzQ5LWFiODctODg4ZmVkZTE0MGM0IiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6Mjk4YjcyMzctZGFjOS0xNTQyLThmY2YtZjMwZDhhZjg2ZDM2Ij4gPHBob3Rvc2hvcDpUZXh0TGF5ZXJzPiA8cmRmOkJhZz4gPHJkZjpsaSBwaG90b3Nob3A6TGF5ZXJOYW1lPSLDh29jdWsgYWRhbGV0xLAiIHBob3Rvc2hvcDpMYXllclRleHQ9IsOHb2N1ayBhZGFsZXTEsCIvPiA8L3JkZjpCYWc+IDwvcGhvdG9zaG9wOlRleHRMYXllcnM+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6Mjk4YjcyMzctZGFjOS0xNTQyLThmY2YtZjMwZDhhZjg2ZDM2IiBzdEV2dDp3aGVuPSIyMDIzLTA0LTE2VDE3OjM2OjE2KzAzOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjIuNCAoV2luZG93cykiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmI3NjQzZTVjLTdjNGEtY2M0NC1hY2RlLTJjZDYzMDkxMGUwNCIgc3RFdnQ6d2hlbj0iMjAyMy0wNC0xNlQxNzozODoxNyswMzowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIyLjQgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PijD99UAAB2uSURBVHja7d1/zF3lQcDxs3/GFBDstKVR23SOalJa3Sasi4PNtPgDgY5YBxM6zdrNLJsMR6Kuw6gZ1B8Jk+HMorRGVxhsq+naDpz2xWXUZYU6Ntu+/iiztbgIrYJMhg4Sje/zsvfdeU/vufc5955z7/nx+SQEKOXtfe977/c+z3Oec85Lfuajn3198n//+yMJACN7yZW3bf/Nmb//hqcCQFQBRBVAVAEQVQBRBRBVAEQVQFQBRBVAVAEQVQBRBRBVAEQVQFQBRBVAVAEQVQBRBRBVAEQVQFQBRBVAVAEQVQBRBRBVAEQVQFQBRBVAVEUVQFQBRBVAVIGmesWSlydnv+ylQ/2/p555Njn9ta+X8jhWL1+arF62dPbvwUXLLuj5+44+/mTy3DeeT46fejo58vgTyZGTT4gqUB/33bwpOfus4aJ674EvJR878OjQf3aI+c9d+upk3ZoLh34Mzz3/QrL3kelkz6GjM7F9QVSByQkxu+nKy4b+/0eJaviz33752qFj2iuut+2aqv3IVVShxe7cck2yYvGisUd11Jj3c8enH0oePPyYqALjFdYut11/xUhfY5iorl25PHn/xvWVfm/v2fGp5Pipp0QVGJ+brrosWbf6wrFGNayh7njXtaVN+fOEg2eb//DjogqMR4jbfe/dNPLXKRrVMkLe9GUAUYUWCkfc33Lpq8Ya1XGNUus+WhVVaKEQt8XnnTPWqBY9OBWO5h88djI5/cyL+2AXn39O4VFuHddWRRVaJuZAURjlxUS3SFRvmfkzXzvzZ8cG9cbtu884sSCcqLDthiuiR7t7D00nd+0/KKpAdX77hp/OPVspHaOrL15ValT3bd0c/Rj7rYcWWbo4cfrp2TiLKlCJMPoMU/9Bo9QQtZjtVrFRLbp966ptO0b6HtKu++DOWp1pJarQIuEMpkEj0DBKDWuZZUZ1wyWrki3r10Y9xnBu//vuvr/v7ylyau3Wex6o1VlWogotEXv0PRwxX3L+uaVGtciUPWYdNGYJY872qYPJnkemRRUoV8zR97lRYux0PTaqRSIY8zWL7Hcd9aIvogr0FLONau4A0SSjGrNpv8jI9+FjJ5Nbd02JKlCemEiGbUxh6h8O6sTuKY2NatlroEWiGrNGK6pAITF7RB888lhyx76HCkUrNqpFtlOJKlBrsVuQ0jFrU1SDflu0RBUoJGYbVfY8+TKjWnRfqagCtRW7jSq77ajMqBbd+B8T1TJPJhBVIFrsAacwSk2fZy+qogr0ELONqteWI1EVVWDI8ISb5YXTUtsc1Tqdqiqq0FAx26jC3tTrbt95xq+LqqgCKbFH3PPOs4/ZMSCqogqdERvFvCvjx55WKqqiCq0Xu42q3wWcRVVUgW+K3UbV78IloiqqwDfdueWaZMXiRQN/X78r4ouqqAIFYpO+eIqoiiqQI/bizb32poqqqAIZMVeDyl48RVRFFRghqjEhFFVRBSKjmr14SheiGvM9iyowVFTDlfAHWbFkUdTtT0Ko0rEKJxJkz9ByQRVRhVZHtUq9bl1SRVRdpBoQVVEVVRDV0aNa9HGJKiCqNY5q3uUNRRUQ1SGi6hbVQOuiet/Nm6J2EwQx27REFeh0VGP3vcZGNeauBnMGXedAVIHGRTX2mgSxESw70qIKVKaKYJU9XS+ynDDo4jGiCjQuqmWeARV7/605dTpFVVSpnXCrkFcsefnsG2vJeef2/b1HHn9i9iLMve7BxPin1kWWJvqNLjdcsirZsn5t1NeJuSKXqNIpIaCrl1+QrF62NLloZrQTO+XrNaUMcQ1bdeo0FexSVIscXMpbAggfqnduvmb2QzVG3t1iRZVOCW+YDZdclKydeQPGvnmKengmrFOHHxPYMUY19t5Z6Z/RH88EcW7qHl4Lt/zs5VG3iplTp0v+iSpjF95069esjH5DlyGcbbP3kelkz6GjufdrEtVyohp7l9ey1HHqL6qMRRiRhvvUVzUqFdd6RDUoes7+KPrdLVZUaaWwXhpiOs6RaUxc752JxJ6ZwIpq+VEd12j1xOmnkxu3767l8yuqVGKcI5Zh35RhA3oXdw5UvbE+zEzev3F9pR+MW+9+oLY/O1GlVMMcbJjkqDUcOa7jFLLJUQ2KHrRqw7RfVCldGKGE0xXHdaCiLHU7d7wNUa0irOFDMPyc6r6jQ1QpRZUjk3EtB4R9k104iDXO8+rDunr4oB115hL2tf7+vs/V6swpUaUy4WDU1Revavz30ZWwhp9XiF2MqcPHSplqh1nM2h9YPvv32JlMGJmGUWn48+u2F1VUqUzdD0gJa/2EoIddAuEsul7C6cennnm2EaNSUcWUX1gRVeqo6m0zkxZOobx115QfNKLKeKZv2264onFH+Yuq28WPEVVa6s4t1zRiH2oZ6njBDkSVFmnbgalBwsGSG3fstr6KqFLNtP9Dm9/Uue+7jtfsRFRpgSKbxtvmPTs+5Q4DiCrlafvR/kHqdm95RJWGC5dzm+T1UOvAQStElVK0dZO/0SqiykR0eS01q263Q0ZUaZii92Bvu65dJhBRpWRtuQJVWcKVk667facnAlFlOA5Qnem2XVNufY2oUlxXN/tbAkBUqcSGS1YlW9av9URk1PV+84gqNXfLxvXJa1cu90T0YBcAokph9928qfWX9xuWdVVElULC7S7ue+8mT0QO11pFVClk9fKlybbrr/BE5HBnAESVQpya2p9TVhFVCunaxaiLchIAooqoluyqbTs8CYgqoiqqiCqiKqqIKqIqqogqiKqoIqqIqqgiqohqY9mniqhSiDOqRBVRpUSupdrf3kPTyV37D3oiEFXi7du62ZOQY/vUwWTPI9OeCESVeO6imu89Oz6VHD/1lCcCUSWem/7lc+QfUaWwtSuXJ+/fuN4TkeGyf4gqQ7OueibrqYgqQ3OfqjO5PxWiiiWAktifiqgyMjcA/JY7Pv1Q8uDhxzwRiCrDc8rqi8KUP0z9QVQZSbiz6o53Xdv50ao7qCKqGK2WJNyTKoxSn/vGC14MiCpGq6OyjQpRpXQbLlmVbFm/tnPf94nTTyc3bt/tBYCoUr47t1yTrFi8qFPf89Z7HkiOnHzCDx9RpXzhkoDbbriiM8sADk4hqlRu3ZoLk5uuvMy0H0SVstx01WXJutUXtvb7C0f7Q1CdjoqoMjZtXl91vVRElbEL26zChazbFlanoiKqCKugIqoIq6AiqpAb1l++8rJGXns1HJTaevcD1lARVeqnadcICNumbv3kfkf5EVXqa/XypbP7WBefd06tH+feQ9PJXfsP+oEhqjRjOSCMWut4N9YwOg0xdeopokrjhNNaw62uL1p2wcQfS1g7vffAo642hajSjiWBMHKdRFzDemk4qr/n0FHXQ0VUad/I9epLVs3eULDqi7KEm/RNHT5mmxSiSjeEsK79geXJ6mVLSzuo9fCxk8mRx59IvvBPJx3RR1TprhDVMIp98a9FydkvOytZEf6eM5oNo9Ag7C09/bVnkyMnn7TPFFEFEFUARBVAVAFElWGFvZwwjFPPPGu3g6gShNM5N1x80ezeza7cTI9qhB0R4SaFTr8V1c7q2p1JGQ8XihFVQYWSubW2qHZOuFJ+HS4yQnttvecBSwGi2g3h9Mz3b1zviaBS4ZTdW3dNeSJEtf1uuuqyZN3qCz0RVO66D+50ZS5RNfUHSwCiiqgiqoiqqCKqiGrj3bJxfSNv5UzzWFMV1U5Yt+bC2buNQpXCDQ5v3L7bEyGq3bDjXdfW/hbONNttu6aSg8dOeiJEtRvCxVO2XX+FJ4JKPHjkseSOfQ95IkTVMgCMKlxY5dZd+62limo3hWsAvP3ytXYDMLLnnn8huffAo8meR6Y9GaJKiOvq5RckZ5911vwotmm3Vg5LGk38cAhT5dPPNOtapIvPPyc556yXJsdPPT377+Gmh9ZPRZU+ywJh9Lr5Dz/eqCncz1366uQtl76qcc93E/dyhlOdl5x3bvK+u+/3hhFVBpk7OWD71MFGTeVEdTzChc3D7pFw2cjwweuK/6LKgGWAD21+0+w/hzdLeNOIqqimbbhkVbJl/dr5pQtH+UWVAdO69BWsmrTXUFTHI73HORycatoykagy1mndfe/dtODXwvaYpqybiWr1el2Lt2nLRKLKxKPUlHUzUa1er4vxNG2ZSFSZyLQurSnrZqJarfDaCK+RXpySKqpk9Du7qinrZqJarX53jGjSMpGoMrFpXVoT1s1EtTrpbVR5bK8SVb4pvY0qTxPWzUS1OultVHlsrxJVIqZ1aXVfNxPV6sRcKtL2KlEl6b2NKk/d181EtRpFbmlue5Wodl5eiMKbo9d0r87rZqJajV7r7eGq/uEiKtkZju1Votp5vaZ1c2tj99286YwDE3VeNxPV8uVto7rj0w/NBrTXhc5trxLVzsrbRvWeHZ+aHYX0ilSd181EtXy91tvDa+C623fO/vOdW65JVixetOC/214lqp3Va1qXfkPkjVLqum4mquXK20Z174EvJR878GjfD2bbq0S1c/pN69IXp+41UqnrupmolitvG1U2mE1bJhJVxjat6xXLvBsE1nHdTFTL1W+9fdDzbnuVqHZKzLQurSnrZqJanrxtVL0ea9OWiUSVsU3rrvvgzp4ji6asm4lqefK2Ud24ffdIMx9EtZVip3VpvdbN9h6aTu7af1BUWxbV2PX2tCYtE4kqY5nWzW2jKhKsuq2biWo5Bm2jymN7lah20qBtVGWOXkS1eVEtut6eZnuVqHbOqGGs+7qZqI4udhtVHturRLVTRo1i3rpZXaIgqqMbZr190M/A9ipRbaVRpnVpvdbNHj52Mrl115SoNjyqRbZRFZ0N2V4lqq1TdBtVnjqvm4nqaIpuo6pqRoSoNsKo07q0um6vEtXhlXkg0vYqUW29YbdRFYlXHdbNRHV4w26jymN7lai2WlnTuipGNaI6+aiWtd6eZnuVqLZWVQGs47qZqA5n1G1UeWyvEtVWKntaN6eO26tEdThlrrcP+nnYXiWqjVbFtC6tbturRLW4MrZRFZ0l2V4lqo1V1bRuTt3WzUS1uLLX22NmSrZXiWpjVTWtS6vT9ipRLWckWeYBR9urRLU1qpzWDQrZpNbNRHX0UWQZ6+1ZtleJaitUPa0b52hHVMtX9Xp7mu1Votp44w5dXdbNRDVe1evtWbZXiWqjjWtaN6cu26tENd441tsH/WxsrxLVRhjntG7Qm3Tc26tENc641ttjZk+2V4lq7Y17WjenDutmohpnXOvtMTMo26tEtfbGPa0bNEIe5/YqUR1+xDiOA4u2V4lq40xiWpf29svXJldfvGrBr41z3UxUhxstVrnenmV7lag2yqSmdXUYBYnq8LOJqtfb02yvEtXGqMt+0VtmRsqvnRkxp41r3UxU+5vUenuW7VWi2giTntbNmeT2KlHtb1Lr7TE/J9urRLVW6jCtG/TmHcf2KlHNN+n19phZle1VolobdZnWzZnUupmo5pv0envMzMr2KlGtjbpM6waNnKveXiWqxUaGk7z9TR0vci6q1G5alzaJ7VWiGj8qnMR6e1bdLnIuqtRyWjfJ0ZGoxs8aJrXenmZ7lajWTl3vajpn3NurRPVMdVtvz6rTRc5FldpO6+aMe91MVM9Ut/X2mJ+Z7VWiOhF1ntYNelNXtW4W/pwl55/buJ/l8VNPVRKQJhwMqvtsS1Q7pO7TujnWzSan1/JLHdbbY2ZctleJai1GgHU81a8OV6/qoiaNAG2vEtWJq+s2qjyTvnpVF+U953VZb8+yvUpUJ6qu26jaMGpqg6ast6dZJhJVgSpoklev6pqmBsr2KlGdiLpvo8ozjnUzW6pe1JT19tglC8tEompaV+DNXua6mag2+6CPZSJRHbumbKOa1LRUVJuzjarI47dMJKpjHek16YrpVW+v6npU2zDSs71KVMemaduo8lS5btb1qDZtG1WRwYPtVaJauqZto5rEaKrLUW36enua7VWi2ugQTUJV62ZdjmqbQuQsPFGtXFO3UeWpat2sy1Ft+np77FKG7VWiWtmndhOndYMiMOq6WVej2saDO7ZXiWpl2rq+VMX31dWotnUbku1Vojq2EV2Tp3WDRuCjrJt1MaptHtHZXiWqXlQFlb1u1sWotn3t0fYqUa18+tPEbVTjGmV1LapdOEpue5Wolmrf1s2d/L6PPv5k8r677594VMMyS6+4hzd6djfGJKKaN5PpAksAolra1KcLht3ZUHZU8x5H2X/OsIF4xZKXJx/a/CZRRVRj9TqLqgu2Tx1M9jwyLapmM7lM/0V1KHlXpfKGEdUuf/DaViWqQ8s7kNNmoxyI62JU8w7ktFnTT3wR1QnrdYpqm42yv7KLUQ26tPYetouFD11Tf1EdabQa7jSZ3TbTRsMe9e96VPMuC2mUKqp0eIpXxgikq1ENeu1pbps27dEWVcsAlbtt11Ry8NjJkb5Gl6MaTgQIB61WLF7U2g9dV6gSVWGNVNZ56l2OapvDGoK69e4HkuOnnhIBUS1fr3O9m/xmCReGGXWEKqoLw3rLxstbs80qTPlv/eR+B6ZEtVrhwEQYtTb54FV4s4Sgljn6ENV2ffiG04TDNQxM+UV1LMKugHfMvHGaeHCiqiO4orpQuDZAOMDZtO1WZc9gRJXWvnHCyONjDz1a2VROVHsLZ+a9ZeYx131mE2K695HpZM+ho0anojp5YdvV+jUra7mWVnVMRXWwsNa64eKLZl8ndfsAFlNRrbVw5aKrZ0YmYd11kiOTENC9M2+SqcOPje2NIqpxwmtj/UxcJ710FC42/YWZv9xzSlQbI7x5wvJA+Gsc22zCGVEHj/3LTCCenMj2F1EtPnqdf40sW1r5CDaMSI/OfJ8hpGG91KhUVBstvIHCGyeMZMObKPz7KKENAT31tWeTEzPxPH7q6Vpc21JURxOiGl4b4TUS/gr/PmxoQ0BPzLwujs++Pp6a/2dEtROxDW+gby0fLErOPuus+X8Pb4TwBplT5wsDi2p1sV1y/rnz/x4+nNOOPP6txx5Gn+IpqrSEqIKoIqqiiqgiqqKKqCKqooqogqiCqCKqooqoIqqiiqiCqIKoIqqiiqgiqqKKqCKqooqogqiCqCKqooqoIqqiiqiCqIKoIqqiiqgiqqKKqCKqooqogqiCqCKqooqoIqqiiqiCqIKoIqqiiqgiqqKKqCKqooqoiiqiKqqIKqIqqogqoiqqiCqIKogqY7ZuzYXJ+jUrS/t6U4ePJQ8efqzyP+eu/QeT46ee8gNEVAFEFUBUARBVAFEFEFUARBVAVAFEFUBUARBVAFEFEFUARBVAVAFEFUBUARBVAFEFEFUA6h3Vsm/mBnTL++6+X1TTyr7tMNAtV23bIaqiCoiqqAKiWv+orl6+NFm9bKlXBjCUjx14VFQB2kZUAUQVQFQBRBUAUQUQVQBRBUBUAUQVOuja165Kbli3dv7fb/zjXcmJ//iaJ0ZUAVEVVUBUEVWADkf1bW94dbJq+dJk5fdeMP9rx776ZDJ98onkTz4Xf+WZK9a8Mvn+pd+V/PhrVi349c9PfyU58eR/JB9/eLrQ4wpfb82K70l+dNUr53/tf55/IfnM304nn53+59zRwqUrlyW/svHy+X//vV37kwPHHu/5e39twxvmv374nm/+6P2F/nv6sb7zyjcs+LXdn/9Soecv7fa3/vSCn8fdDx4c+Pxlv+88f/XF6eTA3x9Pvvyvpyt/TCu+67zkzndsLPT/9Pv/Yzz1X19PfuHDH59/bV/zo8UvaZn+2Rmpimq0H/6+xclNG34sefl3nNP3BXrHns/2fQN+57e/LLll47oFb7hevvrvTye/t/uvB74gY7/eRz79ueSBw1+ZeFTDG/93f/7q5NvOeumCD5Lf2fO5oX4u4fv/6E3XL/i1L3/l8eTXP7G/lKgOE/1hH5Oo0pmohqBuffNPLAhBnjA6/NU/29vzhRTebNuu/6nke797UdSfG77Wtk/8Zd9If+Tt10R/vV5hHXdUs483fHi8867dI80ceoXgrXfck/znf3+jtKgWCeuwj0lU6UxU//Td1y4YoYYp4R/85cH5F/K7r3j9gpFi3sjrA2++PPnhVy5b8IL+xENfnA9diPfPvO6Hzvg9cy/6rF/6ibULlg9CyHZ+9tB8hLP/PUT6Fz/yyQVv7HFGtdfjyfsAGnaaHRukmO875vkr8zGVHdV+P8tYRV4foiqqQ42E8kYr2RFY9sWUfXGGEdrWe/6i5xs0Hae8PzP7BsobGQ56/OOKaq9R0K/v3Fd4rXLQNDt2uh37fWfXfweNVkd5TKJKJ6KaHqX2O/iSffFl33zZUWq/F2d4Y/7RO392frmh12g1O4rq9+L9xM2b5r9Wdro9jqiGEfgHNl019Bpl7AdeiNbcczxoVFnk+05/YPabOYz6mESV1kc1G4NBIQjxCkfbn/vG82e8GfqFLWZqnx3Vpd/og75e+FqLzzs3OXHqqWT3ob8f6/Q/fED8/ts25C6fjCI9zQ7Pwb6HjywYVeYdnCv6fWdD2W+EPcpjElVaH9Uib6YicY6JSr9pZ3aKOUqkqo5qdoQ+6oGpvGl2eH7CB0Z6hN9vul3k+87+LPLCOOpjElVaH9XsaHHQ0dvYQA6zZzEdzkFLDXWJati7m11HHWX7VMwHXjri/abbRb7v2Od71MckqrQ+qtkDRsPeqzv7Qot5sWdHPekYDRPpcUc1rD3m7ekt442WnWbPjX6zYStjf242VnlRHfUxTWJL1aDXoqiKamuiGuzburlnVLNfr45R7WfU0Wq/5Y/sf8ubbpcd1TIek6giqhMaqTYtqiEwl1504YKTJ0Z5sw1a604fxMubbpcd1TIek6jS+qgW2bbUT53XVLMH0cqO6tw0OBudftvTikz9Q6DefPvOvoEb9UyymF0gZTwma6q0PqpFj/6HPa1ffOxkcvqZZxe8Gco++t8vuHkfDnlbqoq8EdMHXHpNYbNRDeuqv3XfZ2bfVNm9t8O+6fttrs/T67GWefS/rMckqrQ+qkX2qQ4KXdn7VIt8vezUMz2Kygah3z7K9Gis17poNqrZx1zGaHWY89NHPT130IdrWY9JVGl9VLPx6heB7Bsr++Kb1BlVMaPa9PfY74MjfXZZr983aHmgjNFq3nn1g2Q/LIrEIv1n9vpZlPWYRJVORDUby14v9Ozl7Hq98bIvzvTUuN80Oy9g2TdQ3hHlmJjHnIaZffy9noeYq1SNMlqNPYrea5aRHVnHxmLQbKXMxySqdCKqg06zDC+6zT/+ugX/Pe/N0OsqVX9x6Oj87w1vuk0/dvGCUU+/c82z0+0QqA8/8Dfza5jvvfLSBX9ekdClr3YV1hTffNlrFnyPvU6EiL2eavYIdWw8Yvd79hpZZ5c9YmIR/ryf/JFV8x+Wva6qVeZjElU6EdVeI4x++o1Uyr6eapGvN+g6r9kPjn7yDozFXvm/1wGtfhcpyZtmDzrDLbtEkg5eWddTLfMxjbolapj/f1D4RFVUKxNeXL901Rv6Xqg65uruRa78/0ef+fzAaw3EfL2YOxKEN+RvXPeTA8Pa73uMjeowo9Ui0+y8IKSn22Vc+b/sxySqdCqq6enexSuXLxgdhjfTF/7xRN9pX1beParC1zp68t+GukfV635wxRkXLzl07GShPay97sE19+b//D+c6PuGio3qMKPV2OvaZqUPwqWn2zFRnbvH16PHv9rzA6nsxySqdDKqZZ53D9D5qGYPNgkrIKojCOto4UBE+iBRzFoagKgOMLemNsp57ACimiw8Wl7W7UEAOhXVXqcjlnGbZQBRTV7c/vTnX/i7kW6zDGD6DyCqAIgqgKgCiCqAqAIgqgCiCiCqAIgqgKgCiCqAqAIgqgCiCiCqAIgqgKgCiCqAqIoqgKgCiCqAqAIgqgCiCiCqAIgqgKgCiCqAqAIgqgCiCiCqAIgqgKgCiCqAqAIgqgCiCiCqAIgqgKgCiCqAqHoqAEQVQFQBRBUAUQUQVQBRBUBUAUQVQFQBRBUAUQUQVQBRBUBUAUQVQFQBRBUAUQUQVQBRBUBUAUQVQFQBRBUAUQUQVQBRBUBUAUQVQFQBRFVUAUQVQFQBRBUAUQUQVQBRBUBUAUQVQFQBRBUAUQUQVQBRBUBUAUQVQFQBRBWA4aP6xpm/v9FTATC6/wfWg+7Bq5dm0wAAAABJRU5ErkJggg=="},{nameFront:"c41",nameBack:"Belirli bir \xfclkenin mevzuat\u0131 \xe7ocuklara S\xf6zle\u015fme maddelerinden daha iyi koruma sa\u011fl\u0131yorsa, s\xf6z konusu mevzuat aynen uygulanmaya devam etmelidir.",icon:n.p+"static/media/c41.4789bbe827ced3dcaf3c.png"},{nameFront:"c42",nameBack:"Devletler, \xe7ocuklar ve yeti\u015fkinleri S\xf6zle\u015fme hakk\u0131nda bilgilendirmelidir. S\xf6zle\u015fme toplamda 54 maddeden olu\u015fmaktad\u0131r. A\u015fa\u011f\u0131da yer alan madde de dahil olmak \xfczere 43 ila 54. maddeler, \xe7ocuklar\u0131n sahip olduklar\u0131 haklardan faydalanmalar\u0131n\u0131 sa\u011flamak amac\u0131yla yeti\u015fkinler ve devletlerin i\u015f birli\u011fi i\xe7erisinde y\xfcr\xfctece\u011fi faaliyetleri a\xe7\u0131klamaktad\u0131r.",icon:n.p+"static/media/c42.3d17893e3da60393d0e1.png"}],p9=n(7441),I9=n(9613),C9=n.n(I9);var m9=function(e){function t(e,i,l,c,d){for(var h,f,p,I,A,y=0,G=0,w=0,B=0,x=0,M=0,F=p=h=0,H=0,T=0,X=0,Y=0,E=l.length,z=E-1,L="",K="",_="",P="";H<E;){if(f=l.charCodeAt(H),H===z&&0!==G+B+w+y&&(0!==G&&(f=47===G?10:47),B=w=y=0,E++,z++),0===G+B+w+y){if(H===z&&(0<T&&(L=L.replace(g,"")),0<L.trim().length)){switch(f){case 32:case 9:case 59:case 13:case 10:break;default:L+=l.charAt(H)}f=59}switch(f){case 123:for(h=(L=L.trim()).charCodeAt(0),p=1,Y=++H;H<E;){switch(f=l.charCodeAt(H)){case 123:p++;break;case 125:p--;break;case 47:switch(f=l.charCodeAt(H+1)){case 42:case 47:e:{for(F=H+1;F<z;++F)switch(l.charCodeAt(F)){case 47:if(42===f&&42===l.charCodeAt(F-1)&&H+2!==F){H=F+1;break e}break;case 10:if(47===f){H=F+1;break e}}H=F}}break;case 91:f++;case 40:f++;case 34:case 39:for(;H++<z&&l.charCodeAt(H)!==f;);}if(0===p)break;H++}if(p=l.substring(Y,H),0===h&&(h=(L=L.replace(u,"").trim()).charCodeAt(0)),64===h){switch(0<T&&(L=L.replace(g,"")),f=L.charCodeAt(1)){case 100:case 109:case 115:case 45:T=i;break;default:T=W}if(Y=(p=t(i,T,p,f,d+1)).length,0<V&&(A=s(3,p,T=n(W,L,X),i,Z,S,Y,f,d,c),L=T.join(""),void 0!==A&&0===(Y=(p=A.trim()).length)&&(f=0,p="")),0<Y)switch(f){case 115:L=L.replace(b,o);case 100:case 109:case 45:p=L+"{"+p+"}";break;case 107:p=(L=L.replace(C,"$1 $2"))+"{"+p+"}",p=1===R||2===R&&a("@"+p,3)?"@-webkit-"+p+"@"+p:"@"+p;break;default:p=L+p,112===c&&(K+=p,p="")}else p=""}else p=t(i,n(i,L,X),p,c,d+1);_+=p,p=X=T=F=h=0,L="",f=l.charCodeAt(++H);break;case 125:case 59:if(1<(Y=(L=(0<T?L.replace(g,""):L).trim()).length))switch(0===F&&(h=L.charCodeAt(0),45===h||96<h&&123>h)&&(Y=(L=L.replace(" ",":")).length),0<V&&void 0!==(A=s(1,L,i,e,Z,S,K.length,c,d,c))&&0===(Y=(L=A.trim()).length)&&(L="\0\0"),h=L.charCodeAt(0),f=L.charCodeAt(1),h){case 0:break;case 64:if(105===f||99===f){P+=L+l.charAt(H);break}default:58!==L.charCodeAt(Y-1)&&(K+=r(L,h,f,L.charCodeAt(2)))}X=T=F=h=0,L="",f=l.charCodeAt(++H)}}switch(f){case 13:case 10:47===G?G=0:0===1+h&&107!==c&&0<L.length&&(T=1,L+="\0"),0<V*N&&s(0,L,i,e,Z,S,K.length,c,d,c),S=1,Z++;break;case 59:case 125:if(0===G+B+w+y){S++;break}default:switch(S++,I=l.charAt(H),f){case 9:case 32:if(0===B+y+G)switch(x){case 44:case 58:case 9:case 32:I="";break;default:32!==f&&(I=" ")}break;case 0:I="\\0";break;case 12:I="\\f";break;case 11:I="\\v";break;case 38:0===B+G+y&&(T=X=1,I="\f"+I);break;case 108:if(0===B+G+y+k&&0<F)switch(H-F){case 2:112===x&&58===l.charCodeAt(H-3)&&(k=x);case 8:111===M&&(k=M)}break;case 58:0===B+G+y&&(F=H);break;case 44:0===G+w+B+y&&(T=1,I+="\r");break;case 34:case 39:0===G&&(B=B===f?0:0===B?f:B);break;case 91:0===B+G+w&&y++;break;case 93:0===B+G+w&&y--;break;case 41:0===B+G+y&&w--;break;case 40:if(0===B+G+y){if(0===h)if(2*x+3*M===533);else h=1;w++}break;case 64:0===G+w+B+y+F+p&&(p=1);break;case 42:case 47:if(!(0<B+y+w))switch(G){case 0:switch(2*f+3*l.charCodeAt(H+1)){case 235:G=47;break;case 220:Y=H,G=42}break;case 42:47===f&&42===x&&Y+2!==H&&(33===l.charCodeAt(Y+2)&&(K+=l.substring(Y,H+1)),I="",G=0)}}0===G&&(L+=I)}M=x,x=f,H++}if(0<(Y=K.length)){if(T=i,0<V&&(void 0!==(A=s(2,K,T,e,Z,S,Y,c,d,c))&&0===(K=A).length))return P+K+_;if(K=T.join(",")+"{"+K+"}",0!==R*k){switch(2!==R||a(K,2)||(k=0),k){case 111:K=K.replace(v,":-moz-$1")+K;break;case 112:K=K.replace(m,"::-webkit-input-$1")+K.replace(m,"::-moz-$1")+K.replace(m,":-ms-input-$1")+K}k=0}}return P+K+_}function n(e,t,n){var r=t.trim().split(p);t=r;var a=r.length,o=e.length;switch(o){case 0:case 1:var s=0;for(e=0===o?"":e[0]+" ";s<a;++s)t[s]=i(e,t[s],n).trim();break;default:var l=s=0;for(t=[];s<a;++s)for(var c=0;c<o;++c)t[l++]=i(e[c]+" ",r[s],n).trim()}return t}function i(e,t,n){var i=t.charCodeAt(0);switch(33>i&&(i=(t=t.trim()).charCodeAt(0)),i){case 38:return t.replace(I,"$1"+e.trim());case 58:return e.trim()+t.replace(I,"$1"+e.trim());default:if(0<1*n&&0<t.indexOf("\f"))return t.replace(I,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+t}function r(e,t,n,i){var o=e+";",s=2*t+3*n+4*i;if(944===s){e=o.indexOf(":",9)+1;var l=o.substring(e,o.length-1).trim();return l=o.substring(0,e).trim()+l+";",1===R||2===R&&a(l,1)?"-webkit-"+l+l:l}if(0===R||2===R&&!a(o,1))return o;switch(s){case 1015:return 97===o.charCodeAt(10)?"-webkit-"+o+o:o;case 951:return 116===o.charCodeAt(3)?"-webkit-"+o+o:o;case 963:return 110===o.charCodeAt(5)?"-webkit-"+o+o:o;case 1009:if(100!==o.charCodeAt(4))break;case 969:case 942:return"-webkit-"+o+o;case 978:return"-webkit-"+o+"-moz-"+o+o;case 1019:case 983:return"-webkit-"+o+"-moz-"+o+"-ms-"+o+o;case 883:if(45===o.charCodeAt(8))return"-webkit-"+o+o;if(0<o.indexOf("image-set(",11))return o.replace(x,"$1-webkit-$2")+o;break;case 932:if(45===o.charCodeAt(4))switch(o.charCodeAt(5)){case 103:return"-webkit-box-"+o.replace("-grow","")+"-webkit-"+o+"-ms-"+o.replace("grow","positive")+o;case 115:return"-webkit-"+o+"-ms-"+o.replace("shrink","negative")+o;case 98:return"-webkit-"+o+"-ms-"+o.replace("basis","preferred-size")+o}return"-webkit-"+o+"-ms-"+o+o;case 964:return"-webkit-"+o+"-ms-flex-"+o+o;case 1023:if(99!==o.charCodeAt(8))break;return"-webkit-box-pack"+(l=o.substring(o.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+o+"-ms-flex-pack"+l+o;case 1005:return h.test(o)?o.replace(d,":-webkit-")+o.replace(d,":-moz-")+o:o;case 1e3:switch(t=(l=o.substring(13).trim()).indexOf("-")+1,l.charCodeAt(0)+l.charCodeAt(t)){case 226:l=o.replace(A,"tb");break;case 232:l=o.replace(A,"tb-rl");break;case 220:l=o.replace(A,"lr");break;default:return o}return"-webkit-"+o+"-ms-"+l+o;case 1017:if(-1===o.indexOf("sticky",9))break;case 975:switch(t=(o=e).length-10,s=(l=(33===o.charCodeAt(t)?o.substring(0,t):o).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|l.charCodeAt(7))){case 203:if(111>l.charCodeAt(8))break;case 115:o=o.replace(l,"-webkit-"+l)+";"+o;break;case 207:case 102:o=o.replace(l,"-webkit-"+(102<s?"inline-":"")+"box")+";"+o.replace(l,"-webkit-"+l)+";"+o.replace(l,"-ms-"+l+"box")+";"+o}return o+";";case 938:if(45===o.charCodeAt(5))switch(o.charCodeAt(6)){case 105:return l=o.replace("-items",""),"-webkit-"+o+"-webkit-box-"+l+"-ms-flex-"+l+o;case 115:return"-webkit-"+o+"-ms-flex-item-"+o.replace(G,"")+o;default:return"-webkit-"+o+"-ms-flex-line-pack"+o.replace("align-content","").replace(G,"")+o}break;case 973:case 989:if(45!==o.charCodeAt(3)||122===o.charCodeAt(4))break;case 931:case 953:if(!0===B.test(e))return 115===(l=e.substring(e.indexOf(":")+1)).charCodeAt(0)?r(e.replace("stretch","fill-available"),t,n,i).replace(":fill-available",":stretch"):o.replace(l,"-webkit-"+l)+o.replace(l,"-moz-"+l.replace("fill-",""))+o;break;case 962:if(o="-webkit-"+o+(102===o.charCodeAt(5)?"-ms-"+o:"")+o,211===n+i&&105===o.charCodeAt(13)&&0<o.indexOf("transform",10))return o.substring(0,o.indexOf(";",27)+1).replace(f,"$1-webkit-$2")+o}return o}function a(e,t){var n=e.indexOf(1===t?":":"{"),i=e.substring(0,3!==t?n:10);return n=e.substring(n+1,e.length-1),F(2!==t?i:i.replace(w,"$1"),n,t)}function o(e,t){var n=r(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return n!==t+";"?n.replace(y," or ($1)").substring(4):"("+t+")"}function s(e,t,n,i,r,a,o,s,l,u){for(var g,d=0,h=t;d<V;++d)switch(g=M[d].call(c,e,h,n,i,r,a,o,s,l,u)){case void 0:case!1:case!0:case null:break;default:h=g}if(h!==t)return h}function l(e){return void 0!==(e=e.prefix)&&(F=null,e?"function"!==typeof e?R=1:(R=2,F=e):R=0),l}function c(e,n){var i=e;if(33>i.charCodeAt(0)&&(i=i.trim()),i=[i],0<V){var r=s(-1,n,i,i,Z,S,0,0,0,0);void 0!==r&&"string"===typeof r&&(n=r)}var a=t(W,i,n,0,0);return 0<V&&(void 0!==(r=s(-2,a,i,i,Z,S,a.length,0,0,0))&&(a=r)),"",k=0,S=Z=1,a}var u=/^\0+/g,g=/[\0\r\f]/g,d=/: */g,h=/zoo|gra/,f=/([,: ])(transform)/g,p=/,\r+?/g,I=/([\t\r\n ])*\f?&/g,C=/@(k\w+)\s*(\S*)\s*/,m=/::(place)/g,v=/:(read-only)/g,A=/[svh]\w+-[tblr]{2}/,b=/\(\s*(.*)\s*\)/g,y=/([\s\S]*?);/g,G=/-self|flex-/g,w=/[^]*?(:[rp][el]a[\w-]+)[^]*/,B=/stretch|:\s*\w+\-(?:conte|avail)/,x=/([^-])(image-set\()/,S=1,Z=1,k=0,R=1,W=[],M=[],V=0,F=null,N=0;return c.use=function e(t){switch(t){case void 0:case null:V=M.length=0;break;default:if("function"===typeof t)M[V++]=t;else if("object"===typeof t)for(var n=0,i=t.length;n<i;++n)e(t[n]);else N=0|!!t}return e},c.set=l,void 0!==e&&l(e),c},v9={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function A9(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}var b9=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,y9=A9((function(e){return b9.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}));function G9(){return(G9=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var w9=function(e,t){for(var n=[e[0]],i=0,r=t.length;i<r;i+=1)n.push(t[i],e[i+1]);return n},B9=function(e){return null!==e&&"object"==typeof e&&"[object Object]"===(e.toString?e.toString():Object.prototype.toString.call(e))&&!(0,p9.typeOf)(e)},x9=Object.freeze([]),S9=Object.freeze({});function Z9(e){return"function"==typeof e}function k9(e){return e.displayName||e.name||"Component"}function R9(e){return e&&"string"==typeof e.styledComponentId}var W9="undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_BASE_URL:"/Home/"}&&({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_BASE_URL:"/Home/"}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_BASE_URL:"/Home/"}.SC_ATTR)||"data-styled",M9="undefined"!=typeof window&&"HTMLElement"in window,V9=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_BASE_URL:"/Home/"}&&(void 0!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_BASE_URL:"/Home/"}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_BASE_URL:"/Home/"}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_BASE_URL:"/Home/"}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_BASE_URL:"/Home/"}.REACT_APP_SC_DISABLE_SPEEDY:void 0!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_BASE_URL:"/Home/"}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_BASE_URL:"/Home/"}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_BASE_URL:"/Home/"}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_BASE_URL:"/Home/"}.SC_DISABLE_SPEEDY)));function F9(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];throw new Error("An error occurred. See https://git.io/JUIaE#"+e+" for more information."+(n.length>0?" Args: "+n.join(", "):""))}var N9=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}var t=e.prototype;return t.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},t.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,i=n.length,r=i;e>=r;)(r<<=1)<0&&F9(16,""+e);this.groupSizes=new Uint32Array(r),this.groupSizes.set(n),this.length=r;for(var a=i;a<r;a++)this.groupSizes[a]=0}for(var o=this.indexOfGroup(e+1),s=0,l=t.length;s<l;s++)this.tag.insertRule(o,t[s])&&(this.groupSizes[e]++,o++)},t.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),i=n+t;this.groupSizes[e]=0;for(var r=n;r<i;r++)this.tag.deleteRule(n)}},t.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],i=this.indexOfGroup(e),r=i+n,a=i;a<r;a++)t+=this.tag.getRule(a)+"/*!sc*/\n";return t},e}(),H9=new Map,T9=new Map,X9=1,Y9=function(e){if(H9.has(e))return H9.get(e);for(;T9.has(X9);)X9++;var t=X9++;return H9.set(e,t),T9.set(t,e),t},E9=function(e){return T9.get(e)},z9=function(e,t){t>=X9&&(X9=t+1),H9.set(e,t),T9.set(t,e)},L9="style["+W9+'][data-styled-version="5.3.11"]',K9=new RegExp("^"+W9+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),_9=function(e,t,n){for(var i,r=n.split(","),a=0,o=r.length;a<o;a++)(i=r[a])&&e.registerName(t,i)},P9=function(e,t){for(var n=(t.textContent||"").split("/*!sc*/\n"),i=[],r=0,a=n.length;r<a;r++){var o=n[r].trim();if(o){var s=o.match(K9);if(s){var l=0|parseInt(s[1],10),c=s[2];0!==l&&(z9(c,l),_9(e,c,s[3]),e.getTag().insertRules(l,i)),i.length=0}else i.push(o)}}},D9=function(){return n.nc},O9=function(e){var t=document.head,n=e||t,i=document.createElement("style"),r=function(e){for(var t=e.childNodes,n=t.length;n>=0;n--){var i=t[n];if(i&&1===i.nodeType&&i.hasAttribute(W9))return i}}(n),a=void 0!==r?r.nextSibling:null;i.setAttribute(W9,"active"),i.setAttribute("data-styled-version","5.3.11");var o=D9();return o&&i.setAttribute("nonce",o),n.insertBefore(i,a),i},U9=function(){function e(e){var t=this.element=O9(e);t.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,i=t.length;n<i;n++){var r=t[n];if(r.ownerNode===e)return r}F9(17)}(t),this.length=0}var t=e.prototype;return t.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},t.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.getRule=function(e){var t=this.sheet.cssRules[e];return void 0!==t&&"string"==typeof t.cssText?t.cssText:""},e}(),j9=function(){function e(e){var t=this.element=O9(e);this.nodes=t.childNodes,this.length=0}var t=e.prototype;return t.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t),i=this.nodes[e];return this.element.insertBefore(n,i||null),this.length++,!0}return!1},t.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),J9=function(){function e(e){this.rules=[],this.length=0}var t=e.prototype;return t.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},t.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),Q9=M9,q9={isServer:!M9,useCSSOMInjection:!V9},$9=function(){function e(e,t,n){void 0===e&&(e=S9),void 0===t&&(t={}),this.options=G9({},q9,{},e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&M9&&Q9&&(Q9=!1,function(e){for(var t=document.querySelectorAll(L9),n=0,i=t.length;n<i;n++){var r=t[n];r&&"active"!==r.getAttribute(W9)&&(P9(e,r),r.parentNode&&r.parentNode.removeChild(r))}}(this))}e.registerId=function(e){return Y9(e)};var t=e.prototype;return t.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(G9({},this.options,{},t),this.gs,n&&this.names||void 0)},t.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.getTag=function(){return this.tag||(this.tag=(n=(t=this.options).isServer,i=t.useCSSOMInjection,r=t.target,e=n?new J9(r):i?new U9(r):new j9(r),new N9(e)));var e,t,n,i,r},t.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},t.registerName=function(e,t){if(Y9(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},t.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(Y9(e),n)},t.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.clearRules=function(e){this.getTag().clearGroup(Y9(e)),this.clearNames(e)},t.clearTag=function(){this.tag=void 0},t.toString=function(){return function(e){for(var t=e.getTag(),n=t.length,i="",r=0;r<n;r++){var a=E9(r);if(void 0!==a){var o=e.names.get(a),s=t.getGroup(r);if(o&&s&&o.size){var l=W9+".g"+r+'[id="'+a+'"]',c="";void 0!==o&&o.forEach((function(e){e.length>0&&(c+=e+",")})),i+=""+s+l+'{content:"'+c+'"}/*!sc*/\n'}}}return i}(this)},e}(),e4=/(a)(d)/gi,t4=function(e){return String.fromCharCode(e+(e>25?39:97))};function n4(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=t4(t%52)+n;return(t4(t%52)+n).replace(e4,"$1-$2")}var i4=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},r4=function(e){return i4(5381,e)};function a4(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(Z9(n)&&!R9(n))return!1}return!0}var o4=r4("5.3.11"),s4=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&a4(e),this.componentId=t,this.baseHash=i4(o4,t),this.baseStyle=n,$9.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var i=this.componentId,r=[];if(this.baseStyle&&r.push(this.baseStyle.generateAndInjectStyles(e,t,n)),this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(i,this.staticRulesId))r.push(this.staticRulesId);else{var a=B4(this.rules,e,t,n).join(""),o=n4(i4(this.baseHash,a)>>>0);if(!t.hasNameForId(i,o)){var s=n(a,"."+o,void 0,i);t.insertRules(i,o,s)}r.push(o),this.staticRulesId=o}else{for(var l=this.rules.length,c=i4(this.baseHash,n.hash),u="",g=0;g<l;g++){var d=this.rules[g];if("string"==typeof d)u+=d;else if(d){var h=B4(d,e,t,n),f=Array.isArray(h)?h.join(""):h;c=i4(c,f+g),u+=f}}if(u){var p=n4(c>>>0);if(!t.hasNameForId(i,p)){var I=n(u,"."+p,void 0,i);t.insertRules(i,p,I)}r.push(p)}}return r.join(" ")},e}(),l4=/^\s*\/\/.*$/gm,c4=[":","[",".","#"];function u4(e){var t,n,i,r,a=void 0===e?S9:e,o=a.options,s=void 0===o?S9:o,l=a.plugins,c=void 0===l?x9:l,u=new m9(s),g=[],d=function(e){function t(t){if(t)try{e(t+"}")}catch(e){}}return function(n,i,r,a,o,s,l,c,u,g){switch(n){case 1:if(0===u&&64===i.charCodeAt(0))return e(i+";"),"";break;case 2:if(0===c)return i+"/*|*/";break;case 3:switch(c){case 102:case 112:return e(r[0]+i),"";default:return i+(0===g?"/*|*/":"")}case-2:i.split("/*|*/}").forEach(t)}}}((function(e){g.push(e)})),h=function(e,i,a){return 0===i&&-1!==c4.indexOf(a[n.length])||a.match(r)?e:"."+t};function f(e,a,o,s){void 0===s&&(s="&");var l=e.replace(l4,""),c=a&&o?o+" "+a+" { "+l+" }":l;return t=s,n=a,i=new RegExp("\\"+n+"\\b","g"),r=new RegExp("(\\"+n+"\\b){2,}"),u(o||!a?"":a,c)}return u.use([].concat(c,[function(e,t,r){2===e&&r.length&&r[0].lastIndexOf(n)>0&&(r[0]=r[0].replace(i,h))},d,function(e){if(-2===e){var t=g;return g=[],t}}])),f.hash=c.length?c.reduce((function(e,t){return t.name||F9(15),i4(e,t.name)}),5381).toString():"",f}var g4=t.createContext(),d4=(g4.Consumer,t.createContext()),h4=(d4.Consumer,new $9),f4=u4();function p4(){return(0,t.useContext)(g4)||h4}function I4(){return(0,t.useContext)(d4)||f4}function C4(e){var n=(0,t.useState)(e.stylisPlugins),i=n[0],r=n[1],a=p4(),o=(0,t.useMemo)((function(){var t=a;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t}),[e.disableCSSOMInjection,e.sheet,e.target]),s=(0,t.useMemo)((function(){return u4({options:{prefix:!e.disableVendorPrefixes},plugins:i})}),[e.disableVendorPrefixes,i]);return(0,t.useEffect)((function(){C9()(i,e.stylisPlugins)||r(e.stylisPlugins)}),[e.stylisPlugins]),t.createElement(g4.Provider,{value:o},t.createElement(d4.Provider,{value:s},e.children))}var m4=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=f4);var i=n.name+t.hash;e.hasNameForId(n.id,i)||e.insertRules(n.id,i,t(n.rules,i,"@keyframes"))},this.toString=function(){return F9(12,String(n.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=t}return e.prototype.getName=function(e){return void 0===e&&(e=f4),this.name+e.hash},e}(),v4=/([A-Z])/,A4=/([A-Z])/g,b4=/^ms-/,y4=function(e){return"-"+e.toLowerCase()};function G4(e){return v4.test(e)?e.replace(A4,y4).replace(b4,"-ms-"):e}var w4=function(e){return null==e||!1===e||""===e};function B4(e,t,n,i){if(Array.isArray(e)){for(var r,a=[],o=0,s=e.length;o<s;o+=1)""!==(r=B4(e[o],t,n,i))&&(Array.isArray(r)?a.push.apply(a,r):a.push(r));return a}return w4(e)?"":R9(e)?"."+e.styledComponentId:Z9(e)?"function"!=typeof(l=e)||l.prototype&&l.prototype.isReactComponent||!t?e:B4(e(t),t,n,i):e instanceof m4?n?(e.inject(n,i),e.getName(i)):e:B9(e)?function e(t,n){var i,r,a=[];for(var o in t)t.hasOwnProperty(o)&&!w4(t[o])&&(Array.isArray(t[o])&&t[o].isCss||Z9(t[o])?a.push(G4(o)+":",t[o],";"):B9(t[o])?a.push.apply(a,e(t[o],o)):a.push(G4(o)+": "+(i=o,(null==(r=t[o])||"boolean"==typeof r||""===r?"":"number"!=typeof r||0===r||i in v9||i.startsWith("--")?String(r).trim():r+"px")+";")));return n?[n+" {"].concat(a,["}"]):a}(e):e.toString();var l}var x4=function(e){return Array.isArray(e)&&(e.isCss=!0),e};function S4(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return Z9(e)||B9(e)?x4(B4(w9(x9,[e].concat(n)))):0===n.length&&1===e.length&&"string"==typeof e[0]?e:x4(B4(w9(e,n)))}new Set;var Z4=function(e,t,n){return void 0===n&&(n=S9),e.theme!==n.theme&&e.theme||t||n.theme},k4=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,R4=/(^-|-$)/g;function W4(e){return e.replace(k4,"-").replace(R4,"")}var M4=function(e){return n4(r4(e)>>>0)};function V4(e){return"string"==typeof e&&!0}var F4=function(e){return"function"==typeof e||"object"==typeof e&&null!==e&&!Array.isArray(e)},N4=function(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e};function H4(e,t,n){var i=e[n];F4(t)&&F4(i)?T4(i,t):e[n]=t}function T4(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var r=0,a=n;r<a.length;r++){var o=a[r];if(F4(o))for(var s in o)N4(s)&&H4(e,o[s],s)}return e}var X4=t.createContext();X4.Consumer;var Y4={};function E4(e,n,i){var r=R9(e),a=!V4(e),o=n.attrs,s=void 0===o?x9:o,l=n.componentId,c=void 0===l?function(e,t){var n="string"!=typeof e?"sc":W4(e);Y4[n]=(Y4[n]||0)+1;var i=n+"-"+M4("5.3.11"+n+Y4[n]);return t?t+"-"+i:i}(n.displayName,n.parentComponentId):l,u=n.displayName,g=void 0===u?function(e){return V4(e)?"styled."+e:"Styled("+k9(e)+")"}(e):u,d=n.displayName&&n.componentId?W4(n.displayName)+"-"+n.componentId:n.componentId||c,h=r&&e.attrs?Array.prototype.concat(e.attrs,s).filter(Boolean):s,f=n.shouldForwardProp;r&&e.shouldForwardProp&&(f=n.shouldForwardProp?function(t,i,r){return e.shouldForwardProp(t,i,r)&&n.shouldForwardProp(t,i,r)}:e.shouldForwardProp);var p,I=new s4(i,d,r?e.componentStyle:void 0),C=I.isStatic&&0===s.length,m=function(e,n){return function(e,n,i,r){var a=e.attrs,o=e.componentStyle,s=e.defaultProps,l=e.foldedComponentIds,c=e.shouldForwardProp,u=e.styledComponentId,g=e.target,d=function(e,t,n){void 0===e&&(e=S9);var i=G9({},t,{theme:e}),r={};return n.forEach((function(e){var t,n,a,o=e;for(t in Z9(o)&&(o=o(i)),o)i[t]=r[t]="className"===t?(n=r[t],a=o[t],n&&a?n+" "+a:n||a):o[t]})),[i,r]}(Z4(n,(0,t.useContext)(X4),s)||S9,n,a),h=d[0],f=d[1],p=function(e,t,n,i){var r=p4(),a=I4();return t?e.generateAndInjectStyles(S9,r,a):e.generateAndInjectStyles(n,r,a)}(o,r,h),I=i,C=f.$as||n.$as||f.as||n.as||g,m=V4(C),v=f!==n?G9({},n,{},f):n,A={};for(var b in v)"$"!==b[0]&&"as"!==b&&("forwardedAs"===b?A.as=v[b]:(c?c(b,y9,C):!m||y9(b))&&(A[b]=v[b]));return n.style&&f.style!==n.style&&(A.style=G9({},n.style,{},f.style)),A.className=Array.prototype.concat(l,u,p!==u?p:null,n.className,f.className).filter(Boolean).join(" "),A.ref=I,(0,t.createElement)(C,A)}(p,e,n,C)};return m.displayName=g,(p=t.forwardRef(m)).attrs=h,p.componentStyle=I,p.displayName=g,p.shouldForwardProp=f,p.foldedComponentIds=r?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):x9,p.styledComponentId=d,p.target=r?e.target:e,p.withComponent=function(e){var t=n.componentId,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(n,["componentId"]),a=t&&t+"-"+(V4(e)?e:W4(k9(e)));return E4(e,G9({},r,{attrs:h,componentId:a}),i)},Object.defineProperty(p,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(t){this._foldedDefaultProps=r?T4({},e.defaultProps,t):t}}),Object.defineProperty(p,"toString",{value:function(){return"."+p.styledComponentId}}),a&&J()(p,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),p}var z4=function(e){return function e(t,n,i){if(void 0===i&&(i=S9),!(0,p9.isValidElementType)(n))return F9(1,String(n));var r=function(){return t(n,i,S4.apply(void 0,arguments))};return r.withConfig=function(r){return e(t,n,G9({},i,{},r))},r.attrs=function(r){return e(t,n,G9({},i,{attrs:Array.prototype.concat(i.attrs,r).filter(Boolean)}))},r}(E4,e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach((function(e){z4[e]=z4(e)}));!function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=a4(e),$9.registerId(this.componentId+1)}var t=e.prototype;t.createStyles=function(e,t,n,i){var r=i(B4(this.rules,t,n,i).join(""),""),a=this.componentId+e;n.insertRules(a,a,r)},t.removeStyles=function(e,t){t.clearRules(this.componentId+e)},t.renderStyles=function(e,t,n,i){e>2&&$9.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,i)}}();!function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString();if(!t)return"";var n=D9();return"<style "+[n&&'nonce="'+n+'"',W9+'="true"','data-styled-version="5.3.11"'].filter(Boolean).join(" ")+">"+t+"</style>"},this.getStyleTags=function(){return e.sealed?F9(2):e._emitSheetCSS()},this.getStyleElement=function(){var n;if(e.sealed)return F9(2);var i=((n={})[W9]="",n["data-styled-version"]="5.3.11",n.dangerouslySetInnerHTML={__html:e.instance.toString()},n),r=D9();return r&&(i.nonce=r),[t.createElement("style",G9({},i,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new $9({isServer:!0}),this.sealed=!1}var n=e.prototype;n.collectStyles=function(e){return this.sealed?F9(2):t.createElement(C4,{sheet:this.instance},e)},n.interleaveWithNodeStream=function(e){return F9(3)}}();var L4,K4,_4,P4=z4.div(L4||(K4=["\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n\n  grid-gap: 1vh;\n  padding-bottom: 8vh;\n  max-width: 1600px;\n  flex-wrap: wrap;\n  padding-right: 1vh;\n  padding-left: 0;\n  margin-left: -2vh;\n\n  @media only screen and (min-width: 768px) {\n    grid-template-columns: repeat(8, 1fr);\n    grid-auto-rows: 1fr;\n    grid-gap: 1vh;\n  }\n  @media only screen and (max-width: 1750px) {\n    grid-template-columns: repeat(7, 1fr);\n    grid-auto-rows: auto;\n    grid-gap: 1vh;\n  }\n  @media only screen and (max-width: 1600px) {\n    grid-template-columns: repeat(6, 1fr);\n    grid-auto-rows: auto;\n    grid-gap: 1vh;\n  }\n  @media only screen and (max-width: 1400px) {\n    grid-template-columns: repeat(5, 1fr);\n    grid-auto-rows: auto;\n    grid-gap: 1vh;\n  }\n\n  @media only screen and (max-width: 1200px) {\n    grid-template-columns: repeat(4, 1fr);\n    grid-auto-rows: auto;\n    grid-gap: 1vh;\n  }\n\n  @media only screen and (max-width: 600px) {\n    grid-template-columns: repeat(2, 1fr);\n    transform: scale(0.85);\n  }\n"],_4||(_4=K4.slice(0)),L4=Object.freeze(Object.defineProperties(K4,{raw:{value:Object.freeze(_4)}})))),D4=function(){return(0,u.jsx)(P4,{children:f9.map((function(e){return(0,u.jsx)(h9,{nameFront:e.nameFront,nameBack:e.nameBack,icon:e.icon},e.nameFront)}))})},O4=function(){return(0,u.jsxs)(u.Fragment,{children:[" ",(0,u.jsx)(Sc,{}),(0,u.jsxs)("div",{className:"t-heading",children:[(0,u.jsxs)("span",{children:["Haklar\u0131m\u0131z\u0131 \xd6\u011frenelim... ",(0,u.jsx)("br",{})," "]}),(0,u.jsx)("span",{children:"\xc7ocuk Haklar\u0131 "}),(0,u.jsx)("span",{children:"Nedir?"}),(0,u.jsxs)("span",{style:{fontSize:"14pt"},children:[(0,u.jsx)("br",{}),"A\xe7\u0131klamalar i\xe7in \xe7ocuk haklar\u0131 logolar\u0131na t\u0131klay\u0131n\u0131z."]}),(0,u.jsx)("div",{className:"blur t-blur1",style:{background:"var(--purple)"}}),(0,u.jsx)("div",{className:"blur t-blur2",style:{background:"#ccffee"}})]}),(0,u.jsxs)("div",{style:{marginTop:"9rem"},children:[(0,u.jsx)("div",{style:{backgroundImage:"url(".concat(xZ,")"),backgroundRepeat:"no-repeat",backgroundSize:"cover",width:"22rem",height:"22rem",display:"flex",justifyContent:"space-between",alignItems:"center",marginLeft:"58rem",marginTop:"-26rem"}}),(0,u.jsx)(D4,{})]})]})},U4=function(){if(document.getElementById("progress")&&document.getElementById("progress-value")){var e=document.getElementById("progress"),t=document.documentElement.scrollTop,n=document.documentElement.scrollHeight-document.documentElement.clientHeight,i=Math.round(100*t/n);e.style.display=t>100?"grid":"none",e.addEventListener("click",(function(){document.documentElement.scrollTop=0})),e.style.background="conic-gradient(#FF4500 ".concat(i,"%, #d7d7d7 ").concat(i,"%)")}};window.onscroll=U4,window.onload=U4;var j4=function(){var e=(0,t.useContext)(g).state.darkMode,n=c((0,t.useState)(null),2);return n[0],n[1],(0,u.jsxs)("div",{className:"App",style:{background:e?"black":"",color:e?"white":""},children:[(0,u.jsx)(Ce,{children:(0,u.jsxs)(fe,{children:[(0,u.jsx)(le,{path:"/",exact:!0,component:RZ}),(0,u.jsx)(le,{path:"/main",exact:!0,component:B5}),(0,u.jsx)(le,{path:"/sdg",exact:!0,component:s9}),(0,u.jsx)(le,{path:"/cocukhaklari",exact:!0,component:O4}),(0,u.jsx)(le,{path:"/metaverse",exact:!0,component:K1})]})}),(0,u.jsx)("div",{id:"progress",style:{transform:"rotate(-90deg)",zIndex:"999"},children:(0,u.jsx)("svg",{id:"progress-value",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,u.jsx)("path",{d:"M6 18L18 12L6 6V18Z",fill:"orange"})})})]})};r.render((0,u.jsx)(Ce,{children:(0,u.jsx)(f,{children:(0,u.jsx)(j4,{})})}),document.getElementById("root"))}()}();
//# sourceMappingURL=main.268f2247.js.map